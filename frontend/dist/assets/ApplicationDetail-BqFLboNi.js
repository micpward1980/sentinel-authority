import{j as e,e as ye,b as fe,a as be,u as je,c as ve,d as y,L as ae}from"./index-CX16vluL.js";import{r as u,k as Se,R as we}from"./icons-DL0PQMVt.js";import{R as Ce}from"./vendor-DYB3FAiG.js";import{P as B}from"./Panel-BZLWMmSE.js";const c={bgPrimary:"#0d0d1a",textPrimary:"#e8e8f0",textSecondary:"#a0a0b0",textTertiary:"#6a6a80",purpleBright:"#8b5cf6",greenBright:"#10b981",redBright:"#ef4444",border:"#2a2a45"},R=({children:i,style:s={}})=>e.jsx("div",{style:{background:"transparent",border:`1px solid ${c.border}`,padding:"24px",...s},children:i}),w=({children:i,onClick:s,variant:p="primary",disabled:l=!1,style:t={}})=>e.jsx("button",{onClick:s,disabled:l,style:{padding:"10px 20px",border:"none",cursor:l?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase",transition:"all 0.2s",opacity:l?.5:1,...p==="primary"?{background:c.purpleBright,color:"rgba(255,255,255,.94)"}:p==="danger"?{background:c.redBright,color:"rgba(255,255,255,.94)"}:{background:"transparent",border:`1px solid ${c.border}`,color:c.textSecondary},...t},children:i}),f=({label:i,value:s,onChange:p,type:l="text",placeholder:t="",style:x={}})=>e.jsxs("div",{style:{marginBottom:"12px",...x},children:[i&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:c.textTertiary,marginBottom:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:i}),e.jsx("input",{type:l,value:s,onChange:j=>p(l==="number"?parseFloat(j.target.value)||0:j.target.value),placeholder:t,style:{width:"100%",padding:"10px 12px",background:c.bgPrimary,border:`1px solid ${c.border}`,color:c.textPrimary,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"}})]}),H=({label:i,value:s,onChange:p,options:l,style:t={}})=>e.jsxs("div",{style:{marginBottom:"12px",...t},children:[i&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:c.textTertiary,marginBottom:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:i}),e.jsx("select",{value:s,onChange:x=>p(x.target.value),style:{width:"100%",padding:"10px 12px",background:c.bgPrimary,border:`1px solid ${c.border}`,color:c.textPrimary,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:l.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))})]}),_e=({boundary:i,onChange:s,onRemove:p})=>e.jsxs(R,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:c.purpleBright,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"NUMERIC BOUNDARY"}),e.jsx(w,{variant:"danger",onClick:p,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(f,{label:"Name",value:i.name||"",onChange:l=>s({...i,name:l}),placeholder:"e.g., Speed Limit"}),e.jsx(f,{label:"Parameter",value:i.parameter||"",onChange:l=>s({...i,parameter:l}),placeholder:"e.g., speed"}),e.jsx(f,{label:"Min Value",type:"number",value:i.min_value??"",onChange:l=>s({...i,min_value:l||null}),placeholder:"Optional"}),e.jsx(f,{label:"Max Value",type:"number",value:i.max_value??"",onChange:l=>s({...i,max_value:l||null}),placeholder:"Required"}),e.jsx(f,{label:"Unit",value:i.unit||"",onChange:l=>s({...i,unit:l}),placeholder:"e.g., km/h, °C"}),e.jsx(f,{label:"Tolerance",type:"number",value:i.tolerance||0,onChange:l=>s({...i,tolerance:l}),placeholder:"0"})]}),e.jsx(H,{label:"On Violation",value:i.violation_action||"block",onChange:l=>s({...i,violation_action:l}),options:[{value:"block",label:"Block Action"},{value:"warn",label:"Warn Only"},{value:"log",label:"Log Only"}],style:{marginTop:"12px",marginBottom:0}})]}),Be=({boundary:i,onChange:s,onRemove:p})=>{var l,t;return e.jsxs(R,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:c.greenBright,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"GEOGRAPHIC BOUNDARY"}),e.jsx(w,{variant:"danger",onClick:p,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(f,{label:"Name",value:i.name||"",onChange:x=>s({...i,name:x}),placeholder:"e.g., Warehouse Zone"}),e.jsx(H,{label:"Boundary Type",value:i.boundary_type||"circle",onChange:x=>s({...i,boundary_type:x}),options:[{value:"circle",label:"Circle (Center + Radius)"},{value:"polygon",label:"Polygon (Multiple Points)"}]}),i.boundary_type==="circle"||!i.boundary_type?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[e.jsx(f,{label:"Center Latitude",type:"number",value:((l=i.center)==null?void 0:l.lat)??"",onChange:x=>s({...i,center:{...i.center,lat:x}}),placeholder:"30.2672"}),e.jsx(f,{label:"Center Longitude",type:"number",value:((t=i.center)==null?void 0:t.lon)??"",onChange:x=>s({...i,center:{...i.center,lon:x}}),placeholder:"-97.7431"}),e.jsx(f,{label:"Radius (meters)",type:"number",value:i.radius_meters||"",onChange:x=>s({...i,radius_meters:x}),placeholder:"1000"})]}):e.jsx("div",{style:{color:c.textSecondary,fontSize:"12px",padding:"12px",background:c.bgPrimary},children:"Polygon editor coming soon. For now, enter coordinates as JSON in the raw editor below."})]})},ke=({boundary:i,onChange:s,onRemove:p})=>e.jsxs(R,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#f59e0b",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"TIME BOUNDARY"}),e.jsx(w,{variant:"danger",onClick:p,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(f,{label:"Name",value:i.name||"",onChange:l=>s({...i,name:l}),placeholder:"e.g., Operating Hours"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(f,{label:"Start Hour (0-23)",type:"number",value:i.allowed_hours_start??0,onChange:l=>s({...i,allowed_hours_start:Math.min(23,Math.max(0,l))})}),e.jsx(f,{label:"End Hour (0-23)",type:"number",value:i.allowed_hours_end??23,onChange:l=>s({...i,allowed_hours_end:Math.min(23,Math.max(0,l))})})]}),e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:c.textTertiary,marginBottom:"8px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Allowed Days"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((l,t)=>{const x=i.allowed_days||[0,1,2,3,4,5,6],j=x.includes(t);return e.jsx("button",{onClick:()=>{const F=j?x.filter(C=>C!==t):[...x,t].sort();s({...i,allowed_days:F})},style:{padding:"6px 12px",border:`1px solid ${j?c.purpleBright:c.border}`,background:j?c.purpleBright:"transparent",color:j?"white":c.textSecondary,cursor:"pointer",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:l},l)})})]})]}),ze=({boundary:i,onChange:s,onRemove:p})=>e.jsxs(R,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#ec4899",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"STATE BOUNDARY"}),e.jsx(w,{variant:"danger",onClick:p,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(f,{label:"Name",value:i.name||"",onChange:l=>s({...i,name:l}),placeholder:"e.g., Operation Mode"}),e.jsx(f,{label:"Parameter",value:i.parameter||"",onChange:l=>s({...i,parameter:l}),placeholder:"e.g., mode"})]}),e.jsx(f,{label:"Allowed Values (comma-separated)",value:(i.allowed_values||[]).join(", "),onChange:l=>s({...i,allowed_values:l.split(",").map(t=>t.trim()).filter(Boolean)}),placeholder:"e.g., idle, moving, charging"}),e.jsx(f,{label:"Forbidden Values (comma-separated)",value:(i.forbidden_values||[]).join(", "),onChange:l=>s({...i,forbidden_values:l.split(",").map(t=>t.trim()).filter(Boolean)}),placeholder:"e.g., emergency, override",style:{marginBottom:0}})]});function Te({applicationId:i,initialBoundaries:s,onSave:p,api:l}){var E;const[t,x]=u.useState({numeric_boundaries:[],geo_boundaries:[],time_boundaries:[],state_boundaries:[],safe_state:{action:"stop",notify:!0,log:!0},fail_closed:!0,telemetry_interval:1,heartbeat_interval:60}),[j,F]=u.useState(!1),[C,I]=u.useState(!1),[k,M]=u.useState("");u.useEffect(()=>{s&&typeof s=="object"&&x(m=>({...m,...s}))},[s]),u.useEffect(()=>{M(JSON.stringify(t,null,2))},[t]);const _=m=>{const d=`${m}_boundaries`,b={numeric:{type:"numeric",name:"",parameter:"",max_value:null,unit:"",tolerance:0,violation_action:"block"},geo:{type:"geo",name:"",boundary_type:"circle",center:{lat:0,lon:0},radius_meters:1e3,violation_action:"block"},time:{type:"time",name:"",allowed_hours_start:6,allowed_hours_end:22,allowed_days:[0,1,2,3,4],violation_action:"block"},state:{type:"state",name:"",parameter:"",allowed_values:[],forbidden_values:[],violation_action:"block"}};x(S=>({...S,[d]:[...S[d],b[m]]}))},N=(m,d,b)=>{const S=`${m}_boundaries`;x(D=>({...D,[S]:D[S].map((P,O)=>O===d?b:P)}))},A=(m,d)=>{const b=`${m}_boundaries`;x(S=>({...S,[b]:S[b].filter((D,P)=>P!==d)}))},L=async()=>{F(!0);try{await p(t)}finally{F(!1)}},v=()=>{try{const m=JSON.parse(k);x(m),I(!1)}catch(m){alert("Invalid JSON: "+m.message)}},z=t.numeric_boundaries.length+t.geo_boundaries.length+t.time_boundaries.length+t.state_boundaries.length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:c.purpleBright,margin:0},children:"Boundary Configuration"}),e.jsxs("p",{style:{color:c.textSecondary,margin:"8px 0 0",fontSize:"14px"},children:[z," boundaries defined"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(w,{variant:"secondary",onClick:()=>I(!C),children:C?"Visual Editor":"Raw JSON"}),e.jsx(w,{onClick:L,disabled:j,children:j?"Saving...":"Save Boundaries"})]})]}),C?e.jsxs(R,{children:[e.jsx("textarea",{value:k,onChange:m=>M(m.target.value),style:{width:"100%",minHeight:"400px",padding:"16px",background:c.bgPrimary,border:`1px solid ${c.border}`,color:c.textPrimary,fontSize:"13px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",resize:"vertical"}}),e.jsx(w,{onClick:v,style:{marginTop:"12px"},children:"Apply JSON"})]}):e.jsxs("div",{children:[e.jsxs(R,{style:{marginBottom:"24px"},children:[e.jsx("p",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:c.textTertiary,margin:"0 0 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Add Boundary"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx(w,{variant:"secondary",onClick:()=>_("numeric"),children:"+ Numeric (Speed, Temp, etc.)"}),e.jsx(w,{variant:"secondary",onClick:()=>_("geo"),children:"+ Geographic (Geofence)"}),e.jsx(w,{variant:"secondary",onClick:()=>_("time"),children:"+ Time (Operating Hours)"}),e.jsx(w,{variant:"secondary",onClick:()=>_("state"),children:"+ State (Allowed Modes)"})]})]}),t.numeric_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:c.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Numeric Boundaries (",t.numeric_boundaries.length,")"]}),t.numeric_boundaries.map((m,d)=>e.jsx(_e,{boundary:m,onChange:b=>N("numeric",d,b),onRemove:()=>A("numeric",d)},d))]}),t.geo_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:c.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Geographic Boundaries (",t.geo_boundaries.length,")"]}),t.geo_boundaries.map((m,d)=>e.jsx(Be,{boundary:m,onChange:b=>N("geo",d,b),onRemove:()=>A("geo",d)},d))]}),t.time_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:c.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Time Boundaries (",t.time_boundaries.length,")"]}),t.time_boundaries.map((m,d)=>e.jsx(ke,{boundary:m,onChange:b=>N("time",d,b),onRemove:()=>A("time",d)},d))]}),t.state_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:c.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["State Boundaries (",t.state_boundaries.length,")"]}),t.state_boundaries.map((m,d)=>e.jsx(ze,{boundary:m,onChange:b=>N("state",d,b),onRemove:()=>A("state",d)},d))]}),e.jsxs(R,{children:[e.jsx("h3",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:c.textTertiary,margin:"0 0 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Enforcement Settings"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsx(H,{label:"On Violation",value:((E=t.safe_state)==null?void 0:E.action)||"stop",onChange:m=>x(d=>({...d,safe_state:{...d.safe_state,action:m}})),options:[{value:"stop",label:"Stop System"},{value:"reduce",label:"Reduce Operation"},{value:"handoff",label:"Human Handoff"}]}),e.jsx(H,{label:"Fail Mode",value:t.fail_closed?"closed":"open",onChange:m=>x(d=>({...d,fail_closed:m==="closed"})),options:[{value:"closed",label:"Fail Closed (Block)"},{value:"open",label:"Fail Open (Allow)"}]}),e.jsx(f,{label:"Telemetry Interval (sec)",type:"number",value:t.telemetry_interval||1,onChange:m=>x(d=>({...d,telemetry_interval:m}))})]})]}),z===0&&e.jsxs(R,{style:{textAlign:"center",padding:"48px"},children:[e.jsx("p",{style:{color:c.textSecondary,fontSize:"16px",margin:0},children:"No boundaries defined yet."}),e.jsx("p",{style:{color:c.textTertiary,fontSize:"14px",marginTop:"8px"},children:"Add boundaries above to define the system's Operational Design Domain."})]})]})]})}const g="Consolas, 'IBM Plex Mono', monospace",a={purple:"#a896d6",green:"#5CD685",red:"#D65C5C",amber:"#D6A05C",text:"rgba(255,255,255,.78)",textDim:"rgba(255,255,255,.50)",border:"rgba(255,255,255,.07)"};function Ae(){const{id:i}=ye(),s=fe(),{user:p}=be(),l=je();ve();const[t,x]=u.useState(null),[j,F]=u.useState([]),[C,I]=u.useState([]),[k,M]=u.useState(""),[_,N]=u.useState(!1),[A,L]=u.useState(!1),[v,z]=u.useState(null),[E,m]=u.useState(null),[d,b]=u.useState({org_verified:!1,system_in_scope:!1,contact_valid:!1,application_complete:!1}),[S,D]=u.useState(""),[P,O]=u.useState(!1),[J,q]=u.useState(""),[G,V]=u.useState(!1);u.useEffect(()=>{i&&(y.get("/api/applications/"+i).then(n=>{x(n.data),n.data.review_checklist&&b(r=>({...r,...n.data.review_checklist}))}).catch(console.error),y.get("/api/applications/"+i+"/history").then(n=>F(n.data)).catch(console.error),y.get("/api/applications/"+i+"/comments").then(n=>I(n.data)).catch(console.error))},[i]);const W=async()=>{try{const n=await y.get("/api/applications/"+i);x(n.data);const r=await y.get("/api/applications/"+i+"/history");F(r.data)}catch(n){console.error("Refresh failed:",n)}},U=async(n,r)=>{try{const o=await y.get("/api/applications/"+i+"/email-preview?new_state="+n);z({...o.data,label:r,newState:n})}catch{s.show("Preview failed","error")}},oe=async()=>{var n,r;if(v)try{if(await y.patch("/api/applications/"+i+"/state?new_state="+v.newState),v.newState==="approved")try{await y.post("/api/cat72/tests",{application_id:parseInt(i)}),s.show("CAT-72 test auto-scheduled","success")}catch(o){console.error("Auto-schedule CAT-72:",o.message)}z(null),await W(),s.show("State changed to "+v.newState,"success")}catch(o){s.show("Failed: "+(((r=(n=o.response)==null?void 0:n.data)==null?void 0:r.detail)||o.message),"error")}},Y=async(n,r)=>{var o,h;if(await l({title:"Change State",message:r+"?"}))try{await y.patch("/api/applications/"+i+"/state?new_state="+n),await W(),s.show("State updated","success")}catch(T){s.show("Failed: "+(((h=(o=T.response)==null?void 0:o.data)==null?void 0:h.detail)||T.message),"error")}},ie=async()=>{var n,r;if(await l({title:"Begin Review",message:"Move this application to In Review? The applicant will be notified that review has started."}))try{await y.patch("/api/applications/"+i+"/state?new_state=under_review"),await W(),s.show("Application moved to review","success")}catch(o){s.show("Failed: "+(((r=(n=o.response)==null?void 0:n.data)==null?void 0:r.detail)||o.message),"error")}},Q=()=>U("approved","Approve Application"),se=()=>U("suspended","Withdraw Application"),re=async()=>{var n,r;if(await l({title:"Reinstate",message:"Reinstate this application to pending?"}))try{await y.patch("/api/applications/"+i+"/state?new_state=pending"),await W()}catch(o){s.show("Failed: "+(((r=(n=o.response)==null?void 0:n.data)==null?void 0:r.detail)||o.message),"error")}},le=async()=>{var n,r;if(!S.trim()){s.show("Please provide a reason","error");return}if(await l({title:"Reject Application",message:"Reject this application? This will notify the applicant with your reason.",danger:!0,confirmLabel:"Reject"}))try{await y.patch("/api/applications/"+i+"/state?new_state=rejected"),await y.post("/api/applications/"+i+"/comments",{content:"REJECTED: "+S,is_internal:!1}),O(!1),D(""),await W(),s.show("Application rejected","success")}catch(o){s.show("Failed: "+(((r=(n=o.response)==null?void 0:n.data)==null?void 0:r.detail)||o.message),"error")}},pe=async()=>{var n,r;if(!J.trim()){s.show("Please describe what info is needed","error");return}try{await y.post("/api/applications/"+i+"/comments",{content:"INFO REQUESTED: "+J,is_internal:!1}),V(!1),q("");const o=await y.get("/api/applications/"+i+"/comments");I(o.data),s.show("Request sent and logged","success")}catch(o){s.show("Failed: "+(((r=(n=o.response)==null?void 0:n.data)==null?void 0:r.detail)||o.message),"error")}},de=async()=>{var n,r;if(k.trim()){L(!0);try{const o=await y.post("/api/applications/"+i+"/comments",{content:k,is_internal:_});I(h=>[o.data,...h]),M(""),N(!1),s.show("Comment added","success")}catch(o){s.show("Failed: "+(((r=(n=o.response)==null?void 0:n.data)==null?void 0:r.detail)||o.message),"error")}L(!1)}},ce=async n=>{var r,o;try{await y.delete("/api/applications/"+i+"/comments/"+n),I(h=>h.filter(T=>T.id!==n)),s.show("Comment deleted","success")}catch(h){s.show("Failed: "+(((o=(r=h.response)==null?void 0:r.data)==null?void 0:o.detail)||h.message),"error")}},xe=n=>{b(r=>{const o={...r,[n]:!r[n]};return y.patch("/api/applicants/"+i,{review_checklist:o}).catch(()=>{}),o})},Z=Object.values(d).every(Boolean),K=[{key:"pending",label:"Submitted",icon:"1"},{key:"under_review",label:"In Review",icon:"2"},{key:"approved",label:"Awaiting Deploy",icon:"3"}],me=K.findIndex(n=>n.key===(t==null?void 0:t.state)),ge=(t==null?void 0:t.state)==="revoked"||(t==null?void 0:t.state)==="suspended"||(t==null?void 0:t.state)==="rejected"||(t==null?void 0:t.state)==="failed",he=()=>{switch(t==null?void 0:t.state){case"pending":return"Application queued for review by the Sentinel Authority team.";case"under_review":return"Evaluating ODD specification and safety boundary definitions.";case"approved":return"Approved. Customer must install ENVELO Interlock to begin CAT-72.";case"testing":return"CAT-72 in progress. ENVELO Interlock reporting telemetry.";case"conformant":return"ODDC Conformance achieved. Certificate issued.";case"rejected":return"Application rejected. See comments for details.";case"failed":return"CAT-72 test failed. Re-approve to schedule another attempt.";case"revoked":case"suspended":return"Application withdrawn. Contact info@sentinelauthority.org.";default:return""}},ue=n=>({approved:"Awaiting Deploy",under_review:"In Review",conformant:"Certified",pending:"Pending",rejected:"Rejected",suspended:"Withdrawn",revoked:"Revoked",failed:"Failed"})[n]||(n||"").replace(/_/g," ");return t?e.jsxs("div",{className:"space-y-6",children:[v&&Ce.createPortal(e.jsx("div",{onClick:()=>z(null),style:{position:"fixed",inset:0,zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,.75)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)"},children:e.jsxs("div",{onClick:n=>n.stopPropagation(),style:{background:"rgba(18,12,30,0.95)",border:"1px solid rgba(157,140,207,0.12)",maxWidth:"min(650px, 95vw)",width:"95%",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsx("span",{style:{position:"absolute",top:-1,left:-1,width:10,height:10,borderTop:"1px solid rgba(157,140,207,0.3)",borderLeft:"1px solid rgba(157,140,207,0.3)"}}),e.jsx("span",{style:{position:"absolute",top:-1,right:-1,width:10,height:10,borderTop:"1px solid rgba(157,140,207,0.3)",borderRight:"1px solid rgba(157,140,207,0.3)"}}),e.jsx("span",{style:{position:"absolute",bottom:-1,left:-1,width:10,height:10,borderBottom:"1px solid rgba(157,140,207,0.3)",borderLeft:"1px solid rgba(157,140,207,0.3)"}}),e.jsx("span",{style:{position:"absolute",bottom:-1,right:-1,width:10,height:10,borderBottom:"1px solid rgba(157,140,207,0.3)",borderRight:"1px solid rgba(157,140,207,0.3)"}}),e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,.04)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontFamily:g,fontSize:"9px",letterSpacing:"3px",textTransform:"uppercase",color:"rgba(157,140,207,0.6)"},children:"Email Preview"}),e.jsxs("p",{style:{margin:"4px 0 0",fontSize:"12px",color:a.textDim},children:["This email will be sent to ",e.jsx("strong",{style:{color:"rgba(255,255,255,.94)"},children:v.to})]})]}),e.jsx("button",{onClick:()=>z(null),style:{background:"none",border:"none",color:"rgba(255,255,255,.4)",cursor:"pointer",fontSize:"16px",padding:"4px 8px"},children:"✕"})]}),e.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("div",{style:{fontFamily:g,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:"rgba(255,255,255,.35)",marginBottom:"4px"},children:"Subject"}),e.jsx("div",{style:{fontSize:"14px",color:"rgba(255,255,255,.94)",fontWeight:400},children:v.subject})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px 24px"},children:e.jsx("div",{style:{background:"#fff",overflow:"hidden"},dangerouslySetInnerHTML:{__html:v.html}})}),e.jsxs("div",{style:{padding:"16px 24px",display:"flex",justifyContent:"flex-end",gap:"10px",borderTop:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("button",{onClick:()=>z(null),style:{padding:"8px 20px",background:"transparent",border:"1px solid rgba(255,255,255,.06)",color:"rgba(255,255,255,.5)",fontFamily:g,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:oe,style:{padding:"8px 20px",background:"transparent",border:"1px solid "+(v.newState==="suspended"?"rgba(214,92,92,0.3)":"rgba(157,140,207,0.25)"),color:v.newState==="suspended"?a.red:"rgba(157,140,207,0.9)",fontFamily:g,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",cursor:"pointer"},children:[v.label," + Send Email"]})]})]})}),document.body),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ae,{to:"/applications",className:"flex items-center gap-2 no-underline",style:{color:a.textDim,fontFamily:g,fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(Se,{className:"w-4 h-4"})," Back to Applications"]}),(p==null?void 0:p.role)==="admin"&&e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.state==="under_review"&&e.jsx("button",{onClick:()=>Y("pending","Move back to Pending"),className:"px-3 py-2 btn",style:{fontSize:"11px"},children:"← Pending"}),t.state==="approved"&&e.jsx("button",{onClick:()=>Y("under_review","Move back to Review"),className:"px-3 py-2 btn",style:{fontSize:"11px"},children:"← Review"}),t.state==="pending"&&e.jsx("button",{onClick:ie,className:"px-3 py-2 btn",style:{fontSize:"11px",color:a.purple},children:"Begin Review →"}),t.state==="under_review"&&Z&&e.jsx("button",{onClick:Q,className:"px-3 py-2 btn",style:{fontSize:"11px",color:a.green},children:"Approve →"}),["pending","under_review","approved"].includes(t.state)&&e.jsx("button",{onClick:se,className:"px-3 py-2 btn",style:{fontSize:"11px",color:a.red},children:"Withdraw"}),(t.state==="suspended"||t.state==="revoked"||t.state==="rejected")&&e.jsx("button",{onClick:re,className:"px-3 py-2 btn",style:{fontSize:"11px",color:a.green},children:"Reinstate"})]})]}),e.jsx(B,{children:e.jsxs("div",{style:{padding:"8px 0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginBottom:"20px"},children:K.map((n,r)=>{const o=n.key===t.state,h=me>r;return e.jsxs(we.Fragment,{children:[r>0&&e.jsx("div",{style:{flex:1,height:"2px",background:h?a.green:a.border,margin:"0 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minWidth:"80px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:g,fontSize:"12px",fontWeight:"bold",background:h?"rgba(92,214,133,0.2)":o?"rgba(157,140,207,0.25)":"rgba(255,255,255,0.03)",border:"2px solid "+(h?a.green:o?a.purple:a.border),color:h?a.green:o?a.purple:a.textDim},children:h?"✓":n.icon}),e.jsx("span",{style:{fontFamily:g,fontSize:"9px",letterSpacing:"0.5px",textTransform:"uppercase",color:o?a.purple:h?a.green:a.textDim,textAlign:"center"},children:n.label})]})]},n.key)})}),ge&&e.jsx("div",{style:{padding:"12px 16px",border:"1px solid "+a.border,marginBottom:"12px"},children:e.jsxs("span",{style:{color:a.red,fontFamily:g,fontSize:"11px"},children:["⚠ ",t.state==="rejected"?"REJECTED":t.state==="failed"?"FAILED":"WITHDRAWN"," — See comments for details."]})}),e.jsx("div",{style:{padding:"12px 16px",border:"1px solid "+a.border},children:e.jsx("span",{style:{color:a.text,fontSize:"13px",lineHeight:"1.5"},children:he()})})]})}),E&&e.jsx("div",{style:{padding:"16px",border:"1px solid "+a.border},children:e.jsxs("p",{style:{color:a.green,fontFamily:g,fontSize:"12px",margin:0},children:["CAT-72 Test Scheduled: ",E.test_id," — ",e.jsx(ae,{to:"/cat72",style:{color:a.purple},children:"Go to Console"})]})}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontFamily:g,fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:a.purple,marginBottom:"8px"},children:["Application ",t.application_number]}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 4vw, 32px)",fontWeight:200,letterSpacing:"-0.02em",margin:0},children:t.system_name}),e.jsx("p",{style:{color:a.text,marginTop:"8px"},children:t.system_description})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Organization"}),e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontSize:"18px",marginBottom:"8px"},children:t.organization_name}),e.jsxs("p",{style:{color:a.text,marginBottom:"4px"},children:[e.jsx("strong",{children:"Contact:"})," ",t.contact_name]}),e.jsxs("p",{style:{color:a.text,marginBottom:"4px"},children:[e.jsx("strong",{children:"Email:"})," ",t.contact_email]}),t.contact_phone&&e.jsxs("p",{style:{color:a.text},children:[e.jsx("strong",{children:"Phone:"})," ",t.contact_phone]})]}),e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Status"}),e.jsx("span",{style:{fontFamily:g,fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase",color:t.state==="approved"?a.green:t.state==="rejected"||t.state==="failed"||t.state==="suspended"?a.red:a.amber},children:ue(t.state)}),e.jsxs("p",{style:{color:a.text,marginTop:"12px"},children:[e.jsx("strong",{children:"Submitted:"})," ",t.submitted_at?new Date(t.submitted_at).toLocaleString():"N/A"]})]})]}),t.state==="under_review"&&(p==null?void 0:p.role)==="admin"&&e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Review Checklist"}),e.jsx("p",{style:{color:a.textDim,fontSize:"12px",marginBottom:"16px"},children:"Verify the applicant before provisioning Interlock access. Technical specs are pulled automatically after install."}),e.jsx("div",{style:{display:"grid",gap:"0"},children:[{key:"org_verified",label:"Organization Verified",desc:"Applicant is a legitimate entity with verifiable corporate identity"},{key:"system_in_scope",label:"System In Scope",desc:"Autonomous system type falls within ODDC certification scope"},{key:"contact_valid",label:"Contact Information",desc:"Primary contact is reachable and authorized to represent the organization"},{key:"application_complete",label:"Application Complete",desc:"All required fields submitted — system name, description, and org details"}].map(n=>e.jsxs("div",{onClick:()=>xe(n.key),style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"14px 12px",borderBottom:"1px solid rgba(255,255,255,.04)",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"3px",border:"2px solid "+(d[n.key]?a.green:"rgba(255,255,255,.15)"),background:d[n.key]?"rgba(92,214,133,0.15)":"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginTop:"2px",transition:"all 0.2s"},children:d[n.key]&&e.jsx("span",{style:{color:a.green,fontSize:"14px",lineHeight:1},children:"✓"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:g,fontSize:"12px",color:d[n.key]?a.green:"rgba(255,255,255,.94)",letterSpacing:"0.5px",marginBottom:"4px"},children:n.label}),e.jsx("div",{style:{fontSize:"12px",color:a.textDim,lineHeight:1.4},children:n.desc})]})]},n.key))}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px",flexWrap:"wrap"},children:[Z&&e.jsx("button",{onClick:Q,className:"px-4 py-2 btn",style:{color:a.green,borderColor:"rgba(92,214,133,.3)"},children:"Approve Application →"}),e.jsx("button",{onClick:()=>V(!G),className:"px-4 py-2 btn",style:{color:a.amber},children:"Request More Info"}),e.jsx("button",{onClick:()=>O(!P),className:"px-4 py-2 btn",style:{color:a.red},children:"Reject"})]}),G&&e.jsxs("div",{style:{marginTop:"16px",padding:"16px",border:"1px solid rgba(214,160,92,.2)"},children:[e.jsx("div",{style:{fontFamily:g,fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:a.amber,marginBottom:"8px"},children:"Request Additional Information"}),e.jsx("textarea",{value:J,onChange:n=>q(n.target.value),rows:3,placeholder:"Describe what information is missing or unclear...",style:{width:"100%",background:"rgba(255,255,255,0.03)",border:"1px solid "+a.border,color:"rgba(255,255,255,.94)",fontSize:"13px",padding:"12px",fontFamily:"inherit",resize:"none",outline:"none"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{V(!1),q("")},className:"px-3 py-2 btn",style:{fontSize:"11px"},children:"Cancel"}),e.jsx("button",{onClick:pe,className:"px-3 py-2 btn",style:{fontSize:"11px",color:a.amber,borderColor:"rgba(214,160,92,.3)"},children:"Send Request"})]})]}),P&&e.jsxs("div",{style:{marginTop:"16px",padding:"16px",border:"1px solid rgba(214,92,92,.2)"},children:[e.jsx("div",{style:{fontFamily:g,fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:a.red,marginBottom:"8px"},children:"Reject Application"}),e.jsx("textarea",{value:S,onChange:n=>D(n.target.value),rows:3,placeholder:"Explain why this application is being rejected...",style:{width:"100%",background:"rgba(255,255,255,0.03)",border:"1px solid "+a.border,color:"rgba(255,255,255,.94)",fontSize:"13px",padding:"12px",fontFamily:"inherit",resize:"none",outline:"none"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{O(!1),D("")},className:"px-3 py-2 btn",style:{fontSize:"11px"},children:"Cancel"}),e.jsx("button",{onClick:le,className:"px-3 py-2 btn",style:{fontSize:"11px",color:a.red,borderColor:"rgba(214,92,92,.3)"},children:"Reject Application"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"System Details"}),e.jsxs("p",{style:{color:a.text,marginBottom:"8px"},children:[e.jsx("strong",{children:"Version:"})," ",t.system_version||"N/A"]}),e.jsxs("p",{style:{color:a.text,marginBottom:"8px"},children:[e.jsx("strong",{children:"Manufacturer:"})," ",t.manufacturer||"N/A"]}),t.facility_location&&e.jsxs("p",{style:{color:a.text,marginBottom:"8px"},children:[e.jsx("strong",{children:"Facility:"})," ",t.facility_location]})]}),e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Safety Boundaries"}),(()=>{const n=typeof t.envelope_definition=="string"?(()=>{try{return JSON.parse(t.envelope_definition)}catch{return null}})():t.envelope_definition,r=(n==null?void 0:n.boundaries)||[];return r.length===0?e.jsx("p",{style:{color:a.textDim,fontSize:"13px",fontStyle:"italic"},children:"No boundaries defined"}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{borderBottom:"1px solid "+a.border},children:["Type","Constraint","Unit"].map(o=>e.jsx("th",{style:{fontFamily:g,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:a.textDim,fontWeight:400,padding:"8px 12px",textAlign:"left"},children:o},o))})}),e.jsx("tbody",{children:r.map((o,h)=>{const T=o.max&&o.min?o.min+" - "+o.max:o.max?"<= "+o.max:o.min?">= "+o.min:o.radius_m?"radius "+o.radius_m+"m":o.corridors?o.corridors.join(", "):o.polygon||"-";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("td",{style:{padding:"8px 12px",fontFamily:g,fontSize:"11px",color:a.purple,textTransform:"uppercase",letterSpacing:"0.5px"},children:o.type}),e.jsx("td",{style:{padding:"8px 12px",color:a.text,fontSize:"13px"},children:T}),e.jsx("td",{style:{padding:"8px 12px",fontFamily:g,fontSize:"11px",color:a.textDim},children:o.unit||"-"})]},h)})})]})})()]})]}),(p==null?void 0:p.role)==="admin"&&(()=>{var r;const n=typeof t.envelope_definition=="string"?(()=>{try{return JSON.parse(t.envelope_definition)}catch{return null}})():t.envelope_definition;return((r=n==null?void 0:n.boundaries)==null?void 0:r.length)>0?null:e.jsx(Te,{applicationId:t.id,initialBoundaries:t.envelope_definition||{},onSave:async o=>{try{await y.patch("/api/applicants/"+t.id,{envelope_definition:o}),s.show("Boundaries saved","success"),x({...t,envelope_definition:o})}catch(h){s.show("Failed: "+h.message,"error")}}})})(),e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"ODD Specification"}),(()=>{const n=typeof t.odd_specification=="string"?(()=>{try{return JSON.parse(t.odd_specification)}catch{return null}})():t.odd_specification;return!n||Object.keys(n).length===0?e.jsx("p",{style:{color:a.textDim,fontSize:"13px",fontStyle:"italic"},children:"Not specified"}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0"},children:Object.entries(n).map(([r,o])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",borderBottom:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("span",{style:{fontFamily:g,fontSize:"10px",color:a.textDim,textTransform:"uppercase",letterSpacing:"0.5px"},children:r.replace(/_/g," ")}),e.jsx("span",{style:{color:a.text,fontSize:"13px",textAlign:"right"},children:Array.isArray(o)?o.join(", "):typeof o=="boolean"?o?"Yes":"No":String(o)})]},r))})})()]}),j.length>0&&e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"State Change History"}),e.jsxs("div",{style:{position:"relative",paddingLeft:"28px"},children:[e.jsx("div",{style:{position:"absolute",left:"8px",top:"4px",bottom:"4px",width:"2px",background:a.border}}),j.map((n,r)=>{var ee,te,ne;const o=(ee=n.details)==null?void 0:ee.new_state,h=o==="conformant"||o==="approved"?a.green:o==="suspended"||o==="revoked"||o==="rejected"?a.red:o==="under_review"||o==="testing"||n.action==="submitted"?a.purple:a.amber,T=o?o.replace(/_/g," "):(n.action||"").replace(/_/g," "),X=(ne=(te=n.details)==null?void 0:te.old_state)==null?void 0:ne.replace(/_/g," "),$=n.timestamp?new Date(n.timestamp):null;return e.jsxs("div",{style:{position:"relative",paddingBottom:r<j.length-1?"20px":"0"},children:[e.jsx("div",{style:{position:"absolute",left:"-24px",top:"2px",width:"12px",height:"12px",borderRadius:"50%",background:h+"08",border:"2px solid "+h}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontFamily:g,fontSize:"12px",fontWeight:500,color:h,textTransform:"uppercase",letterSpacing:"0.5px"},children:T}),X&&n.action!=="submitted"&&e.jsxs("span",{style:{fontFamily:g,fontSize:"10px",color:a.textDim,marginLeft:"8px"},children:["from ",X]}),e.jsx("div",{style:{marginTop:"4px"},children:e.jsx("span",{style:{fontSize:"12px",color:a.textDim},children:n.user_email})})]}),$&&e.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[e.jsx("div",{style:{fontFamily:g,fontSize:"11px",color:a.textDim},children:$.toLocaleDateString()}),e.jsx("div",{style:{fontFamily:g,fontSize:"10px",color:a.textDim},children:$.toLocaleTimeString()})]})]})]},r)})]})]}),e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Comments & Notes"}),e.jsxs("div",{style:{marginBottom:C.length>0?"20px":"0"},children:[e.jsx("textarea",{value:k,onChange:n=>M(n.target.value),rows:3,placeholder:"Add a comment or note...",className:"w-full px-4 py-3 outline-none resize-none",style:{background:"rgba(255,255,255,0.03)",border:"1px solid "+a.border,color:"rgba(255,255,255,.94)",fontSize:"13px",fontFamily:"inherit"},onFocus:n=>n.target.style.borderColor=a.purple,onBlur:n=>n.target.style.borderColor=a.border}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginTop:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(p==null?void 0:p.role)==="admin"&&e.jsxs("button",{onClick:()=>N(!_),className:"btn",style:{padding:"4px 10px",color:_?a.green:a.textDim,borderColor:_?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Internal ",_?"ON":"OFF"]})}),e.jsx("button",{onClick:de,disabled:A||!k.trim(),className:"px-4 py-2 btn",children:A?"Posting...":"Post Comment"})]})]}),C.length>0&&e.jsx("div",{style:{borderTop:"1px solid "+a.border,paddingTop:"16px"},children:C.map(n=>{var r,o;return e.jsxs("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:g,fontSize:"12px",color:n.user_role==="admin"?a.purple:a.text,fontWeight:500},children:n.user_email}),n.user_role==="admin"&&e.jsx("span",{style:{fontFamily:g,fontSize:"9px",padding:"2px 6px",color:a.purple,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Admin"}),n.is_internal&&e.jsx("span",{style:{fontFamily:g,fontSize:"9px",padding:"2px 6px",color:a.amber,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Internal"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:g,fontSize:"10px",color:a.textDim},children:n.created_at?new Date(n.created_at).toLocaleString():""}),((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.email)===n.user_email)&&e.jsx("button",{onClick:()=>ce(n.id),style:{background:"none",border:"none",color:a.textDim,cursor:"pointer",fontSize:"12px",padding:"0",opacity:.5},children:"x"})]})]}),e.jsx("p",{style:{color:(r=n.content)!=null&&r.startsWith("REJECTED:")?a.red:(o=n.content)!=null&&o.startsWith("INFO REQUESTED:")?a.amber:a.text,fontSize:"13px",lineHeight:1.6,margin:0,whiteSpace:"pre-wrap"},children:n.content})]},n.id)})}),C.length===0&&!k&&e.jsx("p",{style:{color:a.textDim,fontSize:"13px",fontStyle:"italic",margin:0},children:"No comments yet"})]}),t.notes&&e.jsxs(B,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Applicant Notes"}),e.jsx("p",{style:{color:a.text,lineHeight:1.7,whiteSpace:"pre-wrap"},children:t.notes})]})]}):e.jsx("div",{style:{color:a.textDim},children:"Loading..."})}export{Ae as default};
