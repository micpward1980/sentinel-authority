import{j as n,s as t,A as m,L as x,c as u}from"./index-CiYkEjR4.js";import{r as o}from"./icons-CE7UjK-E.js";import{u as y}from"./useQuery-wJN8pz4O.js";import{P as g}from"./Panel-CtACPDlF.js";import{D as h,B as b}from"./Badge-BPyXE4dB.js";import{C as k}from"./CopyableId-Bdj8Orjw.js";import"./vendor-BZ1VDJqt.js";function S(r){return r?new Date(r).toISOString().substring(0,10):"â€”"}function v(r){return r==="conformant"||r==="active"||r==="issued"?"green":r==="suspended"?"amber":r==="revoked"?"red":"dim"}function s(r){return r==="conformant"||r==="active"||r==="issued"}const j=[{key:"active",label:"Active"},{key:"suspended",label:"Suspended"},{key:"revoked",label:"Revoked"},{key:"all",label:"All"}];function A(){const[r,c]=o.useState("active"),{data:i=[],isLoading:p}=y({queryKey:["certificates"],queryFn:()=>u.get("/api/certificates/").then(e=>e.data)}),l=o.useMemo(()=>({all:i.length,active:i.filter(e=>s(e.state)).length,suspended:i.filter(e=>e.state==="suspended").length,revoked:i.filter(e=>e.state==="revoked").length}),[i]),d=o.useMemo(()=>i.filter(e=>r==="all"?!0:r==="active"?s(e.state):e.state===r),[i,r]),f=[{key:"certificate_number",label:"Certificate #",render:e=>n.jsx(k,{id:e.certificate_number,href:"/verify?cert="+e.certificate_number})},{key:"system_name",label:"System",render:e=>n.jsx("span",{style:{color:t.textPrimary,fontWeight:500},children:e.system_name})},{key:"organization_name",label:"Organization",style:{color:t.textSecondary}},{key:"state",label:"Status",render:e=>n.jsx(b,{variant:v(e.state),children:e.state})},{key:"expires_at",label:"Expires (UTC)",style:{fontFamily:t.mono,fontSize:"12px",color:t.textTertiary},render:e=>S(e.expires_at)},{key:"actions",label:"Actions",render:e=>n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[s(e.state)?n.jsx("a",{href:m+"/api/certificates/"+e.certificate_number+"/pdf",target:"_blank",rel:"noreferrer noopener",style:{padding:"3px 10px",background:"transparent",border:"none",borderBottom:`1px solid ${t.purpleBright}`,color:t.purpleBright,fontFamily:t.mono,fontSize:"10px",fontWeight:600,letterSpacing:"0.08em",textTransform:"uppercase",textDecoration:"none"},children:"PDF"}):n.jsx("span",{style:{fontFamily:t.mono,fontSize:"10px",color:t.textDim,textTransform:"uppercase"},children:e.state}),n.jsx(x,{to:"/verify?cert="+e.certificate_number,style:{padding:"3px 8px",background:t.cardSurface,border:`1px solid ${t.borderGlass}`,color:t.textTertiary,fontFamily:t.mono,fontSize:"9px",fontWeight:600,letterSpacing:"0.08em",textTransform:"uppercase",textDecoration:"none"},children:"Verify"})]})}];return n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{fontFamily:t.mono,fontSize:"10px",fontWeight:600,letterSpacing:"0.20em",textTransform:"uppercase",color:t.purpleBright,marginBottom:"8px"},children:"Records"}),n.jsx("h1",{style:{fontFamily:t.serif,fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"Certificates"}),n.jsx("p",{style:{color:t.textSecondary,marginTop:"8px",marginBottom:0},children:"Issued ODDC conformance determinations"})]}),n.jsx("div",{style:{display:"flex",gap:"4px",border:`1px solid ${t.borderGlass}`,padding:"4px"},children:j.map(e=>{const a=r===e.key;return n.jsxs("button",{onClick:()=>c(e.key),style:{flex:1,padding:"7px 12px",border:"none",cursor:"pointer",fontFamily:t.mono,fontSize:"10px",fontWeight:a?600:400,letterSpacing:"0.08em",textTransform:"uppercase",background:a?"rgba(74,61,117,0.08)":"transparent",color:a?t.purpleBright:t.textTertiary},children:[e.label,l[e.key]>0?` (${l[e.key]})`:""]},e.key)})}),n.jsx(g,{children:n.jsx(h,{columns:f,rows:d,loading:p,emptyMessage:i.length===0?"No certificates issued":`No ${r==="all"?"":r+" "}certificates`})})]})}export{A as default};
