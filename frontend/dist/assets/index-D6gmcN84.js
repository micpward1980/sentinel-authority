import{r as y,R as co,a as ge,H as er,F as Ae,A as Qe,b as Ze,B as tr,U as nr,S as po,X as Yt,L as xo,M as uo,E as rr,c as et,d as mo,e as tt,f as fo,g as go,h as Me,W as or,i as ho,j as Ne,P as bt,k as ar,C as cn,D as Oe,l as yo}from"./icons-BULLMVW6.js";import{r as bo}from"./vendor-BtP9cXrd.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();var sr={exports:{}},Tt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=y,So=Symbol.for("react.element"),vo=Symbol.for("react.fragment"),wo=Object.prototype.hasOwnProperty,_o=jo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,To={key:!0,ref:!0,__self:!0,__source:!0};function ir(t,r,a){var o,s={},i=null,l=null;a!==void 0&&(i=""+a),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(l=r.ref);for(o in r)wo.call(r,o)&&!To.hasOwnProperty(o)&&(s[o]=r[o]);if(t&&t.defaultProps)for(o in r=t.defaultProps,r)s[o]===void 0&&(s[o]=r[o]);return{$$typeof:So,type:t,key:i,ref:l,props:s,_owner:_o.current}}Tt.Fragment=vo;Tt.jsx=ir;Tt.jsxs=ir;sr.exports=Tt;var e=sr.exports,Kt={},_n=bo;Kt.createRoot=_n.createRoot,Kt.hydrateRoot=_n.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},nt.apply(this,arguments)}var Te;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Te||(Te={}));const Tn="popstate";function Co(t){t===void 0&&(t={});function r(o,s){let{pathname:i,search:l,hash:c}=o.location;return Jt("",{pathname:i,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function a(o,s){return typeof s=="string"?s:jt(s)}return ko(r,a,null,t)}function oe(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function dn(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Bo(){return Math.random().toString(36).substr(2,8)}function Cn(t,r){return{usr:t.state,key:t.key,idx:r}}function Jt(t,r,a,o){return a===void 0&&(a=null),nt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?He(r):r,{state:a,key:r&&r.key||o||Bo()})}function jt(t){let{pathname:r="/",search:a="",hash:o=""}=t;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),o&&o!=="#"&&(r+=o.charAt(0)==="#"?o:"#"+o),r}function He(t){let r={};if(t){let a=t.indexOf("#");a>=0&&(r.hash=t.substr(a),t=t.substr(0,a));let o=t.indexOf("?");o>=0&&(r.search=t.substr(o),t=t.substr(0,o)),t&&(r.pathname=t)}return r}function ko(t,r,a,o){o===void 0&&(o={});let{window:s=document.defaultView,v5Compat:i=!1}=o,l=s.history,c=Te.Pop,d=null,p=m();p==null&&(p=0,l.replaceState(nt({},l.state,{idx:p}),""));function m(){return(l.state||{idx:null}).idx}function g(){c=Te.Pop;let b=m(),f=b==null?null:b-p;p=b,d&&d({action:c,location:x.location,delta:f})}function v(b,f){c=Te.Push;let S=Jt(x.location,b,f);p=m()+1;let j=Cn(S,p),T=x.createHref(S);try{l.pushState(j,"",T)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(T)}i&&d&&d({action:c,location:x.location,delta:1})}function h(b,f){c=Te.Replace;let S=Jt(x.location,b,f);p=m();let j=Cn(S,p),T=x.createHref(S);l.replaceState(j,"",T),i&&d&&d({action:c,location:x.location,delta:0})}function u(b){let f=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof b=="string"?b:jt(b);return S=S.replace(/ $/,"%20"),oe(f,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,f)}let x={get action(){return c},get location(){return t(s,l)},listen(b){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Tn,g),d=b,()=>{s.removeEventListener(Tn,g),d=null}},createHref(b){return r(s,b)},createURL:u,encodeLocation(b){let f=u(b);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:v,replace:h,go(b){return l.go(b)}};return x}var Bn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bn||(Bn={}));function Mo(t,r,a){return a===void 0&&(a="/"),Po(t,r,a)}function Po(t,r,a,o){let s=typeof r=="string"?He(r):r,i=pn(s.pathname||"/",a);if(i==null)return null;let l=lr(t);Io(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let p=Go(i);c=Lo(l[d],p)}return c}function lr(t,r,a,o){r===void 0&&(r=[]),a===void 0&&(a=[]),o===void 0&&(o="");let s=(i,l,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(oe(d.relativePath.startsWith(o),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(o.length));let p=ke([o,d.relativePath]),m=a.concat(d);i.children&&i.children.length>0&&(oe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),lr(i.children,r,m,p)),!(i.path==null&&!i.index)&&r.push({path:p,score:Do(p,i.index),routesMeta:m})};return t.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let d of cr(i.path))s(i,l,d)}),r}function cr(t){let r=t.split("/");if(r.length===0)return[];let[a,...o]=r,s=a.endsWith("?"),i=a.replace(/\?$/,"");if(o.length===0)return s?[i,""]:[i];let l=cr(o.join("/")),c=[];return c.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function Io(t){t.sort((r,a)=>r.score!==a.score?a.score-r.score:Oo(r.routesMeta.map(o=>o.childrenIndex),a.routesMeta.map(o=>o.childrenIndex)))}const zo=/^:[\w-]+$/,Ro=3,Ao=2,No=1,Eo=10,Fo=-2,kn=t=>t==="*";function Do(t,r){let a=t.split("/"),o=a.length;return a.some(kn)&&(o+=Fo),r&&(o+=Ao),a.filter(s=>!kn(s)).reduce((s,i)=>s+(zo.test(i)?Ro:i===""?No:Eo),o)}function Oo(t,r){return t.length===r.length&&t.slice(0,-1).every((o,s)=>o===r[s])?t[t.length-1]-r[r.length-1]:0}function Lo(t,r,a){let{routesMeta:o}=t,s={},i="/",l=[];for(let c=0;c<o.length;++c){let d=o[c],p=c===o.length-1,m=i==="/"?r:r.slice(i.length)||"/",g=Uo({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},m),v=d.route;if(!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:ke([i,g.pathname]),pathnameBase:Yo(ke([i,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(i=ke([i,g.pathnameBase]))}return l}function Uo(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,o]=$o(t.path,t.caseSensitive,t.end),s=r.match(a);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:o.reduce((p,m,g)=>{let{paramName:v,isOptional:h}=m;if(v==="*"){let x=c[g]||"";l=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const u=c[g];return h&&!u?p[v]=void 0:p[v]=(u||"").replace(/%2F/g,"/"),p},{}),pathname:i,pathnameBase:l,pattern:t}}function $o(t,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),dn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(o.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),o]}function Go(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return dn(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function pn(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,o=t.charAt(a);return o&&o!=="/"?null:t.slice(a)||"/"}const Wo=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vo=t=>Wo.test(t);function Ho(t,r){r===void 0&&(r="/");let{pathname:a,search:o="",hash:s=""}=typeof t=="string"?He(t):t,i;if(a)if(Vo(a))i=a;else{if(a.includes("//")){let l=a;a=a.replace(/\/\/+/g,"/"),dn(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+a))}a.startsWith("/")?i=Mn(a.substring(1),"/"):i=Mn(a,r)}else i=r;return{pathname:i,search:Ko(o),hash:Jo(s)}}function Mn(t,r){let a=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function Ot(t,r,a,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qo(t){return t.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function xn(t,r){let a=qo(t);return r?a.map((o,s)=>s===a.length-1?o.pathname:o.pathnameBase):a.map(o=>o.pathnameBase)}function un(t,r,a,o){o===void 0&&(o=!1);let s;typeof t=="string"?s=He(t):(s=nt({},t),oe(!s.pathname||!s.pathname.includes("?"),Ot("?","pathname","search",s)),oe(!s.pathname||!s.pathname.includes("#"),Ot("#","pathname","hash",s)),oe(!s.search||!s.search.includes("#"),Ot("#","search","hash",s)));let i=t===""||s.pathname==="",l=i?"/":s.pathname,c;if(l==null)c=a;else{let g=r.length-1;if(!o&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}c=g>=0?r[g]:"/"}let d=Ho(s,c),p=l&&l!=="/"&&l.endsWith("/"),m=(i||l===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(p||m)&&(d.pathname+="/"),d}const ke=t=>t.join("/").replace(/\/\/+/g,"/"),Yo=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ko=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Jo=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Qo(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dr=["post","put","patch","delete"];new Set(dr);const Xo=["get",...dr];new Set(Xo);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rt(){return rt=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},rt.apply(this,arguments)}const mn=y.createContext(null),Zo=y.createContext(null),Pe=y.createContext(null),Ct=y.createContext(null),_e=y.createContext({outlet:null,matches:[],isDataRoute:!1}),pr=y.createContext(null);function ea(t,r){let{relative:a}=r===void 0?{}:r;qe()||oe(!1);let{basename:o,navigator:s}=y.useContext(Pe),{hash:i,pathname:l,search:c}=ur(t,{relative:a}),d=l;return o!=="/"&&(d=l==="/"?o:ke([o,l])),s.createHref({pathname:d,search:c,hash:i})}function qe(){return y.useContext(Ct)!=null}function Ye(){return qe()||oe(!1),y.useContext(Ct).location}function xr(t){y.useContext(Pe).static||y.useLayoutEffect(t)}function at(){let{isDataRoute:t}=y.useContext(_e);return t?ma():ta()}function ta(){qe()||oe(!1);let t=y.useContext(mn),{basename:r,future:a,navigator:o}=y.useContext(Pe),{matches:s}=y.useContext(_e),{pathname:i}=Ye(),l=JSON.stringify(xn(s,a.v7_relativeSplatPath)),c=y.useRef(!1);return xr(()=>{c.current=!0}),y.useCallback(function(p,m){if(m===void 0&&(m={}),!c.current)return;if(typeof p=="number"){o.go(p);return}let g=un(p,JSON.parse(l),i,m.relative==="path");t==null&&r!=="/"&&(g.pathname=g.pathname==="/"?r:ke([r,g.pathname])),(m.replace?o.replace:o.push)(g,m.state,m)},[r,o,l,i,t])}function na(){let{matches:t}=y.useContext(_e),r=t[t.length-1];return r?r.params:{}}function ur(t,r){let{relative:a}=r===void 0?{}:r,{future:o}=y.useContext(Pe),{matches:s}=y.useContext(_e),{pathname:i}=Ye(),l=JSON.stringify(xn(s,o.v7_relativeSplatPath));return y.useMemo(()=>un(t,JSON.parse(l),i,a==="path"),[t,l,i,a])}function ra(t,r){return oa(t,r)}function oa(t,r,a,o){qe()||oe(!1);let{navigator:s}=y.useContext(Pe),{matches:i}=y.useContext(_e),l=i[i.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=Ye(),m;if(r){var g;let b=typeof r=="string"?He(r):r;d==="/"||(g=b.pathname)!=null&&g.startsWith(d)||oe(!1),m=b}else m=p;let v=m.pathname||"/",h=v;if(d!=="/"){let b=d.replace(/^\//,"").split("/");h="/"+v.replace(/^\//,"").split("/").slice(b.length).join("/")}let u=Mo(t,{pathname:h}),x=ca(u&&u.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:ke([d,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:ke([d,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,a,o);return r&&x?y.createElement(Ct.Provider,{value:{location:rt({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Te.Pop}},x):x}function aa(){let t=ua(),r=Qo(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},r),a?y.createElement("pre",{style:s},a):null,null)}const sa=y.createElement(aa,null);class ia extends y.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error!==void 0?y.createElement(_e.Provider,{value:this.props.routeContext},y.createElement(pr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function la(t){let{routeContext:r,match:a,children:o}=t,s=y.useContext(mn);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),y.createElement(_e.Provider,{value:r},o)}function ca(t,r,a,o){var s;if(r===void 0&&(r=[]),a===void 0&&(a=null),o===void 0&&(o=null),t==null){var i;if(!a)return null;if(a.errors)t=a.matches;else if((i=o)!=null&&i.v7_partialHydration&&r.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let l=t,c=(s=a)==null?void 0:s.errors;if(c!=null){let m=l.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);m>=0||oe(!1),l=l.slice(0,Math.min(l.length,m+1))}let d=!1,p=-1;if(a&&o&&o.v7_partialHydration)for(let m=0;m<l.length;m++){let g=l[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=m),g.route.id){let{loaderData:v,errors:h}=a,u=g.route.loader&&v[g.route.id]===void 0&&(!h||h[g.route.id]===void 0);if(g.route.lazy||u){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((m,g,v)=>{let h,u=!1,x=null,b=null;a&&(h=c&&g.route.id?c[g.route.id]:void 0,x=g.route.errorElement||sa,d&&(p<0&&v===0?(fa("route-fallback"),u=!0,b=null):p===v&&(u=!0,b=g.route.hydrateFallbackElement||null)));let f=r.concat(l.slice(0,v+1)),S=()=>{let j;return h?j=x:u?j=b:g.route.Component?j=y.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=m,y.createElement(la,{match:g,routeContext:{outlet:m,matches:f,isDataRoute:a!=null},children:j})};return a&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?y.createElement(ia,{location:a.location,revalidation:a.revalidation,component:x,error:h,children:S(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):S()},null)}var mr=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mr||{}),fr=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fr||{});function da(t){let r=y.useContext(mn);return r||oe(!1),r}function pa(t){let r=y.useContext(Zo);return r||oe(!1),r}function xa(t){let r=y.useContext(_e);return r||oe(!1),r}function gr(t){let r=xa(),a=r.matches[r.matches.length-1];return a.route.id||oe(!1),a.route.id}function ua(){var t;let r=y.useContext(pr),a=pa(),o=gr();return r!==void 0?r:(t=a.errors)==null?void 0:t[o]}function ma(){let{router:t}=da(mr.UseNavigateStable),r=gr(fr.UseNavigateStable),a=y.useRef(!1);return xr(()=>{a.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),a.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,rt({fromRouteId:r},i)))},[t,r])}const Pn={};function fa(t,r,a){Pn[t]||(Pn[t]=!0)}function ga(t,r){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Qt(t){let{to:r,replace:a,state:o,relative:s}=t;qe()||oe(!1);let{future:i,static:l}=y.useContext(Pe),{matches:c}=y.useContext(_e),{pathname:d}=Ye(),p=at(),m=un(r,xn(c,i.v7_relativeSplatPath),d,s==="path"),g=JSON.stringify(m);return y.useEffect(()=>p(JSON.parse(g),{replace:a,state:o,relative:s}),[p,g,s,a,o]),null}function se(t){oe(!1)}function ha(t){let{basename:r="/",children:a=null,location:o,navigationType:s=Te.Pop,navigator:i,static:l=!1,future:c}=t;qe()&&oe(!1);let d=r.replace(/^\/*/,"/"),p=y.useMemo(()=>({basename:d,navigator:i,static:l,future:rt({v7_relativeSplatPath:!1},c)}),[d,c,i,l]);typeof o=="string"&&(o=He(o));let{pathname:m="/",search:g="",hash:v="",state:h=null,key:u="default"}=o,x=y.useMemo(()=>{let b=pn(m,d);return b==null?null:{location:{pathname:b,search:g,hash:v,state:h,key:u},navigationType:s}},[d,m,g,v,h,u,s]);return x==null?null:y.createElement(Pe.Provider,{value:p},y.createElement(Ct.Provider,{children:a,value:x}))}function ya(t){let{children:r,location:a}=t;return ra(Xt(r),a)}new Promise(()=>{});function Xt(t,r){r===void 0&&(r=[]);let a=[];return y.Children.forEach(t,(o,s)=>{if(!y.isValidElement(o))return;let i=[...r,s];if(o.type===y.Fragment){a.push.apply(a,Xt(o.props.children,i));return}o.type!==se&&oe(!1),!o.props.index||!o.props.children||oe(!1);let l={id:o.props.id||i.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(l.children=Xt(o.props.children,i)),a.push(l)}),a}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},Zt.apply(this,arguments)}function ba(t,r){if(t==null)return{};var a={},o=Object.keys(t),s,i;for(i=0;i<o.length;i++)s=o[i],!(r.indexOf(s)>=0)&&(a[s]=t[s]);return a}function ja(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sa(t,r){return t.button===0&&(!r||r==="_self")&&!ja(t)}const va=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wa="6";try{window.__reactRouterVersion=wa}catch{}const _a="startTransition",In=co[_a];function Ta(t){let{basename:r,children:a,future:o,window:s}=t,i=y.useRef();i.current==null&&(i.current=Co({window:s,v5Compat:!0}));let l=i.current,[c,d]=y.useState({action:l.action,location:l.location}),{v7_startTransition:p}=o||{},m=y.useCallback(g=>{p&&In?In(()=>d(g)):d(g)},[d,p]);return y.useLayoutEffect(()=>l.listen(m),[l,m]),y.useEffect(()=>ga(o),[o]),y.createElement(ha,{basename:r,children:a,location:c.location,navigationType:c.action,navigator:l,future:o})}const Ca=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ba=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ee=y.forwardRef(function(r,a){let{onClick:o,relative:s,reloadDocument:i,replace:l,state:c,target:d,to:p,preventScrollReset:m,viewTransition:g}=r,v=ba(r,va),{basename:h}=y.useContext(Pe),u,x=!1;if(typeof p=="string"&&Ba.test(p)&&(u=p,Ca))try{let j=new URL(window.location.href),T=p.startsWith("//")?new URL(j.protocol+p):new URL(p),C=pn(T.pathname,h);T.origin===j.origin&&C!=null?p=C+T.search+T.hash:x=!0}catch{}let b=ea(p,{relative:s}),f=ka(p,{replace:l,state:c,target:d,preventScrollReset:m,relative:s,viewTransition:g});function S(j){o&&o(j),j.defaultPrevented||f(j)}return y.createElement("a",Zt({},v,{href:u||b,onClick:x||i?o:S,ref:a,target:d}))});var zn;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zn||(zn={}));var Rn;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Rn||(Rn={}));function ka(t,r){let{target:a,replace:o,state:s,preventScrollReset:i,relative:l,viewTransition:c}=r===void 0?{}:r,d=at(),p=Ye(),m=ur(t,{relative:l});return y.useCallback(g=>{if(Sa(g,a)){g.preventDefault();let v=o!==void 0?o:jt(p)===jt(m);d(t,{replace:v,state:s,preventScrollReset:i,relative:l,viewTransition:c})}},[p,d,m,o,s,a,t,i,l,c])}function hr(t,r){return function(){return t.apply(r,arguments)}}const{toString:Ma}=Object.prototype,{getPrototypeOf:fn}=Object,{iterator:Bt,toStringTag:yr}=Symbol,kt=(t=>r=>{const a=Ma.call(r);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),be=t=>(t=t.toLowerCase(),r=>kt(r)===t),Mt=t=>r=>typeof r===t,{isArray:Ke}=Array,Le=Mt("undefined");function st(t){return t!==null&&!Le(t)&&t.constructor!==null&&!Le(t.constructor)&&xe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const br=be("ArrayBuffer");function Pa(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&br(t.buffer),r}const Ia=Mt("string"),xe=Mt("function"),jr=Mt("number"),it=t=>t!==null&&typeof t=="object",za=t=>t===!0||t===!1,gt=t=>{if(kt(t)!=="object")return!1;const r=fn(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(yr in t)&&!(Bt in t)},Ra=t=>{if(!it(t)||st(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Aa=be("Date"),Na=be("File"),Ea=be("Blob"),Fa=be("FileList"),Da=t=>it(t)&&xe(t.pipe),Oa=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||xe(t.append)&&((r=kt(t))==="formdata"||r==="object"&&xe(t.toString)&&t.toString()==="[object FormData]"))},La=be("URLSearchParams"),[Ua,$a,Ga,Wa]=["ReadableStream","Request","Response","Headers"].map(be),Va=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lt(t,r,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let o,s;if(typeof t!="object"&&(t=[t]),Ke(t))for(o=0,s=t.length;o<s;o++)r.call(null,t[o],o,t);else{if(st(t))return;const i=a?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let c;for(o=0;o<l;o++)c=i[o],r.call(null,t[c],c,t)}}function Sr(t,r){if(st(t))return null;r=r.toLowerCase();const a=Object.keys(t);let o=a.length,s;for(;o-- >0;)if(s=a[o],r===s.toLowerCase())return s;return null}const Re=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vr=t=>!Le(t)&&t!==Re;function en(){const{caseless:t,skipUndefined:r}=vr(this)&&this||{},a={},o=(s,i)=>{const l=t&&Sr(a,i)||i;gt(a[l])&&gt(s)?a[l]=en(a[l],s):gt(s)?a[l]=en({},s):Ke(s)?a[l]=s.slice():(!r||!Le(s))&&(a[l]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&lt(arguments[s],o);return a}const Ha=(t,r,a,{allOwnKeys:o}={})=>(lt(r,(s,i)=>{a&&xe(s)?Object.defineProperty(t,i,{value:hr(s,a),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,i,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),t),qa=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ya=(t,r,a,o)=>{t.prototype=Object.create(r.prototype,o),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:r.prototype}),a&&Object.assign(t.prototype,a)},Ka=(t,r,a,o)=>{let s,i,l;const c={};if(r=r||{},t==null)return r;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)l=s[i],(!o||o(l,t,r))&&!c[l]&&(r[l]=t[l],c[l]=!0);t=a!==!1&&fn(t)}while(t&&(!a||a(t,r))&&t!==Object.prototype);return r},Ja=(t,r,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=r.length;const o=t.indexOf(r,a);return o!==-1&&o===a},Qa=t=>{if(!t)return null;if(Ke(t))return t;let r=t.length;if(!jr(r))return null;const a=new Array(r);for(;r-- >0;)a[r]=t[r];return a},Xa=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&fn(Uint8Array)),Za=(t,r)=>{const o=(t&&t[Bt]).call(t);let s;for(;(s=o.next())&&!s.done;){const i=s.value;r.call(t,i[0],i[1])}},es=(t,r)=>{let a;const o=[];for(;(a=t.exec(r))!==null;)o.push(a);return o},ts=be("HTMLFormElement"),ns=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,o,s){return o.toUpperCase()+s}),An=(({hasOwnProperty:t})=>(r,a)=>t.call(r,a))(Object.prototype),rs=be("RegExp"),wr=(t,r)=>{const a=Object.getOwnPropertyDescriptors(t),o={};lt(a,(s,i)=>{let l;(l=r(s,i,t))!==!1&&(o[i]=l||s)}),Object.defineProperties(t,o)},os=t=>{wr(t,(r,a)=>{if(xe(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const o=t[a];if(xe(o)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},as=(t,r)=>{const a={},o=s=>{s.forEach(i=>{a[i]=!0})};return Ke(t)?o(t):o(String(t).split(r)),a},ss=()=>{},is=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function ls(t){return!!(t&&xe(t.append)&&t[yr]==="FormData"&&t[Bt])}const cs=t=>{const r=new Array(10),a=(o,s)=>{if(it(o)){if(r.indexOf(o)>=0)return;if(st(o))return o;if(!("toJSON"in o)){r[s]=o;const i=Ke(o)?[]:{};return lt(o,(l,c)=>{const d=a(l,s+1);!Le(d)&&(i[c]=d)}),r[s]=void 0,i}}return o};return a(t,0)},ds=be("AsyncFunction"),ps=t=>t&&(it(t)||xe(t))&&xe(t.then)&&xe(t.catch),_r=((t,r)=>t?setImmediate:r?((a,o)=>(Re.addEventListener("message",({source:s,data:i})=>{s===Re&&i===a&&o.length&&o.shift()()},!1),s=>{o.push(s),Re.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",xe(Re.postMessage)),xs=typeof queueMicrotask<"u"?queueMicrotask.bind(Re):typeof process<"u"&&process.nextTick||_r,us=t=>t!=null&&xe(t[Bt]),M={isArray:Ke,isArrayBuffer:br,isBuffer:st,isFormData:Oa,isArrayBufferView:Pa,isString:Ia,isNumber:jr,isBoolean:za,isObject:it,isPlainObject:gt,isEmptyObject:Ra,isReadableStream:Ua,isRequest:$a,isResponse:Ga,isHeaders:Wa,isUndefined:Le,isDate:Aa,isFile:Na,isBlob:Ea,isRegExp:rs,isFunction:xe,isStream:Da,isURLSearchParams:La,isTypedArray:Xa,isFileList:Fa,forEach:lt,merge:en,extend:Ha,trim:Va,stripBOM:qa,inherits:Ya,toFlatObject:Ka,kindOf:kt,kindOfTest:be,endsWith:Ja,toArray:Qa,forEachEntry:Za,matchAll:es,isHTMLForm:ts,hasOwnProperty:An,hasOwnProp:An,reduceDescriptors:wr,freezeMethods:os,toObjectSet:as,toCamelCase:ns,noop:ss,toFiniteNumber:is,findKey:Sr,global:Re,isContextDefined:vr,isSpecCompliantForm:ls,toJSONObject:cs,isAsyncFn:ds,isThenable:ps,setImmediate:_r,asap:xs,isIterable:us};let K=class Tr extends Error{static from(r,a,o,s,i,l){const c=new Tr(r.message,a||r.code,o,s,i);return c.cause=r,c.name=r.name,l&&Object.assign(c,l),c}constructor(r,a,o,s,i){super(r),this.name="AxiosError",this.isAxiosError=!0,a&&(this.code=a),o&&(this.config=o),s&&(this.request=s),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.status}}};K.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";K.ERR_BAD_OPTION="ERR_BAD_OPTION";K.ECONNABORTED="ECONNABORTED";K.ETIMEDOUT="ETIMEDOUT";K.ERR_NETWORK="ERR_NETWORK";K.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";K.ERR_DEPRECATED="ERR_DEPRECATED";K.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";K.ERR_BAD_REQUEST="ERR_BAD_REQUEST";K.ERR_CANCELED="ERR_CANCELED";K.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";K.ERR_INVALID_URL="ERR_INVALID_URL";const ms=null;function tn(t){return M.isPlainObject(t)||M.isArray(t)}function Cr(t){return M.endsWith(t,"[]")?t.slice(0,-2):t}function Nn(t,r,a){return t?t.concat(r).map(function(s,i){return s=Cr(s),!a&&i?"["+s+"]":s}).join(a?".":""):r}function fs(t){return M.isArray(t)&&!t.some(tn)}const gs=M.toFlatObject(M,{},null,function(r){return/^is[A-Z]/.test(r)});function Pt(t,r,a){if(!M.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,a=M.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,b){return!M.isUndefined(b[x])});const o=a.metaTokens,s=a.visitor||m,i=a.dots,l=a.indexes,d=(a.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(r);if(!M.isFunction(s))throw new TypeError("visitor must be a function");function p(u){if(u===null)return"";if(M.isDate(u))return u.toISOString();if(M.isBoolean(u))return u.toString();if(!d&&M.isBlob(u))throw new K("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(u)||M.isTypedArray(u)?d&&typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function m(u,x,b){let f=u;if(u&&!b&&typeof u=="object"){if(M.endsWith(x,"{}"))x=o?x:x.slice(0,-2),u=JSON.stringify(u);else if(M.isArray(u)&&fs(u)||(M.isFileList(u)||M.endsWith(x,"[]"))&&(f=M.toArray(u)))return x=Cr(x),f.forEach(function(j,T){!(M.isUndefined(j)||j===null)&&r.append(l===!0?Nn([x],T,i):l===null?x:x+"[]",p(j))}),!1}return tn(u)?!0:(r.append(Nn(b,x,i),p(u)),!1)}const g=[],v=Object.assign(gs,{defaultVisitor:m,convertValue:p,isVisitable:tn});function h(u,x){if(!M.isUndefined(u)){if(g.indexOf(u)!==-1)throw Error("Circular reference detected in "+x.join("."));g.push(u),M.forEach(u,function(f,S){(!(M.isUndefined(f)||f===null)&&s.call(r,f,M.isString(S)?S.trim():S,x,v))===!0&&h(f,x?x.concat(S):[S])}),g.pop()}}if(!M.isObject(t))throw new TypeError("data must be an object");return h(t),r}function En(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return r[o]})}function gn(t,r){this._pairs=[],t&&Pt(t,this,r)}const Br=gn.prototype;Br.append=function(r,a){this._pairs.push([r,a])};Br.toString=function(r){const a=r?function(o){return r.call(this,o,En)}:En;return this._pairs.map(function(s){return a(s[0])+"="+a(s[1])},"").join("&")};function hs(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function kr(t,r,a){if(!r)return t;const o=a&&a.encode||hs,s=M.isFunction(a)?{serialize:a}:a,i=s&&s.serialize;let l;if(i?l=i(r,s):l=M.isURLSearchParams(r)?r.toString():new gn(r,s).toString(o),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Fn{constructor(){this.handlers=[]}use(r,a,o){return this.handlers.push({fulfilled:r,rejected:a,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){M.forEach(this.handlers,function(o){o!==null&&r(o)})}}const Mr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ys=typeof URLSearchParams<"u"?URLSearchParams:gn,bs=typeof FormData<"u"?FormData:null,js=typeof Blob<"u"?Blob:null,Ss={isBrowser:!0,classes:{URLSearchParams:ys,FormData:bs,Blob:js},protocols:["http","https","file","blob","url","data"]},hn=typeof window<"u"&&typeof document<"u",nn=typeof navigator=="object"&&navigator||void 0,vs=hn&&(!nn||["ReactNative","NativeScript","NS"].indexOf(nn.product)<0),ws=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_s=hn&&window.location.href||"http://localhost",Ts=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hn,hasStandardBrowserEnv:vs,hasStandardBrowserWebWorkerEnv:ws,navigator:nn,origin:_s},Symbol.toStringTag,{value:"Module"})),le={...Ts,...Ss};function Cs(t,r){return Pt(t,new le.classes.URLSearchParams,{visitor:function(a,o,s,i){return le.isNode&&M.isBuffer(a)?(this.append(o,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...r})}function Bs(t){return M.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function ks(t){const r={},a=Object.keys(t);let o;const s=a.length;let i;for(o=0;o<s;o++)i=a[o],r[i]=t[i];return r}function Pr(t){function r(a,o,s,i){let l=a[i++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),d=i>=a.length;return l=!l&&M.isArray(s)?s.length:l,d?(M.hasOwnProp(s,l)?s[l]=[s[l],o]:s[l]=o,!c):((!s[l]||!M.isObject(s[l]))&&(s[l]=[]),r(a,o,s[l],i)&&M.isArray(s[l])&&(s[l]=ks(s[l])),!c)}if(M.isFormData(t)&&M.isFunction(t.entries)){const a={};return M.forEachEntry(t,(o,s)=>{r(Bs(o),s,a,0)}),a}return null}function Ms(t,r,a){if(M.isString(t))try{return(r||JSON.parse)(t),M.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(a||JSON.stringify)(t)}const ct={transitional:Mr,adapter:["xhr","http","fetch"],transformRequest:[function(r,a){const o=a.getContentType()||"",s=o.indexOf("application/json")>-1,i=M.isObject(r);if(i&&M.isHTMLForm(r)&&(r=new FormData(r)),M.isFormData(r))return s?JSON.stringify(Pr(r)):r;if(M.isArrayBuffer(r)||M.isBuffer(r)||M.isStream(r)||M.isFile(r)||M.isBlob(r)||M.isReadableStream(r))return r;if(M.isArrayBufferView(r))return r.buffer;if(M.isURLSearchParams(r))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Cs(r,this.formSerializer).toString();if((c=M.isFileList(r))||o.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Pt(c?{"files[]":r}:r,d&&new d,this.formSerializer)}}return i||s?(a.setContentType("application/json",!1),Ms(r)):r}],transformResponse:[function(r){const a=this.transitional||ct.transitional,o=a&&a.forcedJSONParsing,s=this.responseType==="json";if(M.isResponse(r)||M.isReadableStream(r))return r;if(r&&M.isString(r)&&(o&&!this.responseType||s)){const l=!(a&&a.silentJSONParsing)&&s;try{return JSON.parse(r,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?K.from(c,K.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:le.classes.FormData,Blob:le.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],t=>{ct.headers[t]={}});const Ps=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Is=t=>{const r={};let a,o,s;return t&&t.split(`
`).forEach(function(l){s=l.indexOf(":"),a=l.substring(0,s).trim().toLowerCase(),o=l.substring(s+1).trim(),!(!a||r[a]&&Ps[a])&&(a==="set-cookie"?r[a]?r[a].push(o):r[a]=[o]:r[a]=r[a]?r[a]+", "+o:o)}),r},Dn=Symbol("internals");function Je(t){return t&&String(t).trim().toLowerCase()}function ht(t){return t===!1||t==null?t:M.isArray(t)?t.map(ht):String(t)}function zs(t){const r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=a.exec(t);)r[o[1]]=o[2];return r}const Rs=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Lt(t,r,a,o,s){if(M.isFunction(o))return o.call(this,r,a);if(s&&(r=a),!!M.isString(r)){if(M.isString(o))return r.indexOf(o)!==-1;if(M.isRegExp(o))return o.test(r)}}function As(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,a,o)=>a.toUpperCase()+o)}function Ns(t,r){const a=M.toCamelCase(" "+r);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+a,{value:function(s,i,l){return this[o].call(this,r,s,i,l)},configurable:!0})})}let ue=class{constructor(r){r&&this.set(r)}set(r,a,o){const s=this;function i(c,d,p){const m=Je(d);if(!m)throw new Error("header name must be a non-empty string");const g=M.findKey(s,m);(!g||s[g]===void 0||p===!0||p===void 0&&s[g]!==!1)&&(s[g||d]=ht(c))}const l=(c,d)=>M.forEach(c,(p,m)=>i(p,m,d));if(M.isPlainObject(r)||r instanceof this.constructor)l(r,a);else if(M.isString(r)&&(r=r.trim())&&!Rs(r))l(Is(r),a);else if(M.isObject(r)&&M.isIterable(r)){let c={},d,p;for(const m of r){if(!M.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[p=m[0]]=(d=c[p])?M.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}l(c,a)}else r!=null&&i(a,r,o);return this}get(r,a){if(r=Je(r),r){const o=M.findKey(this,r);if(o){const s=this[o];if(!a)return s;if(a===!0)return zs(s);if(M.isFunction(a))return a.call(this,s,o);if(M.isRegExp(a))return a.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,a){if(r=Je(r),r){const o=M.findKey(this,r);return!!(o&&this[o]!==void 0&&(!a||Lt(this,this[o],o,a)))}return!1}delete(r,a){const o=this;let s=!1;function i(l){if(l=Je(l),l){const c=M.findKey(o,l);c&&(!a||Lt(o,o[c],c,a))&&(delete o[c],s=!0)}}return M.isArray(r)?r.forEach(i):i(r),s}clear(r){const a=Object.keys(this);let o=a.length,s=!1;for(;o--;){const i=a[o];(!r||Lt(this,this[i],i,r,!0))&&(delete this[i],s=!0)}return s}normalize(r){const a=this,o={};return M.forEach(this,(s,i)=>{const l=M.findKey(o,i);if(l){a[l]=ht(s),delete a[i];return}const c=r?As(i):String(i).trim();c!==i&&delete a[i],a[c]=ht(s),o[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const a=Object.create(null);return M.forEach(this,(o,s)=>{o!=null&&o!==!1&&(a[s]=r&&M.isArray(o)?o.join(", "):o)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,a])=>r+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...a){const o=new this(r);return a.forEach(s=>o.set(s)),o}static accessor(r){const o=(this[Dn]=this[Dn]={accessors:{}}).accessors,s=this.prototype;function i(l){const c=Je(l);o[c]||(Ns(s,l),o[c]=!0)}return M.isArray(r)?r.forEach(i):i(r),this}};ue.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(ue.prototype,({value:t},r)=>{let a=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(o){this[a]=o}}});M.freezeMethods(ue);function Ut(t,r){const a=this||ct,o=r||a,s=ue.from(o.headers);let i=o.data;return M.forEach(t,function(c){i=c.call(a,i,s.normalize(),r?r.status:void 0)}),s.normalize(),i}function Ir(t){return!!(t&&t.__CANCEL__)}let dt=class extends K{constructor(r,a,o){super(r??"canceled",K.ERR_CANCELED,a,o),this.name="CanceledError",this.__CANCEL__=!0}};function zr(t,r,a){const o=a.config.validateStatus;!a.status||!o||o(a.status)?t(a):r(new K("Request failed with status code "+a.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Es(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Fs(t,r){t=t||10;const a=new Array(t),o=new Array(t);let s=0,i=0,l;return r=r!==void 0?r:1e3,function(d){const p=Date.now(),m=o[i];l||(l=p),a[s]=d,o[s]=p;let g=i,v=0;for(;g!==s;)v+=a[g++],g=g%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),p-l<r)return;const h=m&&p-m;return h?Math.round(v*1e3/h):void 0}}function Ds(t,r){let a=0,o=1e3/r,s,i;const l=(p,m=Date.now())=>{a=m,s=null,i&&(clearTimeout(i),i=null),t(...p)};return[(...p)=>{const m=Date.now(),g=m-a;g>=o?l(p,m):(s=p,i||(i=setTimeout(()=>{i=null,l(s)},o-g)))},()=>s&&l(s)]}const St=(t,r,a=3)=>{let o=0;const s=Fs(50,250);return Ds(i=>{const l=i.loaded,c=i.lengthComputable?i.total:void 0,d=l-o,p=s(d),m=l<=c;o=l;const g={loaded:l,total:c,progress:c?l/c:void 0,bytes:d,rate:p||void 0,estimated:p&&c&&m?(c-l)/p:void 0,event:i,lengthComputable:c!=null,[r?"download":"upload"]:!0};t(g)},a)},On=(t,r)=>{const a=t!=null;return[o=>r[0]({lengthComputable:a,total:t,loaded:o}),r[1]]},Ln=t=>(...r)=>M.asap(()=>t(...r)),Os=le.hasStandardBrowserEnv?((t,r)=>a=>(a=new URL(a,le.origin),t.protocol===a.protocol&&t.host===a.host&&(r||t.port===a.port)))(new URL(le.origin),le.navigator&&/(msie|trident)/i.test(le.navigator.userAgent)):()=>!0,Ls=le.hasStandardBrowserEnv?{write(t,r,a,o,s,i,l){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(r)}`];M.isNumber(a)&&c.push(`expires=${new Date(a).toUTCString()}`),M.isString(o)&&c.push(`path=${o}`),M.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),M.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Us(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $s(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function Rr(t,r,a){let o=!Us(r);return t&&(o||a==!1)?$s(t,r):r}const Un=t=>t instanceof ue?{...t}:t;function Fe(t,r){r=r||{};const a={};function o(p,m,g,v){return M.isPlainObject(p)&&M.isPlainObject(m)?M.merge.call({caseless:v},p,m):M.isPlainObject(m)?M.merge({},m):M.isArray(m)?m.slice():m}function s(p,m,g,v){if(M.isUndefined(m)){if(!M.isUndefined(p))return o(void 0,p,g,v)}else return o(p,m,g,v)}function i(p,m){if(!M.isUndefined(m))return o(void 0,m)}function l(p,m){if(M.isUndefined(m)){if(!M.isUndefined(p))return o(void 0,p)}else return o(void 0,m)}function c(p,m,g){if(g in r)return o(p,m);if(g in t)return o(void 0,p)}const d={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(p,m,g)=>s(Un(p),Un(m),g,!0)};return M.forEach(Object.keys({...t,...r}),function(m){const g=d[m]||s,v=g(t[m],r[m],m);M.isUndefined(v)&&g!==c||(a[m]=v)}),a}const Ar=t=>{const r=Fe({},t);let{data:a,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:i,headers:l,auth:c}=r;if(r.headers=l=ue.from(l),r.url=kr(Rr(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),M.isFormData(a)){if(le.hasStandardBrowserEnv||le.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(M.isFunction(a.getHeaders)){const d=a.getHeaders(),p=["content-type","content-length"];Object.entries(d).forEach(([m,g])=>{p.includes(m.toLowerCase())&&l.set(m,g)})}}if(le.hasStandardBrowserEnv&&(o&&M.isFunction(o)&&(o=o(r)),o||o!==!1&&Os(r.url))){const d=s&&i&&Ls.read(i);d&&l.set(s,d)}return r},Gs=typeof XMLHttpRequest<"u",Ws=Gs&&function(t){return new Promise(function(a,o){const s=Ar(t);let i=s.data;const l=ue.from(s.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:p}=s,m,g,v,h,u;function x(){h&&h(),u&&u(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function f(){if(!b)return;const j=ue.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:j,config:t,request:b};zr(function(I){a(I),x()},function(I){o(I),x()},C),b=null}"onloadend"in b?b.onloadend=f:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(f)},b.onabort=function(){b&&(o(new K("Request aborted",K.ECONNABORTED,t,b)),b=null)},b.onerror=function(T){const C=T&&T.message?T.message:"Network Error",N=new K(C,K.ERR_NETWORK,t,b);N.event=T||null,o(N),b=null},b.ontimeout=function(){let T=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||Mr;s.timeoutErrorMessage&&(T=s.timeoutErrorMessage),o(new K(T,C.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,t,b)),b=null},i===void 0&&l.setContentType(null),"setRequestHeader"in b&&M.forEach(l.toJSON(),function(T,C){b.setRequestHeader(C,T)}),M.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),c&&c!=="json"&&(b.responseType=s.responseType),p&&([v,u]=St(p,!0),b.addEventListener("progress",v)),d&&b.upload&&([g,h]=St(d),b.upload.addEventListener("progress",g),b.upload.addEventListener("loadend",h)),(s.cancelToken||s.signal)&&(m=j=>{b&&(o(!j||j.type?new dt(null,t,b):j),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const S=Es(s.url);if(S&&le.protocols.indexOf(S)===-1){o(new K("Unsupported protocol "+S+":",K.ERR_BAD_REQUEST,t));return}b.send(i||null)})},Vs=(t,r)=>{const{length:a}=t=t?t.filter(Boolean):[];if(r||a){let o=new AbortController,s;const i=function(p){if(!s){s=!0,c();const m=p instanceof Error?p:this.reason;o.abort(m instanceof K?m:new dt(m instanceof Error?m.message:m))}};let l=r&&setTimeout(()=>{l=null,i(new K(`timeout of ${r}ms exceeded`,K.ETIMEDOUT))},r);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(i):p.removeEventListener("abort",i)}),t=null)};t.forEach(p=>p.addEventListener("abort",i));const{signal:d}=o;return d.unsubscribe=()=>M.asap(c),d}},Hs=function*(t,r){let a=t.byteLength;if(a<r){yield t;return}let o=0,s;for(;o<a;)s=o+r,yield t.slice(o,s),o=s},qs=async function*(t,r){for await(const a of Ys(t))yield*Hs(a,r)},Ys=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:a,value:o}=await r.read();if(a)break;yield o}}finally{await r.cancel()}},$n=(t,r,a,o)=>{const s=qs(t,r);let i=0,l,c=d=>{l||(l=!0,o&&o(d))};return new ReadableStream({async pull(d){try{const{done:p,value:m}=await s.next();if(p){c(),d.close();return}let g=m.byteLength;if(a){let v=i+=g;a(v)}d.enqueue(new Uint8Array(m))}catch(p){throw c(p),p}},cancel(d){return c(d),s.return()}},{highWaterMark:2})},Gn=64*1024,{isFunction:ut}=M,Ks=(({Request:t,Response:r})=>({Request:t,Response:r}))(M.global),{ReadableStream:Wn,TextEncoder:Vn}=M.global,Hn=(t,...r)=>{try{return!!t(...r)}catch{return!1}},Js=t=>{t=M.merge.call({skipUndefined:!0},Ks,t);const{fetch:r,Request:a,Response:o}=t,s=r?ut(r):typeof fetch=="function",i=ut(a),l=ut(o);if(!s)return!1;const c=s&&ut(Wn),d=s&&(typeof Vn=="function"?(u=>x=>u.encode(x))(new Vn):async u=>new Uint8Array(await new a(u).arrayBuffer())),p=i&&c&&Hn(()=>{let u=!1;const x=new a(le.origin,{body:new Wn,method:"POST",get duplex(){return u=!0,"half"}}).headers.has("Content-Type");return u&&!x}),m=l&&c&&Hn(()=>M.isReadableStream(new o("").body)),g={stream:m&&(u=>u.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(u=>{!g[u]&&(g[u]=(x,b)=>{let f=x&&x[u];if(f)return f.call(x);throw new K(`Response type '${u}' is not supported`,K.ERR_NOT_SUPPORT,b)})});const v=async u=>{if(u==null)return 0;if(M.isBlob(u))return u.size;if(M.isSpecCompliantForm(u))return(await new a(le.origin,{method:"POST",body:u}).arrayBuffer()).byteLength;if(M.isArrayBufferView(u)||M.isArrayBuffer(u))return u.byteLength;if(M.isURLSearchParams(u)&&(u=u+""),M.isString(u))return(await d(u)).byteLength},h=async(u,x)=>{const b=M.toFiniteNumber(u.getContentLength());return b??v(x)};return async u=>{let{url:x,method:b,data:f,signal:S,cancelToken:j,timeout:T,onDownloadProgress:C,onUploadProgress:N,responseType:I,headers:z,withCredentials:_="same-origin",fetchOptions:R}=Ar(u),L=r||fetch;I=I?(I+"").toLowerCase():"text";let B=Vs([S,j&&j.toAbortSignal()],T),P=null;const A=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let $;try{if(N&&p&&b!=="get"&&b!=="head"&&($=await h(z,f))!==0){let G=new a(x,{method:"POST",body:f,duplex:"half"}),Q;if(M.isFormData(f)&&(Q=G.headers.get("content-type"))&&z.setContentType(Q),G.body){const[re,E]=On($,St(Ln(N)));f=$n(G.body,Gn,re,E)}}M.isString(_)||(_=_?"include":"omit");const F=i&&"credentials"in a.prototype,k={...R,signal:B,method:b.toUpperCase(),headers:z.normalize().toJSON(),body:f,duplex:"half",credentials:F?_:void 0};P=i&&new a(x,k);let W=await(i?L(P,R):L(x,k));const te=m&&(I==="stream"||I==="response");if(m&&(C||te&&A)){const G={};["status","statusText","headers"].forEach(V=>{G[V]=W[V]});const Q=M.toFiniteNumber(W.headers.get("content-length")),[re,E]=C&&On(Q,St(Ln(C),!0))||[];W=new o($n(W.body,Gn,re,()=>{E&&E(),A&&A()}),G)}I=I||"text";let X=await g[M.findKey(g,I)||"text"](W,u);return!te&&A&&A(),await new Promise((G,Q)=>{zr(G,Q,{data:X,headers:ue.from(W.headers),status:W.status,statusText:W.statusText,config:u,request:P})})}catch(F){throw A&&A(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new K("Network Error",K.ERR_NETWORK,u,P),{cause:F.cause||F}):K.from(F,F&&F.code,u,P)}}},Qs=new Map,Nr=t=>{let r=t&&t.env||{};const{fetch:a,Request:o,Response:s}=r,i=[o,s,a];let l=i.length,c=l,d,p,m=Qs;for(;c--;)d=i[c],p=m.get(d),p===void 0&&m.set(d,p=c?new Map:Js(r)),m=p;return p};Nr();const yn={http:ms,xhr:Ws,fetch:{get:Nr}};M.forEach(yn,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const qn=t=>`- ${t}`,Xs=t=>M.isFunction(t)||t===null||t===!1;function Zs(t,r){t=M.isArray(t)?t:[t];const{length:a}=t;let o,s;const i={};for(let l=0;l<a;l++){o=t[l];let c;if(s=o,!Xs(o)&&(s=yn[(c=String(o)).toLowerCase()],s===void 0))throw new K(`Unknown adapter '${c}'`);if(s&&(M.isFunction(s)||(s=s.get(r))))break;i[c||"#"+l]=s}if(!s){const l=Object.entries(i).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=a?l.length>1?`since :
`+l.map(qn).join(`
`):" "+qn(l[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Er={getAdapter:Zs,adapters:yn};function $t(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new dt(null,t)}function Yn(t){return $t(t),t.headers=ue.from(t.headers),t.data=Ut.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Er.getAdapter(t.adapter||ct.adapter,t)(t).then(function(o){return $t(t),o.data=Ut.call(t,t.transformResponse,o),o.headers=ue.from(o.headers),o},function(o){return Ir(o)||($t(t),o&&o.response&&(o.response.data=Ut.call(t,t.transformResponse,o.response),o.response.headers=ue.from(o.response.headers))),Promise.reject(o)})}const Fr="1.13.3",It={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{It[t]=function(o){return typeof o===t||"a"+(r<1?"n ":" ")+t}});const Kn={};It.transitional=function(r,a,o){function s(i,l){return"[Axios v"+Fr+"] Transitional option '"+i+"'"+l+(o?". "+o:"")}return(i,l,c)=>{if(r===!1)throw new K(s(l," has been removed"+(a?" in "+a:"")),K.ERR_DEPRECATED);return a&&!Kn[l]&&(Kn[l]=!0,console.warn(s(l," has been deprecated since v"+a+" and will be removed in the near future"))),r?r(i,l,c):!0}};It.spelling=function(r){return(a,o)=>(console.warn(`${o} is likely a misspelling of ${r}`),!0)};function ei(t,r,a){if(typeof t!="object")throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let s=o.length;for(;s-- >0;){const i=o[s],l=r[i];if(l){const c=t[i],d=c===void 0||l(c,i,t);if(d!==!0)throw new K("option "+i+" must be "+d,K.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new K("Unknown option "+i,K.ERR_BAD_OPTION)}}const yt={assertOptions:ei,validators:It},je=yt.validators;let Ee=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Fn,response:new Fn}}async request(r,a){try{return await this._request(r,a)}catch(o){if(o instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(r,a){typeof r=="string"?(a=a||{},a.url=r):a=r||{},a=Fe(this.defaults,a);const{transitional:o,paramsSerializer:s,headers:i}=a;o!==void 0&&yt.assertOptions(o,{silentJSONParsing:je.transitional(je.boolean),forcedJSONParsing:je.transitional(je.boolean),clarifyTimeoutError:je.transitional(je.boolean)},!1),s!=null&&(M.isFunction(s)?a.paramsSerializer={serialize:s}:yt.assertOptions(s,{encode:je.function,serialize:je.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),yt.assertOptions(a,{baseUrl:je.spelling("baseURL"),withXsrfToken:je.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&M.merge(i.common,i[a.method]);i&&M.forEach(["delete","get","head","post","put","patch","common"],u=>{delete i[u]}),a.headers=ue.concat(l,i);const c=[];let d=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(a)===!1||(d=d&&x.synchronous,c.unshift(x.fulfilled,x.rejected))});const p=[];this.interceptors.response.forEach(function(x){p.push(x.fulfilled,x.rejected)});let m,g=0,v;if(!d){const u=[Yn.bind(this),void 0];u.unshift(...c),u.push(...p),v=u.length,m=Promise.resolve(a);let x=a;for(;g<v;)m=m.then(u[g++]).then(b=>{x=b!==void 0?b:x}).catch(u[g++]).then(()=>x);return m}v=c.length;let h=a;for(;g<v;){const u=c[g++],x=c[g++];try{h=u(h)}catch(b){x.call(this,b);break}}try{m=Yn.call(this,h)}catch(u){return Promise.reject(u)}for(g=0,v=p.length;g<v;)m=m.then(p[g++]).catch(p[g++]);return m}getUri(r){r=Fe(this.defaults,r);const a=Rr(r.baseURL,r.url,r.allowAbsoluteUrls);return kr(a,r.params,r.paramsSerializer)}};M.forEach(["delete","get","head","options"],function(r){Ee.prototype[r]=function(a,o){return this.request(Fe(o||{},{method:r,url:a,data:(o||{}).data}))}});M.forEach(["post","put","patch"],function(r){function a(o){return function(i,l,c){return this.request(Fe(c||{},{method:r,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Ee.prototype[r]=a(),Ee.prototype[r+"Form"]=a(!0)});let ti=class Dr{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const o=this;this.promise.then(s=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](s);o._listeners=null}),this.promise.then=s=>{let i;const l=new Promise(c=>{o.subscribe(c),i=c}).then(s);return l.cancel=function(){o.unsubscribe(i)},l},r(function(i,l,c){o.reason||(o.reason=new dt(i,l,c),a(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const r=new AbortController,a=o=>{r.abort(o)};return this.subscribe(a),r.signal.unsubscribe=()=>this.unsubscribe(a),r.signal}static source(){let r;return{token:new Dr(function(s){r=s}),cancel:r}}};function ni(t){return function(a){return t.apply(null,a)}}function ri(t){return M.isObject(t)&&t.isAxiosError===!0}const rn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(rn).forEach(([t,r])=>{rn[r]=t});function Or(t){const r=new Ee(t),a=hr(Ee.prototype.request,r);return M.extend(a,Ee.prototype,r,{allOwnKeys:!0}),M.extend(a,r,null,{allOwnKeys:!0}),a.create=function(s){return Or(Fe(t,s))},a}const ae=Or(ct);ae.Axios=Ee;ae.CanceledError=dt;ae.CancelToken=ti;ae.isCancel=Ir;ae.VERSION=Fr;ae.toFormData=Pt;ae.AxiosError=K;ae.Cancel=ae.CanceledError;ae.all=function(r){return Promise.all(r)};ae.spread=ni;ae.isAxiosError=ri;ae.mergeConfig=Fe;ae.AxiosHeaders=ue;ae.formToJSON=t=>Pr(M.isHTMLForm(t)?new FormData(t):t);ae.getAdapter=Er.getAdapter;ae.HttpStatusCode=rn;ae.default=ae;const{Axios:Pl,AxiosError:Il,CanceledError:zl,isCancel:Rl,CancelToken:Al,VERSION:Nl,all:El,Cancel:Fl,isAxiosError:Dl,spread:Ol,toFormData:Ll,AxiosHeaders:Ul,HttpStatusCode:$l,formToJSON:Gl,getAdapter:Wl,mergeConfig:Vl}=ae,Lr="https://sentinel-authority-production.up.railway.app",Ue=Lr,O=ae.create({baseURL:Lr});O.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t});const Ur=y.createContext(null);function oi({children:t}){const[r,a]=y.useState(null),[o,s]=y.useState(!0);y.useEffect(()=>{const d=localStorage.getItem("token"),p=localStorage.getItem("user");d&&p&&a(JSON.parse(p)),s(!1)},[]);const i=async(d,p)=>{const m=await O.post("/api/auth/login",{email:d,password:p});return localStorage.setItem("token",m.data.access_token),localStorage.setItem("user",JSON.stringify(m.data.user)),a(m.data.user),m.data.user},l=async d=>{const p=await O.post("/api/auth/register",d);return localStorage.setItem("token",p.data.access_token),localStorage.setItem("user",JSON.stringify(p.data.user)),a(p.data.user),p.data.user},c=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null)};return e.jsx(Ur.Provider,{value:{user:r,login:i,register:l,logout:c,loading:o},children:t})}function ce(){return y.useContext(Ur)}const $r=ge.createContext();function ai({children:t}){const[r,a]=y.useState([]),o=ge.useCallback((i,l="info")=>{const c=Date.now()+Math.random();a(d=>[...d,{id:c,message:i,type:l}]),setTimeout(()=>a(d=>d.filter(p=>p.id!==c)),4500)},[]),s=ge.useCallback(i=>{a(l=>l.filter(c=>c.id!==i))},[]);return e.jsxs($r.Provider,{value:{show:o},children:[t,e.jsx("div",{style:{position:"fixed",bottom:"24px",right:"24px",zIndex:9999,display:"flex",flexDirection:"column",gap:"8px",maxWidth:"420px"},children:r.map(i=>{const l={success:{bg:"rgba(92,214,133,0.12)",border:"rgba(92,214,133,0.4)",text:"#5CD685",icon:""},error:{bg:"rgba(214,92,92,0.12)",border:"rgba(214,92,92,0.4)",text:"#D65C5C",icon:""},warning:{bg:"rgba(214,160,92,0.12)",border:"rgba(214,160,92,0.4)",text:"#D6A05C",icon:""},info:{bg:"rgba(157,140,207,0.12)",border:"rgba(157,140,207,0.4)",text:"#9D8CCF",icon:""}},c=l[i.type]||l.info;return e.jsxs("div",{style:{background:c.bg,backdropFilter:"blur(12px)",border:`1px solid ${c.border}`,borderRadius:"10px",padding:"12px 16px",display:"flex",alignItems:"flex-start",gap:"10px",animation:"toastSlideIn 0.25s ease-out",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[e.jsx("span",{style:{fontSize:"14px",lineHeight:"1",marginTop:"1px"},children:c.icon}),e.jsx("span",{style:{flex:1,color:c.text,fontSize:"13px",lineHeight:"1.4",fontFamily:"'IBM Plex Mono', monospace"},children:i.message}),e.jsx("button",{onClick:()=>s(i.id),style:{background:"none",border:"none",color:c.text,cursor:"pointer",fontSize:"14px",padding:"0",lineHeight:"1",opacity:.6},children:""})]},i.id)})}),e.jsx("style",{children:"@keyframes toastSlideIn { from { transform: translateX(100px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }"})]})}function zt(){return ge.useContext($r)}const n={bgDeep:"#2a2f3d",bgPanel:"rgba(255,255,255,0.05)",bgCard:"rgba(255,255,255,0.08)",purplePrimary:"#5B4B8A",purpleBright:"#9d8ccf",accentGreen:"#5CD685",accentAmber:"#D6A05C",accentRed:"#D65C5C",textPrimary:"rgba(255,255,255,0.92)",textSecondary:"rgba(255,255,255,0.75)",textTertiary:"rgba(255,255,255,0.50)",borderGlass:"rgba(255,255,255,0.10)",mono:"'IBM Plex Mono', monospace",serif:"'Source Serif 4', Georgia, serif"},Gr=ge.createContext();function si({children:t}){const[r,a]=y.useState({open:!1,title:"",message:"",onConfirm:null,confirmLabel:"Confirm",danger:!1}),o=s=>new Promise(i=>{a({open:!0,title:s.title||"Confirm",message:s.message||"Are you sure?",confirmLabel:s.confirmLabel||"Confirm",danger:s.danger||!1,onConfirm:()=>{a(l=>({...l,open:!1})),i(!0)},onCancel:()=>{a(l=>({...l,open:!1})),i(!1)}})});return e.jsxs(Gr.Provider,{value:o,children:[t,r.open&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)"},children:e.jsxs("div",{style:{background:n.bgCard,border:`1px solid ${n.borderGlass}`,borderRadius:"16px",maxWidth:"420px",width:"90%",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"24px 24px 16px"},children:[e.jsx("h3",{style:{margin:"0 0 8px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:r.danger?"#D65C5C":n.purpleBright},children:r.title}),e.jsx("p",{style:{margin:0,color:n.textSecondary,fontSize:"14px",lineHeight:"1.5"},children:r.message})]}),e.jsxs("div",{style:{padding:"16px 24px",display:"flex",justifyContent:"flex-end",gap:"10px",borderTop:`1px solid ${n.borderGlass}`},children:[e.jsx("button",{onClick:r.onCancel,style:{padding:"8px 20px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textSecondary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:r.onConfirm,style:{padding:"8px 20px",borderRadius:"8px",background:r.danger?"rgba(214,92,92,0.2)":n.purplePrimary,border:`1px solid ${r.danger?"rgba(214,92,92,0.4)":n.purpleBright}`,color:r.danger?"#D65C5C":"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:r.confirmLabel})]})]})})]})}const Rt=()=>ge.useContext(Gr);function me({children:t,roles:r}){const{user:a,loading:o}=ce();return o?e.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"#2a2f3d",color:"rgba(255,255,255,0.94)"},children:"Loading..."}):a?r&&!r.includes(a.role)?e.jsx(Qt,{to:"/dashboard"}):t:e.jsx(Qt,{to:"/login"})}function ii(){const[t,r]=y.useState(window.innerWidth<768);return y.useEffect(()=>{const a=()=>r(window.innerWidth<768);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t}function Jn({size:t=24}){return e.jsxs("div",{className:"flex items-center justify-center flex-shrink-0",style:{width:t,height:t,background:"#5B4B8A",border:"2px solid #9d8ccf",borderRadius:6},children:[e.jsx("div",{className:"rounded-full",style:{width:t*.33,height:t*.33,background:"#c4b8e8",animation:"eyePulse 7s ease-in-out infinite"}}),e.jsx("style",{children:`
        @keyframes eyePulse {
          0%, 100% { opacity: 0.75; transform: scale(0.98); box-shadow: 0 0 0 rgba(196,184,232,0); }
          50% { opacity: 1; transform: scale(1.02); box-shadow: 0 0 10px rgba(157,140,207,0.22); }
        }
      `})]})}function fe({children:t}){var I;const{user:r,logout:a}=ce(),o=ii(),[s,i]=y.useState(!o),[l,c]=y.useState([]),[d,p]=y.useState([]),m=Ye(),[g,v]=y.useState([]),[h,u]=y.useState(!1),[x,b]=y.useState(0);y.useEffect(()=>{r&&(O.get("/api/certificates/").then(z=>c(z.data||[])).catch(()=>c([])),O.get("/api/applications/").then(z=>p(z.data.applications||z.data||[])).catch(()=>p([])),localStorage.getItem("token")&&O.get("/api/users/notifications").then(z=>{v(z.data.notifications||[]),b(z.data.unread_count||0)}).catch(()=>{}))},[r]),y.useEffect(()=>{if(!r)return;const z=setInterval(()=>{localStorage.getItem("token")&&O.get("/api/users/notifications").then(_=>{v(_.data.notifications||[]),b(_.data.unread_count||0)}).catch(()=>{})},6e4);return()=>clearInterval(z)},[r]);const f=()=>{O.post("/api/users/notifications/mark-read").then(()=>b(0)).catch(()=>{}),u(!1)},S=[{name:"Dashboard",href:"/dashboard",icon:er,roles:["admin","applicant"]},{name:"Applications",href:"/applications",icon:Ae,roles:["admin","applicant"]},{name:"CAT-72 Console",href:"/cat72",icon:Qe,roles:["admin"]},{name:"Certificates",href:"/certificates",icon:Ze,roles:["admin","applicant"]},{name:"Resources",href:"/resources",icon:tr,roles:["admin","applicant"]},{name:"ENVELO Agent",href:"/envelo",icon:"brand",roles:["admin","applicant"],requiresCert:!0},{name:"Monitoring",href:"/monitoring",icon:Qe,roles:["admin","applicant"],requiresCert:!0},{name:"User Management",href:"/users",icon:nr,roles:["admin"]},{name:"My Activity",href:"/my-activity",icon:Qe,roles:["admin","applicant"]},{name:"Activity Log",href:"/activity",icon:Ae,roles:["admin"]},{name:"Settings",href:"/settings",icon:po,roles:["admin","applicant"]}],j=Array.isArray(l)&&l.some(z=>z.state==="conformant"||z.state==="active"||z.state==="issued"),T=Array.isArray(d)&&d.some(z=>z.state==="approved"||z.state==="testing"),C=j||T,N=S.filter(z=>!(!z.roles.includes((r==null?void 0:r.role)||"")||z.requiresCert&&(r==null?void 0:r.role)!=="admin"&&!C));return e.jsxs("div",{className:"min-h-screen",style:{background:"#2a2f3d",color:n.textPrimary,fontFamily:"'Inter', system-ui, -apple-system, sans-serif"},children:[e.jsx("div",{style:{position:"fixed",top:"-10%",left:"5%",width:"500px",height:"500px",background:"radial-gradient(circle, rgba(91,75,138,0.18) 0%, transparent 70%)",animation:"float1 20s ease-in-out infinite",pointerEvents:"none",zIndex:0}}),e.jsx("div",{style:{position:"fixed",bottom:"-20%",right:"0%",width:"700px",height:"700px",background:"radial-gradient(circle, rgba(92,214,133,0.06) 0%, transparent 70%)",animation:"float2 25s ease-in-out infinite",pointerEvents:"none",zIndex:0}}),e.jsx("div",{style:{position:"fixed",top:"50%",right:"20%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(157,140,207,0.10) 0%, transparent 70%)",animation:"float3 15s ease-in-out infinite",pointerEvents:"none",zIndex:0}}),e.jsx("style",{children:`
        @keyframes float1 { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(40px, -40px) scale(1.05); } 66% { transform: translate(-30px, 30px) scale(0.95); } }
        @keyframes float2 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-50px, -50px) scale(1.1); } }
        @keyframes float3 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(30px, 40px); } }
        .sexy-panel { transition: all 0.3s ease; }
        .sexy-panel:hover { transform: translateY(-2px); box-shadow: 0 12px 40px rgba(0,0,0,0.3); }
        .sexy-btn { transition: all 0.3s ease; }
        .sexy-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(91,75,138,0.4); }
        .sexy-input { transition: all 0.3s ease; }
        .sexy-input:focus { border-color: rgba(157,140,207,0.6) !important; box-shadow: 0 0 0 3px rgba(157,140,207,0.1); transform: translateY(-1px); }
        .sexy-row { transition: all 0.2s ease; }
        .sexy-row:hover { background: rgba(157,140,207,0.08) !important; }
        /* Mobile Responsiveness */
        @media (max-width: 768px) {
          .sa-main-content { padding: 16px !important; }
          .sa-stat-grid { grid-template-columns: repeat(2, 1fr) !important; }
          .sa-stat-grid-3 { grid-template-columns: repeat(2, 1fr) !important; }
          .sa-header-links { display: none !important; }
          .sa-page-title { font-size: 22px !important; }
          .sa-table-wrap { margin: 0 -16px; border-radius: 0 !important; }
          .sa-table-wrap table { font-size: 12px; }
        }
        @media (max-width: 480px) {
          .sa-main-content { padding: 12px !important; }
          .sa-stat-grid { grid-template-columns: 1fr !important; }
          .sa-stat-grid-3 { grid-template-columns: 1fr !important; }
        }
      `}),e.jsx("div",{className:"fixed inset-0 pointer-events-none",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.2,maskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)",zIndex:0}}),o&&s&&e.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:40}}),e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 transform transition-transform ${s?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,style:{background:"rgba(42,47,61,0.88)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",borderRight:"1px solid rgba(255,255,255,0.08)",boxShadow:"4px 0 24px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsxs(ee,{to:"/dashboard",className:"flex items-center gap-3 no-underline",children:[e.jsx(Jn,{size:24}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",fontWeight:500,letterSpacing:"3px",textTransform:"uppercase",color:n.textPrimary},children:"Sentinel Authority"})]}),e.jsx("button",{onClick:()=>i(!1),className:"lg:hidden",style:{color:n.textSecondary},children:e.jsx(Yt,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"p-4 space-y-1",children:N.map(z=>e.jsxs(ee,{to:z.href,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all no-underline",style:{background:m.pathname.startsWith(z.href)?"linear-gradient(135deg, rgba(91,75,138,0.9) 0%, rgba(107,91,154,0.9) 100%)":"transparent",color:m.pathname.startsWith(z.href)?"#fff":n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",boxShadow:m.pathname.startsWith(z.href)?"0 4px 15px rgba(91,75,138,0.4)":"none",border:m.pathname.startsWith(z.href)?"1px solid rgba(157,140,207,0.3)":"1px solid transparent"},children:[z.icon==="brand"?e.jsx(Jn,{size:16}):e.jsx(z.icon,{className:"w-4 h-4"}),z.name]},z.name))}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",style:{borderTop:`1px solid ${n.borderGlass}`},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`},children:e.jsx("span",{style:{color:"#fff",fontWeight:500},children:((I=r==null?void 0:r.full_name)==null?void 0:I[0])||"U"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,color:n.textPrimary},children:r==null?void 0:r.full_name}),e.jsx("div",{style:{fontSize:"11px",fontFamily:"'IBM Plex Mono', monospace",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px"},children:r==null?void 0:r.role})]})]}),e.jsxs("button",{onClick:a,className:"flex items-center gap-2 w-full transition-colors",style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",background:"none",border:"none",cursor:"pointer"},children:[e.jsx(xo,{className:"w-4 h-4"}),"Sign Out"]})]})]}),e.jsxs("div",{className:"lg:ml-64 relative z-10",children:[e.jsxs("header",{className:"h-16 flex items-center px-6 gap-4",style:{borderBottom:"1px solid rgba(255,255,255,0.06)",background:"rgba(42,47,61,0.88)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[e.jsx("button",{onClick:()=>i(!s),className:"lg:hidden",style:{color:n.textSecondary,background:"none",border:"none"},children:e.jsx(uo,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1"}),e.jsxs("a",{href:"https://sentinelauthority.org",target:"_blank",rel:"noopener noreferrer",className:"sa-header-links flex items-center gap-2 transition-colors no-underline",style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase"},children:[e.jsx(rr,{className:"w-4 h-4"}),"Main Site"]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("a",{href:"https://api.sentinelauthority.org/docs",target:"_blank",rel:"noopener noreferrer",className:"sa-header-links flex items-center gap-2 transition-colors no-underline",style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase"},children:[e.jsx(Ae,{className:"w-4 h-4"}),"API Docs"]}),e.jsxs(ee,{to:"/verify",className:"flex items-center gap-2 transition-colors no-underline",style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase"},children:[e.jsx(et,{className:"w-4 h-4"}),"Verify"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>u(!h),style:{background:"none",border:"none",cursor:"pointer",position:"relative",padding:"4px",color:h?n.purpleBright:n.textTertiary,transition:"color 0.2s"},children:[e.jsx(mo,{className:"w-5 h-5"}),x>0&&e.jsx("span",{style:{position:"absolute",top:"-2px",right:"-2px",minWidth:"16px",height:"16px",borderRadius:"50%",background:"#D65C5C",color:"#fff",fontSize:"9px",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'IBM Plex Mono', monospace",padding:"0 3px"},children:x>9?"9+":x})]}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>u(!1),style:{position:"fixed",inset:0,zIndex:90}}),e.jsxs("div",{style:{position:"absolute",right:0,top:"40px",width:"360px",maxHeight:"480px",overflowY:"auto",background:"rgba(42,47,61,0.96)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",zIndex:100},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Notifications"}),x>0&&e.jsx("button",{onClick:f,style:{background:"none",border:"none",color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer"},children:"Mark all read"})]}),g.length===0?e.jsx("div",{style:{padding:"32px 16px",textAlign:"center",color:n.textTertiary,fontSize:"13px",fontStyle:"italic"},children:"No recent activity"}):g.map((z,_)=>{const R=!z.read,L={success:n.accentGreen,warning:"#D6A05C",info:n.purpleBright,error:"#D65C5C"}[z.type]||n.purpleBright,B={success:"",warning:"",info:"",error:""}[z.type]||"";return e.jsx("div",{onClick:()=>{z.resource_type==="application"&&z.resource_id&&(u(!1),window.location.hash="#/applications/"+z.resource_id)},style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.04)",background:R?"rgba(157,140,207,0.06)":"transparent",cursor:z.resource_id?"pointer":"default",transition:"background 0.15s"},children:e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:L,fontSize:"12px",marginTop:"2px",flexShrink:0},children:B}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{margin:0,fontSize:"13px",color:R?n.textPrimary:n.textSecondary,lineHeight:1.4,fontWeight:R?500:400},children:z.message}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px",flexWrap:"wrap"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:z.timestamp?new Date(z.timestamp).toLocaleString():""}),z.user_email&&e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:["by ",z.user_email]})]})]}),R&&e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",background:n.purpleBright,marginTop:"6px",flexShrink:0}})]})},z.id||_)})]})]})]})]}),e.jsx("main",{className:"sa-main-content",style:{padding:"32px",position:"relative",zIndex:1},children:t})]})]})}function li(){const{login:t,register:r}=ce(),a=at(),[o,s]=y.useState(!1),[i,l]=y.useState(""),[c,d]=y.useState({email:"",password:"",full_name:"",organization_name:""}),[p,m]=y.useState(!1),[g,v]=y.useState(!1),[h,u]=y.useState(""),[x,b]=y.useState(!1),f=async S=>{var j,T;S.preventDefault(),l("");try{o?await r(c):await t(c.email,c.password),a("/dashboard")}catch(C){l(((T=(j=C.response)==null?void 0:j.data)==null?void 0:T.detail)||"Authentication failed")}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",style:{background:n.bgDeep},children:[e.jsx(ee,{to:"/dashboard",style:{position:"fixed",top:"24px",right:"32px",zIndex:20,color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase",textDecoration:"none",display:"flex",alignItems:"center",gap:"6px",transition:"color 0.2s"},children:" Dashboard"}),e.jsx("div",{style:{position:"absolute",top:"-20%",left:"-10%",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(91,75,138,0.18) 0%, transparent 65%)",animation:"float1 25s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",bottom:"-30%",right:"-15%",width:"800px",height:"800px",background:"radial-gradient(circle, rgba(92,214,133,0.06) 0%, transparent 65%)",animation:"float2 30s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",top:"40%",right:"10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(157,140,207,0.10) 0%, transparent 65%)",animation:"float3 15s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",inset:0,backgroundImage:"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.2,pointerEvents:"none",maskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)"}}),e.jsx("div",{style:{position:"absolute",top:"20%",left:"5%",width:"1px",height:"200px",background:"linear-gradient(to bottom, transparent, rgba(157,140,207,0.3), transparent)"}}),e.jsx("div",{style:{position:"absolute",bottom:"15%",right:"8%",width:"150px",height:"1px",background:"linear-gradient(to right, transparent, rgba(92,214,133,0.3), transparent)"}}),e.jsx("style",{children:`
        @keyframes float1 { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -30px) scale(1.05); } 66% { transform: translate(-20px, 20px) scale(0.95); } }
        @keyframes float2 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-40px, -40px) scale(1.1); } }
        @keyframes float3 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(20px, 30px); } }
        @keyframes pulse-ring { 0% { transform: scale(0.8); opacity: 0.5; } 50% { transform: scale(1.2); opacity: 0; } 100% { transform: scale(0.8); opacity: 0.5; } }
        .login-input { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .login-input:focus { border-color: rgba(157,140,207,0.6) !important; box-shadow: 0 0 0 3px rgba(157,140,207,0.1), 0 4px 20px rgba(0,0,0,0.2); transform: translateY(-1px); }
        .login-btn { position: relative; overflow: hidden; transition: all 0.3s ease; }
        .login-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(91,75,138,0.5); }
      `}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsxs("div",{className:"relative flex justify-center mb-6",style:{height:"100px",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",width:"80px",height:"80px",border:"1px solid rgba(157,140,207,0.2)",borderRadius:"50%",animation:"pulse-ring 3s ease-out infinite"}}),e.jsx("div",{style:{position:"absolute",width:"100px",height:"100px",border:"1px solid rgba(157,140,207,0.1)",borderRadius:"50%",animation:"pulse-ring 3s ease-out infinite 0.5s"}}),e.jsx("div",{style:{width:"56px",height:"56px",background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"2px solid #9d8ccf",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(91,75,138,0.4), inset 0 1px 0 rgba(255,255,255,0.1)"},children:e.jsx("div",{style:{width:"18px",height:"18px",background:"radial-gradient(circle, #e8e0ff 0%, #c4b8e8 100%)",borderRadius:"50%",boxShadow:"0 0 20px rgba(196,184,232,0.5)",animation:"eyePulse 3s ease-in-out infinite"}})})]}),e.jsxs("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,color:n.textPrimary,margin:"0 0 8px 0",letterSpacing:"-0.02em"},children:["ODDC ",e.jsx("span",{style:{color:n.purpleBright,fontStyle:"italic"},children:"Portal"})]}),e.jsx("p",{style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",marginTop:"12px"},children:"Sentinel Authority"}),e.jsx("a",{href:"https://sentinelauthority.org",style:{color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textDecoration:"none",padding:"8px 16px",border:"1px solid rgba(157,140,207,0.2)",borderRadius:"20px",marginTop:"16px",display:"inline-block"},children:" VISIT MAIN SITE"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"24px",padding:"40px",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.05) inset",transition:"all 0.3s ease",minHeight:"280px"},children:[e.jsxs("div",{style:{display:"flex",background:"rgba(0,0,0,0.2)",borderRadius:"16px",padding:"4px",marginBottom:"32px"},children:[e.jsx("button",{onClick:()=>s(!1),type:"button",style:{flex:1,padding:"12px",borderRadius:"10px",border:"none",background:o?"transparent":n.purplePrimary,color:o?n.textTertiary:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Sign In"}),e.jsx("button",{onClick:()=>s(!0),type:"button",style:{flex:1,padding:"12px",borderRadius:"10px",border:"none",background:o?n.purplePrimary:"transparent",color:o?"#fff":n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Register"})]}),g?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(157,140,207,0.15)",border:"1px solid rgba(157,140,207,0.3)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:e.jsx(tt,{className:"w-6 h-6",style:{color:n.purpleBright}})}),e.jsx("h3",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Two-Factor Authentication"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"24px"},children:"Enter the 6-digit code from your authenticator app, or a backup code"}),i&&e.jsx("div",{style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.2)",borderRadius:"8px",padding:"10px 14px",marginBottom:"16px",color:"#D65C5C",fontSize:"13px"},children:i}),e.jsxs("form",{onSubmit:handle2FASubmit,children:[e.jsx("input",{type:"text",value:h,onChange:S=>u(S.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,autoFocus:!0,style:{width:"100%",background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,borderRadius:"10px",padding:"14px",color:n.textPrimary,fontSize:"24px",fontFamily:"'IBM Plex Mono', monospace",letterSpacing:"8px",textAlign:"center",outline:"none",marginBottom:"16px",boxSizing:"border-box"}}),e.jsx("button",{type:"submit",disabled:x||h.length!==6,className:"login-btn",style:{width:"100%",padding:"14px",borderRadius:"10px",background:h.length===6?n.purplePrimary:"rgba(255,255,255,0.05)",border:"1px solid "+(h.length===6?n.purpleBright:n.borderGlass),color:h.length===6?"#fff":n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",cursor:x?"wait":"pointer"},children:x?"Verifying...":"Verify Code"})]}),e.jsx("button",{onClick:()=>{v(!1),u(""),l("")},style:{background:"none",border:"none",color:n.textTertiary,fontSize:"12px",cursor:"pointer",marginTop:"16px",fontFamily:"'IBM Plex Mono', monospace"},children:"Back to login"})]}):e.jsxs(e.Fragment,{children:[i&&e.jsxs("div",{style:{marginBottom:"24px",padding:"14px 16px",borderRadius:"12px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed,fontSize:"13px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),i]}),e.jsxs("form",{onSubmit:f,className:"space-y-5",children:[o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Jane Smith",value:c.full_name,onChange:S=>d({...c,full_name:S.target.value}),className:"login-input w-full px-4 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'Inter', sans-serif",fontSize:"15px"},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Organization"}),e.jsx("input",{type:"text",placeholder:"Acme Robotics Inc.",value:c.organization_name,onChange:S=>d({...c,organization_name:S.target.value}),className:"login-input w-full px-4 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'Inter', sans-serif",fontSize:"15px"},required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"you@company.com",value:c.email,onChange:S=>d({...c,email:S.target.value}),className:"login-input w-full px-4 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'Inter', sans-serif",fontSize:"15px"},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:p?"text":"password",placeholder:"",value:c.password,onChange:S=>d({...c,password:S.target.value}),className:"login-input w-full px-4 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'Inter', sans-serif",fontSize:"15px"},required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!p),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px"},children:p?e.jsx(fo,{className:"w-5 h-5",style:{color:n.textTertiary}}):e.jsx(go,{className:"w-5 h-5",style:{color:n.textTertiary}})})]})]}),e.jsx("button",{type:"submit",className:"login-btn w-full py-4 rounded-xl font-medium",style:{background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"1px solid rgba(157,140,207,0.5)",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"2px",textTransform:"uppercase",cursor:"pointer",marginTop:"8px",boxShadow:"0 4px 20px rgba(91,75,138,0.4)"},children:o?"Create Account":"Sign In"})]})]}),!o&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:"#",style:{color:n.textTertiary,fontSize:"13px",textDecoration:"none"},children:"Forgot password?"})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{style:{color:n.textTertiary,fontSize:"11px",fontFamily:"'IBM Plex Mono', monospace",letterSpacing:"1px"},children:["Protected by ENVELO  ",e.jsx("a",{href:"https://sentinelauthority.org/privacy.html",style:{color:n.purpleBright,textDecoration:"none"},children:"Privacy"}),"  ",e.jsx("a",{href:"https://sentinelauthority.org/terms.html",style:{color:n.purpleBright,textDecoration:"none"},children:"Terms"})]})})]})]})}function Y({children:t,className:r="",glow:a=!1,accent:o=null}){const s={purple:"rgba(157,140,207,0.15)",green:"rgba(92,214,133,0.1)",amber:"rgba(214,160,92,0.1)",red:"rgba(214,92,92,0.1)"};return e.jsxs("div",{className:`rounded-2xl p-6 ${r}`,style:{background:o?`linear-gradient(135deg, ${s[o]||s.purple} 0%, rgba(255,255,255,0.02) 100%)`:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,backdropFilter:"blur(16px)",boxShadow:a?"0 8px 32px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.05)":"none",position:"relative",overflow:"hidden"},children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"1px",background:"linear-gradient(90deg,transparent,rgba(157,140,207,0.3),transparent)"}}),e.jsx("div",{style:{position:"absolute",bottom:0,left:"20%",right:"20%",height:"1px",background:"linear-gradient(90deg,transparent,rgba(157,140,207,0.1),transparent)"}})]}),t]})}function pe({label:t,value:r,trend:a,color:o=n.purpleBright,icon:s,subtitle:i}){const[l,c]=y.useState(!1);return e.jsx("div",{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{position:"relative",borderRadius:"16px",padding:"1px",background:l?`linear-gradient(135deg, ${o}60, transparent 60%, ${o}30)`:`linear-gradient(135deg, ${o}25, transparent 50%, rgba(255,255,255,0.05))`,transition:"all 0.3s ease",transform:l?"translateY(-2px)":"none"},children:e.jsxs("div",{style:{borderRadius:"15px",padding:"20px 24px",background:"linear-gradient(135deg, rgba(30,33,43,0.95) 0%, rgba(42,47,61,0.9) 100%)",backdropFilter:"blur(16px)",position:"relative",overflow:"hidden",minHeight:"100px"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"1px",background:`linear-gradient(90deg,transparent,${o}40,transparent)`}}),e.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",width:"80px",height:"80px",borderRadius:"50%",background:`radial-gradient(circle,${o}08 0%,transparent 70%)`,pointerEvents:"none"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",position:"relative"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px",margin:"0 0 12px 0"},children:t}),e.jsx("p",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,color:o,margin:0,lineHeight:1},children:r}),a!=null&&e.jsxs("p",{style:{fontSize:"11px",color:a>0?n.accentGreen:a<0?n.accentRed:n.textTertiary,marginTop:"8px",fontFamily:"'IBM Plex Mono', monospace"},children:[a>0?"":a<0?"":""," ",Math.abs(a),"%"]}),i&&e.jsx("p",{style:{fontSize:"11px",color:n.textTertiary,marginTop:"6px",fontFamily:"'IBM Plex Mono', monospace"},children:i})]}),s&&e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`${o}12`,border:`1px solid ${o}20`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:l?`0 0 20px ${o}20`:"none",transition:"box-shadow 0.3s"},children:s})]})]})})}function Wr({icon:t,title:r,description:a,actionLabel:o,onAction:s}){return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"64px 24px",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:"rgba(91,75,138,0.12)",border:"1px solid rgba(157,140,207,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},children:e.jsx(t,{size:28,style:{color:n.purpleBright,opacity:.7}})}),e.jsx("h3",{style:{color:n.textPrimary,fontSize:"16px",fontWeight:500,margin:"0 0 8px 0",fontFamily:"Source Serif 4, Georgia, serif"},children:r}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",lineHeight:"1.5",maxWidth:"340px",margin:"0 0 24px 0"},children:a}),o&&e.jsx("button",{onClick:s,style:{background:"linear-gradient(135deg, "+n.purplePrimary+" 0%, "+n.purpleBright+" 100%)",border:"none",borderRadius:"8px",padding:"10px 24px",color:"#fff",fontFamily:"IBM Plex Mono, monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:o})]})}function ci(){const{user:t}=ce();zt();const[r,a]=y.useState([]),[o,s]=y.useState(0),[i,l]=y.useState({}),[c,d]=y.useState([]),[p,m]=y.useState(!0);y.useEffect(()=>{Promise.all([O.get("/api/applications/").catch(()=>({data:[]})),O.get("/api/certificates/").catch(()=>({data:[]}))]).then(([x,b])=>{a(x.data.applications||x.data||[]),d(b.data||[]),m(!1)})},[]);const g=[{key:"pending",label:"Submitted"},{key:"under_review",label:"In Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"}],v=x=>g.findIndex(b=>b.key===x),h=x=>{switch(x){case"pending":return"Awaiting review";case"under_review":return"Under evaluation";case"approved":return"Preparing CAT-72";case"testing":return"Test in progress";case"conformant":return"Certificate issued";case"revoked":return"Suspended";default:return"Pending"}},u=x=>x==="conformant"?n.accentGreen:x==="revoked"||x==="suspended"?n.accentRed:x==="testing"||x==="approved"?n.purpleBright:n.accentAmber;return p?e.jsx("div",{style:{color:n.textTertiary,padding:"40px",textAlign:"center"},children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"ODDC Certification"}),e.jsxs("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:["Welcome",t!=null&&t.full_name?`, ${t.full_name.split(" ")[0]}`:""]}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:"Track your certification progress and manage your systems."})]}),e.jsxs(ee,{to:"/applications/new",className:"flex items-center gap-2 px-5 py-3 rounded-lg no-underline",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",whiteSpace:"nowrap"},children:[e.jsx(bt,{className:"w-4 h-4"}),"New Application"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsx(pe,{label:"Applications",value:r.length,color:n.purpleBright,icon:e.jsx(Ae,{className:"w-5 h-5",style:{color:n.purpleBright}}),subtitle:r.filter(x=>x.state==="pending"||x.state==="under_review").length>0?`${r.filter(x=>x.state==="pending"||x.state==="under_review").length} in review`:null}),e.jsx(pe,{label:"Certificates",value:c.length,color:n.accentGreen,icon:e.jsx(Ze,{className:"w-5 h-5",style:{color:n.accentGreen}}),subtitle:c.filter(x=>x.state==="conformant").length>0?`${c.filter(x=>x.state==="conformant").length} active`:null}),e.jsx(pe,{label:"Active Tests",value:r.filter(x=>x.state==="testing").length,color:n.accentAmber,icon:e.jsx(Qe,{className:"w-5 h-5",style:{color:n.accentAmber}})}),e.jsx(pe,{label:"Live Status",value:"",color:n.accentGreen,icon:e.jsx(or,{className:"w-5 h-5",style:{color:n.accentGreen}}),subtitle:"All systems operational"})]}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Your Applications"}),r.length>0&&e.jsx(ee,{to:"/applications",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none",letterSpacing:"1px"},children:"View All "})]}),r.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"56px 20px"},children:[e.jsx("div",{style:{width:"72px",height:"72px",borderRadius:"20px",background:"rgba(91,75,138,0.12)",border:"1px solid rgba(157,140,207,0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:e.jsx(tt,{size:32,style:{color:n.purpleBright,opacity:.7}})}),e.jsx("p",{style:{color:n.textPrimary,fontSize:"17px",fontWeight:500,marginBottom:"8px",fontFamily:"'Source Serif 4', serif"},children:"Begin Your Certification"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"28px",maxWidth:"360px",margin:"0 auto 28px",lineHeight:"1.6"},children:"Submit your autonomous system for ODDC certification. Our CAT-72 test validates real-time boundary enforcement over 72 hours."}),e.jsxs(ee,{to:"/applications/new",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg no-underline",style:{background:`linear-gradient(135deg, ${n.purplePrimary} 0%, ${n.purpleBright} 100%)`,border:"none",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",boxShadow:"0 4px 20px rgba(91,75,138,0.3)"},children:[e.jsx(bt,{className:"w-4 h-4"}),"New Application"]})]}):e.jsx("div",{className:"space-y-4",children:r.map(x=>{var f;const b=v(x.state);return e.jsx(ee,{to:`/applications/${x.id}`,style:{textDecoration:"none",display:"block"},children:e.jsxs("div",{style:{padding:"20px",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:`1px solid ${n.borderGlass}`,cursor:"pointer",transition:"border-color 0.2s"},onMouseEnter:S=>S.currentTarget.style.borderColor=n.purpleBright,onMouseLeave:S=>S.currentTarget.style.borderColor=n.borderGlass,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,color:n.textPrimary,fontSize:"15px",marginBottom:"4px"},children:x.system_name}),e.jsxs("div",{style:{fontSize:"11px",color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace"},children:[x.application_number,"  ",(f=x.system_type)==null?void 0:f.replace(/_/g," ")]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"12px",color:n.textTertiary},children:h(x.state)}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",background:`${u(x.state)}20`,color:u(x.state),border:`1px solid ${u(x.state)}40`},children:x.state})]})]}),e.jsx("div",{style:{display:"flex",gap:"3px",height:"4px"},children:g.map((S,j)=>e.jsx("div",{style:{flex:1,borderRadius:"2px",background:j<=b?u(x.state):"rgba(255,255,255,0.05)"}},S.key))})]})},x.id)})})]}),c.length===0&&e.jsx(Wr,{icon:Ze,title:"No Certificates Yet",description:"Certificates are issued after your system passes the 72-hour CAT-72 conformance test. Submit an application to begin.",actionLabel:"Start Application",onAction:()=>setPage("apply")}),c.length>0&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Your Certificates"}),e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsxs("div",{style:{padding:"16px",background:"rgba(92,214,133,0.08)",border:"1px solid rgba(92,214,133,0.2)",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,color:n.accentGreen,marginBottom:"4px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"14px"},children:x.certificate_number}),e.jsxs("div",{style:{fontSize:"12px",color:n.textTertiary},children:["Issued: ",new Date(x.issued_at).toLocaleDateString(),x.expires_at?`  Expires: ${new Date(x.expires_at).toLocaleDateString()}`:""]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx("a",{href:`${Ue}/api/certificates/${x.certificate_number}/pdf`,target:"_blank",style:{padding:"8px 16px",background:n.purplePrimary,borderRadius:"6px",color:"#fff",fontSize:"11px",fontFamily:"'IBM Plex Mono', monospace",textDecoration:"none"},children:"Download PDF"})})]},x.id))})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Resources"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:[c.some(x=>x.state==="conformant"||x.state==="active"||x.state==="issued")&&e.jsxs("a",{href:"https://sentinelauthority.org/agent.html",target:"_blank",style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",textDecoration:"none",color:n.textSecondary,border:`1px solid ${n.borderGlass}`},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"4px",color:n.textPrimary,fontSize:"13px"},children:"ENVELO Agent Setup"}),e.jsx("div",{style:{fontSize:"11px"},children:"Installation & configuration guide"})]}),e.jsxs("a",{href:"https://sentinelauthority.org",target:"_blank",style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",textDecoration:"none",color:n.textSecondary,border:`1px solid ${n.borderGlass}`},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"4px",color:n.textPrimary,fontSize:"13px"},children:"ODDC Framework"}),e.jsx("div",{style:{fontSize:"11px"},children:"Certification overview & requirements"})]}),e.jsxs("a",{href:"mailto:info@sentinelauthority.org",style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",textDecoration:"none",color:n.textSecondary,border:`1px solid ${n.borderGlass}`},children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"4px",color:n.textPrimary,fontSize:"13px"},children:"Contact Support"}),e.jsx("div",{style:{fontSize:"11px"},children:"info@sentinelauthority.org"})]})]})]})]})}function di(){const{user:t}=ce();return(t==null?void 0:t.role)==="admin"?e.jsx(pi,{}):e.jsx(ci,{})}function pi(){const{user:t}=ce(),[r,a]=y.useState(null),[o,s]=y.useState([]),[i,l]=y.useState([]),[c,d]=y.useState([]),[p,m]=y.useState([]),[g,v]=y.useState(null),h=()=>{O.get("/api/dashboard/stats").then(f=>a(f.data)).catch(console.error),O.get("/api/dashboard/recent-applications").then(f=>s(f.data)).catch(console.error),O.get("/api/dashboard/active-tests").then(f=>l(f.data)).catch(console.error),O.get("/api/applications/").then(f=>d(f.data.applications||f.data||[])).catch(console.error),O.get("/api/dashboard/recent-certificates").then(f=>m(f.data)).catch(console.error),O.get("/api/envelo/monitoring/overview").then(f=>v(f.data)).catch(console.error)};y.useEffect(()=>{h();const f=setInterval(h,3e4);return()=>clearInterval(f)},[]);const u={pending:c.filter(f=>f.state==="pending").length,under_review:c.filter(f=>f.state==="under_review").length,approved:c.filter(f=>f.state==="approved").length,testing:c.filter(f=>f.state==="testing").length,conformant:c.filter(f=>f.state==="conformant").length,revoked:c.filter(f=>f.state==="revoked"||f.state==="suspended").length},x=c.filter(f=>f.state==="pending"||f.state==="under_review"),b=async(f,S,j)=>{var T,C;if(await confirm({title:"Confirm",message:j+"?"}))try{await O.patch(`/api/applications/${f}/state?new_state=${S}`),h()}catch(N){toast.show("Failed: "+(((C=(T=N.response)==null?void 0:T.data)==null?void 0:C.detail)||N.message),"error")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"28px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:n.purpleBright}}),"Administration"]}),e.jsxs("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:["Welcome",t!=null&&t.full_name?`, ${t.full_name.split(" ")[0]}`:""]}),e.jsx("p",{style:{color:n.textTertiary,marginTop:"6px",fontSize:"13px",fontFamily:"'IBM Plex Mono', monospace"},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),e.jsx("div",{style:{display:"flex",gap:"10px"},children:e.jsxs("button",{onClick:h,style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"10px",padding:"10px 16px",color:n.textSecondary,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Me,{size:14})," Refresh"]})})]}),(()=>{var T,C;const f=((T=g==null?void 0:g.sessions)==null?void 0:T.filter(N=>{const I=N.last_heartbeat_at||N.last_telemetry_at||N.started_at;return N.status==="active"&&I&&Date.now()-new Date(I).getTime()<12e4}).length)||((C=g==null?void 0:g.summary)==null?void 0:C.active)||0,S=p.filter(N=>N.expires_at&&N.state==="conformant"&&new Date(N.expires_at)<new Date(Date.now()+30*24*60*60*1e3)).length,j=x.length+S;return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsx(pe,{label:"Total Applications",value:(r==null?void 0:r.total_applications)||0,color:n.purpleBright,icon:e.jsx(Ae,{className:"w-5 h-5",style:{color:n.purpleBright}})}),e.jsx(pe,{label:"Active Tests",value:(r==null?void 0:r.active_tests)||0,color:n.accentAmber,icon:e.jsx(Qe,{className:"w-5 h-5",style:{color:n.accentAmber}})}),e.jsx(pe,{label:"Active Certificates",value:(r==null?void 0:r.certificates_active)||0,color:n.accentGreen,icon:e.jsx(tt,{className:"w-5 h-5",style:{color:n.accentGreen}})}),e.jsx(pe,{label:"Online Agents",value:f,color:f>0?n.accentGreen:n.textTertiary,icon:e.jsx(or,{className:"w-5 h-5",style:{color:f>0?n.accentGreen:n.textTertiary}})}),e.jsx(pe,{label:"Certificates Issued",value:(r==null?void 0:r.certificates_issued)||0,color:n.purpleBright,icon:e.jsx(Ze,{className:"w-5 h-5",style:{color:n.purpleBright}})}),e.jsx(pe,{label:"Needs Action",value:j,color:j>0?"#D6A05C":n.textTertiary,icon:e.jsx(ho,{className:"w-5 h-5",style:{color:j>0?"#D6A05C":n.textTertiary}})})]})})(),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Certification Pipeline"}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[c.length," total"]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",height:"32px",borderRadius:"6px",overflow:"hidden"},children:[[{key:"pending",label:"Pending",color:"#D6A05C",count:u.pending},{key:"under_review",label:"Review",color:"#D6A05C",count:u.under_review},{key:"approved",label:"Approved",color:n.purpleBright,count:u.approved},{key:"testing",label:"Testing",color:n.purpleBright,count:u.testing},{key:"conformant",label:"Conformant",color:n.accentGreen,count:u.conformant},{key:"revoked",label:"Suspended",color:n.accentRed,count:u.revoked}].map(f=>{const S=c.length||1,j=Math.max(f.count/S*100,f.count>0?8:0);return f.count>0?e.jsx("div",{style:{width:`${j}%`,background:`${f.color}30`,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"48px",position:"relative",borderLeft:`2px solid ${f.color}`},title:`${f.label}: ${f.count}`,children:e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:f.color,whiteSpace:"nowrap"},children:[f.count," ",f.label]})},f.key):null}),c.length===0&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.03)",padding:"40px 20px",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(91,75,138,0.12)",border:"1px solid rgba(157,140,207,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px"},children:e.jsx(Ae,{size:22,style:{color:n.purpleBright,opacity:.6}})}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"14px",fontWeight:500,margin:"0 0 6px 0"},children:"No applications yet"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"12px",margin:"0 0 16px 0",maxWidth:"260px"},children:"Submit your first ODDC certification application to get started."}),e.jsx("button",{onClick:()=>setPage("apply"),style:{background:`linear-gradient(135deg, ${n.purplePrimary} 0%, ${n.purpleBright} 100%)`,border:"none",borderRadius:"8px",padding:"8px 20px",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Start Application"})]})]})]}),x.length>0&&e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.accentAmber,margin:0},children:[" Review Queue (",x.length,")"]}),e.jsx(ee,{to:"/applications",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:"View All "})]}),e.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(f=>{var S;return e.jsxs("div",{style:{padding:"14px 16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx(ee,{to:`/applications/${f.id}`,style:{color:n.purpleBright,textDecoration:"none",fontWeight:500,fontSize:"14px"},children:f.system_name}),e.jsx("span",{style:{color:n.textTertiary,fontSize:"12px"},children:f.organization_name}),e.jsx("span",{className:"px-2 py-1 rounded",style:{background:"rgba(214,160,92,0.15)",color:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase"},children:(S=f.state)==null?void 0:S.replace("_"," ")})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.state==="pending"&&e.jsx("button",{onClick:()=>b(f.id,"under_review",`Begin review for ${f.system_name}`),className:"px-3 py-1 rounded",style:{background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",color:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Begin Review"}),e.jsx("button",{onClick:()=>b(f.id,"approved",`Approve ${f.system_name}`),className:"px-3 py-1 rounded",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Approve"}),e.jsx("button",{onClick:()=>b(f.id,"suspended",`Suspend ${f.system_name}`),className:"px-3 py-1 rounded",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Suspend"}),e.jsx(ee,{to:`/applications/${f.id}`,className:"px-3 py-1 rounded no-underline",style:{background:"rgba(157,140,207,0.1)",border:`1px solid ${n.borderGlass}`,color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase"},children:"View"})]})]},f.id)})})]}),i.length>0&&e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Active CAT-72 Tests"}),e.jsx(ee,{to:"/cat72",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:"Console "})]}),e.jsx("div",{className:"space-y-3",children:i.map(f=>{const S=Math.round(f.elapsed_seconds/(f.duration_hours*3600)*100),j=Math.max(0,(f.duration_hours*3600-f.elapsed_seconds)/3600).toFixed(1);return e.jsxs("div",{className:"p-4 rounded-lg",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:[f.organization_name,"  ",f.system_name]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[j,"h remaining"]}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.accentAmber},children:[S,"%"]})]})]}),e.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.1)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${S}%`,background:S>=100?n.accentGreen:n.purpleBright}})})]},f.id)})})]}),(()=>{const f=p.filter(S=>S.expires_at&&S.state==="conformant"&&new Date(S.expires_at)<new Date(Date.now()+2592e6));return f.length===0?null:e.jsxs("div",{style:{background:"rgba(214,160,92,0.08)",border:"1px solid rgba(214,160,92,0.25)",borderRadius:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ne,{size:16,style:{color:"#D6A05C"}}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:"#D6A05C",fontWeight:500},children:[f.length," Certificate",f.length>1?"s":""," Expiring Within 30 Days"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:f.map(S=>{const j=Math.ceil((new Date(S.expires_at)-Date.now())/864e5);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0,0,0,0.15)",borderRadius:"8px",padding:"10px 14px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textPrimary,fontWeight:500,fontSize:"13px"},children:S.system_name}),e.jsx("span",{style:{color:n.textTertiary,fontSize:"12px",marginLeft:"12px"},children:S.organization_name})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:j<=7?"#D65C5C":"#D6A05C",fontWeight:500},children:[j,"d remaining"]}),e.jsx(ee,{to:`/verify?cert=${S.certificate_number}`,style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:S.certificate_number})]})]},S.id)})})]})})(),p.length>0&&e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Recent Certificates"}),e.jsx(ee,{to:"/certificates",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:["Certificate","System","Status","Issued","Expires"].map(f=>e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:f},f))})}),e.jsx("tbody",{children:p.slice(0,5).map(f=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(ee,{to:`/verify?cert=${f.certificate_number}`,style:{color:n.purpleBright,textDecoration:"none",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"},children:f.certificate_number})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("span",{style:{color:n.textPrimary,fontSize:"13px"},children:f.system_name}),e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px",marginLeft:"8px"},children:f.organization_name})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",padding:"2px 8px",borderRadius:"4px",background:f.state==="conformant"?"rgba(92,214,133,0.15)":"rgba(214,92,92,0.15)",color:f.state==="conformant"?n.accentGreen:"#D65C5C"},children:f.state})}),e.jsx("td",{className:"px-4 py-3",style:{color:n.textTertiary,fontSize:"13px"},children:f.issued_at?new Date(f.issued_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:f.expires_at&&new Date(f.expires_at)<new Date(Date.now()+30*24*60*60*1e3)?"#D6A05C":n.textTertiary},children:f.expires_at?new Date(f.expires_at).toLocaleDateString():"-"})]},f.id))})]})})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Recent Applications"}),e.jsx(ee,{to:"/applications",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"State"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Submitted"})]})}),e.jsx("tbody",{children:o.map(f=>e.jsxs("tr",{className:"transition-colors cursor-pointer",style:{borderBottom:`1px solid ${n.borderGlass}`},onClick:()=>window.location.hash=`#/applications/${f.id}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(ee,{to:`/applications/${f.id}`,style:{color:n.purpleBright,textDecoration:"none"},children:f.system_name})}),e.jsx("td",{className:"px-4 py-3",style:{color:n.textSecondary},children:f.organization_name}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{background:f.state==="conformant"?"rgba(92,214,133,0.15)":f.state==="observe"?"rgba(157,140,207,0.15)":f.state==="revoked"?"rgba(214,92,92,0.15)":"rgba(214,160,92,0.15)",color:f.state==="conformant"?n.accentGreen:f.state==="observe"?n.purpleBright:f.state==="revoked"?n.accentRed:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:f.state})}),e.jsx("td",{className:"px-4 py-3",style:{color:n.textTertiary,fontSize:"14px"},children:f.submitted_at?new Date(f.submitted_at).toLocaleDateString():"N/A"})]},f.id))})]})})]})]})}function xi({isOpen:t,onClose:r,onImport:a,boundaryType:o}){const[s,i]=ge.useState(""),[l,c]=ge.useState("json"),[d,p]=ge.useState(""),[m,g]=ge.useState(null),v={numeric:{json:'[{"name":"Speed Limit","parameter":"speed","min_value":0,"max_value":100,"unit":"km/h","tolerance":5}]',csv:`name,parameter,min_value,max_value,hard_limit,unit,tolerance
Speed Limit,speed,0,100,120,km/h,5`},geo:{json:'[{"name":"Operating Zone","boundary_type":"circle","lat":30.123,"lon":-97.456,"radius_meters":500}]',csv:`name,boundary_type,lat,lon,radius_meters,altitude_max
Operating Zone,circle,30.123,-97.456,500,120`},time:{json:'[{"name":"Business Hours","start_hour":6,"end_hour":22,"timezone":"America/Chicago","days":[0,1,2,3,4]}]',csv:`name,start_hour,end_hour,timezone,days
Business Hours,6,22,America/Chicago,0;1;2;3;4`},state:{json:'[{"name":"Mode Check","parameter":"mode","allowed_values":"autonomous,semi-auto","forbidden_values":"manual_override"}]',csv:`name,parameter,allowed_values,forbidden_values
Mode Check,mode,"autonomous,semi-auto",manual_override`}},h=()=>{p(""),g(null);try{let u=[];if(l==="json"){const x=JSON.parse(s);u=Array.isArray(x)?x:[x]}else{const x=s.trim().split(`
`);if(x.length<2)throw new Error("CSV needs header + data rows");const b=x[0].split(",").map(f=>f.trim());u=x.slice(1).map(f=>{const S=f.match(/(".*?"|[^,]+)/g)||[],j={};return b.forEach((T,C)=>{let N=(S[C]||"").replace(/^"|"$/g,"").trim();T==="days"?j[T]=N.split(";").map(Number):["min_value","max_value","hard_limit","tolerance","lat","lon","radius_meters","altitude_min","altitude_max","start_hour","end_hour"].includes(T)?j[T]=N===""?"":N:j[T]=N}),j})}if(u.length===0)throw new Error("No data found");g(u)}catch(u){p(u.message)}};return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:r,children:e.jsxs("div",{style:{background:"#1a1a2e",border:"1px solid rgba(157,140,207,0.2)",borderRadius:"16px",padding:"32px",maxWidth:"700px",width:"100%",maxHeight:"80vh",overflowY:"auto"},onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"20px",fontWeight:200,margin:0},children:["Bulk Import  ",o]}),e.jsx("button",{onClick:r,style:{background:"none",border:"none",color:"#6a6a80",fontSize:"20px",cursor:"pointer"},children:""})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[["json","csv"].map(u=>e.jsx("button",{onClick:()=>{c(u),p(""),g(null)},style:{padding:"6px 16px",borderRadius:"6px",border:"1px solid "+(l===u?"#8b5cf6":"rgba(255,255,255,0.1)"),background:l===u?"rgba(139,92,246,0.15)":"transparent",color:l===u?"#8b5cf6":"#a0a0b0",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:u},u)),e.jsx("button",{onClick:()=>{var u;return i(((u=v[o])==null?void 0:u[l])||"")},style:{marginLeft:"auto",padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",background:"transparent",color:"#a0a0b0",fontSize:"11px",cursor:"pointer"},children:"Load Example"})]}),e.jsx("textarea",{value:s,onChange:u=>i(u.target.value),rows:10,placeholder:l==="json"?"Paste JSON array of boundaries...":"Paste CSV with header row...",style:{width:"100%",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"12px",color:"#e8e8f0",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",lineHeight:"1.5",resize:"vertical",outline:"none"}}),d&&e.jsxs("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"8px"},children:[" ",d]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[e.jsx("button",{onClick:h,style:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #8b5cf6",background:"transparent",color:"#8b5cf6",fontSize:"12px",cursor:"pointer"},children:"Preview"}),m&&e.jsxs("button",{onClick:()=>{a(m),r(),i(""),g(null)},style:{padding:"8px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg,#5B4B8A,#8b5cf6)",color:"#fff",fontSize:"12px",cursor:"pointer",fontWeight:500},children:["Import ",m.length," ",m.length===1?"boundary":"boundaries"]})]}),m&&e.jsxs("div",{style:{marginTop:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"12px",maxHeight:"200px",overflowY:"auto"},children:[e.jsxs("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:"#6a6a80",marginBottom:"8px"},children:["PREVIEW (",m.length," rows)"]}),m.map((u,x)=>e.jsx("div",{style:{fontSize:"11px",color:"#a0a0b0",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Object.entries(u).map(([b,f])=>`${b}: ${f}`).join("  ")},x))]})]})}):null}function ui(){const{user:t}=ce(),r=Rt(),[a,o]=y.useState([]),[s,i]=y.useState(0),[l,c]=y.useState({}),[d,p]=y.useState("all"),[m,g]=y.useState(""),[v,h]=y.useState(new Set),[u,x]=y.useState(!1),b=_=>h(R=>{const L=new Set(R);return L.has(_)?L.delete(_):L.add(_),L}),f=()=>h(new Set(I.map(_=>_.id))),S=()=>h(new Set),j=async(_,R)=>{var P,A;const L=[...v];if(L.length===0)return;const B=_==="delete"?`Delete ${L.length} application(s)?`:`${_} ${L.length} application(s)?`;if(await r({title:"Confirm",message:B})){x(!0);try{_==="delete"?await O.post("/api/applications/bulk-delete",{ids:L}):await O.post("/api/applications/bulk-state",{ids:L,new_state:R}),h(new Set),T()}catch($){toast.show("Bulk operation failed: "+(((A=(P=$.response)==null?void 0:P.data)==null?void 0:A.detail)||$.message),"error")}x(!1)}},T=(_="",R="all")=>{const L={};_&&(L.search=_),R&&R!=="all"&&(L.state=R),O.get("/api/applications/",{params:L}).then(B=>{o(B.data.applications||B.data),i(B.data.total??(B.data.applications||B.data).length),c(B.data.state_counts||{})}).catch(console.error)};y.useEffect(()=>{T()},[]),y.useEffect(()=>{const _=setTimeout(()=>{T(m,d)},300);return()=>clearTimeout(_)},[m,d]);const C=async(_,R,L)=>{var B,P;if(await r({title:"Confirm",message:L+"?"}))try{await O.patch(`/api/applications/${_}/state?new_state=${R}`),T()}catch(A){toast.show("Failed: "+(((P=(B=A.response)==null?void 0:B.data)==null?void 0:P.detail)||A.message),"error")}},N=[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"under_review",label:"Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"},{key:"revoked",label:"Suspended"}],I=a,z=_=>_==="conformant"?n.accentGreen:_==="revoked"||_==="suspended"?n.accentRed:_==="testing"||_==="approved"?n.purpleBright:n.accentAmber;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Conformance"}),e.jsx("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:"Applications"})]}),(t==null?void 0:t.role)!=="admin"&&e.jsxs(ee,{to:"/applications/new",className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors no-underline",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(bt,{className:"w-4 h-4"}),"New Application"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"400px"},children:[e.jsx(et,{className:"w-4 h-4",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:n.textTertiary}}),e.jsx("input",{value:m,onChange:_=>g(_.target.value),placeholder:"Search by name, org, or ID...",style:{width:"100%",background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px 8px 36px",color:n.textPrimary,fontSize:"13px",fontFamily:"'IBM Plex Mono', monospace",outline:"none"}})]}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[I.length," of ",s]})]}),(t==null?void 0:t.role)==="admin"&&e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:N.map(_=>{const R=_.key==="all"?l.all||0:_.key==="revoked"?(l.suspended||0)+(l.revoked||0):l[_.key]||0;return e.jsxs("button",{onClick:()=>p(_.key),style:{padding:"6px 14px",borderRadius:"6px",cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",background:d===_.key?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.03)",border:`1px solid ${d===_.key?n.purpleBright:n.borderGlass}`,color:d===_.key?n.purpleBright:n.textTertiary},children:[_.label," ",R>0?`(${R})`:""]},_.key)})}),e.jsxs(Y,{children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[(t==null?void 0:t.role)==="admin"&&e.jsx("th",{className:"px-2 py-3 text-center",style:{width:"40px"},children:e.jsx("input",{type:"checkbox",checked:v.size>0&&v.size===I.length,onChange:_=>_.target.checked?f():S(),style:{cursor:"pointer",accentColor:n.purpleBright}})}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"System Name"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"State"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Submitted"}),(t==null?void 0:t.role)==="admin"&&e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:I.map(_=>{var R;return e.jsxs("tr",{className:"transition-colors",style:{borderBottom:`1px solid ${n.borderGlass}`,background:v.has(_.id)?"rgba(157,140,207,0.08)":"transparent"},children:[(t==null?void 0:t.role)==="admin"&&e.jsx("td",{className:"px-2 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:v.has(_.id),onChange:()=>b(_.id),style:{cursor:"pointer",accentColor:n.purpleBright}})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx(ee,{to:`/applications/${_.id}`,style:{color:n.purpleBright,textDecoration:"none"},children:_.system_name}),e.jsx("div",{style:{fontSize:"11px",color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",marginTop:"2px"},children:_.application_number})]}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textSecondary},children:_.organization_name}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1 rounded",style:{background:`${z(_.state)}20`,color:z(_.state),border:`1px solid ${z(_.state)}40`,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:(R=_.state)==null?void 0:R.replace("_"," ")})}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textTertiary,fontSize:"14px"},children:_.submitted_at?new Date(_.submitted_at).toLocaleDateString():"N/A"}),(t==null?void 0:t.role)==="admin"&&e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[_.state==="pending"&&e.jsx("button",{onClick:L=>{L.stopPropagation(),C(_.id,"under_review",`Begin review for ${_.system_name}`)},className:"px-2 py-1 rounded",style:{background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",color:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Review"}),(_.state==="pending"||_.state==="under_review")&&e.jsx("button",{onClick:L=>{L.stopPropagation(),C(_.id,"approved",`Approve ${_.system_name}`)},className:"px-2 py-1 rounded",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Approve"}),_.state==="approved"&&e.jsx(ee,{to:`/applications/${_.id}`,className:"px-2 py-1 rounded no-underline",style:{background:"rgba(157,140,207,0.15)",border:`1px solid ${n.borderGlass}`,color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Schedule Test"}),_.state==="conformant"&&e.jsx("span",{style:{color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px"},children:" Certified"}),_.state==="testing"&&e.jsx(ee,{to:"/cat72",className:"px-2 py-1 rounded no-underline",style:{background:"rgba(157,140,207,0.15)",border:`1px solid ${n.borderGlass}`,color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"View Test"}),["pending","under_review","approved","testing","conformant"].includes(_.state)&&e.jsx("button",{onClick:L=>{L.stopPropagation(),C(_.id,"suspended",`Suspend ${_.system_name}`)},className:"px-2 py-1 rounded",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Suspend"}),(_.state==="suspended"||_.state==="revoked")&&e.jsx("button",{onClick:L=>{L.stopPropagation(),C(_.id,"pending",`Reinstate ${_.system_name} to pending`)},className:"px-2 py-1 rounded",style:{background:"rgba(92,214,133,0.1)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Reinstate"})]})})]},_.id)})})]}),v.size>0&&(t==null?void 0:t.role)==="admin"&&e.jsxs("div",{style:{position:"sticky",bottom:"16px",zIndex:50,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 20px",margin:"16px",background:"rgba(18,12,30,0.95)",backdropFilter:"blur(12px)",border:`1px solid ${n.purpleBright}`,borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:[v.size," selected"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>j("approve","approved"),disabled:u,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Approve"}),e.jsx("button",{onClick:()=>j("review","under_review"),disabled:u,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",color:"#D6A05C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Review"}),e.jsx("button",{onClick:()=>j("suspend","suspended"),disabled:u,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Suspend"}),e.jsx("button",{onClick:()=>j("reinstate","pending"),disabled:u,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(92,214,133,0.1)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Reinstate"}),e.jsx("div",{style:{width:"1px",height:"20px",background:n.borderGlass,margin:"0 4px"}}),e.jsx("button",{onClick:()=>j("delete"),disabled:u,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Delete"}),e.jsx("button",{onClick:S,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),u&&e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:"Processing..."})]})]}),I.length===0&&e.jsx(Wr,{icon:Ae,title:"No Applications Found",description:a.length===0?"You haven't submitted any certification applications yet. Start your ODDC certification journey.":"No applications match your current filter.",actionLabel:a.length===0?"New Application":null,onAction:()=>setPage("apply")})]})]})}function mi(){const{user:t}=ce(),r=at(),[a,o]=y.useState(1),s=6,[i,l]=y.useState(""),[c,d]=y.useState({organization_name:"",contact_name:"",contact_email:"",contact_phone:""}),[p,m]=y.useState({system_name:"",system_type:"",system_version:"",manufacturer:"",system_description:"",deployment_type:"",environment:"",integration_method:"python",expected_volume:"",compliance_requirements:""}),[g,v]=y.useState({odd_description:"",facility_location:"",preferred_test_date:"",temp_min:"",temp_max:"",temp_unit:"F",weather_constraints:"",surface_type:"",notes:""}),[h,u]=y.useState([{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}]),[x,b]=y.useState({open:!1,type:""}),[f,S]=y.useState(""),[j,T]=y.useState([{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]),[C,N]=y.useState([{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}]),[I,z]=y.useState([{name:"",parameter:"",allowed_values:"",forbidden_values:""}]),[_,R]=y.useState({violation_action:"stop",connection_loss_action:"stop",fail_closed:!0,emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_email:"",existing_safety_systems:"",escalation_triggers:""}),[L,B]=y.useState(!1);y.useEffect(()=>{t&&d(w=>({...w,contact_name:w.contact_name||t.full_name||"",contact_email:w.contact_email||t.email||"",organization_name:w.organization_name||t.organization_name||""}))},[t]);const P=w=>{var de,ze;const U=SYSTEM_TYPES[w];if(!U||!U.template)return;const D=U.template;if(D.numeric&&D.numeric.length>0?u(D.numeric.map(ne=>({name:ne.name.replace(/_/g," ").replace(/\b\w/g,ve=>ve.toUpperCase()),parameter:ne.name,min_value:ne.min!=null?String(ne.min):"",max_value:ne.max!=null?String(ne.max):"",hard_limit:ne.max!=null?String(ne.max):"",unit:ne.unit||"",tolerance:ne.tolerance!=null?String(ne.tolerance):""}))):u([{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}]),D.geo?T([{name:"Primary Operating Zone",boundary_type:D.geo.type==="polygon"||D.geo.type==="polygon_3d"?"polygon":"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]):T([{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]),D.time){const[ne,ve]=(D.time.operating_hours||"0-23").split("-").map(lo=>String(parseInt(lo))),we=D.time.timezone||"America/Chicago";N([{name:"Operating Hours",start_hour:ne,end_hour:ve,timezone:{facility_local:"America/Chicago",ops_local:"America/Chicago",farm_local:"America/Chicago",delivery_zone_local:"America/Chicago",campus_local:"America/Chicago",city_local:"America/Chicago",community_local:"America/Chicago",site_local:"America/Chicago",hospital_local:"America/Chicago",lab_local:"America/Chicago",mine_local:"America/Chicago",port_local:"America/Chicago",airport_local:"America/Chicago",transit_local:"America/Chicago",incident_local:"America/Chicago",exchange_local:"America/New_York",institution_local:"America/New_York",utility_local:"America/Chicago",grid_local:"America/Chicago",plant_local:"America/Chicago",fab_local:"America/Chicago",restaurant_local:"America/Chicago",store_local:"America/Chicago",hotel_local:"America/Chicago",network_local:"UTC",theater_local:"UTC",patient_local:"America/Chicago",student_local:"America/Chicago",firm_local:"America/New_York",mission_local:"UTC"}[we]||we,days:D.time.operating_days||[0,1,2,3,4,5,6]}])}else N([{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}]);D.states&&((de=D.states.allowed)!=null&&de.length||(ze=D.states.forbidden)!=null&&ze.length)?z([{name:"Operational States",parameter:"mode",allowed_values:(D.states.allowed||[]).join(", "),forbidden_values:(D.states.forbidden||[]).join(", ")}]):z([{name:"",parameter:"",allowed_values:"",forbidden_values:""}]),D.odd_description&&v(ne=>({...ne,odd_description:D.odd_description}));const q={ground_robots:"indoor",aerial:"outdoor",vehicles:"outdoor",marine:"outdoor",medical:"indoor",financial:"virtual",energy:"hybrid",manufacturing:"indoor",defense:"hybrid",agriculture:"outdoor",space_extreme:"outdoor",telecom_digital:"virtual",construction:"outdoor",logistics:"indoor",retail_hospitality:"indoor",education_research:"indoor",legal_compliance:"virtual",other:""},H={ground_robots:"warehouse",aerial:"airspace",vehicles:"road",marine:"other",medical:"clinical",financial:"data_center",energy:"other",manufacturing:"manufacturing",defense:"other",agriculture:"agriculture",space_extreme:"other",telecom_digital:"data_center",construction:"construction",logistics:"warehouse",retail_hospitality:"other",education_research:"other",legal_compliance:"other",other:""};if(m(ne=>({...ne,deployment_type:q[U.domain]||ne.deployment_type,environment:H[U.domain]||ne.environment})),D.safety){const ne={block:"stop",warn:"alert",stop:"stop"};R(ve=>({...ve,violation_action:ne[D.safety.violation_action]||D.safety.violation_action||ve.violation_action,fail_closed:D.safety.fail_closed!==!1}))}},A={background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontFamily:"'Inter', sans-serif"},$=w=>e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"16px"},children:w}),F=w=>e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textSecondary,fontSize:"14px"},children:w}),k=w=>e.jsx("p",{style:{color:n.textTertiary,fontSize:"11px",marginTop:"4px",lineHeight:"1.4"},children:w}),W=(w,U,D)=>U([...w,{...D}]),te=(w,U,D)=>{w.length>1&&U(w.filter((q,H)=>H!==D))},X=(w,U,D,q,H)=>{const de=[...w];de[D]={...de[D],[q]:H},U(de)},G=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Q=()=>{const w=h.filter(H=>H.name&&H.parameter).map(H=>({name:H.name,parameter:H.parameter,min_value:H.min_value?parseFloat(H.min_value):null,max_value:H.max_value?parseFloat(H.max_value):null,hard_limit:H.hard_limit?parseFloat(H.hard_limit):null,unit:H.unit||null,tolerance:H.tolerance?parseFloat(H.tolerance):0})),U=j.filter(H=>H.name&&H.lat&&H.lon).map(H=>({name:H.name,boundary_type:H.boundary_type,center:{lat:parseFloat(H.lat),lon:parseFloat(H.lon)},radius_meters:H.radius_meters?parseFloat(H.radius_meters):1e3,altitude_min:H.altitude_min?parseFloat(H.altitude_min):null,altitude_max:H.altitude_max?parseFloat(H.altitude_max):null})),D=C.filter(H=>H.name).map(H=>({name:H.name,allowed_hours_start:parseInt(H.start_hour),allowed_hours_end:parseInt(H.end_hour),allowed_days:H.days,timezone:H.timezone})),q=I.filter(H=>H.name&&H.parameter).map(H=>({name:H.name,parameter:H.parameter,allowed_values:H.allowed_values?H.allowed_values.split(",").map(de=>de.trim()).filter(Boolean):[],forbidden_values:H.forbidden_values?H.forbidden_values.split(",").map(de=>de.trim()).filter(Boolean):[]}));return{numeric_boundaries:w,geo_boundaries:U,time_boundaries:D,state_boundaries:q,rate_boundaries:[],safe_state:{action:_.violation_action,connection_loss:_.connection_loss_action,notify:!0,emergency_contact:{name:_.emergency_contact_name,phone:_.emergency_contact_phone,email:_.emergency_contact_email}},fail_closed:_.fail_closed}},re=async()=>{var w,U;try{const D=Q(),q={organization_name:c.organization_name,contact_name:c.contact_name,contact_email:c.contact_email,contact_phone:c.contact_phone,system_name:p.system_name,system_type:p.system_type,custom_system_type:f||null,system_version:p.system_version,manufacturer:p.manufacturer,system_description:p.system_description,odd_specification:{description:g.odd_description,deployment_type:p.deployment_type,environment:p.environment,facility_location:g.facility_location,operating_temp:g.temp_min&&g.temp_max?{min:parseFloat(g.temp_min),max:parseFloat(g.temp_max),unit:g.temp_unit}:null,weather_constraints:g.weather_constraints||null,surface_type:g.surface_type||null,integration_method:p.integration_method,expected_volume:p.expected_volume,compliance_requirements:p.compliance_requirements},envelope_definition:D,facility_location:g.facility_location,preferred_test_date:g.preferred_test_date||null,notes:g.notes};await O.post("/api/applications/",q),r("/applications")}catch(D){l(((U=(w=D.response)==null?void 0:w.data)==null?void 0:U.detail)||"Failed to submit application"),o(1)}},E=(w,U)=>{w==="numeric"&&u(D=>[...D.filter(q=>q.name),...U.map(q=>({name:q.name||"",parameter:q.parameter||"",min_value:q.min_value||"",max_value:q.max_value||"",hard_limit:q.hard_limit||"",unit:q.unit||"",tolerance:q.tolerance||""}))]),w==="geo"&&T(D=>[...D.filter(q=>q.name),...U.map(q=>({name:q.name||"",boundary_type:q.boundary_type||"circle",lat:q.lat||"",lon:q.lon||"",radius_meters:q.radius_meters||"",altitude_min:q.altitude_min||"",altitude_max:q.altitude_max||""}))]),w==="time"&&N(D=>[...D.filter(q=>q.name),...U.map(q=>({name:q.name||"",start_hour:q.start_hour||"6",end_hour:q.end_hour||"22",timezone:q.timezone||"America/Chicago",days:Array.isArray(q.days)?q.days:[0,1,2,3,4,5,6]}))]),w==="state"&&z(D=>[...D.filter(q=>q.name),...U.map(q=>({name:q.name||"",parameter:q.parameter||"",allowed_values:q.allowed_values||"",forbidden_values:q.forbidden_values||""}))])},V=()=>a===1?c.organization_name&&c.contact_email:a===2?p.system_name&&p.system_type:a===3?g.odd_description:!0,J=["Organization","System","Operating Domain","Boundaries","Safety & Failure","Review"];return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs(ee,{to:"/applications",className:"flex items-center gap-2 mb-4 no-underline",style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(ar,{className:"w-4 h-4"}),"Back to Applications"]}),e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"New Submission"}),e.jsx("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:"ODDC Application"}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:"Submit your autonomous system for conformance determination"})]}),e.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:J.map((w,U)=>e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{height:"3px",borderRadius:"2px",background:U+1<=a?n.purpleBright:"rgba(255,255,255,0.08)",transition:"background 0.3s",marginBottom:"6px"}}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"8px",letterSpacing:"1px",textTransform:"uppercase",color:U+1<=a?n.purpleBright:n.textTertiary},children:w})]},U))}),e.jsxs(Y,{children:[i&&e.jsx("div",{className:"mb-4 p-3 rounded-lg",style:{background:"rgba(214,92,92,0.15)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed},children:i}),L&&e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(92,214,133,0.15)",border:"2px solid rgba(92,214,133,0.4)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",fontSize:"28px"},children:""}),e.jsx("h2",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"28px",fontWeight:200,margin:"0 0 12px",color:n.textPrimary},children:"Application Submitted"}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"14px",lineHeight:"1.6",maxWidth:"480px",margin:"0 auto 8px"},children:"Your application is now in the queue. Our team will review your ODD specification and boundary definitions."}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"32px"},children:"You'll receive email updates as your application progresses through the certification pipeline."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx(ee,{to:"/applications",className:"no-underline px-6 py-3 rounded-lg",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"View Applications"}),e.jsx(ee,{to:"/dashboard",className:"no-underline px-6 py-3 rounded-lg",style:{background:"transparent",border:`1px solid ${n.borderGlass}`,color:n.textSecondary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Dashboard"})]})]}),!L&&e.jsxs(e.Fragment,{children:[a===1&&e.jsxs("div",{className:"space-y-4",children:[$("Organization Information"),e.jsxs("div",{children:[F("Organization Name *"),e.jsx("input",{type:"text",value:c.organization_name,onChange:w=>d({...c,organization_name:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]}),e.jsxs("div",{children:[F("Contact Name"),e.jsx("input",{type:"text",value:c.contact_name,onChange:w=>d({...c,contact_name:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[F("Contact Email *"),e.jsx("input",{type:"email",value:c.contact_email,onChange:w=>d({...c,contact_email:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]}),e.jsxs("div",{children:[F("Contact Phone"),e.jsx("input",{type:"tel",value:c.contact_phone,onChange:w=>d({...c,contact_phone:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-4",children:[$("System Information"),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[F("System Name *"),e.jsx("input",{type:"text",value:p.system_name,onChange:w=>m({...p,system_name:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]}),e.jsxs("div",{children:[F("System Type *"),e.jsxs("select",{value:p.system_type,onChange:w=>{m({...p,system_type:w.target.value}),P(w.target.value)},className:"w-full px-4 py-3 rounded-lg outline-none",style:A,children:[e.jsxs("option",{value:"",children:["Select system type (",Object.keys(SYSTEM_TYPES).length," available)..."]}),DOMAIN_GROUPS.map(w=>{const U=Object.entries(SYSTEM_TYPES).filter(([,D])=>D.domain===w.key);return U.length?e.jsx("optgroup",{label:w.label,children:U.map(([D,q])=>e.jsx("option",{value:D,children:q.label},D))},w.key):null})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[F("System Version"),e.jsx("input",{type:"text",value:p.system_version,onChange:w=>m({...p,system_version:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,placeholder:"e.g., 1.0.0"})]}),e.jsxs("div",{children:[F("Manufacturer"),e.jsx("input",{type:"text",value:p.manufacturer,onChange:w=>m({...p,manufacturer:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]})]}),e.jsxs("div",{children:[F("System Description *"),e.jsx("textarea",{value:p.system_description,onChange:w=>m({...p,system_description:w.target.value}),rows:3,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:A})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[F("Deployment Type"),e.jsxs("select",{value:p.deployment_type,onChange:w=>m({...p,deployment_type:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"indoor",children:"Indoor"}),e.jsx("option",{value:"outdoor",children:"Outdoor"}),e.jsx("option",{value:"hybrid",children:"Indoor + Outdoor"}),e.jsx("option",{value:"virtual",children:"Virtual / Cloud"})]})]}),e.jsxs("div",{children:[F("Environment"),e.jsxs("select",{value:p.environment,onChange:w=>m({...p,environment:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"warehouse",children:"Warehouse / Logistics"}),e.jsx("option",{value:"manufacturing",children:"Manufacturing Floor"}),e.jsx("option",{value:"road",children:"Public Road"}),e.jsx("option",{value:"airspace",children:"Airspace"}),e.jsx("option",{value:"clinical",children:"Clinical / Hospital"}),e.jsx("option",{value:"data_center",children:"Data Center"}),e.jsx("option",{value:"agriculture",children:"Agriculture / Field"}),e.jsx("option",{value:"construction",children:"Construction Site"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[F("Agent Deployment Method"),e.jsxs("select",{value:p.integration_method,onChange:w=>m({...p,integration_method:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,children:[e.jsx("option",{value:"python",children:"Python Package"}),e.jsx("option",{value:"docker",children:"Docker Container"}),e.jsx("option",{value:"kubernetes",children:"Kubernetes"})]})]}),e.jsxs("div",{children:[F("Expected Actions / Day"),e.jsxs("select",{value:p.expected_volume,onChange:w=>m({...p,expected_volume:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"low",children:"Low (< 1,000)"}),e.jsx("option",{value:"medium",children:"Medium (1K  10K)"}),e.jsx("option",{value:"high",children:"High (10K  100K)"}),e.jsx("option",{value:"very_high",children:"Very High (100K+)"})]})]})]}),e.jsxs("div",{children:[p.system_type&&p.system_type.includes("custom")&&e.jsxs("div",{style:{marginTop:"-8px"},children:[F("Describe Your System Type *"),e.jsx("input",{type:"text",value:f,onChange:w=>S(w.target.value),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,placeholder:"e.g., Underwater pipeline inspection ROV, Agricultural pollination drone swarm"}),k("Since your system doesn't fit a standard category, please describe it so we can configure appropriate boundaries.")]}),F("Compliance Requirements"),e.jsx("input",{type:"text",value:p.compliance_requirements,onChange:w=>m({...p,compliance_requirements:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,placeholder:"e.g., ISO 26262, FDA 510(k), FAA Part 107, SOC 2"}),k("List any regulatory or compliance frameworks your system must adhere to.")]})]}),a===3&&e.jsxs("div",{className:"space-y-4",children:[$("Operational Design Domain"),e.jsxs("div",{children:[F("ODD Description *"),e.jsx("textarea",{value:g.odd_description,onChange:w=>v({...g,odd_description:w.target.value}),rows:5,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:A,placeholder:"Describe the operating domain in plain language: where, how, and under what conditions the system operates."}),k("This is the human-readable description of your system's intended operating domain. Specific numeric limits will be defined in the next step.")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[F("Facility / Deployment Location"),e.jsx("input",{type:"text",value:g.facility_location,onChange:w=>v({...g,facility_location:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,placeholder:"Address or region"})]}),e.jsxs("div",{children:[F("Preferred Test Start Date"),e.jsx("input",{type:"date",value:g.preferred_test_date,onChange:w=>v({...g,preferred_test_date:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]})]}),e.jsx("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px",marginTop:"8px"},children:$("Environmental Conditions")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[F("Temp Min"),e.jsx("input",{type:"number",value:g.temp_min,onChange:w=>v({...g,temp_min:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,placeholder:"e.g., 32"})]}),e.jsxs("div",{children:[F("Temp Max"),e.jsx("input",{type:"number",value:g.temp_max,onChange:w=>v({...g,temp_max:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,placeholder:"e.g., 110"})]}),e.jsxs("div",{children:[F("Unit"),e.jsxs("select",{value:g.temp_unit,onChange:w=>v({...g,temp_unit:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,children:[e.jsx("option",{value:"F",children:"F"}),e.jsx("option",{value:"C",children:"C"})]})]})]}),e.jsxs("div",{children:[F("Surface / Terrain Type"),e.jsx("input",{type:"text",value:g.surface_type,onChange:w=>v({...g,surface_type:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,placeholder:"e.g., flat concrete, paved road, gravel"})]}),e.jsxs("div",{children:[F("Weather Constraints"),e.jsx("input",{type:"text",value:g.weather_constraints,onChange:w=>v({...g,weather_constraints:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,placeholder:"e.g., no operation in rain/snow, wind < 25 mph"})]}),e.jsxs("div",{children:[F("Additional Notes"),e.jsx("textarea",{value:g.notes,onChange:w=>v({...g,notes:w.target.value}),rows:2,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:A,placeholder:"Anything else relevant to the operating domain"})]})]}),a===4&&e.jsxs("div",{className:"space-y-6",children:[p.system_type&&SYSTEM_TYPES[p.system_type]&&e.jsxs("div",{style:{padding:"12px 16px",background:p.system_type.includes("custom")?"rgba(139,92,246,0.1)":"rgba(92,214,133,0.1)",border:"1px solid "+(p.system_type.includes("custom")?"rgba(139,92,246,0.2)":"rgba(92,214,133,0.2)"),borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:p.system_type.includes("custom")?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{size:16,style:{color:n.purpleBright}}),e.jsxs("span",{style:{color:n.purpleBright,fontSize:"13px"},children:["Custom system  define all boundaries manually or use Bulk Import",f?` (${f})`:""]})]}):e.jsxs(e.Fragment,{children:[e.jsx(cn,{size:16,style:{color:n.accentGreen}}),e.jsxs("span",{style:{color:n.accentGreen,fontSize:"13px"},children:["Loaded recommended boundaries for ",SYSTEM_TYPES[p.system_type].label]})]})}),!p.system_type.includes("custom")&&e.jsx("button",{onClick:()=>P(p.system_type),style:{background:"transparent",border:"1px solid rgba(92,214,133,0.3)",borderRadius:"6px",padding:"4px 12px",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer"},children:"Reload Defaults"})]}),e.jsxs("div",{children:[$("Numeric Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>b({open:!0,type:"numeric"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",borderRadius:"6px",padding:"4px 12px",color:"#8b5cf6",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),k("Define measurable limits: speed, temperature, altitude, weight, pressure, distance, etc."),h.map((w,U)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:w.name,onChange:D=>X(h,u,U,"name",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Name (e.g., Speed Limit)"}),e.jsx("input",{type:"text",value:w.parameter,onChange:D=>X(h,u,U,"parameter",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Parameter (e.g., speed)"})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsx("input",{type:"number",value:w.min_value,onChange:D=>X(h,u,U,"min_value",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Min"}),e.jsx("input",{type:"number",value:w.max_value,onChange:D=>X(h,u,U,"max_value",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Max"}),e.jsx("input",{type:"number",value:w.hard_limit,onChange:D=>X(h,u,U,"hard_limit",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Hard limit"}),e.jsx("input",{type:"text",value:w.unit,onChange:D=>X(h,u,U,"unit",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Unit"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:w.tolerance,onChange:D=>X(h,u,U,"tolerance",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px",flex:1},placeholder:"Tol"}),h.length>1&&e.jsx("button",{onClick:()=>te(h,u,U),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},U)),e.jsx("button",{onClick:()=>W(h,u,{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}),style:{marginTop:"8px",background:"transparent",border:`1px dashed ${n.borderGlass}`,borderRadius:"6px",padding:"8px 16px",color:n.purpleBright,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Numeric Boundary"})]}),e.jsxs("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:[$("Geographic Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>b({open:!0,type:"geo"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",borderRadius:"6px",padding:"4px 12px",color:"#8b5cf6",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),k("Define the physical operating zone. Enter center coordinates and radius."),j.map((w,U)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:w.name,onChange:D=>X(j,T,U,"name",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Name (e.g., Operating Zone)"}),e.jsxs("select",{value:w.boundary_type,onChange:D=>X(j,T,U,"boundary_type",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},children:[e.jsx("option",{value:"circle",children:"Radius from Point"}),e.jsx("option",{value:"polygon",children:"Polygon (contact us)"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"number",step:"any",value:w.lat,onChange:D=>X(j,T,U,"lat",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:w.lon,onChange:D=>X(j,T,U,"lon",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Longitude"}),e.jsx("input",{type:"number",value:w.radius_meters,onChange:D=>X(j,T,U,"radius_meters",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Radius (m)"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:w.altitude_max,onChange:D=>X(j,T,U,"altitude_max",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px",flex:1},placeholder:"Alt max (m)"}),j.length>1&&e.jsx("button",{onClick:()=>te(j,T,U),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},U)),e.jsx("button",{onClick:()=>W(j,T,{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}),style:{marginTop:"8px",background:"transparent",border:`1px dashed ${n.borderGlass}`,borderRadius:"6px",padding:"8px 16px",color:n.purpleBright,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Geographic Boundary"})]}),e.jsxs("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:[$("Time Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>b({open:!0,type:"time"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",borderRadius:"6px",padding:"4px 12px",color:"#8b5cf6",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),k("Define allowed operating hours and days."),C.map((w,U)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:w.name,onChange:D=>X(C,N,U,"name",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Name"}),e.jsx("input",{type:"number",min:"0",max:"23",value:w.start_hour,onChange:D=>X(C,N,U,"start_hour",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Start hour"}),e.jsx("input",{type:"number",min:"0",max:"23",value:w.end_hour,onChange:D=>X(C,N,U,"end_hour",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"End hour"}),e.jsxs("select",{value:w.timezone,onChange:D=>X(C,N,U,"timezone",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},children:[e.jsx("option",{value:"America/New_York",children:"Eastern"}),e.jsx("option",{value:"America/Chicago",children:"Central"}),e.jsx("option",{value:"America/Denver",children:"Mountain"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Europe/London",children:"UK"}),e.jsx("option",{value:"Europe/Berlin",children:"CET"}),e.jsx("option",{value:"Asia/Tokyo",children:"JST"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px",marginRight:"4px"},children:"Days:"}),G.map((D,q)=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",cursor:"pointer",fontSize:"11px",color:w.days.includes(q)?n.purpleBright:n.textTertiary},children:[e.jsx("input",{type:"checkbox",checked:w.days.includes(q),onChange:H=>{const de=H.target.checked?[...w.days,q].sort():w.days.filter(ze=>ze!==q);X(C,N,U,"days",de)},style:{accentColor:n.purpleBright,width:"12px",height:"12px"}}),D]},q)),C.length>1&&e.jsx("button",{onClick:()=>te(C,N,U),style:{marginLeft:"auto",background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"2px 8px",fontSize:"14px"},children:""})]})]},U)),e.jsx("button",{onClick:()=>W(C,N,{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}),style:{marginTop:"8px",background:"transparent",border:`1px dashed ${n.borderGlass}`,borderRadius:"6px",padding:"8px 16px",color:n.purpleBright,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Time Boundary"})]}),e.jsxs("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:[$("State Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>b({open:!0,type:"state"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",borderRadius:"6px",padding:"4px 12px",color:"#8b5cf6",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),k("Define allowed/forbidden operational states and modes."),I.map((w,U)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:w.name,onChange:D=>X(I,z,U,"name",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Name (e.g., Mode Check)"}),e.jsx("input",{type:"text",value:w.parameter,onChange:D=>X(I,z,U,"parameter",D.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Parameter (e.g., mode)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:w.allowed_values,onChange:D=>X(I,z,U,"allowed_values",D.target.value),className:"w-full px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Allowed (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:n.textTertiary},children:"e.g., autonomous, semi-autonomous"})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("input",{type:"text",value:w.forbidden_values,onChange:D=>X(I,z,U,"forbidden_values",D.target.value),className:"w-full px-3 py-2 rounded-lg outline-none",style:{...A,fontSize:"13px"},placeholder:"Forbidden (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:n.textTertiary},children:"e.g., manual_override, degraded"})]}),I.length>1&&e.jsx("button",{onClick:()=>te(I,z,U),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px",alignSelf:"flex-start"},children:""})]})]})]},U)),e.jsx("button",{onClick:()=>W(I,z,{name:"",parameter:"",allowed_values:"",forbidden_values:""}),style:{marginTop:"8px",background:"transparent",border:`1px dashed ${n.borderGlass}`,borderRadius:"6px",padding:"8px 16px",color:n.purpleBright,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add State Boundary"})]}),e.jsx(xi,{isOpen:x.open,onClose:()=>b({open:!1,type:""}),onImport:w=>E(x.type,w),boundaryType:x.type})]}),a===5&&e.jsxs("div",{className:"space-y-4",children:[$("Safety & Failure Mode"),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[F("On Boundary Violation *"),e.jsxs("select",{value:_.violation_action,onChange:w=>R({..._,violation_action:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,children:[e.jsx("option",{value:"stop",children:"Full Stop"}),e.jsx("option",{value:"slow",children:"Slow / Degrade"}),e.jsx("option",{value:"alert",children:"Alert Only (log + notify)"}),e.jsx("option",{value:"revert",children:"Revert to Last Safe State"}),e.jsx("option",{value:"handoff",children:"Hand Off to Human Operator"})]})]}),e.jsxs("div",{children:[F("On Connection Loss *"),e.jsxs("select",{value:_.connection_loss_action,onChange:w=>R({..._,connection_loss_action:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A,children:[e.jsx("option",{value:"stop",children:"Full Stop"}),e.jsx("option",{value:"continue",children:"Continue (local enforcement)"}),e.jsx("option",{value:"degrade",children:"Degrade to Reduced Capability"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:n.textSecondary,fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:_.fail_closed,onChange:w=>R({..._,fail_closed:w.target.checked}),style:{accentColor:n.purpleBright}}),"Fail-Closed Mode (recommended)"]}),k("When enabled, the agent blocks ALL actions if it cannot verify boundaries.")]}),e.jsx("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:$("Emergency Contact")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[F("Name"),e.jsx("input",{type:"text",value:_.emergency_contact_name,onChange:w=>R({..._,emergency_contact_name:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]}),e.jsxs("div",{children:[F("Phone"),e.jsx("input",{type:"tel",value:_.emergency_contact_phone,onChange:w=>R({..._,emergency_contact_phone:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]}),e.jsxs("div",{children:[F("Email"),e.jsx("input",{type:"email",value:_.emergency_contact_email,onChange:w=>R({..._,emergency_contact_email:w.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:A})]})]}),e.jsxs("div",{children:[F("Escalation Triggers"),e.jsx("textarea",{value:_.escalation_triggers,onChange:w=>R({..._,escalation_triggers:w.target.value}),rows:2,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:A,placeholder:"Conditions requiring immediate human takeover (e.g., sensor failure, repeated violations)"})]}),e.jsxs("div",{children:[F("Existing Safety Systems"),e.jsx("textarea",{value:_.existing_safety_systems,onChange:w=>R({..._,existing_safety_systems:w.target.value}),rows:2,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:A,placeholder:"Other safety mechanisms in place (e.g., physical e-stop, LIDAR, safety PLC)"})]})]}),a===6&&e.jsxs("div",{className:"space-y-4",children:[$("Review Application"),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",lineHeight:"1.5"},children:"Review your application. After submission, our team will review your boundary definitions and configure the ENVELO agent for your system."}),e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Organization"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"14px"},children:c.organization_name})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Contact"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"14px"},children:c.contact_name||c.contact_email})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"System"}),e.jsx("br",{}),e.jsxs("span",{style:{color:n.textPrimary,fontSize:"14px"},children:[p.system_name," (",p.system_type,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Deployment"}),e.jsx("br",{}),e.jsxs("span",{style:{color:n.textPrimary,fontSize:"14px"},children:[p.deployment_type||"Not specified","  ",p.environment||"Not specified"]})]})]})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:n.purpleBright},children:"Boundary Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:n.purpleBright},children:h.filter(w=>w.name).length}),e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:"Numeric"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:n.purpleBright},children:j.filter(w=>w.name).length}),e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:"Geographic"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:n.purpleBright},children:C.filter(w=>w.name).length}),e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:"Time"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:n.purpleBright},children:I.filter(w=>w.name).length}),e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:"State"})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:n.purpleBright},children:"Safety Configuration"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"On Violation"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"13px"},children:_.violation_action})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"On Connection Loss"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"13px"},children:_.connection_loss_action})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Fail-Closed"}),e.jsx("br",{}),e.jsx("span",{style:{color:_.fail_closed?"#5CD685":n.accentRed,fontSize:"13px"},children:_.fail_closed?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Agent Method"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"13px"},children:p.integration_method})]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"24px",paddingTop:"16px",borderTop:`1px solid ${n.borderGlass}`},children:[a>1?e.jsx("button",{onClick:()=>o(a-1),style:{background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"10px 24px",color:n.textSecondary,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:"Back"}):e.jsx("div",{}),a<s?e.jsx("button",{onClick:()=>V()&&o(a+1),disabled:!V(),style:{background:V()?n.purplePrimary:"rgba(255,255,255,0.05)",border:`1px solid ${V()?n.purpleBright:n.borderGlass}`,borderRadius:"8px",padding:"10px 32px",color:V()?"#fff":n.textTertiary,cursor:V()?"pointer":"not-allowed",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:"Continue"}):e.jsx("button",{onClick:re,style:{background:"#5CD685",border:"1px solid #5CD685",borderRadius:"8px",padding:"10px 32px",color:"#1a1f2e",cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",fontWeight:"bold"},children:"Submit Application"})]})]})]})]})}const Z={bgPrimary:"#0d0d1a",bgSecondary:"#1a1a2e",bgTertiary:"#252540",textPrimary:"#e8e8f0",textSecondary:"#a0a0b0",textTertiary:"#6a6a80",purpleBright:"#8b5cf6",greenBright:"#10b981",redBright:"#ef4444",border:"#2a2a45"},Ce=({children:t,style:r={}})=>e.jsx("div",{style:{background:`linear-gradient(135deg, ${Z.bgSecondary} 0%, ${Z.bgTertiary} 100%)`,border:`1px solid ${Z.border}`,borderRadius:"12px",padding:"24px",...r},children:t}),ye=({children:t,onClick:r,variant:a="primary",disabled:o=!1,style:s={}})=>e.jsx("button",{onClick:r,disabled:o,style:{padding:"10px 20px",borderRadius:"8px",border:"none",cursor:o?"not-allowed":"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase",transition:"all 0.2s",opacity:o?.5:1,...a==="primary"?{background:Z.purpleBright,color:"white"}:a==="danger"?{background:Z.redBright,color:"white"}:{background:"transparent",border:`1px solid ${Z.border}`,color:Z.textSecondary},...s},children:t}),ie=({label:t,value:r,onChange:a,type:o="text",placeholder:s="",style:i={}})=>e.jsxs("div",{style:{marginBottom:"12px",...i},children:[t&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,marginBottom:"6px",fontFamily:"'IBM Plex Mono', monospace"},children:t}),e.jsx("input",{type:o,value:r,onChange:l=>a(o==="number"?parseFloat(l.target.value)||0:l.target.value),placeholder:s,style:{width:"100%",padding:"10px 12px",background:Z.bgPrimary,border:`1px solid ${Z.border}`,borderRadius:"6px",color:Z.textPrimary,fontSize:"14px",fontFamily:"'IBM Plex Mono', monospace"}})]}),vt=({label:t,value:r,onChange:a,options:o,style:s={}})=>e.jsxs("div",{style:{marginBottom:"12px",...s},children:[t&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,marginBottom:"6px",fontFamily:"'IBM Plex Mono', monospace"},children:t}),e.jsx("select",{value:r,onChange:i=>a(i.target.value),style:{width:"100%",padding:"10px 12px",background:Z.bgPrimary,border:`1px solid ${Z.border}`,borderRadius:"6px",color:Z.textPrimary,fontSize:"14px",fontFamily:"'IBM Plex Mono', monospace"},children:o.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]}),fi=({boundary:t,onChange:r,onRemove:a})=>e.jsxs(Ce,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:Z.purpleBright,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace"},children:"NUMERIC BOUNDARY"}),e.jsx(ye,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(ie,{label:"Name",value:t.name||"",onChange:o=>r({...t,name:o}),placeholder:"e.g., Speed Limit"}),e.jsx(ie,{label:"Parameter",value:t.parameter||"",onChange:o=>r({...t,parameter:o}),placeholder:"e.g., speed"}),e.jsx(ie,{label:"Min Value",type:"number",value:t.min_value??"",onChange:o=>r({...t,min_value:o||null}),placeholder:"Optional"}),e.jsx(ie,{label:"Max Value",type:"number",value:t.max_value??"",onChange:o=>r({...t,max_value:o||null}),placeholder:"Required"}),e.jsx(ie,{label:"Unit",value:t.unit||"",onChange:o=>r({...t,unit:o}),placeholder:"e.g., km/h, C"}),e.jsx(ie,{label:"Tolerance",type:"number",value:t.tolerance||0,onChange:o=>r({...t,tolerance:o}),placeholder:"0"})]}),e.jsx(vt,{label:"On Violation",value:t.violation_action||"block",onChange:o=>r({...t,violation_action:o}),options:[{value:"block",label:"Block Action"},{value:"warn",label:"Warn Only"},{value:"log",label:"Log Only"}],style:{marginTop:"12px",marginBottom:0}})]}),gi=({boundary:t,onChange:r,onRemove:a})=>{var o,s;return e.jsxs(Ce,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:Z.greenBright,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace"},children:"GEOGRAPHIC BOUNDARY"}),e.jsx(ye,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(ie,{label:"Name",value:t.name||"",onChange:i=>r({...t,name:i}),placeholder:"e.g., Warehouse Zone"}),e.jsx(vt,{label:"Boundary Type",value:t.boundary_type||"circle",onChange:i=>r({...t,boundary_type:i}),options:[{value:"circle",label:"Circle (Center + Radius)"},{value:"polygon",label:"Polygon (Multiple Points)"}]}),t.boundary_type==="circle"||!t.boundary_type?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[e.jsx(ie,{label:"Center Latitude",type:"number",value:((o=t.center)==null?void 0:o.lat)??"",onChange:i=>r({...t,center:{...t.center,lat:i}}),placeholder:"30.2672"}),e.jsx(ie,{label:"Center Longitude",type:"number",value:((s=t.center)==null?void 0:s.lon)??"",onChange:i=>r({...t,center:{...t.center,lon:i}}),placeholder:"-97.7431"}),e.jsx(ie,{label:"Radius (meters)",type:"number",value:t.radius_meters||"",onChange:i=>r({...t,radius_meters:i}),placeholder:"1000"})]}):e.jsx("div",{style:{color:Z.textSecondary,fontSize:"12px",padding:"12px",background:Z.bgPrimary,borderRadius:"6px"},children:"Polygon editor coming soon. For now, enter coordinates as JSON in the raw editor below."})]})},hi=({boundary:t,onChange:r,onRemove:a})=>e.jsxs(Ce,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#f59e0b",fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace"},children:"TIME BOUNDARY"}),e.jsx(ye,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(ie,{label:"Name",value:t.name||"",onChange:o=>r({...t,name:o}),placeholder:"e.g., Operating Hours"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(ie,{label:"Start Hour (0-23)",type:"number",value:t.allowed_hours_start??0,onChange:o=>r({...t,allowed_hours_start:Math.min(23,Math.max(0,o))})}),e.jsx(ie,{label:"End Hour (0-23)",type:"number",value:t.allowed_hours_end??23,onChange:o=>r({...t,allowed_hours_end:Math.min(23,Math.max(0,o))})})]}),e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,marginBottom:"8px",fontFamily:"'IBM Plex Mono', monospace"},children:"Allowed Days"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((o,s)=>{const i=t.allowed_days||[0,1,2,3,4,5,6],l=i.includes(s);return e.jsx("button",{onClick:()=>{const c=l?i.filter(d=>d!==s):[...i,s].sort();r({...t,allowed_days:c})},style:{padding:"6px 12px",borderRadius:"4px",border:`1px solid ${l?Z.purpleBright:Z.border}`,background:l?Z.purpleBright:"transparent",color:l?"white":Z.textSecondary,cursor:"pointer",fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace"},children:o},o)})})]})]}),yi=({boundary:t,onChange:r,onRemove:a})=>e.jsxs(Ce,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#ec4899",fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace"},children:"STATE BOUNDARY"}),e.jsx(ye,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(ie,{label:"Name",value:t.name||"",onChange:o=>r({...t,name:o}),placeholder:"e.g., Operation Mode"}),e.jsx(ie,{label:"Parameter",value:t.parameter||"",onChange:o=>r({...t,parameter:o}),placeholder:"e.g., mode"})]}),e.jsx(ie,{label:"Allowed Values (comma-separated)",value:(t.allowed_values||[]).join(", "),onChange:o=>r({...t,allowed_values:o.split(",").map(s=>s.trim()).filter(Boolean)}),placeholder:"e.g., idle, moving, charging"}),e.jsx(ie,{label:"Forbidden Values (comma-separated)",value:(t.forbidden_values||[]).join(", "),onChange:o=>r({...t,forbidden_values:o.split(",").map(s=>s.trim()).filter(Boolean)}),placeholder:"e.g., emergency, override",style:{marginBottom:0}})]});function bi({applicationId:t,initialBoundaries:r,onSave:a,api:o}){var S;const[s,i]=y.useState({numeric_boundaries:[],geo_boundaries:[],time_boundaries:[],state_boundaries:[],safe_state:{action:"stop",notify:!0,log:!0},fail_closed:!0,telemetry_interval:1,heartbeat_interval:60}),[l,c]=y.useState(!1),[d,p]=y.useState(!1),[m,g]=y.useState("");y.useEffect(()=>{r&&typeof r=="object"&&i(j=>({...j,...r}))},[r]),y.useEffect(()=>{g(JSON.stringify(s,null,2))},[s]);const v=j=>{const T=`${j}_boundaries`,C={numeric:{type:"numeric",name:"",parameter:"",max_value:null,unit:"",tolerance:0,violation_action:"block"},geo:{type:"geo",name:"",boundary_type:"circle",center:{lat:0,lon:0},radius_meters:1e3,violation_action:"block"},time:{type:"time",name:"",allowed_hours_start:6,allowed_hours_end:22,allowed_days:[0,1,2,3,4],violation_action:"block"},state:{type:"state",name:"",parameter:"",allowed_values:[],forbidden_values:[],violation_action:"block"}};i(N=>({...N,[T]:[...N[T],C[j]]}))},h=(j,T,C)=>{const N=`${j}_boundaries`;i(I=>({...I,[N]:I[N].map((z,_)=>_===T?C:z)}))},u=(j,T)=>{const C=`${j}_boundaries`;i(N=>({...N,[C]:N[C].filter((I,z)=>z!==T)}))},x=async()=>{c(!0);try{await a(s)}finally{c(!1)}},b=()=>{try{const j=JSON.parse(m);i(j),p(!1)}catch(j){alert("Invalid JSON: "+j.message)}},f=s.numeric_boundaries.length+s.geo_boundaries.length+s.time_boundaries.length+s.state_boundaries.length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:Z.purpleBright,margin:0},children:"Boundary Configuration"}),e.jsxs("p",{style:{color:Z.textSecondary,margin:"8px 0 0",fontSize:"14px"},children:[f," boundaries defined"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(ye,{variant:"secondary",onClick:()=>p(!d),children:d?"Visual Editor":"Raw JSON"}),e.jsx(ye,{onClick:x,disabled:l,children:l?"Saving...":"Save Boundaries"})]})]}),d?e.jsxs(Ce,{children:[e.jsx("textarea",{value:m,onChange:j=>g(j.target.value),style:{width:"100%",minHeight:"400px",padding:"16px",background:Z.bgPrimary,border:`1px solid ${Z.border}`,borderRadius:"6px",color:Z.textPrimary,fontSize:"13px",fontFamily:"'IBM Plex Mono', monospace",resize:"vertical"}}),e.jsx(ye,{onClick:b,style:{marginTop:"12px"},children:"Apply JSON"})]}):e.jsxs("div",{children:[e.jsxs(Ce,{style:{marginBottom:"24px"},children:[e.jsx("p",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,margin:"0 0 12px",fontFamily:"'IBM Plex Mono', monospace"},children:"Add Boundary"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx(ye,{variant:"secondary",onClick:()=>v("numeric"),children:"+ Numeric (Speed, Temp, etc.)"}),e.jsx(ye,{variant:"secondary",onClick:()=>v("geo"),children:"+ Geographic (Geofence)"}),e.jsx(ye,{variant:"secondary",onClick:()=>v("time"),children:"+ Time (Operating Hours)"}),e.jsx(ye,{variant:"secondary",onClick:()=>v("state"),children:"+ State (Allowed Modes)"})]})]}),s.numeric_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:Z.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Numeric Boundaries (",s.numeric_boundaries.length,")"]}),s.numeric_boundaries.map((j,T)=>e.jsx(fi,{boundary:j,onChange:C=>h("numeric",T,C),onRemove:()=>u("numeric",T)},T))]}),s.geo_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:Z.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Geographic Boundaries (",s.geo_boundaries.length,")"]}),s.geo_boundaries.map((j,T)=>e.jsx(gi,{boundary:j,onChange:C=>h("geo",T,C),onRemove:()=>u("geo",T)},T))]}),s.time_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:Z.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Time Boundaries (",s.time_boundaries.length,")"]}),s.time_boundaries.map((j,T)=>e.jsx(hi,{boundary:j,onChange:C=>h("time",T,C),onRemove:()=>u("time",T)},T))]}),s.state_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:Z.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["State Boundaries (",s.state_boundaries.length,")"]}),s.state_boundaries.map((j,T)=>e.jsx(yi,{boundary:j,onChange:C=>h("state",T,C),onRemove:()=>u("state",T)},T))]}),e.jsxs(Ce,{children:[e.jsx("h3",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,margin:"0 0 16px",fontFamily:"'IBM Plex Mono', monospace"},children:"Enforcement Settings"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsx(vt,{label:"On Violation",value:((S=s.safe_state)==null?void 0:S.action)||"stop",onChange:j=>i(T=>({...T,safe_state:{...T.safe_state,action:j}})),options:[{value:"stop",label:"Stop System"},{value:"reduce",label:"Reduce Operation"},{value:"handoff",label:"Human Handoff"}]}),e.jsx(vt,{label:"Fail Mode",value:s.fail_closed?"closed":"open",onChange:j=>i(T=>({...T,fail_closed:j==="closed"})),options:[{value:"closed",label:"Fail Closed (Block)"},{value:"open",label:"Fail Open (Allow)"}]}),e.jsx(ie,{label:"Telemetry Interval (sec)",type:"number",value:s.telemetry_interval||1,onChange:j=>i(T=>({...T,telemetry_interval:j}))})]})]}),f===0&&e.jsxs(Ce,{style:{textAlign:"center",padding:"48px"},children:[e.jsx("p",{style:{color:Z.textSecondary,fontSize:"16px",margin:0},children:"No boundaries defined yet."}),e.jsx("p",{style:{color:Z.textTertiary,fontSize:"14px",marginTop:"8px"},children:"Add boundaries above to define the system's Operational Design Domain."})]})]})]})}function ji(){var re;const{id:t}=na(),{user:r}=ce(),a=Rt(),[o,s]=y.useState(null),[i,l]=y.useState(!1),[c,d]=y.useState(null),[p,m]=y.useState([]),[g,v]=y.useState([]),[h,u]=y.useState(""),[x,b]=y.useState(!1),[f,S]=y.useState(!1),[j,T]=y.useState(null),[C,N]=y.useState(!1),I=async(E,V)=>{N(!0);try{const J=await O.get(`/api/applications/${t}/email-preview?new_state=${E}`);T({...J.data,label:V,newState:E})}catch{toast.show("Preview failed","error")}N(!1)},z=async()=>{var E,V;if(j)try{await O.patch(`/api/applications/${t}/state?new_state=${j.newState}`),T(null),await P(),toast.show(`State changed to ${j.newState}`,"success")}catch(J){toast.show("Failed: "+(((V=(E=J.response)==null?void 0:E.data)==null?void 0:V.detail)||J.message),"error")}};y.useEffect(()=>{t&&(O.get(`/api/applications/${t}`).then(E=>s(E.data)).catch(console.error),O.get(`/api/applications/${t}/history`).then(E=>m(E.data)).catch(console.error),O.get(`/api/applications/${t}/comments`).then(E=>v(E.data)).catch(console.error))},[t]);const _=async()=>{var E,V;if(await a({title:"Schedule Test",message:"Schedule a CAT-72 test for this application? The test will need to be started manually."})){l(!0);try{const J=await O.post("/api/cat72/tests",{application_id:parseInt(t)});d(J.data),toast.show(`CAT-72 Test created: ${J.data.test_id}  Go to CAT-72 Console to start.`,"success")}catch(J){toast.show("Failed to create test: "+(((V=(E=J.response)==null?void 0:E.data)==null?void 0:V.detail)||J.message),"error")}l(!1)}},R=at(),L=async()=>{var E,V;if(await a({title:"Delete Application",message:"Are you sure? This cannot be undone.",danger:!0,confirmLabel:"Delete"}))try{await O.delete(`/api/applications/${t}`),toast.show("Application deleted","success"),R("/applications")}catch(J){toast.show("Failed to delete: "+(((V=(E=J.response)==null?void 0:E.data)==null?void 0:V.detail)||J.message),"error")}},B=()=>I("approved","Approve Application"),P=async()=>{try{const E=await O.get(`/api/applications/${t}`);s(E.data),O.get(`/api/applications/${t}/history`).then(V=>m(V.data)).catch(console.error)}catch(E){console.error("Failed to refresh:",E)}},A=async()=>{var E,V;if(h.trim()){S(!0);try{const J=await O.post(`/api/applications/${t}/comments`,{content:h,is_internal:x});v(w=>[J.data,...w]),u(""),b(!1),toast.show("Comment added","success")}catch(J){toast.show("Failed to post comment: "+(((V=(E=J.response)==null?void 0:E.data)==null?void 0:V.detail)||J.message),"error")}S(!1)}},$=async E=>{var V,J;try{await O.delete(`/api/applications/${t}/comments/${E}`),v(w=>w.filter(U=>U.id!==E)),toast.show("Comment deleted","success")}catch(w){toast.show("Failed to delete comment: "+(((J=(V=w.response)==null?void 0:V.data)==null?void 0:J.detail)||w.message),"error")}},F=()=>I("under_review","Begin Review"),k=()=>I("suspended","Suspend Application"),W=async()=>{var E,V;if(await a({title:"Reinstate",message:"Reinstate this application to pending? The applicant will need to go through review again."}))try{await O.patch(`/api/applications/${t}/state?new_state=pending`),await P()}catch(J){toast.show("Failed to reinstate: "+(((V=(E=J.response)==null?void 0:E.data)==null?void 0:V.detail)||J.message),"error")}},te=[{key:"pending",label:"Submitted",icon:"1"},{key:"under_review",label:"Under Review",icon:"2"},{key:"approved",label:"Approved",icon:"3"},{key:"testing",label:"CAT-72 Testing",icon:"4"},{key:"conformant",label:"Conformant",icon:""}],X=te.findIndex(E=>E.key===(o==null?void 0:o.state)),G=(o==null?void 0:o.state)==="revoked"||(o==null?void 0:o.state)==="suspended",Q=()=>{switch(o==null?void 0:o.state){case"pending":return"Your application is queued for review by the Sentinel Authority team.";case"under_review":return"Our team is evaluating your ODD specification and boundary definitions.";case"approved":return"Your system is approved. The ENVELO agent is being configured for CAT-72 testing.";case"testing":return"CAT-72 continuous conformance test is in progress (72-hour minimum).";case"conformant":return"Your system has achieved ODDC Conformance. Your certificate and ENVELO agent credentials are active.";case"revoked":return"This application has been suspended. Contact info@sentinelauthority.org for remediation steps.";default:return""}};return o?e.jsxs("div",{className:"space-y-6",children:[j&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)"},children:e.jsxs("div",{style:{background:n.bgCard,border:"1px solid "+n.borderGlass,borderRadius:"16px",maxWidth:"650px",width:"90%",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid "+n.borderGlass,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright},children:"Email Preview"}),e.jsxs("p",{style:{margin:"4px 0 0",fontSize:"12px",color:n.textTertiary},children:["This email will be sent to ",e.jsx("strong",{style:{color:n.textPrimary},children:j.to})]})]}),e.jsx("button",{onClick:()=>T(null),style:{background:"none",border:"none",color:n.textTertiary,cursor:"pointer",fontSize:"20px",padding:"4px 8px"},children:"X"})]}),e.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid "+n.borderGlass,background:"rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:"11px",color:n.textTertiary,marginBottom:"2px"},children:"Subject"}),e.jsx("div",{style:{fontSize:"14px",color:n.textPrimary,fontWeight:500},children:j.subject})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px 24px"},children:e.jsx("div",{style:{background:"#fff",borderRadius:"8px",overflow:"hidden"},dangerouslySetInnerHTML:{__html:j.html}})}),e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid "+n.borderGlass,display:"flex",justifyContent:"flex-end",gap:"10px"},children:[e.jsx("button",{onClick:()=>T(null),style:{padding:"8px 20px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid "+n.borderGlass,color:n.textSecondary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:z,className:"sexy-btn",style:{padding:"8px 20px",borderRadius:"8px",background:j.newState==="suspended"?"rgba(214,92,92,0.2)":n.purplePrimary,border:"1px solid "+(j.newState==="suspended"?"rgba(214,92,92,0.4)":n.purpleBright),color:j.newState==="suspended"?"#D65C5C":"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:[j.label," + Send Email"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{to:"/applications",className:"flex items-center gap-2 no-underline",style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(ar,{className:"w-4 h-4"}),"Back to Applications"]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.state==="pending"&&e.jsx("button",{onClick:F,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.4)",color:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Begin Review"}),(o.state==="pending"||o.state==="under_review")&&e.jsx("button",{onClick:B,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.4)",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Approve Application"}),o.state==="approved"&&e.jsx("button",{onClick:_,disabled:i,className:"px-4 py-2 rounded-lg transition-all",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:i?"wait":"pointer",opacity:i?.7:1},children:i?"Scheduling...":"Schedule CAT-72 Test"}),["pending","under_review","approved","testing","conformant"].includes(o.state)&&e.jsx("button",{onClick:k,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Suspend"}),(o.state==="suspended"||o.state==="revoked")&&e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.4)",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Reinstate"}),o.state==="expired"&&e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(157,140,207,0.15)",border:`1px solid ${n.purpleBright}`,color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Re-open"}),e.jsx("button",{onClick:L,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Delete"})]})]}),e.jsx(Y,{children:e.jsxs("div",{style:{padding:"8px 0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:te.map((E,V)=>{const J=E.key===o.state,w=X>V;return e.jsxs(ge.Fragment,{children:[V>0&&e.jsx("div",{style:{flex:1,height:"2px",background:w?n.accentGreen:n.borderGlass,margin:"0 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minWidth:"80px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:"bold",background:w?"rgba(92,214,133,0.2)":J?"rgba(157,140,207,0.25)":"rgba(255,255,255,0.03)",border:`2px solid ${w?n.accentGreen:J?n.purpleBright:n.borderGlass}`,color:w?n.accentGreen:J?n.purpleBright:n.textTertiary},children:w?"":E.icon}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"0.5px",textTransform:"uppercase",color:J?n.purpleBright:w?n.accentGreen:n.textTertiary,textAlign:"center"},children:E.label})]})]},E.key)})}),G&&e.jsx("div",{style:{padding:"12px 16px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",borderRadius:"8px",marginBottom:"12px"},children:e.jsx("span",{style:{color:n.accentRed,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px"},children:" SUSPENDED  This application has been suspended pending review."})}),e.jsx("div",{style:{padding:"12px 16px",background:"rgba(157,140,207,0.08)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px"},children:e.jsx("span",{style:{color:n.textSecondary,fontSize:"13px",lineHeight:"1.5"},children:Q()})})]})}),c&&e.jsx("div",{className:"p-4 rounded-lg",style:{background:"rgba(92,214,133,0.1)",border:"1px solid rgba(157,140,207,0.3)"},children:e.jsxs("p",{style:{color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"},children:["Test Created: ",c.test_id,"  ",e.jsx(ee,{to:"/cat72",style:{color:n.purpleBright},children:"Go to CAT-72 Console"})]})}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:["Application ",o.application_number]}),e.jsx("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:o.system_name}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:o.system_description})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Organization"}),e.jsx("p",{style:{color:n.textPrimary,fontSize:"18px",marginBottom:"8px"},children:o.organization_name}),e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"4px"},children:[e.jsx("strong",{children:"Contact:"})," ",o.contact_name]}),e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"4px"},children:[e.jsx("strong",{children:"Email:"})," ",o.contact_email]}),o.contact_phone&&e.jsxs("p",{style:{color:n.textSecondary},children:[e.jsx("strong",{children:"Phone:"})," ",o.contact_phone]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Status"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"px-3 py-1 rounded",style:{background:o.state==="conformant"?"rgba(92,214,133,0.15)":o.state==="revoked"?"rgba(214,92,92,0.15)":"rgba(214,160,92,0.15)",color:o.state==="conformant"?n.accentGreen:o.state==="revoked"?n.accentRed:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase"},children:o.state}),(r==null?void 0:r.role)==="admin"&&e.jsxs("select",{value:o.state,onChange:async E=>{var J,w;const V=E.target.value;if(await a({title:"Change Status",message:`Change status to ${V.toUpperCase()}?`}))try{await O.patch(`/api/applications/${t}/state?new_state=${V}`),s({...o,state:V})}catch(U){toast.show("Failed to update state: "+(((w=(J=U.response)==null?void 0:J.data)==null?void 0:w.detail)||U.message),"error")}},className:"px-3 py-2 rounded-lg",style:{background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px"},children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved (Agent Access)"}),e.jsx("option",{value:"testing",children:"Testing (CAT-72 Active)"}),e.jsx("option",{value:"conformant",children:"Conformant"}),e.jsx("option",{value:"revoked",children:"Revoked"})]})]}),e.jsxs("p",{style:{color:n.textSecondary},children:[e.jsx("strong",{children:"Submitted:"})," ",o.submitted_at?new Date(o.submitted_at).toLocaleString():"N/A"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"System Details"}),e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:[e.jsx("strong",{children:"Version:"})," ",o.system_version||"N/A"]}),e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:[e.jsx("strong",{children:"Manufacturer:"})," ",o.manufacturer||"N/A"]}),o.facility_location&&e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:[e.jsx("strong",{children:"Facility:"})," ",o.facility_location]}),o.preferred_test_date&&e.jsxs("p",{style:{color:n.textSecondary},children:[e.jsx("strong",{children:"Preferred Test Date:"})," ",new Date(o.preferred_test_date).toLocaleDateString()]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Safety Boundaries & Operational Limits"}),e.jsx("p",{style:{color:n.textSecondary,lineHeight:1.7,whiteSpace:"pre-wrap"},children:typeof o.envelope_definition=="object"?JSON.stringify(o.envelope_definition,null,2):o.envelope_definition||"Not specified"})]})]}),(r==null?void 0:r.role)==="admin"&&e.jsx(bi,{applicationId:o.id,initialBoundaries:o.envelope_definition||{},onSave:async E=>{try{await O.patch(`/api/applicants/${o.id}`,{envelope_definition:E}),toast.show("Boundaries saved","success"),s({...o,envelope_definition:E})}catch(V){toast.show("Failed to save: "+V.message,"error")}}}),p.length>0&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"20px"},children:"State Change History"}),e.jsxs("div",{style:{position:"relative",paddingLeft:"28px"},children:[e.jsx("div",{style:{position:"absolute",left:"8px",top:"4px",bottom:"4px",width:"2px",background:n.borderGlass}}),p.map((E,V)=>{var H,de,ze,ne,ve;const w={submitted:n.purpleBright,state_changed:(()=>{var Dt;const we=(Dt=E.details)==null?void 0:Dt.new_state;return we==="conformant"?n.accentGreen:we==="suspended"||we==="revoked"?"#D65C5C":we==="approved"?n.accentGreen:we==="under_review"||we==="testing"?n.purpleBright:"#D6A05C"})(),certificate_issued:n.accentGreen}[E.action]||n.textTertiary,U=((de=(H=E.details)==null?void 0:H.new_state)==null?void 0:de.replace("_"," "))||((ze=E.action)==null?void 0:ze.replace("_"," ")),D=(ve=(ne=E.details)==null?void 0:ne.old_state)==null?void 0:ve.replace("_"," "),q=E.timestamp?new Date(E.timestamp):null;return e.jsxs("div",{style:{position:"relative",paddingBottom:V<p.length-1?"20px":"0",marginBottom:(V<p.length-1,"0")},children:[e.jsx("div",{style:{position:"absolute",left:"-24px",top:"2px",width:"12px",height:"12px",borderRadius:"50%",background:`${w}30`,border:`2px solid ${w}`}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:500,color:w,textTransform:"uppercase",letterSpacing:"0.5px"},children:U}),D&&E.action!=="submitted"&&e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginLeft:"8px"},children:["from ",D]}),e.jsx("div",{style:{marginTop:"4px"},children:e.jsx("span",{style:{fontSize:"12px",color:n.textTertiary},children:E.user_email})})]}),e.jsx("div",{style:{textAlign:"right",flexShrink:0},children:q&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:q.toLocaleDateString()}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:q.toLocaleTimeString()})]})})]})]},V)})]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"ODD Specification"}),e.jsx("p",{style:{color:n.textSecondary,lineHeight:1.7,whiteSpace:"pre-wrap"},children:typeof o.odd_specification=="object"?((re=o.odd_specification)==null?void 0:re.description)||JSON.stringify(o.odd_specification,null,2):o.odd_specification})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Comments & Notes"}),e.jsxs("div",{style:{marginBottom:g.length>0?"20px":"0"},children:[e.jsx("textarea",{value:h,onChange:E=>u(E.target.value),rows:3,placeholder:"Add a comment or note...",className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px",fontFamily:"inherit",transition:"border-color 0.2s"},onFocus:E=>E.target.style.borderColor=n.purpleBright,onBlur:E=>E.target.style.borderColor=n.borderGlass}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(r==null?void 0:r.role)==="admin"&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:E=>b(E.target.checked),style:{accentColor:n.purpleBright}}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,letterSpacing:"0.5px",textTransform:"uppercase"},children:"Internal only"})]})}),e.jsx("button",{onClick:A,disabled:f||!h.trim(),className:"px-4 py-2 rounded-lg",style:{background:h.trim()?n.purplePrimary:"rgba(255,255,255,0.05)",border:`1px solid ${h.trim()?n.purpleBright:n.borderGlass}`,color:h.trim()?"#fff":n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:h.trim()?"pointer":"default",opacity:f?.6:1},children:f?"Posting...":"Post Comment"})]})]}),g.length>0&&e.jsx("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:g.map(E=>e.jsxs("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:E.user_role==="admin"?n.purpleBright:n.textSecondary,fontWeight:500},children:E.user_email}),E.user_role==="admin"&&e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",padding:"2px 6px",borderRadius:"4px",background:"rgba(157,140,207,0.15)",color:n.purpleBright,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Admin"}),E.is_internal&&e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",padding:"2px 6px",borderRadius:"4px",background:"rgba(214,160,92,0.15)",color:n.accentAmber,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Internal"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:E.created_at?new Date(E.created_at).toLocaleString():""}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.email)===E.user_email)&&e.jsx("button",{onClick:()=>$(E.id),style:{background:"none",border:"none",color:n.textTertiary,cursor:"pointer",fontSize:"12px",padding:"0",opacity:.5},title:"Delete comment",children:""})]})]}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",lineHeight:1.6,margin:0,whiteSpace:"pre-wrap"},children:E.content})]},E.id))}),g.length===0&&!h&&e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",fontStyle:"italic",margin:0},children:"No comments yet"})]}),o.notes&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Applicant Notes"}),e.jsx("p",{style:{color:n.textSecondary,lineHeight:1.7,whiteSpace:"pre-wrap"},children:o.notes})]})]}):e.jsx("div",{style:{color:n.textTertiary},children:"Loading..."})}function Si(){const[t,r]=y.useState([]),a=zt(),[o,s]=y.useState({}),[i,l]=y.useState(Date.now()),c=()=>{O.get("/api/cat72/tests").then(x=>r(x.data)).catch(console.error)};y.useEffect(()=>{c();const x=setInterval(c,15e3),b=setInterval(()=>l(Date.now()),1e3);return()=>{clearInterval(x),clearInterval(b)}},[]);const d=async x=>{var b,f;if(await confirm({title:"Start Test",message:"Start this CAT-72 test? The 72-hour timer will begin."})){s(S=>({...S,[x]:"starting"}));try{await O.post(`/api/cat72/tests/${x}/start`),c()}catch(S){a.show("Failed to start test: "+(((f=(b=S.response)==null?void 0:b.data)==null?void 0:f.detail)||S.message),"error")}s(S=>({...S,[x]:null}))}},p=async x=>{var b,f;if(await confirm({title:"Stop Test",message:"Stop this CAT-72 test and evaluate results?"})){s(S=>({...S,[x]:"stopping"}));try{await O.post(`/api/cat72/tests/${x}/stop`),c()}catch(S){a.show("Failed to stop test: "+(((f=(b=S.response)==null?void 0:b.data)==null?void 0:f.detail)||S.message),"error")}s(S=>({...S,[x]:null}))}},m=async x=>{var b,f;if(await confirm({title:"Issue Certificate",message:"Issue ODDC certificate for this passed test?"})){s(S=>({...S,[x]:"issuing"}));try{const S=await O.post(`/api/certificates/issue/${x}`);a.show(`Certificate issued: ${S.data.certificate_number}`,"success"),c()}catch(S){a.show("Failed to issue certificate: "+(((f=(b=S.response)==null?void 0:b.data)==null?void 0:f.detail)||S.message),"error")}s(S=>({...S,[x]:null}))}},g=x=>{const b=Math.floor(x/3600),f=Math.floor(x%3600/60),S=Math.floor(x%60);return`${String(b).padStart(2,"0")}:${String(f).padStart(2,"0")}:${String(S).padStart(2,"0")}`},v=t.filter(x=>x.state==="running"),h=t.filter(x=>x.state==="scheduled"),u=t.filter(x=>x.state==="completed");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Testing"}),e.jsx("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:"CAT-72 Console"}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:"72-hour Convergence Authorization Tests  Auto-refreshes every 15s"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:n.serif,fontSize:"24px",fontWeight:200,color:n.accentAmber},children:v.length}),e.jsx("div",{style:{fontFamily:n.mono,fontSize:"9px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginTop:"4px"},children:"Running"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:n.serif,fontSize:"24px",fontWeight:200,color:n.purpleBright},children:h.length}),e.jsx("div",{style:{fontFamily:n.mono,fontSize:"9px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginTop:"4px"},children:"Scheduled"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:n.serif,fontSize:"24px",fontWeight:200,color:n.accentGreen},children:u.filter(x=>x.result==="PASS").length}),e.jsx("div",{style:{fontFamily:n.mono,fontSize:"9px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginTop:"4px"},children:"Passed"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:n.serif,fontSize:"24px",fontWeight:200,color:n.accentRed},children:u.filter(x=>x.result==="FAIL").length}),e.jsx("div",{style:{fontFamily:n.mono,fontSize:"9px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginTop:"4px"},children:"Failed"})]})]}),v.length>0&&e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.accentAmber,marginBottom:"12px"},children:" Live Tests"}),e.jsx("div",{className:"space-y-4",children:v.map(x=>{const b=x.duration_hours*3600,f=Math.min(100,Math.round(x.elapsed_seconds/b*100)),S=Math.max(0,b-x.elapsed_seconds);return e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,fontSize:"16px",color:n.textPrimary,marginBottom:"4px"},children:[x.organization_name,"  ",x.system_name]}),e.jsxs("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:["Test ID: ",x.test_id,"  Duration: ",x.duration_hours,"h"]})]}),e.jsx("button",{onClick:()=>p(x.test_id),disabled:o[x.test_id],className:"px-4 py-2 rounded-lg",style:{background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",color:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:o[x.test_id]==="stopping"?"...":"Stop & Evaluate"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"8px"},children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"28px",fontWeight:200,color:n.purpleBright,letterSpacing:"2px"},children:g(x.elapsed_seconds)}),e.jsx("div",{style:{flex:1},children:e.jsx("div",{className:"w-full h-3 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.08)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${f}%`,background:f>=100?n.accentGreen:`linear-gradient(90deg, ${n.purplePrimary}, ${n.purpleBright})`}})})}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"14px",color:f>=100?n.accentGreen:n.textSecondary,fontWeight:500},children:[f,"%"]})]}),e.jsxs("div",{style:{display:"flex",gap:"24px"},children:[e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:["Remaining: ",g(S)]}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:["Telemetry: ",x.telemetry_count||0," events"]}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:x.violations_count>0?n.accentRed:n.textTertiary},children:["Violations: ",x.violations_count||0]})]})]},x.id)})})]}),h.length>0&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Scheduled"}),e.jsx("div",{className:"space-y-3",children:h.map(x=>e.jsxs("div",{style:{padding:"14px 16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,color:n.textPrimary,marginBottom:"2px"},children:[x.organization_name,"  ",x.system_name]}),e.jsxs("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[x.test_id,"  ",x.duration_hours,"h test"]})]}),e.jsx("button",{onClick:()=>d(x.test_id),disabled:o[x.test_id],className:"px-4 py-2 rounded-lg",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:o[x.test_id]==="starting"?"...":"Start Test"})]},x.id))})]}),u.length>0&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Completed"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Result"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:u.map(x=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{style:{fontWeight:500,color:n.textPrimary},children:[x.organization_name,"  ",x.system_name]}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:x.test_id})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:600,color:x.result==="PASS"?n.accentGreen:n.accentRed,padding:"4px 10px",borderRadius:"4px",background:x.result==="PASS"?"rgba(92,214,133,0.15)":"rgba(214,92,92,0.15)"},children:x.result})}),e.jsx("td",{className:"px-4 py-4",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.textSecondary},children:g(x.elapsed_seconds)}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[x.result==="PASS"&&!x.certificate_issued&&e.jsx("button",{onClick:()=>m(x.test_id),disabled:o[x.test_id],className:"px-3 py-1 rounded",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:o[x.test_id]==="issuing"?"...":"Issue Certificate"}),x.certificate_issued&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px"},children:" Certified"}),e.jsx("a",{href:`${Ue}/api/certificates/${x.certificate_number||x.test_id}/pdf`,target:"_blank",style:{marginLeft:"8px",padding:"2px 8px",background:n.purplePrimary,borderRadius:"4px",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",textDecoration:"none"},children:"PDF"})]})]})})]},x.id))})]})]}),t.length===0&&e.jsx(Y,{children:e.jsxs("div",{className:"text-center py-12",style:{color:n.textTertiary},children:[e.jsx("p",{style:{marginBottom:"8px"},children:"No tests yet"}),e.jsx("p",{style:{fontSize:"13px"},children:"Approve an application and schedule a CAT-72 test to get started."})]})})]})}function vi(){const[t,r]=y.useState([]),[a,o]=y.useState("active");y.useEffect(()=>{O.get("/api/certificates/").then(c=>r(c.data)).catch(console.error)},[]);const s=t.filter(c=>a==="all"?!0:a==="active"?c.state==="conformant"||c.state==="active"||c.state==="issued":c.state===a),i={all:t.length,active:t.filter(c=>c.state==="conformant"||c.state==="active"||c.state==="issued").length,suspended:t.filter(c=>c.state==="suspended").length,revoked:t.filter(c=>c.state==="revoked").length},l=[{key:"active",label:"Active"},{key:"suspended",label:"Suspended"},{key:"revoked",label:"Revoked"},{key:"all",label:"All Records"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Records"}),e.jsx("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:"Certificates"}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:"Issued ODDC conformance determinations"})]}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"rgba(255,255,255,0.03)",borderRadius:"8px",padding:"4px",border:`1px solid ${n.borderGlass}`},children:l.map(c=>e.jsxs("button",{onClick:()=>o(c.key),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase",transition:"all 0.2s",background:a===c.key?n.purplePrimary:"transparent",color:a===c.key?"#fff":n.textTertiary},children:[c.label," ",i[c.key]>0?`(${i[c.key]})`:""]},c.key))}),e.jsxs(Y,{children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Certificate #"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Expires"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:s.map(c=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("td",{className:"px-4 py-4",style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:c.certificate_number}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textPrimary},children:c.system_name}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textSecondary},children:c.organization_name}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1 rounded",style:{background:c.state==="conformant"?"rgba(92,214,133,0.15)":c.state==="suspended"?"rgba(214,160,92,0.15)":"rgba(214,92,92,0.15)",color:c.state==="conformant"?n.accentGreen:c.state==="suspended"?n.accentAmber:n.accentRed,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:c.state})}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textTertiary,fontSize:"14px"},children:c.expires_at?new Date(c.expires_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[c.state!=="revoked"&&c.state!=="suspended"?e.jsx("a",{href:`${Ue}/api/certificates/${c.certificate_number}/pdf`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 rounded transition-colors no-underline",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Download PDF"}):e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,letterSpacing:"1px",textTransform:"uppercase"},children:c.state==="revoked"?"Revoked":"Suspended"}),e.jsx(ee,{to:`/verify?cert=${c.certificate_number}`,className:"px-2 py-1 rounded no-underline",style:{background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textSecondary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"0.5px",textTransform:"uppercase"},children:"Verify"})]})})]},c.id))})]}),s.length===0&&e.jsx("div",{className:"text-center py-12",style:{color:n.textTertiary},children:t.length===0?"No certificates issued":`No ${a==="all"?"":a+" "}certificates`})]})]})}var pt={},wi=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Vr={},he={};let bn;const _i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];he.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17};he.getSymbolTotalCodewords=function(r){return _i[r]};he.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r};he.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');bn=r};he.isKanjiModeEnabled=function(){return typeof bn<"u"};he.toSJIS=function(r){return bn(r)};var At={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function r(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},t.from=function(o,s){if(t.isValid(o))return o;try{return r(o)}catch{return s}}})(At);function Hr(){this.buffer=[],this.length=0}Hr.prototype={get:function(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)===1},put:function(t,r){for(let a=0;a<r;a++)this.putBit((t>>>r-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}};var Ti=Hr;function xt(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}xt.prototype.set=function(t,r,a,o){const s=t*this.size+r;this.data[s]=a,o&&(this.reservedBit[s]=!0)};xt.prototype.get=function(t,r){return this.data[t*this.size+r]};xt.prototype.xor=function(t,r,a){this.data[t*this.size+r]^=a};xt.prototype.isReserved=function(t,r){return this.reservedBit[t*this.size+r]};var Ci=xt,qr={};(function(t){const r=he.getSymbolSize;t.getRowColCoords=function(o){if(o===1)return[];const s=Math.floor(o/7)+2,i=r(o),l=i===145?26:Math.ceil((i-13)/(2*s-2))*2,c=[i-7];for(let d=1;d<s-1;d++)c[d]=c[d-1]-l;return c.push(6),c.reverse()},t.getPositions=function(o){const s=[],i=t.getRowColCoords(o),l=i.length;for(let c=0;c<l;c++)for(let d=0;d<l;d++)c===0&&d===0||c===0&&d===l-1||c===l-1&&d===0||s.push([i[c],i[d]]);return s}})(qr);var Yr={};const Bi=he.getSymbolSize,Qn=7;Yr.getPositions=function(r){const a=Bi(r);return[[0,0],[a-Qn,0],[0,a-Qn]]};var Kr={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let l=0,c=0,d=0,p=null,m=null;for(let g=0;g<i;g++){c=d=0,p=m=null;for(let v=0;v<i;v++){let h=s.get(g,v);h===p?c++:(c>=5&&(l+=r.N1+(c-5)),p=h,c=1),h=s.get(v,g),h===m?d++:(d>=5&&(l+=r.N1+(d-5)),m=h,d=1)}c>=5&&(l+=r.N1+(c-5)),d>=5&&(l+=r.N1+(d-5))}return l},t.getPenaltyN2=function(s){const i=s.size;let l=0;for(let c=0;c<i-1;c++)for(let d=0;d<i-1;d++){const p=s.get(c,d)+s.get(c,d+1)+s.get(c+1,d)+s.get(c+1,d+1);(p===4||p===0)&&l++}return l*r.N2},t.getPenaltyN3=function(s){const i=s.size;let l=0,c=0,d=0;for(let p=0;p<i;p++){c=d=0;for(let m=0;m<i;m++)c=c<<1&2047|s.get(p,m),m>=10&&(c===1488||c===93)&&l++,d=d<<1&2047|s.get(m,p),m>=10&&(d===1488||d===93)&&l++}return l*r.N3},t.getPenaltyN4=function(s){let i=0;const l=s.data.length;for(let d=0;d<l;d++)i+=s.data[d];return Math.abs(Math.ceil(i*100/l/5)-10)*r.N4};function a(o,s,i){switch(o){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}t.applyMask=function(s,i){const l=i.size;for(let c=0;c<l;c++)for(let d=0;d<l;d++)i.isReserved(d,c)||i.xor(d,c,a(s,d,c))},t.getBestMask=function(s,i){const l=Object.keys(t.Patterns).length;let c=0,d=1/0;for(let p=0;p<l;p++){i(p),t.applyMask(p,s);const m=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(p,s),m<d&&(d=m,c=p)}return c}})(Kr);var Nt={};const Be=At,mt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ft=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Nt.getBlocksCount=function(r,a){switch(a){case Be.L:return mt[(r-1)*4+0];case Be.M:return mt[(r-1)*4+1];case Be.Q:return mt[(r-1)*4+2];case Be.H:return mt[(r-1)*4+3];default:return}};Nt.getTotalCodewordsCount=function(r,a){switch(a){case Be.L:return ft[(r-1)*4+0];case Be.M:return ft[(r-1)*4+1];case Be.Q:return ft[(r-1)*4+2];case Be.H:return ft[(r-1)*4+3];default:return}};var Jr={},Et={};const Xe=new Uint8Array(512),wt=new Uint8Array(256);(function(){let r=1;for(let a=0;a<255;a++)Xe[a]=r,wt[r]=a,r<<=1,r&256&&(r^=285);for(let a=255;a<512;a++)Xe[a]=Xe[a-255]})();Et.log=function(r){if(r<1)throw new Error("log("+r+")");return wt[r]};Et.exp=function(r){return Xe[r]};Et.mul=function(r,a){return r===0||a===0?0:Xe[wt[r]+wt[a]]};(function(t){const r=Et;t.mul=function(o,s){const i=new Uint8Array(o.length+s.length-1);for(let l=0;l<o.length;l++)for(let c=0;c<s.length;c++)i[l+c]^=r.mul(o[l],s[c]);return i},t.mod=function(o,s){let i=new Uint8Array(o);for(;i.length-s.length>=0;){const l=i[0];for(let d=0;d<s.length;d++)i[d]^=r.mul(s[d],l);let c=0;for(;c<i.length&&i[c]===0;)c++;i=i.slice(c)}return i},t.generateECPolynomial=function(o){let s=new Uint8Array([1]);for(let i=0;i<o;i++)s=t.mul(s,new Uint8Array([1,r.exp(i)]));return s}})(Jr);const Qr=Jr;function jn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}jn.prototype.initialize=function(r){this.degree=r,this.genPoly=Qr.generateECPolynomial(this.degree)};jn.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(r.length+this.degree);a.set(r);const o=Qr.mod(a,this.genPoly),s=this.degree-o.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(o,s),i}return o};var ki=jn,Xr={},Ie={},Sn={};Sn.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40};var Se={};const Zr="[0-9]+",Mi="[A-Z $%*+\\-./:]+";let ot="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ot=ot.replace(/u/g,"\\u");const Pi="(?:(?![A-Z0-9 $%*+\\-./:]|"+ot+`)(?:.|[\r
]))+`;Se.KANJI=new RegExp(ot,"g");Se.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Se.BYTE=new RegExp(Pi,"g");Se.NUMERIC=new RegExp(Zr,"g");Se.ALPHANUMERIC=new RegExp(Mi,"g");const Ii=new RegExp("^"+ot+"$"),zi=new RegExp("^"+Zr+"$"),Ri=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Se.testKanji=function(r){return Ii.test(r)};Se.testNumeric=function(r){return zi.test(r)};Se.testAlphanumeric=function(r){return Ri.test(r)};(function(t){const r=Sn,a=Se;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!r.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return a.testNumeric(i)?t.NUMERIC:a.testAlphanumeric(i)?t.ALPHANUMERIC:a.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function o(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,l){if(t.isValid(i))return i;try{return o(i)}catch{return l}}})(Ie);(function(t){const r=he,a=Nt,o=At,s=Ie,i=Sn,l=7973,c=r.getBCHDigit(l);function d(v,h,u){for(let x=1;x<=40;x++)if(h<=t.getCapacity(x,u,v))return x}function p(v,h){return s.getCharCountIndicator(v,h)+4}function m(v,h){let u=0;return v.forEach(function(x){const b=p(x.mode,h);u+=b+x.getBitsLength()}),u}function g(v,h){for(let u=1;u<=40;u++)if(m(v,u)<=t.getCapacity(u,h,s.MIXED))return u}t.from=function(h,u){return i.isValid(h)?parseInt(h,10):u},t.getCapacity=function(h,u,x){if(!i.isValid(h))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=s.BYTE);const b=r.getSymbolTotalCodewords(h),f=a.getTotalCodewordsCount(h,u),S=(b-f)*8;if(x===s.MIXED)return S;const j=S-p(x,h);switch(x){case s.NUMERIC:return Math.floor(j/10*3);case s.ALPHANUMERIC:return Math.floor(j/11*2);case s.KANJI:return Math.floor(j/13);case s.BYTE:default:return Math.floor(j/8)}},t.getBestVersionForData=function(h,u){let x;const b=o.from(u,o.M);if(Array.isArray(h)){if(h.length>1)return g(h,b);if(h.length===0)return 1;x=h[0]}else x=h;return d(x.mode,x.getLength(),b)},t.getEncodedBits=function(h){if(!i.isValid(h)||h<7)throw new Error("Invalid QR Code version");let u=h<<12;for(;r.getBCHDigit(u)-c>=0;)u^=l<<r.getBCHDigit(u)-c;return h<<12|u}})(Xr);var eo={};const on=he,to=1335,Ai=21522,Xn=on.getBCHDigit(to);eo.getEncodedBits=function(r,a){const o=r.bit<<3|a;let s=o<<10;for(;on.getBCHDigit(s)-Xn>=0;)s^=to<<on.getBCHDigit(s)-Xn;return(o<<10|s)^Ai};var no={};const Ni=Ie;function $e(t){this.mode=Ni.NUMERIC,this.data=t.toString()}$e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)};$e.prototype.getLength=function(){return this.data.length};$e.prototype.getBitsLength=function(){return $e.getBitsLength(this.data.length)};$e.prototype.write=function(r){let a,o,s;for(a=0;a+3<=this.data.length;a+=3)o=this.data.substr(a,3),s=parseInt(o,10),r.put(s,10);const i=this.data.length-a;i>0&&(o=this.data.substr(a),s=parseInt(o,10),r.put(s,i*3+1))};var Ei=$e;const Fi=Ie,Gt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ge(t){this.mode=Fi.ALPHANUMERIC,this.data=t}Ge.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)};Ge.prototype.getLength=function(){return this.data.length};Ge.prototype.getBitsLength=function(){return Ge.getBitsLength(this.data.length)};Ge.prototype.write=function(r){let a;for(a=0;a+2<=this.data.length;a+=2){let o=Gt.indexOf(this.data[a])*45;o+=Gt.indexOf(this.data[a+1]),r.put(o,11)}this.data.length%2&&r.put(Gt.indexOf(this.data[a]),6)};var Di=Ge;const Oi=Ie;function We(t){this.mode=Oi.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}We.getBitsLength=function(r){return r*8};We.prototype.getLength=function(){return this.data.length};We.prototype.getBitsLength=function(){return We.getBitsLength(this.data.length)};We.prototype.write=function(t){for(let r=0,a=this.data.length;r<a;r++)t.put(this.data[r],8)};var Li=We;const Ui=Ie,$i=he;function Ve(t){this.mode=Ui.KANJI,this.data=t}Ve.getBitsLength=function(r){return r*13};Ve.prototype.getLength=function(){return this.data.length};Ve.prototype.getBitsLength=function(){return Ve.getBitsLength(this.data.length)};Ve.prototype.write=function(t){let r;for(r=0;r<this.data.length;r++){let a=$i.toSJIS(this.data[r]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),t.put(a,13)}};var Gi=Ve,ro={exports:{}};(function(t){var r={single_source_shortest_paths:function(a,o,s){var i={},l={};l[o]=0;var c=r.PriorityQueue.make();c.push(o,0);for(var d,p,m,g,v,h,u,x,b;!c.empty();){d=c.pop(),p=d.value,g=d.cost,v=a[p]||{};for(m in v)v.hasOwnProperty(m)&&(h=v[m],u=g+h,x=l[m],b=typeof l[m]>"u",(b||x>u)&&(l[m]=u,c.push(m,u),i[m]=p))}if(typeof s<"u"&&typeof l[s]>"u"){var f=["Could not find a path from ",o," to ",s,"."].join("");throw new Error(f)}return i},extract_shortest_path_from_predecessor_list:function(a,o){for(var s=[],i=o;i;)s.push(i),a[i],i=a[i];return s.reverse(),s},find_path:function(a,o,s){var i=r.single_source_shortest_paths(a,o,s);return r.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(a){var o=r.PriorityQueue,s={},i;a=a||{};for(i in o)o.hasOwnProperty(i)&&(s[i]=o[i]);return s.queue=[],s.sorter=a.sorter||o.default_sorter,s},default_sorter:function(a,o){return a.cost-o.cost},push:function(a,o){var s={value:a,cost:o};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=r})(ro);var Wi=ro.exports;(function(t){const r=Ie,a=Ei,o=Di,s=Li,i=Gi,l=Se,c=he,d=Wi;function p(f){return unescape(encodeURIComponent(f)).length}function m(f,S,j){const T=[];let C;for(;(C=f.exec(j))!==null;)T.push({data:C[0],index:C.index,mode:S,length:C[0].length});return T}function g(f){const S=m(l.NUMERIC,r.NUMERIC,f),j=m(l.ALPHANUMERIC,r.ALPHANUMERIC,f);let T,C;return c.isKanjiModeEnabled()?(T=m(l.BYTE,r.BYTE,f),C=m(l.KANJI,r.KANJI,f)):(T=m(l.BYTE_KANJI,r.BYTE,f),C=[]),S.concat(j,T,C).sort(function(I,z){return I.index-z.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function v(f,S){switch(S){case r.NUMERIC:return a.getBitsLength(f);case r.ALPHANUMERIC:return o.getBitsLength(f);case r.KANJI:return i.getBitsLength(f);case r.BYTE:return s.getBitsLength(f)}}function h(f){return f.reduce(function(S,j){const T=S.length-1>=0?S[S.length-1]:null;return T&&T.mode===j.mode?(S[S.length-1].data+=j.data,S):(S.push(j),S)},[])}function u(f){const S=[];for(let j=0;j<f.length;j++){const T=f[j];switch(T.mode){case r.NUMERIC:S.push([T,{data:T.data,mode:r.ALPHANUMERIC,length:T.length},{data:T.data,mode:r.BYTE,length:T.length}]);break;case r.ALPHANUMERIC:S.push([T,{data:T.data,mode:r.BYTE,length:T.length}]);break;case r.KANJI:S.push([T,{data:T.data,mode:r.BYTE,length:p(T.data)}]);break;case r.BYTE:S.push([{data:T.data,mode:r.BYTE,length:p(T.data)}])}}return S}function x(f,S){const j={},T={start:{}};let C=["start"];for(let N=0;N<f.length;N++){const I=f[N],z=[];for(let _=0;_<I.length;_++){const R=I[_],L=""+N+_;z.push(L),j[L]={node:R,lastCount:0},T[L]={};for(let B=0;B<C.length;B++){const P=C[B];j[P]&&j[P].node.mode===R.mode?(T[P][L]=v(j[P].lastCount+R.length,R.mode)-v(j[P].lastCount,R.mode),j[P].lastCount+=R.length):(j[P]&&(j[P].lastCount=R.length),T[P][L]=v(R.length,R.mode)+4+r.getCharCountIndicator(R.mode,S))}}C=z}for(let N=0;N<C.length;N++)T[C[N]].end=0;return{map:T,table:j}}function b(f,S){let j;const T=r.getBestModeForData(f);if(j=r.from(S,T),j!==r.BYTE&&j.bit<T.bit)throw new Error('"'+f+'" cannot be encoded with mode '+r.toString(j)+`.
 Suggested mode is: `+r.toString(T));switch(j===r.KANJI&&!c.isKanjiModeEnabled()&&(j=r.BYTE),j){case r.NUMERIC:return new a(f);case r.ALPHANUMERIC:return new o(f);case r.KANJI:return new i(f);case r.BYTE:return new s(f)}}t.fromArray=function(S){return S.reduce(function(j,T){return typeof T=="string"?j.push(b(T,null)):T.data&&j.push(b(T.data,T.mode)),j},[])},t.fromString=function(S,j){const T=g(S,c.isKanjiModeEnabled()),C=u(T),N=x(C,j),I=d.find_path(N.map,"start","end"),z=[];for(let _=1;_<I.length-1;_++)z.push(N.table[I[_]].node);return t.fromArray(h(z))},t.rawSplit=function(S){return t.fromArray(g(S,c.isKanjiModeEnabled()))}})(no);const Ft=he,Wt=At,Vi=Ti,Hi=Ci,qi=qr,Yi=Yr,an=Kr,sn=Nt,Ki=ki,_t=Xr,Ji=eo,Qi=Ie,Vt=no;function Xi(t,r){const a=t.size,o=Yi.getPositions(r);for(let s=0;s<o.length;s++){const i=o[s][0],l=o[s][1];for(let c=-1;c<=7;c++)if(!(i+c<=-1||a<=i+c))for(let d=-1;d<=7;d++)l+d<=-1||a<=l+d||(c>=0&&c<=6&&(d===0||d===6)||d>=0&&d<=6&&(c===0||c===6)||c>=2&&c<=4&&d>=2&&d<=4?t.set(i+c,l+d,!0,!0):t.set(i+c,l+d,!1,!0))}}function Zi(t){const r=t.size;for(let a=8;a<r-8;a++){const o=a%2===0;t.set(a,6,o,!0),t.set(6,a,o,!0)}}function el(t,r){const a=qi.getPositions(r);for(let o=0;o<a.length;o++){const s=a[o][0],i=a[o][1];for(let l=-2;l<=2;l++)for(let c=-2;c<=2;c++)l===-2||l===2||c===-2||c===2||l===0&&c===0?t.set(s+l,i+c,!0,!0):t.set(s+l,i+c,!1,!0)}}function tl(t,r){const a=t.size,o=_t.getEncodedBits(r);let s,i,l;for(let c=0;c<18;c++)s=Math.floor(c/3),i=c%3+a-8-3,l=(o>>c&1)===1,t.set(s,i,l,!0),t.set(i,s,l,!0)}function Ht(t,r,a){const o=t.size,s=Ji.getEncodedBits(r,a);let i,l;for(i=0;i<15;i++)l=(s>>i&1)===1,i<6?t.set(i,8,l,!0):i<8?t.set(i+1,8,l,!0):t.set(o-15+i,8,l,!0),i<8?t.set(8,o-i-1,l,!0):i<9?t.set(8,15-i-1+1,l,!0):t.set(8,15-i-1,l,!0);t.set(o-8,8,1,!0)}function nl(t,r){const a=t.size;let o=-1,s=a-1,i=7,l=0;for(let c=a-1;c>0;c-=2)for(c===6&&c--;;){for(let d=0;d<2;d++)if(!t.isReserved(s,c-d)){let p=!1;l<r.length&&(p=(r[l]>>>i&1)===1),t.set(s,c-d,p),i--,i===-1&&(l++,i=7)}if(s+=o,s<0||a<=s){s-=o,o=-o;break}}}function rl(t,r,a){const o=new Vi;a.forEach(function(d){o.put(d.mode.bit,4),o.put(d.getLength(),Qi.getCharCountIndicator(d.mode,t)),d.write(o)});const s=Ft.getSymbolTotalCodewords(t),i=sn.getTotalCodewordsCount(t,r),l=(s-i)*8;for(o.getLengthInBits()+4<=l&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const c=(l-o.getLengthInBits())/8;for(let d=0;d<c;d++)o.put(d%2?17:236,8);return ol(o,t,r)}function ol(t,r,a){const o=Ft.getSymbolTotalCodewords(r),s=sn.getTotalCodewordsCount(r,a),i=o-s,l=sn.getBlocksCount(r,a),c=o%l,d=l-c,p=Math.floor(o/l),m=Math.floor(i/l),g=m+1,v=p-m,h=new Ki(v);let u=0;const x=new Array(l),b=new Array(l);let f=0;const S=new Uint8Array(t.buffer);for(let I=0;I<l;I++){const z=I<d?m:g;x[I]=S.slice(u,u+z),b[I]=h.encode(x[I]),u+=z,f=Math.max(f,z)}const j=new Uint8Array(o);let T=0,C,N;for(C=0;C<f;C++)for(N=0;N<l;N++)C<x[N].length&&(j[T++]=x[N][C]);for(C=0;C<v;C++)for(N=0;N<l;N++)j[T++]=b[N][C];return j}function al(t,r,a,o){let s;if(Array.isArray(t))s=Vt.fromArray(t);else if(typeof t=="string"){let p=r;if(!p){const m=Vt.rawSplit(t);p=_t.getBestVersionForData(m,a)}s=Vt.fromString(t,p||40)}else throw new Error("Invalid data");const i=_t.getBestVersionForData(s,a);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!r)r=i;else if(r<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const l=rl(r,a,s),c=Ft.getSymbolSize(r),d=new Hi(c);return Xi(d,r),Zi(d),el(d,r),Ht(d,a,0),r>=7&&tl(d,r),nl(d,l),isNaN(o)&&(o=an.getBestMask(d,Ht.bind(null,d,a))),an.applyMask(o,d),Ht(d,a,o),{modules:d,version:r,errorCorrectionLevel:a,maskPattern:o,segments:s}}Vr.create=function(r,a){if(typeof r>"u"||r==="")throw new Error("No input text");let o=Wt.M,s,i;return typeof a<"u"&&(o=Wt.from(a.errorCorrectionLevel,Wt.M),s=_t.from(a.version),i=an.from(a.maskPattern),a.toSJISFunc&&Ft.setToSJISFunction(a.toSJISFunc)),al(r,s,o,i)};var oo={},vn={};(function(t){function r(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let o=a.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+a);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(i){return[i,i]}))),o.length===6&&o.push("F","F");const s=parseInt(o.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+o.slice(0,6).join("")}}t.getOptions=function(o){o||(o={}),o.color||(o.color={});const s=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,i=o.width&&o.width>=21?o.width:void 0,l=o.scale||4;return{width:i,scale:i?4:l,margin:s,color:{dark:r(o.color.dark||"#000000ff"),light:r(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},t.getScale=function(o,s){return s.width&&s.width>=o+s.margin*2?s.width/(o+s.margin*2):s.scale},t.getImageWidth=function(o,s){const i=t.getScale(o,s);return Math.floor((o+s.margin*2)*i)},t.qrToImageData=function(o,s,i){const l=s.modules.size,c=s.modules.data,d=t.getScale(l,i),p=Math.floor((l+i.margin*2)*d),m=i.margin*d,g=[i.color.light,i.color.dark];for(let v=0;v<p;v++)for(let h=0;h<p;h++){let u=(v*p+h)*4,x=i.color.light;if(v>=m&&h>=m&&v<p-m&&h<p-m){const b=Math.floor((v-m)/d),f=Math.floor((h-m)/d);x=g[c[b*l+f]?1:0]}o[u++]=x.r,o[u++]=x.g,o[u++]=x.b,o[u]=x.a}}})(vn);(function(t){const r=vn;function a(s,i,l){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,l,c){let d=c,p=l;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),l||(p=o()),d=r.getOptions(d);const m=r.getImageWidth(i.modules.size,d),g=p.getContext("2d"),v=g.createImageData(m,m);return r.qrToImageData(v.data,i,d),a(g,p,m),g.putImageData(v,0,0),p},t.renderToDataURL=function(i,l,c){let d=c;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),d||(d={});const p=t.render(i,l,d),m=d.type||"image/png",g=d.rendererOpts||{};return p.toDataURL(m,g.quality)}})(oo);var ao={};const sl=vn;function Zn(t,r){const a=t.a/255,o=r+'="'+t.hex+'"';return a<1?o+" "+r+'-opacity="'+a.toFixed(2).slice(1)+'"':o}function qt(t,r,a){let o=t+r;return typeof a<"u"&&(o+=" "+a),o}function il(t,r,a){let o="",s=0,i=!1,l=0;for(let c=0;c<t.length;c++){const d=Math.floor(c%r),p=Math.floor(c/r);!d&&!i&&(i=!0),t[c]?(l++,c>0&&d>0&&t[c-1]||(o+=i?qt("M",d+a,.5+p+a):qt("m",s,0),s=0,i=!1),d+1<r&&t[c+1]||(o+=qt("h",l),l=0)):s++}return o}ao.render=function(r,a,o){const s=sl.getOptions(a),i=r.modules.size,l=r.modules.data,c=i+s.margin*2,d=s.color.light.a?"<path "+Zn(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",p="<path "+Zn(s.color.dark,"stroke")+' d="'+il(l,i,s.margin)+'"/>',m='viewBox="0 0 '+c+" "+c+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+m+' shape-rendering="crispEdges">'+d+p+`</svg>
`;return typeof o=="function"&&o(null,v),v};const ll=wi,ln=Vr,so=oo,cl=ao;function wn(t,r,a,o,s){const i=[].slice.call(arguments,1),l=i.length,c=typeof i[l-1]=="function";if(!c&&!ll())throw new Error("Callback required as last argument");if(c){if(l<2)throw new Error("Too few arguments provided");l===2?(s=a,a=r,r=o=void 0):l===3&&(r.getContext&&typeof s>"u"?(s=o,o=void 0):(s=o,o=a,a=r,r=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(a=r,r=o=void 0):l===2&&!r.getContext&&(o=a,a=r,r=void 0),new Promise(function(d,p){try{const m=ln.create(a,o);d(t(m,r,o))}catch(m){p(m)}})}try{const d=ln.create(a,o);s(null,t(d,r,o))}catch(d){s(d)}}pt.create=ln.create;pt.toCanvas=wn.bind(null,so.render);pt.toDataURL=wn.bind(null,so.renderToDataURL);pt.toString=wn.bind(null,function(t,r,a){return cl.render(t,a)});function dl(){const[t,r]=y.useState("verify"),[a,o]=y.useState(""),[s,i]=y.useState([]),[l,c]=y.useState(null),[d,p]=y.useState("conformant"),[m,g]=y.useState(!1),[v,h]=y.useState(""),[u,x]=y.useState(null),[b,f]=y.useState(null),[S,j]=y.useState(!1),[T,C]=y.useState(""),[N,I]=y.useState(!1),[z,_]=y.useState(!1),[R,L]=y.useState(null),[B,P]=y.useState(!1),A=async G=>{try{const Q=`${window.location.origin}/verify?cert=${G}`,re=await pt.toDataURL(Q,{width:256,margin:2,color:{dark:"#5B4B8A",light:"#ffffff"},errorCorrectionLevel:"H"});L(re)}catch(Q){console.error("QR generation failed:",Q)}},$=()=>{if(!R)return;const G=document.createElement("a");G.href=R,G.download=`sentinel-${v}-qr.png`,document.body.appendChild(G),G.click(),document.body.removeChild(G)};y.useEffect(()=>{const Q=new URLSearchParams(window.location.search).get("cert");Q&&(h(Q.toUpperCase()),setTimeout(()=>{F(Q.toUpperCase())},300))},[]);const F=async G=>{const Q=G||v;if(Q.trim()){C(""),x(null),f(null),j(!1),I(!0);try{const re=await O.get(`/api/verify/${Q}`);x(re.data),A(Q);const E=new URL(window.location);E.searchParams.set("cert",Q),window.history.replaceState({},"",E)}catch{C("Certificate not found")}I(!1)}},k=async()=>{if(b){j(!S);return}try{const G=await O.get(`/api/verify/${v}/evidence`);f(G.data),j(!0)}catch{console.error("Evidence fetch failed")}},W=()=>{const G=`${window.location.origin}/verify?cert=${v}`;navigator.clipboard.writeText(G),_(!0),setTimeout(()=>_(!1),2e3)},te=async G=>{G.preventDefault(),await F()};ge.useEffect(()=>{t==="search"&&!m&&(O.get("/api/registry/stats").then(G=>c(G.data)).catch(console.error),O.get("/api/registry/search?status=conformant").then(G=>{i(G.data.results||[]),g(!0)}).catch(console.error))},[t]);const X=async G=>{if(G.preventDefault(),!!a.trim()){C(""),i([]),I(!0);try{const Q=new URLSearchParams;a.trim()&&Q.set("q",a.trim()),d&&Q.set("status",d);const re=await O.get(`/api/registry/search?${Q.toString()}`);i(re.data.results||[]),(!re.data.results||re.data.results.length===0)&&C("No certificates found for that search")}catch{C("Unable to connect to registry")}I(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",style:{background:n.bgDeep},children:[e.jsxs(ee,{to:"/dashboard",style:{position:"fixed",top:"24px",right:"32px",zIndex:20,color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase",textDecoration:"none",display:"flex",alignItems:"center",gap:"6px",transition:"color 0.2s"},children:[e.jsx(er,{className:"w-3.5 h-3.5"})," Dashboard"]}),e.jsx("div",{style:{position:"absolute",top:"-20%",left:"-10%",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(91,75,138,0.18) 0%, transparent 65%)",animation:"float1 25s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",bottom:"-30%",right:"-15%",width:"800px",height:"800px",background:"radial-gradient(circle, rgba(92,214,133,0.06) 0%, transparent 65%)",animation:"float2 30s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",top:"40%",right:"10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(157,140,207,0.10) 0%, transparent 65%)",animation:"float3 15s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",inset:0,backgroundImage:"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.2,pointerEvents:"none",maskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)"}}),e.jsx("div",{style:{position:"absolute",top:"15%",left:"8%",width:"1px",height:"150px",background:"linear-gradient(to bottom, transparent, rgba(157,140,207,0.4), transparent)"}}),e.jsx("div",{style:{position:"absolute",bottom:"20%",right:"5%",width:"100px",height:"1px",background:"linear-gradient(to right, transparent, rgba(92,214,133,0.4), transparent)"}}),e.jsx("style",{children:`
        @keyframes float1 { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -30px) scale(1.05); } 66% { transform: translate(-20px, 20px) scale(0.95); } }
        @keyframes float2 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-40px, -40px) scale(1.1); } }
        @keyframes float3 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(20px, 30px); } }
        @keyframes pulse-ring { 0% { transform: scale(0.9); opacity: 0.6; } 50% { transform: scale(1.1); opacity: 0; } 100% { transform: scale(0.9); opacity: 0.6; } }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        .verify-input { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .verify-input:focus { border-color: rgba(157,140,207,0.6) !important; box-shadow: 0 0 0 3px rgba(157,140,207,0.1), 0 4px 20px rgba(0,0,0,0.2); transform: translateY(-1px); }
        .verify-btn { position: relative; overflow: hidden; transition: all 0.3s ease; }
        .verify-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(91,75,138,0.5); }
        .verify-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
      `}),e.jsxs("div",{className:"w-full max-w-lg relative z-10",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsxs("div",{className:"relative flex justify-center mb-6",style:{height:"100px",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",width:"80px",height:"80px",border:"1px solid rgba(157,140,207,0.3)",borderRadius:"50%",animation:"pulse-ring 3s ease-out infinite"}}),e.jsx("div",{style:{position:"absolute",width:"100px",height:"100px",border:"1px solid rgba(157,140,207,0.15)",borderRadius:"50%",animation:"pulse-ring 3s ease-out infinite 0.5s"}}),e.jsx("div",{style:{width:"56px",height:"56px",background:"linear-gradient(135deg, #5B4B8A 0%, #8b5cf6 100%)",border:"2px solid #9d8ccf",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(157,140,207,0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},children:e.jsx("div",{style:{width:"18px",height:"18px",background:"radial-gradient(circle, #e8e0ff 0%, #c4b8e8 100%)",borderRadius:"50%",boxShadow:"0 0 20px rgba(196,184,232,0.5)"}})})]}),e.jsxs("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"36px",fontWeight:200,color:n.textPrimary,margin:"0 0 8px 0",letterSpacing:"-0.02em"},children:["Certificate ",e.jsx("span",{style:{color:n.purpleBright,fontStyle:"italic"},children:"Verification"})]}),e.jsx("p",{style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"3px",textTransform:"uppercase",marginTop:"16px"},children:"Sentinel Authority  ODDC Registry"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"24px"},children:[e.jsx("button",{onClick:()=>r("verify"),style:{padding:"10px 24px",borderRadius:"20px",border:"none",cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",background:t==="verify"?n.purplePrimary:"rgba(255,255,255,0.05)",color:t==="verify"?"#fff":n.textTertiary,transition:"all 0.2s"},children:"Verify Certificate"}),e.jsx("button",{onClick:()=>r("search"),style:{padding:"10px 24px",borderRadius:"20px",border:"none",cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",background:t==="search"?n.purplePrimary:"rgba(255,255,255,0.05)",color:t==="search"?"#fff":n.textTertiary,transition:"all 0.2s"},children:"Search Registry"})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"24px",padding:"40px",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.05) inset",transition:"all 0.3s ease",minHeight:"280px"},children:[t==="verify"&&e.jsxs("form",{onSubmit:te,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",textAlign:"center"},children:"Certificate Number"}),e.jsx("input",{type:"text",placeholder:"ODDC-2026-00001",value:v,onChange:G=>{h(G.target.value.toUpperCase()),C(""),x(null)},className:"verify-input w-full px-5 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"18px",textAlign:"center",letterSpacing:"2px"}})]}),e.jsx("button",{type:"submit",disabled:N||!v.trim(),className:"verify-btn w-full py-4 rounded-xl font-medium",style:{background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"1px solid rgba(157,140,207,0.5)",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"2px",textTransform:"uppercase",cursor:"pointer",boxShadow:"0 4px 20px rgba(91,75,138,0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:N?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4",style:{animation:"spin 1s linear infinite"}})," Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(et,{className:"w-4 h-4"})," Verify Certificate"]})})]}),t==="search"&&e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginBottom:"24px"},children:[{label:"Active Certs",value:l.active_certificates,color:n.accentGreen},{label:"Organizations",value:l.certified_organizations,color:n.purpleBright},{label:"Last 30 Days",value:l.issued_last_30_days,color:"#D6A05C"}].map(G=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"24px",fontWeight:600,color:G.color},children:G.value}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",color:n.textTertiary,letterSpacing:"1px",textTransform:"uppercase",marginTop:"2px"},children:G.label})]},G.label))}),e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",textAlign:"center"},children:"Organization or System Name"}),e.jsx("input",{type:"text",placeholder:"Company name or system...",value:a,onChange:G=>{o(G.target.value),C("")},className:"verify-input w-full px-5 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"18px",textAlign:"center",letterSpacing:"2px"}})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsxs("select",{value:d,onChange:G=>p(G.target.value),style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",padding:"8px 16px",borderRadius:"8px",outline:"none",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx("option",{value:"conformant",children:"Conformant"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"revoked",children:"Revoked"})]})}),e.jsx("button",{type:"submit",disabled:N,className:"verify-btn w-full py-4 rounded-xl font-medium",style:{background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"1px solid rgba(157,140,207,0.5)",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"2px",textTransform:"uppercase",cursor:"pointer",boxShadow:"0 4px 20px rgba(91,75,138,0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:N?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4",style:{animation:"spin 1s linear infinite"}})," Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(et,{className:"w-4 h-4"})," Search Registry"]})})]}),s.length>0&&e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsxs("p",{style:{color:n.textTertiary,fontSize:"12px",marginBottom:"12px",textAlign:"center"},children:[s.length," certificate(s) found"]}),s.map(G=>e.jsx("div",{onClick:()=>{h(G.certificate_number),r("verify"),setTimeout(()=>{var Q;return(Q=document.querySelector("form"))==null?void 0:Q.requestSubmit()},100)},style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",padding:"16px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:n.textPrimary,fontWeight:500},children:G.organization_name}),e.jsx("div",{style:{color:n.textTertiary,fontSize:"12px"},children:G.system_name})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px"},children:G.certificate_number}),e.jsx("div",{style:{color:n.accentGreen,fontSize:"10px",textTransform:"uppercase"},children:G.state})]})]})},G.certificate_number))]})]}),e.jsxs("div",{style:{minHeight:"80px",marginTop:"16px"},children:[T&&e.jsxs("div",{className:"p-5 rounded-xl text-center",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx(Ne,{className:"w-5 h-5",style:{color:n.accentRed}}),e.jsx("span",{style:{color:n.accentRed,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:"Not Found"})]}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"14px"},children:T})]}),u&&(u.status==="NOT_FOUND"||u.state==="NOT_FOUND")&&e.jsxs("div",{className:"mt-6 p-5 rounded-xl text-center",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx(Ne,{className:"w-5 h-5",style:{color:n.accentRed}}),e.jsx("span",{style:{color:n.accentRed,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:"Certificate Not Found"})]}),e.jsxs("p",{style:{color:n.textSecondary,fontSize:"14px"},children:["No certificate exists with number: ",e.jsx("strong",{children:u.certificate_number})]})]}),u&&u.status!=="NOT_FOUND"&&u.state!=="NOT_FOUND"&&(()=>{var U;const G=u.valid,Q=(u.status||"").toUpperCase(),re={CONFORMANT:{color:n.accentGreen,bg:"rgba(92,214,133,0.08)",border:"rgba(92,214,133,0.25)",headerBg:"rgba(92,214,133,0.15)",icon:"Valid Certificate",label:"CONFORMANT"},SUSPENDED:{color:"#D6A05C",bg:"rgba(214,160,92,0.08)",border:"rgba(214,160,92,0.25)",headerBg:"rgba(214,160,92,0.15)",icon:"Suspended",label:"SUSPENDED"},REVOKED:{color:"#D65C5C",bg:"rgba(214,92,92,0.08)",border:"rgba(214,92,92,0.25)",headerBg:"rgba(214,92,92,0.15)",icon:"Revoked",label:"REVOKED"},EXPIRED:{color:"#D65C5C",bg:"rgba(214,92,92,0.08)",border:"rgba(214,92,92,0.25)",headerBg:"rgba(214,92,92,0.15)",icon:"Expired",label:"EXPIRED"}},E=re[Q]||re.CONFORMANT,V={display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.06)"},J={color:n.textTertiary,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px"},w={color:n.textPrimary,fontSize:"14px"};return e.jsxs("div",{className:"mt-6 rounded-xl overflow-hidden",style:{background:E.bg,border:"1px solid "+E.border},children:[e.jsxs("div",{style:{padding:"16px 20px",background:E.headerBg,borderBottom:"1px solid "+E.border,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[G?e.jsx(cn,{className:"w-5 h-5",style:{color:E.color}}):e.jsx(Ne,{className:"w-5 h-5",style:{color:E.color}}),e.jsx("span",{style:{color:E.color,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",fontWeight:500},children:E.icon})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"10px",background:E.bg,color:E.color,fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",gap:"6px",border:"1px solid "+E.border},children:[e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",background:E.color,boxShadow:"0 0 8px "+E.color}}),E.label]})})]}),u.message&&e.jsx("div",{style:{padding:"12px 20px",background:"rgba(0,0,0,0.15)",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:e.jsx("p",{style:{margin:0,color:E.color,fontSize:"13px"},children:u.message})}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsxs("div",{style:V,children:[e.jsx("span",{style:J,children:"Certificate"}),e.jsx("span",{style:{color:E.color,fontFamily:"'IBM Plex Mono', monospace",fontSize:"14px",fontWeight:500},children:u.certificate_number})]}),e.jsxs("div",{style:V,children:[e.jsx("span",{style:J,children:"Organization"}),e.jsx("span",{style:w,children:u.organization_name||"-"})]}),e.jsxs("div",{style:V,children:[e.jsx("span",{style:J,children:"System"}),e.jsxs("span",{style:w,children:[u.system_name||"-",u.system_version?" v"+u.system_version:""]})]}),e.jsxs("div",{style:V,children:[e.jsx("span",{style:J,children:"Issued"}),e.jsx("span",{style:w,children:u.issued_at?new Date(u.issued_at).toLocaleDateString():"N/A"})]}),e.jsxs("div",{style:V,children:[e.jsx("span",{style:J,children:"Expires"}),e.jsx("span",{style:{...w,color:Q==="EXPIRED"?"#D65C5C":n.textPrimary},children:u.expires_at?new Date(u.expires_at).toLocaleDateString():"N/A"})]}),u.convergence_score!=null&&e.jsxs("div",{style:V,children:[e.jsx("span",{style:J,children:"Convergence Score"}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"14px",color:u.convergence_score>=.95?n.accentGreen:"#D6A05C"},children:[(u.convergence_score*100).toFixed(1),"%"]})]}),u.evidence_hash&&e.jsxs("div",{style:{paddingBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("span",{style:J,children:"Evidence Hash"}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary,marginTop:"6px",wordBreak:"break-all",lineHeight:"1.5"},children:u.evidence_hash})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"20px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:W,style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:n.textSecondary,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:z?" Copied!":" Share Link"}),e.jsx("button",{onClick:()=>P(!B),style:{padding:"8px 16px",background:B?"rgba(91,75,138,0.25)":"rgba(255,255,255,0.05)",border:B?"1px solid rgba(91,75,138,0.4)":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:B?n.purpleBright:n.textSecondary,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:B?" Hide QR":" QR Code"}),G&&e.jsxs("a",{href:`${Ue}/api/certificates/${v}/pdf`,target:"_blank",rel:"noopener noreferrer",style:{padding:"8px 16px",background:"rgba(92,214,133,0.1)",border:"1px solid rgba(92,214,133,0.3)",borderRadius:"8px",color:n.accentGreen,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px",textDecoration:"none"},children:[e.jsx(Oe,{size:12})," Certificate PDF"]}),G&&e.jsx("button",{onClick:k,style:{padding:"8px 16px",background:"rgba(91,75,138,0.15)",border:"1px solid rgba(91,75,138,0.3)",borderRadius:"8px",color:n.purpleBright,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:S?" Hide Evidence":" View Evidence"})]}),B&&R&&e.jsxs("div",{style:{marginTop:"16px",padding:"20px",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.06)",textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Verification QR Code"}),e.jsx("div",{style:{display:"inline-block",padding:"12px",background:"#fff",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:e.jsx("img",{src:R,alt:"Verification QR Code",style:{width:"200px",height:"200px",display:"block"}})}),e.jsx("div",{style:{marginTop:"12px",display:"flex",justifyContent:"center",gap:"8px"},children:e.jsxs("button",{onClick:$,style:{padding:"6px 14px",background:"rgba(91,75,138,0.15)",border:"1px solid rgba(91,75,138,0.3)",borderRadius:"6px",color:n.purpleBright,cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Oe,{size:12})," Download PNG"]})}),e.jsxs("p",{style:{fontSize:"11px",color:n.textTertiary,marginTop:"12px",lineHeight:"1.5"},children:["Scan to verify certificate ",v," on any device"]})]}),S&&b&&e.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Evidence Chain"}),e.jsxs("div",{style:{display:"grid",gap:"10px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Evidence Hash (SHA-256)"}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.purpleBright,wordBreak:"break-all",marginTop:"4px"},children:b.evidence_hash||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Convergence Score"}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"14px",color:n.accentGreen,marginTop:"4px"},children:b.convergence_score?(b.convergence_score*100).toFixed(2)+"%":"-"})]}),((U=b.odd_scope)==null?void 0:U.environment_type)&&e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"ODD Environment"}),e.jsx("div",{style:{fontSize:"13px",color:n.textPrimary,marginTop:"4px"},children:b.odd_scope.environment_type})]}),e.jsx("div",{style:{marginTop:"8px",padding:"12px",background:"rgba(0,0,0,0.2)",borderRadius:"8px"},children:e.jsx("p",{style:{fontSize:"11px",color:n.textTertiary,lineHeight:"1.6",whiteSpace:"pre-line",margin:0},children:b.verification_instructions||""})})]})]})]})]})})()]})]})]})]})}function pl(){const{user:t,logout:r}=ce();return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:n.bgPrimary||"#0d0f14",padding:"20px"},children:e.jsxs("div",{style:{maxWidth:"500px",textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(245,158,11,0.1)",border:"2px solid rgba(245,158,11,0.3)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:e.jsx(yo,{style:{width:"36px",height:"36px",color:"#f59e0b"}})}),e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:"#f59e0b",marginBottom:"12px"},children:"APPLICATION UNDER REVIEW"}),e.jsx("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"28px",fontWeight:200,color:n.textPrimary,margin:"0 0 16px"},children:"Welcome to Sentinel Authority"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"15px",lineHeight:"1.6",marginBottom:"32px"},children:"Your account is being reviewed by our team. You will receive full portal access once approved. This typically takes 1-2 business days."}),e.jsxs("div",{style:{padding:"20px",borderRadius:"12px",border:"1px solid "+n.borderGlass,background:"rgba(255,255,255,0.02)",marginBottom:"24px",textAlign:"left"},children:[e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"8px"},children:"Registered as:"}),e.jsx("p",{style:{color:n.textPrimary,fontWeight:500},children:t==null?void 0:t.full_name}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px"},children:t==null?void 0:t.email})]}),e.jsxs("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"24px"},children:["Questions? Contact ",e.jsx("a",{href:"mailto:info@sentinelauthority.org",style:{color:n.purpleBright},children:"info@sentinelauthority.org"})]}),e.jsx("button",{onClick:r,style:{padding:"10px 24px",borderRadius:"8px",background:"transparent",border:"1px solid "+n.borderGlass,color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Sign Out"})]})})}function xl(){const{user:t}=ce(),[r,a]=y.useState([]),[o,s]=y.useState(!0);y.useEffect(()=>{O.get("/api/documents/").then(l=>{a(Array.isArray(l.data)?l.data:[]),s(!1)}).catch(()=>s(!1))},[]);const i=async(l,c)=>{try{const d=await O.get("/api/documents/"+l+"/download",{responseType:"blob"}),p=window.URL.createObjectURL(d.data),m=document.createElement("a");m.href=p,m.download=c.replace(/\s+/g,"_")+".pdf",document.body.appendChild(m),m.click(),m.remove(),window.URL.revokeObjectURL(p)}catch(d){console.error("Download error:",d)}};return e.jsxs("div",{style:{padding:"32px",maxWidth:"900px"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"RESOURCES"}),e.jsx("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"28px",fontWeight:200,color:n.textPrimary,margin:0},children:"Documents & Guides"}),e.jsx("p",{style:{color:n.textTertiary,marginTop:"8px",fontSize:"14px"},children:"Reference materials for the ODDC certification process."})]}),o?e.jsx("div",{style:{color:n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"},children:"Loading documents..."}):r.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",borderRadius:"12px",border:"1px solid "+n.borderGlass,background:n.bgCard,color:n.textTertiary},children:"No documents available."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.map(l=>e.jsxs("div",{style:{padding:"24px",borderRadius:"12px",border:"1px solid "+n.borderGlass,background:n.bgCard,display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"10px",background:n.purplePrimary+"22",border:"1px solid "+n.purplePrimary+"44",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(tr,{style:{width:"22px",height:"22px",color:n.purpleBright}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,color:n.textPrimary,fontSize:"15px",marginBottom:"4px"},children:l.title}),e.jsx("div",{style:{color:n.textTertiary,fontSize:"13px",lineHeight:"1.4"},children:l.description}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginTop:"6px",letterSpacing:"1px",textTransform:"uppercase"},children:"PDF  v"+l.version})]}),e.jsx("button",{onClick:()=>i(l.id,l.title),style:{padding:"10px 20px",borderRadius:"8px",background:n.purplePrimary,border:"1px solid "+n.purpleBright,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer",flexShrink:0},children:"Download"})]},l.id))}),t&&t.role==="admin"&&e.jsx("div",{style:{marginTop:"40px",padding:"20px",borderRadius:"10px",border:"1px dashed "+n.borderGlass,color:n.textTertiary,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace"},children:"ADMIN: To add documents, place PDFs in backend/static/documents/ and register them in documents.py"})]})}function De({label:t,title:r,description:a,action:o}){return e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[t&&e.jsxs("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:n.purpleBright}}),t]}),e.jsx("h1",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"32px",fontWeight:200,margin:0,letterSpacing:"-0.02em"},children:r}),a&&e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px",fontSize:"15px"},children:a})]}),o]})})}function ul({session:t}){var a;if(!t)return null;const r=t.pass_count+t.block_count>0?(t.pass_count/(t.pass_count+t.block_count)*100).toFixed(1):0;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:500,color:"#fff"},children:(t.pass_count||0)+(t.block_count||0)}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Total Actions"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(92,214,133,0.1)",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:500,color:"#5CD685"},children:t.pass_count||0}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Passed"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(214,92,92,0.1)",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:500,color:"#D65C5C"},children:t.block_count||0}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Blocked"})]}),e.jsxs("div",{style:{padding:"16px",background:r>=95?"rgba(92,214,133,0.1)":"rgba(214,92,92,0.1)",borderRadius:"8px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"28px",fontWeight:500,color:r>=95?"#5CD685":"#D65C5C"},children:[r,"%"]}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Pass Rate"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"SESSION ID"}),e.jsx("div",{style:{fontFamily:"monospace",color:"#ccc"},children:t.session_id})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"CERTIFICATE"}),e.jsx("div",{style:{color:"#ccc"},children:t.certificate_id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"STARTED"}),e.jsx("div",{style:{color:"#ccc"},children:t.started_at?new Date(t.started_at).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"STATUS"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",background:t.status==="active"?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.1)",color:t.status==="active"?"#5CD685":"#888"},children:(a=t.status)==null?void 0:a.toUpperCase()})]})]})]})}function ml({sessionId:t}){const[r,a]=y.useState([]),[o,s]=y.useState(!0);return y.useEffect(()=>{t&&O.get(`/api/envelo/admin/sessions/${t}/telemetry`).then(i=>a(i.data.records||[])).catch(console.error).finally(()=>s(!1))},[t]),o?e.jsx("div",{style:{color:"#888",padding:"12px"},children:"Loading..."}):r.length?e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Time"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Action"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Result"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Params"})]})}),e.jsx("tbody",{children:r.map((i,l)=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("td",{style:{padding:"8px",fontFamily:"monospace",fontSize:"11px",color:"#aaa"},children:i.timestamp?new Date(i.timestamp).toLocaleTimeString():"-"}),e.jsx("td",{style:{padding:"8px",color:"#fff"},children:i.action_type}),e.jsx("td",{style:{padding:"8px"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:400,background:i.result==="PASS"?"rgba(92,214,133,0.2)":"rgba(214,92,92,0.2)",color:i.result==="PASS"?"#5CD685":"#D65C5C"},children:i.result})}),e.jsx("td",{style:{padding:"8px",color:"#666",fontFamily:"monospace",fontSize:"10px"},children:JSON.stringify(i.parameters||{})})]},l))})]})}):e.jsx("div",{style:{color:"#888",padding:"12px"},children:"No telemetry records"})}function io({onKeyGenerated:t}){const[r,a]=y.useState([]),[o,s]=y.useState(!0),[i,l]=y.useState(""),[c,d]=y.useState(null);y.useEffect(()=>{c!=null&&c.key&&(t==null||t(c.key))},[c]),y.useEffect(()=>{m()},[]);const p=S=>{const j=`#!/usr/bin/env python3
"""
ENVELO Agent - Pre-configured for your system
Sentinel Authority - https://sentinelauthority.org

QUICK START:
1. Install dependencies: pip install httpx
2. Run this file: python envelo_agent.py
3. Check your dashboard: https://app.sentinelauthority.org/envelo
"""

import os
import sys
import time
import json
import uuid
import httpx
from datetime import datetime
from functools import wraps

# 
# YOUR CREDENTIALS (pre-configured)
# 
CERTIFICATE_ID = "ODDC-2026-PENDING"
API_KEY = "${S}"
API_ENDPOINT = "https://sentinel-authority-production.up.railway.app"

# 
# ENVELO AGENT
# 

class NumericBoundary:
    def __init__(self, name, min=None, max=None, unit=""):
        self.name = name
        self.min = min
        self.max = max
        self.unit = unit
    
    def check(self, value):
        if self.min is not None and value < self.min:
            return False, f"{self.name} ({value}) below minimum ({self.min})"
        if self.max is not None and value > self.max:
            return False, f"{self.name} ({value}) above maximum ({self.max})"
        return True, None

class EnveloAgent:
    def __init__(self):
        self.boundaries = []
        self.session_id = uuid.uuid4().hex[:16]
        self.telemetry = []
        self.pass_count = 0
        self.block_count = 0
        self._register_session()
    
    def _register_session(self):
        try:
            httpx.post(
                f"{API_ENDPOINT}/api/envelo/sessions",
                json={
                    "certificate_id": CERTIFICATE_ID,
                    "session_id": self.session_id,
                    "started_at": datetime.utcnow().isoformat() + "Z",
                    "agent_version": "1.0.0",
                    "boundaries": [{"name": b.name} for b in self.boundaries]
                },
                headers={"Authorization": f"Bearer {API_KEY}"},
                timeout=10
            )
            print(f" Session registered: {self.session_id}")
        except Exception as e:
            print(f" Could not register session: {e}")
    
    def add_boundary(self, boundary):
        self.boundaries.append(boundary)
        print(f"  + Boundary: {boundary.name} ({boundary.min} to {boundary.max} {boundary.unit})")
    
    def enforce(self, func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            start = time.time()
            action_id = uuid.uuid4().hex[:8]
            
            # Check all boundaries
            violations = []
            for boundary in self.boundaries:
                if boundary.name in kwargs:
                    passed, msg = boundary.check(kwargs[boundary.name])
                    if not passed:
                        violations.append({"boundary": boundary.name, "message": msg})
            
            result = "PASS" if not violations else "BLOCK"
            exec_time = (time.time() - start) * 1000
            
            # Record telemetry
            record = {
                "timestamp": datetime.utcnow().isoformat() + "Z",
                "action_id": action_id,
                "action_type": func.__name__,
                "result": result,
                "execution_time_ms": exec_time,
                "parameters": kwargs,
                "boundary_evaluations": [{"boundary": b.name, "passed": b.name not in [v["boundary"] for v in violations]} for b in self.boundaries]
            }
            self.telemetry.append(record)
            
            if result == "PASS":
                self.pass_count += 1
                return func(*args, **kwargs)
            else:
                self.block_count += 1
                raise Exception(f"ENVELO BLOCK: {violations[0]['message']}")
        
        return wrapper
    
    def send_telemetry(self):
        if not self.telemetry:
            return
        try:
            httpx.post(
                f"{API_ENDPOINT}/api/envelo/telemetry",
                json={
                    "certificate_id": CERTIFICATE_ID,
                    "session_id": self.session_id,
                    "records": self.telemetry,
                    "stats": {"pass_count": self.pass_count, "block_count": self.block_count}
                },
                headers={"Authorization": f"Bearer {API_KEY}"},
                timeout=10
            )
            print(f" Sent {len(self.telemetry)} telemetry records")
            self.telemetry = []
        except Exception as e:
            print(f" Could not send telemetry: {e}")
    
    def shutdown(self):
        self.send_telemetry()
        try:
            httpx.post(
                f"{API_ENDPOINT}/api/envelo/sessions/{self.session_id}/end",
                json={
                    "ended_at": datetime.utcnow().isoformat() + "Z",
                    "final_stats": {"pass_count": self.pass_count, "block_count": self.block_count}
                },
                headers={"Authorization": f"Bearer {API_KEY}"},
                timeout=10
            )
            print(f" Session ended")
        except Exception as e:
            print(f" Could not end session: {e}")

# 
# EXAMPLE USAGE - MODIFY FOR YOUR SYSTEM
# 

if __name__ == "__main__":
    print("")
    print("")
    print("           ENVELO Agent - Sentinel Authority               ")
    print("")
    print("")
    print(f"Certificate: {CERTIFICATE_ID}")
    print(f"API Key:     {API_KEY[:12]}...")
    print("")
    
    # Initialize agent
    agent = EnveloAgent()
    print("")
    
    # Define YOUR boundaries (modify these for your system)
    print("Defining ODD boundaries:")
    agent.add_boundary(NumericBoundary("speed", min=0, max=100, unit="km/h"))
    agent.add_boundary(NumericBoundary("temperature", min=-20, max=50, unit="celsius"))
    print("")
    
    # Example protected function (replace with your actual function)
    @agent.enforce
    def autonomous_action(speed, temperature):
        print(f"    Executing action: speed={speed}, temp={temperature}")
        return True
    
    # Test 1: Within boundaries (should PASS)
    print("" * 50)
    print("Test 1: speed=50, temperature=25 (within bounds)")
    try:
        autonomous_action(speed=50, temperature=25)
        print("     PASSED - Action executed")
    except Exception as e:
        print(f"     BLOCKED - {e}")
    print("")
    
    # Test 2: Outside boundaries (should BLOCK)
    print("Test 2: speed=150, temperature=25 (speed exceeds limit)")
    try:
        autonomous_action(speed=150, temperature=25)
        print("     PASSED - Action executed")
    except Exception as e:
        print(f"     BLOCKED - {e}")
    print("")
    
    # Send telemetry and shutdown
    print("" * 50)
    agent.shutdown()
    print("")
    print("" * 50)
    print("Check your dashboard: https://app.sentinelauthority.org/envelo")
    print("" * 50)
    print("")
`,T=new Blob([j],{type:"text/plain"}),C=URL.createObjectURL(T),N=document.createElement("a");N.href=C,N.download=`envelo_agent_${cert.certificate_number}.py`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(C)},m=async()=>{try{const S=await O.get("/api/apikeys/");a(S.data)}catch(S){console.error("Failed to load API keys:",S)}s(!1)},[g,v]=y.useState([]),[h,u]=y.useState(null);y.useEffect(()=>{O.get("/api/certificates/").then(S=>{const j=(S.data||[]).filter(T=>T.state==="conformant"||T.state==="active"||T.state==="issued");v(j),j.length>0&&u(j[0].id)}).catch(()=>{})},[]);const x=async()=>{if(i.trim())try{const S=await O.post("/api/apikeys/generate",{name:i,certificate_id:h});d(S.data),l(""),m()}catch(S){console.error("Failed to generate key:",S)}},b=async S=>{if(await confirm({title:"Revoke Key",message:"Revoke this API key? This cannot be undone.",danger:!0,confirmLabel:"Revoke"}))try{await O.delete(`/api/apikeys/${S}`),m()}catch(j){console.error("Failed to revoke key:",j)}},f=()=>{c!=null&&c.key&&navigator.clipboard.writeText(c.key)};return o?e.jsx("div",{style:{color:n.textTertiary},children:"Loading..."}):e.jsxs("div",{children:[c&&e.jsxs("div",{style:{background:"rgba(92,214,133,0.1)",border:"1px solid rgba(157,140,207,0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.accentGreen,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:" New API Key Generated"}),e.jsx("div",{style:{background:"rgba(0,0,0,0.3)",padding:"12px",borderRadius:"6px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px",color:n.textPrimary,wordBreak:"break-all",marginBottom:"12px"},children:c.key}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:f,style:{padding:"8px 16px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",cursor:"pointer"},children:"Copy to Clipboard"}),e.jsx("button",{onClick:()=>d(null),style:{padding:"8px 16px",background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textSecondary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",cursor:"pointer"},children:"Dismiss"})]}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"12px",marginTop:"12px"},children:" Save this key now. You won't be able to see it again."}),e.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"rgba(91,75,138,0.2)",border:"1px solid rgba(91,75,138,0.3)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.purpleBright,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Next Step"}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",marginBottom:"12px"},children:"Download the ENVELO Agent pre-configured with your credentials:"}),e.jsxs("button",{onClick:()=>p(c.key),style:{padding:"12px 24px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Oe,{size:16})," Download ENVELO Agent"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[e.jsx("input",{type:"text",placeholder:"Key name (e.g., Production)",value:i,onChange:S=>l(S.target.value),style:{flex:1,padding:"10px 14px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px"}}),e.jsx("button",{onClick:x,disabled:!i.trim(),style:{padding:"10px 20px",background:i.trim()?n.purplePrimary:"rgba(0,0,0,0.2)",border:`1px solid ${i.trim()?n.purpleBright:n.borderGlass}`,borderRadius:"6px",color:i.trim()?"#fff":n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:i.trim()?"pointer":"not-allowed"},children:"Generate Key"})]}),r.length>0?e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginBottom:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:"Your API Keys"}),r.map(S=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"rgba(0,0,0,0.2)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",marginBottom:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px",color:n.textPrimary},children:S.name}),e.jsxs("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary,marginTop:"4px"},children:[S.key_prefix,""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:S.last_used_at?`Last used: ${new Date(S.last_used_at).toLocaleDateString()}`:"Never used"}),e.jsx("button",{onClick:()=>b(S.id),style:{padding:"6px 12px",background:"rgba(255,100,100,0.1)",border:"1px solid rgba(255,100,100,0.3)",borderRadius:"4px",color:"#ff6464",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer"},children:"Revoke"})]})]},S.id))]}):e.jsx("p",{style:{color:n.textTertiary,fontSize:"14px"},children:"No API keys yet. Generate one to connect the ENVELO Agent."})]})}function fl(){const[t,r]=y.useState([]),[a,o]=y.useState({type:"numeric",name:"",parameter:"",min:"",max:"",unit:""}),s=()=>{a.name&&(r([...t,{...a,id:Date.now()}]),o({type:"numeric",name:"",parameter:"",min:"",max:"",unit:""}))},i=d=>{r(t.filter(p=>p.id!==d))},l=()=>{let d=`from envelo import EnveloAgent, EnveloConfig, NumericBoundary, GeoBoundary, RateLimitBoundary

config = EnveloConfig(
    certificate_id="YOUR-CERTIFICATE-ID",
    api_key="YOUR-API-KEY"
)

agent = EnveloAgent(config)

# Your ODD Boundaries
`;return t.forEach(p=>{p.type==="numeric"?d+=`agent.add_boundary(NumericBoundary("${p.name}", parameter="${p.parameter||p.name}", min=${p.min||"None"}, max=${p.max||"None"}, unit="${p.unit||""}"))
`:p.type==="rate"&&(d+=`agent.add_boundary(RateLimitBoundary("${p.name}", max_per_${p.rateUnit||"second"}=${p.rateLimit||10}))
`)}),d+=`
# Wrap your autonomous functions
@agent.enforce
def your_action(**params):
    # Your code here
    pass
`,d},c=()=>{const d=l(),p=new Blob([d],{type:"text/plain"}),m=URL.createObjectURL(p),g=document.createElement("a");g.href=m,g.download="envelo_config.py",g.click(),URL.revokeObjectURL(m)};return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"16px"},children:[e.jsxs("select",{value:a.type,onChange:d=>o({...a,type:d.target.value}),style:{padding:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"},children:[e.jsx("option",{value:"numeric",children:"Numeric Limit"}),e.jsx("option",{value:"rate",children:"Rate Limit"})]}),e.jsx("input",{type:"text",placeholder:"Name (e.g., speed)",value:a.name,onChange:d=>o({...a,name:d.target.value,parameter:d.target.value}),style:{padding:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"}}),a.type==="numeric"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",placeholder:"Min",value:a.min,onChange:d=>o({...a,min:d.target.value}),style:{padding:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"}}),e.jsx("input",{type:"number",placeholder:"Max",value:a.max,onChange:d=>o({...a,max:d.target.value}),style:{padding:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"}}),e.jsx("input",{type:"text",placeholder:"Unit (e.g., km/h)",value:a.unit,onChange:d=>o({...a,unit:d.target.value}),style:{padding:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"}})]}),a.type==="rate"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",placeholder:"Limit",value:a.rateLimit,onChange:d=>o({...a,rateLimit:d.target.value}),style:{padding:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"}}),e.jsxs("select",{value:a.rateUnit||"second",onChange:d=>o({...a,rateUnit:d.target.value}),style:{padding:"10px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"},children:[e.jsx("option",{value:"second",children:"per second"}),e.jsx("option",{value:"minute",children:"per minute"}),e.jsx("option",{value:"hour",children:"per hour"})]})]}),e.jsx("button",{onClick:s,style:{padding:"10px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",cursor:"pointer"},children:"+ Add"})]}),t.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Defined Boundaries"}),t.map(d=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",background:"rgba(92,214,133,0.1)",border:"1px solid rgba(92,214,133,0.2)",borderRadius:"6px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.accentGreen},children:d.type==="numeric"?`${d.name}: ${d.min||""} to ${d.max||""} ${d.unit}`:`${d.name}: ${d.rateLimit}/${d.rateUnit}`}),e.jsx("button",{onClick:()=>i(d.id),style:{background:"none",border:"none",color:n.textTertiary,cursor:"pointer",fontSize:"16px"},children:""})]},d.id))]}),t.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Generated Configuration"}),e.jsx("pre",{style:{background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"16px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textSecondary,overflow:"auto",maxHeight:"200px",whiteSpace:"pre-wrap"},children:l()}),e.jsx("button",{onClick:c,className:"mt-3 px-4 py-2 rounded-lg",style:{marginTop:"12px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Download Config"})]})]})}function gl(){var _;const[t,r]=y.useState(null),[a,o]=y.useState([]),[s,i]=y.useState([]),[l,c]=y.useState([]),[d,p]=y.useState(0),[m,g]=y.useState({}),[v,h]=y.useState(null),[u,x]=y.useState(null),[b,f]=y.useState("monitoring"),[S,j]=y.useState(!0);if(y.useEffect(()=>{const R=async()=>{try{const[B,P,A,$]=await Promise.all([O.get("/api/envelo/stats").catch(()=>({data:null})),O.get("/api/envelo/admin/sessions").catch(()=>({data:{sessions:[]}})),O.get("/api/certificates/").catch(()=>({data:[]})),O.get("/api/applications/").catch(()=>({data:[]}))]);r(B.data),o(P.data.sessions||[]),i(A.data||[]),c($.data.applications||$.data||[])}catch(B){console.error(B)}j(!1)};R();const L=setInterval(R,3e4);return()=>clearInterval(L)},[]),S)return e.jsx("div",{style:{color:n.textTertiary,padding:"40px",textAlign:"center"},children:e.jsx(Me,{size:24,style:{animation:"spin 1s linear infinite"}})});const T=a.filter(R=>R.status==="active"),C=a.reduce((R,L)=>R+(L.block_count||0),0),N=s.filter(R=>R.state==="conformant"||R.state==="active"||R.state==="issued"),I=l.filter(R=>R.state==="approved"||R.state==="testing"),z=R=>{const L=`#!/usr/bin/env python3
"""
ENVELO Agent - Sentinel Authority
System: ${R.system_name||"Unknown"}
Certificate: ${R.certificate_number}
Organization: ${R.organization_name||"Unknown"}
Generated: ${new Date().toISOString()}
"""

import os, json, time, requests
from datetime import datetime

SENTINEL_API = "https://api.sentinelauthority.org"
CERTIFICATE_NUMBER = "${R.certificate_number}"
SYSTEM_NAME = "${R.system_name||"Unknown"}"

class EnveloAgent:
    def __init__(self, api_key):
        self.api_key = api_key
        self.session_id = None
        self.boundaries = {}
        self.config = None
        
    def start_session(self):
        # Fetch approved boundaries from server
        try:
            config_res = requests.get(f"{SENTINEL_API}/api/envelo/boundaries/config",
                headers={"Authorization": f"Bearer {self.api_key}"})
            if config_res.ok:
                self.config = config_res.json()
                self._load_boundaries_from_config()
                print(f"[ENVELO] Loaded {len(self.boundaries)} boundaries from server")
        except Exception as e:
            print(f"[ENVELO] Warning: Could not fetch boundaries: {e}")
        
        # Start session
        res = requests.post(f"{SENTINEL_API}/api/envelo/sessions",
            headers={"Authorization": f"Bearer {self.api_key}"},
            json={
                "certificate_id": CERTIFICATE_NUMBER,
                "session_id": str(uuid.uuid4()),
                "started_at": datetime.utcnow().isoformat() + "Z",
                "agent_version": "1.0.0",
                "boundaries": list(self.boundaries.values())
            })
        if res.ok:
            self.session_id = res.json().get("session_id")
            print(f"[ENVELO] Session started: {self.session_id}")
            return True
        return False
    
    def _load_boundaries_from_config(self):
        if not self.config:
            return
        for b in self.config.get("numeric_boundaries", []):
            self.boundaries[b["name"]] = {"type": "numeric", "min": b.get("min_value"), "max": b.get("max_value")}
        for b in self.config.get("rate_boundaries", []):
            self.boundaries[b["name"]] = {"type": "rate", "max_per_second": b.get("max_per_second")}
    
    def add_boundary(self, name, min_val=None, max_val=None):
        self.boundaries[name] = {"type": "numeric", "min": min_val, "max": max_val}
    
    def check(self, name, value):
        if name not in self.boundaries:
            return True
        b = self.boundaries[name]
        if b.get("min") is not None and value < b["min"]:
            self._violation(name, value, f"Below min {b['min']}")
            return False
        if b.get("max") is not None and value > b["max"]:
            self._violation(name, value, f"Above max {b['max']}")
            return False
        return True
    
    def _violation(self, name, value, reason):
        print(f"[ENVELO] VIOLATION: {name}={value} - {reason}")
        try:
            requests.post(f"{SENTINEL_API}/api/envelo/telemetry",
                headers={"Authorization": f"Bearer {self.api_key}"},
                json={
                    "certificate_id": CERTIFICATE_NUMBER,
                    "session_id": self.session_id,
                    "records": [{
                        "timestamp": datetime.utcnow().isoformat() + "Z",
                        "action_type": "boundary_check",
                        "result": "BLOCK",
                        "parameters": {name: value},
                        "boundary_evaluations": [{"boundary": name, "passed": False, "message": reason}]
                    }],
                    "stats": {"block_count": 1}
                })
        except:
            pass
    
    def heartbeat(self):
        try:
            requests.post(f"{SENTINEL_API}/api/envelo/heartbeat",
                headers={"Authorization": f"Bearer {self.api_key}"})
        except:
            pass
    
    def shutdown(self):
        if self.session_id:
            requests.post(f"{SENTINEL_API}/api/envelo/sessions/{self.session_id}/end",
                headers={"Authorization": f"Bearer {self.api_key}"},
                json={"ended_at": datetime.utcnow().isoformat() + "Z", "final_stats": {}})
        print("[ENVELO] Session ended")

import uuid
import { SYSTEM_TYPES, DOMAIN_GROUPS } from './systemTypesData';

if __name__ == "__main__":
    print("=" * 60)
    print("  ENVELO Agent - Sentinel Authority")
    print(f"  System: {SYSTEM_NAME}")
    print(f"  Certificate: {CERTIFICATE_NUMBER}")
    print("=" * 60)
    print()
    print("Usage:")
    print("  agent = EnveloAgent('your-api-key')")
    print("  agent.start_session()")
    print("  agent.check('speed', 50)")
    print("  agent.shutdown()")
`,B=new Blob([L],{type:"text/plain"}),P=URL.createObjectURL(B),A=document.createElement("a");A.href=P,A.download=`envelo_agent_${R.certificate_number}.py`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(P)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(De,{label:" Admin Console",title:"ENVELO Management",description:"Monitor, configure, and manage all customer systems"}),e.jsx("div",{style:{display:"flex",gap:"8px",borderBottom:`1px solid ${n.borderGlass}`,paddingBottom:"16px"},children:[{id:"monitoring",label:"Live Monitoring"},{id:"customers",label:"Customer Systems"},{id:"configure",label:"Configure Boundaries"}].map(R=>e.jsx("button",{onClick:()=>f(R.id),style:{padding:"10px 20px",background:b===R.id?n.purplePrimary:"transparent",border:`1px solid ${b===R.id?n.purpleBright:n.borderGlass}`,borderRadius:"8px",color:b===R.id?"#fff":n.textSecondary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer",transition:"all 0.2s"},children:R.label},R.id))}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Active Sessions"}),e.jsx("p",{style:{fontSize:"36px",fontWeight:200,color:n.accentGreen},children:T.length})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Attested Systems"}),e.jsx("p",{style:{fontSize:"36px",fontWeight:200,color:n.purpleBright},children:N.length})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"CAT-72 In Progress"}),e.jsx("p",{style:{fontSize:"36px",fontWeight:200,color:n.accentAmber},children:I.length})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Violations (Total)"}),e.jsx("p",{style:{fontSize:"36px",fontWeight:200,color:C>0?n.accentRed:n.accentGreen},children:C})]})]}),b==="monitoring"&&e.jsxs(e.Fragment,{children:[e.jsxs(Y,{glow:!0,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Active Sessions"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 12px",background:"rgba(92,214,133,0.15)",borderRadius:"20px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:n.accentGreen,boxShadow:`0 0 8px ${n.accentGreen}`,animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.accentGreen,textTransform:"uppercase"},children:"Live"})]})]}),a.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Certificate"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Status"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Pass"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Block"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:a.map((R,L)=>e.jsxs("tr",{className:"sexy-row",style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("td",{style:{padding:"16px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:R.certificate_id||"N/A"}),e.jsx("td",{style:{padding:"16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:R.status==="active"?n.accentGreen:n.textTertiary,boxShadow:R.status==="active"?`0 0 8px ${n.accentGreen}`:"none"}}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",textTransform:"uppercase",color:R.status==="active"?n.accentGreen:n.textTertiary},children:R.status})]})}),e.jsx("td",{style:{padding:"16px",color:n.accentGreen},children:R.pass_count||0}),e.jsx("td",{style:{padding:"16px",color:(R.block_count||0)>0?n.accentRed:n.textTertiary},children:R.block_count||0}),e.jsx("td",{style:{padding:"16px"},children:e.jsx("button",{onClick:()=>h(R),style:{padding:"6px 12px",background:"rgba(157,140,207,0.15)",border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:n.purpleBright,fontSize:"11px",cursor:"pointer"},children:"View Details"})})]},L))})]})}):e.jsx("p",{style:{color:n.textTertiary,textAlign:"center",padding:"40px"},children:"No sessions found."})]}),v&&e.jsxs(Y,{accent:"purple",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:["Session: ",(_=v.session_id)==null?void 0:_.substring(0,16),"..."]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:async()=>{try{const R=await O.get(`/api/envelo/admin/sessions/${v.id}/report`,{responseType:"blob"}),L=window.URL.createObjectURL(new Blob([R.data])),B=document.createElement("a");B.href=L,B.download=`CAT72-Report-${v.session_id}.pdf`,B.click()}catch(R){toast.show("Failed: "+R.message,"error")}},style:{padding:"8px 16px",background:n.purplePrimary,border:"none",borderRadius:"6px",color:"#fff",fontSize:"11px",cursor:"pointer"},children:"Download Report"}),e.jsx("button",{onClick:()=>h(null),style:{padding:"8px 16px",background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textTertiary,cursor:"pointer",fontSize:"11px"},children:" Close"})]})]}),e.jsx(ul,{session:v}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(ml,{sessionId:v.id})})]})]}),b==="customers"&&e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"20px"},children:"Attested Systems"}),N.length>0?e.jsx("div",{className:"space-y-4",children:N.map(R=>e.jsx("div",{style:{padding:"20px",background:"rgba(0,0,0,0.2)",border:`1px solid ${n.borderGlass}`,borderRadius:"12px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:500,color:n.textPrimary,margin:"0 0 4px 0"},children:R.system_name||"Unnamed"}),e.jsx("p",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"8px"},children:R.organization_name}),e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:R.certificate_number})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>{x(R),f("configure")},style:{padding:"8px 16px",background:"rgba(157,140,207,0.15)",border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:n.purpleBright,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(tt,{size:12})," Configure"]}),e.jsxs("button",{onClick:async()=>{var L,B;if(confirm(`Provision and send ENVELO agent to ${R.organization_name}?`))try{const P=await O.post("/api/apikeys/admin/provision",null,{params:{user_id:R.applicant_id,certificate_id:R.id,send_email:!0}});if(P.data.agent_code){const A=new Blob([P.data.agent_code],{type:"text/plain"}),$=URL.createObjectURL(A),F=document.createElement("a");F.href=$,F.download=`envelo_agent_${R.certificate_number}.py`,F.click(),URL.revokeObjectURL($)}toast.show("Agent provisioned successfully","success")}catch(P){toast.show("Failed: "+(((B=(L=P.response)==null?void 0:L.data)==null?void 0:B.detail)||P.message),"error")}},style:{padding:"8px 16px",background:n.accentGreen,border:`1px solid ${n.accentGreen}`,borderRadius:"6px",color:"#fff",fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(rr,{size:12})," Provision & Send"]}),e.jsxs("button",{onClick:()=>z(R),style:{padding:"8px 16px",background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textSecondary,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Oe,{size:12})," Download Only"]})]})]})},R.id))}):e.jsx("p",{style:{color:n.textTertiary,textAlign:"center",padding:"24px"},children:"No attested systems yet."})]}),I.length>0&&e.jsxs(Y,{accent:"amber",children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.accentAmber,marginBottom:"20px"},children:"CAT-72 Testing In Progress"}),e.jsx("div",{className:"space-y-4",children:I.map(R=>e.jsx("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",color:n.textPrimary,marginBottom:"4px"},children:R.system_name}),e.jsx("p",{style:{fontSize:"12px",color:n.textSecondary},children:R.organization_name})]}),e.jsx("span",{style:{padding:"4px 12px",background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",borderRadius:"20px",fontSize:"10px",color:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase"},children:R.cat72_started?"In Progress":"Ready"})]})},R.id))})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"API Key Management"}),e.jsx(io,{})]})]}),b==="configure"&&e.jsx(e.Fragment,{children:u?e.jsxs(Y,{glow:!0,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Configuring Boundaries"}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:200,margin:"0 0 4px 0"},children:u.system_name}),e.jsxs("p",{style:{color:n.textSecondary},children:[u.organization_name,"  ",u.certificate_number]})]}),e.jsx("button",{onClick:()=>x(null),style:{padding:"8px 16px",background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textTertiary,cursor:"pointer",fontSize:"11px"},children:" Back to List"})]}),e.jsx(fl,{certificateNumber:u.certificate_number,initialBoundaries:u.envelope_definition||{},onSave:async R=>{try{await O.put(`/api/envelo/boundaries/config/boundaries?certificate_number=${u.certificate_number}`,R),toast.show("Boundaries saved","success")}catch(L){toast.show("Failed to save: "+L.message,"error")}}})]}):e.jsx(Y,{children:e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx(tt,{size:48,style:{color:n.textTertiary,margin:"0 auto 16px"}}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:200,marginBottom:"8px"},children:"Select a System to Configure"}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"24px"},children:"Choose a system from the Customer Systems tab to configure its boundaries."}),e.jsx("button",{onClick:()=>f("customers"),style:{padding:"12px 24px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,borderRadius:"8px",color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"View Customer Systems"})]})})})]})}function hl(){const[t,r]=y.useState(null),[a,o]=y.useState([]),[s,i]=y.useState([]),[l,c]=y.useState([]),[d,p]=y.useState(!0),[m,g]=y.useState(null),{user:v}=ce();y.useEffect(()=>{(async()=>{try{const[N,I,z]=await Promise.all([O.get("/api/certificates/").catch(()=>({data:[]})),O.get("/api/applications/").catch(()=>({data:[]})),O.get("/api/envelo/sessions").catch(()=>({data:{sessions:[]}}))]);o(N.data||[]),i(I.data||[]),c(z.data.sessions||[])}catch(N){console.error(N)}p(!1)})()},[]);const h=Array.isArray(a)&&a.some(C=>C.state==="conformant"||C.state==="active"||C.state==="issued"),u=Array.isArray(s)&&s.some(C=>C.state==="approved"||C.state==="testing"),x=h||u,b=u&&!h,f=(Array.isArray(a)?a:[]).filter(C=>C.state==="conformant"||C.state==="active"||C.state==="issued"),S=(Array.isArray(s)?s:[]).filter(C=>C.state==="approved"||C.state==="testing"),j=(C,N)=>'curl -sSL "'+Ue+"/api/deploy/"+C+"?key="+N+'" | bash',T=(C,N)=>{navigator.clipboard.writeText(C),g(N),setTimeout(()=>g(null),2e3)};return d?e.jsx("div",{style:{color:n.textTertiary,padding:"40px",textAlign:"center"},children:e.jsx(Me,{size:24,style:{animation:"spin 1s linear infinite"}})}):x?e.jsxs("div",{className:"space-y-6",children:[e.jsx(De,{label:"ENVELO Agent",title:"Deploy & Monitor",description:"One command deploys everything automatically"}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"linear-gradient(135deg, #5B4B8A 0%, #9d8ccf 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Oe,{size:20,color:"#fff"})}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"2px"},children:"One-Command Deploy"}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",margin:0},children:"Open a terminal. Paste the command. Press Enter. Done."})]})]}),[...S,...f].map((C,N)=>{const I=C.application_number||C.certificate_number,z=C.system_name||"System",_="deploy-"+N,R=t||"YOUR_API_KEY",L=t&&t!=="YOUR_API_KEY",B=j(I,R);return e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"8px"},children:[z,"  ",I]}),e.jsxs("div",{style:{position:"relative",background:"rgba(0,0,0,0.4)",borderRadius:"12px",border:"1px solid "+(L?n.purpleBright:n.borderGlass),overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid "+n.borderGlass},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#ff5f57"}}),e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#febc2e"}}),e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#28c840"}})]}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:"Terminal"}),e.jsx("button",{onClick:()=>T(B,_),disabled:!L,style:{padding:"4px 12px",background:L?n.purplePrimary:"rgba(255,255,255,0.05)",border:"1px solid "+(L?n.purpleBright:n.borderGlass),borderRadius:"6px",color:L?"#fff":n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:L?"pointer":"not-allowed"},children:m===_?"Copied!":"Copy"})]}),e.jsxs("div",{style:{padding:"16px 20px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px",lineHeight:"1.6",overflowX:"auto",whiteSpace:"nowrap"},children:[e.jsx("span",{style:{color:n.accentGreen},children:"$"})," ",e.jsx("span",{style:{color:n.textPrimary},children:'curl -sSL "'}),e.jsx("span",{style:{color:n.purpleBright},children:Ue+"/api/deploy/"+I+"?key="}),e.jsx("span",{style:{color:L?n.accentGreen:n.accentAmber},children:R}),e.jsx("span",{style:{color:n.textPrimary},children:'" | bash'})]})]}),!L&&e.jsxs("p",{style:{color:n.accentAmber,fontSize:"12px",marginTop:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ne,{size:12})," Generate an API key below first"]})]},N)}),e.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"rgba(91,75,138,0.08)",borderRadius:"10px",border:"1px solid "+n.borderGlass},children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"What this command does"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[{num:"1",label:"Installs agent",desc:"Downloads ENVELO"},{num:"2",label:"Writes config",desc:"Your approved boundaries"},{num:"3",label:"Tests everything",desc:"Network, sources, clock"},{num:"4",label:"Activates",desc:"Ready for CAT-72"}].map(C=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:n.purplePrimary,border:"1px solid "+n.purpleBright,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 8px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:"bold",color:"#fff"},children:C.num}),e.jsx("p",{style:{fontSize:"12px",fontWeight:500,color:n.textPrimary,marginBottom:"2px"},children:C.label}),e.jsx("p",{style:{fontSize:"11px",color:n.textTertiary},children:C.desc})]},C.num))})]})]}),b&&e.jsxs(Y,{accent:"amber",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:n.accentAmber,animation:"pulse 2s infinite"}}),e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.accentAmber,margin:0},children:"CAT-72 Testing Mode"})]}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:"Deploy the ENVELO Agent using the command above, then start your 72-hour test from the CAT-72 tab."}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"12px"},children:"The deploy command configures everything automatically  your approved boundaries are baked in."})]}),f.length>0&&f.map(C=>{const N=l.find(z=>z.certificate_id===C.certificate_number),I=N&&N.status==="active";return e.jsxs(Y,{glow:I,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:500,color:n.textPrimary,margin:"0 0 8px 0"},children:C.system_name||"Unnamed System"}),e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px",color:n.purpleBright,marginBottom:"4px"},children:C.certificate_number}),e.jsx("p",{style:{fontSize:"12px",color:n.textTertiary},children:"Attested "+(C.issued_at?new Date(C.issued_at).toLocaleDateString():"N/A")+" | Expires "+(C.expires_at?new Date(C.expires_at).toLocaleDateString():"N/A")})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:I?"rgba(92,214,133,0.15)":"rgba(255,255,255,0.05)",borderRadius:"20px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:I?n.accentGreen:n.textTertiary,boxShadow:I?"0 0 8px "+n.accentGreen:"none"}}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",textTransform:"uppercase",color:I?n.accentGreen:n.textTertiary},children:I?"ENVELO Active":"Offline"})]})]}),N&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid "+n.borderGlass},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:n.accentGreen},children:N.uptime||"0h"}),e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Uptime"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:n.purpleBright},children:N.record_count||0}),e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Telemetry"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:(N.violations||0)>0?n.accentRed:n.accentGreen},children:N.violations||0}),e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Violations"})]})]})]},C.id)}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Your API Key"}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"16px",fontSize:"14px"},children:"Generate a key to activate the deploy command above."}),e.jsx(io,{onKeyGenerated:r})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Need Help?"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px"},children:[e.jsx("p",{style:{fontWeight:500,color:n.textPrimary,marginBottom:"4px",fontSize:"14px"},children:"Check Status"}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.textSecondary,padding:"8px",background:"rgba(0,0,0,0.3)",borderRadius:"6px",marginTop:"8px"},children:"$ envelo status"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px"},children:[e.jsx("p",{style:{fontWeight:500,color:n.textPrimary,marginBottom:"4px",fontSize:"14px"},children:"Get Support"}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:n.textSecondary,padding:"8px",background:"rgba(0,0,0,0.3)",borderRadius:"6px",marginTop:"8px"},children:"$ envelo diagnose"})]})]}),e.jsxs("p",{style:{color:n.textTertiary,fontSize:"12px",marginTop:"12px"},children:["Run ",e.jsx("code",{style:{color:n.purpleBright},children:"envelo diagnose"})," and email the output to ",e.jsx("a",{href:"mailto:conformance@sentinelauthority.org",style:{color:n.purpleBright,textDecoration:"none"},children:"conformance@sentinelauthority.org"})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(De,{label:"ENVELO Agent",title:"Application Required"}),e.jsx(Y,{children:e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx(Ze,{size:48,style:{color:n.textTertiary,margin:"0 auto 16px"}}),e.jsx("h2",{style:{fontFamily:"'Source Serif 4', serif",fontSize:"24px",fontWeight:200,marginBottom:"12px"},children:"Approval Required"}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"24px"},children:"Your application must be approved before you can access the ENVELO Agent."}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px"},children:"Once approved, you can deploy the agent with a single command."})]})})]})}function yl(){const{user:t}=ce();return(t==null?void 0:t.role)==="admin"?e.jsx(gl,{}):e.jsx(hl,{})}function bl(){var L;const[t,r]=y.useState(null),[a,o]=y.useState([]),[s,i]=y.useState(null),[l,c]=y.useState([]),[d,p]=y.useState(!0),[m,g]=y.useState(!0),[v,h]=y.useState(!1),[u,x]=y.useState(""),[b,f]=y.useState(!1),[S,j]=y.useState(!0),{user:T}=ce(),C=async()=>{try{const[B,P]=await Promise.all([O.get("/api/envelo/monitoring/overview"),O.get("/api/envelo/monitoring/alerts")]);r(B.data),o(P.data.alerts||[])}catch(B){console.error("Failed to fetch monitoring data:",B)}finally{p(!1)}};y.useEffect(()=>{if(C(),m){const B=setInterval(C,1e4);return()=>clearInterval(B)}},[m]);const N=async B=>{try{const P=await O.get(`/api/envelo/monitoring/session/${B}/timeline?hours=24`);c(P.data.timeline||[])}catch(P){console.error("Failed to fetch timeline:",P)}};y.useEffect(()=>{s&&N(s.id)},[s]);const I=()=>{const B=R.map(W=>{var G;const te=(W.pass_count||0)+(W.block_count||0),X=te>0?(W.pass_count/te*100).toFixed(2):"0.00";return{status:W.is_online?"Online":W.status==="ended"?"Ended":"Offline",organization:W.organization_name||"",system_name:W.system_name||"",certificate:W.certificate_id||"",session_id:W.session_id||"",started_at:W.started_at||"",ended_at:W.ended_at||"",uptime_hours:((G=W.uptime_hours)==null?void 0:G.toFixed(2))||"0",pass_count:W.pass_count||0,block_count:W.block_count||0,total_actions:te,pass_rate:X+"%",agent_version:W.agent_version||"",last_activity:W.last_activity||""}});if(B.length===0){toast.show("No sessions to export","warning");return}const P=Object.keys(B[0]),A=[P.join(","),...B.map(W=>P.map(te=>{const X=String(W[te]).replace(/"/g,'""');return X.includes(",")||X.includes('"')||X.includes(`
`)?`"${X}"`:X}).join(`
,`))].join(`
`),$=new Blob([A],{type:"text/csv;charset=utf-8;"}),F=URL.createObjectURL($),k=document.createElement("a");k.href=F,k.download=`envelo-sessions-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(F)};if(d)return e.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[e.jsx(Me,{size:24,style:{animation:"spin 1s linear infinite",color:n.purpleBright}}),e.jsx("p",{style:{marginTop:"16px",color:n.textSecondary},children:"Loading monitoring data..."})]});const z=(t==null?void 0:t.summary)||{},_=(t==null?void 0:t.sessions)||[],R=_.filter(B=>!(u&&B.organization_name!==u||b&&!B.is_online||S&&(B.status==="ended"||B.status==="completed"||B.status==="disconnected")));return e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"sa-page-title",style:{fontFamily:"'Source Serif 4', serif",fontSize:"28px",fontWeight:300,margin:0},children:"System Monitoring"}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"4px",fontSize:"14px"},children:"Real-time ENVELO agent status and telemetry"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:n.textSecondary,fontSize:"13px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m,onChange:B=>g(B.target.checked),style:{accentColor:n.purpleBright}}),"Auto-refresh"]}),e.jsxs("button",{onClick:async()=>{h(!0),await C(),setTimeout(()=>h(!1),600)},style:{background:n.bgPanel,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 16px",color:n.textPrimary,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Me,{size:14,style:v?{animation:"spin 1s linear infinite"}:{}})," ",v?"Refreshing...":"Refresh"]}),e.jsxs("button",{onClick:I,style:{background:n.bgPanel,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 16px",color:n.textPrimary,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"0.5px"},children:[e.jsx(Oe,{size:14})," Export CSV"]})]})]}),a.length>0&&e.jsxs("div",{style:{background:"rgba(214, 92, 92, 0.1)",border:"1px solid rgba(214, 92, 92, 0.3)",borderRadius:"12px",padding:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Ne,{size:18,style:{color:"#D65C5C"}}),e.jsxs("span",{style:{fontWeight:500,color:"#D65C5C"},children:[a.length," Active Alert",a.length>1?"s":""]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.map((B,P)=>{var A;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"10px 14px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:B.severity==="critical"?"#D65C5C":"#D6A05C",marginRight:"12px"},children:B.severity}),e.jsx("span",{style:{color:n.textPrimary},children:B.message})]}),e.jsxs("span",{style:{color:n.textTertiary,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace"},children:[(A=B.session_id)==null?void 0:A.slice(0,8),"..."]})]},P)})})]}),(()=>{var te,X,G;const B=_.filter(Q=>Q.is_online).length,P=_.filter(Q=>!Q.is_online&&Q.status!=="ended").length,A=B+P,$=A>0?B/A*100:0,F={background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",padding:"20px"},k={fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"2px",color:n.textTertiary,marginBottom:"8px"},W={fontSize:"12px",color:n.textSecondary,marginTop:"4px"};return e.jsxs("div",{style:{marginBottom:"32px"},children:[A>0&&e.jsxs("div",{style:{marginBottom:"20px",padding:"16px 20px",...F},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("div",{style:k,children:"Fleet Health"}),e.jsxs("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px",color:$>=90?n.accentGreen:$>=70?"#D6A05C":"#D65C5C",fontWeight:500},children:[$.toFixed(0),"% Online"]})]}),e.jsxs("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(255,255,255,0.05)",overflow:"hidden",display:"flex"},children:[B>0&&e.jsx("div",{style:{width:B/A*100+"%",background:n.accentGreen,borderRadius:"4px 0 0 4px",transition:"width 0.5s"}}),P>0&&e.jsx("div",{style:{width:P/A*100+"%",background:"#D65C5C",transition:"width 0.5s"}})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"8px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:n.accentGreen,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.accentGreen,display:"inline-block"}})," ",B," online"]}),e.jsxs("span",{style:{fontSize:"11px",color:"#D65C5C",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#D65C5C",display:"inline-block"}})," ",P," offline"]}),e.jsxs("span",{style:{fontSize:"11px",color:n.textTertiary,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.textTertiary,display:"inline-block"}})," ",z.ended||0," ended"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:F,children:[e.jsx("div",{style:k,children:"Active Sessions"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:n.accentGreen},children:z.active||0}),e.jsxs("div",{style:W,children:[z.offline||0," offline"]})]}),e.jsxs("div",{style:F,children:[e.jsx("div",{style:k,children:"Total Actions"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:n.textPrimary},children:(z.total_actions||0).toLocaleString()}),e.jsxs("div",{style:W,children:[((te=z.total_pass)==null?void 0:te.toLocaleString())||0," passed, ",((X=z.total_block)==null?void 0:X.toLocaleString())||0," blocked"]})]}),e.jsxs("div",{style:F,children:[e.jsx("div",{style:k,children:"Pass Rate"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:300,color:z.pass_rate>=99?n.accentGreen:z.pass_rate>=95?"#D6A05C":"#D65C5C"},children:[((G=z.pass_rate)==null?void 0:G.toFixed(1))||0,"%"]}),e.jsx("div",{style:W,children:"enforcement success"})]}),e.jsxs("div",{style:F,children:[e.jsx("div",{style:k,children:"Violations (24h)"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:(z.total_block||0)>0?"#D65C5C":n.accentGreen},children:(z.total_block||0).toLocaleString()}),e.jsxs("div",{style:W,children:[((z.total_block||0)/Math.max(z.total_actions||1,1)*100).toFixed(2),"% of actions"]})]}),e.jsxs("div",{style:F,children:[e.jsx("div",{style:k,children:"Total Sessions"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:n.textPrimary},children:z.total||0}),e.jsxs("div",{style:W,children:[z.ended||0," completed"]})]}),e.jsxs("div",{style:F,children:[e.jsx("div",{style:k,children:"Unique Systems"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:n.purpleBright},children:[...new Set(_.map(Q=>Q.certificate_id).filter(Boolean))].length}),e.jsxs("div",{style:W,children:[[...new Set(_.map(Q=>Q.organization_name).filter(Boolean))].length," organizations"]})]})]})]})})(),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${n.borderSubtle}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{margin:0,fontSize:"14px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"2px",color:n.textTertiary},children:"Agent Sessions"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("select",{value:u,onChange:B=>x(B.target.value),style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",padding:"6px 10px",color:n.textPrimary,fontSize:"12px"},children:[e.jsx("option",{value:"",children:"All Customers"}),[...new Set(_.map(B=>B.organization_name).filter(Boolean))].map(B=>e.jsx("option",{value:B,children:B},B))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:n.textSecondary,fontSize:"12px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:S,onChange:B=>j(B.target.checked),style:{accentColor:n.purpleBright}}),"Hide ended"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:n.textSecondary,fontSize:"12px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:b,onChange:B=>f(B.target.checked),style:{accentColor:n.purpleBright}}),"Online only"]})]})]}),R.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textSecondary},children:"No ENVELO sessions found. Deploy an agent to begin monitoring."}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(0,0,0,0.2)"},children:(()=>{const B={padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},P={...B,textAlign:"right"};return e.jsxs(e.Fragment,{children:[e.jsx("th",{style:B,children:"Status"}),e.jsx("th",{style:B,children:"Organization"}),e.jsx("th",{style:B,children:"System / Certificate"}),e.jsx("th",{style:B,children:"Session"}),e.jsx("th",{style:B,children:"Uptime"}),e.jsx("th",{style:P,children:"Actions"}),e.jsx("th",{style:P,children:"Pass Rate"}),e.jsx("th",{style:B,children:"Last Activity"})]})})()})}),e.jsx("tbody",{children:R.map(B=>{var F,k;const P=B.pass_count+B.block_count,A=P>0?B.pass_count/P*100:0,$=(s==null?void 0:s.id)===B.id;return e.jsxs("tr",{onClick:()=>i($?null:B),style:{borderBottom:`1px solid ${n.borderSubtle}`,cursor:"pointer",background:$?"rgba(91, 75, 138, 0.15)":"transparent",transition:"background 0.15s"},onMouseEnter:W=>{$||(W.currentTarget.style.background="rgba(255,255,255,0.03)")},onMouseLeave:W=>{$||(W.currentTarget.style.background="transparent")},children:[e.jsx("td",{style:{padding:"14px 16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:B.is_online?n.accentGreen:B.status==="ended"?n.textTertiary:"#D65C5C",boxShadow:B.is_online?`0 0 8px ${n.accentGreen}`:"none"}}),e.jsx("span",{style:{fontSize:"11px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:B.is_online?n.accentGreen:B.status==="ended"?n.textTertiary:"#D65C5C"},children:B.is_online?"Online":B.status==="ended"?"Ended":"Offline"})]})}),e.jsx("td",{style:{padding:"14px 16px"},children:e.jsx("div",{style:{fontSize:"13px",color:n.textPrimary,fontWeight:500},children:B.organization_name||"Unknown"})}),e.jsxs("td",{style:{padding:"14px 16px"},children:[e.jsx("div",{style:{fontSize:"13px",color:n.textPrimary},children:B.system_name||"-"}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:B.certificate_id||"-"})]}),e.jsxs("td",{style:{padding:"14px 16px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[(F=B.session_id)==null?void 0:F.slice(0,12),"..."]}),e.jsxs("td",{style:{padding:"14px 16px",color:n.textSecondary,fontSize:"13px"},children:[(k=B.uptime_hours)==null?void 0:k.toFixed(1),"h"]}),e.jsx("td",{style:{padding:"14px 16px",textAlign:"right",color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px"},children:P.toLocaleString()}),e.jsx("td",{style:{padding:"14px 16px",textAlign:"right"},children:e.jsxs("span",{style:{color:A>=99?n.accentGreen:A>=95?"#D6A05C":"#D65C5C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px"},children:[A.toFixed(1),"%"]})}),e.jsx("td",{style:{padding:"14px 16px",color:n.textTertiary,fontSize:"12px"},children:B.last_activity?new Date(B.last_activity).toLocaleString():"-"})]},B.id)})})]})})]}),s&&e.jsxs("div",{style:{marginTop:"24px",background:n.bgPanel,border:`1px solid ${n.borderGlass}`,borderRadius:"12px",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${n.borderSubtle}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"14px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"2px",color:n.textTertiary},children:["Session Detail: ",s.session_id]}),e.jsx("button",{onClick:()=>i(null),style:{background:"none",border:"none",color:n.textTertiary,cursor:"pointer",fontSize:"18px"},children:""})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:400,color:n.textPrimary},children:s.organization_name||"Unknown Organization"}),e.jsxs("p",{style:{margin:0,fontSize:"13px",color:n.textSecondary},children:[s.system_name||"Unknown System","  ",s.certificate_id||"No certificate"]}),e.jsxs("p",{style:{margin:"4px 0 0",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:["Agent v",s.agent_version||"1.0.0","  Session ",s.session_id]})]}),s.is_online&&e.jsx("button",{onClick:async()=>{if(await confirm({title:"End Session",message:"Force-end this session?",danger:!0}))try{await O.post("/api/envelo/sessions/"+s.session_id+"/end",{ended_at:new Date().toISOString(),final_stats:{pass_count:s.pass_count,block_count:s.block_count}}),i(null),C()}catch(B){toast.show("Failed: "+B.message,"error")}},style:{padding:"8px 16px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",borderRadius:"8px",color:"#D65C5C",cursor:"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Force End Session"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Started"}),e.jsx("div",{style:{color:n.textPrimary,fontSize:"13px"},children:s.started_at?new Date(s.started_at).toLocaleString():"-"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Uptime"}),e.jsxs("div",{style:{color:n.textPrimary,fontFamily:"'IBM Plex Mono', monospace",fontSize:"18px"},children:[((L=s.uptime_hours)==null?void 0:L.toFixed(1))||"0","h"]})]}),e.jsxs("div",{style:{background:"rgba(92,214,133,0.08)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Passed"}),e.jsx("div",{style:{color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"18px"},children:(s.pass_count||0).toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(214,92,92,0.08)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Blocked"}),e.jsx("div",{style:{color:"#D65C5C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"18px"},children:(s.block_count||0).toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Pass Rate"}),(()=>{const B=(s.pass_count||0)+(s.block_count||0),P=B>0?s.pass_count/B*100:0;return e.jsxs("div",{style:{color:P>=99?n.accentGreen:P>=95?"#D6A05C":"#D65C5C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"18px"},children:[P.toFixed(1),"%"]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Certificate"}),e.jsx("div",{style:{color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"},children:s.certificate_id||"-"})]})]}),(()=>{const B=(s.pass_count||0)+(s.block_count||0);if(B===0)return null;const P=s.pass_count/B*100;return e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Enforcement Distribution"}),e.jsxs("div",{style:{height:"12px",borderRadius:"6px",background:"rgba(255,255,255,0.05)",overflow:"hidden",display:"flex"},children:[e.jsx("div",{style:{width:P+"%",background:"linear-gradient(90deg, "+n.accentGreen+", #4BC87A)",transition:"width 0.5s"}}),e.jsx("div",{style:{width:100-P+"%",background:"#D65C5C",transition:"width 0.5s"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"11px"},children:[e.jsxs("span",{style:{color:n.accentGreen},children:["Pass: ",P.toFixed(1),"%"]}),e.jsxs("span",{style:{color:"#D65C5C"},children:["Block: ",(100-P).toFixed(1),"%"]})]})]})})(),l.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"12px"},children:"24-Hour Activity"}),e.jsx("div",{style:{display:"flex",gap:"2px",height:"60px",alignItems:"flex-end"},children:l.map((B,P)=>{const A=Math.max(...l.map(k=>k.total),1),$=B.total/A*100,F=B.total>0?B.pass/B.total:1;return e.jsx("div",{style:{flex:1,height:`${Math.max($,2)}%`,background:F>=.99?n.accentGreen:F>=.95?"#D6A05C":"#D65C5C",borderRadius:"2px 2px 0 0",opacity:.8},title:`${new Date(B.hour).toLocaleTimeString()}: ${B.total} actions (${B.pass} pass, ${B.block} block)`},P)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"10px",color:n.textTertiary},children:[e.jsx("span",{children:"24h ago"}),e.jsx("span",{children:"Now"})]})]})]})]})]})}function jl(){var L,B;const t=Rt(),[r,a]=y.useState([]),[o,s]=y.useState(!0),[i,l]=y.useState(""),[c,d]=y.useState(!1),[p,m]=y.useState(!1),[g,v]=y.useState(null),[h,u]=y.useState({email:"",full_name:"",company:"",role:"applicant"}),[x,b]=y.useState(!1);y.useEffect(()=>{f()},[]);const f=async()=>{try{const P=await O.get("/api/users/");a(P.data||[])}catch(P){console.log("Users API not available:",P),a([])}s(!1)},S=r.filter(P=>{var A,$,F;return((A=P.email)==null?void 0:A.toLowerCase().includes(i.toLowerCase()))||(($=P.full_name)==null?void 0:$.toLowerCase().includes(i.toLowerCase()))||((F=P.company)==null?void 0:F.toLowerCase().includes(i.toLowerCase()))}),j={total:r.length,admins:r.filter(P=>P.role==="admin").length,applicants:r.filter(P=>P.role==="applicant").length,pending:r.filter(P=>P.role==="pending").length,inactive:r.filter(P=>P.is_active===!1).length},T=async()=>{var P,A;if(!h.email||!h.full_name){toast.show("Email and full name are required","warning");return}b(!0);try{const $=Math.random().toString(36).slice(-8)+"A1!";await O.post("/api/users/",{...h,password:$}),toast.show("User created  share credentials securely","success"),d(!1),u({email:"",full_name:"",company:"",role:"applicant"}),f()}catch($){toast.show("Failed to create user: "+(((A=(P=$.response)==null?void 0:P.data)==null?void 0:A.detail)||$.message),"error")}b(!1)},C=async(P,A)=>{var $,F;if(await t({title:"Change Role",message:"Change user role to "+A.toUpperCase()+"?"}))try{await O.patch("/api/users/"+P,{role:A}),f(),m(!1)}catch(k){toast.show("Failed to update role: "+(((F=($=k.response)==null?void 0:$.data)==null?void 0:F.detail)||k.message),"error")}},N=async(P,A)=>{var F,k;const $=A?"deactivate":"activate";if(await t({title:$.charAt(0).toUpperCase()+$.slice(1),message:$.charAt(0).toUpperCase()+$.slice(1)+" this user?"}))try{await O.patch("/api/users/"+P,{is_active:!A}),f(),m(!1)}catch(W){toast.show("Failed to update user: "+(((k=(F=W.response)==null?void 0:F.data)==null?void 0:k.detail)||W.message),"error")}},I=async(P,A)=>{var $,F;if(await t({title:"Reset Password",message:"Reset password for "+A+"?"}))try{const k=Math.random().toString(36).slice(-8)+"A1!";await O.post("/api/users/"+P+"/reset-password"),toast.show("Password reset  share credentials securely","success")}catch(k){toast.show("Failed to reset password: "+(((F=($=k.response)==null?void 0:$.data)==null?void 0:F.detail)||k.message),"error")}},z=async(P,A)=>{var $,F;if(await t({title:"Approve User",message:"Approve "+A+" as an applicant?"}))try{await O.post("/api/users/"+P+"/approve"),f(),m(!1)}catch(k){toast.show("Failed to approve: "+(((F=($=k.response)==null?void 0:$.data)==null?void 0:F.detail)||k.message),"error")}},_=async(P,A)=>{var $,F;if(await t({title:"Reject User",message:"Reject "+A+"? Their account will be deactivated.",danger:!0}))try{await O.post("/api/users/"+P+"/reject"),f(),m(!1)}catch(k){toast.show("Failed to reject: "+(((F=($=k.response)==null?void 0:$.data)==null?void 0:F.detail)||k.message),"error")}},R=async(P,A)=>{var $,F;if(await t({title:"Delete User",message:"DELETE "+A+"? This cannot be undone.",danger:!0,confirmLabel:"Delete"}))try{await O.delete("/api/users/"+P),f(),m(!1)}catch(k){toast.show("Failed to delete user: "+(((F=($=k.response)==null?void 0:$.data)==null?void 0:F.detail)||k.message),"error")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(De,{label:"Administration",title:"User Management",description:"Manage admin and applicant accounts",action:e.jsxs("button",{onClick:()=>d(!0),className:"sexy-btn px-4 py-2 rounded-lg flex items-center gap-2",style:{background:n.purplePrimary,border:"1px solid "+n.purpleBright,color:"#fff"},children:[e.jsx(bt,{className:"w-4 h-4"})," Invite User"]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(pe,{label:"Total Users",value:j.total,color:n.textPrimary}),e.jsx(pe,{label:"Admins",value:j.admins,color:n.purpleBright}),e.jsx(pe,{label:"Applicants",value:j.applicants,color:n.accentGreen}),e.jsx(pe,{label:"Pending",value:j.pending,color:n.accentAmber}),e.jsx(pe,{label:"Inactive",value:j.inactive,color:n.accentRed})]}),e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(et,{className:"w-5 h-5",style:{color:n.textTertiary}}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or company...",value:i,onChange:P=>l(P.target.value),className:"sexy-input flex-1 px-4 py-3 rounded-lg",style:{background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,color:n.textPrimary,outline:"none"}})]})}),e.jsx(Y,{children:o?e.jsx("div",{style:{color:n.textTertiary,textAlign:"center",padding:"40px"},children:"Loading users..."}):S.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx(nr,{className:"w-12 h-12 mx-auto mb-4",style:{color:n.textTertiary}}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:"No users found"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"14px"},children:r.length===0?"The /api/users/ endpoint may not be configured.":"Try adjusting your search."})]}):e.jsx("div",{className:"space-y-2",children:S.map(P=>{var A,$;return e.jsxs("div",{onClick:()=>{v(P),m(!0)},className:"flex items-center gap-4 p-4 rounded-lg cursor-pointer transition-all",style:{background:"rgba(255,255,255,0.02)",border:"1px solid "+n.borderGlass},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{background:n.purplePrimary,color:"#fff",fontWeight:"400"},children:((A=P.full_name)==null?void 0:A[0])||(($=P.email)==null?void 0:$[0])||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{style:{color:n.textPrimary,fontWeight:"500"},children:P.full_name||"No Name"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px"},children:P.email}),P.company&&e.jsx("p",{style:{color:n.textTertiary,fontSize:"12px"},children:P.company})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{background:P.role==="admin"?"rgba(157,140,207,0.2)":P.role==="pending"?"rgba(245,158,11,0.15)":"rgba(255,255,255,0.1)",color:P.role==="admin"?n.purpleBright:P.role==="pending"?"#f59e0b":n.textTertiary,fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase"},children:P.role}),P.role==="pending"&&e.jsxs("div",{className:"flex gap-1",onClick:F=>F.stopPropagation(),children:[e.jsx("button",{onClick:()=>z(P.id,P.email),className:"px-2 py-1 rounded text-xs",style:{background:"rgba(34,197,94,0.15)",color:"#22c55e",border:"1px solid rgba(34,197,94,0.3)",cursor:"pointer"},children:"Approve"}),e.jsx("button",{onClick:()=>_(P.id,P.email),className:"px-2 py-1 rounded text-xs",style:{background:"rgba(214,92,92,0.15)",color:"#d65c5c",border:"1px solid rgba(214,92,92,0.3)",cursor:"pointer"},children:"Reject"})]}),P.is_active===!1&&e.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{background:"rgba(214,92,92,0.15)",color:n.accentRed},children:"Inactive"})]})]},P.id||P.email)})})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"rgba(0,0,0,0.7)"},children:e.jsxs("div",{className:"w-full max-w-md mx-4 p-6 rounded-xl",style:{background:n.bgDeep,border:"1px solid "+n.borderGlass},children:[e.jsx("h2",{style:{color:n.textPrimary,fontSize:"20px",fontWeight:"400",marginBottom:"24px",textAlign:"center"},children:"Invite New User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:n.textSecondary,fontSize:"12px",display:"block",marginBottom:"6px"},children:"Email *"}),e.jsx("input",{type:"email",value:h.email,onChange:P=>u({...h,email:P.target.value}),placeholder:"user@company.com",className:"sexy-input w-full px-4 py-3 rounded-lg",style:{background:"rgba(255,255,255,0.05)",border:"1px solid "+n.borderGlass,color:n.textPrimary,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:n.textSecondary,fontSize:"12px",display:"block",marginBottom:"6px"},children:"Full Name *"}),e.jsx("input",{type:"text",value:h.full_name,onChange:P=>u({...h,full_name:P.target.value}),placeholder:"John Smith",className:"sexy-input w-full px-4 py-3 rounded-lg",style:{background:"rgba(255,255,255,0.05)",border:"1px solid "+n.borderGlass,color:n.textPrimary,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:n.textSecondary,fontSize:"12px",display:"block",marginBottom:"6px"},children:"Company"}),e.jsx("input",{type:"text",value:h.company,onChange:P=>u({...h,company:P.target.value}),placeholder:"Company name",className:"sexy-input w-full px-4 py-3 rounded-lg",style:{background:"rgba(255,255,255,0.05)",border:"1px solid "+n.borderGlass,color:n.textPrimary,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:n.textSecondary,fontSize:"12px",display:"block",marginBottom:"6px"},children:"Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>u({...h,role:"applicant"}),className:"flex-1 px-4 py-3 rounded-lg",style:{background:h.role==="applicant"?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(h.role==="applicant"?n.purpleBright:n.borderGlass),color:h.role==="applicant"?n.purpleBright:n.textTertiary},children:"Applicant"}),e.jsx("button",{onClick:()=>u({...h,role:"admin"}),className:"flex-1 px-4 py-3 rounded-lg",style:{background:h.role==="admin"?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(h.role==="admin"?n.purpleBright:n.borderGlass),color:h.role==="admin"?n.purpleBright:n.textTertiary},children:"Admin"})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("button",{onClick:T,disabled:x,className:"sexy-btn w-full px-4 py-3 rounded-lg",style:{background:n.purplePrimary,border:"1px solid "+n.purpleBright,color:"#fff",opacity:x?.7:1},children:x?"Creating...":"Create Account"}),e.jsx("button",{onClick:()=>{d(!1),u({email:"",full_name:"",company:"",role:"applicant"})},className:"w-full px-4 py-3 rounded-lg",style:{background:"transparent",border:"none",color:n.textTertiary},children:"Cancel"})]})]})}),p&&g&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"rgba(0,0,0,0.7)"},children:e.jsxs("div",{className:"w-full max-w-md mx-4 p-6 rounded-xl",style:{background:n.bgDeep,border:"1px solid "+n.borderGlass},children:[e.jsx("h2",{style:{color:n.textPrimary,fontSize:"20px",fontWeight:"400",marginBottom:"24px",textAlign:"center"},children:"Manage User"}),e.jsxs("div",{className:"text-center mb-6 p-4 rounded-lg",style:{background:"rgba(255,255,255,0.03)"},children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",style:{background:n.purplePrimary,color:"#fff",fontSize:"24px",fontWeight:"400"},children:((L=g.full_name)==null?void 0:L[0])||((B=g.email)==null?void 0:B[0])||"?"}),e.jsx("p",{style:{color:n.textPrimary,fontSize:"18px",fontWeight:"500"},children:g.full_name||"No Name"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"14px"},children:g.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{style:{color:n.textTertiary,fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",display:"block",marginBottom:"8px"},children:"Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>C(g.id,"applicant"),className:"flex-1 px-4 py-3 rounded-lg",style:{background:g.role==="applicant"?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(g.role==="applicant"?n.purpleBright:n.borderGlass),color:g.role==="applicant"?n.purpleBright:n.textTertiary},children:"Applicant"}),e.jsx("button",{onClick:()=>C(g.id,"admin"),className:"flex-1 px-4 py-3 rounded-lg",style:{background:g.role==="admin"?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(g.role==="admin"?n.purpleBright:n.borderGlass),color:g.role==="admin"?n.purpleBright:n.textTertiary},children:"Admin"})]})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("label",{style:{color:n.textTertiary,fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",display:"block",marginBottom:"8px"},children:"Actions"}),e.jsxs("button",{onClick:()=>I(g.id,g.email),className:"w-full px-4 py-3 rounded-lg flex items-center gap-3",style:{background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,color:n.textSecondary,textAlign:"left"},children:[e.jsx(Me,{className:"w-4 h-4",style:{color:n.purpleBright}}),"Reset Password"]}),e.jsx("button",{onClick:()=>N(g.id,g.is_active!==!1),className:"w-full px-4 py-3 rounded-lg flex items-center gap-3",style:{background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,color:g.is_active===!1?n.accentGreen:n.accentRed,textAlign:"left"},children:g.is_active===!1?e.jsxs(e.Fragment,{children:[e.jsx(cn,{className:"w-4 h-4"})," Activate Account"]}):e.jsxs(e.Fragment,{children:[e.jsx(Yt,{className:"w-4 h-4"})," Deactivate Account"]})}),e.jsxs("button",{onClick:()=>R(g.id,g.email),className:"w-full px-4 py-3 rounded-lg flex items-center gap-3",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed,textAlign:"left"},children:[e.jsx(Yt,{className:"w-4 h-4"})," Delete User"]})]}),e.jsx("button",{onClick:()=>{m(!1),v(null)},className:"w-full px-4 py-3 rounded-lg",style:{background:"transparent",border:"none",color:n.textTertiary},children:"Close"})]})})]})}function Sl(){const t=zt(),[r,a]=y.useState([]),[o,s]=y.useState(0),[i,l]=y.useState(!0),[c,d]=y.useState(""),[p,m]=y.useState(""),[g,v]=y.useState(""),[h,u]=y.useState(0),[x,b]=y.useState(""),[f,S]=y.useState(""),[j,T]=y.useState(null),[C,N]=y.useState(!1),I=async()=>{N(!0);try{const k=await O.get("/api/audit/verify?limit=5000");T(k.data),t.show(k.data.integrity==="passed"?`Integrity verified  ${k.data.valid} entries valid`:`Integrity check FAILED  ${k.data.invalid} tampered entries`,k.data.integrity==="passed"?"success":"error")}catch{t.show("Verification failed","error")}N(!1)},[z,_]=y.useState([]),[R,L]=y.useState([]),B=50;y.useEffect(()=>{O.get("/api/audit/actions").then(k=>_(k.data.actions||[])).catch(()=>{}),O.get("/api/audit/resource-types").then(k=>L(k.data.resource_types||[])).catch(()=>{})},[]);const P=async()=>{l(!0);try{const k=new URLSearchParams;c&&k.set("action",c),p&&k.set("resource_type",p),g&&k.set("user_email",g),x&&k.set("date_from",new Date(x).toISOString()),f&&k.set("date_to",new Date(f+"T23:59:59").toISOString()),k.set("limit",B),k.set("offset",h*B);const W=await O.get(`/api/audit/logs?${k}`);a(W.data.logs||[]),s(W.data.total||0)}catch(k){console.error("Failed to load audit logs:",k)}l(!1)},A=async()=>{try{const k=new URLSearchParams;c&&k.set("action",c),p&&k.set("resource_type",p),g&&k.set("user_email",g),x&&k.set("date_from",new Date(x).toISOString()),f&&k.set("date_to",new Date(f+"T23:59:59").toISOString()),k.set("limit",1e4),k.set("offset",0);const te=(await O.get(`/api/audit/logs?${k}`)).data.logs||[];if(te.length===0){t.show("No entries to export","warning");return}const G=["Timestamp,User,Action,Resource Type,Resource ID,Details,Hash",...te.map(V=>{const J=V.details?Object.entries(V.details).map(([w,U])=>w+"="+U).join("; "):"";return[V.timestamp||"",V.user_email||"",V.action||"",V.resource_type||"",V.resource_id||"",'"'+J.replace(/"/g,'""')+'"',V.log_hash||""].join(",")})].join(`
`),Q=new Blob([G],{type:"text/csv"}),re=URL.createObjectURL(Q),E=document.createElement("a");E.href=re,E.download="audit-log-"+new Date().toISOString().split("T")[0]+".csv",E.click(),URL.revokeObjectURL(re),t.show("CSV exported ("+te.length+" entries)","success")}catch{t.show("Export failed","error")}};y.useEffect(()=>{P()},[c,p,g,x,f,h]);const $=k=>k!=null&&k.includes("issued")||k!=null&&k.includes("approved")||k!=null&&k.includes("conformant")?n.accentGreen:k!=null&&k.includes("suspended")||k!=null&&k.includes("revoked")||k!=null&&k.includes("failed")?"#D65C5C":k!=null&&k.includes("pending")||k!=null&&k.includes("under_review")?"#D6A05C":n.purpleBright,F=Math.ceil(o/B);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(De,{label:"Administration",title:"Activity History"}),e.jsx(Y,{children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("select",{value:c,onChange:k=>{d(k.target.value),u(0)},style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace",minWidth:"180px"},children:[e.jsx("option",{value:"",children:"All Actions"}),z.map(k=>e.jsx("option",{value:k,children:k},k))]}),e.jsxs("select",{value:p,onChange:k=>{m(k.target.value),u(0)},style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"All Resources"}),R.map(k=>e.jsx("option",{value:k,children:k},k))]}),e.jsx("input",{value:g,onChange:k=>{v(k.target.value),u(0)},placeholder:"Filter by email...",style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace",flex:1,minWidth:"150px"}}),e.jsx("input",{type:"date",value:x,onChange:k=>{b(k.target.value),u(0)},style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace",colorScheme:"dark"}}),e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"to"}),e.jsx("input",{type:"date",value:f,onChange:k=>{S(k.target.value),u(0)},style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"'IBM Plex Mono', monospace",colorScheme:"dark"}}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[o.toLocaleString()," entries"]}),e.jsx("button",{onClick:A,style:{padding:"6px 14px",background:"rgba(157,140,207,0.12)",border:"1px solid rgba(157,140,207,0.3)",borderRadius:"8px",color:n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:"Export CSV"}),e.jsx("button",{onClick:I,disabled:C,style:{padding:"6px 14px",background:j?j.integrity==="passed"?"rgba(92,214,133,0.12)":"rgba(214,92,92,0.12)":"rgba(157,140,207,0.12)",border:"1px solid "+(j?j.integrity==="passed"?"rgba(92,214,133,0.3)":"rgba(214,92,92,0.3)":"rgba(157,140,207,0.3)"),borderRadius:"8px",color:j?j.integrity==="passed"?n.accentGreen:"#D65C5C":n.purpleBright,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",cursor:C?"wait":"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:C?"Verifying...":j?j.integrity==="passed"?` ${j.valid} Verified`:` ${j.invalid} Invalid`:" Verify Chain"})]})}),e.jsxs(Y,{noPad:!0,children:[i?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textTertiary},children:"Loading..."}):r.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textTertiary},children:"No audit log entries found"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0,0,0,0.2)"},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Timestamp"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"User"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Action"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Resource"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Details"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Hash"})]})}),e.jsx("tbody",{children:r.map(k=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderSubtle}`},children:[e.jsx("td",{style:{padding:"12px 16px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textSecondary,whiteSpace:"nowrap"},children:k.timestamp?new Date(k.timestamp).toLocaleString():"-"}),e.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:n.textPrimary},children:k.user_email||"-"}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:$(k.action),letterSpacing:"0.5px"},children:k.action})}),e.jsxs("td",{style:{padding:"12px 16px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[k.resource_type,k.resource_id?` #${k.resource_id}`:""]}),e.jsx("td",{style:{padding:"12px 16px",fontSize:"12px",color:n.textTertiary,maxWidth:"300px"},children:k.details?Object.entries(k.details).filter(([W])=>W!=="old_state").map(([W,te])=>e.jsxs("span",{style:{marginRight:"12px"},children:[e.jsxs("span",{style:{color:n.textTertiary},children:[W.replace(/_/g," "),":"]})," ",e.jsx("span",{style:{color:n.textSecondary},children:String(te)})]},W)):"-"}),e.jsx("td",{style:{padding:"12px 16px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,letterSpacing:"0.5px"},children:k.log_hash||"-"})]},k.id))})]})}),F>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",padding:"16px",borderTop:`1px solid ${n.borderSubtle}`},children:[e.jsx("button",{onClick:()=>u(Math.max(0,h-1)),disabled:h===0,style:{padding:"6px 12px",background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:h===0?n.textTertiary:n.textPrimary,cursor:h===0?"not-allowed":"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px"},children:" Prev"}),e.jsxs("span",{style:{padding:"6px 12px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textSecondary},children:[h+1," / ",F]}),e.jsx("button",{onClick:()=>u(Math.min(F-1,h+1)),disabled:h>=F-1,style:{padding:"6px 12px",background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:h>=F-1?n.textTertiary:n.textPrimary,cursor:h>=F-1?"not-allowed":"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px"},children:"Next "})]})]})]})}function vl(){const{user:t}=ce(),[r,a]=y.useState([]),[o,s]=y.useState(0),[i,l]=y.useState(!0),[c,d]=y.useState(0),p=30,m=async()=>{l(!0);try{const h=new URLSearchParams;h.set("limit",p),h.set("offset",c*p);const u=await O.get(`/api/audit/my-logs?${h}`);a(u.data.logs||[]),s(u.data.total||0)}catch(h){console.error("Failed to load activity:",h)}l(!1)};y.useEffect(()=>{m()},[c]);const g=h=>h!=null&&h.includes("approved")||h!=null&&h.includes("issued")||h!=null&&h.includes("conformant")?{icon:"",color:n.accentGreen}:h!=null&&h.includes("failed")||h!=null&&h.includes("revoked")||h!=null&&h.includes("suspended")?{icon:"",color:"#D65C5C"}:h!=null&&h.includes("pending")||h!=null&&h.includes("under_review")?{icon:"",color:"#D6A05C"}:{icon:"",color:n.purpleBright},v=Math.ceil(o/p);return e.jsxs("div",{className:"space-y-6",style:{maxWidth:"800px"},children:[e.jsx(De,{label:"Account",title:"My Activity"}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary,letterSpacing:"1px",textTransform:"uppercase"},children:"Recent Actions"}),e.jsxs("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[o," total"]})]}),i?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textTertiary},children:"Loading..."}):r.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textTertiary},children:"No activity yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:r.map(h=>{var x;const u=g(h.action);return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px",borderRadius:"8px",background:"rgba(255,255,255,0.01)",borderBottom:`1px solid ${n.borderSubtle}`},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:`${u.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginTop:"2px"},children:e.jsx("span",{style:{color:u.color,fontSize:"13px",fontWeight:"bold"},children:u.icon})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",color:u.color,letterSpacing:"0.5px"},children:(x=h.action)==null?void 0:x.replace(/_/g," ")}),e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,whiteSpace:"nowrap"},children:h.timestamp?new Date(h.timestamp).toLocaleString():""})]}),e.jsxs("div",{style:{fontSize:"12px",color:n.textSecondary},children:[h.resource_type,h.resource_id?` #${h.resource_id}`:"",h.details&&Object.keys(h.details).length>0&&e.jsx("span",{style:{color:n.textTertiary,marginLeft:"8px"},children:Object.entries(h.details).filter(([b])=>b!=="old_state").slice(0,3).map(([b,f])=>`${b.replace(/_/g," ")}: ${f}`).join("  ")})]})]})]},h.id)})}),v>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",paddingTop:"16px",marginTop:"16px",borderTop:`1px solid ${n.borderSubtle}`},children:[e.jsx("button",{onClick:()=>d(Math.max(0,c-1)),disabled:c===0,style:{padding:"6px 12px",background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:c===0?n.textTertiary:n.textPrimary,cursor:c===0?"not-allowed":"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px"},children:"\\u2190 Prev"}),e.jsxs("span",{style:{padding:"6px 12px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",color:n.textSecondary},children:[c+1," / ",v]}),e.jsx("button",{onClick:()=>d(Math.min(v-1,c+1)),disabled:c>=v-1,style:{padding:"6px 12px",background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:c>=v-1?n.textTertiary:n.textPrimary,cursor:c>=v-1?"not-allowed":"pointer",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px"},children:"Next \\u2192"})]})]})]})}function wl(){const{user:t}=ce();Rt();const[r,a]=y.useState(null),[o,s]=y.useState(!1),[i,l]=y.useState(!1),[c,d]=y.useState({current:"",new_pw:"",confirm:""}),[p,m]=y.useState(!1),[g,v]=y.useState(""),[h,u]=y.useState({enabled:!1,loading:!0,setup:null,code:"",verifying:!1,disablePw:"",disabling:!1});y.useEffect(()=>{O.get("/api/auth/me").then(I=>{u(z=>({...z,enabled:I.data.totp_enabled||!1,loading:!1}))}).catch(()=>u(I=>({...I,loading:!1})))},[]);const x=async()=>{var I,z;try{const _=await O.post("/api/auth/2fa/setup");u(R=>({...R,setup:_.data}))}catch(_){S.show("Setup failed: "+(((z=(I=_.response)==null?void 0:I.data)==null?void 0:z.detail)||_.message),"error")}},b=async()=>{var I,z;u(_=>({..._,verifying:!0}));try{const _=await O.post("/api/auth/2fa/enable",{code:h.code});S.show("Two-factor authentication enabled","success"),u(R=>({...R,enabled:!0,setup:null,code:"",verifying:!1,backupCodes:_.data.backup_codes||[]}))}catch(_){S.show(((z=(I=_.response)==null?void 0:I.data)==null?void 0:z.detail)||"Invalid code","error"),u(R=>({...R,verifying:!1}))}},f=async()=>{var I,z;u(_=>({..._,disabling:!0}));try{await O.post("/api/auth/2fa/disable",{current_password:h.disablePw}),S.show("Two-factor authentication disabled","success"),u(_=>({..._,enabled:!1,disablePw:"",disabling:!1}))}catch(_){S.show(((z=(I=_.response)==null?void 0:I.data)==null?void 0:z.detail)||"Failed","error"),u(R=>({...R,disabling:!1}))}},S=zt(),j=async()=>{var I,z;if(v(""),c.current===""||c.new_pw===""||c.confirm===""){v("All fields required");return}if(c.new_pw!==c.confirm){v("Passwords do not match");return}if(c.new_pw.length<8){v("Min 8 characters");return}m(!0);try{await O.post("/api/auth/change-password",{current_password:c.current,new_password:c.new_pw}),S.show("Password changed successfully","success"),d({current:"",new_pw:"",confirm:""})}catch(_){v(((z=(I=_.response)==null?void 0:I.data)==null?void 0:z.detail)||"Failed to change password")}m(!1)};y.useEffect(()=>{O.get("/api/users/email-preferences").then(I=>a(I.data.preferences||{})).catch(()=>{a({application_updates:!0,test_notifications:!0,certificate_alerts:!0,agent_alerts:!0,marketing:!1})})},[]);const T=I=>{a(z=>({...z,[I]:!z[I]})),l(!1)},C=async()=>{var I,z;s(!0);try{await O.put("/api/users/email-preferences",r),l(!0),setTimeout(()=>l(!1),3e3)}catch(_){S.show("Failed to save: "+(((z=(I=_.response)==null?void 0:I.data)==null?void 0:z.detail)||_.message),"error")}s(!1)},N=[{key:"application_updates",label:"Application Updates",desc:"Submission confirmations, review status changes, approval notifications"},{key:"test_notifications",label:"CAT-72 Test Notifications",desc:"Test scheduled, started, passed, and failed alerts"},{key:"certificate_alerts",label:"Certificate Alerts",desc:"Certificate issued, expiry warnings (30-day / 7-day), expiration notices"},{key:"agent_alerts",label:"ENVELO Agent Alerts",desc:"Agent offline warnings, high violation rate, suspension alerts"},{key:"marketing",label:"Product Updates",desc:"New features, platform updates, and industry news from Sentinel Authority"}];return r?e.jsxs("div",{className:"space-y-6",style:{maxWidth:"700px"},children:[e.jsx(De,{label:"Account",title:"Settings"}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Account Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Name"}),e.jsx("div",{style:{color:n.textPrimary,marginTop:"4px"},children:(t==null?void 0:t.full_name)||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Email"}),e.jsx("div",{style:{color:n.textPrimary,marginTop:"4px"},children:(t==null?void 0:t.email)||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Role"}),e.jsx("div",{style:{color:n.purpleBright,marginTop:"4px",fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:(t==null?void 0:t.role)||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Organization"}),e.jsx("div",{style:{color:n.textPrimary,marginTop:"4px"},children:(t==null?void 0:t.organization)||"-"})]})]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Change Password"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxWidth:"400px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"11px",color:n.textTertiary,display:"block",marginBottom:"4px"},children:"Current Password"}),e.jsx("input",{type:"password",value:c.current,onChange:I=>d({...c,current:I.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none sexy-input",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"11px",color:n.textTertiary,display:"block",marginBottom:"4px"},children:"New Password"}),e.jsx("input",{type:"password",value:c.new_pw,onChange:I=>d({...c,new_pw:I.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none sexy-input",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"11px",color:n.textTertiary,display:"block",marginBottom:"4px"},children:"Confirm New Password"}),e.jsx("input",{type:"password",value:c.confirm,onChange:I=>d({...c,confirm:I.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none sexy-input",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px"}})]}),g&&e.jsx("div",{style:{color:"#D65C5C",fontSize:"12px"},children:g}),e.jsx("div",{style:{fontSize:"11px",color:n.textTertiary},children:"Min 8 chars, 1 uppercase, 1 lowercase, 1 number"}),e.jsx("button",{onClick:j,disabled:p,className:"sexy-btn",style:{padding:"10px 24px",borderRadius:"10px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:p?"wait":"pointer",opacity:p?.7:1,alignSelf:"flex-start"},children:p?"Changing...":"Change Password"})]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Two-Factor Authentication"}),h.loading?e.jsx("div",{style:{color:n.textTertiary,fontSize:"13px"},children:"Loading..."}):h.enabled?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.accentGreen}}),e.jsx("span",{style:{color:n.accentGreen,fontFamily:"'IBM Plex Mono', monospace",fontSize:"12px"},children:"ENABLED"})]}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",marginBottom:"12px"},children:"Your account is protected with TOTP two-factor authentication."}),h.backupCodes&&h.backupCodes.length>0&&e.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"rgba(214,160,92,0.1)",border:"1px solid rgba(214,160,92,0.3)",borderRadius:"8px"},children:[e.jsx("p",{style:{color:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",marginBottom:"8px",fontWeight:600},children:"SAVE YOUR BACKUP CODES"}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"12px",marginBottom:"12px"},children:"Use these if you lose your authenticator. Each code works once."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"4px"},children:h.backupCodes.map((I,z)=>e.jsx("span",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"13px",color:n.textPrimary,padding:"4px 8px",background:"rgba(255,255,255,0.05)",borderRadius:"4px",textAlign:"center"},children:I},z))}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(h.backupCodes.join(`
`)),S.show("Backup codes copied")},style:{marginTop:"12px",padding:"6px 16px",background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",borderRadius:"6px",color:n.accentAmber,fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:"Copy All"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",maxWidth:"400px"},children:[e.jsx("input",{type:"password",value:h.disablePw,onChange:I=>u(z=>({...z,disablePw:I.target.value})),placeholder:"Enter password to disable",className:"sexy-input",style:{flex:1,background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"13px"}}),e.jsx("button",{onClick:f,disabled:h.disabling,style:{padding:"8px 16px",borderRadius:"8px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:h.disabling?"wait":"pointer",whiteSpace:"nowrap"},children:h.disabling?"...":"Disable 2FA"})]})]}):h.setup?e.jsxs("div",{style:{maxWidth:"400px"},children:[e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",marginBottom:"16px"},children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, 1Password):"}),h.setup.qr_base64&&e.jsx("div",{style:{textAlign:"center",marginBottom:"16px"},children:e.jsx("img",{src:"data:image/png;base64,"+h.setup.qr_base64,alt:"QR Code",style:{width:"200px",height:"200px",borderRadius:"8px"}})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginBottom:"4px",fontFamily:"'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px"},children:"Manual Entry Key"}),e.jsx("div",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"14px",color:n.purpleBright,letterSpacing:"2px",wordBreak:"break-all"},children:h.setup.secret})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:h.code,onChange:I=>u(z=>({...z,code:I.target.value.replace(/\D/g,"").slice(0,6)})),placeholder:"6-digit code",maxLength:6,className:"sexy-input",style:{flex:1,background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"10px 12px",color:n.textPrimary,fontSize:"18px",fontFamily:"'IBM Plex Mono', monospace",letterSpacing:"6px",textAlign:"center"}}),e.jsx("button",{onClick:b,disabled:h.verifying||h.code.length!==6,className:"sexy-btn",style:{padding:"10px 20px",borderRadius:"8px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:h.verifying?"wait":"pointer",opacity:h.code.length!==6?.5:1},children:h.verifying?"...":"Verify"})]})]}):e.jsxs("div",{children:[e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",marginBottom:"16px"},children:"Add an extra layer of security by requiring a code from your authenticator app when signing in."}),e.jsx("button",{onClick:x,className:"sexy-btn",style:{padding:"10px 24px",borderRadius:"10px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Enable 2FA"})]})]}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Email Notifications"}),e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"from notifications@sentinelauthority.org"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:N.map(I=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderRadius:"10px",background:r[I.key]?"rgba(92,214,133,0.03)":"rgba(255,255,255,0.01)",border:`1px solid ${r[I.key]?"rgba(92,214,133,0.1)":n.borderGlass}`,transition:"all 0.2s"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:n.textPrimary,fontWeight:500,fontSize:"14px",marginBottom:"4px"},children:I.label}),e.jsx("div",{style:{color:n.textTertiary,fontSize:"12px",lineHeight:"1.5"},children:I.desc})]}),e.jsx("button",{onClick:()=>T(I.key),style:{width:"48px",height:"26px",borderRadius:"13px",border:"none",cursor:"pointer",background:r[I.key]?n.accentGreen:"rgba(255,255,255,0.1)",position:"relative",transition:"background 0.2s",flexShrink:0,marginLeft:"16px"},children:e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"#fff",position:"absolute",top:"3px",left:r[I.key]?"25px":"3px",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}})})]},I.key))}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",paddingTop:"16px",borderTop:`1px solid ${n.borderGlass}`},children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Admin and security emails are always sent."}),e.jsx("button",{onClick:C,disabled:o,className:"sexy-btn",style:{padding:"10px 24px",borderRadius:"10px",background:i?"rgba(92,214,133,0.15)":n.purplePrimary,border:`1px solid ${i?"rgba(92,214,133,0.4)":n.purpleBright}`,color:i?n.accentGreen:"#fff",fontFamily:"'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:o?"wait":"pointer",opacity:o?.7:1},children:i?" Saved":o?"Saving...":"Save Preferences"})]})]})]}):e.jsx("div",{style:{color:n.textTertiary,padding:"40px",textAlign:"center"},children:"Loading preferences..."})}function _l(){return e.jsx(ai,{children:e.jsx(Ta,{children:e.jsx(si,{children:e.jsx(oi,{children:e.jsxs(ya,{children:[e.jsx(se,{path:"/login",element:e.jsx(li,{})}),e.jsx(se,{path:"/verify",element:e.jsx(dl,{})}),e.jsx(se,{path:"/dashboard",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(di,{})})})}),e.jsx(se,{path:"/applications",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(ui,{})})})}),e.jsx(se,{path:"/applications/new",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(mi,{})})})}),e.jsx(se,{path:"/applications/:id",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(ji,{})})})}),e.jsx(se,{path:"/cat72",element:e.jsx(me,{roles:["admin","operator"],children:e.jsx(fe,{children:e.jsx(Si,{})})})}),e.jsx(se,{path:"/certificates",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(vi,{})})})}),e.jsx(se,{path:"/pending",element:e.jsx(pl,{})}),e.jsx(se,{path:"/resources",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(xl,{})})})}),e.jsx(se,{path:"/envelo",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(yl,{})})})}),e.jsx(se,{path:"/monitoring",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(bl,{})})})}),e.jsx(se,{path:"/activity",element:e.jsx(me,{roles:["admin"],children:e.jsx(fe,{children:e.jsx(Sl,{})})})}),e.jsx(se,{path:"/my-activity",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(vl,{})})})}),e.jsx(se,{path:"/settings",element:e.jsx(me,{children:e.jsx(fe,{children:e.jsx(wl,{})})})}),e.jsx(se,{path:"/users",element:e.jsx(me,{roles:["admin"],children:e.jsx(fe,{children:e.jsx(jl,{})})})}),e.jsx(se,{path:"/",element:e.jsx(Qt,{to:"/dashboard"})})]})})})})})}Kt.createRoot(document.getElementById("root")).render(e.jsx(ge.StrictMode,{children:e.jsx(_l,{})}));
