import{u as M,a as P,b as O,c as V,d as p,j as e,L as d,B as U,A as q}from"./index-BJZ-0Cup.js";import{r as o,F as Y,A as Q,c as X,W as G,P as J,D as K,h as Z,i as ee}from"./icons-DL0PQMVt.js";import{P as E}from"./Panel-qYXn_6p-.js";import{S as y}from"./StatCard-BramRhbt.js";import"./vendor-DYB3FAiG.js";function te(){var w;M();const{user:s}=P();O();const v=V(),[m,j]=o.useState([]),[n,D]=o.useState([]),[L,R]=o.useState(!0),[h,I]=o.useState(null),[c,T]=o.useState([]);o.useEffect(()=>{Promise.all([p.get("/api/applications/").catch(()=>({data:[]})),p.get("/api/certificates/").catch(()=>({data:[]})),p.get("/api/envelo/monitoring/overview").catch(()=>({data:null})),p.get("/api/audit/my-logs?limit=5&offset=0").catch(()=>({data:{logs:[]}}))]).then(([a,l,f,u])=>{j(a.data.applications||a.data||[]),D(l.data||[]),f.data&&I(f.data),T(u.data.logs||u.data||[]),R(!1)})},[]);const b=[{key:"pending",label:"Submitted"},{key:"under_review",label:"In Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"}],B=a=>b.findIndex(l=>l.key===a),x=a=>a==="conformant"?"var(--accent-green)":a==="revoked"||a==="suspended"?"var(--accent-red)":a==="testing"||a==="approved"?"var(--purple-bright)":"var(--accent-amber)",F=a=>{switch(a){case"pending":return"Awaiting review";case"under_review":return"Under evaluation";case"approved":return"Preparing CAT-72";case"testing":return"Test in progress";case"conformant":return"Certificate issued";case"revoked":return"Suspended";default:return"Pending"}};if(L)return e.jsx("div",{className:"hud-label",style:{padding:"60px",textAlign:"center"},children:"Loading…"});const S=((h==null?void 0:h.sessions)||[]).filter(a=>{const l=a.last_heartbeat_at||a.last_telemetry_at||a.last_activity||a.started_at;return a.status==="active"&&l&&Date.now()-new Date(l).getTime()<12e4}).length,g=((w=h==null?void 0:h.summary)==null?void 0:w.total)||0;return e.jsxs("div",{className:"sa-dashboard",style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--purple-bright)",letterSpacing:"4px",display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:"var(--purple-bright)"}}),"ODDC CERTIFICATION"]}),e.jsxs("h1",{style:{fontFamily:"var(--serif)",fontSize:"clamp(24px,4vw,32px)",fontWeight:200,margin:"0 0 6px",letterSpacing:"-0.02em"},children:["Welcome",s!=null&&s.full_name?`, ${s.full_name.split(" ")[0]}`:""]}),e.jsxs("p",{style:{color:"var(--text-tertiary)",fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px"},children:[new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),s!=null&&s.organization_name?` · ${s.organization_name}`:""]})]}),e.jsxs("div",{className:"sa-stat-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px",marginBottom:"32px"},children:[e.jsx(y,{onClick:()=>v("/applications"),label:"Applications",value:m.length,color:"var(--purple-bright)",icon:e.jsx(Y,{size:16,strokeWidth:1.5}),sublabel:m.filter(a=>a.state==="pending"||a.state==="under_review").length>0?`${m.filter(a=>a.state==="pending"||a.state==="under_review").length} in review`:null}),e.jsx(y,{onClick:()=>v("/certificates"),label:"Certificates",value:n.length,color:"var(--accent-green)",icon:e.jsx(Q,{size:16,strokeWidth:1.5}),sublabel:n.filter(a=>a.state==="conformant").length>0?`${n.filter(a=>a.state==="conformant").length} active`:null}),e.jsx(y,{onClick:()=>v("/cat72"),label:"Active Tests",value:m.filter(a=>a.state==="testing").length,color:"var(--accent-amber)",icon:e.jsx(X,{size:16,strokeWidth:1.5})}),e.jsx(y,{onClick:()=>v("/monitoring"),label:"Live Status",value:g>0?S:"—",color:g>0?S>0?"var(--accent-green)":"var(--accent-amber)":"var(--text-tertiary)",icon:e.jsx(G,{size:16,strokeWidth:1.5}),sublabel:g>0?S>0?`${S} of ${g} online`:"All offline":null})]}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("span",{className:"hud-label",children:"Your Applications"}),m.length>0&&e.jsx(d,{to:"/applications",className:"hud-link",style:{fontSize:"10px"},children:"View All →"})]}),m.length===0?e.jsxs("div",{className:"hud-frame",style:{textAlign:"center",padding:"48px 20px"},children:[e.jsx("i",{}),e.jsx(U,{size:28}),e.jsx("p",{style:{fontFamily:"var(--serif)",fontSize:"17px",color:"var(--text-secondary)",marginBottom:"8px"},children:"Begin Your Certification"}),e.jsx("p",{style:{fontSize:"12px",color:"var(--text-tertiary)",maxWidth:"360px",margin:"0 auto 20px",lineHeight:1.7},children:"Submit your autonomous system for ODDC certification. Our CAT-72 test validates real-time boundary enforcement over 72 hours."}),e.jsxs(d,{to:"/applications/new",className:"btn primary",children:[e.jsx(J,{size:12})," New Application"]})]}):e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),m.map((a,l)=>{var u;const f=B(a.state);return e.jsx(d,{to:`/applications/${a.id}`,style:{textDecoration:"none",display:"block"},children:e.jsxs("div",{className:"hud-row",style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",paddingTop:"14px",paddingBottom:"14px"},children:[e.jsx("span",{className:"hud-num",style:{minWidth:"20px"},children:String(l+1).padStart(2,"0")}),e.jsx("span",{className:"hud-dot",style:{background:x(a.state),marginRight:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{className:"hud-title",children:a.system_name}),e.jsxs("div",{style:{fontFamily:"var(--mono)",fontSize:"10px",letterSpacing:"1px",color:"var(--text-tertiary)",marginTop:"2px"},children:[a.application_number," · ",F(a.state)]})]}),e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:x(a.state)},children:(u=a.state)==null?void 0:u.replace(/_/g," ")}),e.jsx("div",{style:{display:"flex",gap:"2px",width:"60px"},children:b.map((k,C)=>e.jsx("div",{className:"sa-fill",style:{flex:1,height:"3px","--sa-bg":C<=f?x(a.state):"rgba(255,255,255,0.04)"}},k.key))})]})},a.id)})]})]}),n.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("span",{className:"hud-label",style:{marginBottom:"16px",display:"block"},children:"Your Certificates"}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),n.map((a,l)=>e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"13px",color:"var(--accent-green)",letterSpacing:"1px"},children:a.certificate_number}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"2px"},children:["Issued: ",a.issued_at?new Date(a.issued_at).toLocaleDateString():"—",a.expires_at?` · Expires: ${new Date(a.expires_at).toLocaleDateString()}`:""]})]}),e.jsxs("a",{href:`${q}/api/certificates/${a.certificate_number}/pdf`,target:"_blank",className:"btn",style:{padding:"6px 14px",fontSize:"9px"},children:[e.jsx(K,{size:11})," PDF"]})]},a.id))]})]}),n.length===0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("span",{className:"hud-label",style:{marginBottom:"16px",display:"block"},children:"Certificates"}),e.jsx("div",{style:{textAlign:"center",padding:"32px 20px",borderTop:"none"},children:e.jsx("p",{style:{fontSize:"12px",color:"var(--text-tertiary)",fontFamily:"var(--mono)",letterSpacing:"0.5px"},children:"Certificates are issued after your system passes the 72-hour CAT-72 conformance test."})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("span",{className:"hud-label",children:"Recent Activity"}),e.jsx(d,{to:"/my-activity",className:"hud-link",style:{fontSize:"10px"},children:"View All →"})]}),c.length===0?e.jsx("p",{style:{color:"var(--text-tertiary)",fontSize:"12px",fontFamily:"var(--mono)",textAlign:"center",padding:"20px 0"},children:"No activity yet"}):e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),c.map((a,l)=>{var r,_,A;const f={user_login:"Signed in",user_registered:"Account created",login_failed:"Failed login",application_submitted:"Application submitted",application_state_changed:"Status updated",application_deleted:"Application deleted",test_created:"CAT-72 test scheduled",test_started:"CAT-72 test started",test_completed:"CAT-72 test completed",certificate_issued:"Certificate issued",certificate_suspended:"Certificate suspended",certificate_revoked:"Certificate revoked",certificate_reinstated:"Certificate reinstated",api_key_created:"API key created",api_key_revoked:"API key revoked",password_changed:"Password changed",profile_updated:"Profile updated","2fa_enabled":"2FA enabled","2fa_disabled":"2FA disabled"},u={certificate_issued:"var(--accent-green)",test_completed:"var(--accent-green)",certificate_revoked:"var(--accent-red)",login_failed:"var(--accent-red)",certificate_suspended:"var(--accent-amber)",application_submitted:"var(--purple-bright)",test_created:"var(--purple-bright)"},k=f[a.action]||((r=a.action)==null?void 0:r.replace(/_/g," ")),C=u[a.action]||"rgba(157,140,207,0.5)",t=((_=a.details)==null?void 0:_.system_name)||((A=a.details)==null?void 0:A.application_number)||"",i=z=>{const H=Date.now()-new Date(z).getTime(),N=Math.floor(H/6e4);if(N<1)return"just now";if(N<60)return N+"m ago";const $=Math.floor(N/60);return $<24?$+"h ago":Math.floor($/24)+"d ago"};return e.jsxs("div",{className:"hud-row",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{className:"hud-dot",style:{background:C,marginRight:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:k}),t&&e.jsx("span",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginLeft:"8px"},children:t})]}),e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",color:"var(--text-tertiary)",letterSpacing:"0.5px",flexShrink:0},children:a.timestamp?i(a.timestamp):""})]},a.id||l)})]})]})]})}function ae(){var k,C;const{user:s}=P(),v=O(),m=M(),j=V(),[n,D]=o.useState(null),[L,R]=o.useState([]),[h,I]=o.useState([]),[c,T]=o.useState([]),[b,B]=o.useState([]),[x,F]=o.useState(null),[W,S]=o.useState(!1),g=t=>{t&&S(!0),p.get("/api/dashboard/stats").then(i=>D(i.data)).catch(console.error),p.get("/api/dashboard/active-tests").then(i=>I(i.data)).catch(console.error),p.get("/api/applications/").then(i=>T(i.data.applications||i.data||[])).catch(console.error),p.get("/api/dashboard/recent-certificates").then(i=>B(i.data)).catch(console.error),p.get("/api/envelo/monitoring/overview").then(i=>F(i.data)).catch(console.error),t&&setTimeout(()=>S(!1),800)};o.useEffect(()=>{g();const t=setInterval(g,3e4);return()=>clearInterval(t)},[]);const w={pending:c.filter(t=>t.state==="pending").length,under_review:c.filter(t=>t.state==="under_review").length,approved:c.filter(t=>t.state==="approved").length},a=c.filter(t=>t.state==="pending"||t.state==="under_review"),l=async(t,i,r)=>{var _,A;if(await m({title:"Confirm",message:r+"?"}))try{if(await p.patch(`/api/applications/${t}/state?new_state=${i}`),i==="approved")try{await p.post("/api/apikeys/admin/provision",null,{params:{application_id:t,send_email:!0}}),v.show("Approved — API key provisioned","success")}catch{v.show("Approved","success")}g()}catch(z){v.show("Failed: "+(((A=(_=z.response)==null?void 0:_.data)==null?void 0:A.detail)||z.message),"error")}},f=((k=x==null?void 0:x.sessions)==null?void 0:k.filter(t=>{const i=t.last_heartbeat_at||t.last_telemetry_at||t.started_at;return t.status==="active"&&i&&Date.now()-new Date(i).getTime()<12e4}).length)||((C=x==null?void 0:x.summary)==null?void 0:C.active)||0,u=b.filter(t=>t.expires_at&&t.state==="conformant"&&new Date(t.expires_at)<new Date(Date.now()+30*24*60*60*1e3)).length;return a.length+u,e.jsxs("div",{className:"sa-dashboard",style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"32px"},children:[e.jsxs("div",{children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--purple-bright)",letterSpacing:"4px",display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:"var(--purple-bright)"}}),"ADMINISTRATION"]}),e.jsxs("h1",{style:{fontFamily:"var(--serif)",fontSize:"clamp(24px,4vw,32px)",fontWeight:200,margin:"0 0 6px",letterSpacing:"-0.02em"},children:["Welcome",s!=null&&s.full_name?`, ${s.full_name.split(" ")[0]}`:""]}),e.jsx("p",{style:{color:"var(--text-tertiary)",fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px"},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),e.jsxs("button",{onClick:()=>g(!0),className:"btn",style:{padding:"8px 16px"},children:[e.jsx(Z,{size:12,style:W?{animation:"spin 0.8s linear infinite"}:{}})," ",W?"Refreshing…":"Refresh"]})]}),e.jsxs("div",{className:"sa-stat-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px",marginBottom:"32px"},children:[e.jsx(y,{onClick:()=>j("/applications"),label:"In Pipeline",value:c.length,color:"var(--purple-bright)",icon:e.jsx(Y,{size:16,strokeWidth:1.5})}),e.jsx(y,{onClick:()=>j("/cat72"),label:"Active Tests",value:(n==null?void 0:n.active_tests)||0,color:"var(--accent-amber)",icon:e.jsx(X,{size:16,strokeWidth:1.5})}),e.jsx(y,{onClick:()=>j("/certificates"),label:"Active Certs",value:(n==null?void 0:n.certificates_active)||0,color:"var(--accent-green)",icon:e.jsx(U,{size:16})}),e.jsx(y,{onClick:()=>j("/monitoring"),label:"Online Interlocks",value:f,color:f>0?"var(--accent-green)":"var(--text-tertiary)",icon:e.jsx(G,{size:16,strokeWidth:1.5})}),e.jsx(y,{onClick:()=>j("/certificates"),label:"Certs Issued",value:(n==null?void 0:n.certificates_issued)||0,color:"var(--purple-bright)",icon:e.jsx(Q,{size:16,strokeWidth:1.5})})]}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Application Pipeline"}),e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)",letterSpacing:"1px"},children:[c.length," total"]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px",height:"28px",overflow:"hidden"},children:[[{key:"pending",label:"Pending",color:"var(--accent-amber)",count:w.pending},{key:"review",label:"Review",color:"var(--accent-amber)",count:w.under_review},{key:"approved",label:"Awaiting Deploy",color:"var(--purple-bright)",count:w.approved}].map(t=>{const i=c.length||1,r=t.count>0?Math.max(t.count/i*100,8):0;return e.jsx("div",{className:"sa-fill",style:{width:t.count>0?`${r}%`:"auto",minWidth:"32px",flex:t.count>0?"none":1,display:"flex",alignItems:"center",justifyContent:"center","--sa-bg":t.count>0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.015)","--sa-accent":t.count>0?t.color:"transparent",borderLeftWidth:"2px",opacity:t.count>0?1:.4},title:`${t.label}: ${t.count}`,children:e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1px",color:t.count>0?t.color:"var(--text-tertiary)",whiteSpace:"nowrap"},children:[t.count>0?`${t.count} `:"",t.label]})},t.key)}),c.length===0&&e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.02)"},children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)",letterSpacing:"1px"},children:"No applications yet"})})]})]}),a.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--accent-amber)",marginBottom:"12px",display:"block"},children:["⚡ REVIEW QUEUE (",a.length,")"]}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),a.slice(0,5).map((t,i)=>{var r;return e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",minWidth:0,flex:1},children:[e.jsx("span",{className:"hud-num",children:String(i+1).padStart(2,"0")}),e.jsx("span",{className:"hud-dot",style:{background:t.state==="pending"?"var(--accent-amber)":"var(--purple-bright)",marginRight:0}}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx(d,{to:`/applications/${t.id}`,className:"hud-title",style:{textDecoration:"none",color:"var(--text-primary)"},children:t.system_name}),e.jsxs("div",{style:{fontSize:"10px",color:"var(--text-tertiary)",fontFamily:"var(--mono)",letterSpacing:"0.5px"},children:[t.organization_name," · ",(r=t.state)==null?void 0:r.replace(/_/g," ")]})]})]}),e.jsxs("div",{className:"sa-action-btns",style:{display:"flex",gap:"6px",flexShrink:0},children:[t.state==="pending"&&e.jsx("button",{onClick:()=>l(t.id,"under_review",`Begin review for ${t.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px"},children:"Review"}),e.jsx("button",{onClick:()=>l(t.id,"approved",`Approve ${t.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px",color:"var(--accent-green)",borderColor:"rgba(92,214,133,0.2)"},children:"Approve"}),e.jsx("button",{onClick:()=>l(t.id,"suspended",`Withdraw ${t.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px",color:"var(--accent-red)",borderColor:"rgba(214,92,92,0.2)"},children:"Withdraw"}),e.jsx(d,{to:`/applications/${t.id}`,className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px"},children:"View"})]})]},t.id)})]})]}),h.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Active CAT-72 Tests"}),e.jsx(d,{to:"/cat72",className:"hud-link",style:{fontSize:"10px"},children:"Console →"})]}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),h.map((t,i)=>{const r=Math.round(t.elapsed_seconds/(t.duration_hours*3600)*100),_=Math.max(0,(t.duration_hours*3600-t.elapsed_seconds)/3600).toFixed(1);return e.jsxs("div",{className:"hud-row",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px",color:"var(--purple-bright)"},children:[t.organization_name," — ",t.system_name]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)"},children:[_,"h remaining"]}),e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--accent-amber)"},children:[r,"%"]})]})]}),e.jsx("div",{className:"sa-fill",style:{height:"3px","--sa-bg":"rgba(255,255,255,0.04)",overflow:"hidden"},children:e.jsx("div",{className:"sa-fill",style:{height:"100%",width:`${r}%`,"--sa-bg":r>=100?"var(--accent-green)":"var(--purple-bright)",transition:"width 0.4s ease"}})})]},t.id)})]})]}),(()=>{const t=b.filter(i=>i.expires_at&&i.state==="conformant"&&new Date(i.expires_at)<new Date(Date.now()+2592e6));return t.length===0?null:e.jsx("div",{style:{marginBottom:"32px"},children:e.jsxs("div",{className:"hud-frame hud-frame-amber",children:[e.jsx("i",{}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(ee,{size:14,style:{color:"var(--accent-amber)"}}),e.jsxs("span",{className:"hud-label",style:{color:"var(--accent-amber)"},children:[t.length," Certificate",t.length>1?"s":""," Expiring Within 30 Days"]})]}),t.map(i=>{const r=Math.ceil((new Date(i.expires_at)-Date.now())/864e5);return e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px"},children:i.system_name}),e.jsx("span",{style:{color:"var(--text-tertiary)",fontSize:"11px",marginLeft:"10px"},children:i.organization_name})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:r<=7?"var(--accent-red)":"var(--accent-amber)"},children:[r,"d remaining"]}),e.jsx(d,{to:`/verify?cert=${i.certificate_number}`,className:"hud-link",style:{fontSize:"10px"},children:i.certificate_number})]})]},i.id)})]})})})(),b.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Recent Certificates"}),e.jsx(d,{to:"/certificates",className:"hud-link",style:{fontSize:"10px"},children:"View All →"})]}),e.jsx(E,{children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:["Certificate","System","Status","Issued","Expires"].map(t=>e.jsx("th",{children:t},t))})}),e.jsx("tbody",{children:b.slice(0,5).map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(d,{to:`/verify?cert=${t.certificate_number}`,style:{color:"var(--purple-bright)",fontFamily:"var(--mono)",fontSize:"12px",letterSpacing:"0.5px"},children:t.certificate_number})}),e.jsxs("td",{children:[e.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px"},children:t.system_name})," ",e.jsx("span",{style:{color:"var(--text-tertiary)",fontSize:"11px"},children:t.organization_name})]}),e.jsx("td",{children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:t.state==="conformant"?"var(--accent-green)":"var(--accent-red)"},children:t.state})}),e.jsx("td",{style:{color:"var(--text-tertiary)",fontSize:"12px"},children:t.issued_at?new Date(t.issued_at).toLocaleDateString():"—"}),e.jsx("td",{style:{fontFamily:"var(--mono)",fontSize:"11px",color:t.expires_at&&new Date(t.expires_at)<new Date(Date.now()+30*24*60*60*1e3)?"var(--accent-amber)":"var(--text-tertiary)"},children:t.expires_at?new Date(t.expires_at).toLocaleDateString():"—"})]},t.id))})]})})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Pending Applications"}),e.jsx(d,{to:"/applications",className:"hud-link",style:{fontSize:"10px"},children:"View All →"})]}),e.jsx(E,{children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:["System","Organization","State","Submitted"].map(t=>e.jsx("th",{children:t},t))})}),e.jsx("tbody",{children:c.slice(0,6).map(t=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>j(`/applications/${t.id}`),children:[e.jsx("td",{children:e.jsx(d,{to:`/applications/${t.id}`,style:{color:"var(--purple-bright)"},children:t.system_name})}),e.jsx("td",{children:t.organization_name}),e.jsx("td",{children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:t.state==="conformant"?"var(--accent-green)":t.state==="revoked"?"var(--accent-red)":t.state==="testing"||t.state==="approved"?"var(--purple-bright)":"var(--accent-amber)"},children:t.state==="approved"?"awaiting deploy":t.state==="under_review"?"in review":t.state})}),e.jsx("td",{style:{color:"var(--text-tertiary)",fontSize:"13px"},children:t.submitted_at?new Date(t.submitted_at).toLocaleDateString():"—"})]},t.id))})]})})})]})]})}function oe(){const{user:s}=P();return(s==null?void 0:s.role)==="admin"?e.jsx(ae,{}):e.jsx(te,{})}export{te as CustomerDashboard,oe as RoleBasedDashboard,ae as default};
