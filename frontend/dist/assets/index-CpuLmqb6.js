import{r as x,R as li,a as fe,H as aa,F as Ze,C as ia,A as cn,B as oa,b as ci,U as Gt,c as dn,S as di,E as zn,X as Kt,L as pi,M as mi,d as ui,e as gi,f as xi,g as Le,W as ra,h as Oe,P as sa,D as yt,i as _t,j as la,k as pn}from"./icons-oofdgLWf.js";import{r as fi}from"./vendor-D_2vUo_5.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();var ca={exports:{}},kt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hi=x,yi=Symbol.for("react.element"),_i=Symbol.for("react.fragment"),bi=Object.prototype.hasOwnProperty,vi=hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wi={key:!0,ref:!0,__self:!0,__source:!0};function da(t,n,a){var o,i={},r=null,s=null;a!==void 0&&(r=""+a),n.key!==void 0&&(r=""+n.key),n.ref!==void 0&&(s=n.ref);for(o in n)bi.call(n,o)&&!wi.hasOwnProperty(o)&&(i[o]=n[o]);if(t&&t.defaultProps)for(o in n=t.defaultProps,n)i[o]===void 0&&(i[o]=n[o]);return{$$typeof:yi,type:t,key:r,ref:s,props:i,_owner:vi.current}}kt.Fragment=_i;kt.jsx=da;kt.jsxs=da;ca.exports=kt;var e=ca.exports,Yt={},An=fi;Yt.createRoot=An.createRoot,Yt.hydrateRoot=An.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function et(){return et=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},et.apply(this,arguments)}var ke;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ke||(ke={}));const Tn="popstate";function ji(t){t===void 0&&(t={});function n(o,i){let{pathname:r,search:s,hash:l}=o.location;return Qt("",{pathname:r,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function a(o,i){return typeof i=="string"?i:bt(i)}return Ci(n,a,null,t)}function ie(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function mn(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Si(){return Math.random().toString(36).substr(2,8)}function Nn(t,n){return{usr:t.state,key:t.key,idx:n}}function Qt(t,n,a,o){return a===void 0&&(a=null),et({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?Ve(n):n,{state:a,key:n&&n.key||o||Si()})}function bt(t){let{pathname:n="/",search:a="",hash:o=""}=t;return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Ve(t){let n={};if(t){let a=t.indexOf("#");a>=0&&(n.hash=t.substr(a),t=t.substr(0,a));let o=t.indexOf("?");o>=0&&(n.search=t.substr(o),t=t.substr(0,o)),t&&(n.pathname=t)}return n}function Ci(t,n,a,o){o===void 0&&(o={});let{window:i=document.defaultView,v5Compat:r=!1}=o,s=i.history,l=ke.Pop,d=null,c=p();c==null&&(c=0,s.replaceState(et({},s.state,{idx:c}),""));function p(){return(s.state||{idx:null}).idx}function f(){l=ke.Pop;let g=p(),z=g==null?null:g-c;c=g,d&&d({action:l,location:v.location,delta:z})}function b(g,z){l=ke.Push;let I=Qt(v.location,g,z);c=p()+1;let y=Nn(I,c),h=v.createHref(I);try{s.pushState(y,"",h)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(h)}r&&d&&d({action:l,location:v.location,delta:1})}function j(g,z){l=ke.Replace;let I=Qt(v.location,g,z);c=p();let y=Nn(I,c),h=v.createHref(I);s.replaceState(y,"",h),r&&d&&d({action:l,location:v.location,delta:0})}function m(g){let z=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof g=="string"?g:bt(g);return I=I.replace(/ $/,"%20"),ie(z,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,z)}let v={get action(){return l},get location(){return t(i,s)},listen(g){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Tn,f),d=g,()=>{i.removeEventListener(Tn,f),d=null}},createHref(g){return n(i,g)},createURL:m,encodeLocation(g){let z=m(g);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:b,replace:j,go(g){return s.go(g)}};return v}var Bn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bn||(Bn={}));function ki(t,n,a){return a===void 0&&(a="/"),zi(t,n,a)}function zi(t,n,a,o){let i=typeof n=="string"?Ve(n):n,r=un(i.pathname||"/",a);if(r==null)return null;let s=pa(t);Ai(s);let l=null;for(let d=0;l==null&&d<s.length;++d){let c=Li(r);l=Mi(s[d],c)}return l}function pa(t,n,a,o){n===void 0&&(n=[]),a===void 0&&(a=[]),o===void 0&&(o="");let i=(r,s,l)=>{let d={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:s,route:r};d.relativePath.startsWith("/")&&(ie(d.relativePath.startsWith(o),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(o.length));let c=Te([o,d.relativePath]),p=a.concat(d);r.children&&r.children.length>0&&(ie(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),pa(r.children,n,p,c)),!(r.path==null&&!r.index)&&n.push({path:c,score:Ri(c,r.index),routesMeta:p})};return t.forEach((r,s)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,s);else for(let d of ma(r.path))i(r,s,d)}),n}function ma(t){let n=t.split("/");if(n.length===0)return[];let[a,...o]=n,i=a.endsWith("?"),r=a.replace(/\?$/,"");if(o.length===0)return i?[r,""]:[r];let s=ma(o.join("/")),l=[];return l.push(...s.map(d=>d===""?r:[r,d].join("/"))),i&&l.push(...s),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function Ai(t){t.sort((n,a)=>n.score!==a.score?a.score-n.score:Fi(n.routesMeta.map(o=>o.childrenIndex),a.routesMeta.map(o=>o.childrenIndex)))}const Ti=/^:[\w-]+$/,Ni=3,Bi=2,Ii=1,Ei=10,Pi=-2,In=t=>t==="*";function Ri(t,n){let a=t.split("/"),o=a.length;return a.some(In)&&(o+=Pi),n&&(o+=Bi),a.filter(i=>!In(i)).reduce((i,r)=>i+(Ti.test(r)?Ni:r===""?Ii:Ei),o)}function Fi(t,n){return t.length===n.length&&t.slice(0,-1).every((o,i)=>o===n[i])?t[t.length-1]-n[n.length-1]:0}function Mi(t,n,a){let{routesMeta:o}=t,i={},r="/",s=[];for(let l=0;l<o.length;++l){let d=o[l],c=l===o.length-1,p=r==="/"?n:n.slice(r.length)||"/",f=Di({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},p),b=d.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Te([r,f.pathname]),pathnameBase:$i(Te([r,f.pathnameBase])),route:b}),f.pathnameBase!=="/"&&(r=Te([r,f.pathnameBase]))}return s}function Di(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,o]=Oi(t.path,t.caseSensitive,t.end),i=n.match(a);if(!i)return null;let r=i[0],s=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:o.reduce((c,p,f)=>{let{paramName:b,isOptional:j}=p;if(b==="*"){let v=l[f]||"";s=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[f];return j&&!m?c[b]=void 0:c[b]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:s,pattern:t}}function Oi(t,n,a){n===void 0&&(n=!1),a===void 0&&(a=!0),mn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,d)=>(o.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,n?void 0:"i"),o]}function Li(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return mn(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),t}}function un(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,o=t.charAt(a);return o&&o!=="/"?null:t.slice(a)||"/"}const Ui=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wi=t=>Ui.test(t);function qi(t,n){n===void 0&&(n="/");let{pathname:a,search:o="",hash:i=""}=typeof t=="string"?Ve(t):t,r;if(a)if(Wi(a))r=a;else{if(a.includes("//")){let s=a;a=a.replace(/\/\/+/g,"/"),mn(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+a))}a.startsWith("/")?r=En(a.substring(1),"/"):r=En(a,n)}else r=n;return{pathname:r,search:Vi(o),hash:Ji(i)}}function En(t,n){let a=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?a.length>1&&a.pop():i!=="."&&a.push(i)}),a.length>1?a.join("/"):"/"}function Ot(t,n,a,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Hi(t){return t.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function gn(t,n){let a=Hi(t);return n?a.map((o,i)=>i===a.length-1?o.pathname:o.pathnameBase):a.map(o=>o.pathnameBase)}function xn(t,n,a,o){o===void 0&&(o=!1);let i;typeof t=="string"?i=Ve(t):(i=et({},t),ie(!i.pathname||!i.pathname.includes("?"),Ot("?","pathname","search",i)),ie(!i.pathname||!i.pathname.includes("#"),Ot("#","pathname","hash",i)),ie(!i.search||!i.search.includes("#"),Ot("#","search","hash",i)));let r=t===""||i.pathname==="",s=r?"/":i.pathname,l;if(s==null)l=a;else{let f=n.length-1;if(!o&&s.startsWith("..")){let b=s.split("/");for(;b[0]==="..";)b.shift(),f-=1;i.pathname=b.join("/")}l=f>=0?n[f]:"/"}let d=qi(i,l),c=s&&s!=="/"&&s.endsWith("/"),p=(r||s===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(c||p)&&(d.pathname+="/"),d}const Te=t=>t.join("/").replace(/\/\/+/g,"/"),$i=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Vi=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ji=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Gi(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ua=["post","put","patch","delete"];new Set(ua);const Ki=["get",...ua];new Set(Ki);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tt(){return tt=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},tt.apply(this,arguments)}const fn=x.createContext(null),Yi=x.createContext(null),Ne=x.createContext(null),zt=x.createContext(null),Se=x.createContext({outlet:null,matches:[],isDataRoute:!1}),ga=x.createContext(null);function Qi(t,n){let{relative:a}=n===void 0?{}:n;Je()||ie(!1);let{basename:o,navigator:i}=x.useContext(Ne),{hash:r,pathname:s,search:l}=fa(t,{relative:a}),d=s;return o!=="/"&&(d=s==="/"?o:Te([o,s])),i.createHref({pathname:d,search:l,hash:r})}function Je(){return x.useContext(zt)!=null}function Ge(){return Je()||ie(!1),x.useContext(zt).location}function xa(t){x.useContext(Ne).static||x.useLayoutEffect(t)}function Me(){let{isDataRoute:t}=x.useContext(Se);return t?mo():Xi()}function Xi(){Je()||ie(!1);let t=x.useContext(fn),{basename:n,future:a,navigator:o}=x.useContext(Ne),{matches:i}=x.useContext(Se),{pathname:r}=Ge(),s=JSON.stringify(gn(i,a.v7_relativeSplatPath)),l=x.useRef(!1);return xa(()=>{l.current=!0}),x.useCallback(function(c,p){if(p===void 0&&(p={}),!l.current)return;if(typeof c=="number"){o.go(c);return}let f=xn(c,JSON.parse(s),r,p.relative==="path");t==null&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Te([n,f.pathname])),(p.replace?o.replace:o.push)(f,p.state,p)},[n,o,s,r,t])}function Zi(){let{matches:t}=x.useContext(Se),n=t[t.length-1];return n?n.params:{}}function fa(t,n){let{relative:a}=n===void 0?{}:n,{future:o}=x.useContext(Ne),{matches:i}=x.useContext(Se),{pathname:r}=Ge(),s=JSON.stringify(gn(i,o.v7_relativeSplatPath));return x.useMemo(()=>xn(t,JSON.parse(s),r,a==="path"),[t,s,r,a])}function eo(t,n){return to(t,n)}function to(t,n,a,o){Je()||ie(!1);let{navigator:i}=x.useContext(Ne),{matches:r}=x.useContext(Se),s=r[r.length-1],l=s?s.params:{};s&&s.pathname;let d=s?s.pathnameBase:"/";s&&s.route;let c=Ge(),p;if(n){var f;let g=typeof n=="string"?Ve(n):n;d==="/"||(f=g.pathname)!=null&&f.startsWith(d)||ie(!1),p=g}else p=c;let b=p.pathname||"/",j=b;if(d!=="/"){let g=d.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(g.length).join("/")}let m=ki(t,{pathname:j}),v=ro(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Te([d,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?d:Te([d,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),r,a,o);return n&&v?x.createElement(zt.Provider,{value:{location:tt({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ke.Pop}},v):v}function no(){let t=po(),n=Gi(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},n),a?x.createElement("pre",{style:i},a):null,null)}const ao=x.createElement(no,null);class io extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,a){return a.location!==n.location||a.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:a.error,location:a.location,revalidation:n.revalidation||a.revalidation}}componentDidCatch(n,a){console.error("React Router caught the following error during render",n,a)}render(){return this.state.error!==void 0?x.createElement(Se.Provider,{value:this.props.routeContext},x.createElement(ga.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oo(t){let{routeContext:n,match:a,children:o}=t,i=x.useContext(fn);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),x.createElement(Se.Provider,{value:n},o)}function ro(t,n,a,o){var i;if(n===void 0&&(n=[]),a===void 0&&(a=null),o===void 0&&(o=null),t==null){var r;if(!a)return null;if(a.errors)t=a.matches;else if((r=o)!=null&&r.v7_partialHydration&&n.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let s=t,l=(i=a)==null?void 0:i.errors;if(l!=null){let p=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);p>=0||ie(!1),s=s.slice(0,Math.min(s.length,p+1))}let d=!1,c=-1;if(a&&o&&o.v7_partialHydration)for(let p=0;p<s.length;p++){let f=s[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=p),f.route.id){let{loaderData:b,errors:j}=a,m=f.route.loader&&b[f.route.id]===void 0&&(!j||j[f.route.id]===void 0);if(f.route.lazy||m){d=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((p,f,b)=>{let j,m=!1,v=null,g=null;a&&(j=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||ao,d&&(c<0&&b===0?(uo("route-fallback"),m=!0,g=null):c===b&&(m=!0,g=f.route.hydrateFallbackElement||null)));let z=n.concat(s.slice(0,b+1)),I=()=>{let y;return j?y=v:m?y=g:f.route.Component?y=x.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=p,x.createElement(oo,{match:f,routeContext:{outlet:p,matches:z,isDataRoute:a!=null},children:y})};return a&&(f.route.ErrorBoundary||f.route.errorElement||b===0)?x.createElement(io,{location:a.location,revalidation:a.revalidation,component:v,error:j,children:I(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):I()},null)}var ha=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ha||{}),ya=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ya||{});function so(t){let n=x.useContext(fn);return n||ie(!1),n}function lo(t){let n=x.useContext(Yi);return n||ie(!1),n}function co(t){let n=x.useContext(Se);return n||ie(!1),n}function _a(t){let n=co(),a=n.matches[n.matches.length-1];return a.route.id||ie(!1),a.route.id}function po(){var t;let n=x.useContext(ga),a=lo(),o=_a();return n!==void 0?n:(t=a.errors)==null?void 0:t[o]}function mo(){let{router:t}=so(ha.UseNavigateStable),n=_a(ya.UseNavigateStable),a=x.useRef(!1);return xa(()=>{a.current=!0}),x.useCallback(function(i,r){r===void 0&&(r={}),a.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,tt({fromRouteId:n},r)))},[t,n])}const Pn={};function uo(t,n,a){Pn[t]||(Pn[t]=!0)}function go(t,n){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gt(t){let{to:n,replace:a,state:o,relative:i}=t;Je()||ie(!1);let{future:r,static:s}=x.useContext(Ne),{matches:l}=x.useContext(Se),{pathname:d}=Ge(),c=Me(),p=xn(n,gn(l,r.v7_relativeSplatPath),d,i==="path"),f=JSON.stringify(p);return x.useEffect(()=>c(JSON.parse(f),{replace:a,state:o,relative:i}),[c,f,i,a,o]),null}function re(t){ie(!1)}function xo(t){let{basename:n="/",children:a=null,location:o,navigationType:i=ke.Pop,navigator:r,static:s=!1,future:l}=t;Je()&&ie(!1);let d=n.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:d,navigator:r,static:s,future:tt({v7_relativeSplatPath:!1},l)}),[d,l,r,s]);typeof o=="string"&&(o=Ve(o));let{pathname:p="/",search:f="",hash:b="",state:j=null,key:m="default"}=o,v=x.useMemo(()=>{let g=un(p,d);return g==null?null:{location:{pathname:g,search:f,hash:b,state:j,key:m},navigationType:i}},[d,p,f,b,j,m,i]);return v==null?null:x.createElement(Ne.Provider,{value:c},x.createElement(zt.Provider,{children:a,value:v}))}function fo(t){let{children:n,location:a}=t;return eo(Xt(n),a)}new Promise(()=>{});function Xt(t,n){n===void 0&&(n=[]);let a=[];return x.Children.forEach(t,(o,i)=>{if(!x.isValidElement(o))return;let r=[...n,i];if(o.type===x.Fragment){a.push.apply(a,Xt(o.props.children,r));return}o.type!==re&&ie(!1),!o.props.index||!o.props.children||ie(!1);let s={id:o.props.id||r.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(s.children=Xt(o.props.children,r)),a.push(s)}),a}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},Zt.apply(this,arguments)}function ho(t,n){if(t==null)return{};var a={},o=Object.keys(t),i,r;for(r=0;r<o.length;r++)i=o[r],!(n.indexOf(i)>=0)&&(a[i]=t[i]);return a}function yo(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _o(t,n){return t.button===0&&(!n||n==="_self")&&!yo(t)}const bo=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vo="6";try{window.__reactRouterVersion=vo}catch{}const wo="startTransition",Rn=li[wo];function jo(t){let{basename:n,children:a,future:o,window:i}=t,r=x.useRef();r.current==null&&(r.current=ji({window:i,v5Compat:!0}));let s=r.current,[l,d]=x.useState({action:s.action,location:s.location}),{v7_startTransition:c}=o||{},p=x.useCallback(f=>{c&&Rn?Rn(()=>d(f)):d(f)},[d,c]);return x.useLayoutEffect(()=>s.listen(p),[s,p]),x.useEffect(()=>go(o),[o]),x.createElement(xo,{basename:n,children:a,location:l.location,navigationType:l.action,navigator:s,future:o})}const So=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Co=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ae=x.forwardRef(function(n,a){let{onClick:o,relative:i,reloadDocument:r,replace:s,state:l,target:d,to:c,preventScrollReset:p,viewTransition:f}=n,b=ho(n,bo),{basename:j}=x.useContext(Ne),m,v=!1;if(typeof c=="string"&&Co.test(c)&&(m=c,So))try{let y=new URL(window.location.href),h=c.startsWith("//")?new URL(y.protocol+c):new URL(c),E=un(h.pathname,j);h.origin===y.origin&&E!=null?c=E+h.search+h.hash:v=!0}catch{}let g=Qi(c,{relative:i}),z=ko(c,{replace:s,state:l,target:d,preventScrollReset:p,relative:i,viewTransition:f});function I(y){o&&o(y),y.defaultPrevented||z(y)}return x.createElement("a",Zt({},b,{href:m||g,onClick:v||r?o:I,ref:a,target:d}))});var Fn;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fn||(Fn={}));var Mn;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Mn||(Mn={}));function ko(t,n){let{target:a,replace:o,state:i,preventScrollReset:r,relative:s,viewTransition:l}=n===void 0?{}:n,d=Me(),c=Ge(),p=fa(t,{relative:s});return x.useCallback(f=>{if(_o(f,a)){f.preventDefault();let b=o!==void 0?o:bt(c)===bt(p);d(t,{replace:b,state:i,preventScrollReset:r,relative:s,viewTransition:l})}},[c,d,p,o,i,a,t,r,s,l])}function ba(t,n){return function(){return t.apply(n,arguments)}}const{toString:zo}=Object.prototype,{getPrototypeOf:hn}=Object,{iterator:At,toStringTag:va}=Symbol,Tt=(t=>n=>{const a=zo.call(n);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),ve=t=>(t=t.toLowerCase(),n=>Tt(n)===t),Nt=t=>n=>typeof n===t,{isArray:Ke}=Array,Ue=Nt("undefined");function at(t){return t!==null&&!Ue(t)&&t.constructor!==null&&!Ue(t.constructor)&&he(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const wa=ve("ArrayBuffer");function Ao(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&wa(t.buffer),n}const To=Nt("string"),he=Nt("function"),ja=Nt("number"),it=t=>t!==null&&typeof t=="object",No=t=>t===!0||t===!1,xt=t=>{if(Tt(t)!=="object")return!1;const n=hn(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(va in t)&&!(At in t)},Bo=t=>{if(!it(t)||at(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Io=ve("Date"),Eo=ve("File"),Po=ve("Blob"),Ro=ve("FileList"),Fo=t=>it(t)&&he(t.pipe),Mo=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||he(t.append)&&((n=Tt(t))==="formdata"||n==="object"&&he(t.toString)&&t.toString()==="[object FormData]"))},Do=ve("URLSearchParams"),[Oo,Lo,Uo,Wo]=["ReadableStream","Request","Response","Headers"].map(ve),qo=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ot(t,n,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let o,i;if(typeof t!="object"&&(t=[t]),Ke(t))for(o=0,i=t.length;o<i;o++)n.call(null,t[o],o,t);else{if(at(t))return;const r=a?Object.getOwnPropertyNames(t):Object.keys(t),s=r.length;let l;for(o=0;o<s;o++)l=r[o],n.call(null,t[l],l,t)}}function Sa(t,n){if(at(t))return null;n=n.toLowerCase();const a=Object.keys(t);let o=a.length,i;for(;o-- >0;)if(i=a[o],n===i.toLowerCase())return i;return null}const Pe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ca=t=>!Ue(t)&&t!==Pe;function en(){const{caseless:t,skipUndefined:n}=Ca(this)&&this||{},a={},o=(i,r)=>{const s=t&&Sa(a,r)||r;xt(a[s])&&xt(i)?a[s]=en(a[s],i):xt(i)?a[s]=en({},i):Ke(i)?a[s]=i.slice():(!n||!Ue(i))&&(a[s]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&ot(arguments[i],o);return a}const Ho=(t,n,a,{allOwnKeys:o}={})=>(ot(n,(i,r)=>{a&&he(i)?Object.defineProperty(t,r,{value:ba(i,a),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,r,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),t),$o=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Vo=(t,n,a,o)=>{t.prototype=Object.create(n.prototype,o),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:n.prototype}),a&&Object.assign(t.prototype,a)},Jo=(t,n,a,o)=>{let i,r,s;const l={};if(n=n||{},t==null)return n;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)s=i[r],(!o||o(s,t,n))&&!l[s]&&(n[s]=t[s],l[s]=!0);t=a!==!1&&hn(t)}while(t&&(!a||a(t,n))&&t!==Object.prototype);return n},Go=(t,n,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=n.length;const o=t.indexOf(n,a);return o!==-1&&o===a},Ko=t=>{if(!t)return null;if(Ke(t))return t;let n=t.length;if(!ja(n))return null;const a=new Array(n);for(;n-- >0;)a[n]=t[n];return a},Yo=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&hn(Uint8Array)),Qo=(t,n)=>{const o=(t&&t[At]).call(t);let i;for(;(i=o.next())&&!i.done;){const r=i.value;n.call(t,r[0],r[1])}},Xo=(t,n)=>{let a;const o=[];for(;(a=t.exec(n))!==null;)o.push(a);return o},Zo=ve("HTMLFormElement"),er=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,o,i){return o.toUpperCase()+i}),Dn=(({hasOwnProperty:t})=>(n,a)=>t.call(n,a))(Object.prototype),tr=ve("RegExp"),ka=(t,n)=>{const a=Object.getOwnPropertyDescriptors(t),o={};ot(a,(i,r)=>{let s;(s=n(i,r,t))!==!1&&(o[r]=s||i)}),Object.defineProperties(t,o)},nr=t=>{ka(t,(n,a)=>{if(he(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const o=t[a];if(he(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},ar=(t,n)=>{const a={},o=i=>{i.forEach(r=>{a[r]=!0})};return Ke(t)?o(t):o(String(t).split(n)),a},ir=()=>{},or=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function rr(t){return!!(t&&he(t.append)&&t[va]==="FormData"&&t[At])}const sr=t=>{const n=new Array(10),a=(o,i)=>{if(it(o)){if(n.indexOf(o)>=0)return;if(at(o))return o;if(!("toJSON"in o)){n[i]=o;const r=Ke(o)?[]:{};return ot(o,(s,l)=>{const d=a(s,i+1);!Ue(d)&&(r[l]=d)}),n[i]=void 0,r}}return o};return a(t,0)},lr=ve("AsyncFunction"),cr=t=>t&&(it(t)||he(t))&&he(t.then)&&he(t.catch),za=((t,n)=>t?setImmediate:n?((a,o)=>(Pe.addEventListener("message",({source:i,data:r})=>{i===Pe&&r===a&&o.length&&o.shift()()},!1),i=>{o.push(i),Pe.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",he(Pe.postMessage)),dr=typeof queueMicrotask<"u"?queueMicrotask.bind(Pe):typeof process<"u"&&process.nextTick||za,pr=t=>t!=null&&he(t[At]),T={isArray:Ke,isArrayBuffer:wa,isBuffer:at,isFormData:Mo,isArrayBufferView:Ao,isString:To,isNumber:ja,isBoolean:No,isObject:it,isPlainObject:xt,isEmptyObject:Bo,isReadableStream:Oo,isRequest:Lo,isResponse:Uo,isHeaders:Wo,isUndefined:Ue,isDate:Io,isFile:Eo,isBlob:Po,isRegExp:tr,isFunction:he,isStream:Fo,isURLSearchParams:Do,isTypedArray:Yo,isFileList:Ro,forEach:ot,merge:en,extend:Ho,trim:qo,stripBOM:$o,inherits:Vo,toFlatObject:Jo,kindOf:Tt,kindOfTest:ve,endsWith:Go,toArray:Ko,forEachEntry:Qo,matchAll:Xo,isHTMLForm:Zo,hasOwnProperty:Dn,hasOwnProp:Dn,reduceDescriptors:ka,freezeMethods:nr,toObjectSet:ar,toCamelCase:er,noop:ir,toFiniteNumber:or,findKey:Sa,global:Pe,isContextDefined:Ca,isSpecCompliantForm:rr,toJSONObject:sr,isAsyncFn:lr,isThenable:cr,setImmediate:za,asap:dr,isIterable:pr};let G=class Aa extends Error{static from(n,a,o,i,r,s){const l=new Aa(n.message,a||n.code,o,i,r);return l.cause=n,l.name=n.name,s&&Object.assign(l,s),l}constructor(n,a,o,i,r){super(n),this.name="AxiosError",this.isAxiosError=!0,a&&(this.code=a),o&&(this.config=o),i&&(this.request=i),r&&(this.response=r,this.status=r.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:T.toJSONObject(this.config),code:this.code,status:this.status}}};G.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";G.ERR_BAD_OPTION="ERR_BAD_OPTION";G.ECONNABORTED="ECONNABORTED";G.ETIMEDOUT="ETIMEDOUT";G.ERR_NETWORK="ERR_NETWORK";G.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";G.ERR_DEPRECATED="ERR_DEPRECATED";G.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";G.ERR_BAD_REQUEST="ERR_BAD_REQUEST";G.ERR_CANCELED="ERR_CANCELED";G.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";G.ERR_INVALID_URL="ERR_INVALID_URL";const mr=null;function tn(t){return T.isPlainObject(t)||T.isArray(t)}function Ta(t){return T.endsWith(t,"[]")?t.slice(0,-2):t}function On(t,n,a){return t?t.concat(n).map(function(i,r){return i=Ta(i),!a&&r?"["+i+"]":i}).join(a?".":""):n}function ur(t){return T.isArray(t)&&!t.some(tn)}const gr=T.toFlatObject(T,{},null,function(n){return/^is[A-Z]/.test(n)});function Bt(t,n,a){if(!T.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,a=T.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!T.isUndefined(g[v])});const o=a.metaTokens,i=a.visitor||p,r=a.dots,s=a.indexes,d=(a.Blob||typeof Blob<"u"&&Blob)&&T.isSpecCompliantForm(n);if(!T.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(T.isDate(m))return m.toISOString();if(T.isBoolean(m))return m.toString();if(!d&&T.isBlob(m))throw new G("Blob is not supported. Use a Buffer instead.");return T.isArrayBuffer(m)||T.isTypedArray(m)?d&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function p(m,v,g){let z=m;if(m&&!g&&typeof m=="object"){if(T.endsWith(v,"{}"))v=o?v:v.slice(0,-2),m=JSON.stringify(m);else if(T.isArray(m)&&ur(m)||(T.isFileList(m)||T.endsWith(v,"[]"))&&(z=T.toArray(m)))return v=Ta(v),z.forEach(function(y,h){!(T.isUndefined(y)||y===null)&&n.append(s===!0?On([v],h,r):s===null?v:v+"[]",c(y))}),!1}return tn(m)?!0:(n.append(On(g,v,r),c(m)),!1)}const f=[],b=Object.assign(gr,{defaultVisitor:p,convertValue:c,isVisitable:tn});function j(m,v){if(!T.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(m),T.forEach(m,function(z,I){(!(T.isUndefined(z)||z===null)&&i.call(n,z,T.isString(I)?I.trim():I,v,b))===!0&&j(z,v?v.concat(I):[I])}),f.pop()}}if(!T.isObject(t))throw new TypeError("data must be an object");return j(t),n}function Ln(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function yn(t,n){this._pairs=[],t&&Bt(t,this,n)}const Na=yn.prototype;Na.append=function(n,a){this._pairs.push([n,a])};Na.toString=function(n){const a=n?function(o){return n.call(this,o,Ln)}:Ln;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function xr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ba(t,n,a){if(!n)return t;const o=a&&a.encode||xr,i=T.isFunction(a)?{serialize:a}:a,r=i&&i.serialize;let s;if(r?s=r(n,i):s=T.isURLSearchParams(n)?n.toString():new yn(n,i).toString(o),s){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Un{constructor(){this.handlers=[]}use(n,a,o){return this.handlers.push({fulfilled:n,rejected:a,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){T.forEach(this.handlers,function(o){o!==null&&n(o)})}}const Ia={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fr=typeof URLSearchParams<"u"?URLSearchParams:yn,hr=typeof FormData<"u"?FormData:null,yr=typeof Blob<"u"?Blob:null,_r={isBrowser:!0,classes:{URLSearchParams:fr,FormData:hr,Blob:yr},protocols:["http","https","file","blob","url","data"]},_n=typeof window<"u"&&typeof document<"u",nn=typeof navigator=="object"&&navigator||void 0,br=_n&&(!nn||["ReactNative","NativeScript","NS"].indexOf(nn.product)<0),vr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wr=_n&&window.location.href||"http://localhost",jr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_n,hasStandardBrowserEnv:br,hasStandardBrowserWebWorkerEnv:vr,navigator:nn,origin:wr},Symbol.toStringTag,{value:"Module"})),de={...jr,..._r};function Sr(t,n){return Bt(t,new de.classes.URLSearchParams,{visitor:function(a,o,i,r){return de.isNode&&T.isBuffer(a)?(this.append(o,a.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...n})}function Cr(t){return T.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function kr(t){const n={},a=Object.keys(t);let o;const i=a.length;let r;for(o=0;o<i;o++)r=a[o],n[r]=t[r];return n}function Ea(t){function n(a,o,i,r){let s=a[r++];if(s==="__proto__")return!0;const l=Number.isFinite(+s),d=r>=a.length;return s=!s&&T.isArray(i)?i.length:s,d?(T.hasOwnProp(i,s)?i[s]=[i[s],o]:i[s]=o,!l):((!i[s]||!T.isObject(i[s]))&&(i[s]=[]),n(a,o,i[s],r)&&T.isArray(i[s])&&(i[s]=kr(i[s])),!l)}if(T.isFormData(t)&&T.isFunction(t.entries)){const a={};return T.forEachEntry(t,(o,i)=>{n(Cr(o),i,a,0)}),a}return null}function zr(t,n,a){if(T.isString(t))try{return(n||JSON.parse)(t),T.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(a||JSON.stringify)(t)}const rt={transitional:Ia,adapter:["xhr","http","fetch"],transformRequest:[function(n,a){const o=a.getContentType()||"",i=o.indexOf("application/json")>-1,r=T.isObject(n);if(r&&T.isHTMLForm(n)&&(n=new FormData(n)),T.isFormData(n))return i?JSON.stringify(Ea(n)):n;if(T.isArrayBuffer(n)||T.isBuffer(n)||T.isStream(n)||T.isFile(n)||T.isBlob(n)||T.isReadableStream(n))return n;if(T.isArrayBufferView(n))return n.buffer;if(T.isURLSearchParams(n))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let l;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Sr(n,this.formSerializer).toString();if((l=T.isFileList(n))||o.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Bt(l?{"files[]":n}:n,d&&new d,this.formSerializer)}}return r||i?(a.setContentType("application/json",!1),zr(n)):n}],transformResponse:[function(n){const a=this.transitional||rt.transitional,o=a&&a.forcedJSONParsing,i=this.responseType==="json";if(T.isResponse(n)||T.isReadableStream(n))return n;if(n&&T.isString(n)&&(o&&!this.responseType||i)){const s=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(n,this.parseReviver)}catch(l){if(s)throw l.name==="SyntaxError"?G.from(l,G.ERR_BAD_RESPONSE,this,null,this.response):l}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:de.classes.FormData,Blob:de.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};T.forEach(["delete","get","head","post","put","patch"],t=>{rt.headers[t]={}});const Ar=T.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tr=t=>{const n={};let a,o,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),a=s.substring(0,i).trim().toLowerCase(),o=s.substring(i+1).trim(),!(!a||n[a]&&Ar[a])&&(a==="set-cookie"?n[a]?n[a].push(o):n[a]=[o]:n[a]=n[a]?n[a]+", "+o:o)}),n},Wn=Symbol("internals");function Qe(t){return t&&String(t).trim().toLowerCase()}function ft(t){return t===!1||t==null?t:T.isArray(t)?t.map(ft):String(t)}function Nr(t){const n=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=a.exec(t);)n[o[1]]=o[2];return n}const Br=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Lt(t,n,a,o,i){if(T.isFunction(o))return o.call(this,n,a);if(i&&(n=a),!!T.isString(n)){if(T.isString(o))return n.indexOf(o)!==-1;if(T.isRegExp(o))return o.test(n)}}function Ir(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,a,o)=>a.toUpperCase()+o)}function Er(t,n){const a=T.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+a,{value:function(i,r,s){return this[o].call(this,n,i,r,s)},configurable:!0})})}let ye=class{constructor(n){n&&this.set(n)}set(n,a,o){const i=this;function r(l,d,c){const p=Qe(d);if(!p)throw new Error("header name must be a non-empty string");const f=T.findKey(i,p);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||d]=ft(l))}const s=(l,d)=>T.forEach(l,(c,p)=>r(c,p,d));if(T.isPlainObject(n)||n instanceof this.constructor)s(n,a);else if(T.isString(n)&&(n=n.trim())&&!Br(n))s(Tr(n),a);else if(T.isObject(n)&&T.isIterable(n)){let l={},d,c;for(const p of n){if(!T.isArray(p))throw TypeError("Object iterator must return a key-value pair");l[c=p[0]]=(d=l[c])?T.isArray(d)?[...d,p[1]]:[d,p[1]]:p[1]}s(l,a)}else n!=null&&r(a,n,o);return this}get(n,a){if(n=Qe(n),n){const o=T.findKey(this,n);if(o){const i=this[o];if(!a)return i;if(a===!0)return Nr(i);if(T.isFunction(a))return a.call(this,i,o);if(T.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,a){if(n=Qe(n),n){const o=T.findKey(this,n);return!!(o&&this[o]!==void 0&&(!a||Lt(this,this[o],o,a)))}return!1}delete(n,a){const o=this;let i=!1;function r(s){if(s=Qe(s),s){const l=T.findKey(o,s);l&&(!a||Lt(o,o[l],l,a))&&(delete o[l],i=!0)}}return T.isArray(n)?n.forEach(r):r(n),i}clear(n){const a=Object.keys(this);let o=a.length,i=!1;for(;o--;){const r=a[o];(!n||Lt(this,this[r],r,n,!0))&&(delete this[r],i=!0)}return i}normalize(n){const a=this,o={};return T.forEach(this,(i,r)=>{const s=T.findKey(o,r);if(s){a[s]=ft(i),delete a[r];return}const l=n?Ir(r):String(r).trim();l!==r&&delete a[r],a[l]=ft(i),o[l]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const a=Object.create(null);return T.forEach(this,(o,i)=>{o!=null&&o!==!1&&(a[i]=n&&T.isArray(o)?o.join(", "):o)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,a])=>n+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...a){const o=new this(n);return a.forEach(i=>o.set(i)),o}static accessor(n){const o=(this[Wn]=this[Wn]={accessors:{}}).accessors,i=this.prototype;function r(s){const l=Qe(s);o[l]||(Er(i,s),o[l]=!0)}return T.isArray(n)?n.forEach(r):r(n),this}};ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);T.reduceDescriptors(ye.prototype,({value:t},n)=>{let a=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(o){this[a]=o}}});T.freezeMethods(ye);function Ut(t,n){const a=this||rt,o=n||a,i=ye.from(o.headers);let r=o.data;return T.forEach(t,function(l){r=l.call(a,r,i.normalize(),n?n.status:void 0)}),i.normalize(),r}function Pa(t){return!!(t&&t.__CANCEL__)}let st=class extends G{constructor(n,a,o){super(n??"canceled",G.ERR_CANCELED,a,o),this.name="CanceledError",this.__CANCEL__=!0}};function Ra(t,n,a){const o=a.config.validateStatus;!a.status||!o||o(a.status)?t(a):n(new G("Request failed with status code "+a.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Pr(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function Rr(t,n){t=t||10;const a=new Array(t),o=new Array(t);let i=0,r=0,s;return n=n!==void 0?n:1e3,function(d){const c=Date.now(),p=o[r];s||(s=c),a[i]=d,o[i]=c;let f=r,b=0;for(;f!==i;)b+=a[f++],f=f%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),c-s<n)return;const j=p&&c-p;return j?Math.round(b*1e3/j):void 0}}function Fr(t,n){let a=0,o=1e3/n,i,r;const s=(c,p=Date.now())=>{a=p,i=null,r&&(clearTimeout(r),r=null),t(...c)};return[(...c)=>{const p=Date.now(),f=p-a;f>=o?s(c,p):(i=c,r||(r=setTimeout(()=>{r=null,s(i)},o-f)))},()=>i&&s(i)]}const vt=(t,n,a=3)=>{let o=0;const i=Rr(50,250);return Fr(r=>{const s=r.loaded,l=r.lengthComputable?r.total:void 0,d=s-o,c=i(d),p=s<=l;o=s;const f={loaded:s,total:l,progress:l?s/l:void 0,bytes:d,rate:c||void 0,estimated:c&&l&&p?(l-s)/c:void 0,event:r,lengthComputable:l!=null,[n?"download":"upload"]:!0};t(f)},a)},qn=(t,n)=>{const a=t!=null;return[o=>n[0]({lengthComputable:a,total:t,loaded:o}),n[1]]},Hn=t=>(...n)=>T.asap(()=>t(...n)),Mr=de.hasStandardBrowserEnv?((t,n)=>a=>(a=new URL(a,de.origin),t.protocol===a.protocol&&t.host===a.host&&(n||t.port===a.port)))(new URL(de.origin),de.navigator&&/(msie|trident)/i.test(de.navigator.userAgent)):()=>!0,Dr=de.hasStandardBrowserEnv?{write(t,n,a,o,i,r,s){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(n)}`];T.isNumber(a)&&l.push(`expires=${new Date(a).toUTCString()}`),T.isString(o)&&l.push(`path=${o}`),T.isString(i)&&l.push(`domain=${i}`),r===!0&&l.push("secure"),T.isString(s)&&l.push(`SameSite=${s}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Or(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Lr(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function Fa(t,n,a){let o=!Or(n);return t&&(o||a==!1)?Lr(t,n):n}const $n=t=>t instanceof ye?{...t}:t;function Fe(t,n){n=n||{};const a={};function o(c,p,f,b){return T.isPlainObject(c)&&T.isPlainObject(p)?T.merge.call({caseless:b},c,p):T.isPlainObject(p)?T.merge({},p):T.isArray(p)?p.slice():p}function i(c,p,f,b){if(T.isUndefined(p)){if(!T.isUndefined(c))return o(void 0,c,f,b)}else return o(c,p,f,b)}function r(c,p){if(!T.isUndefined(p))return o(void 0,p)}function s(c,p){if(T.isUndefined(p)){if(!T.isUndefined(c))return o(void 0,c)}else return o(void 0,p)}function l(c,p,f){if(f in n)return o(c,p);if(f in t)return o(void 0,c)}const d={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(c,p,f)=>i($n(c),$n(p),f,!0)};return T.forEach(Object.keys({...t,...n}),function(p){const f=d[p]||i,b=f(t[p],n[p],p);T.isUndefined(b)&&f!==l||(a[p]=b)}),a}const Ma=t=>{const n=Fe({},t);let{data:a,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:r,headers:s,auth:l}=n;if(n.headers=s=ye.from(s),n.url=Ba(Fa(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),T.isFormData(a)){if(de.hasStandardBrowserEnv||de.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(T.isFunction(a.getHeaders)){const d=a.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([p,f])=>{c.includes(p.toLowerCase())&&s.set(p,f)})}}if(de.hasStandardBrowserEnv&&(o&&T.isFunction(o)&&(o=o(n)),o||o!==!1&&Mr(n.url))){const d=i&&r&&Dr.read(r);d&&s.set(i,d)}return n},Ur=typeof XMLHttpRequest<"u",Wr=Ur&&function(t){return new Promise(function(a,o){const i=Ma(t);let r=i.data;const s=ye.from(i.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:c}=i,p,f,b,j,m;function v(){j&&j(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function z(){if(!g)return;const y=ye.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:y,config:t,request:g};Ra(function(S){a(S),v()},function(S){o(S),v()},E),g=null}"onloadend"in g?g.onloadend=z:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(z)},g.onabort=function(){g&&(o(new G("Request aborted",G.ECONNABORTED,t,g)),g=null)},g.onerror=function(h){const E=h&&h.message?h.message:"Network Error",M=new G(E,G.ERR_NETWORK,t,g);M.event=h||null,o(M),g=null},g.ontimeout=function(){let h=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||Ia;i.timeoutErrorMessage&&(h=i.timeoutErrorMessage),o(new G(h,E.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,t,g)),g=null},r===void 0&&s.setContentType(null),"setRequestHeader"in g&&T.forEach(s.toJSON(),function(h,E){g.setRequestHeader(E,h)}),T.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),l&&l!=="json"&&(g.responseType=i.responseType),c&&([b,m]=vt(c,!0),g.addEventListener("progress",b)),d&&g.upload&&([f,j]=vt(d),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",j)),(i.cancelToken||i.signal)&&(p=y=>{g&&(o(!y||y.type?new st(null,t,g):y),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const I=Pr(i.url);if(I&&de.protocols.indexOf(I)===-1){o(new G("Unsupported protocol "+I+":",G.ERR_BAD_REQUEST,t));return}g.send(r||null)})},qr=(t,n)=>{const{length:a}=t=t?t.filter(Boolean):[];if(n||a){let o=new AbortController,i;const r=function(c){if(!i){i=!0,l();const p=c instanceof Error?c:this.reason;o.abort(p instanceof G?p:new st(p instanceof Error?p.message:p))}};let s=n&&setTimeout(()=>{s=null,r(new G(`timeout of ${n}ms exceeded`,G.ETIMEDOUT))},n);const l=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),t=null)};t.forEach(c=>c.addEventListener("abort",r));const{signal:d}=o;return d.unsubscribe=()=>T.asap(l),d}},Hr=function*(t,n){let a=t.byteLength;if(a<n){yield t;return}let o=0,i;for(;o<a;)i=o+n,yield t.slice(o,i),o=i},$r=async function*(t,n){for await(const a of Vr(t))yield*Hr(a,n)},Vr=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:a,value:o}=await n.read();if(a)break;yield o}}finally{await n.cancel()}},Vn=(t,n,a,o)=>{const i=$r(t,n);let r=0,s,l=d=>{s||(s=!0,o&&o(d))};return new ReadableStream({async pull(d){try{const{done:c,value:p}=await i.next();if(c){l(),d.close();return}let f=p.byteLength;if(a){let b=r+=f;a(b)}d.enqueue(new Uint8Array(p))}catch(c){throw l(c),c}},cancel(d){return l(d),i.return()}},{highWaterMark:2})},Jn=64*1024,{isFunction:pt}=T,Jr=(({Request:t,Response:n})=>({Request:t,Response:n}))(T.global),{ReadableStream:Gn,TextEncoder:Kn}=T.global,Yn=(t,...n)=>{try{return!!t(...n)}catch{return!1}},Gr=t=>{t=T.merge.call({skipUndefined:!0},Jr,t);const{fetch:n,Request:a,Response:o}=t,i=n?pt(n):typeof fetch=="function",r=pt(a),s=pt(o);if(!i)return!1;const l=i&&pt(Gn),d=i&&(typeof Kn=="function"?(m=>v=>m.encode(v))(new Kn):async m=>new Uint8Array(await new a(m).arrayBuffer())),c=r&&l&&Yn(()=>{let m=!1;const v=new a(de.origin,{body:new Gn,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!v}),p=s&&l&&Yn(()=>T.isReadableStream(new o("").body)),f={stream:p&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(v,g)=>{let z=v&&v[m];if(z)return z.call(v);throw new G(`Response type '${m}' is not supported`,G.ERR_NOT_SUPPORT,g)})});const b=async m=>{if(m==null)return 0;if(T.isBlob(m))return m.size;if(T.isSpecCompliantForm(m))return(await new a(de.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(T.isArrayBufferView(m)||T.isArrayBuffer(m))return m.byteLength;if(T.isURLSearchParams(m)&&(m=m+""),T.isString(m))return(await d(m)).byteLength},j=async(m,v)=>{const g=T.toFiniteNumber(m.getContentLength());return g??b(v)};return async m=>{let{url:v,method:g,data:z,signal:I,cancelToken:y,timeout:h,onDownloadProgress:E,onUploadProgress:M,responseType:S,headers:O,withCredentials:k="same-origin",fetchOptions:u}=Ma(m),L=n||fetch;S=S?(S+"").toLowerCase():"text";let H=qr([I,y&&y.toAbortSignal()],h),F=null;const B=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let D;try{if(M&&c&&g!=="get"&&g!=="head"&&(D=await j(O,z))!==0){let Y=new a(v,{method:"POST",body:z,duplex:"half"}),te;if(T.isFormData(z)&&(te=Y.headers.get("content-type"))&&O.setContentType(te),Y.body){const[me,ce]=qn(D,vt(Hn(M)));z=Vn(Y.body,Jn,me,ce)}}T.isString(k)||(k=k?"include":"omit");const N=r&&"credentials"in a.prototype,J={...u,signal:H,method:g.toUpperCase(),headers:O.normalize().toJSON(),body:z,duplex:"half",credentials:N?k:void 0};F=r&&new a(v,J);let $=await(r?L(F,u):L(v,J));const K=p&&(S==="stream"||S==="response");if(p&&(E||K&&B)){const Y={};["status","statusText","headers"].forEach(w=>{Y[w]=$[w]});const te=T.toFiniteNumber($.headers.get("content-length")),[me,ce]=E&&qn(te,vt(Hn(E),!0))||[];$=new o(Vn($.body,Jn,me,()=>{ce&&ce(),B&&B()}),Y)}S=S||"text";let C=await f[T.findKey(f,S)||"text"]($,m);return!K&&B&&B(),await new Promise((Y,te)=>{Ra(Y,te,{data:C,headers:ye.from($.headers),status:$.status,statusText:$.statusText,config:m,request:F})})}catch(N){throw B&&B(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new G("Network Error",G.ERR_NETWORK,m,F),{cause:N.cause||N}):G.from(N,N&&N.code,m,F)}}},Kr=new Map,Da=t=>{let n=t&&t.env||{};const{fetch:a,Request:o,Response:i}=n,r=[o,i,a];let s=r.length,l=s,d,c,p=Kr;for(;l--;)d=r[l],c=p.get(d),c===void 0&&p.set(d,c=l?new Map:Gr(n)),p=c;return c};Da();const bn={http:mr,xhr:Wr,fetch:{get:Da}};T.forEach(bn,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Qn=t=>`- ${t}`,Yr=t=>T.isFunction(t)||t===null||t===!1;function Qr(t,n){t=T.isArray(t)?t:[t];const{length:a}=t;let o,i;const r={};for(let s=0;s<a;s++){o=t[s];let l;if(i=o,!Yr(o)&&(i=bn[(l=String(o)).toLowerCase()],i===void 0))throw new G(`Unknown adapter '${l}'`);if(i&&(T.isFunction(i)||(i=i.get(n))))break;r[l||"#"+s]=i}if(!i){const s=Object.entries(r).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=a?s.length>1?`since :
`+s.map(Qn).join(`
`):" "+Qn(s[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i}const Oa={getAdapter:Qr,adapters:bn};function Wt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new st(null,t)}function Xn(t){return Wt(t),t.headers=ye.from(t.headers),t.data=Ut.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Oa.getAdapter(t.adapter||rt.adapter,t)(t).then(function(o){return Wt(t),o.data=Ut.call(t,t.transformResponse,o),o.headers=ye.from(o.headers),o},function(o){return Pa(o)||(Wt(t),o&&o.response&&(o.response.data=Ut.call(t,t.transformResponse,o.response),o.response.headers=ye.from(o.response.headers))),Promise.reject(o)})}const La="1.13.3",It={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{It[t]=function(o){return typeof o===t||"a"+(n<1?"n ":" ")+t}});const Zn={};It.transitional=function(n,a,o){function i(r,s){return"[Axios v"+La+"] Transitional option '"+r+"'"+s+(o?". "+o:"")}return(r,s,l)=>{if(n===!1)throw new G(i(s," has been removed"+(a?" in "+a:"")),G.ERR_DEPRECATED);return a&&!Zn[s]&&(Zn[s]=!0,console.warn(i(s," has been deprecated since v"+a+" and will be removed in the near future"))),n?n(r,s,l):!0}};It.spelling=function(n){return(a,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function Xr(t,n,a){if(typeof t!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let i=o.length;for(;i-- >0;){const r=o[i],s=n[r];if(s){const l=t[r],d=l===void 0||s(l,r,t);if(d!==!0)throw new G("option "+r+" must be "+d,G.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new G("Unknown option "+r,G.ERR_BAD_OPTION)}}const ht={assertOptions:Xr,validators:It},we=ht.validators;let Re=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Un,response:new Un}}async request(n,a){try{return await this._request(n,a)}catch(o){if(o instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}}_request(n,a){typeof n=="string"?(a=a||{},a.url=n):a=n||{},a=Fe(this.defaults,a);const{transitional:o,paramsSerializer:i,headers:r}=a;o!==void 0&&ht.assertOptions(o,{silentJSONParsing:we.transitional(we.boolean),forcedJSONParsing:we.transitional(we.boolean),clarifyTimeoutError:we.transitional(we.boolean)},!1),i!=null&&(T.isFunction(i)?a.paramsSerializer={serialize:i}:ht.assertOptions(i,{encode:we.function,serialize:we.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),ht.assertOptions(a,{baseUrl:we.spelling("baseURL"),withXsrfToken:we.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let s=r&&T.merge(r.common,r[a.method]);r&&T.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),a.headers=ye.concat(s,r);const l=[];let d=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(a)===!1||(d=d&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let p,f=0,b;if(!d){const m=[Xn.bind(this),void 0];m.unshift(...l),m.push(...c),b=m.length,p=Promise.resolve(a);let v=a;for(;f<b;)p=p.then(m[f++]).then(g=>{v=g!==void 0?g:v}).catch(m[f++]).then(()=>v);return p}b=l.length;let j=a;for(;f<b;){const m=l[f++],v=l[f++];try{j=m(j)}catch(g){v.call(this,g);break}}try{p=Xn.call(this,j)}catch(m){return Promise.reject(m)}for(f=0,b=c.length;f<b;)p=p.then(c[f++]).catch(c[f++]);return p}getUri(n){n=Fe(this.defaults,n);const a=Fa(n.baseURL,n.url,n.allowAbsoluteUrls);return Ba(a,n.params,n.paramsSerializer)}};T.forEach(["delete","get","head","options"],function(n){Re.prototype[n]=function(a,o){return this.request(Fe(o||{},{method:n,url:a,data:(o||{}).data}))}});T.forEach(["post","put","patch"],function(n){function a(o){return function(r,s,l){return this.request(Fe(l||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Re.prototype[n]=a(),Re.prototype[n+"Form"]=a(!0)});let Zr=class Ua{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(r){a=r});const o=this;this.promise.then(i=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](i);o._listeners=null}),this.promise.then=i=>{let r;const s=new Promise(l=>{o.subscribe(l),r=l}).then(i);return s.cancel=function(){o.unsubscribe(r)},s},n(function(r,s,l){o.reason||(o.reason=new st(r,s,l),a(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const a=this._listeners.indexOf(n);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const n=new AbortController,a=o=>{n.abort(o)};return this.subscribe(a),n.signal.unsubscribe=()=>this.unsubscribe(a),n.signal}static source(){let n;return{token:new Ua(function(i){n=i}),cancel:n}}};function es(t){return function(a){return t.apply(null,a)}}function ts(t){return T.isObject(t)&&t.isAxiosError===!0}const an={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(an).forEach(([t,n])=>{an[n]=t});function Wa(t){const n=new Re(t),a=ba(Re.prototype.request,n);return T.extend(a,Re.prototype,n,{allOwnKeys:!0}),T.extend(a,n,null,{allOwnKeys:!0}),a.create=function(i){return Wa(Fe(t,i))},a}const oe=Wa(rt);oe.Axios=Re;oe.CanceledError=st;oe.CancelToken=Zr;oe.isCancel=Pa;oe.VERSION=La;oe.toFormData=Bt;oe.AxiosError=G;oe.Cancel=oe.CanceledError;oe.all=function(n){return Promise.all(n)};oe.spread=es;oe.isAxiosError=ts;oe.mergeConfig=Fe;oe.AxiosHeaders=ye;oe.formToJSON=t=>Ea(T.isHTMLForm(t)?new FormData(t):t);oe.getAdapter=Oa.getAdapter;oe.HttpStatusCode=an;oe.default=oe;const{Axios:Al,AxiosError:Tl,CanceledError:Nl,isCancel:Bl,CancelToken:Il,VERSION:El,all:Pl,Cancel:Rl,isAxiosError:Fl,spread:Ml,toFormData:Dl,AxiosHeaders:Ol,HttpStatusCode:Ll,formToJSON:Ul,getAdapter:Wl,mergeConfig:ql}=oe,vn="https://sentinel-authority-production.up.railway.app",Et=vn,q=oe.create({baseURL:vn});q.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(t.headers.Authorization=`Bearer ${n}`),t});q.interceptors.response.use(t=>t,t=>(t.response&&t.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(t)));const qa=x.createContext(null);function ns({children:t}){const[n,a]=x.useState(null),[o,i]=x.useState(!0);x.useEffect(()=>{const d=localStorage.getItem("token"),c=localStorage.getItem("user");d&&c&&a(JSON.parse(c)),i(!1)},[]);const r=async(d,c)=>{const p=await q.post("/api/auth/login",{email:d,password:c});return localStorage.setItem("token",p.data.access_token),localStorage.setItem("user",JSON.stringify(p.data.user)),a(p.data.user),p.data.user},s=async d=>{const c=await q.post("/api/auth/register",d);return localStorage.setItem("token",c.data.access_token),localStorage.setItem("user",JSON.stringify(c.data.user)),a(c.data.user),c.data.user},l=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null)};return e.jsx(qa.Provider,{value:{user:n,login:r,register:s,logout:l,loading:o},children:t})}function pe(){return x.useContext(qa)}const Ha=fe.createContext();function as({children:t}){const[n,a]=x.useState([]),o=fe.useCallback((s,l="info")=>{const d=Date.now()+Math.random();a(c=>[...c,{id:d,message:s,type:l}]),setTimeout(()=>a(c=>c.filter(p=>p.id!==d)),4500)},[]),i=fe.useCallback(s=>{a(l=>l.filter(d=>d.id!==s))},[]),r={success:{bg:"rgba(92,214,133,.10)",border:"rgba(92,214,133,.35)",text:"#5CD685",icon:""},error:{bg:"rgba(214,92,92,.10)",border:"rgba(214,92,92,.35)",text:"#D65C5C",icon:""},warning:{bg:"rgba(214,160,92,.10)",border:"rgba(214,160,92,.35)",text:"#D6A05C",icon:""},info:{bg:"rgba(157,140,207,.10)",border:"rgba(157,140,207,.35)",text:"#a896d6",icon:""}};return e.jsxs(Ha.Provider,{value:{show:o},children:[t,e.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,display:"flex",flexDirection:"column",gap:"6px",maxWidth:"380px"},children:n.map(s=>{const l=r[s.type]||r.info;return e.jsxs("div",{style:{background:l.bg,backdropFilter:"blur(12px)",border:`1px solid ${l.border}`,padding:"10px 14px",display:"flex",alignItems:"flex-start",gap:"8px",animation:"slideIn .25s ease-out"},children:[e.jsx("span",{style:{fontSize:"13px",lineHeight:1,marginTop:"1px"},children:l.icon}),e.jsx("span",{style:{flex:1,color:l.text,fontSize:"12px",lineHeight:1.4,fontFamily:"var(--mono)"},children:s.message}),e.jsx("button",{onClick:()=>i(s.id),style:{background:"none",border:"none",color:l.text,cursor:"pointer",fontSize:"14px",padding:0,lineHeight:1,opacity:.6},children:""})]},s.id)})})]})}function Ce(){return fe.useContext(Ha)}const ee={purpleBright:"#a896d6",bgDeep:"#2a2f3d",accentGreen:"#5CD685",textPrimary:"rgba(255,255,255,.94)",textSecondary:"rgba(255,255,255,.78)",serif:"Georgia, 'Source Serif 4', serif",mono:"Consolas, 'IBM Plex Mono', monospace",sans:"Calibri, 'Inter', system-ui, -apple-system, sans-serif"},$a=fe.createContext();function is({children:t}){const[n,a]=x.useState({open:!1,title:"",message:"",onConfirm:null,onCancel:null,confirmLabel:"Confirm",danger:!1}),o=i=>new Promise(r=>{a({open:!0,title:i.title||"Confirm",message:i.message||"Are you sure?",confirmLabel:i.confirmLabel||"Confirm",danger:i.danger||!1,onConfirm:()=>{a(s=>({...s,open:!1})),r(!0)},onCancel:()=>{a(s=>({...s,open:!1})),r(!1)}})});return e.jsxs($a.Provider,{value:o,children:[t,n.open&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,.6)",backdropFilter:"blur(6px)"},children:e.jsxs("div",{style:{background:ee.bgDeep,border:"1px solid rgba(255,255,255,.07)",maxWidth:"400px",width:"90%"},children:[e.jsxs("div",{style:{padding:"20px 20px 14px"},children:[e.jsx("h3",{style:{margin:"0 0 8px",fontFamily:ee.mono,fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.danger?"#D65C5C":ee.purpleBright},children:n.title}),e.jsx("p",{style:{margin:0,color:ee.textSecondary,fontSize:"13px",lineHeight:1.5},children:n.message})]}),e.jsxs("div",{style:{padding:"14px 20px",display:"flex",justifyContent:"flex-end",gap:"10px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[e.jsx("button",{className:"btn",style:{padding:"8px 18px"},onClick:n.onCancel,children:"Cancel"}),e.jsx("button",{className:`btn ${n.danger?"":"primary"}`,style:{padding:"8px 18px",...n.danger?{borderColor:"rgba(214,92,92,.4)",color:"#D65C5C"}:{}},onClick:n.onConfirm,children:n.confirmLabel})]})]})})]})}const Be=()=>fe.useContext($a);function ue({children:t,roles:n}){const{user:a,loading:o}=pe();return o?e.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"#2a2f3d",color:"rgba(255,255,255,0.94)"},children:"Loading..."}):a?a.role==="pending"?e.jsx(gt,{to:"/pending"}):n&&!n.includes(a.role)?e.jsx(gt,{to:"/dashboard"}):t:e.jsx(gt,{to:"/login"})}function os(){const[t,n]=x.useState(window.innerWidth<768);return x.useEffect(()=>{const a=()=>n(window.innerWidth<768);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t}function wt({size:t=24}){return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"1",y:"1",width:"22",height:"22",rx:"5",fill:"#5B4B8A",stroke:"#9d8ccf",strokeWidth:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3.5",fill:"#c4b8e8",children:e.jsx("animate",{attributeName:"opacity",values:"0.75;1;0.75",dur:"7s",repeatCount:"indefinite"})})]})}function ge({children:t}){var O;const{user:n,logout:a}=pe(),o=os(),[i,r]=x.useState(!o),[s,l]=x.useState([]),[d,c]=x.useState([]),p=Ge(),[f,b]=x.useState([]),[j,m]=x.useState(!1),[v,g]=x.useState(0);x.useEffect(()=>{n&&(q.get("/api/certificates/").then(k=>l(k.data||[])).catch(()=>l([])),q.get("/api/applications/").then(k=>c(k.data.applications||k.data||[])).catch(()=>c([])),localStorage.getItem("token")&&q.get("/api/users/notifications").then(k=>{b(k.data.notifications||[]),g(k.data.unread_count||0)}).catch(()=>{}))},[n]),x.useEffect(()=>{if(!n)return;const k=setInterval(()=>{localStorage.getItem("token")&&q.get("/api/users/notifications").then(u=>{b(u.data.notifications||[]),g(u.data.unread_count||0)}).catch(()=>{})},6e4);return()=>clearInterval(k)},[n]);const z=()=>{q.post("/api/users/notifications/mark-read").then(()=>g(0)).catch(()=>{}),m(!1)},I=[{name:"Dashboard",href:"/dashboard",icon:aa,roles:["admin","applicant"]},{name:"Applications",href:"/applications",icon:Ze,roles:["admin","applicant"]},{name:"CAT-72 Console",href:"/cat72",icon:ia,roles:["admin","applicant"]},{name:"Certificates",href:"/certificates",icon:cn,roles:["admin","applicant"]},{name:"Resources",href:"/resources",icon:oa,roles:["admin","applicant"]},{name:"Monitoring",href:"/monitoring",icon:ci,roles:["admin","applicant"]},{name:"Licensees",href:"/licensees",icon:Gt,roles:["admin"]},{name:"User Management",href:"/users",icon:Gt,roles:["admin"]},{name:"My Activity",href:"/my-activity",icon:dn,roles:["admin","applicant"]},{name:"Activity Log",href:"/activity",icon:Ze,roles:["admin"]},{name:"Settings",href:"/settings",icon:di,roles:["admin","applicant"]},{name:"API Docs",href:"/api-docs",icon:zn,roles:["admin"]}],y=Array.isArray(s)&&s.some(k=>k.state==="conformant"||k.state==="active"||k.state==="issued"),h=Array.isArray(d)&&d.some(k=>k.state==="approved"||k.state==="testing"),E=y||h,M=I.filter(k=>!(!k.roles.includes((n==null?void 0:n.role)||"")||k.requiresCert&&(n==null?void 0:n.role)!=="admin"&&!E)),S=k=>p.pathname===k||k!=="/dashboard"&&p.pathname.startsWith(k);return e.jsxs("div",{style:{minHeight:"100vh",color:ee.textPrimary,fontFamily:ee.sans},children:[e.jsx("div",{className:"sa-grid-overlay"}),e.jsx("div",{className:"sa-vignette"}),o&&i&&e.jsx("div",{onClick:()=>r(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,.5)",zIndex:40}}),e.jsxs("aside",{style:{width:"240px",background:"rgba(42,47,61,.92)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRight:"1px solid rgba(255,255,255,.06)",position:"fixed",top:0,left:0,bottom:0,zIndex:50,transform:!o||i?"translateX(0)":"translateX(-100%)",transition:"transform .2s ease",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{height:"56px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",borderBottom:"1px solid rgba(255,255,255,.06)",flexShrink:0},children:[e.jsxs(ae,{to:"/dashboard",style:{display:"flex",alignItems:"center",gap:"10px",textDecoration:"none"},children:[e.jsx(wt,{size:22}),e.jsx("span",{style:{fontFamily:ee.mono,fontSize:"9px",letterSpacing:"2.5px",textTransform:"uppercase",color:"rgba(255,255,255,.82)"},children:"Sentinel Authority"})]}),o&&e.jsx("button",{onClick:()=>r(!1),style:{color:"var(--text-tertiary)",background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e.jsx(Kt,{size:16})})]}),e.jsx("nav",{style:{flex:1,overflowY:"auto",padding:"8px 0"},children:M.map(k=>{const u=S(k.href);return e.jsxs(ae,{to:k.href,onClick:()=>o&&r(!1),style:{display:"flex",alignItems:"center",gap:"10px",padding:"9px 16px",fontFamily:ee.mono,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:u?ee.textPrimary:"rgba(255,255,255,.35)",borderLeft:u?`2px solid ${ee.purpleBright}`:"2px solid transparent",background:u?"rgba(157,140,207,.06)":"transparent",transition:"color .2s, background .15s",textDecoration:"none"},onMouseEnter:L=>{u||(L.currentTarget.style.color="rgba(255,255,255,.65)",L.currentTarget.style.background="rgba(255,255,255,.02)")},onMouseLeave:L=>{u||(L.currentTarget.style.color="rgba(255,255,255,.35)",L.currentTarget.style.background="transparent")},children:[k.icon==="brand"?e.jsx(wt,{size:13}):e.jsx(k.icon,{size:13,style:{opacity:u?.85:.4}}),k.name]},k.name)})}),e.jsxs("div",{style:{padding:"14px 16px",borderTop:"1px solid rgba(255,255,255,.06)",flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[e.jsx("div",{className:"sa-avatar",style:{width:"26px",height:"26px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:"#fff",fontSize:"10px",fontWeight:600},children:((O=n==null?void 0:n.full_name)==null?void 0:O[0])||"U"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:ee.textPrimary,lineHeight:1.2},children:n==null?void 0:n.full_name}),e.jsx("div",{style:{fontFamily:ee.mono,fontSize:"8px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.3)"},children:n==null?void 0:n.role})]})]}),e.jsxs("button",{onClick:a,style:{display:"flex",alignItems:"center",gap:"6px",fontFamily:ee.mono,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.3)",background:"none",border:"none",cursor:"pointer",padding:0},onMouseEnter:k=>k.currentTarget.style.color=ee.textPrimary,onMouseLeave:k=>k.currentTarget.style.color="rgba(255,255,255,.3)",children:[e.jsx(pi,{size:11})," Sign Out"]})]})]}),e.jsxs("div",{style:{marginLeft:o?0:"240px",position:"relative",zIndex:10,minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e.jsxs("header",{style:{height:"56px",display:"flex",alignItems:"center",padding:"0 24px",gap:"14px",borderBottom:"1px solid rgba(255,255,255,.06)",background:"rgba(42,47,61,.88)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",position:"sticky",top:0,zIndex:30},children:[o&&e.jsx("button",{onClick:()=>r(!0),style:{color:"var(--text-tertiary)",background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e.jsx(mi,{size:18})}),e.jsx("div",{style:{flex:1}}),e.jsxs("a",{href:"https://sentinelauthority.org",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"5px",color:"rgba(255,255,255,.35)",fontFamily:ee.mono,fontSize:"8px",letterSpacing:"1.5px",textTransform:"uppercase",textDecoration:"none",transition:"color .2s"},onMouseEnter:k=>k.currentTarget.style.color=ee.textPrimary,onMouseLeave:k=>k.currentTarget.style.color="rgba(255,255,255,.35)",children:[e.jsx(zn,{size:11})," Main Site"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>m(!j),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:j?ee.purpleBright:"rgba(255,255,255,.4)",transition:"color .2s"},children:[e.jsx(ui,{size:15,strokeWidth:1.5}),v>0&&e.jsx("span",{style:{position:"absolute",top:"-1px",right:"-1px",minWidth:"13px",height:"13px",borderRadius:"50%",background:"#D65C5C",color:"#fff",fontSize:"7px",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:ee.mono,padding:"0 2px"},children:v>9?"9+":v})]}),j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>m(!1),style:{position:"fixed",inset:0,zIndex:90}}),e.jsxs("div",{style:{position:"absolute",right:0,top:"40px",width:"min(320px, 88vw)",maxHeight:"65vh",overflowY:"auto",background:"rgba(42,47,61,.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,.07)",zIndex:100},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[e.jsx("span",{style:{fontFamily:ee.mono,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:"rgba(255,255,255,.35)"},children:"Notifications"}),v>0&&e.jsx("button",{onClick:z,style:{background:"none",border:"none",color:ee.purpleBright,fontFamily:ee.mono,fontSize:"9px",letterSpacing:"1px",cursor:"pointer",padding:0},children:"Mark all read"})]}),f.length===0?e.jsx("div",{style:{padding:"28px 14px",textAlign:"center",color:"rgba(255,255,255,.3)",fontSize:"11px",fontFamily:ee.mono},children:"No recent activity"}):f.map((k,u)=>{const L={success:ee.accentGreen,warning:"#D6A05C",info:ee.purpleBright,error:"#D65C5C"}[k.type]||ee.purpleBright;return e.jsx("div",{className:"sa-hover-row",onClick:()=>{k.resource_type==="application"&&k.resource_id&&(m(!1),window.location.hash="#/applications/"+k.resource_id)},style:{padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,.04)",cursor:k.resource_id?"pointer":"default"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"},children:[e.jsx("span",{style:{display:"inline-block",width:"4px",height:"4px",borderRadius:"50%",background:L,marginTop:"6px",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{margin:0,fontSize:"12px",color:k.read?ee.textSecondary:ee.textPrimary,lineHeight:1.4},children:k.message}),e.jsxs("span",{style:{fontFamily:ee.mono,fontSize:"8px",color:"rgba(255,255,255,.3)",marginTop:"3px",display:"block"},children:[k.timestamp?new Date(k.timestamp).toLocaleString():"",k.user_email?"  "+k.user_email:""]})]})]})},k.id||u)})]})]})]})]}),e.jsx("main",{className:"sa-main-content",style:{flex:1,padding:"clamp(16px, 3vw, 32px)",position:"relative",zIndex:1},children:t})]})]})}function rs(){const{login:t,register:n}=pe(),a=Me(),[o,i]=x.useState(!1),[r,s]=x.useState(""),[l,d]=x.useState({email:"",password:"",full_name:"",organization_name:""}),[c,p]=x.useState(!1),[f,b]=x.useState(!1),[j,m]=x.useState(""),[v,g]=x.useState(!1),z=async k=>{var u,L,H,F;k.preventDefault(),s("");try{o?await n(l):await t(l.email,l.password),a("/dashboard")}catch(B){((L=(u=B.response)==null?void 0:u.data)==null?void 0:L.detail)==="2FA_REQUIRED"?b(!0):s(((F=(H=B.response)==null?void 0:H.data)==null?void 0:F.detail)||"Authentication failed")}},I=async k=>{var u,L;k.preventDefault(),g(!0),s("");try{await t(l.email,l.password,j),a("/dashboard")}catch(H){s(((L=(u=H.response)==null?void 0:u.data)==null?void 0:L.detail)||"Invalid code")}finally{g(!1)}},y="Consolas, 'IBM Plex Mono', monospace",h="Georgia, 'Source Serif 4', serif",E="rgba(255,255,255,.94)",M="rgba(255,255,255,.78)",S="rgba(255,255,255,.50)",O="#a896d6";return e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:9999,overflowY:"auto",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 20px",fontFamily:"Calibri, 'Inter', system-ui, sans-serif",color:E,background:"radial-gradient(1200px 700px at 15% 10%, rgba(91,75,138,.10), transparent 55%), radial-gradient(900px 600px at 85% 80%, rgba(92,214,133,.04), transparent 55%), #2a2f3d",WebkitFontSmoothing:"antialiased"},children:[e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,backgroundImage:"linear-gradient(rgba(255,255,255,.015) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.015) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.25,maskImage:"radial-gradient(ellipse at center, black 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, black 20%, transparent 70%)"}}),e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,background:"radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,.2) 85%, rgba(0,0,0,.4) 100%)"}}),e.jsxs("div",{style:{width:"100%",maxWidth:"460px",position:"relative",zIndex:1},children:[e.jsx("div",{style:{fontFamily:y,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:S,marginBottom:"16px"},children:"Sentinel Authority"}),e.jsx("h1",{style:{fontFamily:h,fontSize:"clamp(32px, 5vw, 48px)",fontWeight:200,letterSpacing:"-0.03em",lineHeight:1.1,margin:"0 0 12px",color:E},children:f?e.jsxs(e.Fragment,{children:["Two-Factor ",e.jsx("span",{style:{color:O,fontStyle:"italic"},children:"Auth"})]}):e.jsxs(e.Fragment,{children:["Sign ",e.jsx("span",{style:{color:O,fontStyle:"italic"},children:"In"})]})}),e.jsx("p",{style:{color:M,fontWeight:200,lineHeight:1.75,fontSize:"15px",margin:"0 0 48px",maxWidth:"50ch"},children:f?"Enter the 6-digit code from your authenticator app.":"Access the ODDC certification platform. Manage applications, certificates, and ENVELO Interlock."}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.04)",marginBottom:"40px"}}),f?e.jsxs("div",{children:[r&&e.jsx("p",{style:{color:"rgba(214,92,92,.95)",fontFamily:y,fontSize:"11px",letterSpacing:"1px",marginBottom:"24px"},children:r}),e.jsxs("form",{onSubmit:I,children:[e.jsx("div",{style:{fontFamily:y,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:S,marginBottom:"12px"},children:"Verification Code"}),e.jsx("input",{type:"text",value:j,onChange:k=>m(k.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,autoFocus:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:E,fontFamily:y,fontSize:"28px",letterSpacing:"10px",textAlign:"center",padding:"16px 0",outline:"none",marginBottom:"32px"}}),e.jsx("button",{type:"submit",className:"btn primary",disabled:v||j.length!==6,style:{width:"100%",justifyContent:"center"},children:v?"Verifying":"Verify "})]}),e.jsxs("button",{onClick:()=>{b(!1),m(""),s("")},style:{fontFamily:y,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:O,background:"none",border:"none",cursor:"pointer",marginTop:"20px",padding:0},children:[""," Back to sign in"]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:0,borderBottom:"1px solid rgba(255,255,255,.04)",marginBottom:"36px"},children:[e.jsx("button",{onClick:()=>{i(!1),s("")},type:"button",style:{fontFamily:y,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:o?S:E,background:"none",border:"none",borderBottom:o?"1px solid transparent":"1px solid "+O,padding:"10px 20px 10px 0",cursor:"pointer"},children:"Sign In"}),e.jsx("button",{onClick:()=>{i(!0),s("")},type:"button",style:{fontFamily:y,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:o?E:S,background:"none",border:"none",borderBottom:o?"1px solid "+O:"1px solid transparent",padding:"10px 20px",cursor:"pointer"},children:"Register"})]}),r&&e.jsx("p",{style:{color:"rgba(214,92,92,.95)",fontFamily:y,fontSize:"11px",letterSpacing:"1px",marginBottom:"24px"},children:r}),e.jsxs("form",{onSubmit:z,children:[o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"28px"},children:[e.jsx("label",{style:{display:"block",fontFamily:y,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:S,marginBottom:"12px"},children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Jane Smith",value:l.full_name,onChange:k=>d({...l,full_name:k.target.value}),required:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:E,fontFamily:y,fontSize:"14px",padding:"10px 0",outline:"none"}})]}),e.jsxs("div",{style:{marginBottom:"28px"},children:[e.jsx("label",{style:{display:"block",fontFamily:y,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:S,marginBottom:"12px"},children:"Organization"}),e.jsx("input",{type:"text",placeholder:"Acme Robotics Inc.",value:l.organization_name,onChange:k=>d({...l,organization_name:k.target.value}),required:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:E,fontFamily:y,fontSize:"14px",padding:"10px 0",outline:"none"}})]})]}),e.jsxs("div",{style:{marginBottom:"28px"},children:[e.jsx("label",{style:{display:"block",fontFamily:y,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:S,marginBottom:"12px"},children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"you@company.com",value:l.email,onChange:k=>d({...l,email:k.target.value}),required:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:E,fontFamily:y,fontSize:"14px",padding:"10px 0",outline:"none"}})]}),e.jsxs("div",{style:{marginBottom:"36px"},children:[e.jsx("label",{style:{display:"block",fontFamily:y,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:S,marginBottom:"12px"},children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:c?"text":"password",placeholder:"".repeat(12),value:l.password,onChange:k=>d({...l,password:k.target.value}),required:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:E,fontFamily:y,fontSize:"14px",padding:"10px 0",paddingRight:"40px",outline:"none"}}),e.jsx("button",{type:"button",onClick:()=>p(!c),style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:S,padding:"4px"},children:c?e.jsx(gi,{size:14}):e.jsx(xi,{size:14})})]})]}),e.jsx("button",{type:"submit",className:"btn primary",style:{width:"100%",justifyContent:"center"},children:o?"Create Account ":"Sign In "})]}),!o&&e.jsx("a",{href:"mailto:support@sentinelauthority.org?subject=Password%20Reset%20Request",style:{fontFamily:y,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:O,marginTop:"20px",display:"inline-block"},children:"Forgot password?"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.04)",marginTop:"48px",paddingTop:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontFamily:y,fontSize:"9px",letterSpacing:"1.5px",color:S,textTransform:"uppercase"},children:"Powered by ENVELO Interlock"}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsx("a",{href:"https://sentinelauthority.org",style:{fontFamily:y,fontSize:"9px",letterSpacing:"1.5px",color:O},children:"Main Site"}),e.jsx("a",{href:"https://sentinelauthority.org/privacy.html",style:{fontFamily:y,fontSize:"9px",letterSpacing:"1.5px",color:O},children:"Privacy"}),e.jsx("a",{href:"https://sentinelauthority.org/terms.html",style:{fontFamily:y,fontSize:"9px",letterSpacing:"1.5px",color:O},children:"Terms"})]})]})]})]})}function ne({children:t,className:n="",style:a={},...o}){return e.jsx("div",{className:`panel ${n}`,style:a,...o,children:t})}function xe({label:t,value:n,sublabel:a,subtitle:o,color:i,icon:r,onClick:s,className:l=""}){const d=a||o;return e.jsx("div",{className:`stat-card ${l}`,"data-clickable":s?"true":void 0,onClick:s,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:"var(--text-tertiary)",marginBottom:"10px"},children:t}),e.jsx("div",{style:{fontFamily:"var(--serif)",fontSize:"28px",fontWeight:"normal",color:i||"var(--text-primary)",letterSpacing:"-0.02em",lineHeight:1},children:n}),d&&e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"10px",letterSpacing:"1px",color:"rgba(255,255,255,.38)",marginTop:"8px"},children:d})]}),r&&e.jsx("div",{style:{opacity:.5,color:i||"var(--text-tertiary)"},children:r})]})})}function ss({icon:t,title:n,message:a,description:o,action:i}){const r=a||o;return e.jsxs("div",{style:{textAlign:"center",padding:"48px 20px",fontFamily:"var(--mono)"},children:[t&&e.jsx("div",{style:{marginBottom:"16px",opacity:.4,display:"flex",justifyContent:"center"},children:fe.isValidElement(t)?t:e.jsx(t,{size:28,strokeWidth:1.5})}),n&&e.jsx("div",{style:{fontFamily:"var(--serif)",fontSize:"20px",fontWeight:"normal",color:"var(--text-secondary)",marginBottom:"8px"},children:n}),r&&e.jsx("div",{style:{fontSize:"12px",letterSpacing:"0.5px",color:"var(--text-tertiary)",maxWidth:"380px",margin:"0 auto",lineHeight:1.7},children:r}),i&&e.jsx("div",{style:{marginTop:"20px"},children:i})]})}function ls(){var y;Be();const{user:t}=pe();Ce();const n=Me(),[a,o]=x.useState([]),[i,r]=x.useState([]),[s,l]=x.useState(!0),[d,c]=x.useState(null),[p,f]=x.useState([]);x.useEffect(()=>{Promise.all([q.get("/api/applications/").catch(()=>({data:[]})),q.get("/api/certificates/").catch(()=>({data:[]})),q.get("/api/envelo/monitoring/overview").catch(()=>({data:null})),q.get("/api/audit/my-logs?limit=5&offset=0").catch(()=>({data:{logs:[]}}))]).then(([h,E,M,S])=>{o(h.data.applications||h.data||[]),r(E.data||[]),M.data&&c(M.data),f(S.data.logs||S.data||[]),l(!1)})},[]);const b=[{key:"pending",label:"Submitted"},{key:"under_review",label:"In Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"}],j=h=>b.findIndex(E=>E.key===h),m=h=>h==="conformant"?"var(--accent-green)":h==="revoked"||h==="suspended"?"var(--accent-red)":h==="testing"||h==="approved"?"var(--purple-bright)":"var(--accent-amber)",v=h=>{switch(h){case"pending":return"Awaiting review";case"under_review":return"Under evaluation";case"approved":return"Preparing CAT-72";case"testing":return"Test in progress";case"conformant":return"Certificate issued";case"revoked":return"Suspended";default:return"Pending"}};if(s)return e.jsx("div",{className:"hud-label",style:{padding:"60px",textAlign:"center"},children:"Loading"});const z=((d==null?void 0:d.sessions)||[]).filter(h=>{const E=h.last_heartbeat_at||h.last_telemetry_at||h.last_activity||h.started_at;return h.status==="active"&&E&&Date.now()-new Date(E).getTime()<12e4}).length,I=((y=d==null?void 0:d.summary)==null?void 0:y.total)||0;return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--purple-bright)",letterSpacing:"4px",display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:"var(--purple-bright)"}}),"ODDC CERTIFICATION"]}),e.jsxs("h1",{style:{fontFamily:"var(--serif)",fontSize:"clamp(26px,5vw,38px)",fontWeight:200,margin:"0 0 6px",letterSpacing:"-0.02em"},children:["Welcome",t!=null&&t.full_name?`, ${t.full_name.split(" ")[0]}`:""]}),e.jsxs("p",{style:{color:"var(--text-tertiary)",fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px"},children:[new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),t!=null&&t.organization_name?`  ${t.organization_name}`:""]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0",marginBottom:"32px",borderTop:"none",borderBottom:"none"},children:[e.jsx(xe,{onClick:()=>n("/applications"),label:"Applications",value:a.length,color:"var(--purple-bright)",icon:e.jsx(Ze,{size:16,strokeWidth:1.5}),sublabel:a.filter(h=>h.state==="pending"||h.state==="under_review").length>0?`${a.filter(h=>h.state==="pending"||h.state==="under_review").length} in review`:null}),e.jsx(xe,{onClick:()=>n("/certificates"),label:"Certificates",value:i.length,color:"var(--accent-green)",icon:e.jsx(cn,{size:16,strokeWidth:1.5}),sublabel:i.filter(h=>h.state==="conformant").length>0?`${i.filter(h=>h.state==="conformant").length} active`:null}),e.jsx(xe,{onClick:()=>n("/cat72"),label:"Active Tests",value:a.filter(h=>h.state==="testing").length,color:"var(--accent-amber)",icon:e.jsx(dn,{size:16,strokeWidth:1.5})}),e.jsx(xe,{onClick:()=>n("/monitoring"),label:"Live Status",value:I>0?z:"",color:I>0?z>0?"var(--accent-green)":"var(--accent-amber)":"var(--text-tertiary)",icon:e.jsx(ra,{size:16,strokeWidth:1.5}),sublabel:I>0?z>0?`${z} of ${I} online`:"All offline":null})]}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("span",{className:"hud-label",children:"Your Applications"}),a.length>0&&e.jsx(ae,{to:"/applications",className:"hud-link",style:{fontSize:"10px"},children:"View All "})]}),a.length===0?e.jsxs("div",{className:"hud-frame",style:{textAlign:"center",padding:"48px 20px"},children:[e.jsx("i",{}),e.jsx(wt,{size:28}),e.jsx("p",{style:{fontFamily:"var(--serif)",fontSize:"17px",color:"var(--text-secondary)",marginBottom:"8px"},children:"Begin Your Certification"}),e.jsx("p",{style:{fontSize:"12px",color:"var(--text-tertiary)",maxWidth:"360px",margin:"0 auto 20px",lineHeight:1.7},children:"Submit your autonomous system for ODDC certification. Our CAT-72 test validates real-time boundary enforcement over 72 hours."}),e.jsxs(ae,{to:"/applications/new",className:"btn primary",children:[e.jsx(sa,{size:12})," New Application"]})]}):e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),a.map((h,E)=>{var S;const M=j(h.state);return e.jsx(ae,{to:`/applications/${h.id}`,style:{textDecoration:"none",display:"block"},children:e.jsxs("div",{className:"hud-row",style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",paddingTop:"14px",paddingBottom:"14px"},children:[e.jsx("span",{className:"hud-num",style:{minWidth:"20px"},children:String(E+1).padStart(2,"0")}),e.jsx("span",{className:"hud-dot",style:{background:m(h.state),marginRight:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{className:"hud-title",children:h.system_name}),e.jsxs("div",{style:{fontFamily:"var(--mono)",fontSize:"10px",letterSpacing:"1px",color:"var(--text-tertiary)",marginTop:"2px"},children:[h.application_number,"  ",v(h.state)]})]}),e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:m(h.state)},children:(S=h.state)==null?void 0:S.replace(/_/g," ")}),e.jsx("div",{style:{display:"flex",gap:"2px",width:"60px"},children:b.map((O,k)=>e.jsx("div",{className:"sa-fill",style:{flex:1,height:"3px","--sa-bg":k<=M?m(h.state):"rgba(255,255,255,0.04)"}},O.key))})]})},h.id)})]})]}),i.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("span",{className:"hud-label",style:{marginBottom:"16px",display:"block"},children:"Your Certificates"}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),i.map((h,E)=>e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"13px",color:"var(--accent-green)",letterSpacing:"1px"},children:h.certificate_number}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"2px"},children:["Issued: ",h.issued_at?new Date(h.issued_at).toLocaleDateString():"",h.expires_at?`  Expires: ${new Date(h.expires_at).toLocaleDateString()}`:""]})]}),e.jsxs("a",{href:`${Et}/api/certificates/${h.certificate_number}/pdf`,target:"_blank",className:"btn",style:{padding:"6px 14px",fontSize:"9px"},children:[e.jsx(yt,{size:11})," PDF"]})]},h.id))]})]}),i.length===0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("span",{className:"hud-label",style:{marginBottom:"16px",display:"block"},children:"Certificates"}),e.jsx("div",{style:{textAlign:"center",padding:"32px 20px",borderTop:"none"},children:e.jsx("p",{style:{fontSize:"12px",color:"var(--text-tertiary)",fontFamily:"var(--mono)",letterSpacing:"0.5px"},children:"Certificates are issued after your system passes the 72-hour CAT-72 conformance test."})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("span",{className:"hud-label",children:"Recent Activity"}),e.jsx(ae,{to:"/my-activity",className:"hud-link",style:{fontSize:"10px"},children:"View All "})]}),p.length===0?e.jsx("p",{style:{color:"var(--text-tertiary)",fontSize:"12px",fontFamily:"var(--mono)",textAlign:"center",padding:"20px 0"},children:"No activity yet"}):e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),p.map((h,E)=>{var H,F,B;const M={user_login:"Signed in",user_registered:"Account created",login_failed:"Failed login",application_submitted:"Application submitted",application_state_changed:"Status updated",application_deleted:"Application deleted",test_created:"CAT-72 test scheduled",test_started:"CAT-72 test started",test_completed:"CAT-72 test completed",certificate_issued:"Certificate issued",certificate_suspended:"Certificate suspended",certificate_revoked:"Certificate revoked",certificate_reinstated:"Certificate reinstated",api_key_created:"API key created",api_key_revoked:"API key revoked",password_changed:"Password changed",profile_updated:"Profile updated","2fa_enabled":"2FA enabled","2fa_disabled":"2FA disabled"},S={certificate_issued:"var(--accent-green)",test_completed:"var(--accent-green)",certificate_revoked:"var(--accent-red)",login_failed:"var(--accent-red)",certificate_suspended:"var(--accent-amber)",application_submitted:"var(--purple-bright)",test_created:"var(--purple-bright)"},O=M[h.action]||((H=h.action)==null?void 0:H.replace(/_/g," ")),k=S[h.action]||"rgba(157,140,207,0.5)",u=((F=h.details)==null?void 0:F.system_name)||((B=h.details)==null?void 0:B.application_number)||"",L=D=>{const N=Date.now()-new Date(D).getTime(),J=Math.floor(N/6e4);if(J<1)return"just now";if(J<60)return J+"m ago";const $=Math.floor(J/60);return $<24?$+"h ago":Math.floor($/24)+"d ago"};return e.jsxs("div",{className:"hud-row",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{className:"hud-dot",style:{background:k,marginRight:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:O}),u&&e.jsx("span",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginLeft:"8px"},children:u})]}),e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",color:"var(--text-tertiary)",letterSpacing:"0.5px",flexShrink:0},children:h.timestamp?L(h.timestamp):""})]},h.id||E)})]})]})]})}function cs(){var O,k;const{user:t}=pe(),n=Ce(),a=Be(),o=Me(),[i,r]=x.useState(null),[s,l]=x.useState([]),[d,c]=x.useState([]),[p,f]=x.useState([]),[b,j]=x.useState([]),[m,v]=x.useState(null),[g,z]=x.useState(!1),I=u=>{u&&z(!0),q.get("/api/dashboard/stats").then(L=>r(L.data)).catch(console.error),q.get("/api/dashboard/recent-applications").then(L=>l(L.data)).catch(console.error),q.get("/api/dashboard/active-tests").then(L=>c(L.data)).catch(console.error),q.get("/api/applications/").then(L=>f(L.data.applications||L.data||[])).catch(console.error),q.get("/api/dashboard/recent-certificates").then(L=>j(L.data)).catch(console.error),q.get("/api/envelo/monitoring/overview").then(L=>v(L.data)).catch(console.error),u&&setTimeout(()=>z(!1),800)};x.useEffect(()=>{I();const u=setInterval(I,3e4);return()=>clearInterval(u)},[]);const y={pending:p.filter(u=>u.state==="pending").length,under_review:p.filter(u=>u.state==="under_review").length,approved:p.filter(u=>u.state==="approved").length,testing:p.filter(u=>u.state==="testing").length,conformant:p.filter(u=>u.state==="conformant").length,revoked:p.filter(u=>u.state==="revoked"||u.state==="suspended").length},h=p.filter(u=>u.state==="pending"||u.state==="under_review"),E=async(u,L,H)=>{var F,B;if(await a({title:"Confirm",message:H+"?"}))try{if(await q.patch(`/api/applications/${u}/state?new_state=${L}`),L==="approved")try{await q.post("/api/apikeys/admin/provision",null,{params:{application_id:u,send_email:!0}}),n.show("Approved  API key provisioned","success")}catch{n.show("Approved","success")}I()}catch(D){n.show("Failed: "+(((B=(F=D.response)==null?void 0:F.data)==null?void 0:B.detail)||D.message),"error")}},M=((O=m==null?void 0:m.sessions)==null?void 0:O.filter(u=>{const L=u.last_heartbeat_at||u.last_telemetry_at||u.started_at;return u.status==="active"&&L&&Date.now()-new Date(L).getTime()<12e4}).length)||((k=m==null?void 0:m.summary)==null?void 0:k.active)||0,S=b.filter(u=>u.expires_at&&u.state==="conformant"&&new Date(u.expires_at)<new Date(Date.now()+30*24*60*60*1e3)).length;return h.length+S,e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"32px"},children:[e.jsxs("div",{children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--purple-bright)",letterSpacing:"4px",display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:"var(--purple-bright)"}}),"ADMINISTRATION"]}),e.jsxs("h1",{style:{fontFamily:"var(--serif)",fontSize:"clamp(26px,5vw,38px)",fontWeight:200,margin:"0 0 6px",letterSpacing:"-0.02em"},children:["Welcome",t!=null&&t.full_name?`, ${t.full_name.split(" ")[0]}`:""]}),e.jsx("p",{style:{color:"var(--text-tertiary)",fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px"},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),e.jsxs("button",{onClick:()=>I(!0),className:"btn",style:{padding:"8px 16px"},children:[e.jsx(Le,{size:12,style:g?{animation:"spin 0.8s linear infinite"}:{}})," ",g?"Refreshing":"Refresh"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"0",marginBottom:"32px",borderTop:"none",borderBottom:"none"},children:[e.jsx(xe,{onClick:()=>o("/applications"),label:"Applications",value:(i==null?void 0:i.total_applications)||0,color:"var(--purple-bright)",icon:e.jsx(Ze,{size:16,strokeWidth:1.5})}),e.jsx(xe,{onClick:()=>o("/cat72"),label:"Active Tests",value:(i==null?void 0:i.active_tests)||0,color:"var(--accent-amber)",icon:e.jsx(dn,{size:16,strokeWidth:1.5})}),e.jsx(xe,{onClick:()=>o("/certificates"),label:"Active Certs",value:(i==null?void 0:i.certificates_active)||0,color:"var(--accent-green)",icon:e.jsx(wt,{size:16})}),e.jsx(xe,{onClick:()=>o("/monitoring"),label:"Online Interlocks",value:M,color:M>0?"var(--accent-green)":"var(--text-tertiary)",icon:e.jsx(ra,{size:16,strokeWidth:1.5})}),e.jsx(xe,{onClick:()=>o("/certificates"),label:"Certs Issued",value:(i==null?void 0:i.certificates_issued)||0,color:"var(--purple-bright)",icon:e.jsx(cn,{size:16,strokeWidth:1.5})})]}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Certification Pipeline"}),e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)",letterSpacing:"1px"},children:[p.length," total"]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px",height:"28px",overflow:"hidden"},children:[[{key:"pending",label:"Pending",color:"var(--accent-amber)",count:y.pending},{key:"review",label:"Review",color:"var(--accent-amber)",count:y.under_review},{key:"approved",label:"Approved",color:"var(--purple-bright)",count:y.approved},{key:"testing",label:"Testing",color:"var(--purple-bright)",count:y.testing},{key:"conformant",label:"Conformant",color:"var(--accent-green)",count:y.conformant},{key:"suspended",label:"Suspended",color:"var(--accent-red)",count:y.revoked}].map(u=>{const L=p.length||1,H=Math.max(u.count/L*100,u.count>0?8:0);return u.count>0?e.jsx("div",{className:"sa-fill",style:{width:`${H}%`,minWidth:"48px",display:"flex",alignItems:"center",justifyContent:"center","--sa-bg":"rgba(255,255,255,0.02)","--sa-accent":u.color,borderLeftWidth:"2px"},title:`${u.label}: ${u.count}`,children:e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1px",color:u.color,whiteSpace:"nowrap"},children:[u.count," ",u.label]})},u.key):null}),p.length===0&&e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.02)"},children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)",letterSpacing:"1px"},children:"No applications yet"})})]})]}),h.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--accent-amber)",marginBottom:"12px",display:"block"},children:[" REVIEW QUEUE (",h.length,")"]}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),h.slice(0,5).map((u,L)=>{var H;return e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",minWidth:0,flex:1},children:[e.jsx("span",{className:"hud-num",children:String(L+1).padStart(2,"0")}),e.jsx("span",{className:"hud-dot",style:{background:u.state==="pending"?"var(--accent-amber)":"var(--purple-bright)",marginRight:0}}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx(ae,{to:`/applications/${u.id}`,className:"hud-title",style:{textDecoration:"none",color:"var(--text-primary)"},children:u.system_name}),e.jsxs("div",{style:{fontSize:"10px",color:"var(--text-tertiary)",fontFamily:"var(--mono)",letterSpacing:"0.5px"},children:[u.organization_name,"  ",(H=u.state)==null?void 0:H.replace(/_/g," ")]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexShrink:0},children:[u.state==="pending"&&e.jsx("button",{onClick:()=>E(u.id,"under_review",`Begin review for ${u.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px"},children:"Review"}),e.jsx("button",{onClick:()=>E(u.id,"approved",`Approve ${u.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px",color:"var(--accent-green)",borderColor:"rgba(92,214,133,0.2)"},children:"Approve"}),e.jsx("button",{onClick:()=>E(u.id,"suspended",`Suspend ${u.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px",color:"var(--accent-red)",borderColor:"rgba(214,92,92,0.2)"},children:"Suspend"}),e.jsx(ae,{to:`/applications/${u.id}`,className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px"},children:"View"})]})]},u.id)})]})]}),d.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Active CAT-72 Tests"}),e.jsx(ae,{to:"/cat72",className:"hud-link",style:{fontSize:"10px"},children:"Console "})]}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),d.map((u,L)=>{const H=Math.round(u.elapsed_seconds/(u.duration_hours*3600)*100),F=Math.max(0,(u.duration_hours*3600-u.elapsed_seconds)/3600).toFixed(1);return e.jsxs("div",{className:"hud-row",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px",color:"var(--purple-bright)"},children:[u.organization_name,"  ",u.system_name]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)"},children:[F,"h remaining"]}),e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--accent-amber)"},children:[H,"%"]})]})]}),e.jsx("div",{className:"sa-fill",style:{height:"3px","--sa-bg":"rgba(255,255,255,0.04)",overflow:"hidden"},children:e.jsx("div",{className:"sa-fill",style:{height:"100%",width:`${H}%`,"--sa-bg":H>=100?"var(--accent-green)":"var(--purple-bright)",transition:"width 0.4s ease"}})})]},u.id)})]})]}),(()=>{const u=b.filter(L=>L.expires_at&&L.state==="conformant"&&new Date(L.expires_at)<new Date(Date.now()+2592e6));return u.length===0?null:e.jsx("div",{style:{marginBottom:"32px"},children:e.jsxs("div",{className:"hud-frame hud-frame-amber",children:[e.jsx("i",{}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Oe,{size:14,style:{color:"var(--accent-amber)"}}),e.jsxs("span",{className:"hud-label",style:{color:"var(--accent-amber)"},children:[u.length," Certificate",u.length>1?"s":""," Expiring Within 30 Days"]})]}),u.map(L=>{const H=Math.ceil((new Date(L.expires_at)-Date.now())/864e5);return e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px"},children:L.system_name}),e.jsx("span",{style:{color:"var(--text-tertiary)",fontSize:"11px",marginLeft:"10px"},children:L.organization_name})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:H<=7?"var(--accent-red)":"var(--accent-amber)"},children:[H,"d remaining"]}),e.jsx(ae,{to:`/verify?cert=${L.certificate_number}`,className:"hud-link",style:{fontSize:"10px"},children:L.certificate_number})]})]},L.id)})]})})})(),b.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Recent Certificates"}),e.jsx(ae,{to:"/certificates",className:"hud-link",style:{fontSize:"10px"},children:"View All "})]}),e.jsx(ne,{children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:["Certificate","System","Status","Issued","Expires"].map(u=>e.jsx("th",{children:u},u))})}),e.jsx("tbody",{children:b.slice(0,5).map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(ae,{to:`/verify?cert=${u.certificate_number}`,style:{color:"var(--purple-bright)",fontFamily:"var(--mono)",fontSize:"12px",letterSpacing:"0.5px"},children:u.certificate_number})}),e.jsxs("td",{children:[e.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px"},children:u.system_name})," ",e.jsx("span",{style:{color:"var(--text-tertiary)",fontSize:"11px"},children:u.organization_name})]}),e.jsx("td",{children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:u.state==="conformant"?"var(--accent-green)":"var(--accent-red)"},children:u.state})}),e.jsx("td",{style:{color:"var(--text-tertiary)",fontSize:"12px"},children:u.issued_at?new Date(u.issued_at).toLocaleDateString():""}),e.jsx("td",{style:{fontFamily:"var(--mono)",fontSize:"11px",color:u.expires_at&&new Date(u.expires_at)<new Date(Date.now()+30*24*60*60*1e3)?"var(--accent-amber)":"var(--text-tertiary)"},children:u.expires_at?new Date(u.expires_at).toLocaleDateString():""})]},u.id))})]})})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Recent Applications"}),e.jsx(ae,{to:"/applications",className:"hud-link",style:{fontSize:"10px"},children:"View All "})]}),e.jsx(ne,{children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:["System","Organization","State","Submitted"].map(u=>e.jsx("th",{children:u},u))})}),e.jsx("tbody",{children:s.map(u=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>o(`/applications/${u.id}`),children:[e.jsx("td",{children:e.jsx(ae,{to:`/applications/${u.id}`,style:{color:"var(--purple-bright)"},children:u.system_name})}),e.jsx("td",{children:u.organization_name}),e.jsx("td",{children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:u.state==="conformant"?"var(--accent-green)":u.state==="revoked"?"var(--accent-red)":u.state==="testing"||u.state==="approved"?"var(--purple-bright)":"var(--accent-amber)"},children:u.state})}),e.jsx("td",{style:{color:"var(--text-tertiary)",fontSize:"13px"},children:u.submitted_at?new Date(u.submitted_at).toLocaleDateString():""})]},u.id))})]})})})]})]})}function ds(){const{user:t}=pe();return(t==null?void 0:t.role)==="admin"?e.jsx(cs,{}):e.jsx(ls,{})}function ps({isOpen:t,onClose:n,onImport:a,boundaryType:o}){const[i,r]=fe.useState(""),[s,l]=fe.useState("json"),[d,c]=fe.useState(""),[p,f]=fe.useState(null),b={numeric:{json:'[{"name":"Speed Limit","parameter":"speed","min_value":0,"max_value":100,"unit":"km/h","tolerance":5}]',csv:`name,parameter,min_value,max_value,hard_limit,unit,tolerance
Speed Limit,speed,0,100,120,km/h,5`},geo:{json:'[{"name":"Operating Zone","boundary_type":"circle","lat":30.123,"lon":-97.456,"radius_meters":500}]',csv:`name,boundary_type,lat,lon,radius_meters,altitude_max
Operating Zone,circle,30.123,-97.456,500,120`},time:{json:'[{"name":"Business Hours","start_hour":6,"end_hour":22,"timezone":"America/Chicago","days":[0,1,2,3,4]}]',csv:`name,start_hour,end_hour,timezone,days
Business Hours,6,22,America/Chicago,0;1;2;3;4`},state:{json:'[{"name":"Mode Check","parameter":"mode","allowed_values":"autonomous,semi-auto","forbidden_values":"manual_override"}]',csv:`name,parameter,allowed_values,forbidden_values
Mode Check,mode,"autonomous,semi-auto",manual_override`}},j=()=>{c(""),f(null);try{let m=[];if(s==="json"){const v=JSON.parse(i);m=Array.isArray(v)?v:[v]}else{const v=i.trim().split(`
`);if(v.length<2)throw new Error("CSV needs header + data rows");const g=v[0].split(",").map(z=>z.trim());m=v.slice(1).map(z=>{const I=z.match(/(".*?"|[^,]+)/g)||[],y={};return g.forEach((h,E)=>{let M=(I[E]||"").replace(/^"|"$/g,"").trim();h==="days"?y[h]=M.split(";").map(Number):["min_value","max_value","hard_limit","tolerance","lat","lon","radius_meters","altitude_min","altitude_max","start_hour","end_hour"].includes(h)?y[h]=M===""?"":M:y[h]=M}),y})}if(m.length===0)throw new Error("No data found");f(m)}catch(m){c(m.message)}};return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:n,children:e.jsxs("div",{style:{background:"#1a1a2e",border:"1px solid rgba(157,140,207,0.2)",padding:"32px",maxWidth:"min(700px, 95vw)",width:"100%",maxHeight:"80vh",overflowY:"auto"},onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"20px",fontWeight:200,margin:0},children:["Bulk Import  ",o]}),e.jsx("button",{onClick:n,style:{background:"none",border:"none",color:"#6a6a80",fontSize:"20px",cursor:"pointer"},children:""})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[["json","csv"].map(m=>e.jsx("button",{onClick:()=>{l(m),c(""),f(null)},style:{padding:"6px 16px",border:"1px solid "+(s===m?"#8b5cf6":"rgba(255,255,255,0.1)"),background:s===m?"rgba(139,92,246,0.15)":"transparent",color:s===m?"#8b5cf6":"#a0a0b0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:m},m)),e.jsx("button",{onClick:()=>{var m;return r(((m=b[o])==null?void 0:m[s])||"")},style:{marginLeft:"auto",padding:"6px 12px",border:"1px solid rgba(255,255,255,0.1)",background:"transparent",color:"#a0a0b0",fontSize:"11px",cursor:"pointer"},children:"Load Example"})]}),e.jsx("textarea",{value:i,onChange:m=>r(m.target.value),rows:10,placeholder:s==="json"?"Paste JSON array of boundaries...":"Paste CSV with header row...",style:{width:"100%",background:"rgba(255,255,255,.05)",border:"1px solid rgba(255,255,255,0.1)",padding:"12px",color:"#e8e8f0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",lineHeight:"1.5",resize:"vertical",outline:"none"}}),d&&e.jsxs("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"8px"},children:[" ",d]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[e.jsx("button",{onClick:j,style:{padding:"8px 20px",border:"1px solid #8b5cf6",background:"transparent",color:"#8b5cf6",fontSize:"12px",cursor:"pointer"},children:"Preview"}),p&&e.jsxs("button",{onClick:()=>{a(p),n(),r(""),f(null)},style:{padding:"8px 20px",border:"none",background:"transparent",color:"rgba(255,255,255,.94)",fontSize:"12px",cursor:"pointer",fontWeight:500},children:["Import ",p.length," ",p.length===1?"boundary":"boundaries"]})]}),p&&e.jsxs("div",{style:{marginTop:"16px",background:"transparent",padding:"12px",maxHeight:"200px",overflowY:"auto"},children:[e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"#6a6a80",marginBottom:"8px"},children:["PREVIEW (",p.length," rows)"]}),p.map((m,v)=>e.jsx("div",{style:{fontSize:"11px",color:"#a0a0b0",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Object.entries(m).map(([g,z])=>`${g}: ${z}`).join("  ")},v))]})]})}):null}function ms(){const t=Ce(),{user:n}=pe(),a=Be(),[o,i]=x.useState([]),[r,s]=x.useState(0),[l,d]=x.useState({}),[c,p]=x.useState("all"),[f,b]=x.useState(""),[j,m]=x.useState(new Set),[v,g]=x.useState(!1),z=u=>m(L=>{const H=new Set(L);return H.has(u)?H.delete(u):H.add(u),H}),I=()=>m(new Set(O.map(u=>u.id))),y=()=>m(new Set),h=async(u,L)=>{var B,D;const H=[...j];if(H.length===0)return;const F=u==="delete"?`Delete ${H.length} application(s)?`:`${u} ${H.length} application(s)?`;if(await a({title:"Confirm",message:F})){g(!0);try{u==="delete"?await q.post("/api/applications/bulk-delete",{ids:H}):await q.post("/api/applications/bulk-state",{ids:H,new_state:L}),m(new Set),E()}catch(N){t.show("Bulk operation failed: "+(((D=(B=N.response)==null?void 0:B.data)==null?void 0:D.detail)||N.message),"error")}g(!1)}},E=(u="",L="all")=>{const H={};u&&(H.search=u),L&&L!=="all"&&(H.state=L),q.get("/api/applications/",{params:H}).then(F=>{i(F.data.applications||F.data),s(F.data.total??(F.data.applications||F.data).length),d(F.data.state_counts||{})}).catch(console.error)};x.useEffect(()=>{E()},[]),x.useEffect(()=>{const u=setTimeout(()=>{E(f,c)},300);return()=>clearTimeout(u)},[f,c]);const M=async(u,L,H)=>{var F,B;if(await a({title:"Confirm",message:H+"?"}))try{await q.patch(`/api/applications/${u}/state?new_state=${L}`),E()}catch(D){t.show("Failed: "+(((B=(F=D.response)==null?void 0:F.data)==null?void 0:B.detail)||D.message),"error")}},S=[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"under_review",label:"Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"},{key:"revoked",label:"Suspended"}],O=o,k=u=>u==="conformant"?"#5CD685":u==="revoked"||u==="suspended"?"#D65C5C":u==="testing"||u==="approved"?"#a896d6":"#D6A05C";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:(n==null?void 0:n.role)==="admin"?"Conformance":"My Organization"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:(n==null?void 0:n.role)==="admin"?"Applications":"Certification Status"})]})}),(n==null?void 0:n.role)==="admin"&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"min(400px, 90vw)"},children:[e.jsx(_t,{className:"w-4 h-4",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,.50)"}}),e.jsx("input",{value:f,onChange:u=>b(u.target.value),placeholder:"Search by name, org, or ID...",style:{width:"100%",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px 8px 36px",color:"rgba(255,255,255,.94)",fontSize:"13px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",outline:"none"}})]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[O.length," of ",r]})]}),(n==null?void 0:n.role)==="admin"&&e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:S.map(u=>{const L=u.key==="all"?l.all||0:u.key==="revoked"?(l.suspended||0)+(l.revoked||0):l[u.key]||0;return e.jsxs("button",{onClick:()=>p(u.key),style:{padding:"6px 14px",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",background:c===u.key?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.03)",border:`1px solid ${c===u.key?"#a896d6":"rgba(255,255,255,.07)"}`,color:c===u.key?"#a896d6":"rgba(255,255,255,.50)"},children:[u.label," ",L>0?`(${L})`:""]},u.key)})}),e.jsxs(ne,{children:[e.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{className:"w-full",style:{minWidth:"700px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[(n==null?void 0:n.role)==="admin"&&e.jsx("th",{className:"px-2 py-3 text-center",style:{width:"40px"},children:e.jsx("input",{type:"checkbox",checked:j.size>0&&j.size===O.length,onChange:u=>u.target.checked?I():y(),style:{cursor:"pointer",accentColor:"#a896d6"}})}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"System Name"}),(n==null?void 0:n.role)==="admin"&&e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"State"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Submitted"}),(n==null?void 0:n.role)==="admin"&&e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:O.map(u=>{var L;return e.jsxs("tr",{className:"transition-colors",style:{borderBottom:"1px solid rgba(255,255,255,.07)",background:j.has(u.id)?"rgba(157,140,207,0.08)":"transparent"},children:[(n==null?void 0:n.role)==="admin"&&e.jsx("td",{className:"px-2 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:j.has(u.id),onChange:()=>z(u.id),style:{cursor:"pointer",accentColor:"#a896d6"}})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx(ae,{to:`/applications/${u.id}`,style:{color:"#a896d6",textDecoration:"none"},children:u.system_name}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",marginTop:"2px"},children:u.application_number})]}),(n==null?void 0:n.role)==="admin"&&e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.78)"},children:u.organization_name}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1",style:{background:`${k(u.state)}06`,color:k(u.state),border:`1px solid ${k(u.state)}10`,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:(L=u.state)==null?void 0:L.replace("_"," ")})}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:u.submitted_at?new Date(u.submitted_at).toLocaleDateString():"N/A"}),(n==null?void 0:n.role)==="admin"&&e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[u.state==="pending"&&e.jsx("button",{onClick:H=>{H.stopPropagation(),M(u.id,"under_review",`Begin review for ${u.system_name}`)},className:"btn",style:{padding:"4px 10px",color:"#D6A05C"},children:"Review"}),(u.state==="pending"||u.state==="under_review")&&e.jsx("button",{onClick:H=>{H.stopPropagation(),M(u.id,"approved",`Approve ${u.system_name}`)},className:"btn",style:{padding:"4px 10px",color:"#5CD685"},children:"Approve"}),u.state==="approved"&&e.jsx(ae,{to:`/applications/${u.id}`,className:"px-2 py-1 no-underline btn",children:"Schedule Test"}),u.state==="conformant"&&e.jsx("span",{style:{color:"#5CD685",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px"},children:" Certified"}),u.state==="testing"&&e.jsx(ae,{to:"/cat72",className:"px-2 py-1 no-underline btn",children:"View Test"}),["pending","under_review","approved","testing","conformant"].includes(u.state)&&e.jsx("button",{onClick:H=>{H.stopPropagation(),M(u.id,"suspended",`Suspend ${u.system_name}`)},className:"btn",style:{padding:"4px 10px",color:"#D65C5C"},children:"Suspend"}),(u.state==="suspended"||u.state==="revoked")&&e.jsx("button",{onClick:H=>{H.stopPropagation(),M(u.id,"pending",`Reinstate ${u.system_name} to pending`)},className:"btn",style:{padding:"4px 10px",color:"#5CD685"},children:"Reinstate"})]})})]},u.id)})})]})}),j.size>0&&(n==null?void 0:n.role)==="admin"&&e.jsxs("div",{style:{position:"sticky",bottom:"16px",zIndex:50,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",padding:"12px 20px",margin:"16px",background:"rgba(18,12,30,0.95)",border:"1px solid #a896d6"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"#a896d6"},children:[j.size," selected"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>h("approve","approved"),disabled:v,className:"btn",style:{padding:"6px 14px",color:"var(--accent-green)"},children:"Approve"}),e.jsx("button",{onClick:()=>h("review","under_review"),disabled:v,className:"btn",style:{padding:"6px 14px",color:"#D6A05C"},children:"Review"}),e.jsx("button",{onClick:()=>h("suspend","suspended"),disabled:v,className:"btn",style:{padding:"6px 14px",color:"#D65C5C"},children:"Suspend"}),e.jsx("button",{onClick:()=>h("reinstate","pending"),disabled:v,className:"btn",style:{padding:"6px 14px",color:"var(--accent-green)"},children:"Reinstate"}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,.07)",margin:"0 4px"}}),e.jsx("button",{onClick:()=>h("delete"),disabled:v,className:"btn",style:{padding:"6px 14px",color:"#D65C5C"},children:"Delete"}),e.jsx("button",{onClick:y,className:"btn",children:"Cancel"}),v&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:"Processing..."})]})]}),O.length===0&&e.jsx(ss,{icon:Ze,title:"No Applications Found",description:o.length===0?"You haven't submitted any certification applications yet. Start your ODDC certification journey.":"No applications match your current filter."})]})]})}const us=[{key:"ground_robots",label:"Ground Robots & Mobile Platforms"},{key:"aerial",label:"Aerial Systems (UAV / UAS)"},{key:"vehicles",label:"Autonomous Vehicles & Mobility"},{key:"marine",label:"Marine & Maritime"},{key:"medical",label:"Medical & Healthcare"},{key:"financial",label:"Financial & Trading"},{key:"energy",label:"Energy & Utilities"},{key:"manufacturing",label:"Manufacturing & Industrial"},{key:"defense",label:"Defense & Security"},{key:"agriculture",label:"Agriculture & Environment"},{key:"space_extreme",label:"Space & Extreme Environments"},{key:"telecom_digital",label:"Telecommunications & Digital Infrastructure"},{key:"construction",label:"Construction & Mining"},{key:"logistics",label:"Logistics & Supply Chain"},{key:"retail_hospitality",label:"Retail & Hospitality"},{key:"education_research",label:"Education & Research"},{key:"legal_compliance",label:"Legal & Compliance"},{key:"other",label:"Other / Custom"}],De={warehouse_amr_indoor:{label:"Warehouse AMR (Indoor)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:2,unit:"m/s",tolerance:.1},{name:"max_payload",min:0,max:500,unit:"kg",tolerance:5},{name:"max_shelf_height",min:0,max:8,unit:"m",tolerance:.1},{name:"min_obstacle_clearance",min:.3,max:null,unit:"m",tolerance:.05}],geo:{type:"polygon",description:"Warehouse floor plan boundary  excludes human-only zones, charging stations, loading docks during active operations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","navigating","picking","placing","charging","queued"],forbidden:["manual_override_disabled","sensor_degraded_navigation"]},odd_description:"Indoor warehouse environment with controlled lighting, flat concrete floors, marked aisles, and mixed human-robot zones. System operates within geofenced warehouse boundary with speed reduction in human-occupied zones.",safety:{violation_action:"block",fail_closed:!0,human_zone_speed_limit:.5,emergency_stop:!0}}},warehouse_amr_cold_storage:{label:"Warehouse AMR (Cold Storage)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:1.5,unit:"m/s",tolerance:.1},{name:"max_payload",min:0,max:400,unit:"kg",tolerance:5},{name:"min_operating_temp",min:-30,max:5,unit:"C",tolerance:1},{name:"max_continuous_cold_exposure",min:0,max:120,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Cold storage facility boundary  includes freezer zones, transition airlocks, excludes warm staging areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","navigating","picking","placing","charging","defrost_cycle"],forbidden:["battery_below_20pct_in_freezer","condensation_detected"]},odd_description:"Cold storage warehouse (-25C to 5C) with frost-resistant flooring, limited visibility, and mandatory defrost cycling. Robot must return to warm zone before battery threshold.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},last_mile_delivery_robot:{label:"Last-Mile Delivery Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:6,unit:"km/h",tolerance:.5},{name:"max_payload",min:0,max:25,unit:"kg",tolerance:1},{name:"max_range",min:0,max:30,unit:"km",tolerance:1},{name:"min_battery_for_return",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Approved sidewalk corridors and pedestrian zones  excludes roadways, private property beyond delivery points, restricted government areas"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"delivery_zone_local"},states:{allowed:["idle","en_route","delivering","returning","charging","waiting_pickup"],forbidden:["road_surface_detected","pedestrian_density_exceeded"]},odd_description:"Urban/suburban sidewalk environment during daylight and early evening. System navigates pedestrian infrastructure only, yields to all pedestrians, and maintains minimum battery reserve for return to base.",safety:{violation_action:"block",fail_closed:!0,max_pedestrian_proximity:.5,emergency_stop:!0}}},sidewalk_delivery_robot:{label:"Sidewalk Delivery Robot (Campus)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:4,unit:"km/h",tolerance:.5},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_incline",min:0,max:15,unit:"degrees",tolerance:1}],geo:{type:"polygon",description:"Campus pedestrian pathways  excludes vehicle roads, building interiors, construction zones"},time:{operating_hours:"07:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"campus_local"},states:{allowed:["idle","navigating","delivering","waiting","charging"],forbidden:["road_detected","stairway_detected"]},odd_description:"University or corporate campus pedestrian pathways. Flat to moderate grade, paved surfaces, mixed foot traffic. System operates during campus active hours only.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},campus_shuttle_low_speed:{label:"Campus Shuttle (Low-Speed AV)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:12,unit:"persons",tolerance:0},{name:"max_grade",min:0,max:10,unit:"%",tolerance:.5},{name:"min_visibility",min:50,max:null,unit:"m",tolerance:5}],geo:{type:"polygon",description:"Fixed campus route with approved stops  excludes public roadways, parking structures, pedestrian-only zones"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"facility_local"},states:{allowed:["idle","en_route","stopped_at_station","loading","unloading","returning_to_depot"],forbidden:["off_route","door_open_while_moving","passenger_standing"]},odd_description:"Fixed-route low-speed shuttle on private campus roads. Controlled environment with designated stops, speed bumps, and pedestrian crossings. No public road interaction.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,emergency_stop:!0}}},security_patrol_robot:{label:"Security Patrol Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_patrol_radius",min:0,max:2e3,unit:"m",tolerance:10},{name:"min_battery_reserve",min:15,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Facility perimeter and approved patrol corridors  excludes public areas, sensitive restricted zones without clearance"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["patrolling","stationary_monitoring","returning_to_base","charging","alert_mode"],forbidden:["pursuit_mode","physical_intervention"]},odd_description:"Outdoor facility perimeter and indoor corridors. System performs observation and alerting only  no physical intervention capability. Operates in all weather within sensor limits.",safety:{violation_action:"block",fail_closed:!0,no_pursuit:!0,emergency_stop:!0}}},agricultural_field_robot:{label:"Agricultural Field Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:10,unit:"km/h",tolerance:.5},{name:"max_spray_rate",min:0,max:200,unit:"L/ha",tolerance:5},{name:"max_wind_speed",min:0,max:15,unit:"km/h",tolerance:1},{name:"buffer_zone_waterway",min:10,max:null,unit:"m",tolerance:1}],geo:{type:"polygon",description:"Defined field boundaries  excludes waterways, buffer zones, neighboring properties, public roads"},time:{operating_hours:"05:00-21:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","seeding","spraying","harvesting","transiting","charging"],forbidden:["wind_exceeded","rain_during_spray","near_waterway_while_spraying"]},odd_description:"Open agricultural field with GPS-defined boundaries. System operates on soil/crop surfaces in fair weather. Spray operations prohibited near waterways and above wind thresholds.",safety:{violation_action:"block",fail_closed:!0,spray_shutoff:!0,emergency_stop:!0}}},vineyard_orchard_robot:{label:"Vineyard / Orchard Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_arm_reach",min:0,max:2.5,unit:"m",tolerance:.05},{name:"max_cutting_force",min:0,max:50,unit:"N",tolerance:2}],geo:{type:"polygon",description:"Row-by-row vineyard/orchard boundary  excludes equipment sheds, irrigation infrastructure, public access paths"},time:{operating_hours:"06:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","navigating_row","pruning","harvesting","inspecting","returning"],forbidden:["human_in_arm_radius","row_end_exceeded"]},odd_description:"Structured vineyard or orchard rows with GPS-guided navigation. System moves along defined row paths and performs precision tasks within arm reach envelope.",safety:{violation_action:"block",fail_closed:!0,arm_retract_on_human:!0,emergency_stop:!0}}},hazmat_inspection_robot:{label:"Hazmat / CBRN Inspection Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.5},{name:"max_radiation_exposure",min:0,max:100,unit:"mSv/hr",tolerance:5},{name:"max_chemical_concentration",min:0,max:500,unit:"ppm",tolerance:10},{name:"max_mission_duration",min:0,max:240,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Designated hazmat zone with hot/warm/cold zone boundaries  robot must not exit hot zone without decontamination sequence"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["standby","entering_zone","inspecting","sampling","retreating","decontaminating"],forbidden:["human_follow_mode_in_hot_zone","sample_container_open_in_cold_zone"]},odd_description:"Hazardous material incident scene with defined exclusion zones. Robot operates in contaminated environments where human entry is prohibited or limited. All actions logged for incident command.",safety:{violation_action:"block",fail_closed:!0,auto_retreat_on_threshold:!0,emergency_stop:!0}}},tunnel_inspection_robot:{label:"Tunnel / Pipe Inspection Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:2,unit:"km/h",tolerance:.2},{name:"min_pipe_diameter",min:150,max:null,unit:"mm",tolerance:10},{name:"max_tether_length",min:0,max:500,unit:"m",tolerance:5},{name:"max_depth",min:0,max:100,unit:"m",tolerance:1}],geo:{type:"linear",description:"Defined tunnel or pipeline segment with entry/exit points  system must not exceed tether length or enter unmarked branches"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["standby","inserting","inspecting","retreating","data_upload"],forbidden:["tether_tension_exceeded","communication_lost_advancing"]},odd_description:"Confined pipe or tunnel environment with tethered operation. System advances along defined path, retreats on communication loss or tether limit. GPS-denied environment uses odometry and tether measurement.",safety:{violation_action:"block",fail_closed:!0,auto_retreat_on_comms_loss:!0,emergency_stop:!0}}},snow_removal_robot:{label:"Snow Removal / Grounds Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"km/h",tolerance:.5},{name:"max_plow_width",min:0,max:2,unit:"m",tolerance:.05},{name:"min_temperature",min:-40,max:5,unit:"C",tolerance:1},{name:"max_snow_depth",min:0,max:30,unit:"cm",tolerance:2}],geo:{type:"polygon",description:"Facility sidewalks and pathways  excludes vehicle lanes, building entrances during occupancy, garden areas"},time:{operating_hours:"03:00-07:00",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","plowing","salting","returning","charging"],forbidden:["pedestrian_detected_ahead","ice_on_slope_above_grade_limit"]},odd_description:"Outdoor facility pathways during winter conditions. System operates during low-traffic hours, clearing designated paths. Halts on pedestrian detection and avoids steep grades when icy.",safety:{violation_action:"block",fail_closed:!0,pedestrian_stop:!0,emergency_stop:!0}}},street_cleaning_robot:{label:"Street Cleaning Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"km/h",tolerance:.5},{name:"max_water_usage",min:0,max:500,unit:"L/hr",tolerance:10},{name:"max_noise_level",min:0,max:70,unit:"dB",tolerance:2}],geo:{type:"polygon",description:"Approved pedestrian zones, sidewalks, plazas  excludes vehicle roadways, private property, construction zones"},time:{operating_hours:"04:00-07:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["idle","cleaning","refilling","returning","charging"],forbidden:["crowd_detected","event_zone_active"]},odd_description:"Urban pedestrian infrastructure during low-traffic hours. System follows predefined cleaning routes on paved surfaces. Noise-limited operation during early morning hours.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},small_survey_drone:{label:"Small Survey Drone (<25kg)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:35,unit:"km/h",tolerance:2},{name:"min_battery_for_rtl",min:25,max:null,unit:"%",tolerance:3},{name:"max_range_from_pilot",min:0,max:500,unit:"m",tolerance:10}],geo:{type:"polygon_3d",description:"Approved flight zone with altitude ceiling  excludes airports, restricted airspace, populated areas per Part 107"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","takeoff","surveying","hovering","returning","landing"],forbidden:["gps_lost_above_30m","battery_below_rtl_threshold","wind_exceeded"]},odd_description:"Visual line of sight operations in Class G airspace below 400ft AGL. Operations in fair weather with wind below threshold. System maintains return-to-launch battery reserve at all times.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},agricultural_spray_drone:{label:"Agricultural Spray Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:15,unit:"m",tolerance:1},{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_spray_rate",min:0,max:30,unit:"L/min",tolerance:1},{name:"max_wind_speed",min:0,max:15,unit:"km/h",tolerance:1},{name:"buffer_distance_waterway",min:30,max:null,unit:"m",tolerance:3}],geo:{type:"polygon",description:"Defined field boundary with spray buffer zones around waterways, neighboring properties, and roads"},time:{operating_hours:"05:00-10:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["grounded","spraying","transiting","refilling","returning"],forbidden:["wind_exceeded_during_spray","over_buffer_zone","tank_empty_pumping"]},odd_description:"Low-altitude precision spraying over defined agricultural fields. Early morning operations to minimize drift. Hard geofence around buffer zones with automatic spray shutoff.",safety:{violation_action:"block",fail_closed:!0,spray_auto_shutoff:!0,geofence_hard:!0,emergency_stop:!0}}},infrastructure_inspection_drone:{label:"Infrastructure Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:150,unit:"m",tolerance:3},{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:2},{name:"min_structure_clearance",min:3,max:null,unit:"m",tolerance:.5},{name:"max_wind_speed",min:0,max:30,unit:"km/h",tolerance:2}],geo:{type:"polygon_3d",description:"Approved inspection corridor around structure  includes buffer zones from public areas, roads, and occupied buildings"},time:{operating_hours:"07:00-17:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","en_route","inspecting","hovering","returning","landing"],forbidden:["proximity_alert_structure","gps_degraded_near_structure"]},odd_description:"Close-range inspection of bridges, towers, power lines, or buildings. Controlled airspace with NOTAM. System maintains minimum clearance from structure and auto-returns on sensor degradation.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,collision_avoidance:!0,emergency_stop:!0}}},delivery_drone_urban:{label:"Delivery Drone (Urban)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:70,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:5,unit:"kg",tolerance:.2},{name:"max_wind_speed",min:0,max:30,unit:"km/h",tolerance:2},{name:"min_battery_for_rtl",min:30,max:null,unit:"%",tolerance:3}],geo:{type:"corridor",description:"Approved flight corridors between depot and delivery zones  excludes restricted airspace, schools, hospitals, crowd areas"},time:{operating_hours:"08:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"delivery_zone_local"},states:{allowed:["grounded","en_route","hovering_delivery","descending","returning","landing"],forbidden:["crowd_below","restricted_airspace_entered","battery_below_rtl"]},odd_description:"Urban drone delivery along approved corridors in controlled low-altitude airspace. System avoids populated areas during transit, descends only at approved delivery points. Hard geofence on all corridor boundaries.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,parachute_deploy:!0,emergency_stop:!0}}},delivery_drone_rural:{label:"Delivery Drone (Rural / Suburban)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:90,unit:"km/h",tolerance:3},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_range",min:0,max:30,unit:"km",tolerance:1},{name:"max_wind_speed",min:0,max:35,unit:"km/h",tolerance:2}],geo:{type:"corridor",description:"Approved rural flight paths  avoids populated areas, livestock, and restricted airspace"},time:{operating_hours:"06:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["grounded","en_route","delivering","returning","diverting","landing"],forbidden:["thunderstorm_detected","beyond_range_for_rtl"]},odd_description:"Rural and suburban delivery routes with extended range. Lower population density allows broader corridors. System maintains energy reserve for full return at all decision points.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},search_rescue_drone:{label:"Search & Rescue Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:200,unit:"m",tolerance:5},{name:"max_speed",min:0,max:80,unit:"km/h",tolerance:3},{name:"max_wind_speed",min:0,max:45,unit:"km/h",tolerance:3},{name:"max_mission_duration",min:0,max:45,unit:"min",tolerance:2}],geo:{type:"polygon_3d",description:"Defined search area as authorized by incident command  excludes active fire zones, other aircraft operating areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["grounded","searching","hovering_target","payload_drop","returning","landing"],forbidden:["fire_zone_entered","other_aircraft_proximity"]},odd_description:"Emergency search operations in defined area under incident command authority. Extended weather envelope. System coordinates with manned aircraft via ADS-B and maintains deconfliction boundaries.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,deconfliction:!0,emergency_stop:!0}}},power_line_inspection_drone:{label:"Power Line Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:1},{name:"min_line_clearance",min:5,max:null,unit:"m",tolerance:.5},{name:"max_emf_exposure",min:0,max:100,unit:"V/m",tolerance:5}],geo:{type:"corridor",description:"Power line right-of-way corridor  excludes residential areas beyond ROW, substations during maintenance"},time:{operating_hours:"07:00-17:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","transiting","inspecting","hovering","returning","landing"],forbidden:["min_clearance_violated","emf_exceeded","gps_lost"]},odd_description:"Linear corridor following power line rights-of-way. System maintains safe clearance from energized lines and auto-retreats on EMF threshold exceedance. BVLOS operations under waiver.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,emf_protection:!0,emergency_stop:!0}}},pipeline_inspection_drone:{label:"Pipeline Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:100,unit:"m",tolerance:3},{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_range",min:0,max:50,unit:"km",tolerance:2},{name:"min_ground_clearance",min:15,max:null,unit:"m",tolerance:2}],geo:{type:"corridor",description:"Pipeline right-of-way corridor with lateral buffer  excludes populated areas, restricted airspace, water crossings during sensitive periods"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","transiting","inspecting","leak_detected_hovering","returning","landing"],forbidden:["off_corridor","low_fuel_advancing"]},odd_description:"Extended linear inspection along pipeline routes. BVLOS operations with relay communication. System follows pipeline corridor with automatic anomaly detection and reporting.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},mapping_photogrammetry_drone:{label:"Mapping / Photogrammetry Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:25,unit:"km/h",tolerance:2},{name:"min_overlap",min:60,max:null,unit:"%",tolerance:5}],geo:{type:"polygon_3d",description:"Defined survey area boundary  excludes neighboring properties, sensitive sites, restricted airspace"},time:{operating_hours:"09:00-15:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","en_route","mapping","returning","landing"],forbidden:["shadow_angle_exceeded","cloud_cover_above_80pct"]},odd_description:"Systematic grid pattern flight over defined survey area for photogrammetric capture. Optimal lighting conditions required. System maintains overlap requirements and compensates for wind drift.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},urban_air_mobility_evtol:{label:"Urban Air Mobility (eVTOL Passenger)",domain:"aerial",template:{numeric:[{name:"max_altitude_msl",min:0,max:1500,unit:"ft",tolerance:50},{name:"max_speed",min:0,max:250,unit:"km/h",tolerance:5},{name:"max_passengers",min:0,max:6,unit:"persons",tolerance:0},{name:"max_wind_speed",min:0,max:50,unit:"km/h",tolerance:3},{name:"min_battery_for_alternate",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"corridor_3d",description:"Approved UAM corridors between vertiports  includes approach/departure paths, excludes restricted airspace, noise-sensitive zones"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["parked","boarding","takeoff","cruise","approach","landing","disembarking"],forbidden:["battery_below_alternate_reserve","icing_detected","passenger_door_open_in_flight"]},odd_description:"Urban air mobility corridors between certified vertiports. System operates under Part 135 equivalent with full ATC integration. Maintains alternate landing site energy reserve at all times.",safety:{violation_action:"block",fail_closed:!0,auto_divert:!0,redundant_flight_controls:!0,emergency_stop:!1}}},cargo_evtol:{label:"Cargo eVTOL",domain:"aerial",template:{numeric:[{name:"max_altitude_msl",min:0,max:1e3,unit:"ft",tolerance:50},{name:"max_speed",min:0,max:200,unit:"km/h",tolerance:5},{name:"max_payload",min:0,max:500,unit:"kg",tolerance:5},{name:"max_range",min:0,max:150,unit:"km",tolerance:5}],geo:{type:"corridor_3d",description:"Approved cargo flight corridors between distribution hubs  avoids populated areas during cruise"},time:{operating_hours:"05:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["parked","loading","takeoff","cruise","approach","landing","unloading"],forbidden:["overweight","center_of_gravity_exceeded","icing_detected"]},odd_description:"Point-to-point cargo transport between approved landing sites. Unpopulated corridors preferred. System verifies weight and balance before each flight and maintains energy reserves.",safety:{violation_action:"block",fail_closed:!0,auto_divert:!0,geofence_hard:!0,emergency_stop:!1}}},firefighting_drone:{label:"Firefighting Support Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:200,unit:"m",tolerance:5},{name:"max_speed",min:0,max:70,unit:"km/h",tolerance:3},{name:"max_thermal_exposure",min:0,max:200,unit:"C",tolerance:10},{name:"max_wind_speed",min:0,max:50,unit:"km/h",tolerance:3}],geo:{type:"polygon_3d",description:"Incident command designated airspace  deconflicted from manned aircraft, excludes active drop zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["grounded","scouting","monitoring","thermal_mapping","returning","landing"],forbidden:["manned_aircraft_proximity","thermal_limit_exceeded"]},odd_description:"Fire incident support under incident command authority. Thermal imaging and situational awareness only  no suppression. Deconflicted from manned firefighting aircraft at all times.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,thermal_protection:!0,emergency_stop:!0}}},highway_l4_truck_longhaul:{label:"Highway L4 Truck (Long-Haul)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:105,unit:"km/h",tolerance:2},{name:"max_gvw",min:0,max:36e3,unit:"kg",tolerance:100},{name:"min_following_distance",min:2.5,max:null,unit:"s",tolerance:.2},{name:"max_wind_speed",min:0,max:80,unit:"km/h",tolerance:5},{name:"min_visibility",min:200,max:null,unit:"m",tolerance:20}],geo:{type:"road_network",description:"Approved interstate highway segments  excludes urban interchanges, construction zones, mountain passes above grade limit"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"route_local"},states:{allowed:["parked","highway_cruise","lane_change","merging","exiting","minimal_risk_condition"],forbidden:["urban_street","construction_zone","visibility_below_minimum","ice_detected"]},odd_description:"Interstate highway operations on approved segments. L4 autonomy with no human driver. System transitions to minimal risk condition (MRC) on any ODD exit. Pre-mapped route with known infrastructure.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,v2x_enabled:!0,emergency_stop:!0}}},highway_l4_truck_regional:{label:"Highway L4 Truck (Regional)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:90,unit:"km/h",tolerance:2},{name:"max_gvw",min:0,max:26e3,unit:"kg",tolerance:100},{name:"min_following_distance",min:2,max:null,unit:"s",tolerance:.2},{name:"max_route_length",min:0,max:300,unit:"km",tolerance:10}],geo:{type:"road_network",description:"Approved regional highway and arterial segments  includes transfer hub access roads"},time:{operating_hours:"04:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"route_local"},states:{allowed:["parked","highway_cruise","arterial_drive","hub_approach","loading","unloading","mrc"],forbidden:["residential_street","school_zone","unpaved_road"]},odd_description:"Regional distribution routes on approved highways and arterials. Shorter segments with more frequent stops. System handles hub ingress/egress on pre-mapped facility roads.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},urban_robotaxi:{label:"Urban Robotaxi",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:4,unit:"persons",tolerance:0},{name:"min_visibility",min:100,max:null,unit:"m",tolerance:10},{name:"max_precipitation_rate",min:0,max:10,unit:"mm/hr",tolerance:1}],geo:{type:"road_network",description:"Approved urban street network with pickup/dropoff zones  excludes highways, unpaved roads, restricted zones"},time:{operating_hours:"05:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["parked","cruising","passenger_pickup","passenger_transit","dropoff","repositioning","mrc"],forbidden:["freeway_entered","visibility_degraded","door_open_moving"]},odd_description:"Dense urban street environment with mixed traffic, pedestrians, cyclists. L4 autonomy on mapped city streets. System handles intersections, traffic signals, and complex urban scenarios within speed and weather limits.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,passenger_interlock:!0,emergency_stop:!0}}},suburban_robotaxi:{label:"Suburban Robotaxi",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:80,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:4,unit:"persons",tolerance:0},{name:"min_visibility",min:150,max:null,unit:"m",tolerance:10}],geo:{type:"road_network",description:"Approved suburban road network including arterials and residential streets  excludes highways, rural roads"},time:{operating_hours:"05:00-00:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["parked","cruising","pickup","transit","dropoff","repositioning","mrc"],forbidden:["highway_entered","unpaved_road","school_zone_during_hours"]},odd_description:"Suburban mixed-use road environment. Lower traffic density than urban, higher speed limits. System operates on mapped residential and arterial roads with school zone awareness.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},fixed_route_autonomous_bus:{label:"Fixed-Route Autonomous Bus",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:40,unit:"persons",tolerance:0},{name:"max_grade",min:0,max:12,unit:"%",tolerance:.5}],geo:{type:"route",description:"Fixed transit route with designated stops  no deviation from approved route under any circumstances"},time:{operating_hours:"05:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"transit_local"},states:{allowed:["depot","en_route","stopped_at_station","loading","unloading","returning_depot","mrc"],forbidden:["off_route","door_open_moving","passenger_count_exceeded"]},odd_description:"Fixed transit route on public roads with designated bus stops. System follows exact route with no autonomous deviation. Passenger loading/unloading at stops only with door interlocks.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,door_interlock:!0,emergency_stop:!0}}},airport_shuttle_airside:{label:"Airport Shuttle (Airside)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:20,unit:"persons",tolerance:0},{name:"min_aircraft_clearance",min:10,max:null,unit:"m",tolerance:1}],geo:{type:"route",description:"Approved airside taxiway and apron routes  deconflicted from active runways and taxiways"},time:{operating_hours:"04:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"airport_local"},states:{allowed:["parked","en_route","at_gate","loading","unloading"],forbidden:["active_runway_proximity","aircraft_pushback_zone"]},odd_description:"Airport airside operations on controlled surface routes. System integrates with airport surface management and maintains clearance from all aircraft operations. Speed limited to airside regulations.",safety:{violation_action:"block",fail_closed:!0,atc_integration:!0,emergency_stop:!0}}},airport_shuttle_landside:{label:"Airport Shuttle (Landside)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:30,unit:"persons",tolerance:0}],geo:{type:"route",description:"Terminal-to-parking/rental fixed route  excludes active roadways, departure lanes"},time:{operating_hours:"04:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"airport_local"},states:{allowed:["parked","en_route","at_stop","loading","unloading","returning"],forbidden:["off_route","departure_lane_entered"]},odd_description:"Fixed route between airport terminals and parking/rental facilities on landside roads. Controlled low-speed environment with dedicated lanes where possible.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,emergency_stop:!0}}},port_terminal_tractor:{label:"Port Terminal Tractor (Yard Truck)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_tow_weight",min:0,max:8e4,unit:"kg",tolerance:500},{name:"min_container_clearance",min:1,max:null,unit:"m",tolerance:.1}],geo:{type:"polygon",description:"Port terminal yard boundary  approved lanes between crane positions and stacking areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["parked","empty_transit","loaded_transit","crane_position","stacking_position","charging"],forbidden:["public_road","human_zone_speed_exceeded","unstable_load"]},odd_description:"Closed port terminal environment with controlled traffic. System transports containers between cranes and stacking areas on predefined yard lanes. No public road interaction.",safety:{violation_action:"block",fail_closed:!0,load_stability_check:!0,emergency_stop:!0}}},mining_site_vehicle:{label:"Mining Site Autonomous Vehicle",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:4e5,unit:"kg",tolerance:1e3},{name:"max_grade",min:0,max:15,unit:"%",tolerance:.5},{name:"min_edge_distance",min:5,max:null,unit:"m",tolerance:.5}],geo:{type:"polygon",description:"Mine site operational boundary  approved haul roads, pit zones, dump areas  excludes blast zones, maintenance areas during service"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mine_local"},states:{allowed:["parked","hauling_loaded","hauling_empty","loading","dumping","fueling"],forbidden:["blast_zone_active","maintenance_area","edge_proximity_exceeded"]},odd_description:"Open-pit or underground mine with controlled vehicle traffic. Haul trucks operate on designated mine roads with edge detection. System integrates with mine dispatch and blast management.",safety:{violation_action:"block",fail_closed:!0,edge_protection:!0,blast_zone_interlock:!0,emergency_stop:!0}}},valet_parking_system:{label:"Automated Valet Parking",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:10,unit:"km/h",tolerance:.5},{name:"max_steering_angle",min:0,max:40,unit:"degrees",tolerance:1},{name:"min_obstacle_clearance",min:.2,max:null,unit:"m",tolerance:.05}],geo:{type:"polygon",description:"Parking structure or lot boundary  approved driving lanes and parking spaces only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["parked","maneuvering_to_spot","maneuvering_to_pickup","waiting_at_pickup"],forbidden:["pedestrian_detected","exit_lane_blocked","slope_exceeded"]},odd_description:"Controlled parking facility environment. Vehicle self-parks and self-retrieves at very low speed. Facility must be mapped and infrastructure-equipped. No pedestrians allowed in autonomous zone.",safety:{violation_action:"block",fail_closed:!0,pedestrian_stop:!0,ultra_low_speed:!0,emergency_stop:!0}}},low_speed_neighborhood_ev:{label:"Low-Speed Neighborhood EV",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:6,unit:"persons",tolerance:0},{name:"max_road_speed_limit",min:0,max:45,unit:"km/h",tolerance:0}],geo:{type:"road_network",description:"Neighborhood streets with posted speed limits 45 km/h  excludes arterials, highways, roads without sidewalks"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"community_local"},states:{allowed:["parked","cruising","pickup","dropoff","charging","mrc"],forbidden:["arterial_road","night_unlighted_road","heavy_rain"]},odd_description:"Residential neighborhood and retirement community streets. Low-speed vehicle class per FMVSS. Operates only on roads with posted speed limits at or below vehicle max speed.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},autonomous_cargo_vessel_coastal:{label:"Autonomous Cargo Vessel (Coastal)",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:15,unit:"knots",tolerance:.5},{name:"max_sea_state",min:0,max:5,unit:"Beaufort",tolerance:0},{name:"max_draft",min:0,max:8,unit:"m",tolerance:.1},{name:"min_under_keel_clearance",min:2,max:null,unit:"m",tolerance:.2}],geo:{type:"corridor",description:"Approved coastal shipping lanes  excludes TSS separation zones, marine protected areas, port approaches without pilot"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","departing","underway","approaching","anchored","mrc"],forbidden:["sea_state_exceeded","visibility_below_1nm","traffic_density_exceeded"]},odd_description:"Coastal shipping routes within 50nm of shore. System follows COLREG rules, maintains AIS broadcast, and transitions to remote operator handoff in congested waters. IMO MASS Level 3.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,remote_handoff:!0,emergency_stop:!1}}},autonomous_cargo_vessel_ocean:{label:"Autonomous Cargo Vessel (Ocean)",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:20,unit:"knots",tolerance:.5},{name:"max_sea_state",min:0,max:7,unit:"Beaufort",tolerance:0},{name:"max_roll_angle",min:0,max:30,unit:"degrees",tolerance:2},{name:"min_stability_gm",min:.5,max:null,unit:"m",tolerance:.05}],geo:{type:"corridor",description:"Ocean routing corridors  avoids ice zones, piracy high-risk areas, environmentally sensitive waters per IMO designations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","departing","ocean_transit","weather_routing","approaching","anchored"],forbidden:["stability_compromised","communication_lost_48hr","ice_zone_entered"]},odd_description:"Trans-oceanic shipping routes. Fully autonomous with shore-based remote monitoring. System performs weather routing optimization within approved corridor. COLREG compliant with enhanced collision avoidance.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,weather_routing:!0,emergency_stop:!1}}},port_crane_system:{label:"Automated Port Crane (STS/RTG)",domain:"marine",template:{numeric:[{name:"max_hoist_speed",min:0,max:90,unit:"m/min",tolerance:2},{name:"max_trolley_speed",min:0,max:240,unit:"m/min",tolerance:5},{name:"max_gantry_speed",min:0,max:45,unit:"m/min",tolerance:2},{name:"max_wind_speed",min:0,max:72,unit:"km/h",tolerance:3},{name:"max_lift_weight",min:0,max:65,unit:"tonnes",tolerance:1}],geo:{type:"linear",description:"Crane rail span and apron reach  excludes adjacent crane working zones, vessel superstructure clearance zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["idle","lifting","lowering","trolleying","gantry_moving","container_placing"],forbidden:["wind_exceeded","anti_collision_triggered","overload_detected","personnel_in_zone"]},odd_description:"Port container terminal crane operations. System handles container lift/place cycles within defined crane envelope. Anti-collision zones with adjacent cranes enforced. Wind speed limits enforced with automatic shutdown.",safety:{violation_action:"block",fail_closed:!0,anti_collision:!0,overload_protection:!0,emergency_stop:!0}}},container_yard_agv:{label:"Container Yard AGV",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:20,unit:"km/h",tolerance:1},{name:"max_payload",min:0,max:7e4,unit:"kg",tolerance:500},{name:"min_obstacle_distance",min:2,max:null,unit:"m",tolerance:.2}],geo:{type:"polygon",description:"Container yard lane network  approved travel lanes between crane positions and stacking blocks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["parked","empty_transit","loaded_transit","crane_exchange","charging"],forbidden:["personnel_zone","off_lane","unstable_load"]},odd_description:"Closed container terminal yard with controlled traffic. AGVs transport containers between quay cranes and yard stacking equipment on predefined lane network.",safety:{violation_action:"block",fail_closed:!0,personnel_detection:!0,emergency_stop:!0}}},autonomous_tugboat:{label:"Autonomous Tugboat",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:14,unit:"knots",tolerance:.5},{name:"max_bollard_pull",min:0,max:80,unit:"tonnes",tolerance:2},{name:"max_wind_speed",min:0,max:50,unit:"knots",tolerance:2},{name:"max_current",min:0,max:4,unit:"knots",tolerance:.2}],geo:{type:"polygon",description:"Port harbor and approach channel  approved escort and assist zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["moored","transiting","escort_position","assisting","standby","returning"],forbidden:["towline_overload","sea_state_exceeded","vessel_communication_lost"]},odd_description:"Port harbor tug operations for vessel assist and escort. System operates in close proximity to large vessels under port control coordination. Remote operator oversight for all assist maneuvers.",safety:{violation_action:"block",fail_closed:!0,towline_monitor:!0,remote_handoff:!0,emergency_stop:!0}}},underwater_auv_inspection:{label:"Underwater AUV (Inspection)",domain:"marine",template:{numeric:[{name:"max_depth",min:0,max:300,unit:"m",tolerance:5},{name:"max_speed",min:0,max:4,unit:"knots",tolerance:.2},{name:"max_mission_duration",min:0,max:12,unit:"hr",tolerance:.5},{name:"min_battery_for_surface",min:20,max:null,unit:"%",tolerance:3}],geo:{type:"polygon_3d",description:"Defined underwater inspection zone around target structure  exclusion zones around intake/outflow, shipping lanes overhead"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["surface","diving","inspecting","transiting","ascending","recovery"],forbidden:["battery_below_surface_reserve","depth_exceeded","communication_timeout"]},odd_description:"Underwater inspection of subsea infrastructure (pipelines, platforms, hulls). Tethered or free-swimming within defined zone. System maintains energy reserve for safe surfacing at all times.",safety:{violation_action:"block",fail_closed:!0,auto_surface:!0,depth_limiter:!0,emergency_stop:!1}}},underwater_auv_survey:{label:"Underwater AUV (Survey / Mapping)",domain:"marine",template:{numeric:[{name:"max_depth",min:0,max:6e3,unit:"m",tolerance:10},{name:"max_speed",min:0,max:5,unit:"knots",tolerance:.2},{name:"max_mission_duration",min:0,max:72,unit:"hr",tolerance:1},{name:"max_range",min:0,max:200,unit:"km",tolerance:5}],geo:{type:"polygon_3d",description:"Defined survey grid with depth ceiling/floor  avoids shipping lanes, fishing grounds, protected marine areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["surface","diving","surveying","transiting","ascending","recovery_wait"],forbidden:["depth_exceeded","energy_below_return_threshold","off_grid"]},odd_description:"Deep-water autonomous survey operations. Extended duration missions with pre-programmed grid patterns. System surfaces on completion or energy threshold. No real-time control in deep operations.",safety:{violation_action:"block",fail_closed:!0,auto_surface:!0,depth_limiter:!0,emergency_stop:!1}}},autonomous_ferry:{label:"Autonomous Ferry",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:12,unit:"knots",tolerance:.5},{name:"max_passengers",min:0,max:150,unit:"persons",tolerance:0},{name:"max_wind_speed",min:0,max:40,unit:"knots",tolerance:2},{name:"max_wave_height",min:0,max:1.5,unit:"m",tolerance:.1}],geo:{type:"corridor",description:"Fixed ferry route between terminals  approved transit corridor with exclusion from shipping lanes"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["moored","loading","departing","underway","arriving","unloading"],forbidden:["sea_state_exceeded","passenger_on_deck_during_transit","off_corridor"]},odd_description:"Fixed-route passenger ferry between two terminals. Short crossing in sheltered or semi-sheltered waters. System follows predefined route with COLREG compliance and weather-based operational limits.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,passenger_safety:!0,emergency_stop:!0}}},aquaculture_robot:{label:"Aquaculture Robot",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"knots",tolerance:.2},{name:"max_depth",min:0,max:30,unit:"m",tolerance:1},{name:"max_feed_rate",min:0,max:500,unit:"kg/hr",tolerance:10}],geo:{type:"polygon_3d",description:"Fish farm cage/pen boundaries  excludes neighboring pens, mooring lines, net edges"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["docked","feeding","inspecting","net_cleaning","monitoring","returning"],forbidden:["net_contact","fish_mortality_spike","current_exceeded"]},odd_description:"Marine aquaculture installation with defined cage structures. System operates within and around fish pens for feeding, inspection, and net maintenance. Tethered or cage-bounded operation.",safety:{violation_action:"block",fail_closed:!0,net_proximity:!0,emergency_stop:!0}}},surface_survey_vessel:{label:"Autonomous Surface Survey Vessel",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"knots",tolerance:.3},{name:"max_sea_state",min:0,max:4,unit:"Beaufort",tolerance:0},{name:"max_range",min:0,max:100,unit:"km",tolerance:5},{name:"max_mission_duration",min:0,max:48,unit:"hr",tolerance:2}],geo:{type:"polygon",description:"Defined survey area  excludes shipping lanes, restricted zones, shallow water below draft"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","transiting","surveying","station_keeping","returning"],forbidden:["sea_state_exceeded","shipping_lane_entered","communication_lost_2hr"]},odd_description:"Surface vessel conducting hydrographic or environmental survey in defined area. COLREG compliant with AIS. System follows pre-programmed survey pattern and returns on weather degradation.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,auto_return:!0,emergency_stop:!1}}},surgical_robot_orthopedic:{label:"Surgical Robot (Orthopedic)",domain:"medical",template:{numeric:[{name:"max_cutting_force",min:0,max:50,unit:"N",tolerance:1},{name:"max_cutting_depth",min:0,max:15,unit:"mm",tolerance:.1},{name:"positional_accuracy",min:0,max:.5,unit:"mm",tolerance:.05},{name:"max_joint_velocity",min:0,max:100,unit:"mm/s",tolerance:2}],geo:{type:"volume",description:"Surgical workspace envelope defined by pre-operative plan  hard boundaries around critical anatomy (nerves, vessels)"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"hospital_local"},states:{allowed:["powered_off","initializing","registered","cutting","paused","retracting","complete"],forbidden:["registration_lost","force_limit_exceeded","outside_planned_volume"]},odd_description:"Operating room environment with patient-registered coordinate system. Robot executes pre-planned bone cuts within defined volume. Surgeon maintains supervisory control and can override at any time. FDA Class II/III.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,surgeon_override:!0,emergency_stop:!0}}},surgical_robot_soft_tissue:{label:"Surgical Robot (Soft Tissue / Laparoscopic)",domain:"medical",template:{numeric:[{name:"max_instrument_force",min:0,max:10,unit:"N",tolerance:.5},{name:"max_instrument_speed",min:0,max:50,unit:"mm/s",tolerance:2},{name:"max_workspace_radius",min:0,max:150,unit:"mm",tolerance:2},{name:"max_insufflation_pressure",min:0,max:15,unit:"mmHg",tolerance:.5}],geo:{type:"volume",description:"Surgical cavity workspace  instrument reach envelope with exclusion zones around critical structures"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"hospital_local"},states:{allowed:["powered_off","initializing","docked","operating","paused","undocking","complete"],forbidden:["force_exceeded","workspace_exceeded","communication_lost"]},odd_description:"Operating room with teleoperated or semi-autonomous laparoscopic instruments. Surgeon maintains primary control with haptic feedback. System enforces instrument workspace and force limits.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,surgeon_override:!0,emergency_stop:!0}}},pharmacy_dispensing_robot:{label:"Pharmacy Dispensing Robot",domain:"medical",template:{numeric:[{name:"max_dispensing_rate",min:0,max:200,unit:"scripts/hr",tolerance:5},{name:"max_controlled_substance_quantity",min:0,max:30,unit:"doses",tolerance:0},{name:"temperature_range_min",min:2,max:null,unit:"C",tolerance:.5},{name:"temperature_range_max",min:0,max:8,unit:"C",tolerance:.5}],geo:{type:"enclosure",description:"Pharmacy dispensing cabinet footprint  secure enclosure with controlled access"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","dispensing","restocking","inventory_count","maintenance_mode"],forbidden:["barcode_mismatch","controlled_substance_count_discrepancy","temperature_excursion"]},odd_description:"Hospital or retail pharmacy automated dispensing. System verifies every medication against prescription via barcode/RFID. Controlled substance tracking with DEA-compliant chain of custody. Pharmacist verification required.",safety:{violation_action:"block",fail_closed:!0,pharmacist_override:!0,dea_logging:!0,emergency_stop:!0}}},hospital_logistics_robot:{label:"Hospital Logistics Robot",domain:"medical",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.2},{name:"max_payload",min:0,max:50,unit:"kg",tolerance:2},{name:"max_noise_level",min:0,max:55,unit:"dB",tolerance:2}],geo:{type:"floor_plan",description:"Hospital floor plan corridors and elevators  excludes ICU during quiet hours, operating rooms during procedures, isolation rooms"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","en_route","at_station","loading","unloading","elevator_transit","charging"],forbidden:["or_during_procedure","isolation_room","speed_exceeded_in_patient_area"]},odd_description:"Hospital interior corridors for medication, specimen, and supply delivery. System navigates around patients, staff, and equipment. Reduced speed near patient areas. Elevator integration required.",safety:{violation_action:"block",fail_closed:!0,patient_area_speed_limit:!0,emergency_stop:!0}}},rehabilitation_robot:{label:"Rehabilitation / Physical Therapy Robot",domain:"medical",template:{numeric:[{name:"max_assistive_force",min:0,max:100,unit:"N",tolerance:2},{name:"max_joint_velocity",min:0,max:30,unit:"deg/s",tolerance:1},{name:"max_range_of_motion",min:0,max:180,unit:"degrees",tolerance:2},{name:"max_session_duration",min:0,max:60,unit:"min",tolerance:2}],geo:{type:"workspace",description:"Rehabilitation bay or patient room  robot workspace envelope around patient"},time:{operating_hours:"07:00-19:00",operating_days:[1,2,3,4,5],timezone:"facility_local"},states:{allowed:["powered_off","initializing","exercise_mode","passive_mode","paused","session_complete"],forbidden:["force_exceeded","pain_signal_detected","patient_not_secured"]},odd_description:"Clinical rehabilitation environment with patient physically interfacing with robotic device. System follows prescribed exercise protocol with force and range-of-motion limits. Therapist supervision required.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,patient_override:!0,therapist_override:!0,emergency_stop:!0}}},radiology_ai_diagnostic:{label:"Radiology AI (Diagnostic)",domain:"medical",template:{numeric:[{name:"max_daily_reads",min:0,max:500,unit:"studies",tolerance:10},{name:"min_confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"max_report_latency",min:0,max:60,unit:"min",tolerance:5}],geo:{type:"logical",description:"Connected PACS/RIS systems  approved imaging modalities and body regions only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","processing","flagging","reporting","quality_review"],forbidden:["confidence_below_threshold_auto_report","unsupported_modality","radiologist_override_bypassed"]},odd_description:"Medical imaging AI for triage, detection, and measurement. System flags findings for radiologist review  does not issue final diagnostic reports autonomously. FDA 510(k) cleared for specific indications.",safety:{violation_action:"block",fail_closed:!0,radiologist_review_required:!0,audit_trail:!0}}},pathology_ai_diagnostic:{label:"Pathology AI (Diagnostic)",domain:"medical",template:{numeric:[{name:"max_daily_slides",min:0,max:300,unit:"slides",tolerance:10},{name:"min_confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"max_turnaround",min:0,max:24,unit:"hr",tolerance:1}],geo:{type:"logical",description:"Connected digital pathology scanner and LIS  approved stain types and tissue types only"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"lab_local"},states:{allowed:["idle","scanning","analyzing","flagging","reporting","qa_review"],forbidden:["unsupported_stain_type","confidence_below_threshold","pathologist_review_bypassed"]},odd_description:"Digital pathology AI for slide analysis, cell counting, and anomaly detection. System provides preliminary analysis for pathologist review. Does not issue independent diagnoses.",safety:{violation_action:"block",fail_closed:!0,pathologist_review_required:!0,audit_trail:!0}}},patient_monitoring_icu:{label:"Patient Monitoring AI (ICU)",domain:"medical",template:{numeric:[{name:"max_patients_monitored",min:0,max:50,unit:"patients",tolerance:0},{name:"alert_latency",min:0,max:5,unit:"s",tolerance:.5},{name:"max_false_alarm_rate",min:0,max:5,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected ICU bed monitoring systems  approved vital sign parameters and device types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["monitoring","alerting","trending","shift_handoff","calibrating"],forbidden:["alert_suppression_unauthorized","sensor_disconnected_unacknowledged"]},odd_description:"ICU patient monitoring with AI-driven early warning. System analyzes continuous vital sign streams and alerts nursing staff to deterioration patterns. Does not autonomously modify treatment.",safety:{violation_action:"warn",fail_closed:!0,nurse_notification_required:!0,audit_trail:!0}}},patient_monitoring_remote:{label:"Patient Monitoring AI (Remote / RPM)",domain:"medical",template:{numeric:[{name:"max_patients_monitored",min:0,max:500,unit:"patients",tolerance:10},{name:"max_alert_latency",min:0,max:60,unit:"s",tolerance:5},{name:"check_in_frequency",min:0,max:24,unit:"hr",tolerance:1}],geo:{type:"logical",description:"Connected RPM devices (blood pressure, glucose, pulse ox, weight)  approved device models and firmware versions"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"patient_local"},states:{allowed:["monitoring","alerting","trending","provider_review","patient_engagement"],forbidden:["critical_value_unescalated","device_disconnected_48hr_unnoticed"]},odd_description:"Remote patient monitoring for chronic disease management. System tracks trends and alerts clinical team to concerning patterns. Patient-facing with provider oversight. HIPAA compliant.",safety:{violation_action:"warn",fail_closed:!0,provider_escalation:!0,hipaa_compliant:!0}}},medication_dosing_ai:{label:"Medication Dosing AI",domain:"medical",template:{numeric:[{name:"max_dose_deviation",min:0,max:10,unit:"%",tolerance:1},{name:"max_infusion_rate",min:0,max:999,unit:"mL/hr",tolerance:1},{name:"max_daily_dose",min:0,max:null,unit:"mg",tolerance:0}],geo:{type:"logical",description:"Connected infusion pumps and EHR system  approved medication formulary only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","calculating","recommending","infusing","monitoring","complete"],forbidden:["allergy_conflict","interaction_detected","dose_exceeds_protocol","pharmacist_override_bypassed"]},odd_description:"AI-assisted medication dosing for titration protocols (insulin, heparin, vasopressors). System recommends doses based on patient parameters. Pharmacist and nurse verification required before administration.",safety:{violation_action:"block",fail_closed:!0,pharmacist_verification:!0,nurse_verification:!0,five_rights_check:!0,emergency_stop:!0}}},triage_ai_system:{label:"Triage AI System (ED)",domain:"medical",template:{numeric:[{name:"max_patients_per_hour",min:0,max:60,unit:"patients/hr",tolerance:5},{name:"max_triage_time",min:0,max:5,unit:"min",tolerance:.5},{name:"min_acuity_accuracy",min:.85,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"ED triage workflow  connected to EHR, vital sign monitors, and patient tracking board"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","assessing","scoring","recommending","nurse_review","complete"],forbidden:["auto_assign_without_nurse_review","downgrade_critical_patient"]},odd_description:"Emergency department triage assistance AI. System suggests acuity level based on chief complaint, vitals, and history. Triage nurse makes final acuity determination. System cannot independently downgrade patient acuity.",safety:{violation_action:"block",fail_closed:!0,nurse_override_required:!0,critical_patient_escalation:!0}}},lab_automation_robot:{label:"Lab Automation Robot",domain:"medical",template:{numeric:[{name:"max_sample_throughput",min:0,max:1e3,unit:"samples/hr",tolerance:20},{name:"max_pipette_volume",min:0,max:1e3,unit:"L",tolerance:.5},{name:"temperature_stability",min:-.5,max:.5,unit:"C",tolerance:.1}],geo:{type:"enclosure",description:"Biosafety cabinet or lab bench footprint  enclosed workspace with controlled access"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"lab_local"},states:{allowed:["idle","processing","pipetting","incubating","reading","cleaning","maintenance"],forbidden:["sample_id_mismatch","biosafety_breach","reagent_expired"]},odd_description:"Clinical or research laboratory with automated sample processing. System handles sample accessioning, preparation, and analysis within enclosed workspace. Chain of custody maintained via barcode/RFID tracking.",safety:{violation_action:"block",fail_closed:!0,sample_tracking:!0,biosafety_interlock:!0,emergency_stop:!0}}},high_frequency_trading:{label:"High-Frequency Trading System",domain:"financial",template:{numeric:[{name:"max_position_size",min:0,max:1e7,unit:"USD",tolerance:1e5},{name:"max_daily_loss",min:0,max:5e5,unit:"USD",tolerance:1e4},{name:"max_orders_per_second",min:0,max:1e4,unit:"orders/s",tolerance:100},{name:"max_notional_exposure",min:0,max:1e8,unit:"USD",tolerance:1e6}],geo:{type:"logical",description:"Approved exchanges and trading venues  approved instrument types and symbol lists"},time:{operating_hours:"09:30-16:00",operating_days:[1,2,3,4,5],timezone:"exchange_local"},states:{allowed:["pre_market","active_trading","risk_check","position_unwinding","end_of_day","halted"],forbidden:["daily_loss_exceeded","position_limit_exceeded","exchange_circuit_breaker"]},odd_description:"Automated trading on regulated exchanges. System executes within position limits, loss limits, and approved instruments. Kill switch triggers on daily loss threshold or anomalous market conditions. SEC/FINRA compliant.",safety:{violation_action:"block",fail_closed:!0,kill_switch:!0,risk_monitor:!0,regulatory_reporting:!0}}},algorithmic_market_making:{label:"Algorithmic Market Making",domain:"financial",template:{numeric:[{name:"max_spread",min:0,max:50,unit:"bps",tolerance:2},{name:"max_inventory",min:0,max:5e6,unit:"USD",tolerance:1e5},{name:"max_daily_loss",min:0,max:2e5,unit:"USD",tolerance:1e4},{name:"min_quote_lifetime",min:100,max:null,unit:"ms",tolerance:10}],geo:{type:"logical",description:"Approved trading venues and symbol lists  approved counterparty types"},time:{operating_hours:"09:30-16:00",operating_days:[1,2,3,4,5],timezone:"exchange_local"},states:{allowed:["quoting","hedging","inventory_management","risk_pause","end_of_day"],forbidden:["inventory_exceeded","loss_exceeded","market_manipulation_pattern"]},odd_description:"Automated market making with continuous two-sided quotes. System manages inventory within limits and hedges exposure. Withdrawal from market on volatility spikes or inventory breaches.",safety:{violation_action:"block",fail_closed:!0,kill_switch:!0,inventory_limit:!0,regulatory_reporting:!0}}},credit_underwriting_ai:{label:"Credit Underwriting AI",domain:"financial",template:{numeric:[{name:"max_auto_approve_amount",min:0,max:5e4,unit:"USD",tolerance:1e3},{name:"max_daily_approvals",min:0,max:1e3,unit:"applications",tolerance:20},{name:"min_model_confidence",min:.85,max:null,unit:"score",tolerance:.02},{name:"max_adverse_action_rate",min:0,max:40,unit:"%",tolerance:2}],geo:{type:"logical",description:"Approved lending markets and jurisdictions  excludes prohibited jurisdictions and sanctioned entities"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["receiving","scoring","decisioning","approved","declined","referred_to_human","adverse_action"],forbidden:["prohibited_factor_used","fair_lending_violation","model_drift_exceeded"]},odd_description:"Automated credit decisioning within approved parameters. System scores applications and auto-approves within limits. Applications exceeding thresholds referred to human underwriter. ECOA/FCRA compliant with adverse action notices.",safety:{violation_action:"block",fail_closed:!0,fair_lending_monitor:!0,human_escalation:!0,regulatory_reporting:!0}}},insurance_underwriting_ai:{label:"Insurance Underwriting AI",domain:"financial",template:{numeric:[{name:"max_auto_bind_premium",min:0,max:25e3,unit:"USD",tolerance:1e3},{name:"max_coverage_amount",min:0,max:1e6,unit:"USD",tolerance:5e4},{name:"max_daily_binds",min:0,max:500,unit:"policies",tolerance:10}],geo:{type:"logical",description:"Approved states/territories and lines of business  excludes surplus lines requiring manual review"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["receiving","rating","quoting","binding","referring","declining"],forbidden:["prohibited_classification_used","rate_deviation_exceeded","catastrophe_moratorium_active"]},odd_description:"Automated insurance underwriting for standard risk classes. System rates, quotes, and binds within approved guidelines. Non-standard risks referred to human underwriter. State DOI rate filing compliant.",safety:{violation_action:"block",fail_closed:!0,human_escalation:!0,rate_compliance:!0}}},fraud_detection_ai:{label:"Fraud Detection AI",domain:"financial",template:{numeric:[{name:"max_auto_block_amount",min:0,max:1e4,unit:"USD",tolerance:500},{name:"max_false_positive_rate",min:0,max:3,unit:"%",tolerance:.5},{name:"alert_latency",min:0,max:500,unit:"ms",tolerance:50},{name:"max_daily_blocks",min:0,max:5e3,unit:"transactions",tolerance:100}],geo:{type:"logical",description:"All transaction channels  card present, card not present, ACH, wire"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","scoring","alerting","blocking","reviewing","releasing"],forbidden:["legitimate_pattern_blocked_repeatedly","model_drift_exceeded","override_audit_gap"]},odd_description:"Real-time transaction fraud scoring and blocking. System scores every transaction and blocks those exceeding risk thresholds. Blocked transactions queued for human review. Customer notification on blocks.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,customer_notification:!0}}},aml_ai:{label:"Anti-Money Laundering AI",domain:"financial",template:{numeric:[{name:"max_daily_alerts",min:0,max:500,unit:"alerts",tolerance:20},{name:"max_alert_resolution_time",min:0,max:48,unit:"hr",tolerance:4},{name:"min_sar_confidence",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"All customer accounts and transaction channels  OFAC/SDN list integration"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","alert_generated","investigating","sar_recommended","cleared","escalated"],forbidden:["sar_auto_filed_without_review","sanctions_hit_ignored","alert_auto_closed"]},odd_description:"Transaction monitoring and suspicious activity detection. System generates alerts for human BSA/AML analysts. Cannot auto-file SARs or auto-close alerts. FinCEN/BSA compliant with full audit trail.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,regulatory_reporting:!0}}},robo_advisory:{label:"Robo-Advisory (Wealth Management)",domain:"financial",template:{numeric:[{name:"max_single_trade_pct",min:0,max:10,unit:"% of portfolio",tolerance:.5},{name:"max_daily_rebalance_pct",min:0,max:25,unit:"% of portfolio",tolerance:1},{name:"max_leverage",min:0,max:1,unit:"ratio",tolerance:0},{name:"max_concentration_single_security",min:0,max:15,unit:"%",tolerance:1}],geo:{type:"logical",description:"Approved investment universe  approved asset classes, exchanges, and instrument types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","rebalancing","tax_loss_harvesting","dividend_reinvesting","reporting"],forbidden:["leverage_used","prohibited_security","concentration_exceeded","suitability_violation"]},odd_description:"Automated portfolio management within client-approved investment policy. System rebalances to target allocation, harvests tax losses, and reinvests dividends. No leverage, no derivatives, approved universe only. SEC/FINRA RIA compliant.",safety:{violation_action:"block",fail_closed:!0,suitability_check:!0,client_notification:!0}}},loan_origination_ai:{label:"Loan Origination AI",domain:"financial",template:{numeric:[{name:"max_auto_approve_amount",min:0,max:1e5,unit:"USD",tolerance:5e3},{name:"max_dti_ratio",min:0,max:43,unit:"%",tolerance:1},{name:"max_ltv_ratio",min:0,max:97,unit:"%",tolerance:1}],geo:{type:"logical",description:"Approved lending jurisdictions and property types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["application_received","verifying","scoring","approved","conditional","denied","referred"],forbidden:["dti_exceeded_auto_approve","fair_lending_flag","incomplete_verification_approved"]},odd_description:"Automated loan origination with document verification and creditworthiness assessment. System handles standard conforming loans within guidelines. Non-conforming loans referred to human underwriter. TRID/HMDA compliant.",safety:{violation_action:"block",fail_closed:!0,human_escalation:!0,fair_lending_monitor:!0}}},claims_processing_ai:{label:"Claims Processing AI",domain:"financial",template:{numeric:[{name:"max_auto_pay_amount",min:0,max:5e3,unit:"USD",tolerance:250},{name:"max_daily_auto_pays",min:0,max:2e3,unit:"claims",tolerance:50},{name:"max_processing_time",min:0,max:72,unit:"hr",tolerance:4}],geo:{type:"logical",description:"Approved claim types and coverage lines  approved provider networks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["received","reviewing","approved","denied","referred","paid","appealed"],forbidden:["fraud_indicator_auto_paid","above_threshold_auto_paid","duplicate_claim_paid"]},odd_description:"Automated insurance claims adjudication for standard claims within auto-pay thresholds. System reviews documentation, verifies coverage, and processes payment. Complex or high-value claims referred to human adjuster.",safety:{violation_action:"block",fail_closed:!0,fraud_detection:!0,human_escalation:!0}}},payment_risk_scoring:{label:"Payment Risk Scoring AI",domain:"financial",template:{numeric:[{name:"max_transaction_amount",min:0,max:5e4,unit:"USD",tolerance:1e3},{name:"scoring_latency",min:0,max:100,unit:"ms",tolerance:10},{name:"max_false_decline_rate",min:0,max:2,unit:"%",tolerance:.5}],geo:{type:"logical",description:"All payment channels and geographies  with country risk scoring"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["scoring","approved","declined","review_queue","manual_review"],forbidden:["sanctioned_country_approved","velocity_exceeded_approved"]},odd_description:"Real-time payment authorization risk scoring. System evaluates transaction risk and returns approve/decline/review decision within latency SLA. High-risk transactions queued for manual review.",safety:{violation_action:"block",fail_closed:!1,manual_review_queue:!0}}},grid_balancing_system:{label:"Grid Balancing System",domain:"energy",template:{numeric:[{name:"max_frequency_deviation",min:-.5,max:.5,unit:"Hz",tolerance:.01},{name:"max_autonomous_dispatch",min:0,max:500,unit:"MW",tolerance:10},{name:"max_ramp_rate",min:0,max:100,unit:"MW/min",tolerance:5},{name:"response_time",min:0,max:4,unit:"s",tolerance:.5}],geo:{type:"logical",description:"Balancing authority area  approved generation and load resources"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["monitoring","regulating","dispatching","emergency_response","manual_override"],forbidden:["islanding_unauthorized","load_shed_protected_category","frequency_collapse_unresponded"]},odd_description:"Real-time grid frequency regulation within balancing authority area. System dispatches generation and load resources within authorized MW limits. Protected categories (hospitals, emergency services) hardcoded as non-sheddable. NERC compliant.",safety:{violation_action:"block",fail_closed:!0,protected_loads:!0,nerc_logging:!0,emergency_stop:!0}}},renewable_integration_controller:{label:"Renewable Integration Controller",domain:"energy",template:{numeric:[{name:"max_curtailment",min:0,max:200,unit:"MW",tolerance:5},{name:"max_ramp_rate",min:0,max:50,unit:"MW/min",tolerance:2},{name:"min_reserve_margin",min:5,max:null,unit:"%",tolerance:1}],geo:{type:"logical",description:"Connected renewable assets  solar, wind, storage facilities within control area"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["monitoring","dispatching","curtailing","ramping","forecasting"],forbidden:["reserve_margin_violated","ppa_curtailment_exceeded","grid_code_violation"]},odd_description:"Renewable energy integration management across portfolio of solar, wind, and storage assets. System optimizes dispatch, manages curtailment within PPA limits, and maintains grid code compliance.",safety:{violation_action:"block",fail_closed:!0,grid_code_compliance:!0,ppa_limits:!0}}},demand_response_system:{label:"Demand Response System",domain:"energy",template:{numeric:[{name:"max_load_reduction",min:0,max:100,unit:"MW",tolerance:5},{name:"max_event_duration",min:0,max:4,unit:"hr",tolerance:.25},{name:"max_events_per_month",min:0,max:10,unit:"events",tolerance:0},{name:"notification_lead_time",min:15,max:null,unit:"min",tolerance:5}],geo:{type:"logical",description:"Enrolled demand response participants  approved load categories and customer segments"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"utility_local"},states:{allowed:["standby","event_called","ramping_down","sustained","ramping_up","event_complete"],forbidden:["protected_load_curtailed","event_limit_exceeded","customer_opt_out_overridden"]},odd_description:"Automated demand response dispatch to enrolled participants. System manages load curtailment events within contractual limits. Protected and opted-out loads excluded from all events.",safety:{violation_action:"block",fail_closed:!0,protected_loads:!0,customer_consent:!0}}},battery_storage_dispatch:{label:"Battery Storage Dispatch System",domain:"energy",template:{numeric:[{name:"max_charge_rate",min:0,max:100,unit:"MW",tolerance:2},{name:"max_discharge_rate",min:0,max:100,unit:"MW",tolerance:2},{name:"min_soc",min:10,max:null,unit:"%",tolerance:1},{name:"max_soc",min:0,max:95,unit:"%",tolerance:1},{name:"max_cell_temperature",min:0,max:45,unit:"C",tolerance:1}],geo:{type:"logical",description:"Battery energy storage system  approved grid interconnection points and market participation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["idle","charging","discharging","grid_forming","maintenance","thermal_management"],forbidden:["soc_below_minimum","temperature_exceeded","cell_imbalance_critical"]},odd_description:"Grid-scale battery storage dispatch for energy arbitrage, frequency regulation, and peak shaving. System operates within thermal and SOC limits with fire suppression interlock. NERC/FERC compliant.",safety:{violation_action:"block",fail_closed:!0,thermal_protection:!0,fire_suppression_interlock:!0,emergency_stop:!0}}},nuclear_plant_monitor:{label:"Nuclear Plant Monitoring AI",domain:"energy",template:{numeric:[{name:"max_reactor_temperature",min:0,max:350,unit:"C",tolerance:1},{name:"max_neutron_flux",min:0,max:100,unit:"% rated",tolerance:.5},{name:"max_coolant_pressure",min:0,max:155,unit:"bar",tolerance:.5},{name:"alert_response_time",min:0,max:1,unit:"s",tolerance:.1}],geo:{type:"logical",description:"Plant instrumentation and control systems  monitoring only, no autonomous control authority over safety systems"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"plant_local"},states:{allowed:["monitoring","trending","alerting","reporting","maintenance_support"],forbidden:["safety_system_modification","scram_inhibit","setpoint_change_unauthorized"]},odd_description:"Advisory monitoring system for nuclear plant operations. System analyzes plant parameters and provides operator recommendations. NO autonomous control authority over any safety-related system. NRC/10CFR50 compliant. Human operators make all control decisions.",safety:{violation_action:"block",fail_closed:!0,monitoring_only:!0,nrc_compliant:!0}}},oil_gas_pipeline_monitor:{label:"Oil & Gas Pipeline Monitor AI",domain:"energy",template:{numeric:[{name:"max_pressure",min:0,max:100,unit:"bar",tolerance:1},{name:"max_flow_rate",min:0,max:5e3,unit:"m/hr",tolerance:50},{name:"leak_detection_threshold",min:.1,max:null,unit:"% flow",tolerance:.05},{name:"alert_latency",min:0,max:30,unit:"s",tolerance:5}],geo:{type:"linear",description:"Pipeline segments with sensor coverage  approved operating pressure zones by segment"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","leak_alert","pressure_alert","flow_alert","shutdown_recommended","maintenance"],forbidden:["leak_confirmed_flow_continued","pressure_exceeded_no_alert"]},odd_description:"Pipeline integrity monitoring with SCADA integration. System detects anomalies (leaks, pressure excursions, flow irregularities) and alerts operators. Can recommend emergency shutdown but requires operator confirmation. PHMSA compliant.",safety:{violation_action:"warn",fail_closed:!0,operator_confirmation_for_shutdown:!0,phmsa_logging:!0}}},wind_farm_controller:{label:"Wind Farm Controller",domain:"energy",template:{numeric:[{name:"max_wind_speed_operation",min:0,max:25,unit:"m/s",tolerance:.5},{name:"max_power_output",min:0,max:500,unit:"MW",tolerance:5},{name:"max_yaw_rate",min:0,max:.5,unit:"deg/s",tolerance:.05},{name:"max_rotor_speed",min:0,max:15,unit:"rpm",tolerance:.2}],geo:{type:"logical",description:"Wind farm turbine array  approved grid connection and curtailment participation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","starting","generating","curtailing","shutting_down","maintenance","storm_shutdown"],forbidden:["wind_exceeded_generating","rotor_overspeed","grid_fault_generating"]},odd_description:"Wind farm autonomous control including turbine start/stop, yaw control, power curtailment, and grid compliance. System manages individual turbines and farm-level output. Automatic storm shutdown above cut-out wind speed.",safety:{violation_action:"block",fail_closed:!0,overspeed_protection:!0,storm_shutdown:!0,grid_code_compliance:!0}}},solar_farm_controller:{label:"Solar Farm Controller",domain:"energy",template:{numeric:[{name:"max_power_output",min:0,max:300,unit:"MW",tolerance:5},{name:"max_ramp_rate",min:0,max:30,unit:"MW/min",tolerance:2},{name:"max_inverter_temperature",min:0,max:60,unit:"C",tolerance:1},{name:"min_power_factor",min:.95,max:null,unit:"ratio",tolerance:.01}],geo:{type:"logical",description:"Solar array blocks and inverter stations  approved grid connection point"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["offline","starting","generating","curtailing","ramping","grid_support","maintenance"],forbidden:["inverter_overtemp_generating","grid_fault_generating","anti_islanding_failed"]},odd_description:"Utility-scale solar farm control including tracker positioning, inverter management, power curtailment, and reactive power support. Automatic anti-islanding protection and grid code compliance.",safety:{violation_action:"block",fail_closed:!0,anti_islanding:!0,thermal_protection:!0,grid_code_compliance:!0}}},ev_charging_network:{label:"EV Charging Network Manager",domain:"energy",template:{numeric:[{name:"max_station_power",min:0,max:350,unit:"kW",tolerance:5},{name:"max_network_load",min:0,max:10,unit:"MW",tolerance:.5},{name:"max_price_per_kwh",min:0,max:1,unit:"USD/kWh",tolerance:.05},{name:"max_demand_charge_exposure",min:0,max:5e4,unit:"USD/mo",tolerance:2e3}],geo:{type:"logical",description:"Managed charging stations across network  utility interconnection points and demand response enrollment"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["monitoring","load_balancing","demand_response","dynamic_pricing","maintenance"],forbidden:["demand_charge_exceeded","grid_overload","price_gouging_threshold"]},odd_description:"Network-wide EV charging load management. System optimizes charging across stations to minimize demand charges and participate in demand response. Dynamic pricing within regulatory limits.",safety:{violation_action:"block",fail_closed:!0,demand_limiting:!0,price_caps:!0}}},smart_meter_analytics:{label:"Smart Meter Analytics AI",domain:"energy",template:{numeric:[{name:"max_meters_monitored",min:0,max:1e6,unit:"meters",tolerance:1e4},{name:"anomaly_detection_latency",min:0,max:60,unit:"min",tolerance:5},{name:"max_auto_disconnect",min:0,max:0,unit:"meters",tolerance:0}],geo:{type:"logical",description:"Utility service territory  connected AMI infrastructure"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"utility_local"},states:{allowed:["monitoring","analyzing","alerting","reporting","forecasting"],forbidden:["auto_disconnect","customer_data_shared_unauthorized","billing_modification_unauthorized"]},odd_description:"Smart meter data analytics for usage patterns, theft detection, and demand forecasting. System provides insights to utility operators. NO autonomous disconnect authority. Customer data handled per PUC privacy rules.",safety:{violation_action:"block",fail_closed:!0,no_disconnect_authority:!0,privacy_compliant:!0}}},cnc_machine_controller:{label:"CNC Machine Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_spindle_speed",min:0,max:24e3,unit:"rpm",tolerance:50},{name:"max_feed_rate",min:0,max:15e3,unit:"mm/min",tolerance:50},{name:"max_cutting_force",min:0,max:5e3,unit:"N",tolerance:50},{name:"positional_accuracy",min:0,max:.01,unit:"mm",tolerance:.002}],geo:{type:"workspace",description:"Machine tool work envelope  defined by axis travel limits and fixture positions"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","running_program","tool_change","probing","coolant_on","paused"],forbidden:["tool_breakage_detected_running","door_open_spindle_on","axis_limit_exceeded"]},odd_description:"CNC machining with AI-optimized feed rates and tool paths. System operates within machine tool envelope with hard axis limits, force monitoring, and tool breakage detection. Door interlock required.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,force_monitoring:!0,emergency_stop:!0}}},welding_robot:{label:"Welding Robot",domain:"manufacturing",template:{numeric:[{name:"max_welding_current",min:0,max:500,unit:"A",tolerance:5},{name:"max_wire_feed_speed",min:0,max:25,unit:"m/min",tolerance:.5},{name:"max_travel_speed",min:0,max:2e3,unit:"mm/min",tolerance:20},{name:"max_heat_input",min:0,max:3,unit:"kJ/mm",tolerance:.1}],geo:{type:"workspace",description:"Welding cell with light curtain boundary  human exclusion zone during operation"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","welding","seam_tracking","torch_cleaning","part_change","inspection"],forbidden:["light_curtain_broken","gas_flow_lost","wire_stuck"]},odd_description:"Automated welding cell with safety-rated perimeter. System executes programmed weld sequences with adaptive seam tracking. Human exclusion zone enforced by light curtains and safety-rated controller.",safety:{violation_action:"block",fail_closed:!0,light_curtain:!0,gas_monitoring:!0,emergency_stop:!0}}},assembly_line_robot:{label:"Assembly Line Robot (Collaborative)",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:250,unit:"mm/s",tolerance:5},{name:"max_force",min:0,max:150,unit:"N",tolerance:5},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.2},{name:"max_power",min:0,max:80,unit:"W",tolerance:2}],geo:{type:"workspace",description:"Collaborative workspace shared with human workers  speed/force limits per ISO/TS 15066"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","assembling","handing_off","waiting","returning","paused"],forbidden:["force_exceeded","speed_exceeded_human_present","payload_exceeded"]},odd_description:"Collaborative robot (cobot) working alongside humans on assembly tasks. Power and force limiting per ISO/TS 15066. System reduces speed when human is in collaborative workspace.",safety:{violation_action:"block",fail_closed:!0,power_force_limiting:!0,speed_separation:!0,emergency_stop:!0}}},quality_inspection_ai:{label:"Quality Inspection AI (Vision)",domain:"manufacturing",template:{numeric:[{name:"max_inspection_rate",min:0,max:1e3,unit:"parts/hr",tolerance:20},{name:"min_defect_detection_rate",min:.95,max:null,unit:"ratio",tolerance:.01},{name:"max_false_reject_rate",min:0,max:2,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected inspection stations  approved part types and defect classifications"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","inspecting","classifying","rejecting","passing","calibrating"],forbidden:["model_confidence_below_threshold_passing","uncalibrated_inspecting","new_part_type_unvalidated"]},odd_description:"Machine vision quality inspection for manufactured parts. System classifies parts as pass/fail/review based on visual defects. Low-confidence parts routed to human inspector. Calibration checks required per shift.",safety:{violation_action:"block",fail_closed:!0,human_review_queue:!0,calibration_interlock:!0}}},predictive_maintenance_ai:{label:"Predictive Maintenance AI",domain:"manufacturing",template:{numeric:[{name:"max_monitored_assets",min:0,max:1e4,unit:"assets",tolerance:100},{name:"prediction_horizon",min:0,max:90,unit:"days",tolerance:5},{name:"max_auto_work_orders",min:0,max:50,unit:"orders/day",tolerance:5}],geo:{type:"logical",description:"Connected sensor network across facility  approved asset types and maintenance categories"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["monitoring","analyzing","alerting","work_order_generated","technician_dispatched"],forbidden:["critical_alert_suppressed","auto_shutdown_without_confirmation"]},odd_description:"Vibration, thermal, and performance monitoring for rotating equipment and industrial assets. System predicts failures and generates maintenance work orders. Cannot autonomously shut down production equipment.",safety:{violation_action:"warn",fail_closed:!0,no_auto_shutdown:!0,maintenance_team_notification:!0}}},chemical_process_controller:{label:"Chemical Process Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_temperature",min:0,max:500,unit:"C",tolerance:2},{name:"max_pressure",min:0,max:50,unit:"bar",tolerance:.5},{name:"max_flow_rate",min:0,max:1e3,unit:"L/hr",tolerance:10},{name:"max_concentration",min:0,max:100,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Process unit with SIS boundaries  approved setpoint ranges per unit operation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","startup","steady_state","grade_change","shutdown","emergency_shutdown"],forbidden:["sis_setpoint_override","safety_valve_bypass","runaway_reaction_unresponded"]},odd_description:"Advanced process control for chemical manufacturing. System optimizes within safety instrumented system (SIS) boundaries. Cannot modify SIS setpoints. Independent SIS takes priority over all APC actions. ISA-84/IEC 61511 compliant.",safety:{violation_action:"block",fail_closed:!0,sis_independent:!0,process_safety:!0,emergency_stop:!0}}},semiconductor_fab_controller:{label:"Semiconductor Fab Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_particle_count",min:0,max:100,unit:"particles/m",tolerance:5},{name:"temperature_stability",min:-.1,max:.1,unit:"C",tolerance:.02},{name:"humidity_stability",min:-.5,max:.5,unit:"%RH",tolerance:.1},{name:"max_wafers_in_process",min:0,max:5e3,unit:"wafers",tolerance:50}],geo:{type:"logical",description:"Cleanroom zones with environmental controls  approved tool groups and process recipes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"fab_local"},states:{allowed:["idle","processing","transferring","measuring","recipe_running","maintenance"],forbidden:["cleanroom_excursion_processing","recipe_deviation_unapproved","contamination_detected_running"]},odd_description:"Semiconductor fabrication process optimization and scheduling. System manages wafer routing, recipe execution, and environmental control within cleanroom specifications. Recipe changes require engineering approval.",safety:{violation_action:"block",fail_closed:!0,recipe_lock:!0,environmental_interlock:!0}}},food_processing_robot:{label:"Food Processing Robot",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:200,unit:"mm/s",tolerance:5},{name:"max_force",min:0,max:100,unit:"N",tolerance:5},{name:"max_product_temperature",min:0,max:10,unit:"C",tolerance:.5},{name:"max_processing_time",min:0,max:30,unit:"min",tolerance:1}],geo:{type:"workspace",description:"Food processing line  hygienic zone with controlled access"},time:{operating_hours:"04:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","processing","sorting","packaging","cleaning","sanitizing"],forbidden:["temperature_exceeded","foreign_object_detected","sanitation_schedule_missed"]},odd_description:"Food processing automation with temperature-controlled handling. System operates in hygienic environment with HACCP compliance. Temperature limits enforced throughout processing chain. Sanitation schedule mandatory.",safety:{violation_action:"block",fail_closed:!0,haccp_compliance:!0,temperature_monitoring:!0,emergency_stop:!0}}},packaging_robot:{label:"Packaging Robot",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:500,unit:"mm/s",tolerance:10},{name:"max_payload",min:0,max:30,unit:"kg",tolerance:1},{name:"max_cycle_rate",min:0,max:120,unit:"cycles/min",tolerance:5}],geo:{type:"workspace",description:"Packaging cell with guarded perimeter  conveyor in/out interfaces"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","picking","placing","palletizing","labeling","changeover"],forbidden:["guard_open_running","conveyor_jam_running","overweight_package"]},odd_description:"End-of-line packaging automation including case packing, palletizing, and labeling. System operates within guarded cell with safety-rated perimeter. Conveyor interlocks prevent operation during jams.",safety:{violation_action:"block",fail_closed:!0,guard_interlock:!0,conveyor_interlock:!0,emergency_stop:!0}}},paint_coating_robot:{label:"Paint / Coating Robot",domain:"manufacturing",template:{numeric:[{name:"max_spray_pressure",min:0,max:200,unit:"bar",tolerance:5},{name:"max_flow_rate",min:0,max:1e3,unit:"mL/min",tolerance:10},{name:"max_booth_temperature",min:0,max:30,unit:"C",tolerance:1},{name:"max_voc_concentration",min:0,max:200,unit:"ppm",tolerance:10}],geo:{type:"workspace",description:"Spray booth envelope  explosion-proof zone with ventilation requirements"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","spraying","flushing","color_change","curing","booth_purge"],forbidden:["ventilation_failed_spraying","voc_exceeded","fire_suppression_triggered"]},odd_description:"Automated paint/coating application in explosion-proof spray booth. System monitors VOC levels, booth ventilation, and fire suppression status. Operations halt immediately on ventilation failure or VOC exceedance.",safety:{violation_action:"block",fail_closed:!0,ventilation_interlock:!0,fire_suppression:!0,explosion_proof:!0,emergency_stop:!0}}},perimeter_surveillance:{label:"Perimeter Surveillance System",domain:"defense",template:{numeric:[{name:"max_detection_range",min:0,max:5e3,unit:"m",tolerance:50},{name:"max_tracking_targets",min:0,max:100,unit:"targets",tolerance:5},{name:"alert_latency",min:0,max:2,unit:"s",tolerance:.2},{name:"min_classification_confidence",min:.85,max:null,unit:"score",tolerance:.02}],geo:{type:"polygon",description:"Facility perimeter with detection zones  inner/outer alert zones, exclusion zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["monitoring","tracking","alerting","recording","reporting"],forbidden:["autonomous_response","weapon_system_activation","perimeter_breach_unreported"]},odd_description:"Fixed perimeter surveillance with AI-assisted detection and classification. System detects, tracks, and classifies intrusions. All responses are human-initiated. No autonomous engagement capability.",safety:{violation_action:"block",fail_closed:!0,human_response_only:!0,recording_mandatory:!0}}},threat_detection_ai:{label:"Threat Detection AI",domain:"defense",template:{numeric:[{name:"max_concurrent_feeds",min:0,max:500,unit:"feeds",tolerance:10},{name:"detection_latency",min:0,max:5,unit:"s",tolerance:.5},{name:"min_confidence_for_alert",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"Connected sensor network  cameras, radar, acoustic, seismic sensors"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","detecting","classifying","alerting","reporting"],forbidden:["autonomous_engagement","alert_suppression","classification_override_unauthorized"]},odd_description:"Multi-sensor threat detection and classification for critical infrastructure protection. System fuses data from multiple sensor types and alerts human operators. Detection and alert only  no autonomous response.",safety:{violation_action:"block",fail_closed:!0,human_response_only:!0,audit_trail:!0}}},military_logistics_automation:{label:"Military Logistics Automation",domain:"defense",template:{numeric:[{name:"max_autonomous_requisition",min:0,max:5e4,unit:"USD",tolerance:5e3},{name:"max_route_deviation",min:0,max:10,unit:"%",tolerance:1},{name:"max_classified_handling_level",min:0,max:2,unit:"level",tolerance:0}],geo:{type:"polygon",description:"Approved logistics corridors and supply points  excludes forward operating areas without authorization"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"theater_local"},states:{allowed:["planning","routing","dispatching","tracking","receiving","reporting"],forbidden:["classified_material_untracked","requisition_exceeded","unauthorized_route"]},odd_description:"Military supply chain automation for routine logistics operations. System optimizes routing and inventory within authorized parameters. Classified material handling requires additional authorization layers.",safety:{violation_action:"block",fail_closed:!0,classification_enforcement:!0,chain_of_custody:!0}}},eod_mine_clearance_robot:{label:"EOD / Mine Clearance Robot",domain:"defense",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_detection_depth",min:0,max:.5,unit:"m",tolerance:.02},{name:"max_mission_duration",min:0,max:8,unit:"hr",tolerance:.5},{name:"min_safe_distance",min:100,max:null,unit:"m",tolerance:10}],geo:{type:"polygon",description:"Defined clearance lane or area  marked safe zones, exclusion zones for personnel"},time:{operating_hours:"06:00-18:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["standby","scanning","detecting","marking","neutralizing","retreating","decontaminating"],forbidden:["personnel_in_danger_zone","autonomous_detonation_without_authorization"]},odd_description:"Remote-controlled or semi-autonomous EOD/mine clearance operations. System scans, detects, and marks ordnance. Neutralization requires human authorization for each item. Personnel exclusion zone enforced.",safety:{violation_action:"block",fail_closed:!0,human_authorization_for_neutralization:!0,personnel_exclusion:!0,emergency_stop:!0}}},autonomous_sensor_network:{label:"Autonomous Sensor Network",domain:"defense",template:{numeric:[{name:"max_nodes",min:0,max:1e3,unit:"nodes",tolerance:10},{name:"max_data_rate",min:0,max:100,unit:"Mbps",tolerance:5},{name:"max_classification_level",min:0,max:3,unit:"level",tolerance:0}],geo:{type:"polygon",description:"Deployed sensor coverage area  data handling boundaries per classification"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["deployed","collecting","processing","transmitting","low_power","maintenance"],forbidden:["classification_spillage","unauthorized_transmission","node_compromise_undetected"]},odd_description:"Distributed autonomous sensor network for ISR operations. Nodes self-organize mesh network and process data at edge. Classification-level data handling enforced at each node. Anti-tamper protection.",safety:{violation_action:"block",fail_closed:!0,classification_enforcement:!0,anti_tamper:!0}}},cyber_defense_ai:{label:"Cyber Defense AI",domain:"defense",template:{numeric:[{name:"max_auto_block_duration",min:0,max:60,unit:"min",tolerance:5},{name:"max_auto_isolate_hosts",min:0,max:10,unit:"hosts",tolerance:1},{name:"detection_latency",min:0,max:5,unit:"s",tolerance:.5}],geo:{type:"logical",description:"Defended network segments  approved response actions per segment criticality"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","detecting","alerting","auto_responding","containing","reporting"],forbidden:["mission_critical_system_isolated","offensive_action","evidence_destroyed"]},odd_description:"Network defense AI with limited autonomous response capability. System can block IPs and isolate non-critical hosts for limited duration. Mission-critical system isolation requires human authorization. Forensic evidence preserved.",safety:{violation_action:"block",fail_closed:!0,mission_critical_protection:!0,forensic_preservation:!0,human_escalation:!0}}},precision_irrigation:{label:"Precision Irrigation System",domain:"agriculture",template:{numeric:[{name:"max_water_usage_daily",min:0,max:5e5,unit:"L",tolerance:5e3},{name:"max_zone_flow_rate",min:0,max:100,unit:"L/min",tolerance:2},{name:"min_soil_moisture",min:20,max:null,unit:"%",tolerance:2},{name:"max_soil_moisture",min:0,max:80,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Irrigation zones with soil type mapping  water rights boundaries and buffer zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","irrigating","monitoring","draining","frost_protection","maintenance"],forbidden:["water_rights_exceeded","runoff_detected","freeze_warning_irrigating"]},odd_description:"Automated precision irrigation based on soil moisture, weather forecast, and crop stage. System operates within water rights allocations and prevents overwatering/runoff. Frost protection mode available.",safety:{violation_action:"block",fail_closed:!0,water_rights_enforcement:!0,runoff_prevention:!0}}},crop_monitoring_ai:{label:"Crop Monitoring AI",domain:"agriculture",template:{numeric:[{name:"max_field_area",min:0,max:1e4,unit:"ha",tolerance:100},{name:"monitoring_frequency",min:0,max:24,unit:"hr",tolerance:1},{name:"min_detection_confidence",min:.8,max:null,unit:"score",tolerance:.02}],geo:{type:"polygon",description:"Farm field boundaries  satellite/drone coverage areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["monitoring","analyzing","alerting","recommending","reporting"],forbidden:["auto_spray_trigger","misidentified_pest_treated"]},odd_description:"Remote sensing and AI analysis for crop health, pest detection, and yield estimation. System provides recommendations to farm operators. Cannot autonomously trigger treatments  farmer approval required.",safety:{violation_action:"warn",fail_closed:!0,farmer_approval_required:!0}}},livestock_monitoring_ai:{label:"Livestock Monitoring AI",domain:"agriculture",template:{numeric:[{name:"max_herd_size",min:0,max:1e4,unit:"head",tolerance:100},{name:"alert_latency",min:0,max:60,unit:"s",tolerance:5},{name:"monitoring_frequency",min:0,max:15,unit:"min",tolerance:1}],geo:{type:"polygon",description:"Pasture and barn boundaries  fence lines and water sources"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["monitoring","alerting_health","alerting_escape","alerting_predator","reporting"],forbidden:["auto_medication","fence_breach_unreported"]},odd_description:"Wearable sensor and camera-based livestock health and behavior monitoring. System detects illness, calving, escape, and predator presence. Alerts farm staff  no autonomous treatment or intervention.",safety:{violation_action:"warn",fail_closed:!0,farmer_notification:!0}}},greenhouse_controller:{label:"Greenhouse Controller AI",domain:"agriculture",template:{numeric:[{name:"temperature_min",min:15,max:null,unit:"C",tolerance:.5},{name:"temperature_max",min:0,max:35,unit:"C",tolerance:.5},{name:"humidity_min",min:40,max:null,unit:"%RH",tolerance:2},{name:"humidity_max",min:0,max:85,unit:"%RH",tolerance:2},{name:"co2_max",min:0,max:1500,unit:"ppm",tolerance:50}],geo:{type:"enclosure",description:"Greenhouse zones with independent climate control  propagation, growing, hardening areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["day_mode","night_mode","ventilating","heating","cooling","co2_enriching","irrigating"],forbidden:["co2_exceeded_vents_closed","temperature_critical","humidity_condensation"]},odd_description:"Automated greenhouse climate control including heating, cooling, ventilation, CO2 enrichment, and irrigation. System maintains crop-specific environmental profiles. Safety ventilation override on CO2 or temperature exceedance.",safety:{violation_action:"block",fail_closed:!0,ventilation_override:!0,temperature_protection:!0}}},environmental_monitoring_station:{label:"Environmental Monitoring Station AI",domain:"agriculture",template:{numeric:[{name:"max_stations",min:0,max:500,unit:"stations",tolerance:10},{name:"data_collection_interval",min:0,max:60,unit:"min",tolerance:5},{name:"alert_threshold_aqi",min:0,max:500,unit:"AQI",tolerance:10}],geo:{type:"polygon",description:"Monitoring network coverage area  station locations with sensor configurations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["collecting","analyzing","alerting","reporting","calibrating","maintenance"],forbidden:["data_gap_unreported","calibration_expired_reporting","alert_suppressed"]},odd_description:"Environmental monitoring network for air quality, water quality, noise, and weather. System aggregates data, detects exceedances, and issues public alerts. Cannot suppress or modify raw sensor data.",safety:{violation_action:"warn",fail_closed:!0,data_integrity:!0,public_notification:!0}}},satellite_constellation_manager:{label:"Satellite Constellation Manager",domain:"space_extreme",template:{numeric:[{name:"max_satellites",min:0,max:5e3,unit:"satellites",tolerance:10},{name:"max_autonomous_maneuver_delta_v",min:0,max:1,unit:"m/s",tolerance:.01},{name:"min_collision_avoidance_time",min:24,max:null,unit:"hr",tolerance:2}],geo:{type:"orbital",description:"Approved orbital shells and planes  conjunction avoidance zones, debris tracking"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["nominal","station_keeping","collision_avoidance","orbit_raising","deorbiting","safe_mode"],forbidden:["maneuver_without_conjunction_check","debris_creation_risk","frequency_interference"]},odd_description:"LEO satellite constellation management including station-keeping, collision avoidance, and deorbiting. System performs autonomous collision avoidance maneuvers within delta-V budget. Large maneuvers require ground authorization.",safety:{violation_action:"block",fail_closed:!0,conjunction_assessment:!0,space_debris_mitigation:!0}}},planetary_rover:{label:"Planetary Rover",domain:"space_extreme",template:{numeric:[{name:"max_speed",min:0,max:.15,unit:"km/h",tolerance:.01},{name:"max_tilt_angle",min:0,max:30,unit:"degrees",tolerance:1},{name:"max_daily_traverse",min:0,max:200,unit:"m",tolerance:10},{name:"min_power_reserve",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Approved traverse corridor based on orbital imagery  avoids steep terrain, soft soil, and science preservation zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mission_local"},states:{allowed:["parked","traversing","science_stop","drilling","communicating","sleeping"],forbidden:["tilt_exceeded","power_critical_traversing","hazard_terrain_entered"]},odd_description:"Planetary surface exploration with autonomous hazard avoidance. Communication delays require autonomous navigation between waypoints. System preserves power for communication windows and avoids terrain hazards.",safety:{violation_action:"block",fail_closed:!0,hazard_avoidance:!0,power_preservation:!0}}},deep_sea_mining_robot:{label:"Deep Sea Mining Robot",domain:"space_extreme",template:{numeric:[{name:"max_depth",min:0,max:6e3,unit:"m",tolerance:10},{name:"max_collection_rate",min:0,max:100,unit:"tonnes/hr",tolerance:5},{name:"max_sediment_plume",min:0,max:50,unit:"m_visibility",tolerance:5},{name:"max_mission_duration",min:0,max:720,unit:"hr",tolerance:24}],geo:{type:"polygon_3d",description:"Licensed mining claim boundary  excludes environmental protection zones, vent communities, cable routes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["surface","diving","collecting","transiting","ascending","maintenance"],forbidden:["environmental_zone_entered","plume_exceeded","claim_boundary_exceeded"]},odd_description:"Deep-sea polymetallic nodule or mineral collection within licensed claim area. System operates at extreme depth with limited communication. Environmental exclusion zones enforced by onboard navigation.",safety:{violation_action:"block",fail_closed:!0,environmental_protection:!0,depth_limiter:!0}}},arctic_research_robot:{label:"Arctic / Antarctic Research Robot",domain:"space_extreme",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"min_operating_temperature",min:-50,max:null,unit:"C",tolerance:2},{name:"max_ice_thickness",min:0,max:3,unit:"m",tolerance:.1},{name:"max_mission_duration",min:0,max:168,unit:"hr",tolerance:12}],geo:{type:"polygon",description:"Approved research area  excludes wildlife protected zones, thin ice areas, crevasse fields"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["base_camp","traversing","sampling","monitoring","sheltering","returning"],forbidden:["thin_ice_detected","wildlife_zone","whiteout_conditions","communication_lost_24hr"]},odd_description:"Polar research platform operating in extreme cold with limited communication. System performs environmental sampling and monitoring within approved research zones. Auto-return on weather degradation or communication loss.",safety:{violation_action:"block",fail_closed:!0,weather_protection:!0,auto_return:!0,wildlife_avoidance:!0}}},network_traffic_controller:{label:"Network Traffic Controller AI",domain:"telecom_digital",template:{numeric:[{name:"max_bandwidth_allocation",min:0,max:100,unit:"Tbps",tolerance:1},{name:"max_route_changes_per_hour",min:0,max:1e3,unit:"changes/hr",tolerance:50},{name:"max_latency_target",min:0,max:50,unit:"ms",tolerance:2}],geo:{type:"logical",description:"Managed network topology  approved routing policies and peering agreements"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["normal","load_balancing","failover","congestion_management","maintenance_window"],forbidden:["routing_loop_created","peering_violation","priority_traffic_degraded"]},odd_description:"Software-defined network traffic engineering with AI optimization. System manages routing, load balancing, and failover within approved policies. Priority traffic classes (emergency services, healthcare) protected.",safety:{violation_action:"block",fail_closed:!0,priority_traffic_protection:!0,routing_validation:!0}}},content_moderation_ai:{label:"Content Moderation AI",domain:"telecom_digital",template:{numeric:[{name:"max_daily_reviews",min:0,max:1e7,unit:"items",tolerance:1e5},{name:"max_auto_remove_confidence",min:.95,max:null,unit:"score",tolerance:.01},{name:"review_latency",min:0,max:60,unit:"s",tolerance:5},{name:"max_false_positive_rate",min:0,max:1,unit:"%",tolerance:.2}],geo:{type:"logical",description:"Platform content streams  approved content policies by jurisdiction"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["scanning","classifying","auto_removing","queuing_review","reporting","escalating"],forbidden:["political_content_auto_removed","satire_auto_removed","appeal_ignored"]},odd_description:"AI-assisted content moderation for platform safety. System auto-removes clear violations (CSAM, spam, malware links) and queues borderline content for human review. Political, satirical, and newsworthy content requires human decision.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,appeal_process:!0,transparency_reporting:!0}}},cloud_resource_allocator:{label:"Cloud Resource Allocator AI",domain:"telecom_digital",template:{numeric:[{name:"max_auto_scale_instances",min:0,max:1e4,unit:"instances",tolerance:100},{name:"max_hourly_spend",min:0,max:1e5,unit:"USD/hr",tolerance:5e3},{name:"target_utilization",min:0,max:85,unit:"%",tolerance:2}],geo:{type:"logical",description:"Approved cloud regions and availability zones  data residency requirements by workload"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","scaling_up","scaling_down","migrating","rebalancing","cost_optimizing"],forbidden:["budget_exceeded","data_residency_violation","single_az_critical_workload"]},odd_description:"Autonomous cloud infrastructure management with cost optimization. System scales resources based on demand within budget limits and data residency requirements. Cannot exceed hourly spend cap or violate data sovereignty rules.",safety:{violation_action:"block",fail_closed:!0,budget_enforcement:!0,data_residency:!0}}},data_center_cooling:{label:"Data Center Cooling Controller AI",domain:"telecom_digital",template:{numeric:[{name:"max_server_inlet_temp",min:0,max:27,unit:"C",tolerance:.5},{name:"max_pue",min:0,max:1.5,unit:"ratio",tolerance:.02},{name:"max_water_usage",min:0,max:1e4,unit:"L/hr",tolerance:100},{name:"min_redundancy",min:1,max:null,unit:"N+1",tolerance:0}],geo:{type:"logical",description:"Data center cooling infrastructure  CRAC/CRAH units, chillers, cooling towers per zone"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["normal","economizer_mode","mechanical_cooling","emergency_cooling","maintenance"],forbidden:["temperature_exceeded_no_response","redundancy_lost_no_alert","water_leak_undetected"]},odd_description:"AI-optimized data center cooling for energy efficiency. System manages HVAC equipment to minimize PUE while maintaining temperature limits. Redundancy requirements enforced  cannot take cooling unit offline below N+1.",safety:{violation_action:"block",fail_closed:!0,temperature_protection:!0,redundancy_enforcement:!0,emergency_stop:!0}}},five_g_network_slicing:{label:"5G Network Slicing Controller",domain:"telecom_digital",template:{numeric:[{name:"max_slices",min:0,max:1e3,unit:"slices",tolerance:10},{name:"min_guaranteed_bandwidth",min:0,max:null,unit:"Mbps",tolerance:1},{name:"max_latency_critical_slice",min:0,max:5,unit:"ms",tolerance:.5}],geo:{type:"logical",description:"RAN and core network elements  approved slice configurations per customer SLA"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["configuring","active","scaling","migrating","decommissioning"],forbidden:["sla_violation_unresolved","critical_slice_degraded","resource_overcommit"]},odd_description:"5G network slice lifecycle management. System allocates, scales, and optimizes network slices within SLA guarantees. Critical slices (emergency services, healthcare) have priority and guaranteed resources.",safety:{violation_action:"block",fail_closed:!0,sla_enforcement:!0,priority_slices:!0}}},construction_excavator_autonomous:{label:"Autonomous Construction Excavator",domain:"construction",template:{numeric:[{name:"max_dig_depth",min:0,max:7,unit:"m",tolerance:.1},{name:"max_swing_speed",min:0,max:6,unit:"rpm",tolerance:.2},{name:"max_bucket_load",min:0,max:3e3,unit:"kg",tolerance:50},{name:"min_utility_clearance",min:1,max:null,unit:"m",tolerance:.1}],geo:{type:"polygon",description:"Excavation zone with known utility locations  exclusion zones around buried infrastructure, pedestrian areas"},time:{operating_hours:"07:00-18:00",operating_days:[1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["idle","excavating","loading","grading","repositioning","refueling"],forbidden:["utility_zone_entered","personnel_in_swing_radius","grade_exceeded"]},odd_description:"Autonomous excavation within defined dig zone. System uses GPS-RTK positioning with known utility maps. Hard exclusion zones around buried utilities. Personnel detection stops all motion.",safety:{violation_action:"block",fail_closed:!0,utility_avoidance:!0,personnel_detection:!0,emergency_stop:!0}}},construction_site_drone:{label:"Construction Site Survey Drone",domain:"construction",template:{numeric:[{name:"max_altitude_agl",min:0,max:100,unit:"m",tolerance:3},{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:25,unit:"km/h",tolerance:2}],geo:{type:"polygon_3d",description:"Construction site boundary with crane exclusion zones and active work area buffers"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["grounded","surveying","inspecting","returning","landing"],forbidden:["crane_zone_entered","active_pour_zone","wind_exceeded"]},odd_description:"Construction site progress monitoring and survey via drone. System avoids active crane zones and work areas. Flights coordinated with site safety officer. Daily progress capture for BIM comparison.",safety:{violation_action:"block",fail_closed:!0,crane_avoidance:!0,geofence_hard:!0,emergency_stop:!0}}},tunnel_boring_machine_ai:{label:"Tunnel Boring Machine AI",domain:"construction",template:{numeric:[{name:"max_advance_rate",min:0,max:30,unit:"m/day",tolerance:1},{name:"max_face_pressure",min:0,max:5,unit:"bar",tolerance:.1},{name:"max_torque",min:0,max:5e4,unit:"kNm",tolerance:500},{name:"max_deviation_from_alignment",min:0,max:50,unit:"mm",tolerance:5}],geo:{type:"linear",description:"Tunnel alignment with designed profile  exclusion zones around surface structures and utilities"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["standby","boring","segment_erecting","grouting","maintenance","survey_check"],forbidden:["face_pressure_exceeded","alignment_exceeded","ground_settlement_exceeded"]},odd_description:"AI-optimized TBM operation for tunnel construction. System controls advance rate, face pressure, and grouting based on ground conditions. Alignment maintained within tolerances. Ground settlement monitoring with automatic pause.",safety:{violation_action:"block",fail_closed:!0,settlement_monitoring:!0,face_pressure_control:!0,emergency_stop:!0}}},autonomous_haul_truck_surface:{label:"Surface Mine Haul Truck",domain:"construction",template:{numeric:[{name:"max_speed_loaded",min:0,max:40,unit:"km/h",tolerance:2},{name:"max_speed_empty",min:0,max:55,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:35e4,unit:"kg",tolerance:5e3},{name:"max_grade",min:0,max:12,unit:"%",tolerance:.5}],geo:{type:"polygon",description:"Mine haul roads with edge detection zones  approved routes between pit, crusher, dump, and fuel bay"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mine_local"},states:{allowed:["parked","hauling_loaded","hauling_empty","loading","dumping","fueling","washing"],forbidden:["edge_proximity_exceeded","blast_zone_active","overloaded","grade_exceeded_loaded"]},odd_description:"Ultra-class autonomous haul truck in open-pit mine. System follows designated haul roads with edge detection. Integrates with mine dispatch, blast management, and fleet traffic control.",safety:{violation_action:"block",fail_closed:!0,edge_protection:!0,blast_interlock:!0,overload_protection:!0,emergency_stop:!0}}},warehouse_sorting_system:{label:"Warehouse Sorting System",domain:"logistics",template:{numeric:[{name:"max_throughput",min:0,max:2e4,unit:"packages/hr",tolerance:500},{name:"max_package_weight",min:0,max:35,unit:"kg",tolerance:1},{name:"max_divert_speed",min:0,max:3,unit:"m/s",tolerance:.1},{name:"max_misroute_rate",min:0,max:.1,unit:"%",tolerance:.02}],geo:{type:"linear",description:"Sortation conveyor system  input stations, divert chutes, recirculation loop"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","sorting","recirculating","jam_clearing","calibrating","maintenance"],forbidden:["misroute_rate_exceeded","jam_uncleared","overweight_on_sorter"]},odd_description:"High-speed automated package sortation with vision-based routing. System reads labels, routes packages to correct chutes, and recirculates unreadable items. Overweight/oversized packages rejected to manual lane.",safety:{violation_action:"block",fail_closed:!0,jam_detection:!0,oversize_rejection:!0,emergency_stop:!0}}},fleet_management_ai:{label:"Fleet Management / Route Optimization AI",domain:"logistics",template:{numeric:[{name:"max_fleet_size",min:0,max:1e4,unit:"vehicles",tolerance:100},{name:"max_daily_route_changes",min:0,max:5e4,unit:"changes",tolerance:1e3},{name:"max_driver_hours",min:0,max:11,unit:"hr",tolerance:0},{name:"max_fuel_budget_deviation",min:0,max:10,unit:"%",tolerance:1}],geo:{type:"road_network",description:"Approved road network with vehicle restrictions  bridge limits, tunnel restrictions, hazmat routes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["planning","dispatching","routing","monitoring","re_routing","reporting"],forbidden:["hos_violation_dispatched","restricted_road_assigned","overweight_route"]},odd_description:"AI fleet dispatch and route optimization. System assigns loads, optimizes routes, and monitors delivery progress. Hours-of-service limits enforced  cannot dispatch driver beyond legal limits. Vehicle restrictions (weight, height, hazmat) enforced per route segment.",safety:{violation_action:"block",fail_closed:!0,hos_compliance:!0,vehicle_restrictions:!0}}},inventory_management_ai:{label:"Inventory Management / Reorder AI",domain:"logistics",template:{numeric:[{name:"max_auto_reorder_value",min:0,max:1e5,unit:"USD",tolerance:5e3},{name:"max_sku_count",min:0,max:1e6,unit:"SKUs",tolerance:1e4},{name:"max_price_deviation",min:0,max:5,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected warehouse and ERP systems  approved vendor list and procurement channels"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","forecasting","reorder_generated","po_created","receiving","reconciling"],forbidden:["unapproved_vendor","price_deviation_exceeded","budget_exceeded"]},odd_description:"AI-driven demand forecasting and automatic reorder point management. System generates purchase orders within approved vendor list and budget limits. Orders exceeding thresholds require human approval.",safety:{violation_action:"block",fail_closed:!0,budget_enforcement:!0,vendor_approval:!0,human_escalation:!0}}},cold_chain_monitor:{label:"Cold Chain Monitoring AI",domain:"logistics",template:{numeric:[{name:"temperature_min",min:-25,max:null,unit:"C",tolerance:.5},{name:"temperature_max",min:0,max:8,unit:"C",tolerance:.5},{name:"max_excursion_duration",min:0,max:30,unit:"min",tolerance:2},{name:"max_door_open_time",min:0,max:5,unit:"min",tolerance:.5}],geo:{type:"logical",description:"Cold chain from origin to destination  sensors in trucks, warehouses, and retail cases"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","alerting","logging","reporting","audit_mode"],forbidden:["excursion_exceeded_unreported","sensor_offline_unnoticed","falsified_log"]},odd_description:"End-to-end cold chain temperature monitoring for pharmaceuticals and food. System logs continuous temperature data, alerts on excursions, and generates compliance reports. Cannot modify temperature logs. FDA 21 CFR Part 11 compliant where required.",safety:{violation_action:"warn",fail_closed:!0,tamper_evident_logging:!0,immediate_alert:!0}}},retail_shelf_scanning_robot:{label:"Retail Shelf-Scanning Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.3},{name:"max_aisle_width_required",min:1,max:null,unit:"m",tolerance:.1},{name:"scan_frequency",min:0,max:3,unit:"scans/day",tolerance:0}],geo:{type:"floor_plan",description:"Retail store floor plan  approved aisles and scan paths, excludes back of house, checkout lanes during busy periods"},time:{operating_hours:"22:00-06:00",operating_days:[0,1,2,3,4,5,6],timezone:"store_local"},states:{allowed:["docked","scanning","navigating","obstacle_wait","returning","charging"],forbidden:["customer_collision_risk","aisle_blocked_forcing","store_open_peak_hours"]},odd_description:"Autonomous shelf-scanning robot for inventory accuracy during off-hours. System navigates store aisles, captures shelf images, and identifies out-of-stocks. Operates primarily during closed or low-traffic hours.",safety:{violation_action:"block",fail_closed:!0,pedestrian_avoidance:!0,emergency_stop:!0}}},hotel_service_robot:{label:"Hotel / Hospitality Service Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.3},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_noise_level",min:0,max:50,unit:"dB",tolerance:2}],geo:{type:"floor_plan",description:"Hotel corridors and elevator system  excludes guest rooms (delivery to door only), kitchen prep areas, pool deck"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hotel_local"},states:{allowed:["docked","delivering","returning","elevator_transit","waiting_at_door","charging"],forbidden:["guest_room_entry","speed_exceeded_lobby","noise_exceeded_night"]},odd_description:"Hotel room service and amenity delivery robot. System delivers items to guest room doors via corridors and elevators. Does not enter rooms. Reduced speed in lobby, noise limits during quiet hours.",safety:{violation_action:"block",fail_closed:!0,no_room_entry:!0,quiet_hours:!0,emergency_stop:!0}}},restaurant_kitchen_robot:{label:"Restaurant Kitchen Automation Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_oil_temperature",min:0,max:190,unit:"C",tolerance:2},{name:"max_grill_temperature",min:0,max:300,unit:"C",tolerance:5},{name:"max_portion_deviation",min:0,max:5,unit:"%",tolerance:1},{name:"max_orders_per_hour",min:0,max:200,unit:"orders/hr",tolerance:10}],geo:{type:"workspace",description:"Kitchen prep and cook stations  human exclusion zones around hot equipment during autonomous operation"},time:{operating_hours:"10:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"restaurant_local"},states:{allowed:["idle","prepping","cooking","plating","cleaning","maintenance"],forbidden:["human_in_hot_zone","oil_overtemp","fire_suppression_triggered"]},odd_description:"Automated food preparation and cooking for quick-service restaurant. System handles repetitive cooking tasks (frying, grilling, assembly) within enclosed stations. Human exclusion zones around hot equipment.",safety:{violation_action:"block",fail_closed:!0,fire_suppression:!0,temperature_limits:!0,human_exclusion:!0,emergency_stop:!0}}},autonomous_checkout:{label:"Autonomous Checkout / Just Walk Out",domain:"retail_hospitality",template:{numeric:[{name:"max_concurrent_shoppers",min:0,max:200,unit:"shoppers",tolerance:10},{name:"max_item_price",min:0,max:500,unit:"USD",tolerance:10},{name:"min_detection_accuracy",min:.95,max:null,unit:"ratio",tolerance:.01},{name:"max_charge_latency",min:0,max:60,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Store sensor coverage area  entry/exit gates, shelf sensors, camera zones"},time:{operating_hours:"06:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"store_local"},states:{allowed:["monitoring","tracking","cart_building","checkout_processing","dispute_queue"],forbidden:["charge_without_confidence","privacy_zone_recording","minor_unaccompanied_alcohol"]},odd_description:"Computer vision-based autonomous checkout system. System tracks item selection and charges on exit. Low-confidence transactions queued for human review. Privacy zones in fitting rooms and restrooms.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,privacy_zones:!0,dispute_process:!0}}},research_lab_robot:{label:"Research Lab Automation Robot",domain:"education_research",template:{numeric:[{name:"max_experiments_per_day",min:0,max:100,unit:"experiments",tolerance:5},{name:"max_reagent_volume",min:0,max:50,unit:"mL",tolerance:.5},{name:"temperature_control_range",min:-20,max:100,unit:"C",tolerance:.5}],geo:{type:"workspace",description:"Lab bench and instrument footprint  fume hood, biosafety cabinet, instrument cluster"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"lab_local"},states:{allowed:["idle","experiment_running","sample_prep","analysis","data_collection","cleaning"],forbidden:["reagent_incompatibility","fume_hood_closed_volatile","biosafety_breach"]},odd_description:"Laboratory automation for high-throughput experimentation. System executes experiment protocols with reagent handling, incubation, and measurement. Safety interlocks for volatile chemicals and biological materials.",safety:{violation_action:"block",fail_closed:!0,chemical_compatibility:!0,biosafety_interlock:!0,emergency_stop:!0}}},educational_tutoring_ai:{label:"Educational Tutoring AI",domain:"education_research",template:{numeric:[{name:"max_session_duration",min:0,max:120,unit:"min",tolerance:5},{name:"max_daily_sessions_per_student",min:0,max:5,unit:"sessions",tolerance:0},{name:"min_age_requirement",min:5,max:null,unit:"years",tolerance:0}],geo:{type:"logical",description:"Approved curriculum content and grade levels  content filtered by age appropriateness"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"student_local"},states:{allowed:["idle","tutoring","assessing","reviewing","reporting_to_teacher"],forbidden:["off_curriculum_content","personal_data_collection_unauthorized","session_exceeded"]},odd_description:"AI tutoring system for K-12 students within approved curriculum. System provides personalized instruction, practice, and assessment. Content restricted to grade-appropriate material. Teacher oversight and progress reporting. COPPA/FERPA compliant.",safety:{violation_action:"block",fail_closed:!0,age_appropriate_content:!0,coppa_compliant:!0,teacher_oversight:!0}}},contract_review_ai:{label:"Contract Review AI",domain:"legal_compliance",template:{numeric:[{name:"max_documents_per_day",min:0,max:1e3,unit:"documents",tolerance:50},{name:"max_auto_approve_value",min:0,max:0,unit:"USD",tolerance:0},{name:"min_extraction_confidence",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"Connected document management system  approved contract types and clause libraries"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"firm_local"},states:{allowed:["idle","reviewing","extracting","flagging","summarizing","reporting"],forbidden:["auto_approval","legal_advice_given","privileged_content_exposed"]},odd_description:"AI-assisted contract review for clause extraction, risk flagging, and comparison against standard terms. System highlights deviations and risks for attorney review. Cannot approve contracts or provide legal advice. Attorney-client privilege protected.",safety:{violation_action:"block",fail_closed:!0,attorney_review_required:!0,privilege_protection:!0}}},regulatory_compliance_monitor:{label:"Regulatory Compliance Monitor AI",domain:"legal_compliance",template:{numeric:[{name:"max_rules_monitored",min:0,max:5e4,unit:"rules",tolerance:500},{name:"update_frequency",min:0,max:24,unit:"hr",tolerance:1},{name:"max_false_alert_rate",min:0,max:5,unit:"%",tolerance:1}],geo:{type:"logical",description:"Connected regulatory databases and internal policy systems  approved jurisdictions and regulatory bodies"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","analyzing","alerting","reporting","updating_rules"],forbidden:["compliance_certification_issued","regulation_interpretation_given","alert_suppressed"]},odd_description:"Regulatory change monitoring and compliance gap analysis. System tracks regulatory updates across jurisdictions and flags potential impacts to compliance team. Cannot certify compliance or interpret regulations  compliance officer review required.",safety:{violation_action:"warn",fail_closed:!0,compliance_officer_review:!0,audit_trail:!0}}},hiring_screening_ai:{label:"Hiring / HR Screening AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.25,unit:"ratio",tolerance:.05},{name:"confidence_threshold",min:.7,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.2,max:null,unit:"ratio",tolerance:.05},{name:"false_negative_rate",min:0,max:.15,unit:"rate",tolerance:.02},{name:"consecutive_autonomous_max",min:0,max:50,unit:"decisions",tolerance:5},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"explainability_score_min",min:.6,max:null,unit:"score",tolerance:.05},{name:"decision_rate",min:0,max:200,unit:"decisions/hr",tolerance:20}],geo:{type:"logical",description:"Approved job categories and jurisdictions  applicable labor law regions only"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4],timezone:"ops_local"},states:{allowed:["screening","scoring","shortlisting","human_review","archived"],forbidden:["auto_reject_protected_class","bias_threshold_exceeded","unexplainable_decision"]},odd_description:"Resume screening and candidate scoring system. System provides ranked shortlists for human recruiter review. Cannot autonomously reject candidates  all rejections require human confirmation. EEOC/OFCCP compliant. Disparate impact monitored continuously.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,audit_trail:!0}}},sentencing_recommendation_ai:{label:"Sentencing / Parole Recommendation AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.1,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"false_positive_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"false_negative_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"explainability_score_min",min:.8,max:null,unit:"score",tolerance:.03},{name:"model_drift_threshold",min:0,max:.05,unit:"delta",tolerance:.01},{name:"data_staleness_max",min:0,max:3600,unit:"sec",tolerance:300}],geo:{type:"logical",description:"Authorized court jurisdictions  applicable sentencing guidelines and statutory frameworks"},time:{operating_hours:"07:00-19:00",operating_days:[0,1,2,3,4],timezone:"court_local"},states:{allowed:["assessment","scoring","report_generation","judicial_review","sealed"],forbidden:["auto_sentence","bias_detected","unexplainable_recommendation","stale_data"]},odd_description:"Risk assessment and sentencing recommendation advisory system. ALL recommendations require judicial review  system has ZERO autonomous sentencing authority. Continuous bias auditing with demographic parity monitoring. Court-approved validation required annually.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,judicial_override:!0,audit_trail:!0}}},child_welfare_ai:{label:"Child Welfare Risk Scoring AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.15,unit:"ratio",tolerance:.03},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"false_negative_rate",min:0,max:.03,unit:"rate",tolerance:.005},{name:"consecutive_autonomous_max",min:0,max:0,unit:"decisions",tolerance:0},{name:"escalation_timeout_sec",min:0,max:3600,unit:"sec",tolerance:300},{name:"explainability_score_min",min:.75,max:null,unit:"score",tolerance:.05},{name:"data_staleness_max",min:0,max:7200,unit:"sec",tolerance:600}],geo:{type:"logical",description:"County/state child protective services jurisdiction  applicable mandated reporting laws"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"agency_local"},states:{allowed:["intake_screening","risk_scoring","caseworker_review","supervisor_review","closed"],forbidden:["auto_close_high_risk","auto_removal_recommendation","caseworker_bypass"]},odd_description:"Child safety risk scoring for intake screening. System flags cases for caseworker assessment  ZERO autonomous case closure or removal decisions. Every scored case reviewed by human caseworker. Continuous bias monitoring across demographics.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,supervisor_escalation:!0,audit_trail:!0}}},benefits_eligibility_ai:{label:"Benefits / Disability Eligibility AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.2,unit:"ratio",tolerance:.03},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.3,max:null,unit:"ratio",tolerance:.05},{name:"false_negative_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"decision_rate",min:0,max:500,unit:"decisions/hr",tolerance:50},{name:"escalation_timeout_sec",min:0,max:7200,unit:"sec",tolerance:600},{name:"explainability_score_min",min:.7,max:null,unit:"score",tolerance:.05},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600}],geo:{type:"logical",description:"Applicable benefit programs and jurisdictional eligibility rules"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["intake","document_review","scoring","human_review","approved","denied","appeal"],forbidden:["auto_deny_without_review","stale_data_decision","unexplainable_denial"]},odd_description:"Automated eligibility screening for government benefit programs. System pre-screens applications and flags for human adjudicator review. Denials require human confirmation and written explanation. APA/due process compliant.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,appeal_path_required:!0,audit_trail:!0}}},clinical_trial_matching_ai:{label:"Clinical Trial Matching AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"false_positive_rate",min:0,max:.1,unit:"rate",tolerance:.02},{name:"false_negative_rate",min:0,max:.08,unit:"rate",tolerance:.02},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"consent_verification_required",min:1,max:1,unit:"bool",tolerance:0},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"model_drift_threshold",min:0,max:.08,unit:"delta",tolerance:.02},{name:"decision_rate",min:0,max:100,unit:"matches/hr",tolerance:10}],geo:{type:"logical",description:"Approved clinical sites and IRB-approved trial protocols  patient catchment areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["screening","matching","clinician_review","patient_consent","enrolled","ineligible"],forbidden:["auto_enroll","consent_bypassed","exclusion_criteria_ignored"]},odd_description:"Patient-trial matching system using EHR data and trial protocols. System suggests matches for clinician review  cannot auto-enroll. Patient consent verified independently. HIPAA compliant, IRB-approved protocols only.",safety:{violation_action:"block",fail_closed:!0,clinician_review_required:!0,consent_required:!0,audit_trail:!0}}},surgical_planning_ai:{label:"Surgical Planning / Guidance AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"max_planning_latency",min:0,max:30,unit:"sec",tolerance:5},{name:"positional_accuracy",min:0,max:2,unit:"mm",tolerance:.5},{name:"false_positive_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"false_negative_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"model_drift_threshold",min:0,max:.03,unit:"delta",tolerance:.01},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Approved surgical suites and imaging systems  validated instrument sets only"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["imaging","planning","surgeon_review","intraop_guidance","post_op_analysis"],forbidden:["autonomous_incision","surgeon_override_bypassed","uncalibrated_guidance","stale_imaging"]},odd_description:"AI-assisted surgical planning and intraoperative guidance. System provides 3D planning, trajectory optimization, and real-time guidance overlays. Surgeon maintains full manual authority at all times. FDA 510(k)/De Novo cleared.",safety:{violation_action:"block",fail_closed:!0,surgeon_authority:!0,calibration_required:!0,audit_trail:!0}}},drug_interaction_ai:{label:"Drug Interaction Checker AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"false_negative_rate",min:0,max:.01,unit:"rate",tolerance:.002},{name:"max_response_latency",min:0,max:2e3,unit:"ms",tolerance:200},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"model_drift_threshold",min:0,max:.05,unit:"delta",tolerance:.01},{name:"decision_rate",min:0,max:1e4,unit:"checks/hr",tolerance:1e3},{name:"database_coverage_min",min:.95,max:null,unit:"ratio",tolerance:.01}],geo:{type:"logical",description:"Connected EHR/pharmacy systems  approved drug databases and formularies"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["active","checking","alert_generated","pharmacist_review","overridden_with_reason"],forbidden:["interaction_suppressed","database_stale","unchecked_dispense"]},odd_description:"Real-time drug-drug, drug-allergy, and drug-condition interaction checking integrated with EHR/pharmacy workflow. System blocks dispensing on critical interactions until pharmacist review. Cannot be silently overridden.",safety:{violation_action:"block",fail_closed:!0,pharmacist_review:!0,override_requires_reason:!0,audit_trail:!0}}},mental_health_risk_ai:{label:"Mental Health Risk Assessment AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.75,max:null,unit:"score",tolerance:.03},{name:"false_negative_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"escalation_timeout_sec",min:0,max:900,unit:"sec",tolerance:60},{name:"consecutive_autonomous_max",min:0,max:0,unit:"decisions",tolerance:0},{name:"bias_disparity_ratio",min:0,max:1.2,unit:"ratio",tolerance:.05},{name:"data_staleness_max",min:0,max:3600,unit:"sec",tolerance:300},{name:"explainability_score_min",min:.7,max:null,unit:"score",tolerance:.05}],geo:{type:"logical",description:"Approved clinical settings  licensed provider jurisdictions and telehealth-eligible states"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["screening","risk_scoring","clinician_alert","clinician_review","safety_plan","crisis_escalation"],forbidden:["auto_discharge_high_risk","suppress_self_harm_flag","clinician_bypass","stale_assessment"]},odd_description:"Suicide/self-harm risk screening and mental health acuity scoring. System flags at-risk patients for immediate clinician review  ZERO autonomous clinical decisions. Crisis-level flags trigger immediate escalation with timeout enforcement.",safety:{violation_action:"block",fail_closed:!0,clinician_review_required:!0,crisis_escalation:!0,audit_trail:!0}}},water_treatment_ai:{label:"Water Treatment Control AI",domain:"critical_infra",template:{numeric:[{name:"ph_range",min:6.5,max:8.5,unit:"pH",tolerance:.2},{name:"chlorine_residual",min:.2,max:4,unit:"mg/L",tolerance:.1},{name:"turbidity_max",min:0,max:1,unit:"NTU",tolerance:.1},{name:"flow_rate",min:0,max:5e4,unit:"gal/min",tolerance:500},{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"human_review_ratio",min:.1,max:null,unit:"ratio",tolerance:.02},{name:"decision_rate",min:0,max:60,unit:"adjustments/hr",tolerance:5},{name:"data_staleness_max",min:0,max:60,unit:"sec",tolerance:10}],geo:{type:"polygon",description:"Treatment plant facility boundary  intake, treatment, and distribution control zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["normal_operation","adjustment","flushing","backwash","operator_review","maintenance"],forbidden:["chemical_limit_exceeded","sensor_fault_unacknowledged","operator_lockout_bypassed"]},odd_description:"AI-controlled water treatment process optimization. System adjusts chemical dosing, filtration, and flow within EPA-mandated Safe Drinking Water Act parameters. Operator can override at any time. Critical parameter changes require operator confirmation.",safety:{violation_action:"block",fail_closed:!0,operator_override:!0,epa_compliance:!0,audit_trail:!0}}},air_traffic_ai:{label:"Air Traffic Management AI",domain:"critical_infra",template:{numeric:[{name:"min_separation_horizontal",min:3,max:null,unit:"nm",tolerance:.5},{name:"min_separation_vertical",min:1e3,max:null,unit:"ft",tolerance:100},{name:"max_response_latency",min:0,max:500,unit:"ms",tolerance:50},{name:"confidence_threshold",min:.95,max:null,unit:"score",tolerance:.01},{name:"false_negative_rate",min:0,max:.001,unit:"rate",tolerance:5e-4},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"data_staleness_max",min:0,max:5,unit:"sec",tolerance:1},{name:"decision_rate",min:0,max:300,unit:"advisories/hr",tolerance:30}],geo:{type:"polygon_3d",description:"Assigned airspace sectors  terminal, en-route, and transition zones with altitude blocks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","advisory","conflict_detection","resolution_advisory","controller_review","emergency"],forbidden:["autonomous_reroute","controller_override_bypassed","radar_contact_lost_unacknowledged"]},odd_description:"AI advisory system for air traffic conflict detection and resolution. System provides separation advisories to human controllers  ZERO autonomous authority over aircraft routing or clearances. FAA NextGen/EUROCONTROL compliant. Controller maintains full authority.",safety:{violation_action:"block",fail_closed:!0,controller_authority:!0,tcas_integration:!0,audit_trail:!0}}},railway_signaling_ai:{label:"Railway Signaling / Train Control AI",domain:"critical_infra",template:{numeric:[{name:"min_headway",min:90,max:null,unit:"sec",tolerance:10},{name:"max_speed",min:0,max:300,unit:"km/h",tolerance:5},{name:"braking_distance_margin",min:50,max:null,unit:"meters",tolerance:10},{name:"max_response_latency",min:0,max:200,unit:"ms",tolerance:20},{name:"confidence_threshold",min:.99,max:null,unit:"score",tolerance:.002},{name:"false_negative_rate",min:0,max:1e-4,unit:"rate",tolerance:5e-5},{name:"data_staleness_max",min:0,max:2,unit:"sec",tolerance:.5},{name:"model_drift_threshold",min:0,max:.01,unit:"delta",tolerance:.002}],geo:{type:"polygon",description:"Track segments, interlocking zones, platform areas, and level crossings under AI control"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["green","caution","restrictive","stop","emergency_brake","maintenance_mode"],forbidden:["signal_conflict","interlocking_fault_unacknowledged","occupied_block_cleared"]},odd_description:"AI-enhanced positive train control and signaling. System enforces movement authorities, speed restrictions, and safe separation. Fail-safe defaults to most restrictive signal aspect. ERTMS/PTC compliant. Human dispatcher maintains route authority.",safety:{violation_action:"block",fail_closed:!0,fail_safe_restrictive:!0,dispatcher_authority:!0,audit_trail:!0}}},power_grid_ai:{label:"Power Grid Load Balancing AI",domain:"critical_infra",template:{numeric:[{name:"frequency_range",min:59.95,max:60.05,unit:"Hz",tolerance:.01},{name:"voltage_range_pu",min:.95,max:1.05,unit:"p.u.",tolerance:.005},{name:"max_ramp_rate",min:0,max:500,unit:"MW/min",tolerance:50},{name:"reserve_margin_min",min:.15,max:null,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"decision_rate",min:0,max:120,unit:"dispatches/hr",tolerance:10},{name:"data_staleness_max",min:0,max:4,unit:"sec",tolerance:1},{name:"human_review_ratio",min:.05,max:null,unit:"ratio",tolerance:.02}],geo:{type:"logical",description:"Balancing authority area  interconnected generation, transmission, and load zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["normal","economic_dispatch","contingency","emergency","restoration","islanded"],forbidden:["frequency_out_of_band","cascading_trip","load_shed_unauthorized","blackstart_without_approval"]},odd_description:"AI-optimized economic dispatch and load balancing for electric grid. System optimizes generation scheduling within NERC reliability standards. Emergency load shedding requires operator authorization. NERC CIP compliant.",safety:{violation_action:"block",fail_closed:!0,operator_authority:!0,nerc_compliance:!0,audit_trail:!0}}},robo_advisor_ai:{label:"Robo-Advisor / Wealth Management AI",domain:"financial",template:{numeric:[{name:"max_single_trade_pct",min:0,max:5,unit:"%_portfolio",tolerance:.5},{name:"max_daily_rebalance_pct",min:0,max:15,unit:"%_portfolio",tolerance:2},{name:"concentration_limit",min:0,max:25,unit:"%_single_asset",tolerance:2},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.05,max:null,unit:"ratio",tolerance:.02},{name:"model_drift_threshold",min:0,max:.1,unit:"delta",tolerance:.02},{name:"decision_rate",min:0,max:1e3,unit:"trades/hr",tolerance:100},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Approved exchanges, asset classes, and jurisdictions  SEC/FINRA registered instruments only"},time:{operating_hours:"04:00-20:00",operating_days:[0,1,2,3,4],timezone:"America/New_York"},states:{allowed:["monitoring","rebalancing","tax_loss_harvesting","client_review","compliance_check"],forbidden:["concentration_exceeded","suitability_mismatch","unauthorized_asset_class"]},odd_description:"Automated portfolio management and rebalancing. System executes within client-approved investment policy statements. Trades exceeding thresholds require advisor review. SEC/FINRA/DOL fiduciary compliant.",safety:{violation_action:"block",fail_closed:!0,advisor_review_threshold:!0,suitability_check:!0,audit_trail:!0}}},property_valuation_ai:{label:"Automated Property Valuation (AVM)",domain:"financial",template:{numeric:[{name:"confidence_threshold",min:.75,max:null,unit:"score",tolerance:.03},{name:"max_valuation_variance",min:0,max:15,unit:"%",tolerance:2},{name:"bias_disparity_ratio",min:0,max:1.15,unit:"ratio",tolerance:.03},{name:"data_staleness_max",min:0,max:604800,unit:"sec",tolerance:86400},{name:"model_drift_threshold",min:0,max:.08,unit:"delta",tolerance:.02},{name:"human_review_ratio",min:.15,max:null,unit:"ratio",tolerance:.03},{name:"decision_rate",min:0,max:5e3,unit:"valuations/hr",tolerance:500},{name:"false_positive_rate",min:0,max:.1,unit:"rate",tolerance:.02}],geo:{type:"logical",description:"Approved MSAs and property types  residential, commercial, agricultural classifications"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["data_collection","valuation","confidence_check","appraiser_review","final"],forbidden:["low_confidence_auto_approve","stale_comps_used","redlining_pattern_detected"]},odd_description:"Automated property valuation for mortgage origination, refinancing, and portfolio assessment. High-variance or low-confidence valuations routed to licensed appraiser. ECOA/Fair Housing Act compliant with continuous bias monitoring.",safety:{violation_action:"block",fail_closed:!0,appraiser_escalation:!0,fair_lending_compliance:!0,audit_trail:!0}}},dynamic_pricing_ai:{label:"Dynamic Pricing AI (Regulated)",domain:"financial",template:{numeric:[{name:"max_price_multiplier",min:1,max:3,unit:"x_base",tolerance:.1},{name:"max_price_change_rate",min:0,max:10,unit:"%/hr",tolerance:1},{name:"min_price_floor",min:.01,max:null,unit:"currency",tolerance:0},{name:"bias_disparity_ratio",min:0,max:1.1,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"decision_rate",min:0,max:1e4,unit:"price_updates/hr",tolerance:1e3},{name:"human_review_ratio",min:.01,max:null,unit:"ratio",tolerance:.005},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Service regions with applicable price gouging statutes and regulatory caps"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["normal_pricing","surge","promotional","regulatory_cap","manual_override","emergency_freeze"],forbidden:["price_ceiling_exceeded","discriminatory_pricing_detected","emergency_gouging"]},odd_description:"Real-time dynamic pricing within regulatory price caps and anti-gouging statutes. System enforces price ceilings during declared emergencies. Discriminatory pricing patterns trigger automatic freeze and human review.",safety:{violation_action:"block",fail_closed:!0,price_ceiling_enforcement:!0,emergency_freeze:!0,audit_trail:!0}}},custom_system:{label:"Custom / Other System",domain:"other",template:{numeric:[],geo:{type:"custom",description:"Define your operational boundary  geographic, logical, or physical workspace"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:[],forbidden:[]},odd_description:"",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}}};Object.keys(De).length;function gs(){const{user:t}=pe(),n=Me(),[a,o]=x.useState(1),i=6,[r,s]=x.useState(""),[l,d]=x.useState({organization_name:"",contact_name:"",contact_email:"",contact_phone:""}),[c,p]=x.useState({system_name:"",system_type:"",system_version:"",manufacturer:"",system_description:"",deployment_type:"",environment:"",integration_method:"python",expected_volume:"",compliance_requirements:""}),[f,b]=x.useState({odd_description:"",facility_location:"",preferred_test_date:"",temp_min:"",temp_max:"",temp_unit:"F",weather_constraints:"",surface_type:"",notes:""}),[j,m]=x.useState([{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}]),[v,g]=x.useState({open:!1,type:""}),[z,I]=x.useState(""),[y,h]=x.useState([{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]),[E,M]=x.useState([{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}]),[S,O]=x.useState([{name:"",parameter:"",allowed_values:"",forbidden_values:""}]),[k,u]=x.useState({violation_action:"stop",connection_loss_action:"stop",fail_closed:!0,emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_email:"",existing_safety_systems:"",escalation_triggers:""}),[L,H]=x.useState(!1);x.useEffect(()=>{t&&d(_=>({..._,contact_name:_.contact_name||t.full_name||"",contact_email:_.contact_email||t.email||"",organization_name:_.organization_name||t.organization_name||""}))},[t]);const F=_=>{var V,Q;const R=De[_];if(!R||!R.template)return;const P=R.template;if(P.numeric&&P.numeric.length>0?m(P.numeric.map(X=>({name:X.name.replace(/_/g," ").replace(/\b\w/g,se=>se.toUpperCase()),parameter:X.name,min_value:X.min!=null?String(X.min):"",max_value:X.max!=null?String(X.max):"",hard_limit:X.max!=null?String(X.max):"",unit:X.unit||"",tolerance:X.tolerance!=null?String(X.tolerance):""}))):m([{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}]),P.geo?h([{name:"Primary Operating Zone",boundary_type:P.geo.type==="polygon"||P.geo.type==="polygon_3d"?"polygon":"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]):h([{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]),P.time){const[X,se]=(P.time.operating_hours||"0-23").split("-").map(dt=>String(parseInt(dt))),Ye=P.time.timezone||"America/Chicago";M([{name:"Operating Hours",start_hour:X,end_hour:se,timezone:{facility_local:"America/Chicago",ops_local:"America/Chicago",farm_local:"America/Chicago",delivery_zone_local:"America/Chicago",campus_local:"America/Chicago",city_local:"America/Chicago",community_local:"America/Chicago",site_local:"America/Chicago",hospital_local:"America/Chicago",lab_local:"America/Chicago",mine_local:"America/Chicago",port_local:"America/Chicago",airport_local:"America/Chicago",transit_local:"America/Chicago",incident_local:"America/Chicago",exchange_local:"America/New_York",institution_local:"America/New_York",utility_local:"America/Chicago",grid_local:"America/Chicago",plant_local:"America/Chicago",fab_local:"America/Chicago",restaurant_local:"America/Chicago",store_local:"America/Chicago",hotel_local:"America/Chicago",network_local:"UTC",theater_local:"UTC",patient_local:"America/Chicago",student_local:"America/Chicago",firm_local:"America/New_York",mission_local:"UTC"}[Ye]||Ye,days:P.time.operating_days||[0,1,2,3,4,5,6]}])}else M([{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}]);P.states&&((V=P.states.allowed)!=null&&V.length||(Q=P.states.forbidden)!=null&&Q.length)?O([{name:"Operational States",parameter:"mode",allowed_values:(P.states.allowed||[]).join(", "),forbidden_values:(P.states.forbidden||[]).join(", ")}]):O([{name:"",parameter:"",allowed_values:"",forbidden_values:""}]),P.odd_description&&b(X=>({...X,odd_description:P.odd_description}));const U={ground_robots:"indoor",aerial:"outdoor",vehicles:"outdoor",marine:"outdoor",medical:"indoor",financial:"virtual",energy:"hybrid",manufacturing:"indoor",defense:"hybrid",agriculture:"outdoor",space_extreme:"outdoor",telecom_digital:"virtual",construction:"outdoor",logistics:"indoor",retail_hospitality:"indoor",education_research:"indoor",legal_compliance:"virtual",other:""},A={ground_robots:"warehouse",aerial:"airspace",vehicles:"road",marine:"other",medical:"clinical",financial:"data_center",energy:"other",manufacturing:"manufacturing",defense:"other",agriculture:"agriculture",space_extreme:"other",telecom_digital:"data_center",construction:"construction",logistics:"warehouse",retail_hospitality:"other",education_research:"other",legal_compliance:"other",other:""};if(p(X=>({...X,deployment_type:U[R.domain]||X.deployment_type,environment:A[R.domain]||X.environment})),P.safety){const X={block:"stop",warn:"alert",stop:"stop"};u(se=>({...se,violation_action:X[P.safety.violation_action]||P.safety.violation_action||se.violation_action,fail_closed:P.safety.fail_closed!==!1}))}},B={background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",fontFamily:"'Inter', sans-serif"},D=_=>e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:"#a896d6",marginBottom:"16px"},children:_}),N=_=>e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"rgba(255,255,255,.78)",fontSize:"14px"},children:_}),J=_=>e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",marginTop:"4px",lineHeight:"1.4"},children:_}),$=(_,R,P)=>R([..._,{...P}]),K=(_,R,P)=>{_.length>1&&R(_.filter((U,A)=>A!==P))},C=(_,R,P,U,A)=>{const V=[..._];V[P]={...V[P],[U]:A},R(V)},Y=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],te=()=>{const _=j.filter(A=>A.name&&A.parameter).map(A=>({name:A.name,parameter:A.parameter,min_value:A.min_value?parseFloat(A.min_value):null,max_value:A.max_value?parseFloat(A.max_value):null,hard_limit:A.hard_limit?parseFloat(A.hard_limit):null,unit:A.unit||null,tolerance:A.tolerance?parseFloat(A.tolerance):0})),R=y.filter(A=>A.name&&A.lat&&A.lon).map(A=>({name:A.name,boundary_type:A.boundary_type,center:{lat:parseFloat(A.lat),lon:parseFloat(A.lon)},radius_meters:A.radius_meters?parseFloat(A.radius_meters):1e3,altitude_min:A.altitude_min?parseFloat(A.altitude_min):null,altitude_max:A.altitude_max?parseFloat(A.altitude_max):null})),P=E.filter(A=>A.name).map(A=>({name:A.name,allowed_hours_start:parseInt(A.start_hour),allowed_hours_end:parseInt(A.end_hour),allowed_days:A.days,timezone:A.timezone})),U=S.filter(A=>A.name&&A.parameter).map(A=>({name:A.name,parameter:A.parameter,allowed_values:A.allowed_values?A.allowed_values.split(",").map(V=>V.trim()).filter(Boolean):[],forbidden_values:A.forbidden_values?A.forbidden_values.split(",").map(V=>V.trim()).filter(Boolean):[]}));return{numeric_boundaries:_,geo_boundaries:R,time_boundaries:P,state_boundaries:U,rate_boundaries:[],safe_state:{action:k.violation_action,connection_loss:k.connection_loss_action,notify:!0,emergency_contact:{name:k.emergency_contact_name,phone:k.emergency_contact_phone,email:k.emergency_contact_email}},fail_closed:k.fail_closed}},me=async()=>{var _,R;try{const P=te(),U={organization_name:l.organization_name,contact_name:l.contact_name,contact_email:l.contact_email,contact_phone:l.contact_phone,system_name:c.system_name,system_type:c.system_type,custom_system_type:z||null,system_version:c.system_version,manufacturer:c.manufacturer,system_description:c.system_description,odd_specification:{description:f.odd_description,deployment_type:c.deployment_type,environment:c.environment,facility_location:f.facility_location,operating_temp:f.temp_min&&f.temp_max?{min:parseFloat(f.temp_min),max:parseFloat(f.temp_max),unit:f.temp_unit}:null,weather_constraints:f.weather_constraints||null,surface_type:f.surface_type||null,integration_method:c.integration_method,expected_volume:c.expected_volume,compliance_requirements:c.compliance_requirements},envelope_definition:P,facility_location:f.facility_location,preferred_test_date:f.preferred_test_date||null,notes:f.notes};await q.post("/api/applications/",U),n("/applications")}catch(P){s(((R=(_=P.response)==null?void 0:_.data)==null?void 0:R.detail)||"Failed to submit application"),o(1)}},ce=(_,R)=>{_==="numeric"&&m(P=>[...P.filter(U=>U.name),...R.map(U=>({name:U.name||"",parameter:U.parameter||"",min_value:U.min_value||"",max_value:U.max_value||"",hard_limit:U.hard_limit||"",unit:U.unit||"",tolerance:U.tolerance||""}))]),_==="geo"&&h(P=>[...P.filter(U=>U.name),...R.map(U=>({name:U.name||"",boundary_type:U.boundary_type||"circle",lat:U.lat||"",lon:U.lon||"",radius_meters:U.radius_meters||"",altitude_min:U.altitude_min||"",altitude_max:U.altitude_max||""}))]),_==="time"&&M(P=>[...P.filter(U=>U.name),...R.map(U=>({name:U.name||"",start_hour:U.start_hour||"6",end_hour:U.end_hour||"22",timezone:U.timezone||"America/Chicago",days:Array.isArray(U.days)?U.days:[0,1,2,3,4,5,6]}))]),_==="state"&&O(P=>[...P.filter(U=>U.name),...R.map(U=>({name:U.name||"",parameter:U.parameter||"",allowed_values:U.allowed_values||"",forbidden_values:U.forbidden_values||""}))])},w=()=>a===1?l.organization_name&&l.contact_email:a===2?c.system_name&&c.system_type:a===3?f.odd_description:!0,W=["Organization","System","Operating Domain","Boundaries","Safety & Failure","Review"];return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs(ae,{to:"/applications",className:"flex items-center gap-2 mb-4 no-underline",style:{color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(la,{className:"w-4 h-4"}),"Back to Applications"]}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"New Submission"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"ODDC Application"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:"Submit your autonomous system for conformance determination"})]}),e.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:W.map((_,R)=>e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{height:"3px",background:R+1<=a?"#a896d6":"rgba(255,255,255,0.08)",transition:"background 0.3s",marginBottom:"6px"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"8px",letterSpacing:"1px",textTransform:"uppercase",color:R+1<=a?"#a896d6":"rgba(255,255,255,.50)"},children:_})]},R))}),e.jsxs(ne,{children:[r&&e.jsx("div",{className:"mb-4 p-3",style:{background:"transparent",border:"1px solid rgba(255,255,255,0.07)",color:"#D65C5C"},children:r}),L&&e.jsxs("div",{style:{textAlign:"center",padding:"clamp(24px, 5vw, 60px) clamp(12px, 3vw, 20px)"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"transparent",border:"2px solid rgba(92,214,133,0.4)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",fontSize:"clamp(20px, 4vw, 28px)"},children:""}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,margin:"0 0 12px",color:"rgba(255,255,255,.94)"},children:"Application Submitted"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"14px",lineHeight:"1.6",maxWidth:"480px",margin:"0 auto 8px"},children:"Your application is now in the queue. Our team will review your ODD specification and boundary definitions."}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",marginBottom:"32px"},children:"You'll receive email updates as your application progresses through the certification pipeline."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx(ae,{to:"/applications",className:"no-underline px-6 py-3 btn",children:"View Applications"}),e.jsx(ae,{to:"/dashboard",className:"no-underline px-6 py-3 btn",children:"Dashboard"})]})]}),!L&&e.jsxs(e.Fragment,{children:[a===1&&e.jsxs("div",{className:"space-y-4",children:[D("Organization Information"),e.jsxs("div",{children:[N("Organization Name *"),e.jsx("input",{type:"text",value:l.organization_name,onChange:_=>d({...l,organization_name:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]}),e.jsxs("div",{children:[N("Contact Name"),e.jsx("input",{type:"text",value:l.contact_name,onChange:_=>d({...l,contact_name:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[N("Contact Email *"),e.jsx("input",{type:"email",value:l.contact_email,onChange:_=>d({...l,contact_email:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]}),e.jsxs("div",{children:[N("Contact Phone"),e.jsx("input",{type:"tel",value:l.contact_phone,onChange:_=>d({...l,contact_phone:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-4",children:[D("System Information"),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[N("System Name *"),e.jsx("input",{type:"text",value:c.system_name,onChange:_=>p({...c,system_name:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]}),e.jsxs("div",{children:[N("System Type *"),e.jsxs("select",{value:c.system_type,onChange:_=>{p({...c,system_type:_.target.value}),F(_.target.value)},className:"w-full px-4 py-3 outline-none",style:B,children:[e.jsxs("option",{value:"",children:["Select system type (",Object.keys(De).length," available)..."]}),us.map(_=>{const R=Object.entries(De).filter(([,P])=>P.domain===_.key);return R.length?e.jsx("optgroup",{label:_.label,children:R.map(([P,U])=>e.jsx("option",{value:P,children:U.label},P))},_.key):null})]})]})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[N("System Version"),e.jsx("input",{type:"text",value:c.system_version,onChange:_=>p({...c,system_version:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,placeholder:"e.g., 1.0.0"})]}),e.jsxs("div",{children:[N("Manufacturer"),e.jsx("input",{type:"text",value:c.manufacturer,onChange:_=>p({...c,manufacturer:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]})]}),e.jsxs("div",{children:[N("System Description *"),e.jsx("textarea",{value:c.system_description,onChange:_=>p({...c,system_description:_.target.value}),rows:3,className:"w-full px-4 py-3 outline-none resize-none",style:B})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[N("Deployment Type"),e.jsxs("select",{value:c.deployment_type,onChange:_=>p({...c,deployment_type:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"indoor",children:"Indoor"}),e.jsx("option",{value:"outdoor",children:"Outdoor"}),e.jsx("option",{value:"hybrid",children:"Indoor + Outdoor"}),e.jsx("option",{value:"virtual",children:"Virtual / Cloud"})]})]}),e.jsxs("div",{children:[N("Environment"),e.jsxs("select",{value:c.environment,onChange:_=>p({...c,environment:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"warehouse",children:"Warehouse / Logistics"}),e.jsx("option",{value:"manufacturing",children:"Manufacturing Floor"}),e.jsx("option",{value:"road",children:"Public Road"}),e.jsx("option",{value:"airspace",children:"Airspace"}),e.jsx("option",{value:"clinical",children:"Clinical / Hospital"}),e.jsx("option",{value:"data_center",children:"Data Center"}),e.jsx("option",{value:"agriculture",children:"Agriculture / Field"}),e.jsx("option",{value:"construction",children:"Construction Site"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[N("Agent Deployment Method"),e.jsxs("select",{value:c.integration_method,onChange:_=>p({...c,integration_method:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,children:[e.jsx("option",{value:"python",children:"Python Package"}),e.jsx("option",{value:"docker",children:"Docker Container"}),e.jsx("option",{value:"kubernetes",children:"Kubernetes"})]})]}),e.jsxs("div",{children:[N("Expected Actions / Day"),e.jsxs("select",{value:c.expected_volume,onChange:_=>p({...c,expected_volume:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"low",children:"Low (< 1,000)"}),e.jsx("option",{value:"medium",children:"Medium (1K  10K)"}),e.jsx("option",{value:"high",children:"High (10K  100K)"}),e.jsx("option",{value:"very_high",children:"Very High (100K+)"})]})]})]}),e.jsxs("div",{children:[c.system_type&&c.system_type.includes("custom")&&e.jsxs("div",{style:{marginTop:"-8px"},children:[N("Describe Your System Type *"),e.jsx("input",{type:"text",value:z,onChange:_=>I(_.target.value),className:"w-full px-4 py-3 outline-none",style:B,placeholder:"e.g., Underwater pipeline inspection ROV, Agricultural pollination drone swarm"}),J("Since your system doesn't fit a standard category, please describe it so we can configure appropriate boundaries.")]}),N("Compliance Requirements"),e.jsx("input",{type:"text",value:c.compliance_requirements,onChange:_=>p({...c,compliance_requirements:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,placeholder:"e.g., ISO 26262, FDA 510(k), FAA Part 107, SOC 2"}),J("List any regulatory or compliance frameworks your system must adhere to.")]})]}),a===3&&e.jsxs("div",{className:"space-y-4",children:[D("Operational Design Domain"),e.jsxs("div",{children:[N("ODD Description *"),e.jsx("textarea",{value:f.odd_description,onChange:_=>b({...f,odd_description:_.target.value}),rows:5,className:"w-full px-4 py-3 outline-none resize-none",style:B,placeholder:"Describe the operating domain in plain language: where, how, and under what conditions the system operates."}),J("This is the human-readable description of your system's intended operating domain. Specific numeric limits will be defined in the next step.")]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[N("Facility / Deployment Location"),e.jsx("input",{type:"text",value:f.facility_location,onChange:_=>b({...f,facility_location:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,placeholder:"Address or region"})]}),e.jsxs("div",{children:[N("Preferred Test Start Date"),e.jsx("input",{type:"date",value:f.preferred_test_date,onChange:_=>b({...f,preferred_test_date:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]})]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px",marginTop:"8px"},children:D("Environmental Conditions")}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))"},children:[e.jsxs("div",{children:[N("Temp Min"),e.jsx("input",{type:"number",value:f.temp_min,onChange:_=>b({...f,temp_min:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,placeholder:"e.g., 32"})]}),e.jsxs("div",{children:[N("Temp Max"),e.jsx("input",{type:"number",value:f.temp_max,onChange:_=>b({...f,temp_max:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,placeholder:"e.g., 110"})]}),e.jsxs("div",{children:[N("Unit"),e.jsxs("select",{value:f.temp_unit,onChange:_=>b({...f,temp_unit:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,children:[e.jsx("option",{value:"F",children:"F"}),e.jsx("option",{value:"C",children:"C"})]})]})]}),e.jsxs("div",{children:[N("Surface / Terrain Type"),e.jsx("input",{type:"text",value:f.surface_type,onChange:_=>b({...f,surface_type:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,placeholder:"e.g., flat concrete, paved road, gravel"})]}),e.jsxs("div",{children:[N("Weather Constraints"),e.jsx("input",{type:"text",value:f.weather_constraints,onChange:_=>b({...f,weather_constraints:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,placeholder:"e.g., no operation in rain/snow, wind < 25 mph"})]}),e.jsxs("div",{children:[N("Additional Notes"),e.jsx("textarea",{value:f.notes,onChange:_=>b({...f,notes:_.target.value}),rows:2,className:"w-full px-4 py-3 outline-none resize-none",style:B,placeholder:"Anything else relevant to the operating domain"})]})]}),a===4&&e.jsxs("div",{className:"space-y-6",children:[c.system_type&&De[c.system_type]&&e.jsxs("div",{style:{padding:"12px 16px",background:c.system_type.includes("custom")?"rgba(139,92,246,0.1)":"rgba(92,214,133,0.1)",border:"1px solid "+(c.system_type.includes("custom")?"rgba(139,92,246,0.2)":"rgba(92,214,133,0.2)"),display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:c.system_type.includes("custom")?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:16,style:{color:"#a896d6"}}),e.jsxs("span",{style:{color:"#a896d6",fontSize:"13px"},children:["Custom system  define all boundaries manually or use Bulk Import",z?` (${z})`:""]})]}):e.jsxs(e.Fragment,{children:[e.jsx(pn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:16,style:{color:"#5CD685"}}),e.jsxs("span",{style:{color:"#5CD685",fontSize:"13px"},children:["Loaded recommended boundaries for ",De[c.system_type].label]})]})}),!c.system_type.includes("custom")&&e.jsx("button",{onClick:()=>F(c.system_type),className:"btn",children:"Reload Defaults"})]}),e.jsxs("div",{children:[D("Numeric Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>g({open:!0,type:"numeric"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),J("Define measurable limits: speed, temperature, altitude, weight, pressure, distance, etc."),j.map((_,R)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:_.name,onChange:P=>C(j,m,R,"name",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Name (e.g., Speed Limit)"}),e.jsx("input",{type:"text",value:_.parameter,onChange:P=>C(j,m,R,"parameter",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Parameter (e.g., speed)"})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsx("input",{type:"number",value:_.min_value,onChange:P=>C(j,m,R,"min_value",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Min"}),e.jsx("input",{type:"number",value:_.max_value,onChange:P=>C(j,m,R,"max_value",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Max"}),e.jsx("input",{type:"number",value:_.hard_limit,onChange:P=>C(j,m,R,"hard_limit",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Hard limit"}),e.jsx("input",{type:"text",value:_.unit,onChange:P=>C(j,m,R,"unit",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Unit"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:_.tolerance,onChange:P=>C(j,m,R,"tolerance",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px",flex:1},placeholder:"Tol"}),j.length>1&&e.jsx("button",{onClick:()=>K(j,m,R),style:{background:"transparent",border:"none",color:"#D65C5C",cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},R)),e.jsx("button",{onClick:()=>$(j,m,{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}),style:{marginTop:"8px",background:"transparent",border:"1px dashed rgba(255,255,255,.07)",padding:"8px 16px",color:"#a896d6",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Numeric Boundary"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:[D("Geographic Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>g({open:!0,type:"geo"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),J("Define the physical operating zone. Enter center coordinates and radius."),y.map((_,R)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:_.name,onChange:P=>C(y,h,R,"name",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Name (e.g., Operating Zone)"}),e.jsxs("select",{value:_.boundary_type,onChange:P=>C(y,h,R,"boundary_type",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},children:[e.jsx("option",{value:"circle",children:"Radius from Point"}),e.jsx("option",{value:"polygon",children:"Polygon (contact us)"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"number",step:"any",value:_.lat,onChange:P=>C(y,h,R,"lat",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:_.lon,onChange:P=>C(y,h,R,"lon",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Longitude"}),e.jsx("input",{type:"number",value:_.radius_meters,onChange:P=>C(y,h,R,"radius_meters",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Radius (m)"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:_.altitude_max,onChange:P=>C(y,h,R,"altitude_max",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px",flex:1},placeholder:"Alt max (m)"}),y.length>1&&e.jsx("button",{onClick:()=>K(y,h,R),style:{background:"transparent",border:"none",color:"#D65C5C",cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},R)),e.jsx("button",{onClick:()=>$(y,h,{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}),style:{marginTop:"8px",background:"transparent",border:"1px dashed rgba(255,255,255,.07)",padding:"8px 16px",color:"#a896d6",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Geographic Boundary"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:[D("Time Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>g({open:!0,type:"time"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),J("Define allowed operating hours and days."),E.map((_,R)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:_.name,onChange:P=>C(E,M,R,"name",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Name"}),e.jsx("input",{type:"number",min:"0",max:"23",value:_.start_hour,onChange:P=>C(E,M,R,"start_hour",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Start hour"}),e.jsx("input",{type:"number",min:"0",max:"23",value:_.end_hour,onChange:P=>C(E,M,R,"end_hour",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"End hour"}),e.jsxs("select",{value:_.timezone,onChange:P=>C(E,M,R,"timezone",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},children:[e.jsx("option",{value:"America/New_York",children:"Eastern"}),e.jsx("option",{value:"America/Chicago",children:"Central"}),e.jsx("option",{value:"America/Denver",children:"Mountain"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Europe/London",children:"UK"}),e.jsx("option",{value:"Europe/Berlin",children:"CET"}),e.jsx("option",{value:"Asia/Tokyo",children:"JST"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",marginRight:"4px"},children:"Days:"}),Y.map((P,U)=>e.jsx("button",{onClick:()=>{const A=_.days.includes(U)?_.days.filter(V=>V!==U):[..._.days,U].sort();C(E,M,R,"days",A)},className:"btn",style:{padding:"2px 6px",fontSize:"10px",minWidth:"28px",justifyContent:"center",color:_.days.includes(U)?"var(--purple-bright)":"var(--text-tertiary)",borderColor:_.days.includes(U)?"rgba(157,140,207,.3)":"rgba(255,255,255,.04)"},children:P},U)),E.length>1&&e.jsx("button",{onClick:()=>K(E,M,R),style:{marginLeft:"auto",background:"transparent",border:"none",color:"#D65C5C",cursor:"pointer",padding:"2px 8px",fontSize:"14px"},children:""})]})]},R)),e.jsx("button",{onClick:()=>$(E,M,{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}),style:{marginTop:"8px",background:"transparent",border:"1px dashed rgba(255,255,255,.07)",padding:"8px 16px",color:"#a896d6",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Time Boundary"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:[D("State Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>g({open:!0,type:"state"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),J("Define allowed/forbidden operational states and modes."),S.map((_,R)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:_.name,onChange:P=>C(S,O,R,"name",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Name (e.g., Mode Check)"}),e.jsx("input",{type:"text",value:_.parameter,onChange:P=>C(S,O,R,"parameter",P.target.value),className:"px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Parameter (e.g., mode)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:_.allowed_values,onChange:P=>C(S,O,R,"allowed_values",P.target.value),className:"w-full px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Allowed (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:"rgba(255,255,255,.50)"},children:"e.g., autonomous, semi-autonomous"})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("input",{type:"text",value:_.forbidden_values,onChange:P=>C(S,O,R,"forbidden_values",P.target.value),className:"w-full px-3 py-2 outline-none",style:{...B,fontSize:"13px"},placeholder:"Forbidden (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:"rgba(255,255,255,.50)"},children:"e.g., manual_override, degraded"})]}),S.length>1&&e.jsx("button",{onClick:()=>K(S,O,R),style:{background:"transparent",border:"none",color:"#D65C5C",cursor:"pointer",padding:"0 8px",fontSize:"14px",alignSelf:"flex-start"},children:""})]})]})]},R)),e.jsx("button",{onClick:()=>$(S,O,{name:"",parameter:"",allowed_values:"",forbidden_values:""}),style:{marginTop:"8px",background:"transparent",border:"1px dashed rgba(255,255,255,.07)",padding:"8px 16px",color:"#a896d6",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add State Boundary"})]}),e.jsx(ps,{isOpen:v.open,onClose:()=>g({open:!1,type:""}),onImport:_=>ce(v.type,_),boundaryType:v.type})]}),a===5&&e.jsxs("div",{className:"space-y-4",children:[D("Safety & Failure Mode"),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[N("On Boundary Violation *"),e.jsxs("select",{value:k.violation_action,onChange:_=>u({...k,violation_action:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,children:[e.jsx("option",{value:"stop",children:"Full Stop"}),e.jsx("option",{value:"slow",children:"Slow / Degrade"}),e.jsx("option",{value:"alert",children:"Alert Only (log + notify)"}),e.jsx("option",{value:"revert",children:"Revert to Last Safe State"}),e.jsx("option",{value:"handoff",children:"Hand Off to Human Operator"})]})]}),e.jsxs("div",{children:[N("On Connection Loss *"),e.jsxs("select",{value:k.connection_loss_action,onChange:_=>u({...k,connection_loss_action:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B,children:[e.jsx("option",{value:"stop",children:"Full Stop"}),e.jsx("option",{value:"continue",children:"Continue (local enforcement)"}),e.jsx("option",{value:"degrade",children:"Degrade to Reduced Capability"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>u({...k,fail_closed:!k.fail_closed}),className:"btn",style:{padding:"6px 14px",color:k.fail_closed?"var(--accent-green)":"var(--text-tertiary)",borderColor:k.fail_closed?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:k.fail_closed?"ON":"OFF"}),e.jsx("span",{style:{color:"rgba(255,255,255,.78)",fontSize:"14px"},children:"Fail-Closed Mode (recommended)"})]}),J("When enabled, the agent blocks ALL actions if it cannot verify boundaries.")]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:D("Emergency Contact")}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))"},children:[e.jsxs("div",{children:[N("Name"),e.jsx("input",{type:"text",value:k.emergency_contact_name,onChange:_=>u({...k,emergency_contact_name:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]}),e.jsxs("div",{children:[N("Phone"),e.jsx("input",{type:"tel",value:k.emergency_contact_phone,onChange:_=>u({...k,emergency_contact_phone:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]}),e.jsxs("div",{children:[N("Email"),e.jsx("input",{type:"email",value:k.emergency_contact_email,onChange:_=>u({...k,emergency_contact_email:_.target.value}),className:"w-full px-4 py-3 outline-none",style:B})]})]}),e.jsxs("div",{children:[N("Escalation Triggers"),e.jsx("textarea",{value:k.escalation_triggers,onChange:_=>u({...k,escalation_triggers:_.target.value}),rows:2,className:"w-full px-4 py-3 outline-none resize-none",style:B,placeholder:"Conditions requiring immediate human takeover (e.g., sensor failure, repeated violations)"})]}),e.jsxs("div",{children:[N("Existing Safety Systems"),e.jsx("textarea",{value:k.existing_safety_systems,onChange:_=>u({...k,existing_safety_systems:_.target.value}),rows:2,className:"w-full px-4 py-3 outline-none resize-none",style:B,placeholder:"Other safety mechanisms in place (e.g., physical e-stop, LIDAR, safety PLC)"})]})]}),a===6&&e.jsxs("div",{className:"space-y-4",children:[D("Review Application"),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"13px",lineHeight:"1.5"},children:"Review your application. After submission, our team will review your boundary definitions and configure the ENVELO agent for your system."}),e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Organization"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px"},children:l.organization_name})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Contact"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px"},children:l.contact_name||l.contact_email})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"System"}),e.jsx("br",{}),e.jsxs("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px"},children:[c.system_name," (",c.system_type,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Deployment"}),e.jsx("br",{}),e.jsxs("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px"},children:[c.deployment_type||"Not specified","  ",c.environment||"Not specified"]})]})]})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"16px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:"#a896d6"},children:"Boundary Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#a896d6"},children:j.filter(_=>_.name).length}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:"Numeric"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#a896d6"},children:y.filter(_=>_.name).length}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:"Geographic"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#a896d6"},children:E.filter(_=>_.name).length}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:"Time"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#a896d6"},children:S.filter(_=>_.name).length}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:"State"})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"16px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:"#a896d6"},children:"Safety Configuration"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"On Violation"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"13px"},children:k.violation_action})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"On Connection Loss"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"13px"},children:k.connection_loss_action})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Fail-Closed"}),e.jsx("br",{}),e.jsx("span",{style:{color:k.fail_closed?"#5CD685":"#D65C5C",fontSize:"13px"},children:k.fail_closed?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Agent Method"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"13px"},children:c.integration_method})]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginTop:"24px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,.07)"},children:[a>1?e.jsx("button",{onClick:()=>o(a-1),className:"btn",children:"Back"}):e.jsx("div",{}),a<i?e.jsx("button",{onClick:()=>w()&&o(a+1),disabled:!w(),className:"btn",children:"Continue"}):e.jsx("button",{onClick:me,className:"btn",children:"Submit Application"})]})]})]})]})}const Z={bgPrimary:"#0d0d1a",bgSecondary:"#1a1a2e",bgTertiary:"#252540",textPrimary:"#e8e8f0",textSecondary:"#a0a0b0",textTertiary:"#6a6a80",purpleBright:"#8b5cf6",greenBright:"#10b981",redBright:"#ef4444",border:"#2a2a45"},ze=({children:t,style:n={}})=>e.jsx("div",{style:{background:`linear-gradient(135deg, ${Z.bgSecondary} 0%, ${Z.bgTertiary} 100%)`,border:`1px solid ${Z.border}`,padding:"24px",...n},children:t}),be=({children:t,onClick:n,variant:a="primary",disabled:o=!1,style:i={}})=>e.jsx("button",{onClick:n,disabled:o,style:{padding:"10px 20px",border:"none",cursor:o?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase",transition:"all 0.2s",opacity:o?.5:1,...a==="primary"?{background:Z.purpleBright,color:"rgba(255,255,255,.94)"}:a==="danger"?{background:Z.redBright,color:"rgba(255,255,255,.94)"}:{background:"transparent",border:`1px solid ${Z.border}`,color:Z.textSecondary},...i},children:t}),le=({label:t,value:n,onChange:a,type:o="text",placeholder:i="",style:r={}})=>e.jsxs("div",{style:{marginBottom:"12px",...r},children:[t&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,marginBottom:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:t}),e.jsx("input",{type:o,value:n,onChange:s=>a(o==="number"?parseFloat(s.target.value)||0:s.target.value),placeholder:i,style:{width:"100%",padding:"10px 12px",background:Z.bgPrimary,border:`1px solid ${Z.border}`,color:Z.textPrimary,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"}})]}),jt=({label:t,value:n,onChange:a,options:o,style:i={}})=>e.jsxs("div",{style:{marginBottom:"12px",...i},children:[t&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,marginBottom:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:t}),e.jsx("select",{value:n,onChange:r=>a(r.target.value),style:{width:"100%",padding:"10px 12px",background:Z.bgPrimary,border:`1px solid ${Z.border}`,color:Z.textPrimary,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:o.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),xs=({boundary:t,onChange:n,onRemove:a})=>e.jsxs(ze,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:Z.purpleBright,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"NUMERIC BOUNDARY"}),e.jsx(be,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(le,{label:"Name",value:t.name||"",onChange:o=>n({...t,name:o}),placeholder:"e.g., Speed Limit"}),e.jsx(le,{label:"Parameter",value:t.parameter||"",onChange:o=>n({...t,parameter:o}),placeholder:"e.g., speed"}),e.jsx(le,{label:"Min Value",type:"number",value:t.min_value??"",onChange:o=>n({...t,min_value:o||null}),placeholder:"Optional"}),e.jsx(le,{label:"Max Value",type:"number",value:t.max_value??"",onChange:o=>n({...t,max_value:o||null}),placeholder:"Required"}),e.jsx(le,{label:"Unit",value:t.unit||"",onChange:o=>n({...t,unit:o}),placeholder:"e.g., km/h, C"}),e.jsx(le,{label:"Tolerance",type:"number",value:t.tolerance||0,onChange:o=>n({...t,tolerance:o}),placeholder:"0"})]}),e.jsx(jt,{label:"On Violation",value:t.violation_action||"block",onChange:o=>n({...t,violation_action:o}),options:[{value:"block",label:"Block Action"},{value:"warn",label:"Warn Only"},{value:"log",label:"Log Only"}],style:{marginTop:"12px",marginBottom:0}})]}),fs=({boundary:t,onChange:n,onRemove:a})=>{var o,i;return e.jsxs(ze,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:Z.greenBright,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"GEOGRAPHIC BOUNDARY"}),e.jsx(be,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(le,{label:"Name",value:t.name||"",onChange:r=>n({...t,name:r}),placeholder:"e.g., Warehouse Zone"}),e.jsx(jt,{label:"Boundary Type",value:t.boundary_type||"circle",onChange:r=>n({...t,boundary_type:r}),options:[{value:"circle",label:"Circle (Center + Radius)"},{value:"polygon",label:"Polygon (Multiple Points)"}]}),t.boundary_type==="circle"||!t.boundary_type?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[e.jsx(le,{label:"Center Latitude",type:"number",value:((o=t.center)==null?void 0:o.lat)??"",onChange:r=>n({...t,center:{...t.center,lat:r}}),placeholder:"30.2672"}),e.jsx(le,{label:"Center Longitude",type:"number",value:((i=t.center)==null?void 0:i.lon)??"",onChange:r=>n({...t,center:{...t.center,lon:r}}),placeholder:"-97.7431"}),e.jsx(le,{label:"Radius (meters)",type:"number",value:t.radius_meters||"",onChange:r=>n({...t,radius_meters:r}),placeholder:"1000"})]}):e.jsx("div",{style:{color:Z.textSecondary,fontSize:"12px",padding:"12px",background:Z.bgPrimary},children:"Polygon editor coming soon. For now, enter coordinates as JSON in the raw editor below."})]})},hs=({boundary:t,onChange:n,onRemove:a})=>e.jsxs(ze,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#f59e0b",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"TIME BOUNDARY"}),e.jsx(be,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(le,{label:"Name",value:t.name||"",onChange:o=>n({...t,name:o}),placeholder:"e.g., Operating Hours"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(le,{label:"Start Hour (0-23)",type:"number",value:t.allowed_hours_start??0,onChange:o=>n({...t,allowed_hours_start:Math.min(23,Math.max(0,o))})}),e.jsx(le,{label:"End Hour (0-23)",type:"number",value:t.allowed_hours_end??23,onChange:o=>n({...t,allowed_hours_end:Math.min(23,Math.max(0,o))})})]}),e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,marginBottom:"8px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Allowed Days"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((o,i)=>{const r=t.allowed_days||[0,1,2,3,4,5,6],s=r.includes(i);return e.jsx("button",{onClick:()=>{const l=s?r.filter(d=>d!==i):[...r,i].sort();n({...t,allowed_days:l})},style:{padding:"6px 12px",border:`1px solid ${s?Z.purpleBright:Z.border}`,background:s?Z.purpleBright:"transparent",color:s?"white":Z.textSecondary,cursor:"pointer",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:o},o)})})]})]}),ys=({boundary:t,onChange:n,onRemove:a})=>e.jsxs(ze,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#ec4899",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"STATE BOUNDARY"}),e.jsx(be,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(le,{label:"Name",value:t.name||"",onChange:o=>n({...t,name:o}),placeholder:"e.g., Operation Mode"}),e.jsx(le,{label:"Parameter",value:t.parameter||"",onChange:o=>n({...t,parameter:o}),placeholder:"e.g., mode"})]}),e.jsx(le,{label:"Allowed Values (comma-separated)",value:(t.allowed_values||[]).join(", "),onChange:o=>n({...t,allowed_values:o.split(",").map(i=>i.trim()).filter(Boolean)}),placeholder:"e.g., idle, moving, charging"}),e.jsx(le,{label:"Forbidden Values (comma-separated)",value:(t.forbidden_values||[]).join(", "),onChange:o=>n({...t,forbidden_values:o.split(",").map(i=>i.trim()).filter(Boolean)}),placeholder:"e.g., emergency, override",style:{marginBottom:0}})]});function _s({applicationId:t,initialBoundaries:n,onSave:a,api:o}){var I;const[i,r]=x.useState({numeric_boundaries:[],geo_boundaries:[],time_boundaries:[],state_boundaries:[],safe_state:{action:"stop",notify:!0,log:!0},fail_closed:!0,telemetry_interval:1,heartbeat_interval:60}),[s,l]=x.useState(!1),[d,c]=x.useState(!1),[p,f]=x.useState("");x.useEffect(()=>{n&&typeof n=="object"&&r(y=>({...y,...n}))},[n]),x.useEffect(()=>{f(JSON.stringify(i,null,2))},[i]);const b=y=>{const h=`${y}_boundaries`,E={numeric:{type:"numeric",name:"",parameter:"",max_value:null,unit:"",tolerance:0,violation_action:"block"},geo:{type:"geo",name:"",boundary_type:"circle",center:{lat:0,lon:0},radius_meters:1e3,violation_action:"block"},time:{type:"time",name:"",allowed_hours_start:6,allowed_hours_end:22,allowed_days:[0,1,2,3,4],violation_action:"block"},state:{type:"state",name:"",parameter:"",allowed_values:[],forbidden_values:[],violation_action:"block"}};r(M=>({...M,[h]:[...M[h],E[y]]}))},j=(y,h,E)=>{const M=`${y}_boundaries`;r(S=>({...S,[M]:S[M].map((O,k)=>k===h?E:O)}))},m=(y,h)=>{const E=`${y}_boundaries`;r(M=>({...M,[E]:M[E].filter((S,O)=>O!==h)}))},v=async()=>{l(!0);try{await a(i)}finally{l(!1)}},g=()=>{try{const y=JSON.parse(p);r(y),c(!1)}catch(y){alert("Invalid JSON: "+y.message)}},z=i.numeric_boundaries.length+i.geo_boundaries.length+i.time_boundaries.length+i.state_boundaries.length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:Z.purpleBright,margin:0},children:"Boundary Configuration"}),e.jsxs("p",{style:{color:Z.textSecondary,margin:"8px 0 0",fontSize:"14px"},children:[z," boundaries defined"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(be,{variant:"secondary",onClick:()=>c(!d),children:d?"Visual Editor":"Raw JSON"}),e.jsx(be,{onClick:v,disabled:s,children:s?"Saving...":"Save Boundaries"})]})]}),d?e.jsxs(ze,{children:[e.jsx("textarea",{value:p,onChange:y=>f(y.target.value),style:{width:"100%",minHeight:"400px",padding:"16px",background:Z.bgPrimary,border:`1px solid ${Z.border}`,color:Z.textPrimary,fontSize:"13px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",resize:"vertical"}}),e.jsx(be,{onClick:g,style:{marginTop:"12px"},children:"Apply JSON"})]}):e.jsxs("div",{children:[e.jsxs(ze,{style:{marginBottom:"24px"},children:[e.jsx("p",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,margin:"0 0 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Add Boundary"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx(be,{variant:"secondary",onClick:()=>b("numeric"),children:"+ Numeric (Speed, Temp, etc.)"}),e.jsx(be,{variant:"secondary",onClick:()=>b("geo"),children:"+ Geographic (Geofence)"}),e.jsx(be,{variant:"secondary",onClick:()=>b("time"),children:"+ Time (Operating Hours)"}),e.jsx(be,{variant:"secondary",onClick:()=>b("state"),children:"+ State (Allowed Modes)"})]})]}),i.numeric_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:Z.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Numeric Boundaries (",i.numeric_boundaries.length,")"]}),i.numeric_boundaries.map((y,h)=>e.jsx(xs,{boundary:y,onChange:E=>j("numeric",h,E),onRemove:()=>m("numeric",h)},h))]}),i.geo_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:Z.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Geographic Boundaries (",i.geo_boundaries.length,")"]}),i.geo_boundaries.map((y,h)=>e.jsx(fs,{boundary:y,onChange:E=>j("geo",h,E),onRemove:()=>m("geo",h)},h))]}),i.time_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:Z.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Time Boundaries (",i.time_boundaries.length,")"]}),i.time_boundaries.map((y,h)=>e.jsx(hs,{boundary:y,onChange:E=>j("time",h,E),onRemove:()=>m("time",h)},h))]}),i.state_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:Z.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["State Boundaries (",i.state_boundaries.length,")"]}),i.state_boundaries.map((y,h)=>e.jsx(ys,{boundary:y,onChange:E=>j("state",h,E),onRemove:()=>m("state",h)},h))]}),e.jsxs(ze,{children:[e.jsx("h3",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:Z.textTertiary,margin:"0 0 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Enforcement Settings"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsx(jt,{label:"On Violation",value:((I=i.safe_state)==null?void 0:I.action)||"stop",onChange:y=>r(h=>({...h,safe_state:{...h.safe_state,action:y}})),options:[{value:"stop",label:"Stop System"},{value:"reduce",label:"Reduce Operation"},{value:"handoff",label:"Human Handoff"}]}),e.jsx(jt,{label:"Fail Mode",value:i.fail_closed?"closed":"open",onChange:y=>r(h=>({...h,fail_closed:y==="closed"})),options:[{value:"closed",label:"Fail Closed (Block)"},{value:"open",label:"Fail Open (Allow)"}]}),e.jsx(le,{label:"Telemetry Interval (sec)",type:"number",value:i.telemetry_interval||1,onChange:y=>r(h=>({...h,telemetry_interval:y}))})]})]}),z===0&&e.jsxs(ze,{style:{textAlign:"center",padding:"48px"},children:[e.jsx("p",{style:{color:Z.textSecondary,fontSize:"16px",margin:0},children:"No boundaries defined yet."}),e.jsx("p",{style:{color:Z.textTertiary,fontSize:"14px",marginTop:"8px"},children:"Add boundaries above to define the system's Operational Design Domain."})]})]})]})}function bs(){var ce;const{id:t}=Zi(),n=Ce(),{user:a}=pe(),o=Be(),[i,r]=x.useState(null),[s,l]=x.useState(!1),[d,c]=x.useState(null),[p,f]=x.useState([]),[b,j]=x.useState([]),[m,v]=x.useState(""),[g,z]=x.useState(!1),[I,y]=x.useState(!1),[h,E]=x.useState(null),[M,S]=x.useState(!1),O=async(w,W)=>{S(!0);try{const _=await q.get(`/api/applications/${t}/email-preview?new_state=${w}`);E({..._.data,label:W,newState:w})}catch{n.show("Preview failed","error")}S(!1)},k=async()=>{var w,W;if(h)try{await q.patch(`/api/applications/${t}/state?new_state=${h.newState}`),E(null),await B(),n.show(`State changed to ${h.newState}`,"success")}catch(_){n.show("Failed: "+(((W=(w=_.response)==null?void 0:w.data)==null?void 0:W.detail)||_.message),"error")}};x.useEffect(()=>{t&&(q.get(`/api/applications/${t}`).then(w=>r(w.data)).catch(console.error),q.get(`/api/applications/${t}/history`).then(w=>f(w.data)).catch(console.error),q.get(`/api/applications/${t}/comments`).then(w=>j(w.data)).catch(console.error))},[t]);const u=async()=>{var w,W;if(await o({title:"Schedule Test",message:"Schedule a CAT-72 test for this application? The test will need to be started manually."})){l(!0);try{const _=await q.post("/api/cat72/tests",{application_id:parseInt(t)});c(_.data),n.show(`CAT-72 Test created: ${_.data.test_id}  Go to CAT-72 Console to start.`,"success")}catch(_){n.show("Failed to create test: "+(((W=(w=_.response)==null?void 0:w.data)==null?void 0:W.detail)||_.message),"error")}l(!1)}},L=Me(),H=async()=>{var w,W;if(await o({title:"Delete Application",message:"Are you sure? This cannot be undone.",danger:!0,confirmLabel:"Delete"}))try{await q.delete(`/api/applications/${t}`),n.show("Application deleted","success"),L("/applications")}catch(_){n.show("Failed to delete: "+(((W=(w=_.response)==null?void 0:w.data)==null?void 0:W.detail)||_.message),"error")}},F=()=>O("approved","Approve Application"),B=async()=>{try{const w=await q.get(`/api/applications/${t}`);r(w.data),q.get(`/api/applications/${t}/history`).then(W=>f(W.data)).catch(console.error)}catch(w){console.error("Failed to refresh:",w)}},D=async()=>{var w,W;if(m.trim()){y(!0);try{const _=await q.post(`/api/applications/${t}/comments`,{content:m,is_internal:g});j(R=>[_.data,...R]),v(""),z(!1),n.show("Comment added","success")}catch(_){n.show("Failed to post comment: "+(((W=(w=_.response)==null?void 0:w.data)==null?void 0:W.detail)||_.message),"error")}y(!1)}},N=async w=>{var W,_;try{await q.delete(`/api/applications/${t}/comments/${w}`),j(R=>R.filter(P=>P.id!==w)),n.show("Comment deleted","success")}catch(R){n.show("Failed to delete comment: "+(((_=(W=R.response)==null?void 0:W.data)==null?void 0:_.detail)||R.message),"error")}},J=()=>O("under_review","Begin Review"),$=()=>O("suspended","Suspend Application"),K=async()=>{var w,W;if(await o({title:"Reinstate",message:"Reinstate this application to pending? The applicant will need to go through review again."}))try{await q.patch(`/api/applications/${t}/state?new_state=pending`),await B()}catch(_){n.show("Failed to reinstate: "+(((W=(w=_.response)==null?void 0:w.data)==null?void 0:W.detail)||_.message),"error")}},C=[{key:"pending",label:"Submitted",icon:"1"},{key:"under_review",label:"Under Review",icon:"2"},{key:"approved",label:"Approved",icon:"3"},{key:"testing",label:"CAT-72 Testing",icon:"4"},{key:"conformant",label:"Conformant",icon:""}],Y=C.findIndex(w=>w.key===(i==null?void 0:i.state)),te=(i==null?void 0:i.state)==="revoked"||(i==null?void 0:i.state)==="suspended",me=()=>{switch(i==null?void 0:i.state){case"pending":return"Your application is queued for review by the Sentinel Authority team.";case"under_review":return"Our team is evaluating your ODD specification and boundary definitions.";case"approved":return"Your system is approved. The ENVELO Interlock is being configured for CAT-72 testing.";case"testing":return"CAT-72 continuous conformance test is in progress (72-hour minimum).";case"conformant":return"Your system has achieved ODDC Conformance. Your certificate and ENVELO Interlock credentials are active.";case"revoked":return"This application has been suspended. Contact info@sentinelauthority.org for remediation steps.";default:return""}};return i?e.jsxs("div",{className:"space-y-6",children:[h&&e.jsx("div",{className:"sa-modal-overlay",style:{position:"fixed",inset:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",maxWidth:"min(650px, 95vw)",width:"95%",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:"#a896d6"},children:"Email Preview"}),e.jsxs("p",{style:{margin:"4px 0 0",fontSize:"12px",color:"rgba(255,255,255,.50)"},children:["This email will be sent to ",e.jsx("strong",{style:{color:"rgba(255,255,255,.94)"},children:h.to})]})]}),e.jsx("button",{onClick:()=>E(null),style:{background:"none",border:"none",color:"rgba(255,255,255,.50)",cursor:"pointer",fontSize:"20px",padding:"4px 8px"},children:"X"})]}),e.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid rgba(255,255,255,.07)",background:"transparent"},children:[e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Subject"}),e.jsx("div",{style:{fontSize:"14px",color:"rgba(255,255,255,.94)",fontWeight:500},children:h.subject})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px 24px"},children:e.jsx("div",{style:{background:"#fff",overflow:"hidden"},dangerouslySetInnerHTML:{__html:h.html}})}),e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[e.jsx("button",{onClick:()=>E(null),style:{padding:"8px 20px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.78)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:k,style:{padding:"8px 20px",background:h.newState==="suspended"?"rgba(214,92,92,0.2)":"#5B4B8A",border:"1px solid "+(h.newState==="suspended"?"rgba(214,92,92,0.4)":"#a896d6"),color:h.newState==="suspended"?"#D65C5C":"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:[h.label," + Send Email"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ae,{to:"/applications",className:"flex items-center gap-2 no-underline",style:{color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(la,{className:"w-4 h-4"}),"Back to Applications"]}),(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.state==="pending"&&e.jsx("button",{onClick:J,className:"px-4 py-2 transition-all btn",children:"Begin Review"}),(i.state==="pending"||i.state==="under_review")&&e.jsx("button",{onClick:F,className:"px-4 py-2 transition-all btn",children:"Approve Application"}),i.state==="approved"&&e.jsx("button",{onClick:u,disabled:s,className:"px-4 py-2 transition-all btn",children:s?"Scheduling...":"Schedule CAT-72 Test"}),["pending","under_review","approved","testing","conformant"].includes(i.state)&&e.jsx("button",{onClick:$,className:"px-4 py-2 transition-all btn",children:"Suspend"}),(i.state==="suspended"||i.state==="revoked")&&e.jsx("button",{onClick:K,className:"px-4 py-2 transition-all btn",children:"Reinstate"}),i.state==="expired"&&e.jsx("button",{onClick:K,className:"px-4 py-2 transition-all btn",children:"Re-open"}),e.jsx("button",{onClick:H,className:"px-4 py-2 transition-all btn",children:"Delete"})]})]}),e.jsx(ne,{children:e.jsxs("div",{style:{padding:"8px 0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginBottom:"20px"},children:C.map((w,W)=>{const _=w.key===i.state,R=Y>W;return e.jsxs(fe.Fragment,{children:[W>0&&e.jsx("div",{style:{flex:1,height:"2px",background:R?"#5CD685":"rgba(255,255,255,.07)",margin:"0 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minWidth:"80px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:"bold",background:R?"rgba(92,214,133,0.2)":_?"rgba(157,140,207,0.25)":"rgba(255,255,255,0.03)",border:`2px solid ${R?"#5CD685":_?"#a896d6":"rgba(255,255,255,.07)"}`,color:R?"#5CD685":_?"#a896d6":"rgba(255,255,255,.50)"},children:R?"":w.icon}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"0.5px",textTransform:"uppercase",color:_?"#a896d6":R?"#5CD685":"rgba(255,255,255,.50)",textAlign:"center"},children:w.label})]})]},w.key)})}),te&&e.jsx("div",{style:{padding:"12px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.07)",marginBottom:"12px"},children:e.jsx("span",{style:{color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:" SUSPENDED  This application has been suspended pending review."})}),e.jsx("div",{style:{padding:"12px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)"},children:e.jsx("span",{style:{color:"rgba(255,255,255,.78)",fontSize:"13px",lineHeight:"1.5"},children:me()})})]})}),d&&e.jsx("div",{className:"p-4",style:{background:"transparent",border:"1px solid rgba(255,255,255,0.07)"},children:e.jsxs("p",{style:{color:"#5CD685",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:["Test Created: ",d.test_id,"  ",e.jsx(ae,{to:"/cat72",style:{color:"#a896d6"},children:"Go to CAT-72 Console"})]})}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:["Application ",i.application_number]}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:i.system_name}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:i.system_description})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Organization"}),e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontSize:"18px",marginBottom:"8px"},children:i.organization_name}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"4px"},children:[e.jsx("strong",{children:"Contact:"})," ",i.contact_name]}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"4px"},children:[e.jsx("strong",{children:"Email:"})," ",i.contact_email]}),i.contact_phone&&e.jsxs("p",{style:{color:"rgba(255,255,255,.78)"},children:[e.jsx("strong",{children:"Phone:"})," ",i.contact_phone]})]}),e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Status"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"px-3 py-1",style:{background:i.state==="conformant"?"rgba(92,214,133,0.04)":i.state==="revoked"?"rgba(214,92,92,0.04)":"rgba(214,160,92,0.04)",color:i.state==="conformant"?"#5CD685":i.state==="revoked"?"#D65C5C":"#D6A05C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase"},children:i.state}),(a==null?void 0:a.role)==="admin"&&e.jsxs("select",{value:i.state,onChange:async w=>{var _,R;const W=w.target.value;if(await o({title:"Change Status",message:`Change status to ${W.toUpperCase()}?`}))try{if(await q.patch(`/api/applications/${t}/state?new_state=${W}`),W==="approved")try{await q.post("/api/apikeys/admin/provision",null,{params:{application_id:t,send_email:!0}})}catch(P){console.error("Auto-provision:",P.message)}r({...i,state:W})}catch(P){n.show("Failed to update state: "+(((R=(_=P.response)==null?void 0:_.data)==null?void 0:R.detail)||P.message),"error")}},className:"px-3 py-2",style:{background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved (Interlock Access)"}),e.jsx("option",{value:"testing",children:"Testing (CAT-72 Active)"}),e.jsx("option",{value:"conformant",children:"Conformant"}),e.jsx("option",{value:"revoked",children:"Revoked"})]})]}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)"},children:[e.jsx("strong",{children:"Submitted:"})," ",i.submitted_at?new Date(i.submitted_at).toLocaleString():"N/A"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"System Details"}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:[e.jsx("strong",{children:"Version:"})," ",i.system_version||"N/A"]}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:[e.jsx("strong",{children:"Manufacturer:"})," ",i.manufacturer||"N/A"]}),i.facility_location&&e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:[e.jsx("strong",{children:"Facility:"})," ",i.facility_location]}),i.preferred_test_date&&e.jsxs("p",{style:{color:"rgba(255,255,255,.78)"},children:[e.jsx("strong",{children:"Preferred Test Date:"})," ",new Date(i.preferred_test_date).toLocaleDateString()]})]}),e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Safety Boundaries & Operational Limits"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:typeof i.envelope_definition=="object"?JSON.stringify(i.envelope_definition,null,2):i.envelope_definition||"Not specified"})]})]}),(a==null?void 0:a.role)==="admin"&&e.jsx(_s,{applicationId:i.id,initialBoundaries:i.envelope_definition||{},onSave:async w=>{try{await q.patch(`/api/applicants/${i.id}`,{envelope_definition:w}),n.show("Boundaries saved","success"),r({...i,envelope_definition:w})}catch(W){n.show("Failed to save: "+W.message,"error")}}}),p.length>0&&e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"State Change History"}),e.jsxs("div",{style:{position:"relative",paddingLeft:"28px"},children:[e.jsx("div",{style:{position:"absolute",left:"8px",top:"4px",bottom:"4px",width:"2px",background:"rgba(255,255,255,.07)"}}),p.map((w,W)=>{var V,Q,X,se,Ye;const R={submitted:"#a896d6",state_changed:(()=>{var dt;const Ee=(dt=w.details)==null?void 0:dt.new_state;return Ee==="conformant"?"#5CD685":Ee==="suspended"||Ee==="revoked"?"#D65C5C":Ee==="approved"?"#5CD685":Ee==="under_review"||Ee==="testing"?"#a896d6":"#D6A05C"})(),certificate_issued:"#5CD685"}[w.action]||"rgba(255,255,255,.50)",P=((Q=(V=w.details)==null?void 0:V.new_state)==null?void 0:Q.replace("_"," "))||((X=w.action)==null?void 0:X.replace("_"," ")),U=(Ye=(se=w.details)==null?void 0:se.old_state)==null?void 0:Ye.replace("_"," "),A=w.timestamp?new Date(w.timestamp):null;return e.jsxs("div",{style:{position:"relative",paddingBottom:W<p.length-1?"20px":"0",marginBottom:(W<p.length-1,"0")},children:[e.jsx("div",{style:{position:"absolute",left:"-24px",top:"2px",width:"12px",height:"12px",borderRadius:"50%",background:`${R}08`,border:`2px solid ${R}`}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:500,color:R,textTransform:"uppercase",letterSpacing:"0.5px"},children:P}),U&&w.action!=="submitted"&&e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginLeft:"8px"},children:["from ",U]}),e.jsx("div",{style:{marginTop:"4px"},children:e.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,.50)"},children:w.user_email})})]}),e.jsx("div",{style:{textAlign:"right",flexShrink:0},children:A&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:A.toLocaleDateString()}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:A.toLocaleTimeString()})]})})]})]},W)})]})]}),e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"ODD Specification"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:typeof i.odd_specification=="object"?((ce=i.odd_specification)==null?void 0:ce.description)||JSON.stringify(i.odd_specification,null,2):i.odd_specification})]}),e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Comments & Notes"}),e.jsxs("div",{style:{marginBottom:b.length>0?"20px":"0"},children:[e.jsx("textarea",{value:m,onChange:w=>v(w.target.value),rows:3,placeholder:"Add a comment or note...",className:"w-full px-4 py-3 outline-none resize-none",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",fontSize:"13px",fontFamily:"inherit",transition:"border-color 0.2s"},onFocus:w=>w.target.style.borderColor="#a896d6",onBlur:w=>w.target.style.borderColor="rgba(255,255,255,.07)"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginTop:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(a==null?void 0:a.role)==="admin"&&e.jsxs("button",{onClick:()=>z(!g),className:"btn",style:{padding:"4px 10px",color:g?"var(--accent-green)":"var(--text-tertiary)",borderColor:g?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Internal ",g?"ON":"OFF"]})}),e.jsx("button",{onClick:D,disabled:I||!m.trim(),className:"px-4 py-2 btn",children:I?"Posting...":"Post Comment"})]})]}),b.length>0&&e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:b.map(w=>e.jsxs("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:w.user_role==="admin"?"#a896d6":"rgba(255,255,255,.78)",fontWeight:500},children:w.user_email}),w.user_role==="admin"&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",padding:"2px 6px",background:"transparent",color:"#a896d6",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Admin"}),w.is_internal&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",padding:"2px 6px",background:"transparent",color:"#D6A05C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Internal"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:w.created_at?new Date(w.created_at).toLocaleString():""}),((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.email)===w.user_email)&&e.jsx("button",{onClick:()=>N(w.id),style:{background:"none",border:"none",color:"rgba(255,255,255,.50)",cursor:"pointer",fontSize:"12px",padding:"0",opacity:.5},title:"Delete comment",children:""})]})]}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"13px",lineHeight:1.6,margin:0,whiteSpace:"pre-wrap"},children:w.content})]},w.id))}),b.length===0&&!m&&e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",fontStyle:"italic",margin:0},children:"No comments yet"})]}),i.notes&&e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Applicant Notes"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:i.notes})]})]}):e.jsx("div",{style:{color:"rgba(255,255,255,.50)"},children:"Loading..."})}function vs(){const t=Be(),{user:n}=pe(),[a,o]=x.useState([]),[i,r]=x.useState([]),[s,l]=x.useState(!1),[d,c]=x.useState(""),p=Ce(),[f,b]=x.useState({}),[j,m]=x.useState(Date.now()),v=()=>{q.get("/api/cat72/tests").then(S=>o(S.data)).catch(console.error),q.get("/api/envelo/monitoring/overview").then(S=>{const O=(S.data.sessions||[]).filter(k=>k.session_type==="cat72_test");r(O)}).catch(console.error)};x.useEffect(()=>{v();const S=setInterval(v,15e3),O=setInterval(()=>m(Date.now()),1e3);return()=>{clearInterval(S),clearInterval(O)}},[]);const g=async S=>{var O,k;if(await t({title:"Start Test",message:"Start this CAT-72 test? The 72-hour timer will begin."})){b(u=>({...u,[S]:"starting"}));try{await q.post(`/api/cat72/tests/${S}/start`),v()}catch(u){p.show("Failed to start test: "+(((k=(O=u.response)==null?void 0:O.data)==null?void 0:k.detail)||u.message),"error")}b(u=>({...u,[S]:null}))}},z=async S=>{var O,k;if(await t({title:"Stop Test",message:"Stop this CAT-72 test and evaluate results?"})){b(u=>({...u,[S]:"stopping"}));try{await q.post(`/api/cat72/tests/${S}/stop`),v()}catch(u){p.show("Failed to stop test: "+(((k=(O=u.response)==null?void 0:O.data)==null?void 0:k.detail)||u.message),"error")}b(u=>({...u,[S]:null}))}},I=async S=>{var O,k;if(await t({title:"Issue Certificate",message:"Issue ODDC certificate for this passed test?"})){b(u=>({...u,[S]:"issuing"}));try{const u=await q.post(`/api/certificates/issue/${S}`);p.show(`Certificate issued: ${u.data.certificate_number}`,"success"),v()}catch(u){p.show("Failed to issue certificate: "+(((k=(O=u.response)==null?void 0:O.data)==null?void 0:k.detail)||u.message),"error")}b(u=>({...u,[S]:null}))}},y=S=>{const O=Math.floor(S/3600),k=Math.floor(S%3600/60),u=Math.floor(S%60);return`${String(O).padStart(2,"0")}:${String(k).padStart(2,"0")}:${String(u).padStart(2,"0")}`},h=a.filter(S=>S.state==="running"),E=a.filter(S=>S.state==="scheduled"),M=a.filter(S=>S.state==="completed");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"Testing"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"CAT-72 Console"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:(n==null?void 0:n.role)==="admin"?"72-hour Convergence Authorization Tests  Auto-refreshes every 15s":"Monitor your 72-hour conformance test in real time"})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"16px"},children:[e.jsx("button",{onClick:()=>l(!1),style:{background:s?"transparent":"rgba(91,75,138,0.25)",border:"1px solid rgba(91,75,138,0.3)",color:s?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",padding:"6px 16px",fontFamily:"Consolas, monospace",fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",cursor:"pointer"},children:"Scheduled Tests"}),e.jsx("button",{onClick:()=>l(!0),style:{background:s?"rgba(91,75,138,0.25)":"transparent",border:"1px solid rgba(91,75,138,0.3)",color:s?"rgba(255,255,255,.94)":"rgba(255,255,255,.50)",padding:"6px 16px",fontFamily:"Consolas, monospace",fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",cursor:"pointer"},children:"Live Interlock Sessions"})]}),s?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",placeholder:"Search sessions...",value:d,onChange:S=>c(S.target.value),style:{background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",color:"rgba(255,255,255,.90)",padding:"6px 12px",fontFamily:"Consolas, monospace",fontSize:"11px",width:"200px",outline:"none",marginBottom:"12px"}}),e.jsx(ws,{sessions:i,search:d})]}):e.jsxs(e.Fragment,{children:[h.length>0&&e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:"#D6A05C",marginBottom:"12px"},children:" Live Tests"}),e.jsx("div",{className:"space-y-4",children:h.map(S=>{const O=S.duration_hours*3600,k=Math.min(100,Math.round(S.elapsed_seconds/O*100)),u=Math.max(0,O-S.elapsed_seconds);return e.jsxs(ne,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,fontSize:"16px",color:"rgba(255,255,255,.94)",marginBottom:"4px"},children:[S.organization_name,"  ",S.system_name]}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:["Test ID: ",S.test_id,"  Duration: ",S.duration_hours,"h"]})]}),(n==null?void 0:n.role)==="admin"&&e.jsx("button",{onClick:()=>z(S.test_id),disabled:f[S.test_id],className:"px-4 py-2 btn",children:f[S.test_id]==="stopping"?"...":"Stop & Evaluate"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"8px"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"#a896d6",letterSpacing:"2px"},children:y(S.elapsed_seconds)}),e.jsx("div",{style:{flex:1},children:e.jsx("div",{className:"w-full h-3 overflow-hidden",style:{background:"transparent"},children:e.jsx("div",{className:"h-full transition-all",style:{width:`${k}%`,background:k>=100?"#5CD685":"#5B4B8A"}})})}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",color:k>=100?"#5CD685":"rgba(255,255,255,.78)",fontWeight:500},children:[k,"%"]})]}),e.jsxs("div",{style:{display:"flex",gap:"24px"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:["Remaining: ",y(u)]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:["Telemetry: ",S.telemetry_count||0," events"]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:S.violations_count>0?"#D65C5C":"rgba(255,255,255,.50)"},children:["Violations: ",S.violations_count||0]})]})]},S.id)})})]}),E.length>0&&e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Scheduled"}),e.jsx("div",{className:"space-y-3",children:E.map(S=>e.jsxs("div",{style:{padding:"14px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,color:"rgba(255,255,255,.94)",marginBottom:"2px"},children:[S.organization_name,"  ",S.system_name]}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[S.test_id,"  ",S.duration_hours,"h test"]})]}),(n==null?void 0:n.role)==="admin"&&e.jsx("button",{onClick:()=>g(S.test_id),disabled:f[S.test_id],className:"px-4 py-2 btn",children:f[S.test_id]==="starting"?"...":"Start Test"})]},S.id))})]}),M.length>0&&e.jsxs(ne,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Completed"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Result"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:M.map(S=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{style:{fontWeight:500,color:"rgba(255,255,255,.94)"},children:[S.organization_name,"  ",S.system_name]}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:S.test_id})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:600,color:S.result==="PASS"?"#5CD685":"#D65C5C",padding:"4px 10px",background:S.result==="PASS"?"rgba(92,214,133,0.04)":"rgba(214,92,92,0.04)"},children:S.result})}),e.jsx("td",{className:"px-4 py-4",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"rgba(255,255,255,.78)"},children:y(S.elapsed_seconds)}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[(n==null?void 0:n.role)==="admin"&&S.result==="PASS"&&!S.certificate_issued&&e.jsx("button",{onClick:()=>I(S.test_id),disabled:f[S.test_id],className:"px-3 py-1 btn",children:f[S.test_id]==="issuing"?"...":"Issue Certificate"}),S.certificate_issued&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#5CD685",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px"},children:" Certified"}),e.jsx("a",{href:`${Et}/api/certificates/${S.certificate_number||S.test_id}/pdf`,target:"_blank",style:{marginLeft:"8px",padding:"2px 8px",background:"#5B4B8A",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",textDecoration:"none"},children:"PDF"})]})]})})]},S.id))})]})]})]}),!s&&a.length===0&&e.jsx(ne,{children:e.jsxs("div",{className:"text-center py-12",style:{color:"rgba(255,255,255,.50)"},children:[e.jsx("p",{style:{marginBottom:"8px"},children:(n==null?void 0:n.role)==="admin"?"No tests yet":"No active tests"}),e.jsx("p",{style:{fontSize:"13px"},children:(n==null?void 0:n.role)==="admin"?"Approve an application and schedule a CAT-72 test to get started.":"When your application is approved and a CAT-72 test is scheduled, you can monitor its progress here in real time."})]})})]})}function ws({sessions:t,search:n}){const a=t.filter(o=>{if(!n)return!0;const i=n.toLowerCase();return o.session_id.toLowerCase().includes(i)||(o.organization_name||"").toLowerCase().includes(i)||(o.system_name||"").toLowerCase().includes(i)});return a.length?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.map(o=>{const i=(o.pass_count||0)+(o.block_count||0),r=i>0?((o.pass_count||0)/i*100).toFixed(1):"0.0",s=o.is_online;return e.jsx("div",{style:{padding:"12px 16px",background:"rgba(91,75,138,0.08)",border:"1px solid rgba(91,75,138,0.15)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:s?"#5CD685":"rgba(255,255,255,.50)"},children:[" ",s?"ONLINE":"OFFLINE"]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.80)",marginLeft:"12px"},children:[o.organization_name||"Unknown","  ",o.system_name||o.session_id.slice(0,16)]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",color:"rgba(255,255,255,.35)",marginLeft:"8px"},children:[o.session_id.slice(0,12),"..."]})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:["Actions: ",i.toLocaleString()]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:parseFloat(r)>=98?"#5CD685":"#D6A35C"},children:["Pass: ",r,"%"]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:["Uptime: ",o.uptime_hours||0,"h"]})]})]})},o.session_id)})}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"rgba(255,255,255,.4)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"No active CAT-72 interlock sessions"})}function js(){const[t,n]=x.useState([]),[a,o]=x.useState(""),[i,r]=x.useState("active");x.useEffect(()=>{q.get("/api/certificates/").then(c=>n(c.data)).catch(console.error)},[]);const s=t.filter(c=>{if(i!=="all"){if(i==="active"&&!(c.state==="conformant"||c.state==="active"||c.state==="issued"))return!1;if(i!=="active"&&c.state!==i)return!1}if(a){const p=a.toLowerCase();if(!(c.certificate_number||"").toLowerCase().includes(p)&&!(c.organization_name||"").toLowerCase().includes(p)&&!(c.system_name||"").toLowerCase().includes(p))return!1}return!0}),l={all:t.length,active:t.filter(c=>c.state==="conformant"||c.state==="active"||c.state==="issued").length,suspended:t.filter(c=>c.state==="suspended").length,revoked:t.filter(c=>c.state==="revoked").length},d=[{key:"active",label:"Active"},{key:"suspended",label:"Suspended"},{key:"revoked",label:"Revoked"},{key:"all",label:"All Records"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"Records"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"Certificates"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:"Issued ODDC conformance determinations"})]}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"rgba(255,255,255,0.03)",padding:"4px",border:"1px solid rgba(255,255,255,.07)"},children:d.map(c=>e.jsxs("button",{onClick:()=>r(c.key),style:{flex:1,padding:"8px 16px",border:"none",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase",transition:"all 0.2s",background:i===c.key?"#5B4B8A":"transparent",color:i===c.key?"#fff":"rgba(255,255,255,.50)"},children:[c.label," ",l[c.key]>0?`(${l[c.key]})`:""]},c.key))}),e.jsx("input",{type:"text",placeholder:"Search cert, org, system...",value:a,onChange:c=>o(c.target.value),style:{background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",color:"rgba(255,255,255,.90)",padding:"6px 12px",fontFamily:"Consolas, monospace",fontSize:"11px",width:"200px",outline:"none",marginBottom:"-8px"}}),e.jsxs(ne,{children:[e.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{className:"w-full",style:{minWidth:"600px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Certificate #"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Expires"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:s.map(c=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("td",{className:"px-4 py-4",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"#a896d6"},children:c.certificate_number}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.94)"},children:c.system_name}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.78)"},children:c.organization_name}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1",style:{background:c.state==="conformant"?"rgba(92,214,133,0.04)":c.state==="suspended"?"rgba(214,160,92,0.04)":"rgba(214,92,92,0.04)",color:c.state==="conformant"?"#5CD685":c.state==="suspended"?"#D6A05C":"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:c.state})}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:c.expires_at?new Date(c.expires_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[c.state!=="revoked"&&c.state!=="suspended"?e.jsx("a",{href:`${Et}/api/certificates/${c.certificate_number}/pdf`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 transition-colors no-underline btn",children:"Download PDF"}):e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",letterSpacing:"1px",textTransform:"uppercase"},children:c.state==="revoked"?"Revoked":"Suspended"}),e.jsx(ae,{to:`/verify?cert=${c.certificate_number}`,className:"px-2 py-1 no-underline btn",children:"Verify"})]})})]},c.id))})]})}),s.length===0&&e.jsx("div",{className:"text-center py-12",style:{color:"rgba(255,255,255,.50)"},children:s.length===0?"No certificates issued":`No ${i==="all"?"":i+" "}certificates`})]})]})}var lt={},Ss=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Va={},_e={};let wn;const Cs=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];_e.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};_e.getSymbolTotalCodewords=function(n){return Cs[n]};_e.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n};_e.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');wn=n};_e.isKanjiModeEnabled=function(){return typeof wn<"u"};_e.toSJIS=function(n){return wn(n)};var Pt={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},t.from=function(o,i){if(t.isValid(o))return o;try{return n(o)}catch{return i}}})(Pt);function Ja(){this.buffer=[],this.length=0}Ja.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let a=0;a<n;a++)this.putBit((t>>>n-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var ks=Ja;function ct(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ct.prototype.set=function(t,n,a,o){const i=t*this.size+n;this.data[i]=a,o&&(this.reservedBit[i]=!0)};ct.prototype.get=function(t,n){return this.data[t*this.size+n]};ct.prototype.xor=function(t,n,a){this.data[t*this.size+n]^=a};ct.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]};var zs=ct,Ga={};(function(t){const n=_e.getSymbolSize;t.getRowColCoords=function(o){if(o===1)return[];const i=Math.floor(o/7)+2,r=n(o),s=r===145?26:Math.ceil((r-13)/(2*i-2))*2,l=[r-7];for(let d=1;d<i-1;d++)l[d]=l[d-1]-s;return l.push(6),l.reverse()},t.getPositions=function(o){const i=[],r=t.getRowColCoords(o),s=r.length;for(let l=0;l<s;l++)for(let d=0;d<s;d++)l===0&&d===0||l===0&&d===s-1||l===s-1&&d===0||i.push([r[l],r[d]]);return i}})(Ga);var Ka={};const As=_e.getSymbolSize,ea=7;Ka.getPositions=function(n){const a=As(n);return[[0,0],[a-ea,0],[0,a-ea]]};var Ya={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const r=i.size;let s=0,l=0,d=0,c=null,p=null;for(let f=0;f<r;f++){l=d=0,c=p=null;for(let b=0;b<r;b++){let j=i.get(f,b);j===c?l++:(l>=5&&(s+=n.N1+(l-5)),c=j,l=1),j=i.get(b,f),j===p?d++:(d>=5&&(s+=n.N1+(d-5)),p=j,d=1)}l>=5&&(s+=n.N1+(l-5)),d>=5&&(s+=n.N1+(d-5))}return s},t.getPenaltyN2=function(i){const r=i.size;let s=0;for(let l=0;l<r-1;l++)for(let d=0;d<r-1;d++){const c=i.get(l,d)+i.get(l,d+1)+i.get(l+1,d)+i.get(l+1,d+1);(c===4||c===0)&&s++}return s*n.N2},t.getPenaltyN3=function(i){const r=i.size;let s=0,l=0,d=0;for(let c=0;c<r;c++){l=d=0;for(let p=0;p<r;p++)l=l<<1&2047|i.get(c,p),p>=10&&(l===1488||l===93)&&s++,d=d<<1&2047|i.get(p,c),p>=10&&(d===1488||d===93)&&s++}return s*n.N3},t.getPenaltyN4=function(i){let r=0;const s=i.data.length;for(let d=0;d<s;d++)r+=i.data[d];return Math.abs(Math.ceil(r*100/s/5)-10)*n.N4};function a(o,i,r){switch(o){case t.Patterns.PATTERN000:return(i+r)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(i+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return i*r%2+i*r%3===0;case t.Patterns.PATTERN110:return(i*r%2+i*r%3)%2===0;case t.Patterns.PATTERN111:return(i*r%3+(i+r)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}t.applyMask=function(i,r){const s=r.size;for(let l=0;l<s;l++)for(let d=0;d<s;d++)r.isReserved(d,l)||r.xor(d,l,a(i,d,l))},t.getBestMask=function(i,r){const s=Object.keys(t.Patterns).length;let l=0,d=1/0;for(let c=0;c<s;c++){r(c),t.applyMask(c,i);const p=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(c,i),p<d&&(d=p,l=c)}return l}})(Ya);var Rt={};const Ae=Pt,mt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ut=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Rt.getBlocksCount=function(n,a){switch(a){case Ae.L:return mt[(n-1)*4+0];case Ae.M:return mt[(n-1)*4+1];case Ae.Q:return mt[(n-1)*4+2];case Ae.H:return mt[(n-1)*4+3];default:return}};Rt.getTotalCodewordsCount=function(n,a){switch(a){case Ae.L:return ut[(n-1)*4+0];case Ae.M:return ut[(n-1)*4+1];case Ae.Q:return ut[(n-1)*4+2];case Ae.H:return ut[(n-1)*4+3];default:return}};var Qa={},Ft={};const Xe=new Uint8Array(512),St=new Uint8Array(256);(function(){let n=1;for(let a=0;a<255;a++)Xe[a]=n,St[n]=a,n<<=1,n&256&&(n^=285);for(let a=255;a<512;a++)Xe[a]=Xe[a-255]})();Ft.log=function(n){if(n<1)throw new Error("log("+n+")");return St[n]};Ft.exp=function(n){return Xe[n]};Ft.mul=function(n,a){return n===0||a===0?0:Xe[St[n]+St[a]]};(function(t){const n=Ft;t.mul=function(o,i){const r=new Uint8Array(o.length+i.length-1);for(let s=0;s<o.length;s++)for(let l=0;l<i.length;l++)r[s+l]^=n.mul(o[s],i[l]);return r},t.mod=function(o,i){let r=new Uint8Array(o);for(;r.length-i.length>=0;){const s=r[0];for(let d=0;d<i.length;d++)r[d]^=n.mul(i[d],s);let l=0;for(;l<r.length&&r[l]===0;)l++;r=r.slice(l)}return r},t.generateECPolynomial=function(o){let i=new Uint8Array([1]);for(let r=0;r<o;r++)i=t.mul(i,new Uint8Array([1,n.exp(r)]));return i}})(Qa);const Xa=Qa;function jn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}jn.prototype.initialize=function(n){this.degree=n,this.genPoly=Xa.generateECPolynomial(this.degree)};jn.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(n.length+this.degree);a.set(n);const o=Xa.mod(a,this.genPoly),i=this.degree-o.length;if(i>0){const r=new Uint8Array(this.degree);return r.set(o,i),r}return o};var Ts=jn,Za={},Ie={},Sn={};Sn.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var je={};const ei="[0-9]+",Ns="[A-Z $%*+\\-./:]+";let nt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";nt=nt.replace(/u/g,"\\u");const Bs="(?:(?![A-Z0-9 $%*+\\-./:]|"+nt+`)(?:.|[\r
]))+`;je.KANJI=new RegExp(nt,"g");je.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");je.BYTE=new RegExp(Bs,"g");je.NUMERIC=new RegExp(ei,"g");je.ALPHANUMERIC=new RegExp(Ns,"g");const Is=new RegExp("^"+nt+"$"),Es=new RegExp("^"+ei+"$"),Ps=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");je.testKanji=function(n){return Is.test(n)};je.testNumeric=function(n){return Es.test(n)};je.testAlphanumeric=function(n){return Ps.test(n)};(function(t){const n=Sn,a=je;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(r,s){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!n.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?r.ccBits[0]:s<27?r.ccBits[1]:r.ccBits[2]},t.getBestModeForData=function(r){return a.testNumeric(r)?t.NUMERIC:a.testAlphanumeric(r)?t.ALPHANUMERIC:a.testKanji(r)?t.KANJI:t.BYTE},t.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},t.isValid=function(r){return r&&r.bit&&r.ccBits};function o(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(r,s){if(t.isValid(r))return r;try{return o(r)}catch{return s}}})(Ie);(function(t){const n=_e,a=Rt,o=Pt,i=Ie,r=Sn,s=7973,l=n.getBCHDigit(s);function d(b,j,m){for(let v=1;v<=40;v++)if(j<=t.getCapacity(v,m,b))return v}function c(b,j){return i.getCharCountIndicator(b,j)+4}function p(b,j){let m=0;return b.forEach(function(v){const g=c(v.mode,j);m+=g+v.getBitsLength()}),m}function f(b,j){for(let m=1;m<=40;m++)if(p(b,m)<=t.getCapacity(m,j,i.MIXED))return m}t.from=function(j,m){return r.isValid(j)?parseInt(j,10):m},t.getCapacity=function(j,m,v){if(!r.isValid(j))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=i.BYTE);const g=n.getSymbolTotalCodewords(j),z=a.getTotalCodewordsCount(j,m),I=(g-z)*8;if(v===i.MIXED)return I;const y=I-c(v,j);switch(v){case i.NUMERIC:return Math.floor(y/10*3);case i.ALPHANUMERIC:return Math.floor(y/11*2);case i.KANJI:return Math.floor(y/13);case i.BYTE:default:return Math.floor(y/8)}},t.getBestVersionForData=function(j,m){let v;const g=o.from(m,o.M);if(Array.isArray(j)){if(j.length>1)return f(j,g);if(j.length===0)return 1;v=j[0]}else v=j;return d(v.mode,v.getLength(),g)},t.getEncodedBits=function(j){if(!r.isValid(j)||j<7)throw new Error("Invalid QR Code version");let m=j<<12;for(;n.getBCHDigit(m)-l>=0;)m^=s<<n.getBCHDigit(m)-l;return j<<12|m}})(Za);var ti={};const on=_e,ni=1335,Rs=21522,ta=on.getBCHDigit(ni);ti.getEncodedBits=function(n,a){const o=n.bit<<3|a;let i=o<<10;for(;on.getBCHDigit(i)-ta>=0;)i^=ni<<on.getBCHDigit(i)-ta;return(o<<10|i)^Rs};var ai={};const Fs=Ie;function We(t){this.mode=Fs.NUMERIC,this.data=t.toString()}We.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};We.prototype.getLength=function(){return this.data.length};We.prototype.getBitsLength=function(){return We.getBitsLength(this.data.length)};We.prototype.write=function(n){let a,o,i;for(a=0;a+3<=this.data.length;a+=3)o=this.data.substr(a,3),i=parseInt(o,10),n.put(i,10);const r=this.data.length-a;r>0&&(o=this.data.substr(a),i=parseInt(o,10),n.put(i,r*3+1))};var Ms=We;const Ds=Ie,qt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function qe(t){this.mode=Ds.ALPHANUMERIC,this.data=t}qe.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};qe.prototype.getLength=function(){return this.data.length};qe.prototype.getBitsLength=function(){return qe.getBitsLength(this.data.length)};qe.prototype.write=function(n){let a;for(a=0;a+2<=this.data.length;a+=2){let o=qt.indexOf(this.data[a])*45;o+=qt.indexOf(this.data[a+1]),n.put(o,11)}this.data.length%2&&n.put(qt.indexOf(this.data[a]),6)};var Os=qe;const Ls=Ie;function He(t){this.mode=Ls.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}He.getBitsLength=function(n){return n*8};He.prototype.getLength=function(){return this.data.length};He.prototype.getBitsLength=function(){return He.getBitsLength(this.data.length)};He.prototype.write=function(t){for(let n=0,a=this.data.length;n<a;n++)t.put(this.data[n],8)};var Us=He;const Ws=Ie,qs=_e;function $e(t){this.mode=Ws.KANJI,this.data=t}$e.getBitsLength=function(n){return n*13};$e.prototype.getLength=function(){return this.data.length};$e.prototype.getBitsLength=function(){return $e.getBitsLength(this.data.length)};$e.prototype.write=function(t){let n;for(n=0;n<this.data.length;n++){let a=qs.toSJIS(this.data[n]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),t.put(a,13)}};var Hs=$e,ii={exports:{}};(function(t){var n={single_source_shortest_paths:function(a,o,i){var r={},s={};s[o]=0;var l=n.PriorityQueue.make();l.push(o,0);for(var d,c,p,f,b,j,m,v,g;!l.empty();){d=l.pop(),c=d.value,f=d.cost,b=a[c]||{};for(p in b)b.hasOwnProperty(p)&&(j=b[p],m=f+j,v=s[p],g=typeof s[p]>"u",(g||v>m)&&(s[p]=m,l.push(p,m),r[p]=c))}if(typeof i<"u"&&typeof s[i]>"u"){var z=["Could not find a path from ",o," to ",i,"."].join("");throw new Error(z)}return r},extract_shortest_path_from_predecessor_list:function(a,o){for(var i=[],r=o;r;)i.push(r),a[r],r=a[r];return i.reverse(),i},find_path:function(a,o,i){var r=n.single_source_shortest_paths(a,o,i);return n.extract_shortest_path_from_predecessor_list(r,i)},PriorityQueue:{make:function(a){var o=n.PriorityQueue,i={},r;a=a||{};for(r in o)o.hasOwnProperty(r)&&(i[r]=o[r]);return i.queue=[],i.sorter=a.sorter||o.default_sorter,i},default_sorter:function(a,o){return a.cost-o.cost},push:function(a,o){var i={value:a,cost:o};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=n})(ii);var $s=ii.exports;(function(t){const n=Ie,a=Ms,o=Os,i=Us,r=Hs,s=je,l=_e,d=$s;function c(z){return unescape(encodeURIComponent(z)).length}function p(z,I,y){const h=[];let E;for(;(E=z.exec(y))!==null;)h.push({data:E[0],index:E.index,mode:I,length:E[0].length});return h}function f(z){const I=p(s.NUMERIC,n.NUMERIC,z),y=p(s.ALPHANUMERIC,n.ALPHANUMERIC,z);let h,E;return l.isKanjiModeEnabled()?(h=p(s.BYTE,n.BYTE,z),E=p(s.KANJI,n.KANJI,z)):(h=p(s.BYTE_KANJI,n.BYTE,z),E=[]),I.concat(y,h,E).sort(function(S,O){return S.index-O.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function b(z,I){switch(I){case n.NUMERIC:return a.getBitsLength(z);case n.ALPHANUMERIC:return o.getBitsLength(z);case n.KANJI:return r.getBitsLength(z);case n.BYTE:return i.getBitsLength(z)}}function j(z){return z.reduce(function(I,y){const h=I.length-1>=0?I[I.length-1]:null;return h&&h.mode===y.mode?(I[I.length-1].data+=y.data,I):(I.push(y),I)},[])}function m(z){const I=[];for(let y=0;y<z.length;y++){const h=z[y];switch(h.mode){case n.NUMERIC:I.push([h,{data:h.data,mode:n.ALPHANUMERIC,length:h.length},{data:h.data,mode:n.BYTE,length:h.length}]);break;case n.ALPHANUMERIC:I.push([h,{data:h.data,mode:n.BYTE,length:h.length}]);break;case n.KANJI:I.push([h,{data:h.data,mode:n.BYTE,length:c(h.data)}]);break;case n.BYTE:I.push([{data:h.data,mode:n.BYTE,length:c(h.data)}])}}return I}function v(z,I){const y={},h={start:{}};let E=["start"];for(let M=0;M<z.length;M++){const S=z[M],O=[];for(let k=0;k<S.length;k++){const u=S[k],L=""+M+k;O.push(L),y[L]={node:u,lastCount:0},h[L]={};for(let H=0;H<E.length;H++){const F=E[H];y[F]&&y[F].node.mode===u.mode?(h[F][L]=b(y[F].lastCount+u.length,u.mode)-b(y[F].lastCount,u.mode),y[F].lastCount+=u.length):(y[F]&&(y[F].lastCount=u.length),h[F][L]=b(u.length,u.mode)+4+n.getCharCountIndicator(u.mode,I))}}E=O}for(let M=0;M<E.length;M++)h[E[M]].end=0;return{map:h,table:y}}function g(z,I){let y;const h=n.getBestModeForData(z);if(y=n.from(I,h),y!==n.BYTE&&y.bit<h.bit)throw new Error('"'+z+'" cannot be encoded with mode '+n.toString(y)+`.
 Suggested mode is: `+n.toString(h));switch(y===n.KANJI&&!l.isKanjiModeEnabled()&&(y=n.BYTE),y){case n.NUMERIC:return new a(z);case n.ALPHANUMERIC:return new o(z);case n.KANJI:return new r(z);case n.BYTE:return new i(z)}}t.fromArray=function(I){return I.reduce(function(y,h){return typeof h=="string"?y.push(g(h,null)):h.data&&y.push(g(h.data,h.mode)),y},[])},t.fromString=function(I,y){const h=f(I,l.isKanjiModeEnabled()),E=m(h),M=v(E,y),S=d.find_path(M.map,"start","end"),O=[];for(let k=1;k<S.length-1;k++)O.push(M.table[S[k]].node);return t.fromArray(j(O))},t.rawSplit=function(I){return t.fromArray(f(I,l.isKanjiModeEnabled()))}})(ai);const Mt=_e,Ht=Pt,Vs=ks,Js=zs,Gs=Ga,Ks=Ka,rn=Ya,sn=Rt,Ys=Ts,Ct=Za,Qs=ti,Xs=Ie,$t=ai;function Zs(t,n){const a=t.size,o=Ks.getPositions(n);for(let i=0;i<o.length;i++){const r=o[i][0],s=o[i][1];for(let l=-1;l<=7;l++)if(!(r+l<=-1||a<=r+l))for(let d=-1;d<=7;d++)s+d<=-1||a<=s+d||(l>=0&&l<=6&&(d===0||d===6)||d>=0&&d<=6&&(l===0||l===6)||l>=2&&l<=4&&d>=2&&d<=4?t.set(r+l,s+d,!0,!0):t.set(r+l,s+d,!1,!0))}}function el(t){const n=t.size;for(let a=8;a<n-8;a++){const o=a%2===0;t.set(a,6,o,!0),t.set(6,a,o,!0)}}function tl(t,n){const a=Gs.getPositions(n);for(let o=0;o<a.length;o++){const i=a[o][0],r=a[o][1];for(let s=-2;s<=2;s++)for(let l=-2;l<=2;l++)s===-2||s===2||l===-2||l===2||s===0&&l===0?t.set(i+s,r+l,!0,!0):t.set(i+s,r+l,!1,!0)}}function nl(t,n){const a=t.size,o=Ct.getEncodedBits(n);let i,r,s;for(let l=0;l<18;l++)i=Math.floor(l/3),r=l%3+a-8-3,s=(o>>l&1)===1,t.set(i,r,s,!0),t.set(r,i,s,!0)}function Vt(t,n,a){const o=t.size,i=Qs.getEncodedBits(n,a);let r,s;for(r=0;r<15;r++)s=(i>>r&1)===1,r<6?t.set(r,8,s,!0):r<8?t.set(r+1,8,s,!0):t.set(o-15+r,8,s,!0),r<8?t.set(8,o-r-1,s,!0):r<9?t.set(8,15-r-1+1,s,!0):t.set(8,15-r-1,s,!0);t.set(o-8,8,1,!0)}function al(t,n){const a=t.size;let o=-1,i=a-1,r=7,s=0;for(let l=a-1;l>0;l-=2)for(l===6&&l--;;){for(let d=0;d<2;d++)if(!t.isReserved(i,l-d)){let c=!1;s<n.length&&(c=(n[s]>>>r&1)===1),t.set(i,l-d,c),r--,r===-1&&(s++,r=7)}if(i+=o,i<0||a<=i){i-=o,o=-o;break}}}function il(t,n,a){const o=new Vs;a.forEach(function(d){o.put(d.mode.bit,4),o.put(d.getLength(),Xs.getCharCountIndicator(d.mode,t)),d.write(o)});const i=Mt.getSymbolTotalCodewords(t),r=sn.getTotalCodewordsCount(t,n),s=(i-r)*8;for(o.getLengthInBits()+4<=s&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const l=(s-o.getLengthInBits())/8;for(let d=0;d<l;d++)o.put(d%2?17:236,8);return ol(o,t,n)}function ol(t,n,a){const o=Mt.getSymbolTotalCodewords(n),i=sn.getTotalCodewordsCount(n,a),r=o-i,s=sn.getBlocksCount(n,a),l=o%s,d=s-l,c=Math.floor(o/s),p=Math.floor(r/s),f=p+1,b=c-p,j=new Ys(b);let m=0;const v=new Array(s),g=new Array(s);let z=0;const I=new Uint8Array(t.buffer);for(let S=0;S<s;S++){const O=S<d?p:f;v[S]=I.slice(m,m+O),g[S]=j.encode(v[S]),m+=O,z=Math.max(z,O)}const y=new Uint8Array(o);let h=0,E,M;for(E=0;E<z;E++)for(M=0;M<s;M++)E<v[M].length&&(y[h++]=v[M][E]);for(E=0;E<b;E++)for(M=0;M<s;M++)y[h++]=g[M][E];return y}function rl(t,n,a,o){let i;if(Array.isArray(t))i=$t.fromArray(t);else if(typeof t=="string"){let c=n;if(!c){const p=$t.rawSplit(t);c=Ct.getBestVersionForData(p,a)}i=$t.fromString(t,c||40)}else throw new Error("Invalid data");const r=Ct.getBestVersionForData(i,a);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=r;else if(n<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const s=il(n,a,i),l=Mt.getSymbolSize(n),d=new Js(l);return Zs(d,n),el(d),tl(d,n),Vt(d,a,0),n>=7&&nl(d,n),al(d,s),isNaN(o)&&(o=rn.getBestMask(d,Vt.bind(null,d,a))),rn.applyMask(o,d),Vt(d,a,o),{modules:d,version:n,errorCorrectionLevel:a,maskPattern:o,segments:i}}Va.create=function(n,a){if(typeof n>"u"||n==="")throw new Error("No input text");let o=Ht.M,i,r;return typeof a<"u"&&(o=Ht.from(a.errorCorrectionLevel,Ht.M),i=Ct.from(a.version),r=rn.from(a.maskPattern),a.toSJISFunc&&Mt.setToSJISFunction(a.toSJISFunc)),rl(n,i,o,r)};var oi={},Cn={};(function(t){function n(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let o=a.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+a);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(r){return[r,r]}))),o.length===6&&o.push("F","F");const i=parseInt(o.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+o.slice(0,6).join("")}}t.getOptions=function(o){o||(o={}),o.color||(o.color={});const i=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,r=o.width&&o.width>=21?o.width:void 0,s=o.scale||4;return{width:r,scale:r?4:s,margin:i,color:{dark:n(o.color.dark||"#000000ff"),light:n(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},t.getScale=function(o,i){return i.width&&i.width>=o+i.margin*2?i.width/(o+i.margin*2):i.scale},t.getImageWidth=function(o,i){const r=t.getScale(o,i);return Math.floor((o+i.margin*2)*r)},t.qrToImageData=function(o,i,r){const s=i.modules.size,l=i.modules.data,d=t.getScale(s,r),c=Math.floor((s+r.margin*2)*d),p=r.margin*d,f=[r.color.light,r.color.dark];for(let b=0;b<c;b++)for(let j=0;j<c;j++){let m=(b*c+j)*4,v=r.color.light;if(b>=p&&j>=p&&b<c-p&&j<c-p){const g=Math.floor((b-p)/d),z=Math.floor((j-p)/d);v=f[l[g*s+z]?1:0]}o[m++]=v.r,o[m++]=v.g,o[m++]=v.b,o[m]=v.a}}})(Cn);(function(t){const n=Cn;function a(i,r,s){i.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=s,r.width=s,r.style.height=s+"px",r.style.width=s+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(r,s,l){let d=l,c=s;typeof d>"u"&&(!s||!s.getContext)&&(d=s,s=void 0),s||(c=o()),d=n.getOptions(d);const p=n.getImageWidth(r.modules.size,d),f=c.getContext("2d"),b=f.createImageData(p,p);return n.qrToImageData(b.data,r,d),a(f,c,p),f.putImageData(b,0,0),c},t.renderToDataURL=function(r,s,l){let d=l;typeof d>"u"&&(!s||!s.getContext)&&(d=s,s=void 0),d||(d={});const c=t.render(r,s,d),p=d.type||"image/png",f=d.rendererOpts||{};return c.toDataURL(p,f.quality)}})(oi);var ri={};const sl=Cn;function na(t,n){const a=t.a/255,o=n+'="'+t.hex+'"';return a<1?o+" "+n+'-opacity="'+a.toFixed(2).slice(1)+'"':o}function Jt(t,n,a){let o=t+n;return typeof a<"u"&&(o+=" "+a),o}function ll(t,n,a){let o="",i=0,r=!1,s=0;for(let l=0;l<t.length;l++){const d=Math.floor(l%n),c=Math.floor(l/n);!d&&!r&&(r=!0),t[l]?(s++,l>0&&d>0&&t[l-1]||(o+=r?Jt("M",d+a,.5+c+a):Jt("m",i,0),i=0,r=!1),d+1<n&&t[l+1]||(o+=Jt("h",s),s=0)):i++}return o}ri.render=function(n,a,o){const i=sl.getOptions(a),r=n.modules.size,s=n.modules.data,l=r+i.margin*2,d=i.color.light.a?"<path "+na(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",c="<path "+na(i.color.dark,"stroke")+' d="'+ll(s,r,i.margin)+'"/>',p='viewBox="0 0 '+l+" "+l+'"',b='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+p+' shape-rendering="crispEdges">'+d+c+`</svg>
`;return typeof o=="function"&&o(null,b),b};const cl=Ss,ln=Va,si=oi,dl=ri;function kn(t,n,a,o,i){const r=[].slice.call(arguments,1),s=r.length,l=typeof r[s-1]=="function";if(!l&&!cl())throw new Error("Callback required as last argument");if(l){if(s<2)throw new Error("Too few arguments provided");s===2?(i=a,a=n,n=o=void 0):s===3&&(n.getContext&&typeof i>"u"?(i=o,o=void 0):(i=o,o=a,a=n,n=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(a=n,n=o=void 0):s===2&&!n.getContext&&(o=a,a=n,n=void 0),new Promise(function(d,c){try{const p=ln.create(a,o);d(t(p,n,o))}catch(p){c(p)}})}try{const d=ln.create(a,o);i(null,t(d,n,o))}catch(d){i(d)}}lt.create=ln.create;lt.toCanvas=kn.bind(null,si.render);lt.toDataURL=kn.bind(null,si.renderToDataURL);lt.toString=kn.bind(null,function(t,n,a){return dl.render(t,a)});function pl(){const[t,n]=x.useState("verify"),[a,o]=x.useState(""),[i,r]=x.useState([]),[s,l]=x.useState(null),[d,c]=x.useState("conformant"),[p,f]=x.useState(!1),[b,j]=x.useState(""),[m,v]=x.useState(null),[g,z]=x.useState(null),[I,y]=x.useState(!1),[h,E]=x.useState(""),[M,S]=x.useState(!1),[O,k]=x.useState(!1),[u,L]=x.useState(null),[H,F]=x.useState(!1),B="Consolas, 'IBM Plex Mono', monospace",D="Georgia, 'Source Serif 4', serif",N="rgba(255,255,255,.94)",J="rgba(255,255,255,.78)",$="rgba(255,255,255,.50)",K="#a896d6",C="#5CD685",Y="#D6A05C",te="#D65C5C",me=async A=>{try{const V=window.location.origin+"/verify?cert="+A,Q=await lt.toDataURL(V,{width:256,margin:2,color:{dark:"#5B4B8A",light:"#ffffff"},errorCorrectionLevel:"H"});L(Q)}catch(V){console.error("QR generation failed:",V)}},ce=()=>{if(!u)return;const A=document.createElement("a");A.href=u,A.download="sentinel-"+b+"-qr.png",document.body.appendChild(A),A.click(),document.body.removeChild(A)};x.useEffect(()=>{const V=new URLSearchParams(window.location.search).get("cert");V&&(j(V.toUpperCase()),setTimeout(()=>{w(V.toUpperCase())},300))},[]);const w=async A=>{const V=A||b;if(V.trim()){E(""),v(null),z(null),y(!1),S(!0);try{const Q=await q.get("/api/verify/"+V);v(Q.data),me(V);const X=new URL(window.location);X.searchParams.set("cert",V),window.history.replaceState({},"",X)}catch{E("Certificate not found")}S(!1)}},W=async()=>{if(g){y(!I);return}try{const A=await q.get("/api/verify/"+b+"/evidence");z(A.data),y(!0)}catch{console.error("Evidence fetch failed")}},_=()=>{const A=window.location.origin+"/verify?cert="+b;navigator.clipboard.writeText(A),k(!0),setTimeout(()=>k(!1),2e3)},R=async A=>{A.preventDefault(),await w()};fe.useEffect(()=>{t==="search"&&!p&&(q.get("/api/registry/stats").then(A=>l(A.data)).catch(console.error),q.get("/api/registry/search?status=conformant").then(A=>{r(A.data.results||[]),f(!0)}).catch(console.error))},[t]);const P=async A=>{if(A.preventDefault(),!!a.trim()){E(""),r([]),S(!0);try{const V=new URLSearchParams;a.trim()&&V.set("q",a.trim()),d&&V.set("status",d);const Q=await q.get("/api/registry/search?"+V.toString());r(Q.data.results||[]),(!Q.data.results||Q.data.results.length===0)&&E("No certificates found")}catch{E("Unable to connect to registry")}S(!1)}},U=({label:A,value:V,valueColor:Q,isMono:X})=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px",padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:[e.jsx("span",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$},children:A}),e.jsx("span",{style:{color:Q||N,fontSize:"13px",fontFamily:X?B:"inherit"},children:V})]});return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 16px",background:"radial-gradient(1200px 700px at 15% 10%, rgba(91,75,138,.10), transparent 55%), radial-gradient(900px 600px at 85% 80%, rgba(92,214,133,.04), transparent 55%), #2a2f3d"},children:[e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,backgroundImage:"linear-gradient(rgba(255,255,255,.015) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.015) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.25,maskImage:"radial-gradient(ellipse at center, black 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, black 20%, transparent 70%)"}}),e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,background:"radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,.2) 85%, rgba(0,0,0,.4) 100%)"}}),e.jsxs(ae,{to:"/dashboard",style:{position:"fixed",top:"24px",right:"32px",zIndex:20,color:$,fontFamily:B,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",textDecoration:"none",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(aa,{size:12})," Dashboard"]}),e.jsxs("div",{style:{width:"100%",maxWidth:"520px",position:"relative",zIndex:1},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"24px"},children:e.jsx("div",{style:{width:"24px",height:"24px",background:"#5B4B8A",border:"2px solid #9d8ccf",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{width:"8px",height:"8px",background:"#c4b8e8",borderRadius:"50%"}})})}),e.jsxs("h1",{style:{fontFamily:D,fontSize:"clamp(28px, 4vw, 44px)",fontWeight:200,letterSpacing:"-0.03em",lineHeight:1.1,margin:"0 0 8px",color:N,textAlign:"center"},children:["Certificate ",e.jsx("span",{style:{color:K,fontStyle:"italic"},children:"Verification"})]}),e.jsx("p",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$,textAlign:"center",marginTop:"12px"},children:"Sentinel Authority  ODDC Registry"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"32px"},children:["verify","search"].map(A=>e.jsx("button",{onClick:()=>n(A),className:"btn",style:t===A?{borderColor:"rgba(157,140,207,.4)",color:K}:{},children:A==="verify"?"Verify Certificate":"Search Registry"},A))}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.04)",margin:"32px 0"}}),t==="verify"&&e.jsxs("form",{onSubmit:R,children:[e.jsx("div",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$,marginBottom:"12px",textAlign:"center"},children:"Certificate Number"}),e.jsx("input",{type:"text",value:b,placeholder:"ODDC-2026-00001",onChange:A=>{j(A.target.value.toUpperCase()),E(""),v(null)},style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:N,fontFamily:B,fontSize:"16px",textAlign:"center",letterSpacing:"2px",padding:"14px 0",outline:"none"}}),e.jsx("div",{style:{marginTop:"24px"},children:e.jsx("button",{type:"submit",disabled:M||!b.trim(),className:"btn primary",style:{width:"100%",justifyContent:"center"},children:M?e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:12,style:{animation:"spin 1s linear infinite"}})," Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_t,{size:12})," Verify Certificate"]})})})]}),t==="search"&&e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"32px",marginBottom:"32px"},children:[{label:"Active",value:s.active_certificates,color:C},{label:"Orgs",value:s.certified_organizations,color:K},{label:"30 Days",value:s.issued_last_30_days,color:Y}].map(A=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:D,fontSize:"24px",fontWeight:200,color:A.color},children:A.value}),e.jsx("div",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$,marginTop:"4px"},children:A.label})]},A.label))}),e.jsxs("form",{onSubmit:P,children:[e.jsx("div",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$,marginBottom:"12px",textAlign:"center"},children:"Organization or System Name"}),e.jsx("input",{type:"text",value:a,placeholder:"Company name or system...",onChange:A=>{o(A.target.value),E("")},style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:N,fontFamily:B,fontSize:"16px",textAlign:"center",letterSpacing:"2px",padding:"14px 0",outline:"none"}}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:e.jsxs("select",{value:d,onChange:A=>c(A.target.value),style:{background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:$,fontFamily:B,fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",padding:"8px 24px 8px 0",outline:"none",appearance:"none",cursor:"pointer"},children:[e.jsx("option",{value:"conformant",children:"Conformant"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"revoked",children:"Revoked"})]})}),e.jsx("div",{style:{marginTop:"24px"},children:e.jsx("button",{type:"submit",disabled:M,className:"btn primary",style:{width:"100%",justifyContent:"center"},children:M?e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:12,style:{animation:"spin 1s linear infinite"}})," Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_t,{size:12})," Search Registry"]})})})]}),i.length>0&&e.jsxs("div",{style:{marginTop:"32px"},children:[e.jsxs("div",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$,marginBottom:"16px",textAlign:"center"},children:[i.length," certificate(s) found"]}),i.map(A=>e.jsxs("div",{onClick:()=>{j(A.certificate_number),n("verify"),setTimeout(()=>document.querySelector("form")&&document.querySelector("form").requestSubmit(),100)},style:{padding:"14px 0",borderBottom:"1px solid rgba(255,255,255,0.02)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:N,fontSize:"14px"},children:A.organization_name}),e.jsx("div",{style:{color:$,fontSize:"12px",marginTop:"2px"},children:A.system_name})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{color:K,fontFamily:B,fontSize:"10px"},children:A.certificate_number}),e.jsx("div",{style:{color:C,fontFamily:B,fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",marginTop:"2px"},children:A.state})]})]},A.certificate_number))]})]}),h&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px 0",borderTop:"1px solid rgba(255,255,255,0.02)",textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx(Oe,{size:14,style:{color:te}}),e.jsx("span",{style:{color:te,fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase"},children:"Not Found"})]}),e.jsx("p",{style:{color:J,fontSize:"13px"},children:h})]}),m&&(m.status==="NOT_FOUND"||m.state==="NOT_FOUND")&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px 0",borderTop:"1px solid rgba(255,255,255,0.02)",textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx(Oe,{size:14,style:{color:te}}),e.jsx("span",{style:{color:te,fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase"},children:"Certificate Not Found"})]}),e.jsxs("p",{style:{color:J,fontSize:"13px"},children:["No certificate exists with number: ",e.jsx("strong",{children:m.certificate_number})]})]}),m&&m.status!=="NOT_FOUND"&&m.state!=="NOT_FOUND"&&(()=>{const A=m.valid,V=(m.status||"").toUpperCase(),Q={CONFORMANT:{color:C,label:"CONFORMANT",icon:"Valid Certificate"},SUSPENDED:{color:Y,label:"SUSPENDED",icon:"Suspended"},REVOKED:{color:te,label:"REVOKED",icon:"Revoked"},EXPIRED:{color:te,label:"EXPIRED",icon:"Expired"}}[V]||{color:C,label:"CONFORMANT",icon:"Valid Certificate"};return e.jsxs("div",{style:{marginTop:"32px"},children:[e.jsxs("div",{style:{padding:"16px 0",borderTop:"1px solid rgba(255,255,255,0.04)",borderBottom:"1px solid rgba(255,255,255,0.04)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[A?e.jsx(pn,{size:14,style:{color:Q.color}}):e.jsx(Oe,{size:14,style:{color:Q.color}}),e.jsx("span",{style:{color:Q.color,fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase"},children:Q.icon})]}),e.jsxs("span",{className:"badge "+(V==="CONFORMANT"?"green":V==="SUSPENDED"?"amber":"red"),children:[e.jsx("span",{className:"s-dot",style:{background:Q.color}}),Q.label]})]}),m.message&&e.jsx("div",{style:{padding:"10px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:e.jsx("p",{style:{color:Q.color,fontSize:"12px",margin:0},children:m.message})}),e.jsxs("div",{style:{padding:"8px 0"},children:[e.jsx(U,{label:"Certificate",value:m.certificate_number,valueColor:Q.color,isMono:!0}),e.jsx(U,{label:"Organization",value:m.organization_name||"-"}),e.jsx(U,{label:"System",value:(m.system_name||"-")+(m.system_version?" v"+m.system_version:"")}),e.jsx(U,{label:"Issued",value:m.issued_at?new Date(m.issued_at).toLocaleDateString():"N/A"}),e.jsx(U,{label:"Expires",value:m.expires_at?new Date(m.expires_at).toLocaleDateString():"N/A",valueColor:V==="EXPIRED"?te:N}),m.convergence_score!=null&&e.jsx(U,{label:"Convergence",value:(m.convergence_score*100).toFixed(1)+"%",valueColor:m.convergence_score>=.95?C:Y,isMono:!0}),m.evidence_hash&&e.jsxs("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:[e.jsx("div",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$,marginBottom:"6px"},children:"Evidence Hash"}),e.jsx("div",{style:{fontFamily:B,fontSize:"10px",color:$,wordBreak:"break-all",lineHeight:1.5},children:m.evidence_hash})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"20px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:_,className:"btn",children:O?" Copied":" Share Link"}),e.jsx("button",{onClick:()=>F(!H),className:"btn",style:H?{borderColor:"rgba(157,140,207,.4)",color:K}:{},children:H?" Hide QR":" QR Code"}),A&&e.jsxs("a",{href:Et+"/api/certificates/"+b+"/pdf",target:"_blank",rel:"noopener noreferrer",className:"btn",children:[e.jsx(yt,{size:10})," PDF"]}),A&&e.jsx("button",{onClick:W,className:"btn",children:I?" Hide Evidence":" Evidence"})]}),H&&u&&e.jsxs("div",{style:{marginTop:"24px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.02)",textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$,marginBottom:"16px"},children:"Verification QR Code"}),e.jsx("div",{style:{display:"inline-block",padding:"12px",background:"#fff"},children:e.jsx("img",{src:u,alt:"QR Code",style:{width:"180px",height:"180px",display:"block"}})}),e.jsx("div",{style:{marginTop:"12px"},children:e.jsxs("button",{onClick:ce,className:"btn",children:[e.jsx(yt,{size:10})," Download PNG"]})}),e.jsxs("p",{style:{fontSize:"10px",color:$,marginTop:"10px",fontFamily:B,letterSpacing:"1px"},children:["Scan to verify ",b]})]}),I&&g&&e.jsxs("div",{style:{marginTop:"24px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.02)"},children:[e.jsx("div",{style:{fontFamily:B,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:$,marginBottom:"16px"},children:"Evidence Chain"}),e.jsx(U,{label:"Hash (SHA-256)",value:g.evidence_hash||"-",valueColor:K,isMono:!0}),e.jsx(U,{label:"Convergence",value:g.convergence_score?(g.convergence_score*100).toFixed(2)+"%":"-",valueColor:C,isMono:!0}),g.odd_scope&&g.odd_scope.environment_type&&e.jsx(U,{label:"ODD Environment",value:g.odd_scope.environment_type}),g.verification_instructions&&e.jsx("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:e.jsx("p",{style:{fontSize:"11px",color:$,lineHeight:1.6,whiteSpace:"pre-line",margin:0},children:g.verification_instructions})})]})]})})()]})]})}function ml(){const{user:t,logout:n}=pe();return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#2a2f3d",padding:"20px"},children:e.jsxs("div",{style:{maxWidth:"min(500px, 90vw)",textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(245,158,11,0.1)",border:"2px solid rgba(245,158,11,0.3)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:e.jsx(ia,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,style:{width:"36px",height:"36px",color:"#f59e0b"}})}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:"#f59e0b",marginBottom:"12px"},children:"APPLICATION UNDER REVIEW"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"rgba(255,255,255,.94)",margin:"0 0 16px"},children:"Welcome to Sentinel Authority"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"15px",lineHeight:"1.6",marginBottom:"32px"},children:"Your account is being reviewed by our team. You will receive full portal access once approved. This typically takes 1-2 business days."}),e.jsxs("div",{style:{padding:"20px",border:"1px solid rgba(255,255,255,.07)",background:"rgba(255,255,255,0.02)",marginBottom:"24px",textAlign:"left"},children:[e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",marginBottom:"8px"},children:"Registered as:"}),e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontWeight:500},children:t==null?void 0:t.full_name}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px"},children:t==null?void 0:t.email})]}),e.jsxs("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",marginBottom:"24px"},children:["Questions? Contact ",e.jsx("a",{href:"mailto:info@sentinelauthority.org",style:{color:"#a896d6"},children:"info@sentinelauthority.org"})]}),e.jsx("button",{onClick:n,style:{padding:"10px 24px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Sign Out"})]})})}function ul(){const{user:t}=pe(),[n,a]=x.useState([]),[o,i]=x.useState(!0);x.useEffect(()=>{q.get("/api/documents/").then(s=>{a(Array.isArray(s.data)?s.data:[]),i(!1)}).catch(()=>i(!1))},[]);const r=async(s,l)=>{try{const d=await q.get("/api/documents/"+s+"/download",{responseType:"blob"}),c=window.URL.createObjectURL(d.data),p=document.createElement("a");p.href=c,p.download=l.replace(/\s+/g,"_")+".pdf",document.body.appendChild(p),p.click(),p.remove(),window.URL.revokeObjectURL(c)}catch(d){console.error("Download error:",d)}};return e.jsxs("div",{style:{padding:"32px",maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"RESOURCES"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"rgba(255,255,255,.94)",margin:0},children:"Documents & Guides"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",marginTop:"8px",fontSize:"14px"},children:"Reference materials for the ODDC certification process."})]}),o?e.jsx("div",{style:{color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:"Loading documents..."}):n.length===0?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",border:"1px solid rgba(255,255,255,.07)",background:"#2a2f3d",color:"rgba(255,255,255,.50)"},children:"No documents available."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n.map(s=>e.jsxs("div",{style:{padding:"24px",border:"1px solid rgba(255,255,255,.07)",background:"#2a2f3d",display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#5B4B8A22",border:"1px solid #5B4B8A44",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(oa,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,style:{width:"22px",height:"22px",color:"#a896d6"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,color:"rgba(255,255,255,.94)",fontSize:"15px",marginBottom:"4px"},children:s.title}),e.jsx("div",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",lineHeight:"1.4"},children:s.description}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"6px",letterSpacing:"1px",textTransform:"uppercase"},children:"PDF  v"+s.version})]}),e.jsx("button",{onClick:()=>r(s.id,s.title),style:{padding:"10px 20px",background:"#5B4B8A",border:"1px solid #a896d6",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer",flexShrink:0},children:"Download"})]},s.id))}),t&&t.role==="admin"&&e.jsx("div",{style:{marginTop:"40px",padding:"20px",border:"1px dashed rgba(255,255,255,.07)",color:"rgba(255,255,255,.50)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"ADMIN: To add documents, place PDFs in backend/static/documents/ and register them in documents.py"})]})}function Dt({label:t,title:n,description:a,action:o}){return e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[t&&e.jsxs("p",{style:{fontFamily:ee.mono,fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:ee.purpleBright,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:ee.purpleBright}}),t]}),e.jsx("h1",{style:{fontFamily:ee.serif,fontSize:"clamp(22px, 5vw, 32px)",fontWeight:"normal",margin:0,letterSpacing:"-0.02em"},children:n}),a&&e.jsx("p",{style:{color:ee.textSecondary,marginTop:"8px",fontSize:"14px",lineHeight:1.6},children:a})]}),o]})})}function gl(){var ce;const[t,n]=x.useState(null),[a,o]=x.useState([]),[i,r]=x.useState(null),[s,l]=x.useState([]),[d,c]=x.useState(!0),[p,f]=x.useState(!0),[b,j]=x.useState(!1),[m,v]=x.useState(""),[g,z]=x.useState(!1),[I,y]=x.useState(""),[h,E]=x.useState(1),[M,S]=x.useState(1),[O,k]=x.useState("last_activity"),[u,L]=x.useState("desc"),H=25,[F,B]=x.useState(!0),{user:D}=pe(),N=Ce(),J=Be(),$=async()=>{try{const[w,W]=await Promise.all([q.get(`/api/envelo/monitoring/overview?page=${h}&per_page=${H}&sort=${O}&order=${u}&session_type=production`),q.get("/api/envelo/monitoring/alerts")]);n(w.data),o(W.data.alerts||[])}catch(w){console.error("Failed to fetch monitoring data:",w)}finally{c(!1)}};x.useEffect(()=>{if($(),p){const w=setInterval($,1e4);return()=>clearInterval(w)}},[p,h,O,u]);const K=async w=>{try{const W=await q.get(`/api/envelo/monitoring/session/${w}/timeline?hours=24`);l(W.data.timeline||[])}catch(W){console.error("Failed to fetch timeline:",W)}};x.useEffect(()=>{i&&K(i.session_id)},[i]);const C=()=>{const w=me.map(A=>{var X;const V=(A.pass_count||0)+(A.block_count||0),Q=V>0?(A.pass_count/V*100).toFixed(2):"0.00";return{status:A.is_online?"Online":A.status==="ended"?"Ended":"Offline",organization:A.organization_name||"",system_name:A.system_name||"",certificate:A.certificate_id||"",session_id:A.session_id||"",started_at:A.started_at||"",ended_at:A.ended_at||"",uptime_hours:((X=A.uptime_hours)==null?void 0:X.toFixed(2))||"0",pass_count:A.pass_count||0,block_count:A.block_count||0,total_actions:V,pass_rate:Q+"%",agent_version:A.agent_version||"",last_activity:A.last_activity||""}});if(w.length===0){N.show("No sessions to export","warning");return}const W=Object.keys(w[0]),_=[W.join(","),...w.map(A=>W.map(V=>{const Q=String(A[V]).replace(/"/g,'""');return Q.includes(",")||Q.includes('"')||Q.includes(`
`)?`"${Q}"`:Q}).join(","))].join(`
`),R=new Blob([_],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(R),U=document.createElement("a");U.href=P,U.download=`envelo-sessions-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(P)};if(d)return e.jsxs("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center"},children:[e.jsx(Le,{size:24,style:{animation:"spin 1s linear infinite",color:"#a896d6"}}),e.jsx("p",{style:{marginTop:"16px",color:"rgba(255,255,255,.78)"},children:"Loading monitoring data..."})]});const Y=(t==null?void 0:t.summary)||{},te=(t==null?void 0:t.sessions)||[],me=te.filter(w=>{if((w.session_type||"production")!=="production")return!1;if(I){const W=I.toLowerCase();if(!(w.session_id||"").toLowerCase().includes(W)&&!(w.certificate_id||"").toLowerCase().includes(W)&&!(w.organization_name||"").toLowerCase().includes(W)&&!(w.system_name||"").toLowerCase().includes(W))return!1}return!(m&&w.organization_name!==m||g&&!w.is_online||F&&(w.status==="ended"||w.status==="completed"||w.status==="disconnected"))});return e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"sa-page-title",style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:300,margin:0},children:"System Monitoring"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"4px",fontSize:"14px"},children:(D==null?void 0:D.role)==="admin"?"Real-time ENVELO Interlock status and telemetry":"Track your certified systems' compliance status"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>f(!p),className:"btn",style:{padding:"6px 12px",color:p?"var(--accent-green)":"var(--text-tertiary)",borderColor:p?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Auto-refresh ",p?"ON":"OFF"]}),e.jsxs("button",{onClick:async()=>{j(!0),await $(),setTimeout(()=>j(!1),600)},className:"btn",children:[e.jsx(Le,{size:14,style:b?{animation:"spin 1s linear infinite"}:{}})," ",b?"Refreshing...":"Refresh"]}),(D==null?void 0:D.role)==="admin"&&e.jsxs("button",{onClick:C,className:"btn",children:[e.jsx(yt,{size:14})," Export CSV"]})]})]}),a.length>0&&e.jsxs("div",{style:{background:"rgba(214, 92, 92, 0.1)",border:"1px solid rgba(255,255,255,.10)",padding:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(Oe,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:18,style:{color:"#D65C5C"}}),e.jsxs("span",{style:{fontWeight:500,color:"#D65C5C"},children:[a.length," Active Alert",a.length>1?"s":""]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.map((w,W)=>{var _;return e.jsxs("div",{onClick:()=>{const R=te.find(P=>P.session_id===w.session_id);R&&r(R)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",background:"transparent",padding:"10px 14px",cursor:"pointer",transition:"background .15s"},onMouseEnter:R=>R.currentTarget.style.background="rgba(214,92,92,0.08)",onMouseLeave:R=>R.currentTarget.style.background="transparent",children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:w.severity==="critical"?"#D65C5C":"#D6A05C",marginRight:"12px"},children:w.severity}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)"},children:w.message})]}),e.jsxs("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:[(_=w.session_id)==null?void 0:_.slice(0,8),"..."]})]},W)})})]}),(()=>{var V,Q,X;const w=te.filter(se=>se.is_online).length,W=te.filter(se=>!se.is_online&&se.status!=="ended").length,_=w+W,R=_>0?w/_*100:0,P={padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.04)"},U={fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"2px",color:"rgba(255,255,255,.50)",marginBottom:"8px"},A={fontSize:"12px",color:"rgba(255,255,255,.78)",marginTop:"4px"};return e.jsxs("div",{style:{marginBottom:"32px"},children:[_>0&&e.jsxs("div",{style:{marginBottom:"20px",padding:"16px 20px",...P},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"10px"},children:[e.jsx("div",{style:U,children:"Fleet Health"}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:R>=90?"#5CD685":R>=70?"#D6A05C":"#D65C5C",fontWeight:500},children:[R.toFixed(0),"% Online"]})]}),e.jsxs("div",{style:{height:"8px",background:"transparent",overflow:"hidden",display:"flex"},children:[w>0&&e.jsx("div",{style:{width:w/_*100+"%",background:"#5CD685",transition:"width 0.5s"}}),W>0&&e.jsx("div",{style:{width:W/_*100+"%",background:"#D65C5C",transition:"width 0.5s"}})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"8px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#5CD685",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#5CD685",display:"inline-block"}})," ",w," online"]}),e.jsxs("span",{style:{fontSize:"11px",color:"#D65C5C",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#D65C5C",display:"inline-block"}})," ",W," offline"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:P,children:[e.jsx("div",{style:U,children:(D==null?void 0:D.role)==="admin"?"Active Sessions":"Active Systems"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:"#5CD685"},children:Y.active||0}),e.jsxs("div",{style:A,children:[Y.offline||0," offline"]})]}),e.jsxs("div",{style:P,children:[e.jsx("div",{style:U,children:"Total Actions"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:"rgba(255,255,255,.94)"},children:(Y.total_actions||0).toLocaleString()}),e.jsxs("div",{style:A,children:[((V=Y.total_pass)==null?void 0:V.toLocaleString())||0," passed, ",((Q=Y.total_block)==null?void 0:Q.toLocaleString())||0," blocked"]})]}),e.jsxs("div",{style:P,children:[e.jsx("div",{style:U,children:"Pass Rate"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:300,color:Y.pass_rate>=99?"#5CD685":Y.pass_rate>=95?"#D6A05C":"#D65C5C"},children:[((X=Y.pass_rate)==null?void 0:X.toFixed(1))||0,"%"]}),e.jsx("div",{style:A,children:"enforcement success"})]}),(D==null?void 0:D.role)==="admin"&&e.jsxs("div",{style:P,children:[e.jsx("div",{style:U,children:"Organizations"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:"#a896d6"},children:[...new Set(te.map(se=>se.organization_name).filter(Boolean))].length}),e.jsxs("div",{style:A,children:[[...new Set(te.map(se=>se.system_name).filter(Boolean))].length," unique systems"]})]})]})]})})(),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:(D==null?void 0:D.role)==="admin"?"Interlock Sessions":"System Monitoring"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("input",{type:"text",placeholder:"Search session, system...",value:I,onChange:w=>{y(w.target.value),E(1)},style:{background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",color:"rgba(255,255,255,.90)",padding:"6px 12px",fontFamily:"Consolas, monospace",fontSize:"11px",width:"200px",outline:"none"}}),(D==null?void 0:D.role)==="admin"&&e.jsxs("select",{value:m,onChange:w=>v(w.target.value),style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"6px 10px",color:"rgba(255,255,255,.94)",fontSize:"12px"},children:[e.jsx("option",{value:"",children:"All Customers"}),[...new Set(te.map(w=>w.organization_name).filter(Boolean))].map(w=>e.jsx("option",{value:w,children:w},w))]}),e.jsxs("button",{onClick:()=>B(!F),className:"btn",style:{padding:"4px 10px",color:F?"var(--accent-green)":"var(--text-tertiary)",borderColor:F?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Hide ended ",F?"ON":"OFF"]}),e.jsxs("button",{onClick:()=>z(!g),className:"btn",style:{padding:"4px 10px",color:g?"var(--accent-green)":"var(--text-tertiary)",borderColor:g?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Online only ",g?"ON":"OFF"]})]})]}),me.length===0?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.78)"},children:(D==null?void 0:D.role)==="admin"?"No ENVELO sessions found. Deploy an Interlock to begin monitoring.":"No active systems. Once your system is ODDC certified and running the ENVELO Interlock, real-time monitoring data will appear here."}):e.jsx("div",{className:"table-scroll",style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"transparent"},children:(()=>{const w={padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},W={...w,textAlign:"right"};return e.jsxs(e.Fragment,{children:[e.jsx("th",{style:w,children:"Status"}),e.jsx("th",{style:w,children:"Organization"}),e.jsx("th",{style:w,children:"System / Certificate"}),e.jsx("th",{style:w,children:"Session"}),e.jsx("th",{style:w,children:"Uptime"}),e.jsx("th",{style:W,children:"Actions"}),e.jsx("th",{style:W,children:"Pass Rate"}),e.jsx("th",{style:w,children:"Last Activity"})]})})()})}),e.jsx("tbody",{children:me.map(w=>{var P,U;const W=w.pass_count+w.block_count,_=W>0?w.pass_count/W*100:0,R=(i==null?void 0:i.id)===w.id;return e.jsxs("tr",{onClick:()=>r(R?null:w),style:{borderBottom:"1px solid rgba(255,255,255,.07)",cursor:"pointer",background:R?"rgba(91, 75, 138, 0.15)":"transparent",transition:"background 0.15s"},onMouseEnter:A=>{R||(A.currentTarget.style.background="rgba(255,255,255,0.03)")},onMouseLeave:A=>{R||(A.currentTarget.style.background="transparent")},children:[e.jsx("td",{style:{padding:"14px 16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:w.is_online?"#5CD685":w.status==="ended"?"rgba(255,255,255,.50)":"#D65C5C",boxShadow:w.is_online?"0 0 8px #5CD685":"none"}}),e.jsx("span",{style:{fontSize:"11px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:w.is_online?"#5CD685":w.status==="ended"?"rgba(255,255,255,.50)":"#D65C5C"},children:w.is_online?"Online":w.status==="ended"?"Ended":"Offline"})]})}),e.jsx("td",{style:{padding:"14px 16px"},children:e.jsx("div",{style:{fontSize:"13px",color:"rgba(255,255,255,.94)",fontWeight:500},children:w.organization_name||"Unknown"})}),e.jsxs("td",{style:{padding:"14px 16px"},children:[e.jsx("div",{style:{fontSize:"13px",color:"rgba(255,255,255,.94)"},children:w.system_name||"-"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:w.certificate_id||"-"})]}),e.jsxs("td",{style:{padding:"14px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[(P=w.session_id)==null?void 0:P.slice(0,12),"..."]}),e.jsxs("td",{style:{padding:"14px 16px",color:"rgba(255,255,255,.78)",fontSize:"13px"},children:[(U=w.uptime_hours)==null?void 0:U.toFixed(1),"h"]}),e.jsx("td",{style:{padding:"14px 16px",textAlign:"right",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:W.toLocaleString()}),e.jsx("td",{style:{padding:"14px 16px",textAlign:"right"},children:e.jsxs("span",{style:{color:_>=99?"#5CD685":_>=95?"#D6A05C":"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:[_.toFixed(1),"%"]})}),e.jsx("td",{style:{padding:"14px 16px",color:"rgba(255,255,255,.50)",fontSize:"12px"},children:w.last_activity?new Date(w.last_activity).toLocaleString():"-"})]},w.id)})})]})})]}),i&&e.jsxs("div",{style:{marginTop:"24px",background:"rgba(255,255,255,.03)",border:"1px solid rgba(255,255,255,.07)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{className:"hud-label",style:{marginBottom:"16px"},children:["Session Detail: ",i.session_id]}),e.jsx("button",{onClick:()=>r(null),style:{background:"none",border:"none",color:"rgba(255,255,255,.50)",cursor:"pointer",fontSize:"18px"},children:""})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:400,color:"rgba(255,255,255,.94)"},children:i.organization_name||"Unknown Organization"}),e.jsxs("p",{style:{margin:0,fontSize:"13px",color:"rgba(255,255,255,.78)"},children:[i.system_name||"Unknown System","  ",i.certificate_id||"No certificate"]}),e.jsxs("p",{style:{margin:"4px 0 0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:["Interlock v",i.agent_version||"1.0.0","  Session ",i.session_id]})]}),i.is_online&&e.jsx("button",{onClick:async()=>{if(await J({title:"End Session",message:"Force-end this session?",danger:!0}))try{await q.post("/api/envelo/sessions/"+i.session_id+"/end",{ended_at:new Date().toISOString(),final_stats:{pass_count:i.pass_count,block_count:i.block_count}}),r(null),$()}catch(w){N.show("Failed: "+w.message,"error")}},className:"btn",children:"Force End Session"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Started"}),e.jsx("div",{style:{color:"rgba(255,255,255,.94)",fontSize:"13px"},children:i.started_at?new Date(i.started_at).toLocaleString():"-"})]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Uptime"}),e.jsxs("div",{style:{color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:[((ce=i.uptime_hours)==null?void 0:ce.toFixed(1))||"0","h"]})]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Passed"}),e.jsx("div",{style:{color:"#5CD685",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:(i.pass_count||0).toLocaleString()})]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Blocked"}),e.jsx("div",{style:{color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:(i.block_count||0).toLocaleString()})]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Pass Rate"}),(()=>{const w=(i.pass_count||0)+(i.block_count||0),W=w>0?i.pass_count/w*100:0;return e.jsxs("div",{style:{color:W>=99?"#5CD685":W>=95?"#D6A05C":"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:[W.toFixed(1),"%"]})})()]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Certificate"}),e.jsx("div",{style:{color:"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:i.certificate_id||"-"})]})]}),(()=>{const w=(i.pass_count||0)+(i.block_count||0);if(w===0)return null;const W=i.pass_count/w*100;return e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Enforcement Distribution"}),e.jsxs("div",{style:{height:"12px",background:"transparent",overflow:"hidden",display:"flex"},children:[e.jsx("div",{style:{width:W+"%",background:"#5CD685",transition:"width 0.5s"}}),e.jsx("div",{style:{width:100-W+"%",background:"#D65C5C",transition:"width 0.5s"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginTop:"4px",fontSize:"11px"},children:[e.jsxs("span",{style:{color:"#5CD685"},children:["Pass: ",W.toFixed(1),"%"]}),e.jsxs("span",{style:{color:"#D65C5C"},children:["Block: ",(100-W).toFixed(1),"%"]})]})]})})(),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:async()=>{try{const W=(D==null?void 0:D.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",R=(await q.get(W+i.session_id+"/telemetry")).data.records||[];if(R.length===0){N.show("No telemetry data yet","info");return}const P=["timestamp","action_id","action_type","result","execution_time_ms"],U=[P.join(","),...R.map(Q=>P.map(X=>JSON.stringify(Q[X]??"")).join(","))].join(`
`),A=new Blob([U],{type:"text/csv"}),V=document.createElement("a");V.href=URL.createObjectURL(A),V.download=`telemetry-${i.session_id}.csv`,V.click()}catch{N.show("Failed to download telemetry","error")}},className:"btn",children:" Telemetry CSV"}),e.jsx("button",{onClick:async()=>{try{const W=(D==null?void 0:D.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",R=(await q.get(W+i.session_id+"/violations")).data.violations||[];if(R.length===0){N.show("No violations recorded","info");return}const P=["timestamp","boundary_name","violation_message"],U=[P.join(","),...R.map(Q=>P.map(X=>JSON.stringify(Q[X]??"")).join(","))].join(`
`),A=new Blob([U],{type:"text/csv"}),V=document.createElement("a");V.href=URL.createObjectURL(A),V.download=`violations-${i.session_id}.csv`,V.click()}catch{N.show("Failed to download violations","error")}},className:"btn",children:" Violations CSV"}),e.jsx("button",{onClick:async()=>{try{const W=(D==null?void 0:D.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",_=await q.get(W+i.session_id+"/report",{responseType:"blob"}),R=new Blob([_.data],{type:"application/pdf"}),P=document.createElement("a");P.href=URL.createObjectURL(R),P.download=`CAT72-Report-${i.session_id}.pdf`,P.click()}catch{N.show("Failed to download report","error")}},className:"btn",children:" CAT-72 Report PDF"})]}),s.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"12px"},children:"24-Hour Activity"}),e.jsx("div",{style:{display:"flex",gap:"2px",height:"60px",alignItems:"flex-end"},children:s.map((w,W)=>{const _=Math.max(...s.map(U=>U.total),1),R=w.total/_*100,P=w.total>0?w.pass/w.total:1;return e.jsx("div",{style:{flex:1,height:`${Math.max(R,2)}%`,background:P>=.99?"#5CD685":P>=.95?"#D6A05C":"#D65C5C",opacity:.8},title:`${new Date(w.hour).toLocaleTimeString()}: ${w.total} actions (${w.pass} pass, ${w.block} block)`},W)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginTop:"4px",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:[e.jsx("span",{children:"24h ago"}),e.jsx("span",{children:"Now"})]})]})]})]})]})}function xl(){var B,D;const t=Be(),n=Ce(),[a,o]=x.useState([]),[i,r]=x.useState(!0),[s,l]=x.useState(""),[d,c]=x.useState(""),[p,f]=x.useState(!1),[b,j]=x.useState(!1),[m,v]=x.useState(null),[g,z]=x.useState({email:"",full_name:"",company:"",role:"applicant"}),[I,y]=x.useState(!1);x.useEffect(()=>{h()},[]);const h=async()=>{try{const N=await q.get("/api/users/");o(N.data||[])}catch(N){console.error("Users API:",N),o([])}r(!1)},E=a.filter(N=>{if(s==="admin"&&N.role!=="admin"||s==="applicant"&&N.role!=="applicant"||s==="pending"&&N.role!=="pending"||s==="inactive"&&N.is_active!==!1)return!1;if(d){const J=d.toLowerCase();if(!(N.email||"").toLowerCase().includes(J)&&!(N.full_name||"").toLowerCase().includes(J)&&!(N.company||"").toLowerCase().includes(J))return!1}return!0}),M={total:a.length,admins:a.filter(N=>N.role==="admin").length,applicants:a.filter(N=>N.role==="applicant").length,pending:a.filter(N=>N.role==="pending").length,inactive:a.filter(N=>N.is_active===!1).length},S=async()=>{var N,J;if(!g.email||!g.full_name){n.show("Email and full name are required","warning");return}y(!0);try{const $=Math.random().toString(36).slice(-8)+"A1!";await q.post("/api/users/",{...g,password:$}),n.show("User created  share credentials securely","success"),f(!1),z({email:"",full_name:"",company:"",role:"applicant"}),h()}catch($){n.show("Failed to create user: "+(((J=(N=$.response)==null?void 0:N.data)==null?void 0:J.detail)||$.message),"error")}y(!1)},O=async(N,J)=>{var $,K;if(await t({title:"Change Role",message:"Change user role to "+J.toUpperCase()+"?"}))try{await q.patch("/api/users/"+N,{role:J}),h(),j(!1)}catch(C){n.show("Failed to update role: "+(((K=($=C.response)==null?void 0:$.data)==null?void 0:K.detail)||C.message),"error")}},k=async(N,J)=>{var K,C;const $=J?"deactivate":"activate";if(await t({title:$.charAt(0).toUpperCase()+$.slice(1),message:$.charAt(0).toUpperCase()+$.slice(1)+" this user?"}))try{await q.patch("/api/users/"+N,{is_active:!J}),h(),j(!1)}catch(Y){n.show("Failed to update user: "+(((C=(K=Y.response)==null?void 0:K.data)==null?void 0:C.detail)||Y.message),"error")}},u=async(N,J)=>{var $,K;if(await t({title:"Reset Password",message:"Reset password for "+J+"?"}))try{const C=Math.random().toString(36).slice(-8)+"A1!";await q.post("/api/users/"+N+"/reset-password"),n.show("Password reset  share credentials securely","success")}catch(C){n.show("Failed to reset password: "+(((K=($=C.response)==null?void 0:$.data)==null?void 0:K.detail)||C.message),"error")}},L=async(N,J)=>{var $,K;if(await t({title:"Approve User",message:"Approve "+J+" as an applicant?"}))try{await q.post("/api/users/"+N+"/approve"),h(),j(!1)}catch(C){n.show("Failed to approve: "+(((K=($=C.response)==null?void 0:$.data)==null?void 0:K.detail)||C.message),"error")}},H=async(N,J)=>{var $,K;if(await t({title:"Reject User",message:"Reject "+J+"? Their account will be deactivated.",danger:!0}))try{await q.post("/api/users/"+N+"/reject"),h(),j(!1)}catch(C){n.show("Failed to reject: "+(((K=($=C.response)==null?void 0:$.data)==null?void 0:K.detail)||C.message),"error")}},F=async(N,J)=>{var $,K;if(await t({title:"Delete User",message:"DELETE "+J+"? This cannot be undone.",danger:!0,confirmLabel:"Delete"}))try{await q.delete("/api/users/"+N),h(),j(!1)}catch(C){n.show("Failed to delete user: "+(((K=($=C.response)==null?void 0:$.data)==null?void 0:K.detail)||C.message),"error")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Dt,{label:"Administration",title:"User Management",description:"Manage admin and applicant accounts",action:e.jsxs("button",{onClick:()=>f(!0),className:"btn px-4 py-2 flex items-center gap-2",children:[e.jsx(sa,{className:"w-4 h-4"})," Invite User"]})}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))"},children:[e.jsx(xe,{onClick:()=>l(""),label:"Total Users",value:M.total,color:s===""?"rgba(255,255,255,.94)":"rgba(255,255,255,.35)"}),e.jsx(xe,{onClick:()=>l(s==="admin"?"":"admin"),label:"Admins",value:M.admins,color:s==="admin"?"#a896d6":"rgba(255,255,255,.35)"}),e.jsx(xe,{onClick:()=>l(s==="applicant"?"":"applicant"),label:"Applicants",value:M.applicants,color:s==="applicant"?"#5CD685":"rgba(255,255,255,.35)"}),e.jsx(xe,{onClick:()=>l(s==="pending"?"":"pending"),label:"Pending",value:M.pending,color:s==="pending"?"#D6A05C":"rgba(255,255,255,.35)"}),e.jsx(xe,{onClick:()=>l(s==="inactive"?"":"inactive"),label:"Inactive",value:M.inactive,color:s==="inactive"?"#D65C5C":"rgba(255,255,255,.35)"})]}),e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_t,{className:"w-5 h-5",style:{color:"rgba(255,255,255,.50)"}}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or company...",value:d,onChange:N=>c(N.target.value),className:"flex-1 px-4 py-3",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",outline:"none"}})]})}),e.jsx(ne,{children:i?e.jsx("div",{style:{color:"rgba(255,255,255,.50)",textAlign:"center",padding:"clamp(16px, 4vw, 40px)"},children:"Loading users..."}):E.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"clamp(24px, 5vw, 60px)"},children:[e.jsx(Gt,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-12 h-12 mx-auto mb-4",style:{color:"rgba(255,255,255,.50)"}}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:"No users found"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:a.length===0?"The /api/users/ endpoint may not be configured.":"Try adjusting your search."})]}):e.jsx("div",{className:"space-y-2",children:E.map(N=>{var J,$;return e.jsxs("div",{onClick:()=>{v(N),j(!0)},className:"flex items-center gap-4 p-4 cursor-pointer transition-all",style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center flex-shrink-0",style:{background:"#5B4B8A",color:"rgba(255,255,255,.94)",fontWeight:"400"},children:((J=N.full_name)==null?void 0:J[0])||(($=N.email)==null?void 0:$[0])||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontWeight:"500"},children:N.full_name||"No Name"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px"},children:N.email}),N.company&&e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"12px"},children:N.company})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs",style:{background:N.role==="admin"?"rgba(157,140,207,0.2)":N.role==="pending"?"rgba(245,158,11,0.15)":"rgba(255,255,255,0.1)",color:N.role==="admin"?"#a896d6":N.role==="pending"?"#f59e0b":"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase"},children:N.role}),N.role==="pending"&&e.jsxs("div",{className:"flex gap-1",onClick:K=>K.stopPropagation(),children:[e.jsx("button",{onClick:()=>L(N.id,N.email),className:"btn",style:{padding:"4px 12px",color:"var(--accent-green)"},children:"Approve"}),e.jsx("button",{onClick:()=>H(N.id,N.email),className:"btn",style:{padding:"4px 12px",color:"var(--accent-red)"},children:"Reject"})]}),N.is_active===!1&&e.jsx("span",{className:"px-2 py-1 text-xs",style:{background:"transparent",color:"#D65C5C"},children:"Inactive"})]})]},N.id||N.email)})})}),p&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 sa-modal-overlay",children:e.jsxs("div",{className:"w-full max-w-md mx-4 p-6 sa-modal-panel",children:[e.jsx("h2",{style:{color:"rgba(255,255,255,.94)",fontSize:"20px",fontWeight:"400",marginBottom:"24px",textAlign:"center"},children:"Invite New User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px",display:"block",marginBottom:"6px"},children:"Email *"}),e.jsx("input",{type:"email",value:g.email,onChange:N=>z({...g,email:N.target.value}),placeholder:"user@company.com",className:"w-full px-4 py-3",style:{background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px",display:"block",marginBottom:"6px"},children:"Full Name *"}),e.jsx("input",{type:"text",value:g.full_name,onChange:N=>z({...g,full_name:N.target.value}),placeholder:"John Smith",className:"w-full px-4 py-3",style:{background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px",display:"block",marginBottom:"6px"},children:"Company"}),e.jsx("input",{type:"text",value:g.company,onChange:N=>z({...g,company:N.target.value}),placeholder:"Company name",className:"w-full px-4 py-3",style:{background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px",display:"block",marginBottom:"6px"},children:"Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>z({...g,role:"applicant"}),className:"btn",style:{padding:"10px 16px",flex:1,justifyContent:"center",color:g.role==="applicant"?"var(--purple-bright)":"var(--text-tertiary)",borderColor:g.role==="applicant"?"rgba(157,140,207,.3)":"rgba(255,255,255,.06)"},children:"Applicant"}),e.jsx("button",{onClick:()=>z({...g,role:"admin"}),className:"btn",style:{padding:"10px 16px",flex:1,justifyContent:"center",color:g.role==="admin"?"var(--purple-bright)":"var(--text-tertiary)",borderColor:g.role==="admin"?"rgba(157,140,207,.3)":"rgba(255,255,255,.06)"},children:"Admin"})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("button",{onClick:S,disabled:I,className:"btn primary",style:{width:"100%",opacity:I?.7:1},children:I?"Creating...":"Create Account"}),e.jsx("button",{onClick:()=>{f(!1),z({email:"",full_name:"",company:"",role:"applicant"})},className:"w-full px-4 py-3",style:{background:"transparent",border:"none",color:"rgba(255,255,255,.50)"},children:"Cancel"})]})]})}),b&&m&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 sa-modal-overlay",children:e.jsxs("div",{className:"w-full max-w-md mx-4 p-6 sa-modal-panel",children:[e.jsx("h2",{style:{color:"rgba(255,255,255,.94)",fontSize:"20px",fontWeight:"400",marginBottom:"24px",textAlign:"center"},children:"Manage User"}),e.jsxs("div",{className:"text-center mb-6 p-4",style:{background:"rgba(255,255,255,0.03)"},children:[e.jsx("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-3 sa-avatar",style:{background:"#5B4B8A",border:"2px solid #9d8ccf",borderRadius:"6px",color:"rgba(255,255,255,.94)",fontSize:"24px",fontWeight:"200",fontFamily:"Georgia, serif"},children:((B=m.full_name)==null?void 0:B[0])||((D=m.email)==null?void 0:D[0])||"?"}),e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontSize:"18px",fontWeight:"500"},children:m.full_name||"No Name"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:m.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",display:"block",marginBottom:"8px"},children:"Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>O(m.id,"applicant"),className:"btn",style:{padding:"10px 16px",flex:1,justifyContent:"center",color:m.role==="applicant"?"var(--purple-bright)":"var(--text-tertiary)",borderColor:m.role==="applicant"?"rgba(157,140,207,.3)":"rgba(255,255,255,.06)"},children:"Applicant"}),e.jsx("button",{onClick:()=>O(m.id,"admin"),className:"btn",style:{padding:"10px 16px",flex:1,justifyContent:"center",color:m.role==="admin"?"var(--purple-bright)":"var(--text-tertiary)",borderColor:m.role==="admin"?"rgba(157,140,207,.3)":"rgba(255,255,255,.06)"},children:"Admin"})]})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("label",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",display:"block",marginBottom:"8px"},children:"Actions"}),e.jsxs("button",{onClick:()=>u(m.id,m.email),className:"w-full px-4 py-3 flex items-center gap-3 btn",style:{justifyContent:"flex-start",width:"100%"},children:[e.jsx(Le,{className:"w-4 h-4",style:{color:"#a896d6"}}),"Reset Password"]}),e.jsx("button",{onClick:()=>k(m.id,m.is_active!==!1),className:"w-full px-4 py-3 flex items-center gap-3 btn",style:{justifyContent:"flex-start",width:"100%",color:m.is_active===!1?"var(--accent-green)":"var(--accent-red)"},children:m.is_active===!1?e.jsxs(e.Fragment,{children:[e.jsx(pn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-4 h-4"})," Activate Account"]}):e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"w-4 h-4"})," Deactivate Account"]})}),e.jsxs("button",{onClick:()=>F(m.id,m.email),className:"w-full px-4 py-3 flex items-center gap-3 btn",style:{justifyContent:"flex-start",width:"100%",color:"var(--accent-red)"},children:[e.jsx(Kt,{className:"w-4 h-4"})," Delete User"]})]}),e.jsx("button",{onClick:()=>{j(!1),v(null)},className:"w-full px-4 py-3",style:{background:"transparent",border:"none",color:"rgba(255,255,255,.50)"},children:"Close"})]})})]})}function fl(){const[t,n]=x.useState([]);return x.useEffect(()=>{q.get("/api/licensees/").then(a=>n(a.data)).catch(console.error)},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"Partners"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"Licensed Implementers"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:"Authorized ENVELO integrators"})]}),e.jsxs(ne,{children:[e.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{className:"w-full",style:{minWidth:"500px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Company"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Status"})]})}),e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.94)"},children:a.company_name}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.78)"},children:a.contact_email}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1",style:{background:a.status==="active"?"rgba(92,214,133,0.04)":"rgba(214,160,92,0.04)",color:a.status==="active"?"#5CD685":"#D6A05C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:a.status})})]},a.id))})]})}),t.length===0&&e.jsx("div",{className:"text-center py-12",style:{color:"rgba(255,255,255,.50)"},children:"No licensees yet"})]})]})}function hl(){const t=Ce(),[n,a]=x.useState([]),[o,i]=x.useState(0),[r,s]=x.useState(!0),[l,d]=x.useState(""),[c,p]=x.useState(""),[f,b]=x.useState(""),[j,m]=x.useState(0),[v,g]=x.useState(""),[z,I]=x.useState(""),[y,h]=x.useState(null),[E,M]=x.useState(!1),[S,O]=x.useState("30"),k=C=>{if(O(C),m(0),C==="all")g(""),I("");else{const Y=new Date;Y.setDate(Y.getDate()-parseInt(C)),g(Y.toISOString().split("T")[0]),I("")}},u=async()=>{M(!0);try{const C=await q.get("/api/audit/verify?limit=5000");h(C.data),t.show(C.data.integrity==="passed"?`Integrity verified  ${C.data.valid} entries valid`:`Integrity check FAILED  ${C.data.invalid} tampered entries`,C.data.integrity==="passed"?"success":"error")}catch{t.show("Verification failed","error")}M(!1)},[L,H]=x.useState([]),[F,B]=x.useState([]),D=50;x.useEffect(()=>{q.get("/api/audit/actions").then(C=>H(C.data.actions||[])).catch(()=>{}),q.get("/api/audit/resource-types").then(C=>B(C.data.resource_types||[])).catch(()=>{})},[]);const N=async()=>{s(!0);try{const C=new URLSearchParams;l&&C.set("action",l),c&&C.set("resource_type",c),f&&C.set("user_email",f),v&&C.set("date_from",new Date(v).toISOString()),z&&C.set("date_to",new Date(z+"T23:59:59").toISOString()),C.set("limit",D),C.set("offset",j*D);const Y=await q.get(`/api/audit/logs?${C}`);a(Y.data.logs||[]),i(Y.data.total||0)}catch(C){console.error("Failed to load audit logs:",C)}s(!1)},J=async()=>{try{const C=new URLSearchParams;l&&C.set("action",l),c&&C.set("resource_type",c),f&&C.set("user_email",f),v&&C.set("date_from",new Date(v).toISOString()),z&&C.set("date_to",new Date(z+"T23:59:59").toISOString()),C.set("limit",1e4),C.set("offset",0);const te=(await q.get(`/api/audit/logs?${C}`)).data.logs||[];if(te.length===0){t.show("No entries to export","warning");return}const ce=["Timestamp,User,Action,Resource Type,Resource ID,Details,Hash",...te.map(R=>{const P=R.details?Object.entries(R.details).map(([U,A])=>U+"="+A).join("; "):"";return[R.timestamp||"",R.user_email||"",R.action||"",R.resource_type||"",R.resource_id||"",'"'+P.replace(/"/g,'""')+'"',R.log_hash||""].join(",")})].join(`
`),w=new Blob([ce],{type:"text/csv"}),W=URL.createObjectURL(w),_=document.createElement("a");_.href=W,_.download="audit-log-"+new Date().toISOString().split("T")[0]+".csv",_.click(),URL.revokeObjectURL(W),t.show("CSV exported ("+te.length+" entries)","success")}catch{t.show("Export failed","error")}};x.useEffect(()=>{N()},[l,c,f,v,z,j]);const $=C=>C!=null&&C.includes("issued")||C!=null&&C.includes("approved")||C!=null&&C.includes("conformant")?"#5CD685":C!=null&&C.includes("suspended")||C!=null&&C.includes("revoked")||C!=null&&C.includes("failed")?"#D65C5C":C!=null&&C.includes("pending")||C!=null&&C.includes("under_review")?"#D6A05C":"#a896d6",K=Math.ceil(o/D);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Dt,{label:"Administration",title:"Activity History"}),e.jsx(ne,{children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("select",{value:l,onChange:C=>{d(C.target.value),m(0)},style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",minWidth:"180px"},children:[e.jsx("option",{value:"",children:"All Actions"}),L.map(C=>e.jsx("option",{value:C,children:C},C))]}),e.jsxs("select",{value:c,onChange:C=>{p(C.target.value),m(0)},style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"All Resources"}),F.map(C=>e.jsx("option",{value:C,children:C},C))]}),e.jsx("input",{value:f,onChange:C=>{b(C.target.value),m(0)},placeholder:"Filter by email...",style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",flex:1,minWidth:"150px"}}),["7","30","90","all"].map(C=>e.jsx("button",{onClick:()=>k(C),style:{padding:"5px 10px",background:S===C?"rgba(168,150,214,0.15)":"transparent",border:`1px solid ${S===C?"rgba(168,150,214,0.4)":"rgba(255,255,255,.07)"}`,color:S===C?"#a896d6":"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"0.5px",transition:"all 0.15s ease"},children:C==="all"?"All":C+"d"},C)),e.jsx("input",{type:"date",value:v,onChange:C=>{g(C.target.value),m(0),O("")},style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",colorScheme:"dark"}}),e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:"to"}),e.jsx("input",{type:"date",value:z,onChange:C=>{I(C.target.value),m(0),O("")},style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",colorScheme:"dark"}}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[o.toLocaleString()," entries"]}),e.jsx("button",{onClick:J,style:{padding:"6px 14px",background:"rgba(157,140,207,0.12)",border:"1px solid rgba(157,140,207,0.3)",color:"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:"Export CSV"}),e.jsx("button",{onClick:u,disabled:E,style:{padding:"6px 14px",background:y?y.integrity==="passed"?"rgba(92,214,133,0.12)":"rgba(214,92,92,0.12)":"rgba(157,140,207,0.12)",border:"1px solid "+(y?y.integrity==="passed"?"rgba(92,214,133,0.3)":"rgba(214,92,92,0.3)":"rgba(157,140,207,0.3)"),color:y?y.integrity==="passed"?"#5CD685":"#D65C5C":"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:E?"wait":"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:E?"Verifying...":y?y.integrity==="passed"?` ${y.valid} Verified`:` ${y.invalid} Invalid`:" Verify Chain"})]})}),e.jsxs(ne,{noPad:!0,children:[r?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.50)"},children:"Loading..."}):n.length===0?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.50)"},children:"No audit log entries found"}):e.jsx("div",{className:"table-scroll",style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"transparent"},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Timestamp"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"User"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Action"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Resource"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Details"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Hash"})]})}),e.jsx("tbody",{children:n.map(C=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.78)",whiteSpace:"nowrap"},children:C.timestamp?new Date(C.timestamp).toLocaleString():"-"}),e.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:"rgba(255,255,255,.94)"},children:C.user_email||"-"}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:$(C.action),letterSpacing:"0.5px"},children:C.action})}),e.jsxs("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[C.resource_type,C.resource_id?` #${C.resource_id}`:""]}),e.jsx("td",{style:{padding:"12px 16px",fontSize:"12px",color:"rgba(255,255,255,.50)",maxWidth:"300px"},children:C.details?Object.entries(C.details).filter(([Y])=>Y!=="old_state").map(([Y,te])=>e.jsxs("span",{style:{marginRight:"12px"},children:[e.jsxs("span",{style:{color:"rgba(255,255,255,.50)"},children:[Y.replace(/_/g," "),":"]})," ",e.jsx("span",{style:{color:"rgba(255,255,255,.78)"},children:String(te)})]},Y)):"-"}),e.jsx("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",letterSpacing:"0.5px"},children:C.log_hash||"-"})]},C.id))})]})}),K>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",padding:"16px",borderTop:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("button",{onClick:()=>m(Math.max(0,j-1)),disabled:j===0,style:{padding:"6px 12px",background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",color:j===0?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",cursor:j===0?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:" Prev"}),e.jsxs("span",{style:{padding:"6px 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.78)"},children:[j+1," / ",K]}),e.jsx("button",{onClick:()=>m(Math.min(K-1,j+1)),disabled:j>=K-1,style:{padding:"6px 12px",background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",color:j>=K-1?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",cursor:j>=K-1?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"Next "})]})]})]})}function yl(){const{user:t}=pe(),[n,a]=x.useState([]),[o,i]=x.useState(0),[r,s]=x.useState(!0),[l,d]=x.useState(0),[c,p]=x.useState("30"),f=30,b=()=>{if(c==="all")return"";const g=new Date;return g.setDate(g.getDate()-parseInt(c)),g.toISOString()},j=async()=>{s(!0);try{const g=new URLSearchParams;g.set("limit",f),g.set("offset",l*f);const z=b();z&&g.set("date_from",z);const I=await q.get(`/api/audit/my-logs?${g}`);a(I.data.logs||[]),i(I.data.total||0)}catch(g){console.error("Failed to load activity:",g)}s(!1)};x.useEffect(()=>{j()},[l,c]);const m=g=>g!=null&&g.includes("approved")||g!=null&&g.includes("issued")||g!=null&&g.includes("conformant")?{icon:"",color:"#5CD685"}:g!=null&&g.includes("failed")||g!=null&&g.includes("revoked")||g!=null&&g.includes("suspended")?{icon:"",color:"#D65C5C"}:g!=null&&g.includes("pending")||g!=null&&g.includes("under_review")?{icon:"",color:"#D6A05C"}:{icon:"",color:"#a896d6"},v=Math.ceil(o/f);return e.jsxs("div",{className:"space-y-6",style:{maxWidth:"min(800px, 95vw)",margin:"0 auto"},children:[e.jsx(Dt,{label:"Account",title:"My Activity"}),e.jsxs(ne,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px",marginBottom:"16px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)",letterSpacing:"1px",textTransform:"uppercase"},children:"Activity Log"}),e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[["7","30","90","all"].map(g=>e.jsx("button",{onClick:()=>{p(g),d(0)},style:{padding:"4px 10px",background:c===g?"rgba(168,150,214,0.15)":"transparent",border:`1px solid ${c===g?"rgba(168,150,214,0.4)":"rgba(255,255,255,.07)"}`,color:c===g?"#a896d6":"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"0.5px",transition:"all 0.15s ease"},children:g==="all"?"All":g+"d"},g)),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginLeft:"8px"},children:[o," entries"]})]})]}),r?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.50)"},children:"Loading..."}):n.length===0?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.50)"},children:"No activity yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:n.map(g=>{var I;const z=m(g.action);return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px",background:"rgba(255,255,255,0.01)",borderBottom:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:`${z.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginTop:"2px"},children:e.jsx("span",{style:{color:z.color,fontSize:"13px",fontWeight:"bold"},children:z.icon})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:z.color,letterSpacing:"0.5px"},children:(I=g.action)==null?void 0:I.replace(/_/g," ")}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",whiteSpace:"nowrap"},children:g.timestamp?new Date(g.timestamp).toLocaleString():""})]}),e.jsxs("div",{style:{fontSize:"12px",color:"rgba(255,255,255,.78)"},children:[g.resource_type,g.resource_id?` #${g.resource_id}`:"",g.details&&Object.keys(g.details).length>0&&e.jsx("span",{style:{color:"rgba(255,255,255,.50)",marginLeft:"8px"},children:Object.entries(g.details).filter(([y])=>y!=="old_state").slice(0,3).map(([y,h])=>`${y.replace(/_/g," ")}: ${h}`).join("  ")})]})]})]},g.id)})}),v>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",paddingTop:"16px",marginTop:"16px",borderTop:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("button",{onClick:()=>d(Math.max(0,l-1)),disabled:l===0,style:{padding:"6px 12px",background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",color:l===0?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",cursor:l===0?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"\\u2190 Prev"}),e.jsxs("span",{style:{padding:"6px 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.78)"},children:[l+1," / ",v]}),e.jsx("button",{onClick:()=>d(Math.min(v-1,l+1)),disabled:l>=v-1,style:{padding:"6px 12px",background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",color:l>=v-1?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",cursor:l>=v-1?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"Next \\u2192"})]})]})]})}function _l(){const{user:t}=pe();Be();const n=Ce(),[a,o]=x.useState(null),[i,r]=x.useState(!1),[s,l]=x.useState(!1),[d,c]=x.useState({full_name:(t==null?void 0:t.full_name)||"",organization:(t==null?void 0:t.organization)||""}),[p,f]=x.useState(!1),[b,j]=x.useState({current:"",new_pw:"",confirm:""}),[m,v]=x.useState(!1),[g,z]=x.useState(""),[I,y]=x.useState({enabled:!1,loading:!0,setup:null,code:"",verifying:!1,disablePw:"",disabling:!1});x.useEffect(()=>{q.get("/api/auth/me").then(F=>{y(B=>({...B,enabled:F.data.totp_enabled||!1,loading:!1}))}).catch(()=>y(F=>({...F,loading:!1})))},[]);const h=async()=>{var F,B;try{const D=await q.post("/api/auth/2fa/setup");y(N=>({...N,setup:D.data}))}catch(D){n.show("Setup failed: "+(((B=(F=D.response)==null?void 0:F.data)==null?void 0:B.detail)||D.message),"error")}},E=async()=>{var F,B;y(D=>({...D,verifying:!0}));try{const D=await q.post("/api/auth/2fa/enable",{code:I.code});n.show("Two-factor authentication enabled","success"),y(N=>({...N,enabled:!0,setup:null,code:"",verifying:!1,backupCodes:D.data.backup_codes||[]}))}catch(D){n.show(((B=(F=D.response)==null?void 0:F.data)==null?void 0:B.detail)||"Invalid code","error"),y(N=>({...N,verifying:!1}))}},M=async()=>{var F,B;y(D=>({...D,disabling:!0}));try{await q.post("/api/auth/2fa/disable",{current_password:I.disablePw}),n.show("Two-factor authentication disabled","success"),y(D=>({...D,enabled:!1,disablePw:"",disabling:!1}))}catch(D){n.show(((B=(F=D.response)==null?void 0:F.data)==null?void 0:B.detail)||"Failed","error"),y(N=>({...N,disabling:!1}))}},S=async()=>{var F,B;f(!0);try{const D=await q.put("/api/auth/profile",d);n.show("Profile updated","success"),D.data.user&&window.location.reload()}catch(D){n.show("Failed to update profile: "+(((B=(F=D.response)==null?void 0:F.data)==null?void 0:B.detail)||D.message),"error")}f(!1)},O=async()=>{var F,B;if(z(""),b.current===""||b.new_pw===""||b.confirm===""){z("All fields required");return}if(b.new_pw!==b.confirm){z("Passwords do not match");return}if(b.new_pw.length<8){z("Min 8 characters");return}v(!0);try{await q.post("/api/auth/change-password",{current_password:b.current,new_password:b.new_pw}),n.show("Password changed successfully","success"),j({current:"",new_pw:"",confirm:""})}catch(D){z(((B=(F=D.response)==null?void 0:F.data)==null?void 0:B.detail)||"Failed to change password")}v(!1)};x.useEffect(()=>{q.get("/api/users/email-preferences").then(F=>o(F.data.preferences||{})).catch(()=>{o({application_updates:!0,test_notifications:!0,certificate_alerts:!0,agent_alerts:!0,marketing:!1})})},[]);const k=F=>{o(B=>({...B,[F]:!B[F]})),l(!1)},u=async()=>{var F,B;r(!0);try{await q.put("/api/users/email-preferences",a),l(!0),setTimeout(()=>l(!1),3e3)}catch(D){n.show("Failed to save: "+(((B=(F=D.response)==null?void 0:F.data)==null?void 0:B.detail)||D.message),"error")}r(!1)},L=[{key:"application_updates",label:"Application Updates",desc:"Submission confirmations, review status changes, approval notifications"},{key:"test_notifications",label:"CAT-72 Test Notifications",desc:"Test scheduled, started, passed, and failed alerts"},{key:"certificate_alerts",label:"Certificate Alerts",desc:"Certificate issued, expiry warnings (30-day / 7-day), expiration notices"},{key:"agent_alerts",label:"ENVELO Interlock Alerts",desc:"Agent offline warnings, high violation rate, suspension alerts"},{key:"marketing",label:"Product Updates",desc:"New features, platform updates, and industry news from Sentinel Authority"}];if(!a)return e.jsx("div",{style:{color:"rgba(255,255,255,.50)",padding:"clamp(16px, 4vw, 40px)",textAlign:"center"},children:"Loading preferences..."});const H=F=>e.jsx("label",{className:"hud-label",style:{display:"block",marginBottom:"6px"},children:F});return e.jsxs("div",{style:{maxWidth:"min(700px, 95vw)",margin:"0 auto"},children:[e.jsx(Dt,{label:"Account",title:"Settings"}),e.jsxs("div",{style:{paddingTop:"32px"},children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"20px"},children:"Account Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",maxWidth:"min(400px, 90vw)"},children:[e.jsxs("div",{children:[H("Full Name"),e.jsx("input",{type:"text",value:d.full_name,onChange:F=>c({...d,full_name:F.target.value})})]}),e.jsxs("div",{children:[H("Organization"),e.jsx("input",{type:"text",value:d.organization,onChange:F=>c({...d,organization:F.target.value})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"hud-label",children:"Email"}),e.jsx("div",{style:{color:"rgba(255,255,255,.94)",marginTop:"6px",fontSize:"13px"},children:(t==null?void 0:t.email)||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"hud-label",children:"Role"}),e.jsx("div",{style:{color:"#a896d6",marginTop:"6px",fontFamily:"var(--mono)",fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:(t==null?void 0:t.role)||"-"})]})]}),e.jsx("button",{onClick:S,disabled:p,className:"btn",style:{alignSelf:"flex-start"},children:p?"Saving...":"Save Profile"})]})]}),e.jsx("div",{className:"hud-scanline",style:{margin:"32px 0"}}),e.jsxs("div",{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"20px"},children:"Change Password"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",maxWidth:"min(400px, 90vw)"},children:[e.jsxs("div",{children:[H("Current Password"),e.jsx("input",{type:"password",value:b.current,onChange:F=>j({...b,current:F.target.value})})]}),e.jsxs("div",{children:[H("New Password"),e.jsx("input",{type:"password",value:b.new_pw,onChange:F=>j({...b,new_pw:F.target.value})})]}),e.jsxs("div",{children:[H("Confirm New Password"),e.jsx("input",{type:"password",value:b.confirm,onChange:F=>j({...b,confirm:F.target.value})})]}),g&&e.jsx("div",{style:{color:"var(--accent-red)",fontSize:"12px"},children:g}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:"Min 8 chars, 1 uppercase, 1 lowercase, 1 number"}),e.jsx("button",{onClick:O,disabled:m,className:"btn",style:{alignSelf:"flex-start"},children:m?"Changing...":"Change Password"})]})]}),e.jsx("div",{className:"hud-scanline",style:{margin:"32px 0"}}),e.jsxs("div",{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"20px"},children:"Two-Factor Authentication"}),I.loading?e.jsx("div",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px"},children:"Loading..."}):I.enabled?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("span",{className:"hud-dot hud-dot-green"}),e.jsx("span",{style:{color:"var(--accent-green)",fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"2px"},children:"ENABLED"})]}),e.jsx("p",{className:"hud-desc",style:{marginBottom:"12px"},children:"Your account is protected with TOTP two-factor authentication."}),I.backupCodes&&I.backupCodes.length>0&&e.jsxs("div",{className:"hud-frame hud-frame-amber",style:{marginBottom:"16px"},children:[e.jsx("i",{}),e.jsx("div",{className:"hud-label",style:{color:"var(--accent-amber)",marginBottom:"8px"},children:"Save Your Backup Codes"}),e.jsx("p",{className:"hud-desc",style:{marginBottom:"12px"},children:"Use these if you lose your authenticator. Each code works once."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"4px"},children:I.backupCodes.map((F,B)=>e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"13px",color:"rgba(255,255,255,.94)",padding:"4px 8px",textAlign:"center"},children:F},B))}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(I.backupCodes.join(`
`)),n.show("Backup codes copied")},className:"btn",style:{marginTop:"12px"},children:"Copy All"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",maxWidth:"min(400px, 90vw)"},children:[e.jsx("input",{type:"password",value:I.disablePw,onChange:F=>y(B=>({...B,disablePw:F.target.value})),placeholder:"Enter password to disable",style:{flex:1}}),e.jsx("button",{onClick:M,disabled:I.disabling,className:"btn",style:{color:"var(--accent-red)",whiteSpace:"nowrap"},children:I.disabling?"...":"Disable 2FA"})]})]}):I.setup?e.jsxs("div",{style:{maxWidth:"min(400px, 90vw)"},children:[e.jsx("p",{className:"hud-desc",style:{marginBottom:"16px"},children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, 1Password):"}),I.setup.qr_base64&&e.jsx("div",{style:{textAlign:"center",marginBottom:"16px"},children:e.jsx("img",{src:"data:image/png;base64,"+I.setup.qr_base64,alt:"QR Code",style:{width:"200px",height:"200px"}})}),e.jsxs("div",{style:{marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"6px"},children:"Manual Entry Key"}),e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"14px",color:"var(--purple-bright)",letterSpacing:"2px",wordBreak:"break-all"},children:I.setup.secret})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:I.code,onChange:F=>y(B=>({...B,code:F.target.value.replace(/\D/g,"").slice(0,6)})),placeholder:"6-digit code",maxLength:6,style:{flex:1,fontSize:"18px",letterSpacing:"6px",textAlign:"center"}}),e.jsx("button",{onClick:E,disabled:I.verifying||I.code.length!==6,className:"btn primary",children:I.verifying?"...":"Verify"})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"hud-desc",style:{marginBottom:"16px"},children:"Add an extra layer of security by requiring a code from your authenticator app when signing in."}),e.jsx("button",{onClick:h,className:"btn primary",children:"Enable 2FA"})]})]}),e.jsx("div",{className:"hud-scanline",style:{margin:"32px 0"}}),e.jsxs("div",{style:{paddingBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"20px"},children:[e.jsx("div",{className:"hud-label",children:"Email Notifications"}),e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:"from notifications@sentinelauthority.org"})]}),e.jsx("div",{children:L.map(F=>e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",padding:"16px 0"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px",marginBottom:"4px"},children:F.label}),e.jsx("div",{style:{color:"rgba(255,255,255,.50)",fontSize:"12px",lineHeight:"1.5"},children:F.desc})]}),e.jsx("button",{onClick:()=>k(F.key),className:"btn",style:{padding:"6px 16px",color:a[F.key]?"var(--accent-green)":"var(--text-tertiary)",borderColor:a[F.key]?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)",minWidth:"56px",justifyContent:"center"},children:a[F.key]?"ON":"OFF"})]},F.key))}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginTop:"20px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:"Admin and security emails are always sent."}),e.jsx("button",{onClick:u,disabled:i,className:"btn primary",style:{color:s?"var(--accent-green)":void 0},children:s?" Saved":i?"Saving...":"Save Preferences"})]})]})]})}const bl="goldenticket";function vl(){const[t,n]=x.useState(!1),[a,o]=x.useState(""),[i,r]=x.useState(""),s=b=>{b.preventDefault(),a===bl?(n(!0),r("")):r("Invalid password")},l="Consolas, 'IBM Plex Mono', monospace",d="Georgia, 'Source Serif 4', serif",c="rgba(255,255,255,.94)",p="rgba(255,255,255,.50)",f="#a896d6";return t?e.jsx("div",{style:{width:"100%",height:"calc(100vh - 80px)"},children:e.jsx("iframe",{src:`${vn}/internal-docs`,style:{width:"100%",height:"100%",border:"none"},title:"API Documentation"})}):e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsxs("div",{style:{maxWidth:"min(420px, 90vw)",width:"100%"},children:[e.jsx("div",{style:{fontFamily:l,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:p,marginBottom:"16px"},children:"Documentation"}),e.jsxs("h2",{style:{fontFamily:d,fontSize:"clamp(28px, 4vw, 44px)",fontWeight:200,letterSpacing:"-0.03em",lineHeight:1.1,color:c,margin:"0 0 12px"},children:["API ",e.jsx("span",{style:{color:f,fontStyle:"italic"},children:"Reference"})]}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontWeight:200,lineHeight:1.75,fontSize:"15px",margin:"0 0 40px"},children:"Enter the documentation password to access the full API reference."}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.04)",paddingTop:"28px"},children:[e.jsx("label",{style:{display:"block",fontFamily:l,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:p,marginBottom:"12px"},children:"Password"}),e.jsx("input",{type:"password",value:a,onChange:b=>o(b.target.value),onKeyDown:b=>b.key==="Enter"&&s(b),placeholder:"Enter password",style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:c,fontFamily:l,fontSize:"14px",padding:"10px 0",outline:"none",marginBottom:"28px"}}),i&&e.jsx("p",{style:{color:"rgba(214,92,92,.95)",fontFamily:l,fontSize:"11px",letterSpacing:"1px",marginBottom:"16px"},children:i}),e.jsx("button",{onClick:s,className:"btn primary",style:{width:"100%",justifyContent:"center"},children:"Unlock Docs "})]})]})})}function wl(){return e.jsx(as,{children:e.jsx(jo,{children:e.jsx(is,{children:e.jsx(ns,{children:e.jsxs(fo,{children:[e.jsx(re,{path:"/login",element:e.jsx(rs,{})}),e.jsx(re,{path:"/verify",element:e.jsx(pl,{})}),e.jsx(re,{path:"/dashboard",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(ds,{})})})}),e.jsx(re,{path:"/applications",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(ms,{})})})}),e.jsx(re,{path:"/applications/new",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(gs,{})})})}),e.jsx(re,{path:"/applications/:id",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(bs,{})})})}),e.jsx(re,{path:"/cat72",element:e.jsx(ue,{roles:["admin","operator","applicant"],children:e.jsx(ge,{children:e.jsx(vs,{})})})}),e.jsx(re,{path:"/certificates",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(js,{})})})}),e.jsx(re,{path:"/pending",element:e.jsx(ml,{})}),e.jsx(re,{path:"/resources",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(ul,{})})})}),e.jsx(re,{path:"/monitoring",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(gl,{})})})}),e.jsx(re,{path:"/activity",element:e.jsx(ue,{roles:["admin"],children:e.jsx(ge,{children:e.jsx(hl,{})})})}),e.jsx(re,{path:"/my-activity",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(yl,{})})})}),e.jsx(re,{path:"/settings",element:e.jsx(ue,{children:e.jsx(ge,{children:e.jsx(_l,{})})})}),e.jsx(re,{path:"/api-docs",element:e.jsx(ue,{roles:["admin"],children:e.jsx(ge,{children:e.jsx(vl,{})})})}),e.jsx(re,{path:"/licensees",element:e.jsx(ue,{roles:["admin"],children:e.jsx(ge,{children:e.jsx(fl,{})})})}),e.jsx(re,{path:"/users",element:e.jsx(ue,{roles:["admin"],children:e.jsx(ge,{children:e.jsx(xl,{})})})}),e.jsx(re,{path:"/",element:e.jsx(gt,{to:"/dashboard"})})]})})})})})}Yt.createRoot(document.getElementById("root")).render(e.jsx(fe.StrictMode,{children:e.jsx(wl,{})}));
