import{r as h,R as ma,a as fe,H as oo,F as $e,C as ao,A as vt,B as ro,b as ua,U as io,c as dn,S as xa,E as Kt,X as Jt,L as ga,M as fa,d as ha,e as De,f as ya,g as _a,h as Me,W as so,i as ba,j as We,P as lo,k as wt,l as co,m as pn,D as ot}from"./icons-CUJ5cHql.js";import{r as va}from"./vendor-DzKn0MnO.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();var po={exports:{}},Bt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wa=h,Sa=Symbol.for("react.element"),ja=Symbol.for("react.fragment"),Ca=Object.prototype.hasOwnProperty,ka=wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ta={key:!0,ref:!0,__self:!0,__source:!0};function mo(t,o,a){var i,r={},s=null,l=null;a!==void 0&&(s=""+a),o.key!==void 0&&(s=""+o.key),o.ref!==void 0&&(l=o.ref);for(i in o)Ca.call(o,i)&&!Ta.hasOwnProperty(i)&&(r[i]=o[i]);if(t&&t.defaultProps)for(i in o=t.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Sa,type:t,key:s,ref:l,props:r,_owner:ka.current}}Bt.Fragment=ja;Bt.jsx=mo;Bt.jsxs=mo;po.exports=Bt;var e=po.exports,Yt={},Tn=va;Yt.createRoot=Tn.createRoot,Yt.hydrateRoot=Tn.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function at(){return at=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},at.apply(this,arguments)}var ke;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ke||(ke={}));const Bn="popstate";function Ba(t){t===void 0&&(t={});function o(i,r){let{pathname:s,search:l,hash:c}=i.location;return Qt("",{pathname:s,search:l,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(i,r){return typeof r=="string"?r:St(r)}return Aa(o,a,null,t)}function ae(t,o){if(t===!1||t===null||typeof t>"u")throw new Error(o)}function mn(t,o){if(!t){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function za(){return Math.random().toString(36).substr(2,8)}function zn(t,o){return{usr:t.state,key:t.key,idx:o}}function Qt(t,o,a,i){return a===void 0&&(a=null),at({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof o=="string"?Ye(o):o,{state:a,key:o&&o.key||i||za()})}function St(t){let{pathname:o="/",search:a="",hash:i=""}=t;return a&&a!=="?"&&(o+=a.charAt(0)==="?"?a:"?"+a),i&&i!=="#"&&(o+=i.charAt(0)==="#"?i:"#"+i),o}function Ye(t){let o={};if(t){let a=t.indexOf("#");a>=0&&(o.hash=t.substr(a),t=t.substr(0,a));let i=t.indexOf("?");i>=0&&(o.search=t.substr(i),t=t.substr(0,i)),t&&(o.pathname=t)}return o}function Aa(t,o,a,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,l=r.history,c=ke.Pop,d=null,p=x();p==null&&(p=0,l.replaceState(at({},l.state,{idx:p}),""));function x(){return(l.state||{idx:null}).idx}function y(){c=ke.Pop;let f=x(),v=f==null?null:f-p;p=f,d&&d({action:c,location:S.location,delta:v})}function j(f,v){c=ke.Push;let C=Qt(S.location,f,v);p=x()+1;let w=zn(C,p),u=S.createHref(C);try{l.pushState(w,"",u)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;r.location.assign(u)}s&&d&&d({action:c,location:S.location,delta:1})}function A(f,v){c=ke.Replace;let C=Qt(S.location,f,v);p=x();let w=zn(C,p),u=S.createHref(C);l.replaceState(w,"",u),s&&d&&d({action:c,location:S.location,delta:0})}function m(f){let v=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof f=="string"?f:St(f);return C=C.replace(/ $/,"%20"),ae(v,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,v)}let S={get action(){return c},get location(){return t(r,l)},listen(f){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Bn,y),d=f,()=>{r.removeEventListener(Bn,y),d=null}},createHref(f){return o(r,f)},createURL:m,encodeLocation(f){let v=m(f);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:j,replace:A,go(f){return l.go(f)}};return S}var An;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(An||(An={}));function Ma(t,o,a){return a===void 0&&(a="/"),Pa(t,o,a)}function Pa(t,o,a,i){let r=typeof o=="string"?Ye(o):o,s=un(r.pathname||"/",a);if(s==null)return null;let l=uo(t);Ia(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let p=qa(s);c=Ga(l[d],p)}return c}function uo(t,o,a,i){o===void 0&&(o=[]),a===void 0&&(a=[]),i===void 0&&(i="");let r=(s,l,c)=>{let d={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};d.relativePath.startsWith("/")&&(ae(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=ze([i,d.relativePath]),x=a.concat(d);s.children&&s.children.length>0&&(ae(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),uo(s.children,o,x,p)),!(s.path==null&&!s.index)&&o.push({path:p,score:La(p,s.index),routesMeta:x})};return t.forEach((s,l)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))r(s,l);else for(let d of xo(s.path))r(s,l,d)}),o}function xo(t){let o=t.split("/");if(o.length===0)return[];let[a,...i]=o,r=a.endsWith("?"),s=a.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let l=xo(i.join("/")),c=[];return c.push(...l.map(d=>d===""?s:[s,d].join("/"))),r&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function Ia(t){t.sort((o,a)=>o.score!==a.score?a.score-o.score:Ua(o.routesMeta.map(i=>i.childrenIndex),a.routesMeta.map(i=>i.childrenIndex)))}const Ra=/^:[\w-]+$/,Na=3,Fa=2,Ea=1,Da=10,Oa=-2,Mn=t=>t==="*";function La(t,o){let a=t.split("/"),i=a.length;return a.some(Mn)&&(i+=Oa),o&&(i+=Fa),a.filter(r=>!Mn(r)).reduce((r,s)=>r+(Ra.test(s)?Na:s===""?Ea:Da),i)}function Ua(t,o){return t.length===o.length&&t.slice(0,-1).every((i,r)=>i===o[r])?t[t.length-1]-o[o.length-1]:0}function Ga(t,o,a){let{routesMeta:i}=t,r={},s="/",l=[];for(let c=0;c<i.length;++c){let d=i[c],p=c===i.length-1,x=s==="/"?o:o.slice(s.length)||"/",y=Wa({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},x),j=d.route;if(!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:ze([s,y.pathname]),pathnameBase:Ya(ze([s,y.pathnameBase])),route:j}),y.pathnameBase!=="/"&&(s=ze([s,y.pathnameBase]))}return l}function Wa(t,o){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,i]=$a(t.path,t.caseSensitive,t.end),r=o.match(a);if(!r)return null;let s=r[0],l=s.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((p,x,y)=>{let{paramName:j,isOptional:A}=x;if(j==="*"){let S=c[y]||"";l=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const m=c[y];return A&&!m?p[j]=void 0:p[j]=(m||"").replace(/%2F/g,"/"),p},{}),pathname:s,pathnameBase:l,pattern:t}}function $a(t,o,a){o===void 0&&(o=!1),a===void 0&&(a=!0),mn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(i.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,o?void 0:"i"),i]}function qa(t){try{return t.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return mn(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),t}}function un(t,o){if(o==="/")return t;if(!t.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,i=t.charAt(a);return i&&i!=="/"?null:t.slice(a)||"/"}const Ha=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Va=t=>Ha.test(t);function Ka(t,o){o===void 0&&(o="/");let{pathname:a,search:i="",hash:r=""}=typeof t=="string"?Ye(t):t,s;if(a)if(Va(a))s=a;else{if(a.includes("//")){let l=a;a=a.replace(/\/\/+/g,"/"),mn(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+a))}a.startsWith("/")?s=Pn(a.substring(1),"/"):s=Pn(a,o)}else s=o;return{pathname:s,search:Qa(i),hash:Xa(r)}}function Pn(t,o){let a=o.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function Ot(t,o,a,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ja(t){return t.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function xn(t,o){let a=Ja(t);return o?a.map((i,r)=>r===a.length-1?i.pathname:i.pathnameBase):a.map(i=>i.pathnameBase)}function gn(t,o,a,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ye(t):(r=at({},t),ae(!r.pathname||!r.pathname.includes("?"),Ot("?","pathname","search",r)),ae(!r.pathname||!r.pathname.includes("#"),Ot("#","pathname","hash",r)),ae(!r.search||!r.search.includes("#"),Ot("#","search","hash",r)));let s=t===""||r.pathname==="",l=s?"/":r.pathname,c;if(l==null)c=a;else{let y=o.length-1;if(!i&&l.startsWith("..")){let j=l.split("/");for(;j[0]==="..";)j.shift(),y-=1;r.pathname=j.join("/")}c=y>=0?o[y]:"/"}let d=Ka(r,c),p=l&&l!=="/"&&l.endsWith("/"),x=(s||l===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(p||x)&&(d.pathname+="/"),d}const ze=t=>t.join("/").replace(/\/\/+/g,"/"),Ya=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Qa=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Xa=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Za(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const go=["post","put","patch","delete"];new Set(go);const er=["get",...go];new Set(er);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rt(){return rt=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},rt.apply(this,arguments)}const fn=h.createContext(null),tr=h.createContext(null),Pe=h.createContext(null),zt=h.createContext(null),je=h.createContext({outlet:null,matches:[],isDataRoute:!1}),fo=h.createContext(null);function nr(t,o){let{relative:a}=o===void 0?{}:o;Qe()||ae(!1);let{basename:i,navigator:r}=h.useContext(Pe),{hash:s,pathname:l,search:c}=yo(t,{relative:a}),d=l;return i!=="/"&&(d=l==="/"?i:ze([i,l])),r.createHref({pathname:d,search:c,hash:s})}function Qe(){return h.useContext(zt)!=null}function Xe(){return Qe()||ae(!1),h.useContext(zt).location}function ho(t){h.useContext(Pe).static||h.useLayoutEffect(t)}function Le(){let{isDataRoute:t}=h.useContext(je);return t?fr():or()}function or(){Qe()||ae(!1);let t=h.useContext(fn),{basename:o,future:a,navigator:i}=h.useContext(Pe),{matches:r}=h.useContext(je),{pathname:s}=Xe(),l=JSON.stringify(xn(r,a.v7_relativeSplatPath)),c=h.useRef(!1);return ho(()=>{c.current=!0}),h.useCallback(function(p,x){if(x===void 0&&(x={}),!c.current)return;if(typeof p=="number"){i.go(p);return}let y=gn(p,JSON.parse(l),s,x.relative==="path");t==null&&o!=="/"&&(y.pathname=y.pathname==="/"?o:ze([o,y.pathname])),(x.replace?i.replace:i.push)(y,x.state,x)},[o,i,l,s,t])}function ar(){let{matches:t}=h.useContext(je),o=t[t.length-1];return o?o.params:{}}function yo(t,o){let{relative:a}=o===void 0?{}:o,{future:i}=h.useContext(Pe),{matches:r}=h.useContext(je),{pathname:s}=Xe(),l=JSON.stringify(xn(r,i.v7_relativeSplatPath));return h.useMemo(()=>gn(t,JSON.parse(l),s,a==="path"),[t,l,s,a])}function rr(t,o){return ir(t,o)}function ir(t,o,a,i){Qe()||ae(!1);let{navigator:r}=h.useContext(Pe),{matches:s}=h.useContext(je),l=s[s.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=Xe(),x;if(o){var y;let f=typeof o=="string"?Ye(o):o;d==="/"||(y=f.pathname)!=null&&y.startsWith(d)||ae(!1),x=f}else x=p;let j=x.pathname||"/",A=j;if(d!=="/"){let f=d.replace(/^\//,"").split("/");A="/"+j.replace(/^\//,"").split("/").slice(f.length).join("/")}let m=Ma(t,{pathname:A}),S=pr(m&&m.map(f=>Object.assign({},f,{params:Object.assign({},c,f.params),pathname:ze([d,r.encodeLocation?r.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?d:ze([d,r.encodeLocation?r.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),s,a,i);return o&&S?h.createElement(zt.Provider,{value:{location:rt({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:ke.Pop}},S):S}function sr(){let t=gr(),o=Za(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},o),a?h.createElement("pre",{style:r},a):null,null)}const lr=h.createElement(sr,null);class cr extends h.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,a){return a.location!==o.location||a.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:a.error,location:a.location,revalidation:o.revalidation||a.revalidation}}componentDidCatch(o,a){console.error("React Router caught the following error during render",o,a)}render(){return this.state.error!==void 0?h.createElement(je.Provider,{value:this.props.routeContext},h.createElement(fo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dr(t){let{routeContext:o,match:a,children:i}=t,r=h.useContext(fn);return r&&r.static&&r.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=a.route.id),h.createElement(je.Provider,{value:o},i)}function pr(t,o,a,i){var r;if(o===void 0&&(o=[]),a===void 0&&(a=null),i===void 0&&(i=null),t==null){var s;if(!a)return null;if(a.errors)t=a.matches;else if((s=i)!=null&&s.v7_partialHydration&&o.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let l=t,c=(r=a)==null?void 0:r.errors;if(c!=null){let x=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);x>=0||ae(!1),l=l.slice(0,Math.min(l.length,x+1))}let d=!1,p=-1;if(a&&i&&i.v7_partialHydration)for(let x=0;x<l.length;x++){let y=l[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=x),y.route.id){let{loaderData:j,errors:A}=a,m=y.route.loader&&j[y.route.id]===void 0&&(!A||A[y.route.id]===void 0);if(y.route.lazy||m){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((x,y,j)=>{let A,m=!1,S=null,f=null;a&&(A=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||lr,d&&(p<0&&j===0?(hr("route-fallback"),m=!0,f=null):p===j&&(m=!0,f=y.route.hydrateFallbackElement||null)));let v=o.concat(l.slice(0,j+1)),C=()=>{let w;return A?w=S:m?w=f:y.route.Component?w=h.createElement(y.route.Component,null):y.route.element?w=y.route.element:w=x,h.createElement(dr,{match:y,routeContext:{outlet:x,matches:v,isDataRoute:a!=null},children:w})};return a&&(y.route.ErrorBoundary||y.route.errorElement||j===0)?h.createElement(cr,{location:a.location,revalidation:a.revalidation,component:S,error:A,children:C(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):C()},null)}var _o=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_o||{}),bo=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bo||{});function mr(t){let o=h.useContext(fn);return o||ae(!1),o}function ur(t){let o=h.useContext(tr);return o||ae(!1),o}function xr(t){let o=h.useContext(je);return o||ae(!1),o}function vo(t){let o=xr(),a=o.matches[o.matches.length-1];return a.route.id||ae(!1),a.route.id}function gr(){var t;let o=h.useContext(fo),a=ur(),i=vo();return o!==void 0?o:(t=a.errors)==null?void 0:t[i]}function fr(){let{router:t}=mr(_o.UseNavigateStable),o=vo(bo.UseNavigateStable),a=h.useRef(!1);return ho(()=>{a.current=!0}),h.useCallback(function(r,s){s===void 0&&(s={}),a.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,rt({fromRouteId:o},s)))},[t,o])}const In={};function hr(t,o,a){In[t]||(In[t]=!0)}function yr(t,o){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Xt(t){let{to:o,replace:a,state:i,relative:r}=t;Qe()||ae(!1);let{future:s,static:l}=h.useContext(Pe),{matches:c}=h.useContext(je),{pathname:d}=Xe(),p=Le(),x=gn(o,xn(c,s.v7_relativeSplatPath),d,r==="path"),y=JSON.stringify(x);return h.useEffect(()=>p(JSON.parse(y),{replace:a,state:i,relative:r}),[p,y,r,a,i]),null}function ie(t){ae(!1)}function _r(t){let{basename:o="/",children:a=null,location:i,navigationType:r=ke.Pop,navigator:s,static:l=!1,future:c}=t;Qe()&&ae(!1);let d=o.replace(/^\/*/,"/"),p=h.useMemo(()=>({basename:d,navigator:s,static:l,future:rt({v7_relativeSplatPath:!1},c)}),[d,c,s,l]);typeof i=="string"&&(i=Ye(i));let{pathname:x="/",search:y="",hash:j="",state:A=null,key:m="default"}=i,S=h.useMemo(()=>{let f=un(x,d);return f==null?null:{location:{pathname:f,search:y,hash:j,state:A,key:m},navigationType:r}},[d,x,y,j,A,m,r]);return S==null?null:h.createElement(Pe.Provider,{value:p},h.createElement(zt.Provider,{children:a,value:S}))}function br(t){let{children:o,location:a}=t;return rr(Zt(o),a)}new Promise(()=>{});function Zt(t,o){o===void 0&&(o=[]);let a=[];return h.Children.forEach(t,(i,r)=>{if(!h.isValidElement(i))return;let s=[...o,r];if(i.type===h.Fragment){a.push.apply(a,Zt(i.props.children,s));return}i.type!==ie&&ae(!1),!i.props.index||!i.props.children||ae(!1);let l={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Zt(i.props.children,s)),a.push(l)}),a}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function en(){return en=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},en.apply(this,arguments)}function vr(t,o){if(t==null)return{};var a={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(o.indexOf(r)>=0)&&(a[r]=t[r]);return a}function wr(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sr(t,o){return t.button===0&&(!o||o==="_self")&&!wr(t)}const jr=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cr="6";try{window.__reactRouterVersion=Cr}catch{}const kr="startTransition",Rn=ma[kr];function Tr(t){let{basename:o,children:a,future:i,window:r}=t,s=h.useRef();s.current==null&&(s.current=Ba({window:r,v5Compat:!0}));let l=s.current,[c,d]=h.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},x=h.useCallback(y=>{p&&Rn?Rn(()=>d(y)):d(y)},[d,p]);return h.useLayoutEffect(()=>l.listen(x),[l,x]),h.useEffect(()=>yr(i),[i]),h.createElement(_r,{basename:o,children:a,location:c.location,navigationType:c.action,navigator:l,future:i})}const Br=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ne=h.forwardRef(function(o,a){let{onClick:i,relative:r,reloadDocument:s,replace:l,state:c,target:d,to:p,preventScrollReset:x,viewTransition:y}=o,j=vr(o,jr),{basename:A}=h.useContext(Pe),m,S=!1;if(typeof p=="string"&&zr.test(p)&&(m=p,Br))try{let w=new URL(window.location.href),u=p.startsWith("//")?new URL(w.protocol+p):new URL(p),b=un(u.pathname,A);u.origin===w.origin&&b!=null?p=b+u.search+u.hash:S=!0}catch{}let f=nr(p,{relative:r}),v=Ar(p,{replace:l,state:c,target:d,preventScrollReset:x,relative:r,viewTransition:y});function C(w){i&&i(w),w.defaultPrevented||v(w)}return h.createElement("a",en({},j,{href:m||f,onClick:S||s?i:C,ref:a,target:d}))});var Nn;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Nn||(Nn={}));var Fn;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fn||(Fn={}));function Ar(t,o){let{target:a,replace:i,state:r,preventScrollReset:s,relative:l,viewTransition:c}=o===void 0?{}:o,d=Le(),p=Xe(),x=yo(t,{relative:l});return h.useCallback(y=>{if(Sr(y,a)){y.preventDefault();let j=i!==void 0?i:St(p)===St(x);d(t,{replace:j,state:r,preventScrollReset:s,relative:l,viewTransition:c})}},[p,d,x,i,r,a,t,s,l,c])}function wo(t,o){return function(){return t.apply(o,arguments)}}const{toString:Mr}=Object.prototype,{getPrototypeOf:hn}=Object,{iterator:At,toStringTag:So}=Symbol,Mt=(t=>o=>{const a=Mr.call(o);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),be=t=>(t=t.toLowerCase(),o=>Mt(o)===t),Pt=t=>o=>typeof o===t,{isArray:Ze}=Array,qe=Pt("undefined");function st(t){return t!==null&&!qe(t)&&t.constructor!==null&&!qe(t.constructor)&&xe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const jo=be("ArrayBuffer");function Pr(t){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(t):o=t&&t.buffer&&jo(t.buffer),o}const Ir=Pt("string"),xe=Pt("function"),Co=Pt("number"),lt=t=>t!==null&&typeof t=="object",Rr=t=>t===!0||t===!1,yt=t=>{if(Mt(t)!=="object")return!1;const o=hn(t);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(So in t)&&!(At in t)},Nr=t=>{if(!lt(t)||st(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Fr=be("Date"),Er=be("File"),Dr=be("Blob"),Or=be("FileList"),Lr=t=>lt(t)&&xe(t.pipe),Ur=t=>{let o;return t&&(typeof FormData=="function"&&t instanceof FormData||xe(t.append)&&((o=Mt(t))==="formdata"||o==="object"&&xe(t.toString)&&t.toString()==="[object FormData]"))},Gr=be("URLSearchParams"),[Wr,$r,qr,Hr]=["ReadableStream","Request","Response","Headers"].map(be),Vr=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ct(t,o,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),Ze(t))for(i=0,r=t.length;i<r;i++)o.call(null,t[i],i,t);else{if(st(t))return;const s=a?Object.getOwnPropertyNames(t):Object.keys(t),l=s.length;let c;for(i=0;i<l;i++)c=s[i],o.call(null,t[c],c,t)}}function ko(t,o){if(st(t))return null;o=o.toLowerCase();const a=Object.keys(t);let i=a.length,r;for(;i-- >0;)if(r=a[i],o===r.toLowerCase())return r;return null}const Fe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,To=t=>!qe(t)&&t!==Fe;function tn(){const{caseless:t,skipUndefined:o}=To(this)&&this||{},a={},i=(r,s)=>{const l=t&&ko(a,s)||s;yt(a[l])&&yt(r)?a[l]=tn(a[l],r):yt(r)?a[l]=tn({},r):Ze(r)?a[l]=r.slice():(!o||!qe(r))&&(a[l]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ct(arguments[r],i);return a}const Kr=(t,o,a,{allOwnKeys:i}={})=>(ct(o,(r,s)=>{a&&xe(r)?Object.defineProperty(t,s,{value:wo(r,a),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,s,{value:r,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),t),Jr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Yr=(t,o,a,i)=>{t.prototype=Object.create(o.prototype,i),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:o.prototype}),a&&Object.assign(t.prototype,a)},Qr=(t,o,a,i)=>{let r,s,l;const c={};if(o=o||{},t==null)return o;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)l=r[s],(!i||i(l,t,o))&&!c[l]&&(o[l]=t[l],c[l]=!0);t=a!==!1&&hn(t)}while(t&&(!a||a(t,o))&&t!==Object.prototype);return o},Xr=(t,o,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=o.length;const i=t.indexOf(o,a);return i!==-1&&i===a},Zr=t=>{if(!t)return null;if(Ze(t))return t;let o=t.length;if(!Co(o))return null;const a=new Array(o);for(;o-- >0;)a[o]=t[o];return a},ei=(t=>o=>t&&o instanceof t)(typeof Uint8Array<"u"&&hn(Uint8Array)),ti=(t,o)=>{const i=(t&&t[At]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;o.call(t,s[0],s[1])}},ni=(t,o)=>{let a;const i=[];for(;(a=t.exec(o))!==null;)i.push(a);return i},oi=be("HTMLFormElement"),ai=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,i,r){return i.toUpperCase()+r}),En=(({hasOwnProperty:t})=>(o,a)=>t.call(o,a))(Object.prototype),ri=be("RegExp"),Bo=(t,o)=>{const a=Object.getOwnPropertyDescriptors(t),i={};ct(a,(r,s)=>{let l;(l=o(r,s,t))!==!1&&(i[s]=l||r)}),Object.defineProperties(t,i)},ii=t=>{Bo(t,(o,a)=>{if(xe(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const i=t[a];if(xe(i)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},si=(t,o)=>{const a={},i=r=>{r.forEach(s=>{a[s]=!0})};return Ze(t)?i(t):i(String(t).split(o)),a},li=()=>{},ci=(t,o)=>t!=null&&Number.isFinite(t=+t)?t:o;function di(t){return!!(t&&xe(t.append)&&t[So]==="FormData"&&t[At])}const pi=t=>{const o=new Array(10),a=(i,r)=>{if(lt(i)){if(o.indexOf(i)>=0)return;if(st(i))return i;if(!("toJSON"in i)){o[r]=i;const s=Ze(i)?[]:{};return ct(i,(l,c)=>{const d=a(l,r+1);!qe(d)&&(s[c]=d)}),o[r]=void 0,s}}return i};return a(t,0)},mi=be("AsyncFunction"),ui=t=>t&&(lt(t)||xe(t))&&xe(t.then)&&xe(t.catch),zo=((t,o)=>t?setImmediate:o?((a,i)=>(Fe.addEventListener("message",({source:r,data:s})=>{r===Fe&&s===a&&i.length&&i.shift()()},!1),r=>{i.push(r),Fe.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",xe(Fe.postMessage)),xi=typeof queueMicrotask<"u"?queueMicrotask.bind(Fe):typeof process<"u"&&process.nextTick||zo,gi=t=>t!=null&&xe(t[At]),R={isArray:Ze,isArrayBuffer:jo,isBuffer:st,isFormData:Ur,isArrayBufferView:Pr,isString:Ir,isNumber:Co,isBoolean:Rr,isObject:lt,isPlainObject:yt,isEmptyObject:Nr,isReadableStream:Wr,isRequest:$r,isResponse:qr,isHeaders:Hr,isUndefined:qe,isDate:Fr,isFile:Er,isBlob:Dr,isRegExp:ri,isFunction:xe,isStream:Lr,isURLSearchParams:Gr,isTypedArray:ei,isFileList:Or,forEach:ct,merge:tn,extend:Kr,trim:Vr,stripBOM:Jr,inherits:Yr,toFlatObject:Qr,kindOf:Mt,kindOfTest:be,endsWith:Xr,toArray:Zr,forEachEntry:ti,matchAll:ni,isHTMLForm:oi,hasOwnProperty:En,hasOwnProp:En,reduceDescriptors:Bo,freezeMethods:ii,toObjectSet:si,toCamelCase:ai,noop:li,toFiniteNumber:ci,findKey:ko,global:Fe,isContextDefined:To,isSpecCompliantForm:di,toJSONObject:pi,isAsyncFn:mi,isThenable:ui,setImmediate:zo,asap:xi,isIterable:gi};let X=class Ao extends Error{static from(o,a,i,r,s,l){const c=new Ao(o.message,a||o.code,i,r,s);return c.cause=o,c.name=o.name,l&&Object.assign(c,l),c}constructor(o,a,i,r,s){super(o),this.name="AxiosError",this.isAxiosError=!0,a&&(this.code=a),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}};X.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";X.ERR_BAD_OPTION="ERR_BAD_OPTION";X.ECONNABORTED="ECONNABORTED";X.ETIMEDOUT="ETIMEDOUT";X.ERR_NETWORK="ERR_NETWORK";X.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";X.ERR_DEPRECATED="ERR_DEPRECATED";X.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";X.ERR_BAD_REQUEST="ERR_BAD_REQUEST";X.ERR_CANCELED="ERR_CANCELED";X.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";X.ERR_INVALID_URL="ERR_INVALID_URL";const fi=null;function nn(t){return R.isPlainObject(t)||R.isArray(t)}function Mo(t){return R.endsWith(t,"[]")?t.slice(0,-2):t}function Dn(t,o,a){return t?t.concat(o).map(function(r,s){return r=Mo(r),!a&&s?"["+r+"]":r}).join(a?".":""):o}function hi(t){return R.isArray(t)&&!t.some(nn)}const yi=R.toFlatObject(R,{},null,function(o){return/^is[A-Z]/.test(o)});function It(t,o,a){if(!R.isObject(t))throw new TypeError("target must be an object");o=o||new FormData,a=R.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,f){return!R.isUndefined(f[S])});const i=a.metaTokens,r=a.visitor||x,s=a.dots,l=a.indexes,d=(a.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(o);if(!R.isFunction(r))throw new TypeError("visitor must be a function");function p(m){if(m===null)return"";if(R.isDate(m))return m.toISOString();if(R.isBoolean(m))return m.toString();if(!d&&R.isBlob(m))throw new X("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(m)||R.isTypedArray(m)?d&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function x(m,S,f){let v=m;if(m&&!f&&typeof m=="object"){if(R.endsWith(S,"{}"))S=i?S:S.slice(0,-2),m=JSON.stringify(m);else if(R.isArray(m)&&hi(m)||(R.isFileList(m)||R.endsWith(S,"[]"))&&(v=R.toArray(m)))return S=Mo(S),v.forEach(function(w,u){!(R.isUndefined(w)||w===null)&&o.append(l===!0?Dn([S],u,s):l===null?S:S+"[]",p(w))}),!1}return nn(m)?!0:(o.append(Dn(f,S,s),p(m)),!1)}const y=[],j=Object.assign(yi,{defaultVisitor:x,convertValue:p,isVisitable:nn});function A(m,S){if(!R.isUndefined(m)){if(y.indexOf(m)!==-1)throw Error("Circular reference detected in "+S.join("."));y.push(m),R.forEach(m,function(v,C){(!(R.isUndefined(v)||v===null)&&r.call(o,v,R.isString(C)?C.trim():C,S,j))===!0&&A(v,S?S.concat(C):[C])}),y.pop()}}if(!R.isObject(t))throw new TypeError("data must be an object");return A(t),o}function On(t){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return o[i]})}function yn(t,o){this._pairs=[],t&&It(t,this,o)}const Po=yn.prototype;Po.append=function(o,a){this._pairs.push([o,a])};Po.toString=function(o){const a=o?function(i){return o.call(this,i,On)}:On;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function _i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Io(t,o,a){if(!o)return t;const i=a&&a.encode||_i,r=R.isFunction(a)?{serialize:a}:a,s=r&&r.serialize;let l;if(s?l=s(o,r):l=R.isURLSearchParams(o)?o.toString():new yn(o,r).toString(i),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Ln{constructor(){this.handlers=[]}use(o,a,i){return this.handlers.push({fulfilled:o,rejected:a,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){R.forEach(this.handlers,function(i){i!==null&&o(i)})}}const Ro={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bi=typeof URLSearchParams<"u"?URLSearchParams:yn,vi=typeof FormData<"u"?FormData:null,wi=typeof Blob<"u"?Blob:null,Si={isBrowser:!0,classes:{URLSearchParams:bi,FormData:vi,Blob:wi},protocols:["http","https","file","blob","url","data"]},_n=typeof window<"u"&&typeof document<"u",on=typeof navigator=="object"&&navigator||void 0,ji=_n&&(!on||["ReactNative","NativeScript","NS"].indexOf(on.product)<0),Ci=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ki=_n&&window.location.href||"http://localhost",Ti=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_n,hasStandardBrowserEnv:ji,hasStandardBrowserWebWorkerEnv:Ci,navigator:on,origin:ki},Symbol.toStringTag,{value:"Module"})),ce={...Ti,...Si};function Bi(t,o){return It(t,new ce.classes.URLSearchParams,{visitor:function(a,i,r,s){return ce.isNode&&R.isBuffer(a)?(this.append(i,a.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...o})}function zi(t){return R.matchAll(/\w+|\[(\w*)]/g,t).map(o=>o[0]==="[]"?"":o[1]||o[0])}function Ai(t){const o={},a=Object.keys(t);let i;const r=a.length;let s;for(i=0;i<r;i++)s=a[i],o[s]=t[s];return o}function No(t){function o(a,i,r,s){let l=a[s++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),d=s>=a.length;return l=!l&&R.isArray(r)?r.length:l,d?(R.hasOwnProp(r,l)?r[l]=[r[l],i]:r[l]=i,!c):((!r[l]||!R.isObject(r[l]))&&(r[l]=[]),o(a,i,r[l],s)&&R.isArray(r[l])&&(r[l]=Ai(r[l])),!c)}if(R.isFormData(t)&&R.isFunction(t.entries)){const a={};return R.forEachEntry(t,(i,r)=>{o(zi(i),r,a,0)}),a}return null}function Mi(t,o,a){if(R.isString(t))try{return(o||JSON.parse)(t),R.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(a||JSON.stringify)(t)}const dt={transitional:Ro,adapter:["xhr","http","fetch"],transformRequest:[function(o,a){const i=a.getContentType()||"",r=i.indexOf("application/json")>-1,s=R.isObject(o);if(s&&R.isHTMLForm(o)&&(o=new FormData(o)),R.isFormData(o))return r?JSON.stringify(No(o)):o;if(R.isArrayBuffer(o)||R.isBuffer(o)||R.isStream(o)||R.isFile(o)||R.isBlob(o)||R.isReadableStream(o))return o;if(R.isArrayBufferView(o))return o.buffer;if(R.isURLSearchParams(o))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let c;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Bi(o,this.formSerializer).toString();if((c=R.isFileList(o))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return It(c?{"files[]":o}:o,d&&new d,this.formSerializer)}}return s||r?(a.setContentType("application/json",!1),Mi(o)):o}],transformResponse:[function(o){const a=this.transitional||dt.transitional,i=a&&a.forcedJSONParsing,r=this.responseType==="json";if(R.isResponse(o)||R.isReadableStream(o))return o;if(o&&R.isString(o)&&(i&&!this.responseType||r)){const l=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(o,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?X.from(c,X.ERR_BAD_RESPONSE,this,null,this.response):c}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ce.classes.FormData,Blob:ce.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],t=>{dt.headers[t]={}});const Pi=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ii=t=>{const o={};let a,i,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),a=l.substring(0,r).trim().toLowerCase(),i=l.substring(r+1).trim(),!(!a||o[a]&&Pi[a])&&(a==="set-cookie"?o[a]?o[a].push(i):o[a]=[i]:o[a]=o[a]?o[a]+", "+i:i)}),o},Un=Symbol("internals");function tt(t){return t&&String(t).trim().toLowerCase()}function _t(t){return t===!1||t==null?t:R.isArray(t)?t.map(_t):String(t)}function Ri(t){const o=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=a.exec(t);)o[i[1]]=i[2];return o}const Ni=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Lt(t,o,a,i,r){if(R.isFunction(i))return i.call(this,o,a);if(r&&(o=a),!!R.isString(o)){if(R.isString(i))return o.indexOf(i)!==-1;if(R.isRegExp(i))return i.test(o)}}function Fi(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,a,i)=>a.toUpperCase()+i)}function Ei(t,o){const a=R.toCamelCase(" "+o);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+a,{value:function(r,s,l){return this[i].call(this,o,r,s,l)},configurable:!0})})}let ge=class{constructor(o){o&&this.set(o)}set(o,a,i){const r=this;function s(c,d,p){const x=tt(d);if(!x)throw new Error("header name must be a non-empty string");const y=R.findKey(r,x);(!y||r[y]===void 0||p===!0||p===void 0&&r[y]!==!1)&&(r[y||d]=_t(c))}const l=(c,d)=>R.forEach(c,(p,x)=>s(p,x,d));if(R.isPlainObject(o)||o instanceof this.constructor)l(o,a);else if(R.isString(o)&&(o=o.trim())&&!Ni(o))l(Ii(o),a);else if(R.isObject(o)&&R.isIterable(o)){let c={},d,p;for(const x of o){if(!R.isArray(x))throw TypeError("Object iterator must return a key-value pair");c[p=x[0]]=(d=c[p])?R.isArray(d)?[...d,x[1]]:[d,x[1]]:x[1]}l(c,a)}else o!=null&&s(a,o,i);return this}get(o,a){if(o=tt(o),o){const i=R.findKey(this,o);if(i){const r=this[i];if(!a)return r;if(a===!0)return Ri(r);if(R.isFunction(a))return a.call(this,r,i);if(R.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,a){if(o=tt(o),o){const i=R.findKey(this,o);return!!(i&&this[i]!==void 0&&(!a||Lt(this,this[i],i,a)))}return!1}delete(o,a){const i=this;let r=!1;function s(l){if(l=tt(l),l){const c=R.findKey(i,l);c&&(!a||Lt(i,i[c],c,a))&&(delete i[c],r=!0)}}return R.isArray(o)?o.forEach(s):s(o),r}clear(o){const a=Object.keys(this);let i=a.length,r=!1;for(;i--;){const s=a[i];(!o||Lt(this,this[s],s,o,!0))&&(delete this[s],r=!0)}return r}normalize(o){const a=this,i={};return R.forEach(this,(r,s)=>{const l=R.findKey(i,s);if(l){a[l]=_t(r),delete a[s];return}const c=o?Fi(s):String(s).trim();c!==s&&delete a[s],a[c]=_t(r),i[c]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const a=Object.create(null);return R.forEach(this,(i,r)=>{i!=null&&i!==!1&&(a[r]=o&&R.isArray(i)?i.join(", "):i)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,a])=>o+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...a){const i=new this(o);return a.forEach(r=>i.set(r)),i}static accessor(o){const i=(this[Un]=this[Un]={accessors:{}}).accessors,r=this.prototype;function s(l){const c=tt(l);i[c]||(Ei(r,l),i[c]=!0)}return R.isArray(o)?o.forEach(s):s(o),this}};ge.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(ge.prototype,({value:t},o)=>{let a=o[0].toUpperCase()+o.slice(1);return{get:()=>t,set(i){this[a]=i}}});R.freezeMethods(ge);function Ut(t,o){const a=this||dt,i=o||a,r=ge.from(i.headers);let s=i.data;return R.forEach(t,function(c){s=c.call(a,s,r.normalize(),o?o.status:void 0)}),r.normalize(),s}function Fo(t){return!!(t&&t.__CANCEL__)}let pt=class extends X{constructor(o,a,i){super(o??"canceled",X.ERR_CANCELED,a,i),this.name="CanceledError",this.__CANCEL__=!0}};function Eo(t,o,a){const i=a.config.validateStatus;!a.status||!i||i(a.status)?t(a):o(new X("Request failed with status code "+a.status,[X.ERR_BAD_REQUEST,X.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Di(t){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return o&&o[1]||""}function Oi(t,o){t=t||10;const a=new Array(t),i=new Array(t);let r=0,s=0,l;return o=o!==void 0?o:1e3,function(d){const p=Date.now(),x=i[s];l||(l=p),a[r]=d,i[r]=p;let y=s,j=0;for(;y!==r;)j+=a[y++],y=y%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),p-l<o)return;const A=x&&p-x;return A?Math.round(j*1e3/A):void 0}}function Li(t,o){let a=0,i=1e3/o,r,s;const l=(p,x=Date.now())=>{a=x,r=null,s&&(clearTimeout(s),s=null),t(...p)};return[(...p)=>{const x=Date.now(),y=x-a;y>=i?l(p,x):(r=p,s||(s=setTimeout(()=>{s=null,l(r)},i-y)))},()=>r&&l(r)]}const jt=(t,o,a=3)=>{let i=0;const r=Oi(50,250);return Li(s=>{const l=s.loaded,c=s.lengthComputable?s.total:void 0,d=l-i,p=r(d),x=l<=c;i=l;const y={loaded:l,total:c,progress:c?l/c:void 0,bytes:d,rate:p||void 0,estimated:p&&c&&x?(c-l)/p:void 0,event:s,lengthComputable:c!=null,[o?"download":"upload"]:!0};t(y)},a)},Gn=(t,o)=>{const a=t!=null;return[i=>o[0]({lengthComputable:a,total:t,loaded:i}),o[1]]},Wn=t=>(...o)=>R.asap(()=>t(...o)),Ui=ce.hasStandardBrowserEnv?((t,o)=>a=>(a=new URL(a,ce.origin),t.protocol===a.protocol&&t.host===a.host&&(o||t.port===a.port)))(new URL(ce.origin),ce.navigator&&/(msie|trident)/i.test(ce.navigator.userAgent)):()=>!0,Gi=ce.hasStandardBrowserEnv?{write(t,o,a,i,r,s,l){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(o)}`];R.isNumber(a)&&c.push(`expires=${new Date(a).toUTCString()}`),R.isString(i)&&c.push(`path=${i}`),R.isString(r)&&c.push(`domain=${r}`),s===!0&&c.push("secure"),R.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const o=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return o?decodeURIComponent(o[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Wi(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $i(t,o){return o?t.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):t}function Do(t,o,a){let i=!Wi(o);return t&&(i||a==!1)?$i(t,o):o}const $n=t=>t instanceof ge?{...t}:t;function Oe(t,o){o=o||{};const a={};function i(p,x,y,j){return R.isPlainObject(p)&&R.isPlainObject(x)?R.merge.call({caseless:j},p,x):R.isPlainObject(x)?R.merge({},x):R.isArray(x)?x.slice():x}function r(p,x,y,j){if(R.isUndefined(x)){if(!R.isUndefined(p))return i(void 0,p,y,j)}else return i(p,x,y,j)}function s(p,x){if(!R.isUndefined(x))return i(void 0,x)}function l(p,x){if(R.isUndefined(x)){if(!R.isUndefined(p))return i(void 0,p)}else return i(void 0,x)}function c(p,x,y){if(y in o)return i(p,x);if(y in t)return i(void 0,p)}const d={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(p,x,y)=>r($n(p),$n(x),y,!0)};return R.forEach(Object.keys({...t,...o}),function(x){const y=d[x]||r,j=y(t[x],o[x],x);R.isUndefined(j)&&y!==c||(a[x]=j)}),a}const Oo=t=>{const o=Oe({},t);let{data:a,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:l,auth:c}=o;if(o.headers=l=ge.from(l),o.url=Io(Do(o.baseURL,o.url,o.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),R.isFormData(a)){if(ce.hasStandardBrowserEnv||ce.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(R.isFunction(a.getHeaders)){const d=a.getHeaders(),p=["content-type","content-length"];Object.entries(d).forEach(([x,y])=>{p.includes(x.toLowerCase())&&l.set(x,y)})}}if(ce.hasStandardBrowserEnv&&(i&&R.isFunction(i)&&(i=i(o)),i||i!==!1&&Ui(o.url))){const d=r&&s&&Gi.read(s);d&&l.set(r,d)}return o},qi=typeof XMLHttpRequest<"u",Hi=qi&&function(t){return new Promise(function(a,i){const r=Oo(t);let s=r.data;const l=ge.from(r.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:p}=r,x,y,j,A,m;function S(){A&&A(),m&&m(),r.cancelToken&&r.cancelToken.unsubscribe(x),r.signal&&r.signal.removeEventListener("abort",x)}let f=new XMLHttpRequest;f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout;function v(){if(!f)return;const w=ge.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),b={data:!c||c==="text"||c==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:w,config:t,request:f};Eo(function(k){a(k),S()},function(k){i(k),S()},b),f=null}"onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(v)},f.onabort=function(){f&&(i(new X("Request aborted",X.ECONNABORTED,t,f)),f=null)},f.onerror=function(u){const b=u&&u.message?u.message:"Network Error",_=new X(b,X.ERR_NETWORK,t,f);_.event=u||null,i(_),f=null},f.ontimeout=function(){let u=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const b=r.transitional||Ro;r.timeoutErrorMessage&&(u=r.timeoutErrorMessage),i(new X(u,b.clarifyTimeoutError?X.ETIMEDOUT:X.ECONNABORTED,t,f)),f=null},s===void 0&&l.setContentType(null),"setRequestHeader"in f&&R.forEach(l.toJSON(),function(u,b){f.setRequestHeader(b,u)}),R.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),c&&c!=="json"&&(f.responseType=r.responseType),p&&([j,m]=jt(p,!0),f.addEventListener("progress",j)),d&&f.upload&&([y,A]=jt(d),f.upload.addEventListener("progress",y),f.upload.addEventListener("loadend",A)),(r.cancelToken||r.signal)&&(x=w=>{f&&(i(!w||w.type?new pt(null,t,f):w),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(x),r.signal&&(r.signal.aborted?x():r.signal.addEventListener("abort",x)));const C=Di(r.url);if(C&&ce.protocols.indexOf(C)===-1){i(new X("Unsupported protocol "+C+":",X.ERR_BAD_REQUEST,t));return}f.send(s||null)})},Vi=(t,o)=>{const{length:a}=t=t?t.filter(Boolean):[];if(o||a){let i=new AbortController,r;const s=function(p){if(!r){r=!0,c();const x=p instanceof Error?p:this.reason;i.abort(x instanceof X?x:new pt(x instanceof Error?x.message:x))}};let l=o&&setTimeout(()=>{l=null,s(new X(`timeout of ${o}ms exceeded`,X.ETIMEDOUT))},o);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(s):p.removeEventListener("abort",s)}),t=null)};t.forEach(p=>p.addEventListener("abort",s));const{signal:d}=i;return d.unsubscribe=()=>R.asap(c),d}},Ki=function*(t,o){let a=t.byteLength;if(a<o){yield t;return}let i=0,r;for(;i<a;)r=i+o,yield t.slice(i,r),i=r},Ji=async function*(t,o){for await(const a of Yi(t))yield*Ki(a,o)},Yi=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const o=t.getReader();try{for(;;){const{done:a,value:i}=await o.read();if(a)break;yield i}}finally{await o.cancel()}},qn=(t,o,a,i)=>{const r=Ji(t,o);let s=0,l,c=d=>{l||(l=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:p,value:x}=await r.next();if(p){c(),d.close();return}let y=x.byteLength;if(a){let j=s+=y;a(j)}d.enqueue(new Uint8Array(x))}catch(p){throw c(p),p}},cancel(d){return c(d),r.return()}},{highWaterMark:2})},Hn=64*1024,{isFunction:gt}=R,Qi=(({Request:t,Response:o})=>({Request:t,Response:o}))(R.global),{ReadableStream:Vn,TextEncoder:Kn}=R.global,Jn=(t,...o)=>{try{return!!t(...o)}catch{return!1}},Xi=t=>{t=R.merge.call({skipUndefined:!0},Qi,t);const{fetch:o,Request:a,Response:i}=t,r=o?gt(o):typeof fetch=="function",s=gt(a),l=gt(i);if(!r)return!1;const c=r&&gt(Vn),d=r&&(typeof Kn=="function"?(m=>S=>m.encode(S))(new Kn):async m=>new Uint8Array(await new a(m).arrayBuffer())),p=s&&c&&Jn(()=>{let m=!1;const S=new a(ce.origin,{body:new Vn,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!S}),x=l&&c&&Jn(()=>R.isReadableStream(new i("").body)),y={stream:x&&(m=>m.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!y[m]&&(y[m]=(S,f)=>{let v=S&&S[m];if(v)return v.call(S);throw new X(`Response type '${m}' is not supported`,X.ERR_NOT_SUPPORT,f)})});const j=async m=>{if(m==null)return 0;if(R.isBlob(m))return m.size;if(R.isSpecCompliantForm(m))return(await new a(ce.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(R.isArrayBufferView(m)||R.isArrayBuffer(m))return m.byteLength;if(R.isURLSearchParams(m)&&(m=m+""),R.isString(m))return(await d(m)).byteLength},A=async(m,S)=>{const f=R.toFiniteNumber(m.getContentLength());return f??j(S)};return async m=>{let{url:S,method:f,data:v,signal:C,cancelToken:w,timeout:u,onDownloadProgress:b,onUploadProgress:_,responseType:k,headers:N,withCredentials:U="same-origin",fetchOptions:T}=Oo(m),$=o||fetch;k=k?(k+"").toLowerCase():"text";let z=Vi([C,w&&w.toAbortSignal()],u),L=null;const g=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let P;try{if(_&&p&&f!=="get"&&f!=="head"&&(P=await A(N,v))!==0){let O=new a(S,{method:"POST",body:v,duplex:"half"}),K;if(R.isFormData(v)&&(K=O.headers.get("content-type"))&&N.setContentType(K),O.body){const[te,Z]=Gn(P,jt(Wn(_)));v=qn(O.body,Hn,te,Z)}}R.isString(U)||(U=U?"include":"omit");const I=s&&"credentials"in a.prototype,q={...T,signal:z,method:f.toUpperCase(),headers:N.normalize().toJSON(),body:v,duplex:"half",credentials:I?U:void 0};L=s&&new a(S,q);let W=await(s?$(L,T):$(S,q));const J=x&&(k==="stream"||k==="response");if(x&&(b||J&&g)){const O={};["status","statusText","headers"].forEach(G=>{O[G]=W[G]});const K=R.toFiniteNumber(W.headers.get("content-length")),[te,Z]=b&&Gn(K,jt(Wn(b),!0))||[];W=new i(qn(W.body,Hn,te,()=>{Z&&Z(),g&&g()}),O)}k=k||"text";let M=await y[R.findKey(y,k)||"text"](W,m);return!J&&g&&g(),await new Promise((O,K)=>{Eo(O,K,{data:M,headers:ge.from(W.headers),status:W.status,statusText:W.statusText,config:m,request:L})})}catch(I){throw g&&g(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new X("Network Error",X.ERR_NETWORK,m,L),{cause:I.cause||I}):X.from(I,I&&I.code,m,L)}}},Zi=new Map,Lo=t=>{let o=t&&t.env||{};const{fetch:a,Request:i,Response:r}=o,s=[i,r,a];let l=s.length,c=l,d,p,x=Zi;for(;c--;)d=s[c],p=x.get(d),p===void 0&&x.set(d,p=c?new Map:Xi(o)),x=p;return p};Lo();const bn={http:fi,xhr:Hi,fetch:{get:Lo}};R.forEach(bn,(t,o)=>{if(t){try{Object.defineProperty(t,"name",{value:o})}catch{}Object.defineProperty(t,"adapterName",{value:o})}});const Yn=t=>`- ${t}`,es=t=>R.isFunction(t)||t===null||t===!1;function ts(t,o){t=R.isArray(t)?t:[t];const{length:a}=t;let i,r;const s={};for(let l=0;l<a;l++){i=t[l];let c;if(r=i,!es(i)&&(r=bn[(c=String(i)).toLowerCase()],r===void 0))throw new X(`Unknown adapter '${c}'`);if(r&&(R.isFunction(r)||(r=r.get(o))))break;s[c||"#"+l]=r}if(!r){const l=Object.entries(s).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=a?l.length>1?`since :
`+l.map(Yn).join(`
`):" "+Yn(l[0]):"as no adapter specified";throw new X("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r}const Uo={getAdapter:ts,adapters:bn};function Gt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new pt(null,t)}function Qn(t){return Gt(t),t.headers=ge.from(t.headers),t.data=Ut.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Uo.getAdapter(t.adapter||dt.adapter,t)(t).then(function(i){return Gt(t),i.data=Ut.call(t,t.transformResponse,i),i.headers=ge.from(i.headers),i},function(i){return Fo(i)||(Gt(t),i&&i.response&&(i.response.data=Ut.call(t,t.transformResponse,i.response),i.response.headers=ge.from(i.response.headers))),Promise.reject(i)})}const Go="1.13.3",Rt={};["object","boolean","number","function","string","symbol"].forEach((t,o)=>{Rt[t]=function(i){return typeof i===t||"a"+(o<1?"n ":" ")+t}});const Xn={};Rt.transitional=function(o,a,i){function r(s,l){return"[Axios v"+Go+"] Transitional option '"+s+"'"+l+(i?". "+i:"")}return(s,l,c)=>{if(o===!1)throw new X(r(l," has been removed"+(a?" in "+a:"")),X.ERR_DEPRECATED);return a&&!Xn[l]&&(Xn[l]=!0,console.warn(r(l," has been deprecated since v"+a+" and will be removed in the near future"))),o?o(s,l,c):!0}};Rt.spelling=function(o){return(a,i)=>(console.warn(`${i} is likely a misspelling of ${o}`),!0)};function ns(t,o,a){if(typeof t!="object")throw new X("options must be an object",X.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],l=o[s];if(l){const c=t[s],d=c===void 0||l(c,s,t);if(d!==!0)throw new X("option "+s+" must be "+d,X.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new X("Unknown option "+s,X.ERR_BAD_OPTION)}}const bt={assertOptions:ns,validators:Rt},ve=bt.validators;let Ee=class{constructor(o){this.defaults=o||{},this.interceptors={request:new Ln,response:new Ln}}async request(o,a){try{return await this._request(o,a)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(o,a){typeof o=="string"?(a=a||{},a.url=o):a=o||{},a=Oe(this.defaults,a);const{transitional:i,paramsSerializer:r,headers:s}=a;i!==void 0&&bt.assertOptions(i,{silentJSONParsing:ve.transitional(ve.boolean),forcedJSONParsing:ve.transitional(ve.boolean),clarifyTimeoutError:ve.transitional(ve.boolean)},!1),r!=null&&(R.isFunction(r)?a.paramsSerializer={serialize:r}:bt.assertOptions(r,{encode:ve.function,serialize:ve.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),bt.assertOptions(a,{baseUrl:ve.spelling("baseURL"),withXsrfToken:ve.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=s&&R.merge(s.common,s[a.method]);s&&R.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),a.headers=ge.concat(l,s);const c=[];let d=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(a)===!1||(d=d&&S.synchronous,c.unshift(S.fulfilled,S.rejected))});const p=[];this.interceptors.response.forEach(function(S){p.push(S.fulfilled,S.rejected)});let x,y=0,j;if(!d){const m=[Qn.bind(this),void 0];m.unshift(...c),m.push(...p),j=m.length,x=Promise.resolve(a);let S=a;for(;y<j;)x=x.then(m[y++]).then(f=>{S=f!==void 0?f:S}).catch(m[y++]).then(()=>S);return x}j=c.length;let A=a;for(;y<j;){const m=c[y++],S=c[y++];try{A=m(A)}catch(f){S.call(this,f);break}}try{x=Qn.call(this,A)}catch(m){return Promise.reject(m)}for(y=0,j=p.length;y<j;)x=x.then(p[y++]).catch(p[y++]);return x}getUri(o){o=Oe(this.defaults,o);const a=Do(o.baseURL,o.url,o.allowAbsoluteUrls);return Io(a,o.params,o.paramsSerializer)}};R.forEach(["delete","get","head","options"],function(o){Ee.prototype[o]=function(a,i){return this.request(Oe(i||{},{method:o,url:a,data:(i||{}).data}))}});R.forEach(["post","put","patch"],function(o){function a(i){return function(s,l,c){return this.request(Oe(c||{},{method:o,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}Ee.prototype[o]=a(),Ee.prototype[o+"Form"]=a(!0)});let os=class Wo{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(s){a=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const l=new Promise(c=>{i.subscribe(c),s=c}).then(r);return l.cancel=function(){i.unsubscribe(s)},l},o(function(s,l,c){i.reason||(i.reason=new pt(s,l,c),a(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const a=this._listeners.indexOf(o);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const o=new AbortController,a=i=>{o.abort(i)};return this.subscribe(a),o.signal.unsubscribe=()=>this.unsubscribe(a),o.signal}static source(){let o;return{token:new Wo(function(r){o=r}),cancel:o}}};function as(t){return function(a){return t.apply(null,a)}}function rs(t){return R.isObject(t)&&t.isAxiosError===!0}const an={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(an).forEach(([t,o])=>{an[o]=t});function $o(t){const o=new Ee(t),a=wo(Ee.prototype.request,o);return R.extend(a,Ee.prototype,o,{allOwnKeys:!0}),R.extend(a,o,null,{allOwnKeys:!0}),a.create=function(r){return $o(Oe(t,r))},a}const re=$o(dt);re.Axios=Ee;re.CanceledError=pt;re.CancelToken=os;re.isCancel=Fo;re.VERSION=Go;re.toFormData=It;re.AxiosError=X;re.Cancel=re.CanceledError;re.all=function(o){return Promise.all(o)};re.spread=as;re.isAxiosError=rs;re.mergeConfig=Oe;re.AxiosHeaders=ge;re.formToJSON=t=>No(R.isHTMLForm(t)?new FormData(t):t);re.getAdapter=Uo.getAdapter;re.HttpStatusCode=an;re.default=re;const{Axios:Fl,AxiosError:El,CanceledError:Dl,isCancel:Ol,CancelToken:Ll,VERSION:Ul,all:Gl,Cancel:Wl,isAxiosError:$l,spread:ql,toFormData:Hl,AxiosHeaders:Vl,HttpStatusCode:Kl,formToJSON:Jl,getAdapter:Yl,mergeConfig:Ql}=re,vn="https://sentinel-authority-production.up.railway.app",Ue=vn,E=re.create({baseURL:vn});E.interceptors.request.use(t=>{const o=localStorage.getItem("token");return o&&(t.headers.Authorization=`Bearer ${o}`),t});const qo=h.createContext(null);function is({children:t}){const[o,a]=h.useState(null),[i,r]=h.useState(!0);h.useEffect(()=>{const d=localStorage.getItem("token"),p=localStorage.getItem("user");d&&p&&a(JSON.parse(p)),r(!1)},[]);const s=async(d,p)=>{const x=await E.post("/api/auth/login",{email:d,password:p});return localStorage.setItem("token",x.data.access_token),localStorage.setItem("user",JSON.stringify(x.data.user)),a(x.data.user),x.data.user},l=async d=>{const p=await E.post("/api/auth/register",d);return localStorage.setItem("token",p.data.access_token),localStorage.setItem("user",JSON.stringify(p.data.user)),a(p.data.user),p.data.user},c=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null)};return e.jsx(qo.Provider,{value:{user:o,login:s,register:l,logout:c,loading:i},children:t})}function le(){return h.useContext(qo)}const Ho=fe.createContext();function ss({children:t}){const[o,a]=h.useState([]),i=fe.useCallback((s,l="info")=>{const c=Date.now()+Math.random();a(d=>[...d,{id:c,message:s,type:l}]),setTimeout(()=>a(d=>d.filter(p=>p.id!==c)),4500)},[]),r=fe.useCallback(s=>{a(l=>l.filter(c=>c.id!==s))},[]);return e.jsxs(Ho.Provider,{value:{show:i},children:[t,e.jsx("div",{style:{position:"fixed",bottom:"24px",right:"24px",zIndex:9999,display:"flex",flexDirection:"column",gap:"8px",maxWidth:"420px"},children:o.map(s=>{const l={success:{bg:"rgba(92,214,133,0.12)",border:"rgba(92,214,133,0.4)",text:"#5CD685",icon:""},error:{bg:"rgba(214,92,92,0.12)",border:"rgba(214,92,92,0.4)",text:"#D65C5C",icon:""},warning:{bg:"rgba(214,160,92,0.12)",border:"rgba(214,160,92,0.4)",text:"#D6A05C",icon:""},info:{bg:"rgba(157,140,207,0.12)",border:"rgba(157,140,207,0.4)",text:"#9D8CCF",icon:""}},c=l[s.type]||l.info;return e.jsxs("div",{style:{background:c.bg,backdropFilter:"blur(12px)",border:`1px solid ${c.border}`,borderRadius:"10px",padding:"12px 16px",display:"flex",alignItems:"flex-start",gap:"10px",animation:"toastSlideIn 0.25s ease-out",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[e.jsx("span",{style:{fontSize:"14px",lineHeight:"1",marginTop:"1px"},children:c.icon}),e.jsx("span",{style:{flex:1,color:c.text,fontSize:"13px",lineHeight:"1.4",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:s.message}),e.jsx("button",{onClick:()=>r(s.id),style:{background:"none",border:"none",color:c.text,cursor:"pointer",fontSize:"14px",padding:"0",lineHeight:"1",opacity:.6},children:""})]},s.id)})}),e.jsx("style",{children:"@keyframes toastSlideIn { from { transform: translateX(100px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }"})]})}function ye(){return fe.useContext(Ho)}const n={bgPrimary:"#0d0f14",bgDeep:"#2a2f3d",bgPanel:"rgba(255,255,255,0.03)",bgCard:"rgba(255,255,255,0.08)",purplePrimary:"#5B4B8A",purpleBright:"#a896d6",accentGreen:"#5CD685",accentAmber:"#D6A05C",accentRed:"#D65C5C",textPrimary:"rgba(255,255,255,0.92)",textSecondary:"rgba(255,255,255,0.78)",textTertiary:"rgba(255,255,255,0.55)",borderGlass:"rgba(255,255,255,0.07)",borderSubtle:"rgba(255,255,255,0.04)",mono:"Consolas, 'IBM Plex Mono', monospace",serif:"Georgia, 'Source Serif 4', serif"},Vo=fe.createContext();function ls({children:t}){const[o,a]=h.useState({open:!1,title:"",message:"",onConfirm:null,confirmLabel:"Confirm",danger:!1}),i=r=>new Promise(s=>{a({open:!0,title:r.title||"Confirm",message:r.message||"Are you sure?",confirmLabel:r.confirmLabel||"Confirm",danger:r.danger||!1,onConfirm:()=>{a(l=>({...l,open:!1})),s(!0)},onCancel:()=>{a(l=>({...l,open:!1})),s(!1)}})});return e.jsxs(Vo.Provider,{value:i,children:[t,o.open&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)"},children:e.jsxs("div",{style:{background:n.bgCard,border:`1px solid ${n.borderGlass}`,borderRadius:"16px",maxWidth:"420px",width:"90%",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"24px 24px 16px"},children:[e.jsx("h3",{style:{margin:"0 0 8px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:o.danger?"#D65C5C":n.purpleBright},children:o.title}),e.jsx("p",{style:{margin:0,color:n.textSecondary,fontSize:"14px",lineHeight:"1.5"},children:o.message})]}),e.jsxs("div",{style:{padding:"16px 24px",display:"flex",justifyContent:"flex-end",gap:"10px",borderTop:`1px solid ${n.borderGlass}`},children:[e.jsx("button",{onClick:o.onCancel,style:{padding:"8px 20px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textSecondary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:o.onConfirm,style:{padding:"8px 20px",borderRadius:"8px",background:o.danger?"rgba(214,92,92,0.2)":n.purplePrimary,border:`1px solid ${o.danger?"rgba(214,92,92,0.4)":n.purpleBright}`,color:o.danger?"#D65C5C":"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:o.confirmLabel})]})]})})]})}const Ce=()=>fe.useContext(Vo);function me({children:t,roles:o}){const{user:a,loading:i}=le();return i?e.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"#2a2f3d",color:"rgba(255,255,255,0.94)"},children:"Loading..."}):a?o&&!o.includes(a.role)?e.jsx(Xt,{to:"/dashboard"}):t:e.jsx(Xt,{to:"/login"})}function cs(){const[t,o]=h.useState(window.innerWidth<768);return h.useEffect(()=>{const a=()=>o(window.innerWidth<768);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t}function Zn({size:t=24}){return e.jsxs("div",{className:"flex items-center justify-center flex-shrink-0",style:{width:t,height:t,background:"#5B4B8A",border:"2px solid #a896d6",borderRadius:6},children:[e.jsx("div",{className:"rounded-full",style:{width:t*.33,height:t*.33,background:"#c4b8e8",animation:"eyePulse 7s ease-in-out infinite"}}),e.jsx("style",{children:`
        @keyframes eyePulse {
          0%, 100% { opacity: 0.75; transform: scale(0.98); box-shadow: 0 0 0 rgba(196,184,232,0); }
          50% { opacity: 1; transform: scale(1.02); box-shadow: 0 0 10px rgba(157,140,207,0.22); }
        }
      `})]})}function ue({children:t}){var k;const{user:o,logout:a}=le(),i=cs(),[r,s]=h.useState(!i),[l,c]=h.useState([]),[d,p]=h.useState([]),x=Xe(),[y,j]=h.useState([]),[A,m]=h.useState(!1),[S,f]=h.useState(0);h.useEffect(()=>{o&&(E.get("/api/certificates/").then(N=>c(N.data||[])).catch(()=>c([])),E.get("/api/applications/").then(N=>p(N.data.applications||N.data||[])).catch(()=>p([])),localStorage.getItem("token")&&E.get("/api/users/notifications").then(N=>{j(N.data.notifications||[]),f(N.data.unread_count||0)}).catch(()=>{}))},[o]),h.useEffect(()=>{if(!o)return;const N=setInterval(()=>{localStorage.getItem("token")&&E.get("/api/users/notifications").then(U=>{j(U.data.notifications||[]),f(U.data.unread_count||0)}).catch(()=>{})},6e4);return()=>clearInterval(N)},[o]);const v=()=>{E.post("/api/users/notifications/mark-read").then(()=>f(0)).catch(()=>{}),m(!1)},C=[{name:"Dashboard",href:"/dashboard",icon:oo,roles:["admin","applicant"]},{name:"Applications",href:"/applications",icon:$e,roles:["admin","applicant"]},{name:"CAT-72 Console",href:"/cat72",icon:ao,roles:["admin","applicant"]},{name:"Certificates",href:"/certificates",icon:vt,roles:["admin","applicant"]},{name:"Resources",href:"/resources",icon:ro,roles:["admin","applicant"]},{name:"ENVELO Agent",href:"/envelo",icon:"brand",roles:["admin","applicant"],requiresCert:!0},{name:"Monitoring",href:"/monitoring",icon:ua,roles:["admin","applicant"]},{name:"User Management",href:"/users",icon:io,roles:["admin"]},{name:"My Activity",href:"/my-activity",icon:dn,roles:["admin","applicant"]},{name:"Activity Log",href:"/activity",icon:$e,roles:["admin"]},{name:"Settings",href:"/settings",icon:xa,roles:["admin","applicant"]},{name:"API Docs",href:"/api-docs",icon:Kt,roles:["admin"]}],w=Array.isArray(l)&&l.some(N=>N.state==="conformant"||N.state==="active"||N.state==="issued"),u=Array.isArray(d)&&d.some(N=>N.state==="approved"||N.state==="testing"),b=w||u,_=C.filter(N=>!(!N.roles.includes((o==null?void 0:o.role)||"")||N.requiresCert&&(o==null?void 0:o.role)!=="admin"&&!b));return e.jsxs("div",{className:"min-h-screen",style:{background:"#2a2f3d",color:n.textPrimary,fontFamily:"Calibri, 'Inter', system-ui, -apple-system, sans-serif"},children:[e.jsx("div",{style:{position:"fixed",top:"-10%",left:"5%",width:"500px",height:"500px",background:"radial-gradient(circle, rgba(91,75,138,0.18) 0%, transparent 70%)",animation:"float1 20s ease-in-out infinite",pointerEvents:"none",zIndex:0}}),e.jsx("div",{style:{position:"fixed",bottom:"-20%",right:"0%",width:"700px",height:"700px",background:"radial-gradient(circle, rgba(92,214,133,0.06) 0%, transparent 70%)",animation:"float2 25s ease-in-out infinite",pointerEvents:"none",zIndex:0}}),e.jsx("div",{style:{position:"fixed",top:"50%",right:"20%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(157,140,207,0.10) 0%, transparent 70%)",animation:"float3 15s ease-in-out infinite",pointerEvents:"none",zIndex:0}}),e.jsx("style",{children:`
        @keyframes float1 { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(40px, -40px) scale(1.05); } 66% { transform: translate(-30px, 30px) scale(0.95); } }
        @keyframes float2 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-50px, -50px) scale(1.1); } }
        @keyframes float3 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(30px, 40px); } }
        .sexy-panel { transition: all 0.3s ease; }
        .sexy-panel:hover { transform: translateY(-2px); box-shadow: 0 12px 40px rgba(0,0,0,0.3); }
        .sexy-btn { transition: all 0.3s ease; }
        .sexy-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(91,75,138,0.4); }
        .sexy-input { transition: all 0.3s ease; }
        .sexy-input:focus { border-color: rgba(157,140,207,0.6) !important; box-shadow: 0 0 0 3px rgba(157,140,207,0.1); transform: translateY(-1px); }
        .sexy-row { transition: all 0.2s ease; }
        .sexy-row:hover { background: rgba(157,140,207,0.08) !important; }
        /* Mobile Responsiveness */
        @media (max-width: 768px) {
          .sa-main-content { padding: 16px !important; }
          .sa-stat-grid { grid-template-columns: repeat(2, 1fr) !important; }
          .sa-stat-grid-3 { grid-template-columns: repeat(2, 1fr) !important; }
          .sa-header-links { display: none !important; }
          .sa-page-title { font-size: 22px !important; }
          .sa-table-wrap { margin: 0 -16px; border-radius: 0 !important; }
          .sa-table-wrap table { font-size: 12px; }
        }
        @media (max-width: 480px) {
          .sa-main-content { padding: 12px !important; }
          .sa-stat-grid { grid-template-columns: 1fr !important; }
          .sa-stat-grid-3 { grid-template-columns: 1fr !important; }
        }
      `}),e.jsx("div",{className:"fixed inset-0 pointer-events-none",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.2,maskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)",zIndex:0}}),i&&r&&e.jsx("div",{onClick:()=>s(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:40}}),e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 transform transition-transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,style:{background:"rgba(42,47,61,0.88)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",borderRight:"1px solid rgba(255,255,255,0.08)",boxShadow:"4px 0 24px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsxs(ne,{to:"/dashboard",className:"flex items-center gap-3 no-underline",children:[e.jsx(Zn,{size:24}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",fontWeight:500,letterSpacing:"3px",textTransform:"uppercase",color:n.textPrimary},children:"Sentinel Authority"})]}),e.jsx("button",{onClick:()=>s(!1),className:"lg:hidden",style:{color:n.textSecondary},children:e.jsx(Jt,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"p-4 space-y-1",children:_.map(N=>e.jsxs(ne,{to:N.href,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all no-underline",style:{background:x.pathname.startsWith(N.href)?"linear-gradient(135deg, rgba(91,75,138,0.9) 0%, rgba(107,91,154,0.9) 100%)":"transparent",color:x.pathname.startsWith(N.href)?"#fff":n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",boxShadow:x.pathname.startsWith(N.href)?"0 4px 15px rgba(91,75,138,0.4)":"none",border:x.pathname.startsWith(N.href)?"1px solid rgba(157,140,207,0.3)":"1px solid transparent"},children:[N.icon==="brand"?e.jsx(Zn,{size:18}):e.jsx(N.icon,{className:"w-4 h-4"}),N.name]},N.name))}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",style:{borderTop:`1px solid ${n.borderGlass}`},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`},children:e.jsx("span",{style:{color:"#fff",fontWeight:500},children:((k=o==null?void 0:o.full_name)==null?void 0:k[0])||"U"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,color:n.textPrimary},children:o==null?void 0:o.full_name}),e.jsx("div",{style:{fontSize:"11px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px"},children:o==null?void 0:o.role})]})]}),e.jsxs("button",{onClick:a,className:"flex items-center gap-2 w-full transition-colors",style:{color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",background:"none",border:"none",cursor:"pointer"},children:[e.jsx(ga,{className:"w-4 h-4"}),"Sign Out"]})]})]}),e.jsxs("div",{className:"lg:ml-64 relative z-10",children:[e.jsxs("header",{className:"h-16 flex items-center px-6 gap-4",style:{borderBottom:"1px solid rgba(255,255,255,0.06)",background:"rgba(42,47,61,0.88)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[e.jsx("button",{onClick:()=>s(!r),className:"lg:hidden",style:{color:n.textSecondary,background:"none",border:"none"},children:e.jsx(fa,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1"}),e.jsxs("a",{href:"https://sentinelauthority.org",target:"_blank",rel:"noopener noreferrer",className:"sa-header-links flex items-center gap-2 transition-colors no-underline",style:{color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase"},children:[e.jsx(Kt,{className:"w-4 h-4"}),"Main Site"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>m(!A),style:{background:"none",border:"none",cursor:"pointer",position:"relative",padding:"4px",color:A?n.purpleBright:n.textTertiary,transition:"color 0.2s"},children:[e.jsx(ha,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5"}),S>0&&e.jsx("span",{style:{position:"absolute",top:"-2px",right:"-2px",minWidth:"16px",height:"16px",borderRadius:"50%",background:"#D65C5C",color:"#fff",fontSize:"9px",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Consolas, 'IBM Plex Mono', monospace",padding:"0 3px"},children:S>9?"9+":S})]}),A&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>m(!1),style:{position:"fixed",inset:0,zIndex:90}}),e.jsxs("div",{style:{position:"absolute",right:0,top:"40px",width:"360px",maxHeight:"480px",overflowY:"auto",background:"rgba(42,47,61,0.96)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",zIndex:100},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Notifications"}),S>0&&e.jsx("button",{onClick:v,style:{background:"none",border:"none",color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer"},children:"Mark all read"})]}),y.length===0?e.jsx("div",{style:{padding:"32px 16px",textAlign:"center",color:n.textTertiary,fontSize:"13px",fontStyle:"italic"},children:"No recent activity"}):y.map((N,U)=>{const T=!N.read,$={success:n.accentGreen,warning:"#D6A05C",info:n.purpleBright,error:"#D65C5C"}[N.type]||n.purpleBright,z={success:"",warning:"",info:"",error:""}[N.type]||"";return e.jsx("div",{onClick:()=>{N.resource_type==="application"&&N.resource_id&&(m(!1),window.location.hash="#/applications/"+N.resource_id)},style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.04)",background:T?"rgba(157,140,207,0.06)":"transparent",cursor:N.resource_id?"pointer":"default",transition:"background 0.15s"},children:e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:$,fontSize:"12px",marginTop:"2px",flexShrink:0},children:z}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{margin:0,fontSize:"13px",color:T?n.textPrimary:n.textSecondary,lineHeight:1.4,fontWeight:T?500:400},children:N.message}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px",flexWrap:"wrap"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:N.timestamp?new Date(N.timestamp).toLocaleString():""}),N.user_email&&e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:["by ",N.user_email]})]})]}),T&&e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",background:n.purpleBright,marginTop:"6px",flexShrink:0}})]})},N.id||U)})]})]})]})]}),e.jsx("main",{className:"sa-main-content",style:{padding:"32px",position:"relative",zIndex:1},children:t})]})]})}function ds(){const{login:t,register:o}=le(),a=Le(),[i,r]=h.useState(!1),[s,l]=h.useState(""),[c,d]=h.useState({email:"",password:"",full_name:"",organization_name:""}),[p,x]=h.useState(!1),[y,j]=h.useState(!1),[A,m]=h.useState(""),[S,f]=h.useState(!1),v=async C=>{var w,u;C.preventDefault(),l("");try{i?await o(c):await t(c.email,c.password),a("/dashboard")}catch(b){l(((u=(w=b.response)==null?void 0:w.data)==null?void 0:u.detail)||"Authentication failed")}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",style:{background:n.bgDeep},children:[e.jsx(ne,{to:"/dashboard",style:{position:"fixed",top:"24px",right:"32px",zIndex:20,color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase",textDecoration:"none",display:"flex",alignItems:"center",gap:"6px",transition:"color 0.2s"},children:" Dashboard"}),e.jsx("div",{style:{position:"absolute",top:"-20%",left:"-10%",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(91,75,138,0.18) 0%, transparent 65%)",animation:"float1 25s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",bottom:"-30%",right:"-15%",width:"800px",height:"800px",background:"radial-gradient(circle, rgba(92,214,133,0.06) 0%, transparent 65%)",animation:"float2 30s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",top:"40%",right:"10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(157,140,207,0.10) 0%, transparent 65%)",animation:"float3 15s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",inset:0,backgroundImage:"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.2,pointerEvents:"none",maskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)"}}),e.jsx("div",{style:{position:"absolute",top:"20%",left:"5%",width:"1px",height:"200px",background:"linear-gradient(to bottom, transparent, rgba(157,140,207,0.3), transparent)"}}),e.jsx("div",{style:{position:"absolute",bottom:"15%",right:"8%",width:"150px",height:"1px",background:"linear-gradient(to right, transparent, rgba(92,214,133,0.3), transparent)"}}),e.jsx("style",{children:`
        @keyframes float1 { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -30px) scale(1.05); } 66% { transform: translate(-20px, 20px) scale(0.95); } }
        @keyframes float2 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-40px, -40px) scale(1.1); } }
        @keyframes float3 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(20px, 30px); } }
        @keyframes pulse-ring { 0% { transform: scale(0.8); opacity: 0.5; } 50% { transform: scale(1.2); opacity: 0; } 100% { transform: scale(0.8); opacity: 0.5; } }
        .login-input { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .login-input:focus { border-color: rgba(157,140,207,0.6) !important; box-shadow: 0 0 0 3px rgba(157,140,207,0.1), 0 4px 20px rgba(0,0,0,0.2); transform: translateY(-1px); }
        .login-btn { position: relative; overflow: hidden; transition: all 0.3s ease; }
        .login-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(91,75,138,0.5); }
      `}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsxs("div",{className:"relative flex justify-center mb-6",style:{height:"100px",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",width:"80px",height:"80px",border:"1px solid rgba(157,140,207,0.2)",borderRadius:"50%",animation:"pulse-ring 3s ease-out infinite"}}),e.jsx("div",{style:{position:"absolute",width:"100px",height:"100px",border:"1px solid rgba(157,140,207,0.1)",borderRadius:"50%",animation:"pulse-ring 3s ease-out infinite 0.5s"}}),e.jsx("div",{style:{width:"56px",height:"56px",background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"2px solid #a896d6",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(91,75,138,0.4), inset 0 1px 0 rgba(255,255,255,0.1)"},children:e.jsx("div",{style:{width:"18px",height:"18px",background:"radial-gradient(circle, #e8e0ff 0%, #c4b8e8 100%)",borderRadius:"50%",boxShadow:"0 0 20px rgba(196,184,232,0.5)",animation:"eyePulse 3s ease-in-out infinite"}})})]}),e.jsxs("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,color:n.textPrimary,margin:"0 0 8px 0",letterSpacing:"-0.02em"},children:["ODDC ",e.jsx("span",{style:{color:n.purpleBright,fontStyle:"italic"},children:"Portal"})]}),e.jsx("p",{style:{color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",marginTop:"12px"},children:"Sentinel Authority"}),e.jsx("a",{href:"https://sentinelauthority.org",style:{color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textDecoration:"none",padding:"8px 16px",border:"1px solid rgba(157,140,207,0.2)",borderRadius:"20px",marginTop:"16px",display:"inline-block"},children:" VISIT MAIN SITE"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"24px",padding:"40px",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.05) inset",transition:"all 0.3s ease",minHeight:"280px"},children:[e.jsxs("div",{style:{display:"flex",background:"rgba(0,0,0,0.2)",borderRadius:"16px",padding:"4px",marginBottom:"32px"},children:[e.jsx("button",{onClick:()=>r(!1),type:"button",style:{flex:1,padding:"12px",borderRadius:"10px",border:"none",background:i?"transparent":n.purplePrimary,color:i?n.textTertiary:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Sign In"}),e.jsx("button",{onClick:()=>r(!0),type:"button",style:{flex:1,padding:"12px",borderRadius:"10px",border:"none",background:i?n.purplePrimary:"transparent",color:i?"#fff":n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Register"})]}),y?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(157,140,207,0.15)",border:"1px solid rgba(157,140,207,0.3)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:e.jsx(De,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-6 h-6",style:{color:n.purpleBright}})}),e.jsx("h3",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Two-Factor Authentication"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"24px"},children:"Enter the 6-digit code from your authenticator app, or a backup code"}),s&&e.jsx("div",{style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.2)",borderRadius:"8px",padding:"10px 14px",marginBottom:"16px",color:"#D65C5C",fontSize:"13px"},children:s}),e.jsxs("form",{onSubmit:handle2FASubmit,children:[e.jsx("input",{type:"text",value:A,onChange:C=>m(C.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,autoFocus:!0,style:{width:"100%",background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,borderRadius:"10px",padding:"14px",color:n.textPrimary,fontSize:"24px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",letterSpacing:"8px",textAlign:"center",outline:"none",marginBottom:"16px",boxSizing:"border-box"}}),e.jsx("button",{type:"submit",disabled:S||A.length!==6,className:"login-btn",style:{width:"100%",padding:"14px",borderRadius:"10px",background:A.length===6?n.purplePrimary:"rgba(255,255,255,0.05)",border:"1px solid "+(A.length===6?n.purpleBright:n.borderGlass),color:A.length===6?"#fff":n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",cursor:S?"wait":"pointer"},children:S?"Verifying...":"Verify Code"})]}),e.jsx("button",{onClick:()=>{j(!1),m(""),l("")},style:{background:"none",border:"none",color:n.textTertiary,fontSize:"12px",cursor:"pointer",marginTop:"16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Back to login"})]}):e.jsxs(e.Fragment,{children:[s&&e.jsxs("div",{style:{marginBottom:"24px",padding:"14px 16px",borderRadius:"12px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed,fontSize:"13px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),s]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Jane Smith",value:c.full_name,onChange:C=>d({...c,full_name:C.target.value}),className:"login-input w-full px-4 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'Inter', sans-serif",fontSize:"15px"},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Organization"}),e.jsx("input",{type:"text",placeholder:"Acme Robotics Inc.",value:c.organization||"",onChange:C=>d({...c,organization:C.target.value}),className:"login-input w-full px-4 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'Inter', sans-serif",fontSize:"15px"},required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"you@company.com",value:c.email,onChange:C=>d({...c,email:C.target.value}),className:"login-input w-full px-4 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'Inter', sans-serif",fontSize:"15px"},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:p?"text":"password",placeholder:"",value:c.password,onChange:C=>d({...c,password:C.target.value}),className:"login-input w-full px-4 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"'Inter', sans-serif",fontSize:"15px"},required:!0}),e.jsx("button",{type:"button",onClick:()=>x(!p),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px"},children:p?e.jsx(ya,{className:"w-5 h-5",style:{color:n.textTertiary}}):e.jsx(_a,{className:"w-5 h-5",style:{color:n.textTertiary}})})]})]}),e.jsx("button",{type:"submit",className:"login-btn w-full py-4 rounded-xl font-medium",style:{background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"1px solid rgba(157,140,207,0.5)",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"2px",textTransform:"uppercase",cursor:"pointer",marginTop:"8px",boxShadow:"0 4px 20px rgba(91,75,138,0.4)"},children:i?"Create Account":"Sign In"})]})]}),!i&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:"#",style:{color:n.textTertiary,fontSize:"13px",textDecoration:"none"},children:"Forgot password?"})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{style:{color:n.textTertiary,fontSize:"11px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",letterSpacing:"1px"},children:["Protected by ENVELO  ",e.jsx("a",{href:"https://sentinelauthority.org/privacy.html",style:{color:n.purpleBright,textDecoration:"none"},children:"Privacy"}),"  ",e.jsx("a",{href:"https://sentinelauthority.org/terms.html",style:{color:n.purpleBright,textDecoration:"none"},children:"Terms"})]})})]})]})}function Y({children:t,className:o="",glow:a=!1,accent:i=null}){const r={purple:"rgba(157,140,207,0.15)",green:"rgba(92,214,133,0.1)",amber:"rgba(214,160,92,0.1)",red:"rgba(214,92,92,0.1)"};return e.jsxs("div",{className:`rounded-2xl p-6 ${o}`,style:{background:i?`linear-gradient(135deg, ${r[i]||r.purple} 0%, rgba(255,255,255,0.02) 100%)`:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,backdropFilter:"blur(16px)",boxShadow:a?"0 8px 32px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.05)":"none",position:"relative",overflow:"hidden"},children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"1px",background:"linear-gradient(90deg,transparent,rgba(157,140,207,0.3),transparent)"}}),e.jsx("div",{style:{position:"absolute",bottom:0,left:"20%",right:"20%",height:"1px",background:"linear-gradient(90deg,transparent,rgba(157,140,207,0.1),transparent)"}})]}),t]})}function pe({label:t,value:o,trend:a,color:i=n.purpleBright,icon:r,subtitle:s,onClick:l}){const[c,d]=h.useState(!1);return e.jsx("div",{onClick:l,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{position:"relative",borderRadius:"16px",padding:"1px",background:c?`linear-gradient(135deg, ${i}60, transparent 60%, ${i}30)`:`linear-gradient(135deg, ${i}25, transparent 50%, rgba(255,255,255,0.05))`,transition:"all 0.3s ease",transform:c?"translateY(-2px)":"none",cursor:l?"pointer":"default"},children:e.jsxs("div",{style:{borderRadius:"15px",padding:"20px 24px",background:"linear-gradient(135deg, rgba(30,33,43,0.95) 0%, rgba(42,47,61,0.9) 100%)",backdropFilter:"blur(16px)",position:"relative",overflow:"hidden",minHeight:"100px"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"1px",background:`linear-gradient(90deg,transparent,${i}40,transparent)`}}),e.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",width:"80px",height:"80px",borderRadius:"50%",background:`radial-gradient(circle,${i}08 0%,transparent 70%)`,pointerEvents:"none"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",position:"relative"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px",margin:"0 0 12px 0"},children:t}),e.jsx("p",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,color:i,margin:0,lineHeight:1},children:o}),a!=null&&e.jsxs("p",{style:{fontSize:"11px",color:a>0?n.accentGreen:a<0?n.accentRed:n.textTertiary,marginTop:"8px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:[a>0?"":a<0?"":""," ",Math.abs(a),"%"]}),s&&e.jsx("p",{style:{fontSize:"11px",color:n.textTertiary,marginTop:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:s})]}),r&&e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`${i}12`,border:`1px solid ${i}20`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:c?`0 0 20px ${i}20`:"none",transition:"box-shadow 0.3s"},children:r})]})]})})}function Ko({icon:t,title:o,description:a,actionLabel:i,onAction:r}){return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"64px 24px",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:"rgba(91,75,138,0.12)",border:"1px solid rgba(157,140,207,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},children:e.jsx(t,{size:28,style:{color:n.purpleBright,opacity:.7}})}),e.jsx("h3",{style:{color:n.textPrimary,fontSize:"16px",fontWeight:500,margin:"0 0 8px 0",fontFamily:"Source Serif 4, Georgia, serif"},children:o}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",lineHeight:"1.5",maxWidth:"340px",margin:"0 0 24px 0"},children:a}),i&&e.jsx("button",{onClick:r,style:{background:"linear-gradient(135deg, "+n.purplePrimary+" 0%, "+n.purpleBright+" 100%)",border:"none",borderRadius:"8px",padding:"10px 24px",color:"#fff",fontFamily:"IBM Plex Mono, monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:i})]})}function ps(){Ce();const{user:t}=le();ye();const o=Le(),[a,i]=h.useState([]),[r,s]=h.useState(0),[l,c]=h.useState({}),[d,p]=h.useState([]),[x,y]=h.useState(!0),[j,A]=h.useState(null),[m,S]=h.useState([]);h.useEffect(()=>{Promise.all([E.get("/api/applications/").catch(()=>({data:[]})),E.get("/api/certificates/").catch(()=>({data:[]})),E.get("/api/envelo/monitoring/overview").catch(()=>({data:null})),E.get("/api/audit/my-logs?limit=5&offset=0").catch(()=>({data:{logs:[]}}))]).then(([u,b,_,k])=>{i(u.data.applications||u.data||[]),p(b.data||[]),_.data&&A(_.data),S(k.data.logs||k.data||[]),y(!1)})},[]);const f=[{key:"pending",label:"Submitted"},{key:"under_review",label:"In Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"}],v=u=>f.findIndex(b=>b.key===u),C=u=>{switch(u){case"pending":return"Awaiting review";case"under_review":return"Under evaluation";case"approved":return"Preparing CAT-72";case"testing":return"Test in progress";case"conformant":return"Certificate issued";case"revoked":return"Suspended";default:return"Pending"}},w=u=>u==="conformant"?n.accentGreen:u==="revoked"||u==="suspended"?n.accentRed:u==="testing"||u==="approved"?n.purpleBright:n.accentAmber;return x?e.jsx("div",{style:{color:n.textTertiary,padding:"40px",textAlign:"center"},children:"Loading..."}):e.jsxs("div",{className:"space-y-6",style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"ODDC Certification"}),e.jsxs("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:["Welcome",t!=null&&t.full_name?`, ${t.full_name.split(" ")[0]}`:""]}),e.jsxs("p",{style:{color:n.textSecondary,marginTop:"8px"},children:[t!=null&&t.organization?t.organization+"  ":"","Track your certification progress and manage your systems."]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsx(pe,{onClick:()=>o("/applications"),label:"Applications",value:a.length,color:n.purpleBright,icon:e.jsx($e,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.purpleBright}}),subtitle:a.filter(u=>u.state==="pending"||u.state==="under_review").length>0?`${a.filter(u=>u.state==="pending"||u.state==="under_review").length} in review`:null}),e.jsx(pe,{onClick:()=>o("/certificates"),label:"Certificates",value:d.length,color:n.accentGreen,icon:e.jsx(vt,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.accentGreen}}),subtitle:d.filter(u=>u.state==="conformant").length>0?`${d.filter(u=>u.state==="conformant").length} active`:null}),e.jsx(pe,{onClick:()=>o("/cat72"),label:"Active Tests",value:a.filter(u=>u.state==="testing").length,color:n.accentAmber,icon:e.jsx(dn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.accentAmber}})}),(()=>{var T;const b=((j==null?void 0:j.sessions)||[]).filter($=>{const z=$.last_heartbeat_at||$.last_telemetry_at||$.last_activity||$.started_at;return $.status==="active"&&z&&Date.now()-new Date(z).getTime()<12e4}).length,_=((T=j==null?void 0:j.summary)==null?void 0:T.total)||0,k=_>0,N=k?b>0?n.accentGreen:n.accentAmber:n.textTertiary,U=k?b>0?`${b} of ${_} online`:"All systems offline":"No active systems";return e.jsx(pe,{onClick:()=>o("/monitoring"),label:"Live Status",value:k?b:"",color:N,icon:e.jsx(so,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:N}}),subtitle:U})})()]}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Your Applications"}),a.length>0&&e.jsx(ne,{to:"/applications",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none",letterSpacing:"1px"},children:"View All "})]}),a.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"56px 20px"},children:[e.jsx("div",{style:{width:"72px",height:"72px",borderRadius:"20px",background:"rgba(91,75,138,0.12)",border:"1px solid rgba(157,140,207,0.15)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:e.jsx(De,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:32,style:{color:n.purpleBright,opacity:.7}})}),e.jsx("p",{style:{color:n.textPrimary,fontSize:"17px",fontWeight:500,marginBottom:"8px",fontFamily:"Georgia, 'Source Serif 4', serif"},children:"Begin Your Certification"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"28px",maxWidth:"360px",margin:"0 auto 28px",lineHeight:"1.6"},children:"Submit your autonomous system for ODDC certification. Our CAT-72 test validates real-time boundary enforcement over 72 hours."}),e.jsxs(ne,{to:"/applications/new",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg no-underline",style:{background:`linear-gradient(135deg, ${n.purplePrimary} 0%, ${n.purpleBright} 100%)`,border:"none",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",boxShadow:"0 4px 20px rgba(91,75,138,0.3)"},children:[e.jsx(lo,{className:"w-4 h-4"}),"New Application"]})]}):e.jsx("div",{className:"space-y-4",children:a.map(u=>{var _;const b=v(u.state);return e.jsx(ne,{to:`/applications/${u.id}`,style:{textDecoration:"none",display:"block"},children:e.jsxs("div",{style:{padding:"20px",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:`1px solid ${n.borderGlass}`,cursor:"pointer",transition:"border-color 0.2s"},onMouseEnter:k=>k.currentTarget.style.borderColor=n.purpleBright,onMouseLeave:k=>k.currentTarget.style.borderColor=n.borderGlass,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,color:n.textPrimary,fontSize:"15px",marginBottom:"4px"},children:u.system_name}),e.jsxs("div",{style:{fontSize:"11px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:[u.application_number,"  ",(_=u.system_type)==null?void 0:_.replace(/_/g," ")]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"12px",color:n.textTertiary},children:C(u.state)}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",background:`${w(u.state)}20`,color:w(u.state),border:`1px solid ${w(u.state)}40`},children:u.state})]})]}),e.jsx("div",{style:{display:"flex",gap:"3px",height:"4px"},children:f.map((k,N)=>e.jsx("div",{style:{flex:1,borderRadius:"2px",background:N<=b?w(u.state):"rgba(255,255,255,0.05)"}},k.key))})]})},u.id)})})]}),d.length===0&&e.jsx(Ko,{icon:vt,title:"No Certificates Yet",description:"Certificates are issued after your system passes the 72-hour CAT-72 conformance test. Submit an application to begin."}),d.length>0&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Your Certificates"}),e.jsx("div",{className:"space-y-3",children:d.map(u=>e.jsxs("div",{style:{padding:"16px",background:"rgba(92,214,133,0.08)",border:"1px solid rgba(92,214,133,0.2)",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,color:n.accentGreen,marginBottom:"4px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px"},children:u.certificate_number}),e.jsxs("div",{style:{fontSize:"12px",color:n.textTertiary},children:["Issued: ",new Date(u.issued_at).toLocaleDateString(),u.expires_at?`  Expires: ${new Date(u.expires_at).toLocaleDateString()}`:""]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx("a",{href:`${Ue}/api/certificates/${u.certificate_number}/pdf`,target:"_blank",style:{padding:"8px 16px",background:n.purplePrimary,borderRadius:"6px",color:"#fff",fontSize:"11px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textDecoration:"none"},children:"Download PDF"})})]},u.id))})]}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Recent Activity"}),e.jsx(ne,{to:"/my-activity",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none",letterSpacing:"1px"},children:"View All "})]}),m.length===0?e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",textAlign:"center",padding:"20px 0"},children:"No activity yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:m.map((u,b)=>{var z,L,g,P,I;const _={user_login:"Signed in",user_registered:"Account created",login_failed:"Failed login attempt",application_submitted:"Application submitted",application_state_changed:"Application status updated",application_deleted:"Application deleted",test_created:"CAT-72 test scheduled",test_started:"CAT-72 test started",test_completed:"CAT-72 test completed",certificate_issued:"Certificate issued",certificate_suspended:"Certificate suspended",certificate_revoked:"Certificate revoked",certificate_reinstated:"Certificate reinstated",api_key_created:"API key created",api_key_revoked:"API key revoked",password_changed:"Password changed",profile_updated:"Profile updated","2fa_enabled":"Two-factor authentication enabled","2fa_disabled":"Two-factor authentication disabled"},k={user_login:n.textTertiary,login_failed:"#D65C5C",application_submitted:n.purpleBright,application_state_changed:n.accentAmber,test_created:n.purpleBright,test_started:n.accentAmber,test_completed:n.accentGreen,certificate_issued:n.accentGreen,certificate_suspended:n.accentAmber,certificate_revoked:"#D65C5C",api_key_created:n.purpleBright,api_key_revoked:"#D65C5C"},N=_[u.action]||u.action.replace(/_/g," "),U=k[u.action]||n.textSecondary,T=((z=u.details)==null?void 0:z.system_name)||((L=u.details)==null?void 0:L.application_number)||((g=u.details)==null?void 0:g.test_id)||((P=u.details)==null?void 0:P.certificate_number)||((I=u.details)==null?void 0:I.key_name)||"",$=q=>{const W=Date.now()-new Date(q).getTime(),J=Math.floor(W/6e4);if(J<1)return"just now";if(J<60)return J+"m ago";const M=Math.floor(J/60);return M<24?M+"h ago":Math.floor(M/24)+"d ago"};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 0",borderBottom:b<m.length-1?"1px solid rgba(255,255,255,0.04)":"none"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:U,flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("span",{style:{fontSize:"13px",color:n.textPrimary},children:N}),T&&e.jsx("span",{style:{fontSize:"12px",color:n.textTertiary,marginLeft:"8px"},children:T})]}),e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",flexShrink:0},children:$(u.timestamp)})]},u.id||b)})})]})]})}function ms(){const{user:t}=le();return(t==null?void 0:t.role)==="admin"?e.jsx(us,{}):e.jsx(ps,{})}function us(){const{user:t}=le(),o=ye(),a=Ce(),i=Le(),[r,s]=h.useState(null),[l,c]=h.useState([]),[d,p]=h.useState([]),[x,y]=h.useState([]),[j,A]=h.useState([]),[m,S]=h.useState(null),[f,v]=h.useState(!1),C=_=>{_&&v(!0),E.get("/api/dashboard/stats").then(k=>s(k.data)).catch(console.error),E.get("/api/dashboard/recent-applications").then(k=>c(k.data)).catch(console.error),E.get("/api/dashboard/active-tests").then(k=>p(k.data)).catch(console.error),E.get("/api/applications/").then(k=>y(k.data.applications||k.data||[])).catch(console.error),E.get("/api/dashboard/recent-certificates").then(k=>A(k.data)).catch(console.error),E.get("/api/envelo/monitoring/overview").then(k=>S(k.data)).catch(console.error),_&&setTimeout(()=>v(!1),800)};h.useEffect(()=>{C();const _=setInterval(C,3e4);return()=>clearInterval(_)},[]);const w={pending:x.filter(_=>_.state==="pending").length,under_review:x.filter(_=>_.state==="under_review").length,approved:x.filter(_=>_.state==="approved").length,testing:x.filter(_=>_.state==="testing").length,conformant:x.filter(_=>_.state==="conformant").length,revoked:x.filter(_=>_.state==="revoked"||_.state==="suspended").length},u=x.filter(_=>_.state==="pending"||_.state==="under_review"),b=async(_,k,N)=>{var U,T;if(await a({title:"Confirm",message:N+"?"}))try{if(await E.patch(`/api/applications/${_}/state?new_state=${k}`),k==="approved")try{await E.post("/api/apikeys/admin/provision",null,{params:{application_id:_,send_email:!0}}),o.show("Approved  API key provisioned and emailed to applicant","success")}catch{o.show("Approved  applicant can generate key from their dashboard","success")}C()}catch($){o.show("Failed: "+(((T=(U=$.response)==null?void 0:U.data)==null?void 0:T.detail)||$.message),"error")}};return e.jsxs("div",{className:"space-y-6",style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"28px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:n.purpleBright}}),"Administration"]}),e.jsxs("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:["Welcome",t!=null&&t.full_name?`, ${t.full_name.split(" ")[0]}`:""]}),e.jsx("p",{style:{color:n.textTertiary,marginTop:"6px",fontSize:"13px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),e.jsx("div",{style:{display:"flex",gap:"10px"},children:e.jsxs("button",{onClick:()=>C(!0),style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"10px",padding:"10px 16px",color:n.textSecondary,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Me,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:14,style:f?{animation:"spin 0.8s linear infinite"}:{}})," ",f?"Refreshing...":"Refresh"]})})]}),(()=>{var U,T;const _=((U=m==null?void 0:m.sessions)==null?void 0:U.filter($=>{const z=$.last_heartbeat_at||$.last_telemetry_at||$.started_at;return $.status==="active"&&z&&Date.now()-new Date(z).getTime()<12e4}).length)||((T=m==null?void 0:m.summary)==null?void 0:T.active)||0,k=j.filter($=>$.expires_at&&$.state==="conformant"&&new Date($.expires_at)<new Date(Date.now()+30*24*60*60*1e3)).length,N=u.length+k;return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsx(pe,{label:"Total Applications",value:(r==null?void 0:r.total_applications)||0,color:n.purpleBright,icon:e.jsx($e,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.purpleBright}})}),e.jsx(pe,{onClick:()=>i("/cat72"),label:"Active Tests",value:(r==null?void 0:r.active_tests)||0,color:n.accentAmber,icon:e.jsx(dn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.accentAmber}})}),e.jsx(pe,{label:"Active Certificates",value:(r==null?void 0:r.certificates_active)||0,color:n.accentGreen,icon:e.jsx(De,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.accentGreen}})}),e.jsx(pe,{label:"Online Agents",value:_,color:_>0?n.accentGreen:n.textTertiary,icon:e.jsx(so,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:_>0?n.accentGreen:n.textTertiary}})}),e.jsx(pe,{label:"Certificates Issued",value:(r==null?void 0:r.certificates_issued)||0,color:n.purpleBright,icon:e.jsx(vt,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.purpleBright}})}),e.jsx(pe,{label:"Needs Action",value:N,color:N>0?"#D6A05C":n.textTertiary,icon:e.jsx(ba,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:N>0?"#D6A05C":n.textTertiary}})})]})})(),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Certification Pipeline"}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[x.length," total"]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",height:"32px",borderRadius:"6px",overflow:"hidden"},children:[[{key:"pending",label:"Pending",color:"#D6A05C",count:w.pending},{key:"under_review",label:"Review",color:"#D6A05C",count:w.under_review},{key:"approved",label:"Approved",color:n.purpleBright,count:w.approved},{key:"testing",label:"Testing",color:n.purpleBright,count:w.testing},{key:"conformant",label:"Conformant",color:n.accentGreen,count:w.conformant},{key:"revoked",label:"Suspended",color:n.accentRed,count:w.revoked}].map(_=>{const k=x.length||1,N=Math.max(_.count/k*100,_.count>0?8:0);return _.count>0?e.jsx("div",{style:{width:`${N}%`,background:`${_.color}30`,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"48px",position:"relative",borderLeft:`2px solid ${_.color}`},title:`${_.label}: ${_.count}`,children:e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:_.color,whiteSpace:"nowrap"},children:[_.count," ",_.label]})},_.key):null}),x.length===0&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.03)",padding:"40px 20px",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(91,75,138,0.12)",border:"1px solid rgba(157,140,207,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px"},children:e.jsx($e,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:22,style:{color:n.purpleBright,opacity:.6}})}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"14px",fontWeight:500,margin:"0 0 6px 0"},children:"No applications yet"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"12px",margin:"0 0 16px 0",maxWidth:"260px"},children:"Submit your first ODDC certification application to get started."})]})]})]}),u.length>0&&e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.accentAmber,margin:0},children:[" Review Queue (",u.length,")"]}),e.jsx(ne,{to:"/applications",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:"View All "})]}),e.jsx("div",{className:"space-y-3",children:u.slice(0,5).map(_=>{var k;return e.jsxs("div",{style:{padding:"14px 16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx(ne,{to:`/applications/${_.id}`,style:{color:n.purpleBright,textDecoration:"none",fontWeight:500,fontSize:"14px"},children:_.system_name}),e.jsx("span",{style:{color:n.textTertiary,fontSize:"12px"},children:_.organization_name}),e.jsx("span",{className:"px-2 py-1 rounded",style:{background:"rgba(214,160,92,0.15)",color:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase"},children:(k=_.state)==null?void 0:k.replace("_"," ")})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.state==="pending"&&e.jsx("button",{onClick:()=>b(_.id,"under_review",`Begin review for ${_.system_name}`),className:"px-3 py-1 rounded",style:{background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",color:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Begin Review"}),e.jsx("button",{onClick:()=>b(_.id,"approved",`Approve ${_.system_name}`),className:"px-3 py-1 rounded",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Approve"}),e.jsx("button",{onClick:()=>b(_.id,"suspended",`Suspend ${_.system_name}`),className:"px-3 py-1 rounded",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Suspend"}),e.jsx(ne,{to:`/applications/${_.id}`,className:"px-3 py-1 rounded no-underline",style:{background:"rgba(157,140,207,0.1)",border:`1px solid ${n.borderGlass}`,color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase"},children:"View"})]})]},_.id)})})]}),d.length>0&&e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Active CAT-72 Tests"}),e.jsx(ne,{to:"/cat72",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:"Console "})]}),e.jsx("div",{className:"space-y-3",children:d.map(_=>{const k=Math.round(_.elapsed_seconds/(_.duration_hours*3600)*100),N=Math.max(0,(_.duration_hours*3600-_.elapsed_seconds)/3600).toFixed(1);return e.jsxs("div",{className:"p-4 rounded-lg",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:[_.organization_name,"  ",_.system_name]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[N,"h remaining"]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.accentAmber},children:[k,"%"]})]})]}),e.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.1)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${k}%`,background:k>=100?n.accentGreen:n.purpleBright}})})]},_.id)})})]}),(()=>{const _=j.filter(k=>k.expires_at&&k.state==="conformant"&&new Date(k.expires_at)<new Date(Date.now()+2592e6));return _.length===0?null:e.jsxs("div",{style:{background:"rgba(214,160,92,0.08)",border:"1px solid rgba(214,160,92,0.25)",borderRadius:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(We,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:16,style:{color:"#D6A05C"}}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:"#D6A05C",fontWeight:500},children:[_.length," Certificate",_.length>1?"s":""," Expiring Within 30 Days"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.map(k=>{const N=Math.ceil((new Date(k.expires_at)-Date.now())/864e5);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0,0,0,0.15)",borderRadius:"8px",padding:"10px 14px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textPrimary,fontWeight:500,fontSize:"13px"},children:k.system_name}),e.jsx("span",{style:{color:n.textTertiary,fontSize:"12px",marginLeft:"12px"},children:k.organization_name})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:N<=7?"#D65C5C":"#D6A05C",fontWeight:500},children:[N,"d remaining"]}),e.jsx(ne,{to:`/verify?cert=${k.certificate_number}`,style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:k.certificate_number})]})]},k.id)})})]})})(),j.length>0&&e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Recent Certificates"}),e.jsx(ne,{to:"/certificates",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:["Certificate","System","Status","Issued","Expires"].map(_=>e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:_},_))})}),e.jsx("tbody",{children:j.slice(0,5).map(_=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(ne,{to:`/verify?cert=${_.certificate_number}`,style:{color:n.purpleBright,textDecoration:"none",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:_.certificate_number})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("span",{style:{color:n.textPrimary,fontSize:"13px"},children:_.system_name}),e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px",marginLeft:"8px"},children:_.organization_name})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",padding:"2px 8px",borderRadius:"4px",background:_.state==="conformant"?"rgba(92,214,133,0.15)":"rgba(214,92,92,0.15)",color:_.state==="conformant"?n.accentGreen:"#D65C5C"},children:_.state})}),e.jsx("td",{className:"px-4 py-3",style:{color:n.textTertiary,fontSize:"13px"},children:_.issued_at?new Date(_.issued_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:_.expires_at&&new Date(_.expires_at)<new Date(Date.now()+30*24*60*60*1e3)?"#D6A05C":n.textTertiary},children:_.expires_at?new Date(_.expires_at).toLocaleDateString():"-"})]},_.id))})]})})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Recent Applications"}),e.jsx(ne,{to:"/applications",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.purpleBright,textDecoration:"none"},children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"State"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Submitted"})]})}),e.jsx("tbody",{children:l.map(_=>e.jsxs("tr",{className:"transition-colors cursor-pointer",style:{borderBottom:`1px solid ${n.borderGlass}`},onClick:()=>window.location.hash=`#/applications/${_.id}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(ne,{to:`/applications/${_.id}`,style:{color:n.purpleBright,textDecoration:"none"},children:_.system_name})}),e.jsx("td",{className:"px-4 py-3",style:{color:n.textSecondary},children:_.organization_name}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{background:_.state==="conformant"?"rgba(92,214,133,0.15)":_.state==="observe"?"rgba(157,140,207,0.15)":_.state==="revoked"?"rgba(214,92,92,0.15)":"rgba(214,160,92,0.15)",color:_.state==="conformant"?n.accentGreen:_.state==="observe"?n.purpleBright:_.state==="revoked"?n.accentRed:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:_.state})}),e.jsx("td",{className:"px-4 py-3",style:{color:n.textTertiary,fontSize:"14px"},children:_.submitted_at?new Date(_.submitted_at).toLocaleDateString():"N/A"})]},_.id))})]})})]})]})}function xs({isOpen:t,onClose:o,onImport:a,boundaryType:i}){const[r,s]=fe.useState(""),[l,c]=fe.useState("json"),[d,p]=fe.useState(""),[x,y]=fe.useState(null),j={numeric:{json:'[{"name":"Speed Limit","parameter":"speed","min_value":0,"max_value":100,"unit":"km/h","tolerance":5}]',csv:`name,parameter,min_value,max_value,hard_limit,unit,tolerance
Speed Limit,speed,0,100,120,km/h,5`},geo:{json:'[{"name":"Operating Zone","boundary_type":"circle","lat":30.123,"lon":-97.456,"radius_meters":500}]',csv:`name,boundary_type,lat,lon,radius_meters,altitude_max
Operating Zone,circle,30.123,-97.456,500,120`},time:{json:'[{"name":"Business Hours","start_hour":6,"end_hour":22,"timezone":"America/Chicago","days":[0,1,2,3,4]}]',csv:`name,start_hour,end_hour,timezone,days
Business Hours,6,22,America/Chicago,0;1;2;3;4`},state:{json:'[{"name":"Mode Check","parameter":"mode","allowed_values":"autonomous,semi-auto","forbidden_values":"manual_override"}]',csv:`name,parameter,allowed_values,forbidden_values
Mode Check,mode,"autonomous,semi-auto",manual_override`}},A=()=>{p(""),y(null);try{let m=[];if(l==="json"){const S=JSON.parse(r);m=Array.isArray(S)?S:[S]}else{const S=r.trim().split(`
`);if(S.length<2)throw new Error("CSV needs header + data rows");const f=S[0].split(",").map(v=>v.trim());m=S.slice(1).map(v=>{const C=v.match(/(".*?"|[^,]+)/g)||[],w={};return f.forEach((u,b)=>{let _=(C[b]||"").replace(/^"|"$/g,"").trim();u==="days"?w[u]=_.split(";").map(Number):["min_value","max_value","hard_limit","tolerance","lat","lon","radius_meters","altitude_min","altitude_max","start_hour","end_hour"].includes(u)?w[u]=_===""?"":_:w[u]=_}),w})}if(m.length===0)throw new Error("No data found");y(m)}catch(m){p(m.message)}};return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:o,children:e.jsxs("div",{style:{background:"#1a1a2e",border:"1px solid rgba(157,140,207,0.2)",borderRadius:"16px",padding:"32px",maxWidth:"700px",width:"100%",maxHeight:"80vh",overflowY:"auto"},onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"20px",fontWeight:200,margin:0},children:["Bulk Import  ",i]}),e.jsx("button",{onClick:o,style:{background:"none",border:"none",color:"#6a6a80",fontSize:"20px",cursor:"pointer"},children:""})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[["json","csv"].map(m=>e.jsx("button",{onClick:()=>{c(m),p(""),y(null)},style:{padding:"6px 16px",borderRadius:"6px",border:"1px solid "+(l===m?"#8b5cf6":"rgba(255,255,255,0.1)"),background:l===m?"rgba(139,92,246,0.15)":"transparent",color:l===m?"#8b5cf6":"#a0a0b0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:m},m)),e.jsx("button",{onClick:()=>{var m;return s(((m=j[i])==null?void 0:m[l])||"")},style:{marginLeft:"auto",padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",background:"transparent",color:"#a0a0b0",fontSize:"11px",cursor:"pointer"},children:"Load Example"})]}),e.jsx("textarea",{value:r,onChange:m=>s(m.target.value),rows:10,placeholder:l==="json"?"Paste JSON array of boundaries...":"Paste CSV with header row...",style:{width:"100%",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"12px",color:"#e8e8f0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",lineHeight:"1.5",resize:"vertical",outline:"none"}}),d&&e.jsxs("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"8px"},children:[" ",d]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[e.jsx("button",{onClick:A,style:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #8b5cf6",background:"transparent",color:"#8b5cf6",fontSize:"12px",cursor:"pointer"},children:"Preview"}),x&&e.jsxs("button",{onClick:()=>{a(x),o(),s(""),y(null)},style:{padding:"8px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg,#5B4B8A,#8b5cf6)",color:"#fff",fontSize:"12px",cursor:"pointer",fontWeight:500},children:["Import ",x.length," ",x.length===1?"boundary":"boundaries"]})]}),x&&e.jsxs("div",{style:{marginTop:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"12px",maxHeight:"200px",overflowY:"auto"},children:[e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"#6a6a80",marginBottom:"8px"},children:["PREVIEW (",x.length," rows)"]}),x.map((m,S)=>e.jsx("div",{style:{fontSize:"11px",color:"#a0a0b0",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Object.entries(m).map(([f,v])=>`${f}: ${v}`).join("  ")},S))]})]})}):null}function gs(){const t=ye(),{user:o}=le(),a=Ce(),[i,r]=h.useState([]),[s,l]=h.useState(0),[c,d]=h.useState({}),[p,x]=h.useState("all"),[y,j]=h.useState(""),[A,m]=h.useState(new Set),[S,f]=h.useState(!1),v=T=>m($=>{const z=new Set($);return z.has(T)?z.delete(T):z.add(T),z}),C=()=>m(new Set(N.map(T=>T.id))),w=()=>m(new Set),u=async(T,$)=>{var g,P;const z=[...A];if(z.length===0)return;const L=T==="delete"?`Delete ${z.length} application(s)?`:`${T} ${z.length} application(s)?`;if(await a({title:"Confirm",message:L})){f(!0);try{T==="delete"?await E.post("/api/applications/bulk-delete",{ids:z}):await E.post("/api/applications/bulk-state",{ids:z,new_state:$}),m(new Set),b()}catch(I){t.show("Bulk operation failed: "+(((P=(g=I.response)==null?void 0:g.data)==null?void 0:P.detail)||I.message),"error")}f(!1)}},b=(T="",$="all")=>{const z={};T&&(z.search=T),$&&$!=="all"&&(z.state=$),E.get("/api/applications/",{params:z}).then(L=>{r(L.data.applications||L.data),l(L.data.total??(L.data.applications||L.data).length),d(L.data.state_counts||{})}).catch(console.error)};h.useEffect(()=>{b()},[]),h.useEffect(()=>{const T=setTimeout(()=>{b(y,p)},300);return()=>clearTimeout(T)},[y,p]);const _=async(T,$,z)=>{var L,g;if(await a({title:"Confirm",message:z+"?"}))try{await E.patch(`/api/applications/${T}/state?new_state=${$}`),b()}catch(P){t.show("Failed: "+(((g=(L=P.response)==null?void 0:L.data)==null?void 0:g.detail)||P.message),"error")}},k=[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"under_review",label:"Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"},{key:"revoked",label:"Suspended"}],N=i,U=T=>T==="conformant"?n.accentGreen:T==="revoked"||T==="suspended"?n.accentRed:T==="testing"||T==="approved"?n.purpleBright:n.accentAmber;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:(o==null?void 0:o.role)==="admin"?"Conformance":"My Organization"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:(o==null?void 0:o.role)==="admin"?"Applications":"Certification Status"})]})}),(o==null?void 0:o.role)==="admin"&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"400px"},children:[e.jsx(wt,{className:"w-4 h-4",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:n.textTertiary}}),e.jsx("input",{value:y,onChange:T=>j(T.target.value),placeholder:"Search by name, org, or ID...",style:{width:"100%",background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px 8px 36px",color:n.textPrimary,fontSize:"13px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",outline:"none"}})]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[N.length," of ",s]})]}),(o==null?void 0:o.role)==="admin"&&e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:k.map(T=>{const $=T.key==="all"?c.all||0:T.key==="revoked"?(c.suspended||0)+(c.revoked||0):c[T.key]||0;return e.jsxs("button",{onClick:()=>x(T.key),style:{padding:"6px 14px",borderRadius:"6px",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",background:p===T.key?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.03)",border:`1px solid ${p===T.key?n.purpleBright:n.borderGlass}`,color:p===T.key?n.purpleBright:n.textTertiary},children:[T.label," ",$>0?`(${$})`:""]},T.key)})}),e.jsxs(Y,{children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[(o==null?void 0:o.role)==="admin"&&e.jsx("th",{className:"px-2 py-3 text-center",style:{width:"40px"},children:e.jsx("input",{type:"checkbox",checked:A.size>0&&A.size===N.length,onChange:T=>T.target.checked?C():w(),style:{cursor:"pointer",accentColor:n.purpleBright}})}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"System Name"}),(o==null?void 0:o.role)==="admin"&&e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"State"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Submitted"}),(o==null?void 0:o.role)==="admin"&&e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:N.map(T=>{var $;return e.jsxs("tr",{className:"transition-colors",style:{borderBottom:`1px solid ${n.borderGlass}`,background:A.has(T.id)?"rgba(157,140,207,0.08)":"transparent"},children:[(o==null?void 0:o.role)==="admin"&&e.jsx("td",{className:"px-2 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:A.has(T.id),onChange:()=>v(T.id),style:{cursor:"pointer",accentColor:n.purpleBright}})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx(ne,{to:`/applications/${T.id}`,style:{color:n.purpleBright,textDecoration:"none"},children:T.system_name}),e.jsx("div",{style:{fontSize:"11px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",marginTop:"2px"},children:T.application_number})]}),(o==null?void 0:o.role)==="admin"&&e.jsx("td",{className:"px-4 py-4",style:{color:n.textSecondary},children:T.organization_name}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1 rounded",style:{background:`${U(T.state)}20`,color:U(T.state),border:`1px solid ${U(T.state)}40`,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:($=T.state)==null?void 0:$.replace("_"," ")})}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textTertiary,fontSize:"14px"},children:T.submitted_at?new Date(T.submitted_at).toLocaleDateString():"N/A"}),(o==null?void 0:o.role)==="admin"&&e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[T.state==="pending"&&e.jsx("button",{onClick:z=>{z.stopPropagation(),_(T.id,"under_review",`Begin review for ${T.system_name}`)},className:"px-2 py-1 rounded",style:{background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",color:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Review"}),(T.state==="pending"||T.state==="under_review")&&e.jsx("button",{onClick:z=>{z.stopPropagation(),_(T.id,"approved",`Approve ${T.system_name}`)},className:"px-2 py-1 rounded",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Approve"}),T.state==="approved"&&e.jsx(ne,{to:`/applications/${T.id}`,className:"px-2 py-1 rounded no-underline",style:{background:"rgba(157,140,207,0.15)",border:`1px solid ${n.borderGlass}`,color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Schedule Test"}),T.state==="conformant"&&e.jsx("span",{style:{color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px"},children:" Certified"}),T.state==="testing"&&e.jsx(ne,{to:"/cat72",className:"px-2 py-1 rounded no-underline",style:{background:"rgba(157,140,207,0.15)",border:`1px solid ${n.borderGlass}`,color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"View Test"}),["pending","under_review","approved","testing","conformant"].includes(T.state)&&e.jsx("button",{onClick:z=>{z.stopPropagation(),_(T.id,"suspended",`Suspend ${T.system_name}`)},className:"px-2 py-1 rounded",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Suspend"}),(T.state==="suspended"||T.state==="revoked")&&e.jsx("button",{onClick:z=>{z.stopPropagation(),_(T.id,"pending",`Reinstate ${T.system_name} to pending`)},className:"px-2 py-1 rounded",style:{background:"rgba(92,214,133,0.1)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Reinstate"})]})})]},T.id)})})]}),A.size>0&&(o==null?void 0:o.role)==="admin"&&e.jsxs("div",{style:{position:"sticky",bottom:"16px",zIndex:50,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 20px",margin:"16px",background:"rgba(18,12,30,0.95)",backdropFilter:"blur(12px)",border:`1px solid ${n.purpleBright}`,borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:[A.size," selected"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>u("approve","approved"),disabled:S,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Approve"}),e.jsx("button",{onClick:()=>u("review","under_review"),disabled:S,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",color:"#D6A05C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Review"}),e.jsx("button",{onClick:()=>u("suspend","suspended"),disabled:S,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Suspend"}),e.jsx("button",{onClick:()=>u("reinstate","pending"),disabled:S,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(92,214,133,0.1)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Reinstate"}),e.jsx("div",{style:{width:"1px",height:"20px",background:n.borderGlass,margin:"0 4px"}}),e.jsx("button",{onClick:()=>u("delete"),disabled:S,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Delete"}),e.jsx("button",{onClick:w,style:{padding:"6px 14px",borderRadius:"6px",background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),S&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:"Processing..."})]})]}),N.length===0&&e.jsx(Ko,{icon:$e,title:"No Applications Found",description:i.length===0?"You haven't submitted any certification applications yet. Start your ODDC certification journey.":"No applications match your current filter."})]})]})}const fs=[{key:"ground_robots",label:"Ground Robots & Mobile Platforms"},{key:"aerial",label:"Aerial Systems (UAV / UAS)"},{key:"vehicles",label:"Autonomous Vehicles & Mobility"},{key:"marine",label:"Marine & Maritime"},{key:"medical",label:"Medical & Healthcare"},{key:"financial",label:"Financial & Trading"},{key:"energy",label:"Energy & Utilities"},{key:"manufacturing",label:"Manufacturing & Industrial"},{key:"defense",label:"Defense & Security"},{key:"agriculture",label:"Agriculture & Environment"},{key:"space_extreme",label:"Space & Extreme Environments"},{key:"telecom_digital",label:"Telecommunications & Digital Infrastructure"},{key:"construction",label:"Construction & Mining"},{key:"logistics",label:"Logistics & Supply Chain"},{key:"retail_hospitality",label:"Retail & Hospitality"},{key:"education_research",label:"Education & Research"},{key:"legal_compliance",label:"Legal & Compliance"},{key:"other",label:"Other / Custom"}],Ge={warehouse_amr_indoor:{label:"Warehouse AMR (Indoor)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:2,unit:"m/s",tolerance:.1},{name:"max_payload",min:0,max:500,unit:"kg",tolerance:5},{name:"max_shelf_height",min:0,max:8,unit:"m",tolerance:.1},{name:"min_obstacle_clearance",min:.3,max:null,unit:"m",tolerance:.05}],geo:{type:"polygon",description:"Warehouse floor plan boundary  excludes human-only zones, charging stations, loading docks during active operations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","navigating","picking","placing","charging","queued"],forbidden:["manual_override_disabled","sensor_degraded_navigation"]},odd_description:"Indoor warehouse environment with controlled lighting, flat concrete floors, marked aisles, and mixed human-robot zones. System operates within geofenced warehouse boundary with speed reduction in human-occupied zones.",safety:{violation_action:"block",fail_closed:!0,human_zone_speed_limit:.5,emergency_stop:!0}}},warehouse_amr_cold_storage:{label:"Warehouse AMR (Cold Storage)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:1.5,unit:"m/s",tolerance:.1},{name:"max_payload",min:0,max:400,unit:"kg",tolerance:5},{name:"min_operating_temp",min:-30,max:5,unit:"C",tolerance:1},{name:"max_continuous_cold_exposure",min:0,max:120,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Cold storage facility boundary  includes freezer zones, transition airlocks, excludes warm staging areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","navigating","picking","placing","charging","defrost_cycle"],forbidden:["battery_below_20pct_in_freezer","condensation_detected"]},odd_description:"Cold storage warehouse (-25C to 5C) with frost-resistant flooring, limited visibility, and mandatory defrost cycling. Robot must return to warm zone before battery threshold.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},last_mile_delivery_robot:{label:"Last-Mile Delivery Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:6,unit:"km/h",tolerance:.5},{name:"max_payload",min:0,max:25,unit:"kg",tolerance:1},{name:"max_range",min:0,max:30,unit:"km",tolerance:1},{name:"min_battery_for_return",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Approved sidewalk corridors and pedestrian zones  excludes roadways, private property beyond delivery points, restricted government areas"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"delivery_zone_local"},states:{allowed:["idle","en_route","delivering","returning","charging","waiting_pickup"],forbidden:["road_surface_detected","pedestrian_density_exceeded"]},odd_description:"Urban/suburban sidewalk environment during daylight and early evening. System navigates pedestrian infrastructure only, yields to all pedestrians, and maintains minimum battery reserve for return to base.",safety:{violation_action:"block",fail_closed:!0,max_pedestrian_proximity:.5,emergency_stop:!0}}},sidewalk_delivery_robot:{label:"Sidewalk Delivery Robot (Campus)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:4,unit:"km/h",tolerance:.5},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_incline",min:0,max:15,unit:"degrees",tolerance:1}],geo:{type:"polygon",description:"Campus pedestrian pathways  excludes vehicle roads, building interiors, construction zones"},time:{operating_hours:"07:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"campus_local"},states:{allowed:["idle","navigating","delivering","waiting","charging"],forbidden:["road_detected","stairway_detected"]},odd_description:"University or corporate campus pedestrian pathways. Flat to moderate grade, paved surfaces, mixed foot traffic. System operates during campus active hours only.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},campus_shuttle_low_speed:{label:"Campus Shuttle (Low-Speed AV)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:12,unit:"persons",tolerance:0},{name:"max_grade",min:0,max:10,unit:"%",tolerance:.5},{name:"min_visibility",min:50,max:null,unit:"m",tolerance:5}],geo:{type:"polygon",description:"Fixed campus route with approved stops  excludes public roadways, parking structures, pedestrian-only zones"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"facility_local"},states:{allowed:["idle","en_route","stopped_at_station","loading","unloading","returning_to_depot"],forbidden:["off_route","door_open_while_moving","passenger_standing"]},odd_description:"Fixed-route low-speed shuttle on private campus roads. Controlled environment with designated stops, speed bumps, and pedestrian crossings. No public road interaction.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,emergency_stop:!0}}},security_patrol_robot:{label:"Security Patrol Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_patrol_radius",min:0,max:2e3,unit:"m",tolerance:10},{name:"min_battery_reserve",min:15,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Facility perimeter and approved patrol corridors  excludes public areas, sensitive restricted zones without clearance"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["patrolling","stationary_monitoring","returning_to_base","charging","alert_mode"],forbidden:["pursuit_mode","physical_intervention"]},odd_description:"Outdoor facility perimeter and indoor corridors. System performs observation and alerting only  no physical intervention capability. Operates in all weather within sensor limits.",safety:{violation_action:"block",fail_closed:!0,no_pursuit:!0,emergency_stop:!0}}},agricultural_field_robot:{label:"Agricultural Field Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:10,unit:"km/h",tolerance:.5},{name:"max_spray_rate",min:0,max:200,unit:"L/ha",tolerance:5},{name:"max_wind_speed",min:0,max:15,unit:"km/h",tolerance:1},{name:"buffer_zone_waterway",min:10,max:null,unit:"m",tolerance:1}],geo:{type:"polygon",description:"Defined field boundaries  excludes waterways, buffer zones, neighboring properties, public roads"},time:{operating_hours:"05:00-21:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","seeding","spraying","harvesting","transiting","charging"],forbidden:["wind_exceeded","rain_during_spray","near_waterway_while_spraying"]},odd_description:"Open agricultural field with GPS-defined boundaries. System operates on soil/crop surfaces in fair weather. Spray operations prohibited near waterways and above wind thresholds.",safety:{violation_action:"block",fail_closed:!0,spray_shutoff:!0,emergency_stop:!0}}},vineyard_orchard_robot:{label:"Vineyard / Orchard Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_arm_reach",min:0,max:2.5,unit:"m",tolerance:.05},{name:"max_cutting_force",min:0,max:50,unit:"N",tolerance:2}],geo:{type:"polygon",description:"Row-by-row vineyard/orchard boundary  excludes equipment sheds, irrigation infrastructure, public access paths"},time:{operating_hours:"06:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","navigating_row","pruning","harvesting","inspecting","returning"],forbidden:["human_in_arm_radius","row_end_exceeded"]},odd_description:"Structured vineyard or orchard rows with GPS-guided navigation. System moves along defined row paths and performs precision tasks within arm reach envelope.",safety:{violation_action:"block",fail_closed:!0,arm_retract_on_human:!0,emergency_stop:!0}}},hazmat_inspection_robot:{label:"Hazmat / CBRN Inspection Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.5},{name:"max_radiation_exposure",min:0,max:100,unit:"mSv/hr",tolerance:5},{name:"max_chemical_concentration",min:0,max:500,unit:"ppm",tolerance:10},{name:"max_mission_duration",min:0,max:240,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Designated hazmat zone with hot/warm/cold zone boundaries  robot must not exit hot zone without decontamination sequence"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["standby","entering_zone","inspecting","sampling","retreating","decontaminating"],forbidden:["human_follow_mode_in_hot_zone","sample_container_open_in_cold_zone"]},odd_description:"Hazardous material incident scene with defined exclusion zones. Robot operates in contaminated environments where human entry is prohibited or limited. All actions logged for incident command.",safety:{violation_action:"block",fail_closed:!0,auto_retreat_on_threshold:!0,emergency_stop:!0}}},tunnel_inspection_robot:{label:"Tunnel / Pipe Inspection Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:2,unit:"km/h",tolerance:.2},{name:"min_pipe_diameter",min:150,max:null,unit:"mm",tolerance:10},{name:"max_tether_length",min:0,max:500,unit:"m",tolerance:5},{name:"max_depth",min:0,max:100,unit:"m",tolerance:1}],geo:{type:"linear",description:"Defined tunnel or pipeline segment with entry/exit points  system must not exceed tether length or enter unmarked branches"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["standby","inserting","inspecting","retreating","data_upload"],forbidden:["tether_tension_exceeded","communication_lost_advancing"]},odd_description:"Confined pipe or tunnel environment with tethered operation. System advances along defined path, retreats on communication loss or tether limit. GPS-denied environment uses odometry and tether measurement.",safety:{violation_action:"block",fail_closed:!0,auto_retreat_on_comms_loss:!0,emergency_stop:!0}}},snow_removal_robot:{label:"Snow Removal / Grounds Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"km/h",tolerance:.5},{name:"max_plow_width",min:0,max:2,unit:"m",tolerance:.05},{name:"min_temperature",min:-40,max:5,unit:"C",tolerance:1},{name:"max_snow_depth",min:0,max:30,unit:"cm",tolerance:2}],geo:{type:"polygon",description:"Facility sidewalks and pathways  excludes vehicle lanes, building entrances during occupancy, garden areas"},time:{operating_hours:"03:00-07:00",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","plowing","salting","returning","charging"],forbidden:["pedestrian_detected_ahead","ice_on_slope_above_grade_limit"]},odd_description:"Outdoor facility pathways during winter conditions. System operates during low-traffic hours, clearing designated paths. Halts on pedestrian detection and avoids steep grades when icy.",safety:{violation_action:"block",fail_closed:!0,pedestrian_stop:!0,emergency_stop:!0}}},street_cleaning_robot:{label:"Street Cleaning Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"km/h",tolerance:.5},{name:"max_water_usage",min:0,max:500,unit:"L/hr",tolerance:10},{name:"max_noise_level",min:0,max:70,unit:"dB",tolerance:2}],geo:{type:"polygon",description:"Approved pedestrian zones, sidewalks, plazas  excludes vehicle roadways, private property, construction zones"},time:{operating_hours:"04:00-07:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["idle","cleaning","refilling","returning","charging"],forbidden:["crowd_detected","event_zone_active"]},odd_description:"Urban pedestrian infrastructure during low-traffic hours. System follows predefined cleaning routes on paved surfaces. Noise-limited operation during early morning hours.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},small_survey_drone:{label:"Small Survey Drone (<25kg)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:35,unit:"km/h",tolerance:2},{name:"min_battery_for_rtl",min:25,max:null,unit:"%",tolerance:3},{name:"max_range_from_pilot",min:0,max:500,unit:"m",tolerance:10}],geo:{type:"polygon_3d",description:"Approved flight zone with altitude ceiling  excludes airports, restricted airspace, populated areas per Part 107"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","takeoff","surveying","hovering","returning","landing"],forbidden:["gps_lost_above_30m","battery_below_rtl_threshold","wind_exceeded"]},odd_description:"Visual line of sight operations in Class G airspace below 400ft AGL. Operations in fair weather with wind below threshold. System maintains return-to-launch battery reserve at all times.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},agricultural_spray_drone:{label:"Agricultural Spray Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:15,unit:"m",tolerance:1},{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_spray_rate",min:0,max:30,unit:"L/min",tolerance:1},{name:"max_wind_speed",min:0,max:15,unit:"km/h",tolerance:1},{name:"buffer_distance_waterway",min:30,max:null,unit:"m",tolerance:3}],geo:{type:"polygon",description:"Defined field boundary with spray buffer zones around waterways, neighboring properties, and roads"},time:{operating_hours:"05:00-10:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["grounded","spraying","transiting","refilling","returning"],forbidden:["wind_exceeded_during_spray","over_buffer_zone","tank_empty_pumping"]},odd_description:"Low-altitude precision spraying over defined agricultural fields. Early morning operations to minimize drift. Hard geofence around buffer zones with automatic spray shutoff.",safety:{violation_action:"block",fail_closed:!0,spray_auto_shutoff:!0,geofence_hard:!0,emergency_stop:!0}}},infrastructure_inspection_drone:{label:"Infrastructure Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:150,unit:"m",tolerance:3},{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:2},{name:"min_structure_clearance",min:3,max:null,unit:"m",tolerance:.5},{name:"max_wind_speed",min:0,max:30,unit:"km/h",tolerance:2}],geo:{type:"polygon_3d",description:"Approved inspection corridor around structure  includes buffer zones from public areas, roads, and occupied buildings"},time:{operating_hours:"07:00-17:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","en_route","inspecting","hovering","returning","landing"],forbidden:["proximity_alert_structure","gps_degraded_near_structure"]},odd_description:"Close-range inspection of bridges, towers, power lines, or buildings. Controlled airspace with NOTAM. System maintains minimum clearance from structure and auto-returns on sensor degradation.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,collision_avoidance:!0,emergency_stop:!0}}},delivery_drone_urban:{label:"Delivery Drone (Urban)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:70,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:5,unit:"kg",tolerance:.2},{name:"max_wind_speed",min:0,max:30,unit:"km/h",tolerance:2},{name:"min_battery_for_rtl",min:30,max:null,unit:"%",tolerance:3}],geo:{type:"corridor",description:"Approved flight corridors between depot and delivery zones  excludes restricted airspace, schools, hospitals, crowd areas"},time:{operating_hours:"08:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"delivery_zone_local"},states:{allowed:["grounded","en_route","hovering_delivery","descending","returning","landing"],forbidden:["crowd_below","restricted_airspace_entered","battery_below_rtl"]},odd_description:"Urban drone delivery along approved corridors in controlled low-altitude airspace. System avoids populated areas during transit, descends only at approved delivery points. Hard geofence on all corridor boundaries.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,parachute_deploy:!0,emergency_stop:!0}}},delivery_drone_rural:{label:"Delivery Drone (Rural / Suburban)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:90,unit:"km/h",tolerance:3},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_range",min:0,max:30,unit:"km",tolerance:1},{name:"max_wind_speed",min:0,max:35,unit:"km/h",tolerance:2}],geo:{type:"corridor",description:"Approved rural flight paths  avoids populated areas, livestock, and restricted airspace"},time:{operating_hours:"06:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["grounded","en_route","delivering","returning","diverting","landing"],forbidden:["thunderstorm_detected","beyond_range_for_rtl"]},odd_description:"Rural and suburban delivery routes with extended range. Lower population density allows broader corridors. System maintains energy reserve for full return at all decision points.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},search_rescue_drone:{label:"Search & Rescue Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:200,unit:"m",tolerance:5},{name:"max_speed",min:0,max:80,unit:"km/h",tolerance:3},{name:"max_wind_speed",min:0,max:45,unit:"km/h",tolerance:3},{name:"max_mission_duration",min:0,max:45,unit:"min",tolerance:2}],geo:{type:"polygon_3d",description:"Defined search area as authorized by incident command  excludes active fire zones, other aircraft operating areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["grounded","searching","hovering_target","payload_drop","returning","landing"],forbidden:["fire_zone_entered","other_aircraft_proximity"]},odd_description:"Emergency search operations in defined area under incident command authority. Extended weather envelope. System coordinates with manned aircraft via ADS-B and maintains deconfliction boundaries.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,deconfliction:!0,emergency_stop:!0}}},power_line_inspection_drone:{label:"Power Line Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:1},{name:"min_line_clearance",min:5,max:null,unit:"m",tolerance:.5},{name:"max_emf_exposure",min:0,max:100,unit:"V/m",tolerance:5}],geo:{type:"corridor",description:"Power line right-of-way corridor  excludes residential areas beyond ROW, substations during maintenance"},time:{operating_hours:"07:00-17:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","transiting","inspecting","hovering","returning","landing"],forbidden:["min_clearance_violated","emf_exceeded","gps_lost"]},odd_description:"Linear corridor following power line rights-of-way. System maintains safe clearance from energized lines and auto-retreats on EMF threshold exceedance. BVLOS operations under waiver.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,emf_protection:!0,emergency_stop:!0}}},pipeline_inspection_drone:{label:"Pipeline Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:100,unit:"m",tolerance:3},{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_range",min:0,max:50,unit:"km",tolerance:2},{name:"min_ground_clearance",min:15,max:null,unit:"m",tolerance:2}],geo:{type:"corridor",description:"Pipeline right-of-way corridor with lateral buffer  excludes populated areas, restricted airspace, water crossings during sensitive periods"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","transiting","inspecting","leak_detected_hovering","returning","landing"],forbidden:["off_corridor","low_fuel_advancing"]},odd_description:"Extended linear inspection along pipeline routes. BVLOS operations with relay communication. System follows pipeline corridor with automatic anomaly detection and reporting.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},mapping_photogrammetry_drone:{label:"Mapping / Photogrammetry Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:25,unit:"km/h",tolerance:2},{name:"min_overlap",min:60,max:null,unit:"%",tolerance:5}],geo:{type:"polygon_3d",description:"Defined survey area boundary  excludes neighboring properties, sensitive sites, restricted airspace"},time:{operating_hours:"09:00-15:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","en_route","mapping","returning","landing"],forbidden:["shadow_angle_exceeded","cloud_cover_above_80pct"]},odd_description:"Systematic grid pattern flight over defined survey area for photogrammetric capture. Optimal lighting conditions required. System maintains overlap requirements and compensates for wind drift.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},urban_air_mobility_evtol:{label:"Urban Air Mobility (eVTOL Passenger)",domain:"aerial",template:{numeric:[{name:"max_altitude_msl",min:0,max:1500,unit:"ft",tolerance:50},{name:"max_speed",min:0,max:250,unit:"km/h",tolerance:5},{name:"max_passengers",min:0,max:6,unit:"persons",tolerance:0},{name:"max_wind_speed",min:0,max:50,unit:"km/h",tolerance:3},{name:"min_battery_for_alternate",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"corridor_3d",description:"Approved UAM corridors between vertiports  includes approach/departure paths, excludes restricted airspace, noise-sensitive zones"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["parked","boarding","takeoff","cruise","approach","landing","disembarking"],forbidden:["battery_below_alternate_reserve","icing_detected","passenger_door_open_in_flight"]},odd_description:"Urban air mobility corridors between certified vertiports. System operates under Part 135 equivalent with full ATC integration. Maintains alternate landing site energy reserve at all times.",safety:{violation_action:"block",fail_closed:!0,auto_divert:!0,redundant_flight_controls:!0,emergency_stop:!1}}},cargo_evtol:{label:"Cargo eVTOL",domain:"aerial",template:{numeric:[{name:"max_altitude_msl",min:0,max:1e3,unit:"ft",tolerance:50},{name:"max_speed",min:0,max:200,unit:"km/h",tolerance:5},{name:"max_payload",min:0,max:500,unit:"kg",tolerance:5},{name:"max_range",min:0,max:150,unit:"km",tolerance:5}],geo:{type:"corridor_3d",description:"Approved cargo flight corridors between distribution hubs  avoids populated areas during cruise"},time:{operating_hours:"05:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["parked","loading","takeoff","cruise","approach","landing","unloading"],forbidden:["overweight","center_of_gravity_exceeded","icing_detected"]},odd_description:"Point-to-point cargo transport between approved landing sites. Unpopulated corridors preferred. System verifies weight and balance before each flight and maintains energy reserves.",safety:{violation_action:"block",fail_closed:!0,auto_divert:!0,geofence_hard:!0,emergency_stop:!1}}},firefighting_drone:{label:"Firefighting Support Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:200,unit:"m",tolerance:5},{name:"max_speed",min:0,max:70,unit:"km/h",tolerance:3},{name:"max_thermal_exposure",min:0,max:200,unit:"C",tolerance:10},{name:"max_wind_speed",min:0,max:50,unit:"km/h",tolerance:3}],geo:{type:"polygon_3d",description:"Incident command designated airspace  deconflicted from manned aircraft, excludes active drop zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["grounded","scouting","monitoring","thermal_mapping","returning","landing"],forbidden:["manned_aircraft_proximity","thermal_limit_exceeded"]},odd_description:"Fire incident support under incident command authority. Thermal imaging and situational awareness only  no suppression. Deconflicted from manned firefighting aircraft at all times.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,thermal_protection:!0,emergency_stop:!0}}},highway_l4_truck_longhaul:{label:"Highway L4 Truck (Long-Haul)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:105,unit:"km/h",tolerance:2},{name:"max_gvw",min:0,max:36e3,unit:"kg",tolerance:100},{name:"min_following_distance",min:2.5,max:null,unit:"s",tolerance:.2},{name:"max_wind_speed",min:0,max:80,unit:"km/h",tolerance:5},{name:"min_visibility",min:200,max:null,unit:"m",tolerance:20}],geo:{type:"road_network",description:"Approved interstate highway segments  excludes urban interchanges, construction zones, mountain passes above grade limit"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"route_local"},states:{allowed:["parked","highway_cruise","lane_change","merging","exiting","minimal_risk_condition"],forbidden:["urban_street","construction_zone","visibility_below_minimum","ice_detected"]},odd_description:"Interstate highway operations on approved segments. L4 autonomy with no human driver. System transitions to minimal risk condition (MRC) on any ODD exit. Pre-mapped route with known infrastructure.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,v2x_enabled:!0,emergency_stop:!0}}},highway_l4_truck_regional:{label:"Highway L4 Truck (Regional)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:90,unit:"km/h",tolerance:2},{name:"max_gvw",min:0,max:26e3,unit:"kg",tolerance:100},{name:"min_following_distance",min:2,max:null,unit:"s",tolerance:.2},{name:"max_route_length",min:0,max:300,unit:"km",tolerance:10}],geo:{type:"road_network",description:"Approved regional highway and arterial segments  includes transfer hub access roads"},time:{operating_hours:"04:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"route_local"},states:{allowed:["parked","highway_cruise","arterial_drive","hub_approach","loading","unloading","mrc"],forbidden:["residential_street","school_zone","unpaved_road"]},odd_description:"Regional distribution routes on approved highways and arterials. Shorter segments with more frequent stops. System handles hub ingress/egress on pre-mapped facility roads.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},urban_robotaxi:{label:"Urban Robotaxi",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:4,unit:"persons",tolerance:0},{name:"min_visibility",min:100,max:null,unit:"m",tolerance:10},{name:"max_precipitation_rate",min:0,max:10,unit:"mm/hr",tolerance:1}],geo:{type:"road_network",description:"Approved urban street network with pickup/dropoff zones  excludes highways, unpaved roads, restricted zones"},time:{operating_hours:"05:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["parked","cruising","passenger_pickup","passenger_transit","dropoff","repositioning","mrc"],forbidden:["freeway_entered","visibility_degraded","door_open_moving"]},odd_description:"Dense urban street environment with mixed traffic, pedestrians, cyclists. L4 autonomy on mapped city streets. System handles intersections, traffic signals, and complex urban scenarios within speed and weather limits.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,passenger_interlock:!0,emergency_stop:!0}}},suburban_robotaxi:{label:"Suburban Robotaxi",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:80,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:4,unit:"persons",tolerance:0},{name:"min_visibility",min:150,max:null,unit:"m",tolerance:10}],geo:{type:"road_network",description:"Approved suburban road network including arterials and residential streets  excludes highways, rural roads"},time:{operating_hours:"05:00-00:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["parked","cruising","pickup","transit","dropoff","repositioning","mrc"],forbidden:["highway_entered","unpaved_road","school_zone_during_hours"]},odd_description:"Suburban mixed-use road environment. Lower traffic density than urban, higher speed limits. System operates on mapped residential and arterial roads with school zone awareness.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},fixed_route_autonomous_bus:{label:"Fixed-Route Autonomous Bus",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:40,unit:"persons",tolerance:0},{name:"max_grade",min:0,max:12,unit:"%",tolerance:.5}],geo:{type:"route",description:"Fixed transit route with designated stops  no deviation from approved route under any circumstances"},time:{operating_hours:"05:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"transit_local"},states:{allowed:["depot","en_route","stopped_at_station","loading","unloading","returning_depot","mrc"],forbidden:["off_route","door_open_moving","passenger_count_exceeded"]},odd_description:"Fixed transit route on public roads with designated bus stops. System follows exact route with no autonomous deviation. Passenger loading/unloading at stops only with door interlocks.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,door_interlock:!0,emergency_stop:!0}}},airport_shuttle_airside:{label:"Airport Shuttle (Airside)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:20,unit:"persons",tolerance:0},{name:"min_aircraft_clearance",min:10,max:null,unit:"m",tolerance:1}],geo:{type:"route",description:"Approved airside taxiway and apron routes  deconflicted from active runways and taxiways"},time:{operating_hours:"04:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"airport_local"},states:{allowed:["parked","en_route","at_gate","loading","unloading"],forbidden:["active_runway_proximity","aircraft_pushback_zone"]},odd_description:"Airport airside operations on controlled surface routes. System integrates with airport surface management and maintains clearance from all aircraft operations. Speed limited to airside regulations.",safety:{violation_action:"block",fail_closed:!0,atc_integration:!0,emergency_stop:!0}}},airport_shuttle_landside:{label:"Airport Shuttle (Landside)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:30,unit:"persons",tolerance:0}],geo:{type:"route",description:"Terminal-to-parking/rental fixed route  excludes active roadways, departure lanes"},time:{operating_hours:"04:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"airport_local"},states:{allowed:["parked","en_route","at_stop","loading","unloading","returning"],forbidden:["off_route","departure_lane_entered"]},odd_description:"Fixed route between airport terminals and parking/rental facilities on landside roads. Controlled low-speed environment with dedicated lanes where possible.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,emergency_stop:!0}}},port_terminal_tractor:{label:"Port Terminal Tractor (Yard Truck)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_tow_weight",min:0,max:8e4,unit:"kg",tolerance:500},{name:"min_container_clearance",min:1,max:null,unit:"m",tolerance:.1}],geo:{type:"polygon",description:"Port terminal yard boundary  approved lanes between crane positions and stacking areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["parked","empty_transit","loaded_transit","crane_position","stacking_position","charging"],forbidden:["public_road","human_zone_speed_exceeded","unstable_load"]},odd_description:"Closed port terminal environment with controlled traffic. System transports containers between cranes and stacking areas on predefined yard lanes. No public road interaction.",safety:{violation_action:"block",fail_closed:!0,load_stability_check:!0,emergency_stop:!0}}},mining_site_vehicle:{label:"Mining Site Autonomous Vehicle",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:4e5,unit:"kg",tolerance:1e3},{name:"max_grade",min:0,max:15,unit:"%",tolerance:.5},{name:"min_edge_distance",min:5,max:null,unit:"m",tolerance:.5}],geo:{type:"polygon",description:"Mine site operational boundary  approved haul roads, pit zones, dump areas  excludes blast zones, maintenance areas during service"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mine_local"},states:{allowed:["parked","hauling_loaded","hauling_empty","loading","dumping","fueling"],forbidden:["blast_zone_active","maintenance_area","edge_proximity_exceeded"]},odd_description:"Open-pit or underground mine with controlled vehicle traffic. Haul trucks operate on designated mine roads with edge detection. System integrates with mine dispatch and blast management.",safety:{violation_action:"block",fail_closed:!0,edge_protection:!0,blast_zone_interlock:!0,emergency_stop:!0}}},valet_parking_system:{label:"Automated Valet Parking",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:10,unit:"km/h",tolerance:.5},{name:"max_steering_angle",min:0,max:40,unit:"degrees",tolerance:1},{name:"min_obstacle_clearance",min:.2,max:null,unit:"m",tolerance:.05}],geo:{type:"polygon",description:"Parking structure or lot boundary  approved driving lanes and parking spaces only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["parked","maneuvering_to_spot","maneuvering_to_pickup","waiting_at_pickup"],forbidden:["pedestrian_detected","exit_lane_blocked","slope_exceeded"]},odd_description:"Controlled parking facility environment. Vehicle self-parks and self-retrieves at very low speed. Facility must be mapped and infrastructure-equipped. No pedestrians allowed in autonomous zone.",safety:{violation_action:"block",fail_closed:!0,pedestrian_stop:!0,ultra_low_speed:!0,emergency_stop:!0}}},low_speed_neighborhood_ev:{label:"Low-Speed Neighborhood EV",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:6,unit:"persons",tolerance:0},{name:"max_road_speed_limit",min:0,max:45,unit:"km/h",tolerance:0}],geo:{type:"road_network",description:"Neighborhood streets with posted speed limits 45 km/h  excludes arterials, highways, roads without sidewalks"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"community_local"},states:{allowed:["parked","cruising","pickup","dropoff","charging","mrc"],forbidden:["arterial_road","night_unlighted_road","heavy_rain"]},odd_description:"Residential neighborhood and retirement community streets. Low-speed vehicle class per FMVSS. Operates only on roads with posted speed limits at or below vehicle max speed.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},autonomous_cargo_vessel_coastal:{label:"Autonomous Cargo Vessel (Coastal)",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:15,unit:"knots",tolerance:.5},{name:"max_sea_state",min:0,max:5,unit:"Beaufort",tolerance:0},{name:"max_draft",min:0,max:8,unit:"m",tolerance:.1},{name:"min_under_keel_clearance",min:2,max:null,unit:"m",tolerance:.2}],geo:{type:"corridor",description:"Approved coastal shipping lanes  excludes TSS separation zones, marine protected areas, port approaches without pilot"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","departing","underway","approaching","anchored","mrc"],forbidden:["sea_state_exceeded","visibility_below_1nm","traffic_density_exceeded"]},odd_description:"Coastal shipping routes within 50nm of shore. System follows COLREG rules, maintains AIS broadcast, and transitions to remote operator handoff in congested waters. IMO MASS Level 3.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,remote_handoff:!0,emergency_stop:!1}}},autonomous_cargo_vessel_ocean:{label:"Autonomous Cargo Vessel (Ocean)",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:20,unit:"knots",tolerance:.5},{name:"max_sea_state",min:0,max:7,unit:"Beaufort",tolerance:0},{name:"max_roll_angle",min:0,max:30,unit:"degrees",tolerance:2},{name:"min_stability_gm",min:.5,max:null,unit:"m",tolerance:.05}],geo:{type:"corridor",description:"Ocean routing corridors  avoids ice zones, piracy high-risk areas, environmentally sensitive waters per IMO designations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","departing","ocean_transit","weather_routing","approaching","anchored"],forbidden:["stability_compromised","communication_lost_48hr","ice_zone_entered"]},odd_description:"Trans-oceanic shipping routes. Fully autonomous with shore-based remote monitoring. System performs weather routing optimization within approved corridor. COLREG compliant with enhanced collision avoidance.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,weather_routing:!0,emergency_stop:!1}}},port_crane_system:{label:"Automated Port Crane (STS/RTG)",domain:"marine",template:{numeric:[{name:"max_hoist_speed",min:0,max:90,unit:"m/min",tolerance:2},{name:"max_trolley_speed",min:0,max:240,unit:"m/min",tolerance:5},{name:"max_gantry_speed",min:0,max:45,unit:"m/min",tolerance:2},{name:"max_wind_speed",min:0,max:72,unit:"km/h",tolerance:3},{name:"max_lift_weight",min:0,max:65,unit:"tonnes",tolerance:1}],geo:{type:"linear",description:"Crane rail span and apron reach  excludes adjacent crane working zones, vessel superstructure clearance zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["idle","lifting","lowering","trolleying","gantry_moving","container_placing"],forbidden:["wind_exceeded","anti_collision_triggered","overload_detected","personnel_in_zone"]},odd_description:"Port container terminal crane operations. System handles container lift/place cycles within defined crane envelope. Anti-collision zones with adjacent cranes enforced. Wind speed limits enforced with automatic shutdown.",safety:{violation_action:"block",fail_closed:!0,anti_collision:!0,overload_protection:!0,emergency_stop:!0}}},container_yard_agv:{label:"Container Yard AGV",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:20,unit:"km/h",tolerance:1},{name:"max_payload",min:0,max:7e4,unit:"kg",tolerance:500},{name:"min_obstacle_distance",min:2,max:null,unit:"m",tolerance:.2}],geo:{type:"polygon",description:"Container yard lane network  approved travel lanes between crane positions and stacking blocks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["parked","empty_transit","loaded_transit","crane_exchange","charging"],forbidden:["personnel_zone","off_lane","unstable_load"]},odd_description:"Closed container terminal yard with controlled traffic. AGVs transport containers between quay cranes and yard stacking equipment on predefined lane network.",safety:{violation_action:"block",fail_closed:!0,personnel_detection:!0,emergency_stop:!0}}},autonomous_tugboat:{label:"Autonomous Tugboat",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:14,unit:"knots",tolerance:.5},{name:"max_bollard_pull",min:0,max:80,unit:"tonnes",tolerance:2},{name:"max_wind_speed",min:0,max:50,unit:"knots",tolerance:2},{name:"max_current",min:0,max:4,unit:"knots",tolerance:.2}],geo:{type:"polygon",description:"Port harbor and approach channel  approved escort and assist zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["moored","transiting","escort_position","assisting","standby","returning"],forbidden:["towline_overload","sea_state_exceeded","vessel_communication_lost"]},odd_description:"Port harbor tug operations for vessel assist and escort. System operates in close proximity to large vessels under port control coordination. Remote operator oversight for all assist maneuvers.",safety:{violation_action:"block",fail_closed:!0,towline_monitor:!0,remote_handoff:!0,emergency_stop:!0}}},underwater_auv_inspection:{label:"Underwater AUV (Inspection)",domain:"marine",template:{numeric:[{name:"max_depth",min:0,max:300,unit:"m",tolerance:5},{name:"max_speed",min:0,max:4,unit:"knots",tolerance:.2},{name:"max_mission_duration",min:0,max:12,unit:"hr",tolerance:.5},{name:"min_battery_for_surface",min:20,max:null,unit:"%",tolerance:3}],geo:{type:"polygon_3d",description:"Defined underwater inspection zone around target structure  exclusion zones around intake/outflow, shipping lanes overhead"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["surface","diving","inspecting","transiting","ascending","recovery"],forbidden:["battery_below_surface_reserve","depth_exceeded","communication_timeout"]},odd_description:"Underwater inspection of subsea infrastructure (pipelines, platforms, hulls). Tethered or free-swimming within defined zone. System maintains energy reserve for safe surfacing at all times.",safety:{violation_action:"block",fail_closed:!0,auto_surface:!0,depth_limiter:!0,emergency_stop:!1}}},underwater_auv_survey:{label:"Underwater AUV (Survey / Mapping)",domain:"marine",template:{numeric:[{name:"max_depth",min:0,max:6e3,unit:"m",tolerance:10},{name:"max_speed",min:0,max:5,unit:"knots",tolerance:.2},{name:"max_mission_duration",min:0,max:72,unit:"hr",tolerance:1},{name:"max_range",min:0,max:200,unit:"km",tolerance:5}],geo:{type:"polygon_3d",description:"Defined survey grid with depth ceiling/floor  avoids shipping lanes, fishing grounds, protected marine areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["surface","diving","surveying","transiting","ascending","recovery_wait"],forbidden:["depth_exceeded","energy_below_return_threshold","off_grid"]},odd_description:"Deep-water autonomous survey operations. Extended duration missions with pre-programmed grid patterns. System surfaces on completion or energy threshold. No real-time control in deep operations.",safety:{violation_action:"block",fail_closed:!0,auto_surface:!0,depth_limiter:!0,emergency_stop:!1}}},autonomous_ferry:{label:"Autonomous Ferry",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:12,unit:"knots",tolerance:.5},{name:"max_passengers",min:0,max:150,unit:"persons",tolerance:0},{name:"max_wind_speed",min:0,max:40,unit:"knots",tolerance:2},{name:"max_wave_height",min:0,max:1.5,unit:"m",tolerance:.1}],geo:{type:"corridor",description:"Fixed ferry route between terminals  approved transit corridor with exclusion from shipping lanes"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["moored","loading","departing","underway","arriving","unloading"],forbidden:["sea_state_exceeded","passenger_on_deck_during_transit","off_corridor"]},odd_description:"Fixed-route passenger ferry between two terminals. Short crossing in sheltered or semi-sheltered waters. System follows predefined route with COLREG compliance and weather-based operational limits.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,passenger_safety:!0,emergency_stop:!0}}},aquaculture_robot:{label:"Aquaculture Robot",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"knots",tolerance:.2},{name:"max_depth",min:0,max:30,unit:"m",tolerance:1},{name:"max_feed_rate",min:0,max:500,unit:"kg/hr",tolerance:10}],geo:{type:"polygon_3d",description:"Fish farm cage/pen boundaries  excludes neighboring pens, mooring lines, net edges"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["docked","feeding","inspecting","net_cleaning","monitoring","returning"],forbidden:["net_contact","fish_mortality_spike","current_exceeded"]},odd_description:"Marine aquaculture installation with defined cage structures. System operates within and around fish pens for feeding, inspection, and net maintenance. Tethered or cage-bounded operation.",safety:{violation_action:"block",fail_closed:!0,net_proximity:!0,emergency_stop:!0}}},surface_survey_vessel:{label:"Autonomous Surface Survey Vessel",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"knots",tolerance:.3},{name:"max_sea_state",min:0,max:4,unit:"Beaufort",tolerance:0},{name:"max_range",min:0,max:100,unit:"km",tolerance:5},{name:"max_mission_duration",min:0,max:48,unit:"hr",tolerance:2}],geo:{type:"polygon",description:"Defined survey area  excludes shipping lanes, restricted zones, shallow water below draft"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","transiting","surveying","station_keeping","returning"],forbidden:["sea_state_exceeded","shipping_lane_entered","communication_lost_2hr"]},odd_description:"Surface vessel conducting hydrographic or environmental survey in defined area. COLREG compliant with AIS. System follows pre-programmed survey pattern and returns on weather degradation.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,auto_return:!0,emergency_stop:!1}}},surgical_robot_orthopedic:{label:"Surgical Robot (Orthopedic)",domain:"medical",template:{numeric:[{name:"max_cutting_force",min:0,max:50,unit:"N",tolerance:1},{name:"max_cutting_depth",min:0,max:15,unit:"mm",tolerance:.1},{name:"positional_accuracy",min:0,max:.5,unit:"mm",tolerance:.05},{name:"max_joint_velocity",min:0,max:100,unit:"mm/s",tolerance:2}],geo:{type:"volume",description:"Surgical workspace envelope defined by pre-operative plan  hard boundaries around critical anatomy (nerves, vessels)"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"hospital_local"},states:{allowed:["powered_off","initializing","registered","cutting","paused","retracting","complete"],forbidden:["registration_lost","force_limit_exceeded","outside_planned_volume"]},odd_description:"Operating room environment with patient-registered coordinate system. Robot executes pre-planned bone cuts within defined volume. Surgeon maintains supervisory control and can override at any time. FDA Class II/III.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,surgeon_override:!0,emergency_stop:!0}}},surgical_robot_soft_tissue:{label:"Surgical Robot (Soft Tissue / Laparoscopic)",domain:"medical",template:{numeric:[{name:"max_instrument_force",min:0,max:10,unit:"N",tolerance:.5},{name:"max_instrument_speed",min:0,max:50,unit:"mm/s",tolerance:2},{name:"max_workspace_radius",min:0,max:150,unit:"mm",tolerance:2},{name:"max_insufflation_pressure",min:0,max:15,unit:"mmHg",tolerance:.5}],geo:{type:"volume",description:"Surgical cavity workspace  instrument reach envelope with exclusion zones around critical structures"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"hospital_local"},states:{allowed:["powered_off","initializing","docked","operating","paused","undocking","complete"],forbidden:["force_exceeded","workspace_exceeded","communication_lost"]},odd_description:"Operating room with teleoperated or semi-autonomous laparoscopic instruments. Surgeon maintains primary control with haptic feedback. System enforces instrument workspace and force limits.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,surgeon_override:!0,emergency_stop:!0}}},pharmacy_dispensing_robot:{label:"Pharmacy Dispensing Robot",domain:"medical",template:{numeric:[{name:"max_dispensing_rate",min:0,max:200,unit:"scripts/hr",tolerance:5},{name:"max_controlled_substance_quantity",min:0,max:30,unit:"doses",tolerance:0},{name:"temperature_range_min",min:2,max:null,unit:"C",tolerance:.5},{name:"temperature_range_max",min:0,max:8,unit:"C",tolerance:.5}],geo:{type:"enclosure",description:"Pharmacy dispensing cabinet footprint  secure enclosure with controlled access"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","dispensing","restocking","inventory_count","maintenance_mode"],forbidden:["barcode_mismatch","controlled_substance_count_discrepancy","temperature_excursion"]},odd_description:"Hospital or retail pharmacy automated dispensing. System verifies every medication against prescription via barcode/RFID. Controlled substance tracking with DEA-compliant chain of custody. Pharmacist verification required.",safety:{violation_action:"block",fail_closed:!0,pharmacist_override:!0,dea_logging:!0,emergency_stop:!0}}},hospital_logistics_robot:{label:"Hospital Logistics Robot",domain:"medical",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.2},{name:"max_payload",min:0,max:50,unit:"kg",tolerance:2},{name:"max_noise_level",min:0,max:55,unit:"dB",tolerance:2}],geo:{type:"floor_plan",description:"Hospital floor plan corridors and elevators  excludes ICU during quiet hours, operating rooms during procedures, isolation rooms"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","en_route","at_station","loading","unloading","elevator_transit","charging"],forbidden:["or_during_procedure","isolation_room","speed_exceeded_in_patient_area"]},odd_description:"Hospital interior corridors for medication, specimen, and supply delivery. System navigates around patients, staff, and equipment. Reduced speed near patient areas. Elevator integration required.",safety:{violation_action:"block",fail_closed:!0,patient_area_speed_limit:!0,emergency_stop:!0}}},rehabilitation_robot:{label:"Rehabilitation / Physical Therapy Robot",domain:"medical",template:{numeric:[{name:"max_assistive_force",min:0,max:100,unit:"N",tolerance:2},{name:"max_joint_velocity",min:0,max:30,unit:"deg/s",tolerance:1},{name:"max_range_of_motion",min:0,max:180,unit:"degrees",tolerance:2},{name:"max_session_duration",min:0,max:60,unit:"min",tolerance:2}],geo:{type:"workspace",description:"Rehabilitation bay or patient room  robot workspace envelope around patient"},time:{operating_hours:"07:00-19:00",operating_days:[1,2,3,4,5],timezone:"facility_local"},states:{allowed:["powered_off","initializing","exercise_mode","passive_mode","paused","session_complete"],forbidden:["force_exceeded","pain_signal_detected","patient_not_secured"]},odd_description:"Clinical rehabilitation environment with patient physically interfacing with robotic device. System follows prescribed exercise protocol with force and range-of-motion limits. Therapist supervision required.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,patient_override:!0,therapist_override:!0,emergency_stop:!0}}},radiology_ai_diagnostic:{label:"Radiology AI (Diagnostic)",domain:"medical",template:{numeric:[{name:"max_daily_reads",min:0,max:500,unit:"studies",tolerance:10},{name:"min_confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"max_report_latency",min:0,max:60,unit:"min",tolerance:5}],geo:{type:"logical",description:"Connected PACS/RIS systems  approved imaging modalities and body regions only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","processing","flagging","reporting","quality_review"],forbidden:["confidence_below_threshold_auto_report","unsupported_modality","radiologist_override_bypassed"]},odd_description:"Medical imaging AI for triage, detection, and measurement. System flags findings for radiologist review  does not issue final diagnostic reports autonomously. FDA 510(k) cleared for specific indications.",safety:{violation_action:"block",fail_closed:!0,radiologist_review_required:!0,audit_trail:!0}}},pathology_ai_diagnostic:{label:"Pathology AI (Diagnostic)",domain:"medical",template:{numeric:[{name:"max_daily_slides",min:0,max:300,unit:"slides",tolerance:10},{name:"min_confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"max_turnaround",min:0,max:24,unit:"hr",tolerance:1}],geo:{type:"logical",description:"Connected digital pathology scanner and LIS  approved stain types and tissue types only"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"lab_local"},states:{allowed:["idle","scanning","analyzing","flagging","reporting","qa_review"],forbidden:["unsupported_stain_type","confidence_below_threshold","pathologist_review_bypassed"]},odd_description:"Digital pathology AI for slide analysis, cell counting, and anomaly detection. System provides preliminary analysis for pathologist review. Does not issue independent diagnoses.",safety:{violation_action:"block",fail_closed:!0,pathologist_review_required:!0,audit_trail:!0}}},patient_monitoring_icu:{label:"Patient Monitoring AI (ICU)",domain:"medical",template:{numeric:[{name:"max_patients_monitored",min:0,max:50,unit:"patients",tolerance:0},{name:"alert_latency",min:0,max:5,unit:"s",tolerance:.5},{name:"max_false_alarm_rate",min:0,max:5,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected ICU bed monitoring systems  approved vital sign parameters and device types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["monitoring","alerting","trending","shift_handoff","calibrating"],forbidden:["alert_suppression_unauthorized","sensor_disconnected_unacknowledged"]},odd_description:"ICU patient monitoring with AI-driven early warning. System analyzes continuous vital sign streams and alerts nursing staff to deterioration patterns. Does not autonomously modify treatment.",safety:{violation_action:"warn",fail_closed:!0,nurse_notification_required:!0,audit_trail:!0}}},patient_monitoring_remote:{label:"Patient Monitoring AI (Remote / RPM)",domain:"medical",template:{numeric:[{name:"max_patients_monitored",min:0,max:500,unit:"patients",tolerance:10},{name:"max_alert_latency",min:0,max:60,unit:"s",tolerance:5},{name:"check_in_frequency",min:0,max:24,unit:"hr",tolerance:1}],geo:{type:"logical",description:"Connected RPM devices (blood pressure, glucose, pulse ox, weight)  approved device models and firmware versions"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"patient_local"},states:{allowed:["monitoring","alerting","trending","provider_review","patient_engagement"],forbidden:["critical_value_unescalated","device_disconnected_48hr_unnoticed"]},odd_description:"Remote patient monitoring for chronic disease management. System tracks trends and alerts clinical team to concerning patterns. Patient-facing with provider oversight. HIPAA compliant.",safety:{violation_action:"warn",fail_closed:!0,provider_escalation:!0,hipaa_compliant:!0}}},medication_dosing_ai:{label:"Medication Dosing AI",domain:"medical",template:{numeric:[{name:"max_dose_deviation",min:0,max:10,unit:"%",tolerance:1},{name:"max_infusion_rate",min:0,max:999,unit:"mL/hr",tolerance:1},{name:"max_daily_dose",min:0,max:null,unit:"mg",tolerance:0}],geo:{type:"logical",description:"Connected infusion pumps and EHR system  approved medication formulary only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","calculating","recommending","infusing","monitoring","complete"],forbidden:["allergy_conflict","interaction_detected","dose_exceeds_protocol","pharmacist_override_bypassed"]},odd_description:"AI-assisted medication dosing for titration protocols (insulin, heparin, vasopressors). System recommends doses based on patient parameters. Pharmacist and nurse verification required before administration.",safety:{violation_action:"block",fail_closed:!0,pharmacist_verification:!0,nurse_verification:!0,five_rights_check:!0,emergency_stop:!0}}},triage_ai_system:{label:"Triage AI System (ED)",domain:"medical",template:{numeric:[{name:"max_patients_per_hour",min:0,max:60,unit:"patients/hr",tolerance:5},{name:"max_triage_time",min:0,max:5,unit:"min",tolerance:.5},{name:"min_acuity_accuracy",min:.85,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"ED triage workflow  connected to EHR, vital sign monitors, and patient tracking board"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","assessing","scoring","recommending","nurse_review","complete"],forbidden:["auto_assign_without_nurse_review","downgrade_critical_patient"]},odd_description:"Emergency department triage assistance AI. System suggests acuity level based on chief complaint, vitals, and history. Triage nurse makes final acuity determination. System cannot independently downgrade patient acuity.",safety:{violation_action:"block",fail_closed:!0,nurse_override_required:!0,critical_patient_escalation:!0}}},lab_automation_robot:{label:"Lab Automation Robot",domain:"medical",template:{numeric:[{name:"max_sample_throughput",min:0,max:1e3,unit:"samples/hr",tolerance:20},{name:"max_pipette_volume",min:0,max:1e3,unit:"L",tolerance:.5},{name:"temperature_stability",min:-.5,max:.5,unit:"C",tolerance:.1}],geo:{type:"enclosure",description:"Biosafety cabinet or lab bench footprint  enclosed workspace with controlled access"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"lab_local"},states:{allowed:["idle","processing","pipetting","incubating","reading","cleaning","maintenance"],forbidden:["sample_id_mismatch","biosafety_breach","reagent_expired"]},odd_description:"Clinical or research laboratory with automated sample processing. System handles sample accessioning, preparation, and analysis within enclosed workspace. Chain of custody maintained via barcode/RFID tracking.",safety:{violation_action:"block",fail_closed:!0,sample_tracking:!0,biosafety_interlock:!0,emergency_stop:!0}}},high_frequency_trading:{label:"High-Frequency Trading System",domain:"financial",template:{numeric:[{name:"max_position_size",min:0,max:1e7,unit:"USD",tolerance:1e5},{name:"max_daily_loss",min:0,max:5e5,unit:"USD",tolerance:1e4},{name:"max_orders_per_second",min:0,max:1e4,unit:"orders/s",tolerance:100},{name:"max_notional_exposure",min:0,max:1e8,unit:"USD",tolerance:1e6}],geo:{type:"logical",description:"Approved exchanges and trading venues  approved instrument types and symbol lists"},time:{operating_hours:"09:30-16:00",operating_days:[1,2,3,4,5],timezone:"exchange_local"},states:{allowed:["pre_market","active_trading","risk_check","position_unwinding","end_of_day","halted"],forbidden:["daily_loss_exceeded","position_limit_exceeded","exchange_circuit_breaker"]},odd_description:"Automated trading on regulated exchanges. System executes within position limits, loss limits, and approved instruments. Kill switch triggers on daily loss threshold or anomalous market conditions. SEC/FINRA compliant.",safety:{violation_action:"block",fail_closed:!0,kill_switch:!0,risk_monitor:!0,regulatory_reporting:!0}}},algorithmic_market_making:{label:"Algorithmic Market Making",domain:"financial",template:{numeric:[{name:"max_spread",min:0,max:50,unit:"bps",tolerance:2},{name:"max_inventory",min:0,max:5e6,unit:"USD",tolerance:1e5},{name:"max_daily_loss",min:0,max:2e5,unit:"USD",tolerance:1e4},{name:"min_quote_lifetime",min:100,max:null,unit:"ms",tolerance:10}],geo:{type:"logical",description:"Approved trading venues and symbol lists  approved counterparty types"},time:{operating_hours:"09:30-16:00",operating_days:[1,2,3,4,5],timezone:"exchange_local"},states:{allowed:["quoting","hedging","inventory_management","risk_pause","end_of_day"],forbidden:["inventory_exceeded","loss_exceeded","market_manipulation_pattern"]},odd_description:"Automated market making with continuous two-sided quotes. System manages inventory within limits and hedges exposure. Withdrawal from market on volatility spikes or inventory breaches.",safety:{violation_action:"block",fail_closed:!0,kill_switch:!0,inventory_limit:!0,regulatory_reporting:!0}}},credit_underwriting_ai:{label:"Credit Underwriting AI",domain:"financial",template:{numeric:[{name:"max_auto_approve_amount",min:0,max:5e4,unit:"USD",tolerance:1e3},{name:"max_daily_approvals",min:0,max:1e3,unit:"applications",tolerance:20},{name:"min_model_confidence",min:.85,max:null,unit:"score",tolerance:.02},{name:"max_adverse_action_rate",min:0,max:40,unit:"%",tolerance:2}],geo:{type:"logical",description:"Approved lending markets and jurisdictions  excludes prohibited jurisdictions and sanctioned entities"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["receiving","scoring","decisioning","approved","declined","referred_to_human","adverse_action"],forbidden:["prohibited_factor_used","fair_lending_violation","model_drift_exceeded"]},odd_description:"Automated credit decisioning within approved parameters. System scores applications and auto-approves within limits. Applications exceeding thresholds referred to human underwriter. ECOA/FCRA compliant with adverse action notices.",safety:{violation_action:"block",fail_closed:!0,fair_lending_monitor:!0,human_escalation:!0,regulatory_reporting:!0}}},insurance_underwriting_ai:{label:"Insurance Underwriting AI",domain:"financial",template:{numeric:[{name:"max_auto_bind_premium",min:0,max:25e3,unit:"USD",tolerance:1e3},{name:"max_coverage_amount",min:0,max:1e6,unit:"USD",tolerance:5e4},{name:"max_daily_binds",min:0,max:500,unit:"policies",tolerance:10}],geo:{type:"logical",description:"Approved states/territories and lines of business  excludes surplus lines requiring manual review"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["receiving","rating","quoting","binding","referring","declining"],forbidden:["prohibited_classification_used","rate_deviation_exceeded","catastrophe_moratorium_active"]},odd_description:"Automated insurance underwriting for standard risk classes. System rates, quotes, and binds within approved guidelines. Non-standard risks referred to human underwriter. State DOI rate filing compliant.",safety:{violation_action:"block",fail_closed:!0,human_escalation:!0,rate_compliance:!0}}},fraud_detection_ai:{label:"Fraud Detection AI",domain:"financial",template:{numeric:[{name:"max_auto_block_amount",min:0,max:1e4,unit:"USD",tolerance:500},{name:"max_false_positive_rate",min:0,max:3,unit:"%",tolerance:.5},{name:"alert_latency",min:0,max:500,unit:"ms",tolerance:50},{name:"max_daily_blocks",min:0,max:5e3,unit:"transactions",tolerance:100}],geo:{type:"logical",description:"All transaction channels  card present, card not present, ACH, wire"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","scoring","alerting","blocking","reviewing","releasing"],forbidden:["legitimate_pattern_blocked_repeatedly","model_drift_exceeded","override_audit_gap"]},odd_description:"Real-time transaction fraud scoring and blocking. System scores every transaction and blocks those exceeding risk thresholds. Blocked transactions queued for human review. Customer notification on blocks.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,customer_notification:!0}}},aml_ai:{label:"Anti-Money Laundering AI",domain:"financial",template:{numeric:[{name:"max_daily_alerts",min:0,max:500,unit:"alerts",tolerance:20},{name:"max_alert_resolution_time",min:0,max:48,unit:"hr",tolerance:4},{name:"min_sar_confidence",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"All customer accounts and transaction channels  OFAC/SDN list integration"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","alert_generated","investigating","sar_recommended","cleared","escalated"],forbidden:["sar_auto_filed_without_review","sanctions_hit_ignored","alert_auto_closed"]},odd_description:"Transaction monitoring and suspicious activity detection. System generates alerts for human BSA/AML analysts. Cannot auto-file SARs or auto-close alerts. FinCEN/BSA compliant with full audit trail.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,regulatory_reporting:!0}}},robo_advisory:{label:"Robo-Advisory (Wealth Management)",domain:"financial",template:{numeric:[{name:"max_single_trade_pct",min:0,max:10,unit:"% of portfolio",tolerance:.5},{name:"max_daily_rebalance_pct",min:0,max:25,unit:"% of portfolio",tolerance:1},{name:"max_leverage",min:0,max:1,unit:"ratio",tolerance:0},{name:"max_concentration_single_security",min:0,max:15,unit:"%",tolerance:1}],geo:{type:"logical",description:"Approved investment universe  approved asset classes, exchanges, and instrument types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","rebalancing","tax_loss_harvesting","dividend_reinvesting","reporting"],forbidden:["leverage_used","prohibited_security","concentration_exceeded","suitability_violation"]},odd_description:"Automated portfolio management within client-approved investment policy. System rebalances to target allocation, harvests tax losses, and reinvests dividends. No leverage, no derivatives, approved universe only. SEC/FINRA RIA compliant.",safety:{violation_action:"block",fail_closed:!0,suitability_check:!0,client_notification:!0}}},loan_origination_ai:{label:"Loan Origination AI",domain:"financial",template:{numeric:[{name:"max_auto_approve_amount",min:0,max:1e5,unit:"USD",tolerance:5e3},{name:"max_dti_ratio",min:0,max:43,unit:"%",tolerance:1},{name:"max_ltv_ratio",min:0,max:97,unit:"%",tolerance:1}],geo:{type:"logical",description:"Approved lending jurisdictions and property types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["application_received","verifying","scoring","approved","conditional","denied","referred"],forbidden:["dti_exceeded_auto_approve","fair_lending_flag","incomplete_verification_approved"]},odd_description:"Automated loan origination with document verification and creditworthiness assessment. System handles standard conforming loans within guidelines. Non-conforming loans referred to human underwriter. TRID/HMDA compliant.",safety:{violation_action:"block",fail_closed:!0,human_escalation:!0,fair_lending_monitor:!0}}},claims_processing_ai:{label:"Claims Processing AI",domain:"financial",template:{numeric:[{name:"max_auto_pay_amount",min:0,max:5e3,unit:"USD",tolerance:250},{name:"max_daily_auto_pays",min:0,max:2e3,unit:"claims",tolerance:50},{name:"max_processing_time",min:0,max:72,unit:"hr",tolerance:4}],geo:{type:"logical",description:"Approved claim types and coverage lines  approved provider networks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["received","reviewing","approved","denied","referred","paid","appealed"],forbidden:["fraud_indicator_auto_paid","above_threshold_auto_paid","duplicate_claim_paid"]},odd_description:"Automated insurance claims adjudication for standard claims within auto-pay thresholds. System reviews documentation, verifies coverage, and processes payment. Complex or high-value claims referred to human adjuster.",safety:{violation_action:"block",fail_closed:!0,fraud_detection:!0,human_escalation:!0}}},payment_risk_scoring:{label:"Payment Risk Scoring AI",domain:"financial",template:{numeric:[{name:"max_transaction_amount",min:0,max:5e4,unit:"USD",tolerance:1e3},{name:"scoring_latency",min:0,max:100,unit:"ms",tolerance:10},{name:"max_false_decline_rate",min:0,max:2,unit:"%",tolerance:.5}],geo:{type:"logical",description:"All payment channels and geographies  with country risk scoring"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["scoring","approved","declined","review_queue","manual_review"],forbidden:["sanctioned_country_approved","velocity_exceeded_approved"]},odd_description:"Real-time payment authorization risk scoring. System evaluates transaction risk and returns approve/decline/review decision within latency SLA. High-risk transactions queued for manual review.",safety:{violation_action:"block",fail_closed:!1,manual_review_queue:!0}}},grid_balancing_system:{label:"Grid Balancing System",domain:"energy",template:{numeric:[{name:"max_frequency_deviation",min:-.5,max:.5,unit:"Hz",tolerance:.01},{name:"max_autonomous_dispatch",min:0,max:500,unit:"MW",tolerance:10},{name:"max_ramp_rate",min:0,max:100,unit:"MW/min",tolerance:5},{name:"response_time",min:0,max:4,unit:"s",tolerance:.5}],geo:{type:"logical",description:"Balancing authority area  approved generation and load resources"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["monitoring","regulating","dispatching","emergency_response","manual_override"],forbidden:["islanding_unauthorized","load_shed_protected_category","frequency_collapse_unresponded"]},odd_description:"Real-time grid frequency regulation within balancing authority area. System dispatches generation and load resources within authorized MW limits. Protected categories (hospitals, emergency services) hardcoded as non-sheddable. NERC compliant.",safety:{violation_action:"block",fail_closed:!0,protected_loads:!0,nerc_logging:!0,emergency_stop:!0}}},renewable_integration_controller:{label:"Renewable Integration Controller",domain:"energy",template:{numeric:[{name:"max_curtailment",min:0,max:200,unit:"MW",tolerance:5},{name:"max_ramp_rate",min:0,max:50,unit:"MW/min",tolerance:2},{name:"min_reserve_margin",min:5,max:null,unit:"%",tolerance:1}],geo:{type:"logical",description:"Connected renewable assets  solar, wind, storage facilities within control area"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["monitoring","dispatching","curtailing","ramping","forecasting"],forbidden:["reserve_margin_violated","ppa_curtailment_exceeded","grid_code_violation"]},odd_description:"Renewable energy integration management across portfolio of solar, wind, and storage assets. System optimizes dispatch, manages curtailment within PPA limits, and maintains grid code compliance.",safety:{violation_action:"block",fail_closed:!0,grid_code_compliance:!0,ppa_limits:!0}}},demand_response_system:{label:"Demand Response System",domain:"energy",template:{numeric:[{name:"max_load_reduction",min:0,max:100,unit:"MW",tolerance:5},{name:"max_event_duration",min:0,max:4,unit:"hr",tolerance:.25},{name:"max_events_per_month",min:0,max:10,unit:"events",tolerance:0},{name:"notification_lead_time",min:15,max:null,unit:"min",tolerance:5}],geo:{type:"logical",description:"Enrolled demand response participants  approved load categories and customer segments"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"utility_local"},states:{allowed:["standby","event_called","ramping_down","sustained","ramping_up","event_complete"],forbidden:["protected_load_curtailed","event_limit_exceeded","customer_opt_out_overridden"]},odd_description:"Automated demand response dispatch to enrolled participants. System manages load curtailment events within contractual limits. Protected and opted-out loads excluded from all events.",safety:{violation_action:"block",fail_closed:!0,protected_loads:!0,customer_consent:!0}}},battery_storage_dispatch:{label:"Battery Storage Dispatch System",domain:"energy",template:{numeric:[{name:"max_charge_rate",min:0,max:100,unit:"MW",tolerance:2},{name:"max_discharge_rate",min:0,max:100,unit:"MW",tolerance:2},{name:"min_soc",min:10,max:null,unit:"%",tolerance:1},{name:"max_soc",min:0,max:95,unit:"%",tolerance:1},{name:"max_cell_temperature",min:0,max:45,unit:"C",tolerance:1}],geo:{type:"logical",description:"Battery energy storage system  approved grid interconnection points and market participation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["idle","charging","discharging","grid_forming","maintenance","thermal_management"],forbidden:["soc_below_minimum","temperature_exceeded","cell_imbalance_critical"]},odd_description:"Grid-scale battery storage dispatch for energy arbitrage, frequency regulation, and peak shaving. System operates within thermal and SOC limits with fire suppression interlock. NERC/FERC compliant.",safety:{violation_action:"block",fail_closed:!0,thermal_protection:!0,fire_suppression_interlock:!0,emergency_stop:!0}}},nuclear_plant_monitor:{label:"Nuclear Plant Monitoring AI",domain:"energy",template:{numeric:[{name:"max_reactor_temperature",min:0,max:350,unit:"C",tolerance:1},{name:"max_neutron_flux",min:0,max:100,unit:"% rated",tolerance:.5},{name:"max_coolant_pressure",min:0,max:155,unit:"bar",tolerance:.5},{name:"alert_response_time",min:0,max:1,unit:"s",tolerance:.1}],geo:{type:"logical",description:"Plant instrumentation and control systems  monitoring only, no autonomous control authority over safety systems"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"plant_local"},states:{allowed:["monitoring","trending","alerting","reporting","maintenance_support"],forbidden:["safety_system_modification","scram_inhibit","setpoint_change_unauthorized"]},odd_description:"Advisory monitoring system for nuclear plant operations. System analyzes plant parameters and provides operator recommendations. NO autonomous control authority over any safety-related system. NRC/10CFR50 compliant. Human operators make all control decisions.",safety:{violation_action:"block",fail_closed:!0,monitoring_only:!0,nrc_compliant:!0}}},oil_gas_pipeline_monitor:{label:"Oil & Gas Pipeline Monitor AI",domain:"energy",template:{numeric:[{name:"max_pressure",min:0,max:100,unit:"bar",tolerance:1},{name:"max_flow_rate",min:0,max:5e3,unit:"m/hr",tolerance:50},{name:"leak_detection_threshold",min:.1,max:null,unit:"% flow",tolerance:.05},{name:"alert_latency",min:0,max:30,unit:"s",tolerance:5}],geo:{type:"linear",description:"Pipeline segments with sensor coverage  approved operating pressure zones by segment"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","leak_alert","pressure_alert","flow_alert","shutdown_recommended","maintenance"],forbidden:["leak_confirmed_flow_continued","pressure_exceeded_no_alert"]},odd_description:"Pipeline integrity monitoring with SCADA integration. System detects anomalies (leaks, pressure excursions, flow irregularities) and alerts operators. Can recommend emergency shutdown but requires operator confirmation. PHMSA compliant.",safety:{violation_action:"warn",fail_closed:!0,operator_confirmation_for_shutdown:!0,phmsa_logging:!0}}},wind_farm_controller:{label:"Wind Farm Controller",domain:"energy",template:{numeric:[{name:"max_wind_speed_operation",min:0,max:25,unit:"m/s",tolerance:.5},{name:"max_power_output",min:0,max:500,unit:"MW",tolerance:5},{name:"max_yaw_rate",min:0,max:.5,unit:"deg/s",tolerance:.05},{name:"max_rotor_speed",min:0,max:15,unit:"rpm",tolerance:.2}],geo:{type:"logical",description:"Wind farm turbine array  approved grid connection and curtailment participation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","starting","generating","curtailing","shutting_down","maintenance","storm_shutdown"],forbidden:["wind_exceeded_generating","rotor_overspeed","grid_fault_generating"]},odd_description:"Wind farm autonomous control including turbine start/stop, yaw control, power curtailment, and grid compliance. System manages individual turbines and farm-level output. Automatic storm shutdown above cut-out wind speed.",safety:{violation_action:"block",fail_closed:!0,overspeed_protection:!0,storm_shutdown:!0,grid_code_compliance:!0}}},solar_farm_controller:{label:"Solar Farm Controller",domain:"energy",template:{numeric:[{name:"max_power_output",min:0,max:300,unit:"MW",tolerance:5},{name:"max_ramp_rate",min:0,max:30,unit:"MW/min",tolerance:2},{name:"max_inverter_temperature",min:0,max:60,unit:"C",tolerance:1},{name:"min_power_factor",min:.95,max:null,unit:"ratio",tolerance:.01}],geo:{type:"logical",description:"Solar array blocks and inverter stations  approved grid connection point"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["offline","starting","generating","curtailing","ramping","grid_support","maintenance"],forbidden:["inverter_overtemp_generating","grid_fault_generating","anti_islanding_failed"]},odd_description:"Utility-scale solar farm control including tracker positioning, inverter management, power curtailment, and reactive power support. Automatic anti-islanding protection and grid code compliance.",safety:{violation_action:"block",fail_closed:!0,anti_islanding:!0,thermal_protection:!0,grid_code_compliance:!0}}},ev_charging_network:{label:"EV Charging Network Manager",domain:"energy",template:{numeric:[{name:"max_station_power",min:0,max:350,unit:"kW",tolerance:5},{name:"max_network_load",min:0,max:10,unit:"MW",tolerance:.5},{name:"max_price_per_kwh",min:0,max:1,unit:"USD/kWh",tolerance:.05},{name:"max_demand_charge_exposure",min:0,max:5e4,unit:"USD/mo",tolerance:2e3}],geo:{type:"logical",description:"Managed charging stations across network  utility interconnection points and demand response enrollment"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["monitoring","load_balancing","demand_response","dynamic_pricing","maintenance"],forbidden:["demand_charge_exceeded","grid_overload","price_gouging_threshold"]},odd_description:"Network-wide EV charging load management. System optimizes charging across stations to minimize demand charges and participate in demand response. Dynamic pricing within regulatory limits.",safety:{violation_action:"block",fail_closed:!0,demand_limiting:!0,price_caps:!0}}},smart_meter_analytics:{label:"Smart Meter Analytics AI",domain:"energy",template:{numeric:[{name:"max_meters_monitored",min:0,max:1e6,unit:"meters",tolerance:1e4},{name:"anomaly_detection_latency",min:0,max:60,unit:"min",tolerance:5},{name:"max_auto_disconnect",min:0,max:0,unit:"meters",tolerance:0}],geo:{type:"logical",description:"Utility service territory  connected AMI infrastructure"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"utility_local"},states:{allowed:["monitoring","analyzing","alerting","reporting","forecasting"],forbidden:["auto_disconnect","customer_data_shared_unauthorized","billing_modification_unauthorized"]},odd_description:"Smart meter data analytics for usage patterns, theft detection, and demand forecasting. System provides insights to utility operators. NO autonomous disconnect authority. Customer data handled per PUC privacy rules.",safety:{violation_action:"block",fail_closed:!0,no_disconnect_authority:!0,privacy_compliant:!0}}},cnc_machine_controller:{label:"CNC Machine Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_spindle_speed",min:0,max:24e3,unit:"rpm",tolerance:50},{name:"max_feed_rate",min:0,max:15e3,unit:"mm/min",tolerance:50},{name:"max_cutting_force",min:0,max:5e3,unit:"N",tolerance:50},{name:"positional_accuracy",min:0,max:.01,unit:"mm",tolerance:.002}],geo:{type:"workspace",description:"Machine tool work envelope  defined by axis travel limits and fixture positions"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","running_program","tool_change","probing","coolant_on","paused"],forbidden:["tool_breakage_detected_running","door_open_spindle_on","axis_limit_exceeded"]},odd_description:"CNC machining with AI-optimized feed rates and tool paths. System operates within machine tool envelope with hard axis limits, force monitoring, and tool breakage detection. Door interlock required.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,force_monitoring:!0,emergency_stop:!0}}},welding_robot:{label:"Welding Robot",domain:"manufacturing",template:{numeric:[{name:"max_welding_current",min:0,max:500,unit:"A",tolerance:5},{name:"max_wire_feed_speed",min:0,max:25,unit:"m/min",tolerance:.5},{name:"max_travel_speed",min:0,max:2e3,unit:"mm/min",tolerance:20},{name:"max_heat_input",min:0,max:3,unit:"kJ/mm",tolerance:.1}],geo:{type:"workspace",description:"Welding cell with light curtain boundary  human exclusion zone during operation"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","welding","seam_tracking","torch_cleaning","part_change","inspection"],forbidden:["light_curtain_broken","gas_flow_lost","wire_stuck"]},odd_description:"Automated welding cell with safety-rated perimeter. System executes programmed weld sequences with adaptive seam tracking. Human exclusion zone enforced by light curtains and safety-rated controller.",safety:{violation_action:"block",fail_closed:!0,light_curtain:!0,gas_monitoring:!0,emergency_stop:!0}}},assembly_line_robot:{label:"Assembly Line Robot (Collaborative)",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:250,unit:"mm/s",tolerance:5},{name:"max_force",min:0,max:150,unit:"N",tolerance:5},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.2},{name:"max_power",min:0,max:80,unit:"W",tolerance:2}],geo:{type:"workspace",description:"Collaborative workspace shared with human workers  speed/force limits per ISO/TS 15066"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","assembling","handing_off","waiting","returning","paused"],forbidden:["force_exceeded","speed_exceeded_human_present","payload_exceeded"]},odd_description:"Collaborative robot (cobot) working alongside humans on assembly tasks. Power and force limiting per ISO/TS 15066. System reduces speed when human is in collaborative workspace.",safety:{violation_action:"block",fail_closed:!0,power_force_limiting:!0,speed_separation:!0,emergency_stop:!0}}},quality_inspection_ai:{label:"Quality Inspection AI (Vision)",domain:"manufacturing",template:{numeric:[{name:"max_inspection_rate",min:0,max:1e3,unit:"parts/hr",tolerance:20},{name:"min_defect_detection_rate",min:.95,max:null,unit:"ratio",tolerance:.01},{name:"max_false_reject_rate",min:0,max:2,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected inspection stations  approved part types and defect classifications"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","inspecting","classifying","rejecting","passing","calibrating"],forbidden:["model_confidence_below_threshold_passing","uncalibrated_inspecting","new_part_type_unvalidated"]},odd_description:"Machine vision quality inspection for manufactured parts. System classifies parts as pass/fail/review based on visual defects. Low-confidence parts routed to human inspector. Calibration checks required per shift.",safety:{violation_action:"block",fail_closed:!0,human_review_queue:!0,calibration_interlock:!0}}},predictive_maintenance_ai:{label:"Predictive Maintenance AI",domain:"manufacturing",template:{numeric:[{name:"max_monitored_assets",min:0,max:1e4,unit:"assets",tolerance:100},{name:"prediction_horizon",min:0,max:90,unit:"days",tolerance:5},{name:"max_auto_work_orders",min:0,max:50,unit:"orders/day",tolerance:5}],geo:{type:"logical",description:"Connected sensor network across facility  approved asset types and maintenance categories"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["monitoring","analyzing","alerting","work_order_generated","technician_dispatched"],forbidden:["critical_alert_suppressed","auto_shutdown_without_confirmation"]},odd_description:"Vibration, thermal, and performance monitoring for rotating equipment and industrial assets. System predicts failures and generates maintenance work orders. Cannot autonomously shut down production equipment.",safety:{violation_action:"warn",fail_closed:!0,no_auto_shutdown:!0,maintenance_team_notification:!0}}},chemical_process_controller:{label:"Chemical Process Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_temperature",min:0,max:500,unit:"C",tolerance:2},{name:"max_pressure",min:0,max:50,unit:"bar",tolerance:.5},{name:"max_flow_rate",min:0,max:1e3,unit:"L/hr",tolerance:10},{name:"max_concentration",min:0,max:100,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Process unit with SIS boundaries  approved setpoint ranges per unit operation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","startup","steady_state","grade_change","shutdown","emergency_shutdown"],forbidden:["sis_setpoint_override","safety_valve_bypass","runaway_reaction_unresponded"]},odd_description:"Advanced process control for chemical manufacturing. System optimizes within safety instrumented system (SIS) boundaries. Cannot modify SIS setpoints. Independent SIS takes priority over all APC actions. ISA-84/IEC 61511 compliant.",safety:{violation_action:"block",fail_closed:!0,sis_independent:!0,process_safety:!0,emergency_stop:!0}}},semiconductor_fab_controller:{label:"Semiconductor Fab Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_particle_count",min:0,max:100,unit:"particles/m",tolerance:5},{name:"temperature_stability",min:-.1,max:.1,unit:"C",tolerance:.02},{name:"humidity_stability",min:-.5,max:.5,unit:"%RH",tolerance:.1},{name:"max_wafers_in_process",min:0,max:5e3,unit:"wafers",tolerance:50}],geo:{type:"logical",description:"Cleanroom zones with environmental controls  approved tool groups and process recipes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"fab_local"},states:{allowed:["idle","processing","transferring","measuring","recipe_running","maintenance"],forbidden:["cleanroom_excursion_processing","recipe_deviation_unapproved","contamination_detected_running"]},odd_description:"Semiconductor fabrication process optimization and scheduling. System manages wafer routing, recipe execution, and environmental control within cleanroom specifications. Recipe changes require engineering approval.",safety:{violation_action:"block",fail_closed:!0,recipe_lock:!0,environmental_interlock:!0}}},food_processing_robot:{label:"Food Processing Robot",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:200,unit:"mm/s",tolerance:5},{name:"max_force",min:0,max:100,unit:"N",tolerance:5},{name:"max_product_temperature",min:0,max:10,unit:"C",tolerance:.5},{name:"max_processing_time",min:0,max:30,unit:"min",tolerance:1}],geo:{type:"workspace",description:"Food processing line  hygienic zone with controlled access"},time:{operating_hours:"04:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","processing","sorting","packaging","cleaning","sanitizing"],forbidden:["temperature_exceeded","foreign_object_detected","sanitation_schedule_missed"]},odd_description:"Food processing automation with temperature-controlled handling. System operates in hygienic environment with HACCP compliance. Temperature limits enforced throughout processing chain. Sanitation schedule mandatory.",safety:{violation_action:"block",fail_closed:!0,haccp_compliance:!0,temperature_monitoring:!0,emergency_stop:!0}}},packaging_robot:{label:"Packaging Robot",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:500,unit:"mm/s",tolerance:10},{name:"max_payload",min:0,max:30,unit:"kg",tolerance:1},{name:"max_cycle_rate",min:0,max:120,unit:"cycles/min",tolerance:5}],geo:{type:"workspace",description:"Packaging cell with guarded perimeter  conveyor in/out interfaces"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","picking","placing","palletizing","labeling","changeover"],forbidden:["guard_open_running","conveyor_jam_running","overweight_package"]},odd_description:"End-of-line packaging automation including case packing, palletizing, and labeling. System operates within guarded cell with safety-rated perimeter. Conveyor interlocks prevent operation during jams.",safety:{violation_action:"block",fail_closed:!0,guard_interlock:!0,conveyor_interlock:!0,emergency_stop:!0}}},paint_coating_robot:{label:"Paint / Coating Robot",domain:"manufacturing",template:{numeric:[{name:"max_spray_pressure",min:0,max:200,unit:"bar",tolerance:5},{name:"max_flow_rate",min:0,max:1e3,unit:"mL/min",tolerance:10},{name:"max_booth_temperature",min:0,max:30,unit:"C",tolerance:1},{name:"max_voc_concentration",min:0,max:200,unit:"ppm",tolerance:10}],geo:{type:"workspace",description:"Spray booth envelope  explosion-proof zone with ventilation requirements"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","spraying","flushing","color_change","curing","booth_purge"],forbidden:["ventilation_failed_spraying","voc_exceeded","fire_suppression_triggered"]},odd_description:"Automated paint/coating application in explosion-proof spray booth. System monitors VOC levels, booth ventilation, and fire suppression status. Operations halt immediately on ventilation failure or VOC exceedance.",safety:{violation_action:"block",fail_closed:!0,ventilation_interlock:!0,fire_suppression:!0,explosion_proof:!0,emergency_stop:!0}}},perimeter_surveillance:{label:"Perimeter Surveillance System",domain:"defense",template:{numeric:[{name:"max_detection_range",min:0,max:5e3,unit:"m",tolerance:50},{name:"max_tracking_targets",min:0,max:100,unit:"targets",tolerance:5},{name:"alert_latency",min:0,max:2,unit:"s",tolerance:.2},{name:"min_classification_confidence",min:.85,max:null,unit:"score",tolerance:.02}],geo:{type:"polygon",description:"Facility perimeter with detection zones  inner/outer alert zones, exclusion zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["monitoring","tracking","alerting","recording","reporting"],forbidden:["autonomous_response","weapon_system_activation","perimeter_breach_unreported"]},odd_description:"Fixed perimeter surveillance with AI-assisted detection and classification. System detects, tracks, and classifies intrusions. All responses are human-initiated. No autonomous engagement capability.",safety:{violation_action:"block",fail_closed:!0,human_response_only:!0,recording_mandatory:!0}}},threat_detection_ai:{label:"Threat Detection AI",domain:"defense",template:{numeric:[{name:"max_concurrent_feeds",min:0,max:500,unit:"feeds",tolerance:10},{name:"detection_latency",min:0,max:5,unit:"s",tolerance:.5},{name:"min_confidence_for_alert",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"Connected sensor network  cameras, radar, acoustic, seismic sensors"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","detecting","classifying","alerting","reporting"],forbidden:["autonomous_engagement","alert_suppression","classification_override_unauthorized"]},odd_description:"Multi-sensor threat detection and classification for critical infrastructure protection. System fuses data from multiple sensor types and alerts human operators. Detection and alert only  no autonomous response.",safety:{violation_action:"block",fail_closed:!0,human_response_only:!0,audit_trail:!0}}},military_logistics_automation:{label:"Military Logistics Automation",domain:"defense",template:{numeric:[{name:"max_autonomous_requisition",min:0,max:5e4,unit:"USD",tolerance:5e3},{name:"max_route_deviation",min:0,max:10,unit:"%",tolerance:1},{name:"max_classified_handling_level",min:0,max:2,unit:"level",tolerance:0}],geo:{type:"polygon",description:"Approved logistics corridors and supply points  excludes forward operating areas without authorization"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"theater_local"},states:{allowed:["planning","routing","dispatching","tracking","receiving","reporting"],forbidden:["classified_material_untracked","requisition_exceeded","unauthorized_route"]},odd_description:"Military supply chain automation for routine logistics operations. System optimizes routing and inventory within authorized parameters. Classified material handling requires additional authorization layers.",safety:{violation_action:"block",fail_closed:!0,classification_enforcement:!0,chain_of_custody:!0}}},eod_mine_clearance_robot:{label:"EOD / Mine Clearance Robot",domain:"defense",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_detection_depth",min:0,max:.5,unit:"m",tolerance:.02},{name:"max_mission_duration",min:0,max:8,unit:"hr",tolerance:.5},{name:"min_safe_distance",min:100,max:null,unit:"m",tolerance:10}],geo:{type:"polygon",description:"Defined clearance lane or area  marked safe zones, exclusion zones for personnel"},time:{operating_hours:"06:00-18:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["standby","scanning","detecting","marking","neutralizing","retreating","decontaminating"],forbidden:["personnel_in_danger_zone","autonomous_detonation_without_authorization"]},odd_description:"Remote-controlled or semi-autonomous EOD/mine clearance operations. System scans, detects, and marks ordnance. Neutralization requires human authorization for each item. Personnel exclusion zone enforced.",safety:{violation_action:"block",fail_closed:!0,human_authorization_for_neutralization:!0,personnel_exclusion:!0,emergency_stop:!0}}},autonomous_sensor_network:{label:"Autonomous Sensor Network",domain:"defense",template:{numeric:[{name:"max_nodes",min:0,max:1e3,unit:"nodes",tolerance:10},{name:"max_data_rate",min:0,max:100,unit:"Mbps",tolerance:5},{name:"max_classification_level",min:0,max:3,unit:"level",tolerance:0}],geo:{type:"polygon",description:"Deployed sensor coverage area  data handling boundaries per classification"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["deployed","collecting","processing","transmitting","low_power","maintenance"],forbidden:["classification_spillage","unauthorized_transmission","node_compromise_undetected"]},odd_description:"Distributed autonomous sensor network for ISR operations. Nodes self-organize mesh network and process data at edge. Classification-level data handling enforced at each node. Anti-tamper protection.",safety:{violation_action:"block",fail_closed:!0,classification_enforcement:!0,anti_tamper:!0}}},cyber_defense_ai:{label:"Cyber Defense AI",domain:"defense",template:{numeric:[{name:"max_auto_block_duration",min:0,max:60,unit:"min",tolerance:5},{name:"max_auto_isolate_hosts",min:0,max:10,unit:"hosts",tolerance:1},{name:"detection_latency",min:0,max:5,unit:"s",tolerance:.5}],geo:{type:"logical",description:"Defended network segments  approved response actions per segment criticality"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","detecting","alerting","auto_responding","containing","reporting"],forbidden:["mission_critical_system_isolated","offensive_action","evidence_destroyed"]},odd_description:"Network defense AI with limited autonomous response capability. System can block IPs and isolate non-critical hosts for limited duration. Mission-critical system isolation requires human authorization. Forensic evidence preserved.",safety:{violation_action:"block",fail_closed:!0,mission_critical_protection:!0,forensic_preservation:!0,human_escalation:!0}}},precision_irrigation:{label:"Precision Irrigation System",domain:"agriculture",template:{numeric:[{name:"max_water_usage_daily",min:0,max:5e5,unit:"L",tolerance:5e3},{name:"max_zone_flow_rate",min:0,max:100,unit:"L/min",tolerance:2},{name:"min_soil_moisture",min:20,max:null,unit:"%",tolerance:2},{name:"max_soil_moisture",min:0,max:80,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Irrigation zones with soil type mapping  water rights boundaries and buffer zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","irrigating","monitoring","draining","frost_protection","maintenance"],forbidden:["water_rights_exceeded","runoff_detected","freeze_warning_irrigating"]},odd_description:"Automated precision irrigation based on soil moisture, weather forecast, and crop stage. System operates within water rights allocations and prevents overwatering/runoff. Frost protection mode available.",safety:{violation_action:"block",fail_closed:!0,water_rights_enforcement:!0,runoff_prevention:!0}}},crop_monitoring_ai:{label:"Crop Monitoring AI",domain:"agriculture",template:{numeric:[{name:"max_field_area",min:0,max:1e4,unit:"ha",tolerance:100},{name:"monitoring_frequency",min:0,max:24,unit:"hr",tolerance:1},{name:"min_detection_confidence",min:.8,max:null,unit:"score",tolerance:.02}],geo:{type:"polygon",description:"Farm field boundaries  satellite/drone coverage areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["monitoring","analyzing","alerting","recommending","reporting"],forbidden:["auto_spray_trigger","misidentified_pest_treated"]},odd_description:"Remote sensing and AI analysis for crop health, pest detection, and yield estimation. System provides recommendations to farm operators. Cannot autonomously trigger treatments  farmer approval required.",safety:{violation_action:"warn",fail_closed:!0,farmer_approval_required:!0}}},livestock_monitoring_ai:{label:"Livestock Monitoring AI",domain:"agriculture",template:{numeric:[{name:"max_herd_size",min:0,max:1e4,unit:"head",tolerance:100},{name:"alert_latency",min:0,max:60,unit:"s",tolerance:5},{name:"monitoring_frequency",min:0,max:15,unit:"min",tolerance:1}],geo:{type:"polygon",description:"Pasture and barn boundaries  fence lines and water sources"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["monitoring","alerting_health","alerting_escape","alerting_predator","reporting"],forbidden:["auto_medication","fence_breach_unreported"]},odd_description:"Wearable sensor and camera-based livestock health and behavior monitoring. System detects illness, calving, escape, and predator presence. Alerts farm staff  no autonomous treatment or intervention.",safety:{violation_action:"warn",fail_closed:!0,farmer_notification:!0}}},greenhouse_controller:{label:"Greenhouse Controller AI",domain:"agriculture",template:{numeric:[{name:"temperature_min",min:15,max:null,unit:"C",tolerance:.5},{name:"temperature_max",min:0,max:35,unit:"C",tolerance:.5},{name:"humidity_min",min:40,max:null,unit:"%RH",tolerance:2},{name:"humidity_max",min:0,max:85,unit:"%RH",tolerance:2},{name:"co2_max",min:0,max:1500,unit:"ppm",tolerance:50}],geo:{type:"enclosure",description:"Greenhouse zones with independent climate control  propagation, growing, hardening areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["day_mode","night_mode","ventilating","heating","cooling","co2_enriching","irrigating"],forbidden:["co2_exceeded_vents_closed","temperature_critical","humidity_condensation"]},odd_description:"Automated greenhouse climate control including heating, cooling, ventilation, CO2 enrichment, and irrigation. System maintains crop-specific environmental profiles. Safety ventilation override on CO2 or temperature exceedance.",safety:{violation_action:"block",fail_closed:!0,ventilation_override:!0,temperature_protection:!0}}},environmental_monitoring_station:{label:"Environmental Monitoring Station AI",domain:"agriculture",template:{numeric:[{name:"max_stations",min:0,max:500,unit:"stations",tolerance:10},{name:"data_collection_interval",min:0,max:60,unit:"min",tolerance:5},{name:"alert_threshold_aqi",min:0,max:500,unit:"AQI",tolerance:10}],geo:{type:"polygon",description:"Monitoring network coverage area  station locations with sensor configurations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["collecting","analyzing","alerting","reporting","calibrating","maintenance"],forbidden:["data_gap_unreported","calibration_expired_reporting","alert_suppressed"]},odd_description:"Environmental monitoring network for air quality, water quality, noise, and weather. System aggregates data, detects exceedances, and issues public alerts. Cannot suppress or modify raw sensor data.",safety:{violation_action:"warn",fail_closed:!0,data_integrity:!0,public_notification:!0}}},satellite_constellation_manager:{label:"Satellite Constellation Manager",domain:"space_extreme",template:{numeric:[{name:"max_satellites",min:0,max:5e3,unit:"satellites",tolerance:10},{name:"max_autonomous_maneuver_delta_v",min:0,max:1,unit:"m/s",tolerance:.01},{name:"min_collision_avoidance_time",min:24,max:null,unit:"hr",tolerance:2}],geo:{type:"orbital",description:"Approved orbital shells and planes  conjunction avoidance zones, debris tracking"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["nominal","station_keeping","collision_avoidance","orbit_raising","deorbiting","safe_mode"],forbidden:["maneuver_without_conjunction_check","debris_creation_risk","frequency_interference"]},odd_description:"LEO satellite constellation management including station-keeping, collision avoidance, and deorbiting. System performs autonomous collision avoidance maneuvers within delta-V budget. Large maneuvers require ground authorization.",safety:{violation_action:"block",fail_closed:!0,conjunction_assessment:!0,space_debris_mitigation:!0}}},planetary_rover:{label:"Planetary Rover",domain:"space_extreme",template:{numeric:[{name:"max_speed",min:0,max:.15,unit:"km/h",tolerance:.01},{name:"max_tilt_angle",min:0,max:30,unit:"degrees",tolerance:1},{name:"max_daily_traverse",min:0,max:200,unit:"m",tolerance:10},{name:"min_power_reserve",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Approved traverse corridor based on orbital imagery  avoids steep terrain, soft soil, and science preservation zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mission_local"},states:{allowed:["parked","traversing","science_stop","drilling","communicating","sleeping"],forbidden:["tilt_exceeded","power_critical_traversing","hazard_terrain_entered"]},odd_description:"Planetary surface exploration with autonomous hazard avoidance. Communication delays require autonomous navigation between waypoints. System preserves power for communication windows and avoids terrain hazards.",safety:{violation_action:"block",fail_closed:!0,hazard_avoidance:!0,power_preservation:!0}}},deep_sea_mining_robot:{label:"Deep Sea Mining Robot",domain:"space_extreme",template:{numeric:[{name:"max_depth",min:0,max:6e3,unit:"m",tolerance:10},{name:"max_collection_rate",min:0,max:100,unit:"tonnes/hr",tolerance:5},{name:"max_sediment_plume",min:0,max:50,unit:"m_visibility",tolerance:5},{name:"max_mission_duration",min:0,max:720,unit:"hr",tolerance:24}],geo:{type:"polygon_3d",description:"Licensed mining claim boundary  excludes environmental protection zones, vent communities, cable routes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["surface","diving","collecting","transiting","ascending","maintenance"],forbidden:["environmental_zone_entered","plume_exceeded","claim_boundary_exceeded"]},odd_description:"Deep-sea polymetallic nodule or mineral collection within licensed claim area. System operates at extreme depth with limited communication. Environmental exclusion zones enforced by onboard navigation.",safety:{violation_action:"block",fail_closed:!0,environmental_protection:!0,depth_limiter:!0}}},arctic_research_robot:{label:"Arctic / Antarctic Research Robot",domain:"space_extreme",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"min_operating_temperature",min:-50,max:null,unit:"C",tolerance:2},{name:"max_ice_thickness",min:0,max:3,unit:"m",tolerance:.1},{name:"max_mission_duration",min:0,max:168,unit:"hr",tolerance:12}],geo:{type:"polygon",description:"Approved research area  excludes wildlife protected zones, thin ice areas, crevasse fields"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["base_camp","traversing","sampling","monitoring","sheltering","returning"],forbidden:["thin_ice_detected","wildlife_zone","whiteout_conditions","communication_lost_24hr"]},odd_description:"Polar research platform operating in extreme cold with limited communication. System performs environmental sampling and monitoring within approved research zones. Auto-return on weather degradation or communication loss.",safety:{violation_action:"block",fail_closed:!0,weather_protection:!0,auto_return:!0,wildlife_avoidance:!0}}},network_traffic_controller:{label:"Network Traffic Controller AI",domain:"telecom_digital",template:{numeric:[{name:"max_bandwidth_allocation",min:0,max:100,unit:"Tbps",tolerance:1},{name:"max_route_changes_per_hour",min:0,max:1e3,unit:"changes/hr",tolerance:50},{name:"max_latency_target",min:0,max:50,unit:"ms",tolerance:2}],geo:{type:"logical",description:"Managed network topology  approved routing policies and peering agreements"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["normal","load_balancing","failover","congestion_management","maintenance_window"],forbidden:["routing_loop_created","peering_violation","priority_traffic_degraded"]},odd_description:"Software-defined network traffic engineering with AI optimization. System manages routing, load balancing, and failover within approved policies. Priority traffic classes (emergency services, healthcare) protected.",safety:{violation_action:"block",fail_closed:!0,priority_traffic_protection:!0,routing_validation:!0}}},content_moderation_ai:{label:"Content Moderation AI",domain:"telecom_digital",template:{numeric:[{name:"max_daily_reviews",min:0,max:1e7,unit:"items",tolerance:1e5},{name:"max_auto_remove_confidence",min:.95,max:null,unit:"score",tolerance:.01},{name:"review_latency",min:0,max:60,unit:"s",tolerance:5},{name:"max_false_positive_rate",min:0,max:1,unit:"%",tolerance:.2}],geo:{type:"logical",description:"Platform content streams  approved content policies by jurisdiction"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["scanning","classifying","auto_removing","queuing_review","reporting","escalating"],forbidden:["political_content_auto_removed","satire_auto_removed","appeal_ignored"]},odd_description:"AI-assisted content moderation for platform safety. System auto-removes clear violations (CSAM, spam, malware links) and queues borderline content for human review. Political, satirical, and newsworthy content requires human decision.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,appeal_process:!0,transparency_reporting:!0}}},cloud_resource_allocator:{label:"Cloud Resource Allocator AI",domain:"telecom_digital",template:{numeric:[{name:"max_auto_scale_instances",min:0,max:1e4,unit:"instances",tolerance:100},{name:"max_hourly_spend",min:0,max:1e5,unit:"USD/hr",tolerance:5e3},{name:"target_utilization",min:0,max:85,unit:"%",tolerance:2}],geo:{type:"logical",description:"Approved cloud regions and availability zones  data residency requirements by workload"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","scaling_up","scaling_down","migrating","rebalancing","cost_optimizing"],forbidden:["budget_exceeded","data_residency_violation","single_az_critical_workload"]},odd_description:"Autonomous cloud infrastructure management with cost optimization. System scales resources based on demand within budget limits and data residency requirements. Cannot exceed hourly spend cap or violate data sovereignty rules.",safety:{violation_action:"block",fail_closed:!0,budget_enforcement:!0,data_residency:!0}}},data_center_cooling:{label:"Data Center Cooling Controller AI",domain:"telecom_digital",template:{numeric:[{name:"max_server_inlet_temp",min:0,max:27,unit:"C",tolerance:.5},{name:"max_pue",min:0,max:1.5,unit:"ratio",tolerance:.02},{name:"max_water_usage",min:0,max:1e4,unit:"L/hr",tolerance:100},{name:"min_redundancy",min:1,max:null,unit:"N+1",tolerance:0}],geo:{type:"logical",description:"Data center cooling infrastructure  CRAC/CRAH units, chillers, cooling towers per zone"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["normal","economizer_mode","mechanical_cooling","emergency_cooling","maintenance"],forbidden:["temperature_exceeded_no_response","redundancy_lost_no_alert","water_leak_undetected"]},odd_description:"AI-optimized data center cooling for energy efficiency. System manages HVAC equipment to minimize PUE while maintaining temperature limits. Redundancy requirements enforced  cannot take cooling unit offline below N+1.",safety:{violation_action:"block",fail_closed:!0,temperature_protection:!0,redundancy_enforcement:!0,emergency_stop:!0}}},five_g_network_slicing:{label:"5G Network Slicing Controller",domain:"telecom_digital",template:{numeric:[{name:"max_slices",min:0,max:1e3,unit:"slices",tolerance:10},{name:"min_guaranteed_bandwidth",min:0,max:null,unit:"Mbps",tolerance:1},{name:"max_latency_critical_slice",min:0,max:5,unit:"ms",tolerance:.5}],geo:{type:"logical",description:"RAN and core network elements  approved slice configurations per customer SLA"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["configuring","active","scaling","migrating","decommissioning"],forbidden:["sla_violation_unresolved","critical_slice_degraded","resource_overcommit"]},odd_description:"5G network slice lifecycle management. System allocates, scales, and optimizes network slices within SLA guarantees. Critical slices (emergency services, healthcare) have priority and guaranteed resources.",safety:{violation_action:"block",fail_closed:!0,sla_enforcement:!0,priority_slices:!0}}},construction_excavator_autonomous:{label:"Autonomous Construction Excavator",domain:"construction",template:{numeric:[{name:"max_dig_depth",min:0,max:7,unit:"m",tolerance:.1},{name:"max_swing_speed",min:0,max:6,unit:"rpm",tolerance:.2},{name:"max_bucket_load",min:0,max:3e3,unit:"kg",tolerance:50},{name:"min_utility_clearance",min:1,max:null,unit:"m",tolerance:.1}],geo:{type:"polygon",description:"Excavation zone with known utility locations  exclusion zones around buried infrastructure, pedestrian areas"},time:{operating_hours:"07:00-18:00",operating_days:[1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["idle","excavating","loading","grading","repositioning","refueling"],forbidden:["utility_zone_entered","personnel_in_swing_radius","grade_exceeded"]},odd_description:"Autonomous excavation within defined dig zone. System uses GPS-RTK positioning with known utility maps. Hard exclusion zones around buried utilities. Personnel detection stops all motion.",safety:{violation_action:"block",fail_closed:!0,utility_avoidance:!0,personnel_detection:!0,emergency_stop:!0}}},construction_site_drone:{label:"Construction Site Survey Drone",domain:"construction",template:{numeric:[{name:"max_altitude_agl",min:0,max:100,unit:"m",tolerance:3},{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:25,unit:"km/h",tolerance:2}],geo:{type:"polygon_3d",description:"Construction site boundary with crane exclusion zones and active work area buffers"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["grounded","surveying","inspecting","returning","landing"],forbidden:["crane_zone_entered","active_pour_zone","wind_exceeded"]},odd_description:"Construction site progress monitoring and survey via drone. System avoids active crane zones and work areas. Flights coordinated with site safety officer. Daily progress capture for BIM comparison.",safety:{violation_action:"block",fail_closed:!0,crane_avoidance:!0,geofence_hard:!0,emergency_stop:!0}}},tunnel_boring_machine_ai:{label:"Tunnel Boring Machine AI",domain:"construction",template:{numeric:[{name:"max_advance_rate",min:0,max:30,unit:"m/day",tolerance:1},{name:"max_face_pressure",min:0,max:5,unit:"bar",tolerance:.1},{name:"max_torque",min:0,max:5e4,unit:"kNm",tolerance:500},{name:"max_deviation_from_alignment",min:0,max:50,unit:"mm",tolerance:5}],geo:{type:"linear",description:"Tunnel alignment with designed profile  exclusion zones around surface structures and utilities"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["standby","boring","segment_erecting","grouting","maintenance","survey_check"],forbidden:["face_pressure_exceeded","alignment_exceeded","ground_settlement_exceeded"]},odd_description:"AI-optimized TBM operation for tunnel construction. System controls advance rate, face pressure, and grouting based on ground conditions. Alignment maintained within tolerances. Ground settlement monitoring with automatic pause.",safety:{violation_action:"block",fail_closed:!0,settlement_monitoring:!0,face_pressure_control:!0,emergency_stop:!0}}},autonomous_haul_truck_surface:{label:"Surface Mine Haul Truck",domain:"construction",template:{numeric:[{name:"max_speed_loaded",min:0,max:40,unit:"km/h",tolerance:2},{name:"max_speed_empty",min:0,max:55,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:35e4,unit:"kg",tolerance:5e3},{name:"max_grade",min:0,max:12,unit:"%",tolerance:.5}],geo:{type:"polygon",description:"Mine haul roads with edge detection zones  approved routes between pit, crusher, dump, and fuel bay"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mine_local"},states:{allowed:["parked","hauling_loaded","hauling_empty","loading","dumping","fueling","washing"],forbidden:["edge_proximity_exceeded","blast_zone_active","overloaded","grade_exceeded_loaded"]},odd_description:"Ultra-class autonomous haul truck in open-pit mine. System follows designated haul roads with edge detection. Integrates with mine dispatch, blast management, and fleet traffic control.",safety:{violation_action:"block",fail_closed:!0,edge_protection:!0,blast_interlock:!0,overload_protection:!0,emergency_stop:!0}}},warehouse_sorting_system:{label:"Warehouse Sorting System",domain:"logistics",template:{numeric:[{name:"max_throughput",min:0,max:2e4,unit:"packages/hr",tolerance:500},{name:"max_package_weight",min:0,max:35,unit:"kg",tolerance:1},{name:"max_divert_speed",min:0,max:3,unit:"m/s",tolerance:.1},{name:"max_misroute_rate",min:0,max:.1,unit:"%",tolerance:.02}],geo:{type:"linear",description:"Sortation conveyor system  input stations, divert chutes, recirculation loop"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","sorting","recirculating","jam_clearing","calibrating","maintenance"],forbidden:["misroute_rate_exceeded","jam_uncleared","overweight_on_sorter"]},odd_description:"High-speed automated package sortation with vision-based routing. System reads labels, routes packages to correct chutes, and recirculates unreadable items. Overweight/oversized packages rejected to manual lane.",safety:{violation_action:"block",fail_closed:!0,jam_detection:!0,oversize_rejection:!0,emergency_stop:!0}}},fleet_management_ai:{label:"Fleet Management / Route Optimization AI",domain:"logistics",template:{numeric:[{name:"max_fleet_size",min:0,max:1e4,unit:"vehicles",tolerance:100},{name:"max_daily_route_changes",min:0,max:5e4,unit:"changes",tolerance:1e3},{name:"max_driver_hours",min:0,max:11,unit:"hr",tolerance:0},{name:"max_fuel_budget_deviation",min:0,max:10,unit:"%",tolerance:1}],geo:{type:"road_network",description:"Approved road network with vehicle restrictions  bridge limits, tunnel restrictions, hazmat routes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["planning","dispatching","routing","monitoring","re_routing","reporting"],forbidden:["hos_violation_dispatched","restricted_road_assigned","overweight_route"]},odd_description:"AI fleet dispatch and route optimization. System assigns loads, optimizes routes, and monitors delivery progress. Hours-of-service limits enforced  cannot dispatch driver beyond legal limits. Vehicle restrictions (weight, height, hazmat) enforced per route segment.",safety:{violation_action:"block",fail_closed:!0,hos_compliance:!0,vehicle_restrictions:!0}}},inventory_management_ai:{label:"Inventory Management / Reorder AI",domain:"logistics",template:{numeric:[{name:"max_auto_reorder_value",min:0,max:1e5,unit:"USD",tolerance:5e3},{name:"max_sku_count",min:0,max:1e6,unit:"SKUs",tolerance:1e4},{name:"max_price_deviation",min:0,max:5,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected warehouse and ERP systems  approved vendor list and procurement channels"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","forecasting","reorder_generated","po_created","receiving","reconciling"],forbidden:["unapproved_vendor","price_deviation_exceeded","budget_exceeded"]},odd_description:"AI-driven demand forecasting and automatic reorder point management. System generates purchase orders within approved vendor list and budget limits. Orders exceeding thresholds require human approval.",safety:{violation_action:"block",fail_closed:!0,budget_enforcement:!0,vendor_approval:!0,human_escalation:!0}}},cold_chain_monitor:{label:"Cold Chain Monitoring AI",domain:"logistics",template:{numeric:[{name:"temperature_min",min:-25,max:null,unit:"C",tolerance:.5},{name:"temperature_max",min:0,max:8,unit:"C",tolerance:.5},{name:"max_excursion_duration",min:0,max:30,unit:"min",tolerance:2},{name:"max_door_open_time",min:0,max:5,unit:"min",tolerance:.5}],geo:{type:"logical",description:"Cold chain from origin to destination  sensors in trucks, warehouses, and retail cases"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","alerting","logging","reporting","audit_mode"],forbidden:["excursion_exceeded_unreported","sensor_offline_unnoticed","falsified_log"]},odd_description:"End-to-end cold chain temperature monitoring for pharmaceuticals and food. System logs continuous temperature data, alerts on excursions, and generates compliance reports. Cannot modify temperature logs. FDA 21 CFR Part 11 compliant where required.",safety:{violation_action:"warn",fail_closed:!0,tamper_evident_logging:!0,immediate_alert:!0}}},retail_shelf_scanning_robot:{label:"Retail Shelf-Scanning Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.3},{name:"max_aisle_width_required",min:1,max:null,unit:"m",tolerance:.1},{name:"scan_frequency",min:0,max:3,unit:"scans/day",tolerance:0}],geo:{type:"floor_plan",description:"Retail store floor plan  approved aisles and scan paths, excludes back of house, checkout lanes during busy periods"},time:{operating_hours:"22:00-06:00",operating_days:[0,1,2,3,4,5,6],timezone:"store_local"},states:{allowed:["docked","scanning","navigating","obstacle_wait","returning","charging"],forbidden:["customer_collision_risk","aisle_blocked_forcing","store_open_peak_hours"]},odd_description:"Autonomous shelf-scanning robot for inventory accuracy during off-hours. System navigates store aisles, captures shelf images, and identifies out-of-stocks. Operates primarily during closed or low-traffic hours.",safety:{violation_action:"block",fail_closed:!0,pedestrian_avoidance:!0,emergency_stop:!0}}},hotel_service_robot:{label:"Hotel / Hospitality Service Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.3},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_noise_level",min:0,max:50,unit:"dB",tolerance:2}],geo:{type:"floor_plan",description:"Hotel corridors and elevator system  excludes guest rooms (delivery to door only), kitchen prep areas, pool deck"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hotel_local"},states:{allowed:["docked","delivering","returning","elevator_transit","waiting_at_door","charging"],forbidden:["guest_room_entry","speed_exceeded_lobby","noise_exceeded_night"]},odd_description:"Hotel room service and amenity delivery robot. System delivers items to guest room doors via corridors and elevators. Does not enter rooms. Reduced speed in lobby, noise limits during quiet hours.",safety:{violation_action:"block",fail_closed:!0,no_room_entry:!0,quiet_hours:!0,emergency_stop:!0}}},restaurant_kitchen_robot:{label:"Restaurant Kitchen Automation Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_oil_temperature",min:0,max:190,unit:"C",tolerance:2},{name:"max_grill_temperature",min:0,max:300,unit:"C",tolerance:5},{name:"max_portion_deviation",min:0,max:5,unit:"%",tolerance:1},{name:"max_orders_per_hour",min:0,max:200,unit:"orders/hr",tolerance:10}],geo:{type:"workspace",description:"Kitchen prep and cook stations  human exclusion zones around hot equipment during autonomous operation"},time:{operating_hours:"10:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"restaurant_local"},states:{allowed:["idle","prepping","cooking","plating","cleaning","maintenance"],forbidden:["human_in_hot_zone","oil_overtemp","fire_suppression_triggered"]},odd_description:"Automated food preparation and cooking for quick-service restaurant. System handles repetitive cooking tasks (frying, grilling, assembly) within enclosed stations. Human exclusion zones around hot equipment.",safety:{violation_action:"block",fail_closed:!0,fire_suppression:!0,temperature_limits:!0,human_exclusion:!0,emergency_stop:!0}}},autonomous_checkout:{label:"Autonomous Checkout / Just Walk Out",domain:"retail_hospitality",template:{numeric:[{name:"max_concurrent_shoppers",min:0,max:200,unit:"shoppers",tolerance:10},{name:"max_item_price",min:0,max:500,unit:"USD",tolerance:10},{name:"min_detection_accuracy",min:.95,max:null,unit:"ratio",tolerance:.01},{name:"max_charge_latency",min:0,max:60,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Store sensor coverage area  entry/exit gates, shelf sensors, camera zones"},time:{operating_hours:"06:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"store_local"},states:{allowed:["monitoring","tracking","cart_building","checkout_processing","dispute_queue"],forbidden:["charge_without_confidence","privacy_zone_recording","minor_unaccompanied_alcohol"]},odd_description:"Computer vision-based autonomous checkout system. System tracks item selection and charges on exit. Low-confidence transactions queued for human review. Privacy zones in fitting rooms and restrooms.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,privacy_zones:!0,dispute_process:!0}}},research_lab_robot:{label:"Research Lab Automation Robot",domain:"education_research",template:{numeric:[{name:"max_experiments_per_day",min:0,max:100,unit:"experiments",tolerance:5},{name:"max_reagent_volume",min:0,max:50,unit:"mL",tolerance:.5},{name:"temperature_control_range",min:-20,max:100,unit:"C",tolerance:.5}],geo:{type:"workspace",description:"Lab bench and instrument footprint  fume hood, biosafety cabinet, instrument cluster"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"lab_local"},states:{allowed:["idle","experiment_running","sample_prep","analysis","data_collection","cleaning"],forbidden:["reagent_incompatibility","fume_hood_closed_volatile","biosafety_breach"]},odd_description:"Laboratory automation for high-throughput experimentation. System executes experiment protocols with reagent handling, incubation, and measurement. Safety interlocks for volatile chemicals and biological materials.",safety:{violation_action:"block",fail_closed:!0,chemical_compatibility:!0,biosafety_interlock:!0,emergency_stop:!0}}},educational_tutoring_ai:{label:"Educational Tutoring AI",domain:"education_research",template:{numeric:[{name:"max_session_duration",min:0,max:120,unit:"min",tolerance:5},{name:"max_daily_sessions_per_student",min:0,max:5,unit:"sessions",tolerance:0},{name:"min_age_requirement",min:5,max:null,unit:"years",tolerance:0}],geo:{type:"logical",description:"Approved curriculum content and grade levels  content filtered by age appropriateness"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"student_local"},states:{allowed:["idle","tutoring","assessing","reviewing","reporting_to_teacher"],forbidden:["off_curriculum_content","personal_data_collection_unauthorized","session_exceeded"]},odd_description:"AI tutoring system for K-12 students within approved curriculum. System provides personalized instruction, practice, and assessment. Content restricted to grade-appropriate material. Teacher oversight and progress reporting. COPPA/FERPA compliant.",safety:{violation_action:"block",fail_closed:!0,age_appropriate_content:!0,coppa_compliant:!0,teacher_oversight:!0}}},contract_review_ai:{label:"Contract Review AI",domain:"legal_compliance",template:{numeric:[{name:"max_documents_per_day",min:0,max:1e3,unit:"documents",tolerance:50},{name:"max_auto_approve_value",min:0,max:0,unit:"USD",tolerance:0},{name:"min_extraction_confidence",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"Connected document management system  approved contract types and clause libraries"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"firm_local"},states:{allowed:["idle","reviewing","extracting","flagging","summarizing","reporting"],forbidden:["auto_approval","legal_advice_given","privileged_content_exposed"]},odd_description:"AI-assisted contract review for clause extraction, risk flagging, and comparison against standard terms. System highlights deviations and risks for attorney review. Cannot approve contracts or provide legal advice. Attorney-client privilege protected.",safety:{violation_action:"block",fail_closed:!0,attorney_review_required:!0,privilege_protection:!0}}},regulatory_compliance_monitor:{label:"Regulatory Compliance Monitor AI",domain:"legal_compliance",template:{numeric:[{name:"max_rules_monitored",min:0,max:5e4,unit:"rules",tolerance:500},{name:"update_frequency",min:0,max:24,unit:"hr",tolerance:1},{name:"max_false_alert_rate",min:0,max:5,unit:"%",tolerance:1}],geo:{type:"logical",description:"Connected regulatory databases and internal policy systems  approved jurisdictions and regulatory bodies"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","analyzing","alerting","reporting","updating_rules"],forbidden:["compliance_certification_issued","regulation_interpretation_given","alert_suppressed"]},odd_description:"Regulatory change monitoring and compliance gap analysis. System tracks regulatory updates across jurisdictions and flags potential impacts to compliance team. Cannot certify compliance or interpret regulations  compliance officer review required.",safety:{violation_action:"warn",fail_closed:!0,compliance_officer_review:!0,audit_trail:!0}}},hiring_screening_ai:{label:"Hiring / HR Screening AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.25,unit:"ratio",tolerance:.05},{name:"confidence_threshold",min:.7,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.2,max:null,unit:"ratio",tolerance:.05},{name:"false_negative_rate",min:0,max:.15,unit:"rate",tolerance:.02},{name:"consecutive_autonomous_max",min:0,max:50,unit:"decisions",tolerance:5},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"explainability_score_min",min:.6,max:null,unit:"score",tolerance:.05},{name:"decision_rate",min:0,max:200,unit:"decisions/hr",tolerance:20}],geo:{type:"logical",description:"Approved job categories and jurisdictions  applicable labor law regions only"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4],timezone:"ops_local"},states:{allowed:["screening","scoring","shortlisting","human_review","archived"],forbidden:["auto_reject_protected_class","bias_threshold_exceeded","unexplainable_decision"]},odd_description:"Resume screening and candidate scoring system. System provides ranked shortlists for human recruiter review. Cannot autonomously reject candidates  all rejections require human confirmation. EEOC/OFCCP compliant. Disparate impact monitored continuously.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,audit_trail:!0}}},sentencing_recommendation_ai:{label:"Sentencing / Parole Recommendation AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.1,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"false_positive_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"false_negative_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"explainability_score_min",min:.8,max:null,unit:"score",tolerance:.03},{name:"model_drift_threshold",min:0,max:.05,unit:"delta",tolerance:.01},{name:"data_staleness_max",min:0,max:3600,unit:"sec",tolerance:300}],geo:{type:"logical",description:"Authorized court jurisdictions  applicable sentencing guidelines and statutory frameworks"},time:{operating_hours:"07:00-19:00",operating_days:[0,1,2,3,4],timezone:"court_local"},states:{allowed:["assessment","scoring","report_generation","judicial_review","sealed"],forbidden:["auto_sentence","bias_detected","unexplainable_recommendation","stale_data"]},odd_description:"Risk assessment and sentencing recommendation advisory system. ALL recommendations require judicial review  system has ZERO autonomous sentencing authority. Continuous bias auditing with demographic parity monitoring. Court-approved validation required annually.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,judicial_override:!0,audit_trail:!0}}},child_welfare_ai:{label:"Child Welfare Risk Scoring AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.15,unit:"ratio",tolerance:.03},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"false_negative_rate",min:0,max:.03,unit:"rate",tolerance:.005},{name:"consecutive_autonomous_max",min:0,max:0,unit:"decisions",tolerance:0},{name:"escalation_timeout_sec",min:0,max:3600,unit:"sec",tolerance:300},{name:"explainability_score_min",min:.75,max:null,unit:"score",tolerance:.05},{name:"data_staleness_max",min:0,max:7200,unit:"sec",tolerance:600}],geo:{type:"logical",description:"County/state child protective services jurisdiction  applicable mandated reporting laws"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"agency_local"},states:{allowed:["intake_screening","risk_scoring","caseworker_review","supervisor_review","closed"],forbidden:["auto_close_high_risk","auto_removal_recommendation","caseworker_bypass"]},odd_description:"Child safety risk scoring for intake screening. System flags cases for caseworker assessment  ZERO autonomous case closure or removal decisions. Every scored case reviewed by human caseworker. Continuous bias monitoring across demographics.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,supervisor_escalation:!0,audit_trail:!0}}},benefits_eligibility_ai:{label:"Benefits / Disability Eligibility AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.2,unit:"ratio",tolerance:.03},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.3,max:null,unit:"ratio",tolerance:.05},{name:"false_negative_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"decision_rate",min:0,max:500,unit:"decisions/hr",tolerance:50},{name:"escalation_timeout_sec",min:0,max:7200,unit:"sec",tolerance:600},{name:"explainability_score_min",min:.7,max:null,unit:"score",tolerance:.05},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600}],geo:{type:"logical",description:"Applicable benefit programs and jurisdictional eligibility rules"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["intake","document_review","scoring","human_review","approved","denied","appeal"],forbidden:["auto_deny_without_review","stale_data_decision","unexplainable_denial"]},odd_description:"Automated eligibility screening for government benefit programs. System pre-screens applications and flags for human adjudicator review. Denials require human confirmation and written explanation. APA/due process compliant.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,appeal_path_required:!0,audit_trail:!0}}},clinical_trial_matching_ai:{label:"Clinical Trial Matching AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"false_positive_rate",min:0,max:.1,unit:"rate",tolerance:.02},{name:"false_negative_rate",min:0,max:.08,unit:"rate",tolerance:.02},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"consent_verification_required",min:1,max:1,unit:"bool",tolerance:0},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"model_drift_threshold",min:0,max:.08,unit:"delta",tolerance:.02},{name:"decision_rate",min:0,max:100,unit:"matches/hr",tolerance:10}],geo:{type:"logical",description:"Approved clinical sites and IRB-approved trial protocols  patient catchment areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["screening","matching","clinician_review","patient_consent","enrolled","ineligible"],forbidden:["auto_enroll","consent_bypassed","exclusion_criteria_ignored"]},odd_description:"Patient-trial matching system using EHR data and trial protocols. System suggests matches for clinician review  cannot auto-enroll. Patient consent verified independently. HIPAA compliant, IRB-approved protocols only.",safety:{violation_action:"block",fail_closed:!0,clinician_review_required:!0,consent_required:!0,audit_trail:!0}}},surgical_planning_ai:{label:"Surgical Planning / Guidance AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"max_planning_latency",min:0,max:30,unit:"sec",tolerance:5},{name:"positional_accuracy",min:0,max:2,unit:"mm",tolerance:.5},{name:"false_positive_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"false_negative_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"model_drift_threshold",min:0,max:.03,unit:"delta",tolerance:.01},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Approved surgical suites and imaging systems  validated instrument sets only"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["imaging","planning","surgeon_review","intraop_guidance","post_op_analysis"],forbidden:["autonomous_incision","surgeon_override_bypassed","uncalibrated_guidance","stale_imaging"]},odd_description:"AI-assisted surgical planning and intraoperative guidance. System provides 3D planning, trajectory optimization, and real-time guidance overlays. Surgeon maintains full manual authority at all times. FDA 510(k)/De Novo cleared.",safety:{violation_action:"block",fail_closed:!0,surgeon_authority:!0,calibration_required:!0,audit_trail:!0}}},drug_interaction_ai:{label:"Drug Interaction Checker AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"false_negative_rate",min:0,max:.01,unit:"rate",tolerance:.002},{name:"max_response_latency",min:0,max:2e3,unit:"ms",tolerance:200},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"model_drift_threshold",min:0,max:.05,unit:"delta",tolerance:.01},{name:"decision_rate",min:0,max:1e4,unit:"checks/hr",tolerance:1e3},{name:"database_coverage_min",min:.95,max:null,unit:"ratio",tolerance:.01}],geo:{type:"logical",description:"Connected EHR/pharmacy systems  approved drug databases and formularies"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["active","checking","alert_generated","pharmacist_review","overridden_with_reason"],forbidden:["interaction_suppressed","database_stale","unchecked_dispense"]},odd_description:"Real-time drug-drug, drug-allergy, and drug-condition interaction checking integrated with EHR/pharmacy workflow. System blocks dispensing on critical interactions until pharmacist review. Cannot be silently overridden.",safety:{violation_action:"block",fail_closed:!0,pharmacist_review:!0,override_requires_reason:!0,audit_trail:!0}}},mental_health_risk_ai:{label:"Mental Health Risk Assessment AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.75,max:null,unit:"score",tolerance:.03},{name:"false_negative_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"escalation_timeout_sec",min:0,max:900,unit:"sec",tolerance:60},{name:"consecutive_autonomous_max",min:0,max:0,unit:"decisions",tolerance:0},{name:"bias_disparity_ratio",min:0,max:1.2,unit:"ratio",tolerance:.05},{name:"data_staleness_max",min:0,max:3600,unit:"sec",tolerance:300},{name:"explainability_score_min",min:.7,max:null,unit:"score",tolerance:.05}],geo:{type:"logical",description:"Approved clinical settings  licensed provider jurisdictions and telehealth-eligible states"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["screening","risk_scoring","clinician_alert","clinician_review","safety_plan","crisis_escalation"],forbidden:["auto_discharge_high_risk","suppress_self_harm_flag","clinician_bypass","stale_assessment"]},odd_description:"Suicide/self-harm risk screening and mental health acuity scoring. System flags at-risk patients for immediate clinician review  ZERO autonomous clinical decisions. Crisis-level flags trigger immediate escalation with timeout enforcement.",safety:{violation_action:"block",fail_closed:!0,clinician_review_required:!0,crisis_escalation:!0,audit_trail:!0}}},water_treatment_ai:{label:"Water Treatment Control AI",domain:"critical_infra",template:{numeric:[{name:"ph_range",min:6.5,max:8.5,unit:"pH",tolerance:.2},{name:"chlorine_residual",min:.2,max:4,unit:"mg/L",tolerance:.1},{name:"turbidity_max",min:0,max:1,unit:"NTU",tolerance:.1},{name:"flow_rate",min:0,max:5e4,unit:"gal/min",tolerance:500},{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"human_review_ratio",min:.1,max:null,unit:"ratio",tolerance:.02},{name:"decision_rate",min:0,max:60,unit:"adjustments/hr",tolerance:5},{name:"data_staleness_max",min:0,max:60,unit:"sec",tolerance:10}],geo:{type:"polygon",description:"Treatment plant facility boundary  intake, treatment, and distribution control zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["normal_operation","adjustment","flushing","backwash","operator_review","maintenance"],forbidden:["chemical_limit_exceeded","sensor_fault_unacknowledged","operator_lockout_bypassed"]},odd_description:"AI-controlled water treatment process optimization. System adjusts chemical dosing, filtration, and flow within EPA-mandated Safe Drinking Water Act parameters. Operator can override at any time. Critical parameter changes require operator confirmation.",safety:{violation_action:"block",fail_closed:!0,operator_override:!0,epa_compliance:!0,audit_trail:!0}}},air_traffic_ai:{label:"Air Traffic Management AI",domain:"critical_infra",template:{numeric:[{name:"min_separation_horizontal",min:3,max:null,unit:"nm",tolerance:.5},{name:"min_separation_vertical",min:1e3,max:null,unit:"ft",tolerance:100},{name:"max_response_latency",min:0,max:500,unit:"ms",tolerance:50},{name:"confidence_threshold",min:.95,max:null,unit:"score",tolerance:.01},{name:"false_negative_rate",min:0,max:.001,unit:"rate",tolerance:5e-4},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"data_staleness_max",min:0,max:5,unit:"sec",tolerance:1},{name:"decision_rate",min:0,max:300,unit:"advisories/hr",tolerance:30}],geo:{type:"polygon_3d",description:"Assigned airspace sectors  terminal, en-route, and transition zones with altitude blocks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","advisory","conflict_detection","resolution_advisory","controller_review","emergency"],forbidden:["autonomous_reroute","controller_override_bypassed","radar_contact_lost_unacknowledged"]},odd_description:"AI advisory system for air traffic conflict detection and resolution. System provides separation advisories to human controllers  ZERO autonomous authority over aircraft routing or clearances. FAA NextGen/EUROCONTROL compliant. Controller maintains full authority.",safety:{violation_action:"block",fail_closed:!0,controller_authority:!0,tcas_integration:!0,audit_trail:!0}}},railway_signaling_ai:{label:"Railway Signaling / Train Control AI",domain:"critical_infra",template:{numeric:[{name:"min_headway",min:90,max:null,unit:"sec",tolerance:10},{name:"max_speed",min:0,max:300,unit:"km/h",tolerance:5},{name:"braking_distance_margin",min:50,max:null,unit:"meters",tolerance:10},{name:"max_response_latency",min:0,max:200,unit:"ms",tolerance:20},{name:"confidence_threshold",min:.99,max:null,unit:"score",tolerance:.002},{name:"false_negative_rate",min:0,max:1e-4,unit:"rate",tolerance:5e-5},{name:"data_staleness_max",min:0,max:2,unit:"sec",tolerance:.5},{name:"model_drift_threshold",min:0,max:.01,unit:"delta",tolerance:.002}],geo:{type:"polygon",description:"Track segments, interlocking zones, platform areas, and level crossings under AI control"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["green","caution","restrictive","stop","emergency_brake","maintenance_mode"],forbidden:["signal_conflict","interlocking_fault_unacknowledged","occupied_block_cleared"]},odd_description:"AI-enhanced positive train control and signaling. System enforces movement authorities, speed restrictions, and safe separation. Fail-safe defaults to most restrictive signal aspect. ERTMS/PTC compliant. Human dispatcher maintains route authority.",safety:{violation_action:"block",fail_closed:!0,fail_safe_restrictive:!0,dispatcher_authority:!0,audit_trail:!0}}},power_grid_ai:{label:"Power Grid Load Balancing AI",domain:"critical_infra",template:{numeric:[{name:"frequency_range",min:59.95,max:60.05,unit:"Hz",tolerance:.01},{name:"voltage_range_pu",min:.95,max:1.05,unit:"p.u.",tolerance:.005},{name:"max_ramp_rate",min:0,max:500,unit:"MW/min",tolerance:50},{name:"reserve_margin_min",min:.15,max:null,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"decision_rate",min:0,max:120,unit:"dispatches/hr",tolerance:10},{name:"data_staleness_max",min:0,max:4,unit:"sec",tolerance:1},{name:"human_review_ratio",min:.05,max:null,unit:"ratio",tolerance:.02}],geo:{type:"logical",description:"Balancing authority area  interconnected generation, transmission, and load zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["normal","economic_dispatch","contingency","emergency","restoration","islanded"],forbidden:["frequency_out_of_band","cascading_trip","load_shed_unauthorized","blackstart_without_approval"]},odd_description:"AI-optimized economic dispatch and load balancing for electric grid. System optimizes generation scheduling within NERC reliability standards. Emergency load shedding requires operator authorization. NERC CIP compliant.",safety:{violation_action:"block",fail_closed:!0,operator_authority:!0,nerc_compliance:!0,audit_trail:!0}}},robo_advisor_ai:{label:"Robo-Advisor / Wealth Management AI",domain:"financial",template:{numeric:[{name:"max_single_trade_pct",min:0,max:5,unit:"%_portfolio",tolerance:.5},{name:"max_daily_rebalance_pct",min:0,max:15,unit:"%_portfolio",tolerance:2},{name:"concentration_limit",min:0,max:25,unit:"%_single_asset",tolerance:2},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.05,max:null,unit:"ratio",tolerance:.02},{name:"model_drift_threshold",min:0,max:.1,unit:"delta",tolerance:.02},{name:"decision_rate",min:0,max:1e3,unit:"trades/hr",tolerance:100},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Approved exchanges, asset classes, and jurisdictions  SEC/FINRA registered instruments only"},time:{operating_hours:"04:00-20:00",operating_days:[0,1,2,3,4],timezone:"America/New_York"},states:{allowed:["monitoring","rebalancing","tax_loss_harvesting","client_review","compliance_check"],forbidden:["concentration_exceeded","suitability_mismatch","unauthorized_asset_class"]},odd_description:"Automated portfolio management and rebalancing. System executes within client-approved investment policy statements. Trades exceeding thresholds require advisor review. SEC/FINRA/DOL fiduciary compliant.",safety:{violation_action:"block",fail_closed:!0,advisor_review_threshold:!0,suitability_check:!0,audit_trail:!0}}},property_valuation_ai:{label:"Automated Property Valuation (AVM)",domain:"financial",template:{numeric:[{name:"confidence_threshold",min:.75,max:null,unit:"score",tolerance:.03},{name:"max_valuation_variance",min:0,max:15,unit:"%",tolerance:2},{name:"bias_disparity_ratio",min:0,max:1.15,unit:"ratio",tolerance:.03},{name:"data_staleness_max",min:0,max:604800,unit:"sec",tolerance:86400},{name:"model_drift_threshold",min:0,max:.08,unit:"delta",tolerance:.02},{name:"human_review_ratio",min:.15,max:null,unit:"ratio",tolerance:.03},{name:"decision_rate",min:0,max:5e3,unit:"valuations/hr",tolerance:500},{name:"false_positive_rate",min:0,max:.1,unit:"rate",tolerance:.02}],geo:{type:"logical",description:"Approved MSAs and property types  residential, commercial, agricultural classifications"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["data_collection","valuation","confidence_check","appraiser_review","final"],forbidden:["low_confidence_auto_approve","stale_comps_used","redlining_pattern_detected"]},odd_description:"Automated property valuation for mortgage origination, refinancing, and portfolio assessment. High-variance or low-confidence valuations routed to licensed appraiser. ECOA/Fair Housing Act compliant with continuous bias monitoring.",safety:{violation_action:"block",fail_closed:!0,appraiser_escalation:!0,fair_lending_compliance:!0,audit_trail:!0}}},dynamic_pricing_ai:{label:"Dynamic Pricing AI (Regulated)",domain:"financial",template:{numeric:[{name:"max_price_multiplier",min:1,max:3,unit:"x_base",tolerance:.1},{name:"max_price_change_rate",min:0,max:10,unit:"%/hr",tolerance:1},{name:"min_price_floor",min:.01,max:null,unit:"currency",tolerance:0},{name:"bias_disparity_ratio",min:0,max:1.1,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"decision_rate",min:0,max:1e4,unit:"price_updates/hr",tolerance:1e3},{name:"human_review_ratio",min:.01,max:null,unit:"ratio",tolerance:.005},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Service regions with applicable price gouging statutes and regulatory caps"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["normal_pricing","surge","promotional","regulatory_cap","manual_override","emergency_freeze"],forbidden:["price_ceiling_exceeded","discriminatory_pricing_detected","emergency_gouging"]},odd_description:"Real-time dynamic pricing within regulatory price caps and anti-gouging statutes. System enforces price ceilings during declared emergencies. Discriminatory pricing patterns trigger automatic freeze and human review.",safety:{violation_action:"block",fail_closed:!0,price_ceiling_enforcement:!0,emergency_freeze:!0,audit_trail:!0}}},custom_system:{label:"Custom / Other System",domain:"other",template:{numeric:[],geo:{type:"custom",description:"Define your operational boundary  geographic, logical, or physical workspace"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:[],forbidden:[]},odd_description:"",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}}};Object.keys(Ge).length;function hs(){const{user:t}=le(),o=Le(),[a,i]=h.useState(1),r=6,[s,l]=h.useState(""),[c,d]=h.useState({organization_name:"",contact_name:"",contact_email:"",contact_phone:""}),[p,x]=h.useState({system_name:"",system_type:"",system_version:"",manufacturer:"",system_description:"",deployment_type:"",environment:"",integration_method:"python",expected_volume:"",compliance_requirements:""}),[y,j]=h.useState({odd_description:"",facility_location:"",preferred_test_date:"",temp_min:"",temp_max:"",temp_unit:"F",weather_constraints:"",surface_type:"",notes:""}),[A,m]=h.useState([{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}]),[S,f]=h.useState({open:!1,type:""}),[v,C]=h.useState(""),[w,u]=h.useState([{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]),[b,_]=h.useState([{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}]),[k,N]=h.useState([{name:"",parameter:"",allowed_values:"",forbidden_values:""}]),[U,T]=h.useState({violation_action:"stop",connection_loss_action:"stop",fail_closed:!0,emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_email:"",existing_safety_systems:"",escalation_triggers:""}),[$,z]=h.useState(!1);h.useEffect(()=>{t&&d(B=>({...B,contact_name:B.contact_name||t.full_name||"",contact_email:B.contact_email||t.email||"",organization_name:B.organization_name||t.organization_name||""}))},[t]);const L=B=>{var de,Re;const D=Ge[B];if(!D||!D.template)return;const F=D.template;if(F.numeric&&F.numeric.length>0?m(F.numeric.map(oe=>({name:oe.name.replace(/_/g," ").replace(/\b\w/g,Se=>Se.toUpperCase()),parameter:oe.name,min_value:oe.min!=null?String(oe.min):"",max_value:oe.max!=null?String(oe.max):"",hard_limit:oe.max!=null?String(oe.max):"",unit:oe.unit||"",tolerance:oe.tolerance!=null?String(oe.tolerance):""}))):m([{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}]),F.geo?u([{name:"Primary Operating Zone",boundary_type:F.geo.type==="polygon"||F.geo.type==="polygon_3d"?"polygon":"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]):u([{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]),F.time){const[oe,Se]=(F.time.operating_hours||"0-23").split("-").map(xt=>String(parseInt(xt))),et=F.time.timezone||"America/Chicago";_([{name:"Operating Hours",start_hour:oe,end_hour:Se,timezone:{facility_local:"America/Chicago",ops_local:"America/Chicago",farm_local:"America/Chicago",delivery_zone_local:"America/Chicago",campus_local:"America/Chicago",city_local:"America/Chicago",community_local:"America/Chicago",site_local:"America/Chicago",hospital_local:"America/Chicago",lab_local:"America/Chicago",mine_local:"America/Chicago",port_local:"America/Chicago",airport_local:"America/Chicago",transit_local:"America/Chicago",incident_local:"America/Chicago",exchange_local:"America/New_York",institution_local:"America/New_York",utility_local:"America/Chicago",grid_local:"America/Chicago",plant_local:"America/Chicago",fab_local:"America/Chicago",restaurant_local:"America/Chicago",store_local:"America/Chicago",hotel_local:"America/Chicago",network_local:"UTC",theater_local:"UTC",patient_local:"America/Chicago",student_local:"America/Chicago",firm_local:"America/New_York",mission_local:"UTC"}[et]||et,days:F.time.operating_days||[0,1,2,3,4,5,6]}])}else _([{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}]);F.states&&((de=F.states.allowed)!=null&&de.length||(Re=F.states.forbidden)!=null&&Re.length)?N([{name:"Operational States",parameter:"mode",allowed_values:(F.states.allowed||[]).join(", "),forbidden_values:(F.states.forbidden||[]).join(", ")}]):N([{name:"",parameter:"",allowed_values:"",forbidden_values:""}]),F.odd_description&&j(oe=>({...oe,odd_description:F.odd_description}));const V={ground_robots:"indoor",aerial:"outdoor",vehicles:"outdoor",marine:"outdoor",medical:"indoor",financial:"virtual",energy:"hybrid",manufacturing:"indoor",defense:"hybrid",agriculture:"outdoor",space_extreme:"outdoor",telecom_digital:"virtual",construction:"outdoor",logistics:"indoor",retail_hospitality:"indoor",education_research:"indoor",legal_compliance:"virtual",other:""},H={ground_robots:"warehouse",aerial:"airspace",vehicles:"road",marine:"other",medical:"clinical",financial:"data_center",energy:"other",manufacturing:"manufacturing",defense:"other",agriculture:"agriculture",space_extreme:"other",telecom_digital:"data_center",construction:"construction",logistics:"warehouse",retail_hospitality:"other",education_research:"other",legal_compliance:"other",other:""};if(x(oe=>({...oe,deployment_type:V[D.domain]||oe.deployment_type,environment:H[D.domain]||oe.environment})),F.safety){const oe={block:"stop",warn:"alert",stop:"stop"};T(Se=>({...Se,violation_action:oe[F.safety.violation_action]||F.safety.violation_action||Se.violation_action,fail_closed:F.safety.fail_closed!==!1}))}},g={background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontFamily:"'Inter', sans-serif"},P=B=>e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"16px"},children:B}),I=B=>e.jsx("label",{style:{display:"block",marginBottom:"8px",color:n.textSecondary,fontSize:"14px"},children:B}),q=B=>e.jsx("p",{style:{color:n.textTertiary,fontSize:"11px",marginTop:"4px",lineHeight:"1.4"},children:B}),W=(B,D,F)=>D([...B,{...F}]),J=(B,D,F)=>{B.length>1&&D(B.filter((V,H)=>H!==F))},M=(B,D,F,V,H)=>{const de=[...B];de[F]={...de[F],[V]:H},D(de)},O=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],K=()=>{const B=A.filter(H=>H.name&&H.parameter).map(H=>({name:H.name,parameter:H.parameter,min_value:H.min_value?parseFloat(H.min_value):null,max_value:H.max_value?parseFloat(H.max_value):null,hard_limit:H.hard_limit?parseFloat(H.hard_limit):null,unit:H.unit||null,tolerance:H.tolerance?parseFloat(H.tolerance):0})),D=w.filter(H=>H.name&&H.lat&&H.lon).map(H=>({name:H.name,boundary_type:H.boundary_type,center:{lat:parseFloat(H.lat),lon:parseFloat(H.lon)},radius_meters:H.radius_meters?parseFloat(H.radius_meters):1e3,altitude_min:H.altitude_min?parseFloat(H.altitude_min):null,altitude_max:H.altitude_max?parseFloat(H.altitude_max):null})),F=b.filter(H=>H.name).map(H=>({name:H.name,allowed_hours_start:parseInt(H.start_hour),allowed_hours_end:parseInt(H.end_hour),allowed_days:H.days,timezone:H.timezone})),V=k.filter(H=>H.name&&H.parameter).map(H=>({name:H.name,parameter:H.parameter,allowed_values:H.allowed_values?H.allowed_values.split(",").map(de=>de.trim()).filter(Boolean):[],forbidden_values:H.forbidden_values?H.forbidden_values.split(",").map(de=>de.trim()).filter(Boolean):[]}));return{numeric_boundaries:B,geo_boundaries:D,time_boundaries:F,state_boundaries:V,rate_boundaries:[],safe_state:{action:U.violation_action,connection_loss:U.connection_loss_action,notify:!0,emergency_contact:{name:U.emergency_contact_name,phone:U.emergency_contact_phone,email:U.emergency_contact_email}},fail_closed:U.fail_closed}},te=async()=>{var B,D;try{const F=K(),V={organization_name:c.organization_name,contact_name:c.contact_name,contact_email:c.contact_email,contact_phone:c.contact_phone,system_name:p.system_name,system_type:p.system_type,custom_system_type:v||null,system_version:p.system_version,manufacturer:p.manufacturer,system_description:p.system_description,odd_specification:{description:y.odd_description,deployment_type:p.deployment_type,environment:p.environment,facility_location:y.facility_location,operating_temp:y.temp_min&&y.temp_max?{min:parseFloat(y.temp_min),max:parseFloat(y.temp_max),unit:y.temp_unit}:null,weather_constraints:y.weather_constraints||null,surface_type:y.surface_type||null,integration_method:p.integration_method,expected_volume:p.expected_volume,compliance_requirements:p.compliance_requirements},envelope_definition:F,facility_location:y.facility_location,preferred_test_date:y.preferred_test_date||null,notes:y.notes};await E.post("/api/applications/",V),o("/applications")}catch(F){l(((D=(B=F.response)==null?void 0:B.data)==null?void 0:D.detail)||"Failed to submit application"),i(1)}},Z=(B,D)=>{B==="numeric"&&m(F=>[...F.filter(V=>V.name),...D.map(V=>({name:V.name||"",parameter:V.parameter||"",min_value:V.min_value||"",max_value:V.max_value||"",hard_limit:V.hard_limit||"",unit:V.unit||"",tolerance:V.tolerance||""}))]),B==="geo"&&u(F=>[...F.filter(V=>V.name),...D.map(V=>({name:V.name||"",boundary_type:V.boundary_type||"circle",lat:V.lat||"",lon:V.lon||"",radius_meters:V.radius_meters||"",altitude_min:V.altitude_min||"",altitude_max:V.altitude_max||""}))]),B==="time"&&_(F=>[...F.filter(V=>V.name),...D.map(V=>({name:V.name||"",start_hour:V.start_hour||"6",end_hour:V.end_hour||"22",timezone:V.timezone||"America/Chicago",days:Array.isArray(V.days)?V.days:[0,1,2,3,4,5,6]}))]),B==="state"&&N(F=>[...F.filter(V=>V.name),...D.map(V=>({name:V.name||"",parameter:V.parameter||"",allowed_values:V.allowed_values||"",forbidden_values:V.forbidden_values||""}))])},G=()=>a===1?c.organization_name&&c.contact_email:a===2?p.system_name&&p.system_type:a===3?y.odd_description:!0,Q=["Organization","System","Operating Domain","Boundaries","Safety & Failure","Review"];return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs(ne,{to:"/applications",className:"flex items-center gap-2 mb-4 no-underline",style:{color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(co,{className:"w-4 h-4"}),"Back to Applications"]}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"New Submission"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:"ODDC Application"}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:"Submit your autonomous system for conformance determination"})]}),e.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:Q.map((B,D)=>e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{height:"3px",borderRadius:"2px",background:D+1<=a?n.purpleBright:"rgba(255,255,255,0.08)",transition:"background 0.3s",marginBottom:"6px"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"8px",letterSpacing:"1px",textTransform:"uppercase",color:D+1<=a?n.purpleBright:n.textTertiary},children:B})]},D))}),e.jsxs(Y,{children:[s&&e.jsx("div",{className:"mb-4 p-3 rounded-lg",style:{background:"rgba(214,92,92,0.15)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed},children:s}),$&&e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(92,214,133,0.15)",border:"2px solid rgba(92,214,133,0.4)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",fontSize:"28px"},children:""}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"28px",fontWeight:200,margin:"0 0 12px",color:n.textPrimary},children:"Application Submitted"}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"14px",lineHeight:"1.6",maxWidth:"480px",margin:"0 auto 8px"},children:"Your application is now in the queue. Our team will review your ODD specification and boundary definitions."}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"32px"},children:"You'll receive email updates as your application progresses through the certification pipeline."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx(ne,{to:"/applications",className:"no-underline px-6 py-3 rounded-lg",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"View Applications"}),e.jsx(ne,{to:"/dashboard",className:"no-underline px-6 py-3 rounded-lg",style:{background:"transparent",border:`1px solid ${n.borderGlass}`,color:n.textSecondary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Dashboard"})]})]}),!$&&e.jsxs(e.Fragment,{children:[a===1&&e.jsxs("div",{className:"space-y-4",children:[P("Organization Information"),e.jsxs("div",{children:[I("Organization Name *"),e.jsx("input",{type:"text",value:c.organization_name,onChange:B=>d({...c,organization_name:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]}),e.jsxs("div",{children:[I("Contact Name"),e.jsx("input",{type:"text",value:c.contact_name,onChange:B=>d({...c,contact_name:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[I("Contact Email *"),e.jsx("input",{type:"email",value:c.contact_email,onChange:B=>d({...c,contact_email:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]}),e.jsxs("div",{children:[I("Contact Phone"),e.jsx("input",{type:"tel",value:c.contact_phone,onChange:B=>d({...c,contact_phone:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-4",children:[P("System Information"),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[I("System Name *"),e.jsx("input",{type:"text",value:p.system_name,onChange:B=>x({...p,system_name:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]}),e.jsxs("div",{children:[I("System Type *"),e.jsxs("select",{value:p.system_type,onChange:B=>{x({...p,system_type:B.target.value}),L(B.target.value)},className:"w-full px-4 py-3 rounded-lg outline-none",style:g,children:[e.jsxs("option",{value:"",children:["Select system type (",Object.keys(Ge).length," available)..."]}),fs.map(B=>{const D=Object.entries(Ge).filter(([,F])=>F.domain===B.key);return D.length?e.jsx("optgroup",{label:B.label,children:D.map(([F,V])=>e.jsx("option",{value:F,children:V.label},F))},B.key):null})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[I("System Version"),e.jsx("input",{type:"text",value:p.system_version,onChange:B=>x({...p,system_version:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,placeholder:"e.g., 1.0.0"})]}),e.jsxs("div",{children:[I("Manufacturer"),e.jsx("input",{type:"text",value:p.manufacturer,onChange:B=>x({...p,manufacturer:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]})]}),e.jsxs("div",{children:[I("System Description *"),e.jsx("textarea",{value:p.system_description,onChange:B=>x({...p,system_description:B.target.value}),rows:3,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:g})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[I("Deployment Type"),e.jsxs("select",{value:p.deployment_type,onChange:B=>x({...p,deployment_type:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"indoor",children:"Indoor"}),e.jsx("option",{value:"outdoor",children:"Outdoor"}),e.jsx("option",{value:"hybrid",children:"Indoor + Outdoor"}),e.jsx("option",{value:"virtual",children:"Virtual / Cloud"})]})]}),e.jsxs("div",{children:[I("Environment"),e.jsxs("select",{value:p.environment,onChange:B=>x({...p,environment:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"warehouse",children:"Warehouse / Logistics"}),e.jsx("option",{value:"manufacturing",children:"Manufacturing Floor"}),e.jsx("option",{value:"road",children:"Public Road"}),e.jsx("option",{value:"airspace",children:"Airspace"}),e.jsx("option",{value:"clinical",children:"Clinical / Hospital"}),e.jsx("option",{value:"data_center",children:"Data Center"}),e.jsx("option",{value:"agriculture",children:"Agriculture / Field"}),e.jsx("option",{value:"construction",children:"Construction Site"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[I("Agent Deployment Method"),e.jsxs("select",{value:p.integration_method,onChange:B=>x({...p,integration_method:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,children:[e.jsx("option",{value:"python",children:"Python Package"}),e.jsx("option",{value:"docker",children:"Docker Container"}),e.jsx("option",{value:"kubernetes",children:"Kubernetes"})]})]}),e.jsxs("div",{children:[I("Expected Actions / Day"),e.jsxs("select",{value:p.expected_volume,onChange:B=>x({...p,expected_volume:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"low",children:"Low (< 1,000)"}),e.jsx("option",{value:"medium",children:"Medium (1K  10K)"}),e.jsx("option",{value:"high",children:"High (10K  100K)"}),e.jsx("option",{value:"very_high",children:"Very High (100K+)"})]})]})]}),e.jsxs("div",{children:[p.system_type&&p.system_type.includes("custom")&&e.jsxs("div",{style:{marginTop:"-8px"},children:[I("Describe Your System Type *"),e.jsx("input",{type:"text",value:v,onChange:B=>C(B.target.value),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,placeholder:"e.g., Underwater pipeline inspection ROV, Agricultural pollination drone swarm"}),q("Since your system doesn't fit a standard category, please describe it so we can configure appropriate boundaries.")]}),I("Compliance Requirements"),e.jsx("input",{type:"text",value:p.compliance_requirements,onChange:B=>x({...p,compliance_requirements:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,placeholder:"e.g., ISO 26262, FDA 510(k), FAA Part 107, SOC 2"}),q("List any regulatory or compliance frameworks your system must adhere to.")]})]}),a===3&&e.jsxs("div",{className:"space-y-4",children:[P("Operational Design Domain"),e.jsxs("div",{children:[I("ODD Description *"),e.jsx("textarea",{value:y.odd_description,onChange:B=>j({...y,odd_description:B.target.value}),rows:5,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:g,placeholder:"Describe the operating domain in plain language: where, how, and under what conditions the system operates."}),q("This is the human-readable description of your system's intended operating domain. Specific numeric limits will be defined in the next step.")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[I("Facility / Deployment Location"),e.jsx("input",{type:"text",value:y.facility_location,onChange:B=>j({...y,facility_location:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,placeholder:"Address or region"})]}),e.jsxs("div",{children:[I("Preferred Test Start Date"),e.jsx("input",{type:"date",value:y.preferred_test_date,onChange:B=>j({...y,preferred_test_date:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]})]}),e.jsx("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px",marginTop:"8px"},children:P("Environmental Conditions")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[I("Temp Min"),e.jsx("input",{type:"number",value:y.temp_min,onChange:B=>j({...y,temp_min:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,placeholder:"e.g., 32"})]}),e.jsxs("div",{children:[I("Temp Max"),e.jsx("input",{type:"number",value:y.temp_max,onChange:B=>j({...y,temp_max:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,placeholder:"e.g., 110"})]}),e.jsxs("div",{children:[I("Unit"),e.jsxs("select",{value:y.temp_unit,onChange:B=>j({...y,temp_unit:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,children:[e.jsx("option",{value:"F",children:"F"}),e.jsx("option",{value:"C",children:"C"})]})]})]}),e.jsxs("div",{children:[I("Surface / Terrain Type"),e.jsx("input",{type:"text",value:y.surface_type,onChange:B=>j({...y,surface_type:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,placeholder:"e.g., flat concrete, paved road, gravel"})]}),e.jsxs("div",{children:[I("Weather Constraints"),e.jsx("input",{type:"text",value:y.weather_constraints,onChange:B=>j({...y,weather_constraints:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,placeholder:"e.g., no operation in rain/snow, wind < 25 mph"})]}),e.jsxs("div",{children:[I("Additional Notes"),e.jsx("textarea",{value:y.notes,onChange:B=>j({...y,notes:B.target.value}),rows:2,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:g,placeholder:"Anything else relevant to the operating domain"})]})]}),a===4&&e.jsxs("div",{className:"space-y-6",children:[p.system_type&&Ge[p.system_type]&&e.jsxs("div",{style:{padding:"12px 16px",background:p.system_type.includes("custom")?"rgba(139,92,246,0.1)":"rgba(92,214,133,0.1)",border:"1px solid "+(p.system_type.includes("custom")?"rgba(139,92,246,0.2)":"rgba(92,214,133,0.2)"),borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:p.system_type.includes("custom")?e.jsxs(e.Fragment,{children:[e.jsx(We,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:16,style:{color:n.purpleBright}}),e.jsxs("span",{style:{color:n.purpleBright,fontSize:"13px"},children:["Custom system  define all boundaries manually or use Bulk Import",v?` (${v})`:""]})]}):e.jsxs(e.Fragment,{children:[e.jsx(pn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:16,style:{color:n.accentGreen}}),e.jsxs("span",{style:{color:n.accentGreen,fontSize:"13px"},children:["Loaded recommended boundaries for ",Ge[p.system_type].label]})]})}),!p.system_type.includes("custom")&&e.jsx("button",{onClick:()=>L(p.system_type),style:{background:"transparent",border:"1px solid rgba(92,214,133,0.3)",borderRadius:"6px",padding:"4px 12px",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer"},children:"Reload Defaults"})]}),e.jsxs("div",{children:[P("Numeric Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>f({open:!0,type:"numeric"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",borderRadius:"6px",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),q("Define measurable limits: speed, temperature, altitude, weight, pressure, distance, etc."),A.map((B,D)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:B.name,onChange:F=>M(A,m,D,"name",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Name (e.g., Speed Limit)"}),e.jsx("input",{type:"text",value:B.parameter,onChange:F=>M(A,m,D,"parameter",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Parameter (e.g., speed)"})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsx("input",{type:"number",value:B.min_value,onChange:F=>M(A,m,D,"min_value",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Min"}),e.jsx("input",{type:"number",value:B.max_value,onChange:F=>M(A,m,D,"max_value",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Max"}),e.jsx("input",{type:"number",value:B.hard_limit,onChange:F=>M(A,m,D,"hard_limit",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Hard limit"}),e.jsx("input",{type:"text",value:B.unit,onChange:F=>M(A,m,D,"unit",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Unit"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:B.tolerance,onChange:F=>M(A,m,D,"tolerance",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px",flex:1},placeholder:"Tol"}),A.length>1&&e.jsx("button",{onClick:()=>J(A,m,D),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},D)),e.jsx("button",{onClick:()=>W(A,m,{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}),style:{marginTop:"8px",background:"transparent",border:`1px dashed ${n.borderGlass}`,borderRadius:"6px",padding:"8px 16px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Numeric Boundary"})]}),e.jsxs("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:[P("Geographic Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>f({open:!0,type:"geo"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",borderRadius:"6px",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),q("Define the physical operating zone. Enter center coordinates and radius."),w.map((B,D)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:B.name,onChange:F=>M(w,u,D,"name",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Name (e.g., Operating Zone)"}),e.jsxs("select",{value:B.boundary_type,onChange:F=>M(w,u,D,"boundary_type",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},children:[e.jsx("option",{value:"circle",children:"Radius from Point"}),e.jsx("option",{value:"polygon",children:"Polygon (contact us)"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"number",step:"any",value:B.lat,onChange:F=>M(w,u,D,"lat",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:B.lon,onChange:F=>M(w,u,D,"lon",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Longitude"}),e.jsx("input",{type:"number",value:B.radius_meters,onChange:F=>M(w,u,D,"radius_meters",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Radius (m)"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:B.altitude_max,onChange:F=>M(w,u,D,"altitude_max",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px",flex:1},placeholder:"Alt max (m)"}),w.length>1&&e.jsx("button",{onClick:()=>J(w,u,D),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},D)),e.jsx("button",{onClick:()=>W(w,u,{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}),style:{marginTop:"8px",background:"transparent",border:`1px dashed ${n.borderGlass}`,borderRadius:"6px",padding:"8px 16px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Geographic Boundary"})]}),e.jsxs("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:[P("Time Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>f({open:!0,type:"time"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",borderRadius:"6px",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),q("Define allowed operating hours and days."),b.map((B,D)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:B.name,onChange:F=>M(b,_,D,"name",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Name"}),e.jsx("input",{type:"number",min:"0",max:"23",value:B.start_hour,onChange:F=>M(b,_,D,"start_hour",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Start hour"}),e.jsx("input",{type:"number",min:"0",max:"23",value:B.end_hour,onChange:F=>M(b,_,D,"end_hour",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"End hour"}),e.jsxs("select",{value:B.timezone,onChange:F=>M(b,_,D,"timezone",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},children:[e.jsx("option",{value:"America/New_York",children:"Eastern"}),e.jsx("option",{value:"America/Chicago",children:"Central"}),e.jsx("option",{value:"America/Denver",children:"Mountain"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Europe/London",children:"UK"}),e.jsx("option",{value:"Europe/Berlin",children:"CET"}),e.jsx("option",{value:"Asia/Tokyo",children:"JST"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px",marginRight:"4px"},children:"Days:"}),O.map((F,V)=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",cursor:"pointer",fontSize:"11px",color:B.days.includes(V)?n.purpleBright:n.textTertiary},children:[e.jsx("input",{type:"checkbox",checked:B.days.includes(V),onChange:H=>{const de=H.target.checked?[...B.days,V].sort():B.days.filter(Re=>Re!==V);M(b,_,D,"days",de)},style:{accentColor:n.purpleBright,width:"12px",height:"12px"}}),F]},V)),b.length>1&&e.jsx("button",{onClick:()=>J(b,_,D),style:{marginLeft:"auto",background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"2px 8px",fontSize:"14px"},children:""})]})]},D)),e.jsx("button",{onClick:()=>W(b,_,{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}),style:{marginTop:"8px",background:"transparent",border:`1px dashed ${n.borderGlass}`,borderRadius:"6px",padding:"8px 16px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Time Boundary"})]}),e.jsxs("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:[P("State Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>f({open:!0,type:"state"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",borderRadius:"6px",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),q("Define allowed/forbidden operational states and modes."),k.map((B,D)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:B.name,onChange:F=>M(k,N,D,"name",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Name (e.g., Mode Check)"}),e.jsx("input",{type:"text",value:B.parameter,onChange:F=>M(k,N,D,"parameter",F.target.value),className:"px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Parameter (e.g., mode)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:B.allowed_values,onChange:F=>M(k,N,D,"allowed_values",F.target.value),className:"w-full px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Allowed (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:n.textTertiary},children:"e.g., autonomous, semi-autonomous"})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("input",{type:"text",value:B.forbidden_values,onChange:F=>M(k,N,D,"forbidden_values",F.target.value),className:"w-full px-3 py-2 rounded-lg outline-none",style:{...g,fontSize:"13px"},placeholder:"Forbidden (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:n.textTertiary},children:"e.g., manual_override, degraded"})]}),k.length>1&&e.jsx("button",{onClick:()=>J(k,N,D),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px",alignSelf:"flex-start"},children:""})]})]})]},D)),e.jsx("button",{onClick:()=>W(k,N,{name:"",parameter:"",allowed_values:"",forbidden_values:""}),style:{marginTop:"8px",background:"transparent",border:`1px dashed ${n.borderGlass}`,borderRadius:"6px",padding:"8px 16px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add State Boundary"})]}),e.jsx(xs,{isOpen:S.open,onClose:()=>f({open:!1,type:""}),onImport:B=>Z(S.type,B),boundaryType:S.type})]}),a===5&&e.jsxs("div",{className:"space-y-4",children:[P("Safety & Failure Mode"),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[I("On Boundary Violation *"),e.jsxs("select",{value:U.violation_action,onChange:B=>T({...U,violation_action:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,children:[e.jsx("option",{value:"stop",children:"Full Stop"}),e.jsx("option",{value:"slow",children:"Slow / Degrade"}),e.jsx("option",{value:"alert",children:"Alert Only (log + notify)"}),e.jsx("option",{value:"revert",children:"Revert to Last Safe State"}),e.jsx("option",{value:"handoff",children:"Hand Off to Human Operator"})]})]}),e.jsxs("div",{children:[I("On Connection Loss *"),e.jsxs("select",{value:U.connection_loss_action,onChange:B=>T({...U,connection_loss_action:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g,children:[e.jsx("option",{value:"stop",children:"Full Stop"}),e.jsx("option",{value:"continue",children:"Continue (local enforcement)"}),e.jsx("option",{value:"degrade",children:"Degrade to Reduced Capability"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:n.textSecondary,fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:U.fail_closed,onChange:B=>T({...U,fail_closed:B.target.checked}),style:{accentColor:n.purpleBright}}),"Fail-Closed Mode (recommended)"]}),q("When enabled, the agent blocks ALL actions if it cannot verify boundaries.")]}),e.jsx("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:P("Emergency Contact")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[I("Name"),e.jsx("input",{type:"text",value:U.emergency_contact_name,onChange:B=>T({...U,emergency_contact_name:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]}),e.jsxs("div",{children:[I("Phone"),e.jsx("input",{type:"tel",value:U.emergency_contact_phone,onChange:B=>T({...U,emergency_contact_phone:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]}),e.jsxs("div",{children:[I("Email"),e.jsx("input",{type:"email",value:U.emergency_contact_email,onChange:B=>T({...U,emergency_contact_email:B.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none",style:g})]})]}),e.jsxs("div",{children:[I("Escalation Triggers"),e.jsx("textarea",{value:U.escalation_triggers,onChange:B=>T({...U,escalation_triggers:B.target.value}),rows:2,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:g,placeholder:"Conditions requiring immediate human takeover (e.g., sensor failure, repeated violations)"})]}),e.jsxs("div",{children:[I("Existing Safety Systems"),e.jsx("textarea",{value:U.existing_safety_systems,onChange:B=>T({...U,existing_safety_systems:B.target.value}),rows:2,className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:g,placeholder:"Other safety mechanisms in place (e.g., physical e-stop, LIDAR, safety PLC)"})]})]}),a===6&&e.jsxs("div",{className:"space-y-4",children:[P("Review Application"),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",lineHeight:"1.5"},children:"Review your application. After submission, our team will review your boundary definitions and configure the ENVELO agent for your system."}),e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Organization"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"14px"},children:c.organization_name})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Contact"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"14px"},children:c.contact_name||c.contact_email})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"System"}),e.jsx("br",{}),e.jsxs("span",{style:{color:n.textPrimary,fontSize:"14px"},children:[p.system_name," (",p.system_type,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Deployment"}),e.jsx("br",{}),e.jsxs("span",{style:{color:n.textPrimary,fontSize:"14px"},children:[p.deployment_type||"Not specified","  ",p.environment||"Not specified"]})]})]})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:n.purpleBright},children:"Boundary Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:n.purpleBright},children:A.filter(B=>B.name).length}),e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:"Numeric"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:n.purpleBright},children:w.filter(B=>B.name).length}),e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:"Geographic"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:n.purpleBright},children:b.filter(B=>B.name).length}),e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:"Time"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:n.purpleBright},children:k.filter(B=>B.name).length}),e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:"State"})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"16px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:n.purpleBright},children:"Safety Configuration"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"On Violation"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"13px"},children:U.violation_action})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"On Connection Loss"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"13px"},children:U.connection_loss_action})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Fail-Closed"}),e.jsx("br",{}),e.jsx("span",{style:{color:U.fail_closed?"#5CD685":n.accentRed,fontSize:"13px"},children:U.fail_closed?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px"},children:"Agent Method"}),e.jsx("br",{}),e.jsx("span",{style:{color:n.textPrimary,fontSize:"13px"},children:p.integration_method})]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"24px",paddingTop:"16px",borderTop:`1px solid ${n.borderGlass}`},children:[a>1?e.jsx("button",{onClick:()=>i(a-1),style:{background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"10px 24px",color:n.textSecondary,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:"Back"}):e.jsx("div",{}),a<r?e.jsx("button",{onClick:()=>G()&&i(a+1),disabled:!G(),style:{background:G()?n.purplePrimary:"rgba(255,255,255,0.05)",border:`1px solid ${G()?n.purpleBright:n.borderGlass}`,borderRadius:"8px",padding:"10px 32px",color:G()?"#fff":n.textTertiary,cursor:G()?"pointer":"not-allowed",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:"Continue"}):e.jsx("button",{onClick:te,style:{background:"#5CD685",border:"1px solid #5CD685",borderRadius:"8px",padding:"10px 32px",color:"#1a1f2e",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",fontWeight:"bold"},children:"Submit Application"})]})]})]})]})}const ee={bgPrimary:"#0d0d1a",bgSecondary:"#1a1a2e",bgTertiary:"#252540",textPrimary:"#e8e8f0",textSecondary:"#a0a0b0",textTertiary:"#6a6a80",purpleBright:"#8b5cf6",greenBright:"#10b981",redBright:"#ef4444",border:"#2a2a45"},Te=({children:t,style:o={}})=>e.jsx("div",{style:{background:`linear-gradient(135deg, ${ee.bgSecondary} 0%, ${ee.bgTertiary} 100%)`,border:`1px solid ${ee.border}`,borderRadius:"12px",padding:"24px",...o},children:t}),_e=({children:t,onClick:o,variant:a="primary",disabled:i=!1,style:r={}})=>e.jsx("button",{onClick:o,disabled:i,style:{padding:"10px 20px",borderRadius:"8px",border:"none",cursor:i?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase",transition:"all 0.2s",opacity:i?.5:1,...a==="primary"?{background:ee.purpleBright,color:"white"}:a==="danger"?{background:ee.redBright,color:"white"}:{background:"transparent",border:`1px solid ${ee.border}`,color:ee.textSecondary},...r},children:t}),se=({label:t,value:o,onChange:a,type:i="text",placeholder:r="",style:s={}})=>e.jsxs("div",{style:{marginBottom:"12px",...s},children:[t&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,marginBottom:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:t}),e.jsx("input",{type:i,value:o,onChange:l=>a(i==="number"?parseFloat(l.target.value)||0:l.target.value),placeholder:r,style:{width:"100%",padding:"10px 12px",background:ee.bgPrimary,border:`1px solid ${ee.border}`,borderRadius:"6px",color:ee.textPrimary,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"}})]}),Ct=({label:t,value:o,onChange:a,options:i,style:r={}})=>e.jsxs("div",{style:{marginBottom:"12px",...r},children:[t&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,marginBottom:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:t}),e.jsx("select",{value:o,onChange:s=>a(s.target.value),style:{width:"100%",padding:"10px 12px",background:ee.bgPrimary,border:`1px solid ${ee.border}`,borderRadius:"6px",color:ee.textPrimary,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:i.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),ys=({boundary:t,onChange:o,onRemove:a})=>e.jsxs(Te,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:ee.purpleBright,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"NUMERIC BOUNDARY"}),e.jsx(_e,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(se,{label:"Name",value:t.name||"",onChange:i=>o({...t,name:i}),placeholder:"e.g., Speed Limit"}),e.jsx(se,{label:"Parameter",value:t.parameter||"",onChange:i=>o({...t,parameter:i}),placeholder:"e.g., speed"}),e.jsx(se,{label:"Min Value",type:"number",value:t.min_value??"",onChange:i=>o({...t,min_value:i||null}),placeholder:"Optional"}),e.jsx(se,{label:"Max Value",type:"number",value:t.max_value??"",onChange:i=>o({...t,max_value:i||null}),placeholder:"Required"}),e.jsx(se,{label:"Unit",value:t.unit||"",onChange:i=>o({...t,unit:i}),placeholder:"e.g., km/h, C"}),e.jsx(se,{label:"Tolerance",type:"number",value:t.tolerance||0,onChange:i=>o({...t,tolerance:i}),placeholder:"0"})]}),e.jsx(Ct,{label:"On Violation",value:t.violation_action||"block",onChange:i=>o({...t,violation_action:i}),options:[{value:"block",label:"Block Action"},{value:"warn",label:"Warn Only"},{value:"log",label:"Log Only"}],style:{marginTop:"12px",marginBottom:0}})]}),_s=({boundary:t,onChange:o,onRemove:a})=>{var i,r;return e.jsxs(Te,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:ee.greenBright,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"GEOGRAPHIC BOUNDARY"}),e.jsx(_e,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(se,{label:"Name",value:t.name||"",onChange:s=>o({...t,name:s}),placeholder:"e.g., Warehouse Zone"}),e.jsx(Ct,{label:"Boundary Type",value:t.boundary_type||"circle",onChange:s=>o({...t,boundary_type:s}),options:[{value:"circle",label:"Circle (Center + Radius)"},{value:"polygon",label:"Polygon (Multiple Points)"}]}),t.boundary_type==="circle"||!t.boundary_type?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[e.jsx(se,{label:"Center Latitude",type:"number",value:((i=t.center)==null?void 0:i.lat)??"",onChange:s=>o({...t,center:{...t.center,lat:s}}),placeholder:"30.2672"}),e.jsx(se,{label:"Center Longitude",type:"number",value:((r=t.center)==null?void 0:r.lon)??"",onChange:s=>o({...t,center:{...t.center,lon:s}}),placeholder:"-97.7431"}),e.jsx(se,{label:"Radius (meters)",type:"number",value:t.radius_meters||"",onChange:s=>o({...t,radius_meters:s}),placeholder:"1000"})]}):e.jsx("div",{style:{color:ee.textSecondary,fontSize:"12px",padding:"12px",background:ee.bgPrimary,borderRadius:"6px"},children:"Polygon editor coming soon. For now, enter coordinates as JSON in the raw editor below."})]})},bs=({boundary:t,onChange:o,onRemove:a})=>e.jsxs(Te,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#f59e0b",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"TIME BOUNDARY"}),e.jsx(_e,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(se,{label:"Name",value:t.name||"",onChange:i=>o({...t,name:i}),placeholder:"e.g., Operating Hours"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(se,{label:"Start Hour (0-23)",type:"number",value:t.allowed_hours_start??0,onChange:i=>o({...t,allowed_hours_start:Math.min(23,Math.max(0,i))})}),e.jsx(se,{label:"End Hour (0-23)",type:"number",value:t.allowed_hours_end??23,onChange:i=>o({...t,allowed_hours_end:Math.min(23,Math.max(0,i))})})]}),e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,marginBottom:"8px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Allowed Days"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((i,r)=>{const s=t.allowed_days||[0,1,2,3,4,5,6],l=s.includes(r);return e.jsx("button",{onClick:()=>{const c=l?s.filter(d=>d!==r):[...s,r].sort();o({...t,allowed_days:c})},style:{padding:"6px 12px",borderRadius:"4px",border:`1px solid ${l?ee.purpleBright:ee.border}`,background:l?ee.purpleBright:"transparent",color:l?"white":ee.textSecondary,cursor:"pointer",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:i},i)})})]})]}),vs=({boundary:t,onChange:o,onRemove:a})=>e.jsxs(Te,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#ec4899",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"STATE BOUNDARY"}),e.jsx(_e,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(se,{label:"Name",value:t.name||"",onChange:i=>o({...t,name:i}),placeholder:"e.g., Operation Mode"}),e.jsx(se,{label:"Parameter",value:t.parameter||"",onChange:i=>o({...t,parameter:i}),placeholder:"e.g., mode"})]}),e.jsx(se,{label:"Allowed Values (comma-separated)",value:(t.allowed_values||[]).join(", "),onChange:i=>o({...t,allowed_values:i.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"e.g., idle, moving, charging"}),e.jsx(se,{label:"Forbidden Values (comma-separated)",value:(t.forbidden_values||[]).join(", "),onChange:i=>o({...t,forbidden_values:i.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"e.g., emergency, override",style:{marginBottom:0}})]});function ws({applicationId:t,initialBoundaries:o,onSave:a,api:i}){var C;const[r,s]=h.useState({numeric_boundaries:[],geo_boundaries:[],time_boundaries:[],state_boundaries:[],safe_state:{action:"stop",notify:!0,log:!0},fail_closed:!0,telemetry_interval:1,heartbeat_interval:60}),[l,c]=h.useState(!1),[d,p]=h.useState(!1),[x,y]=h.useState("");h.useEffect(()=>{o&&typeof o=="object"&&s(w=>({...w,...o}))},[o]),h.useEffect(()=>{y(JSON.stringify(r,null,2))},[r]);const j=w=>{const u=`${w}_boundaries`,b={numeric:{type:"numeric",name:"",parameter:"",max_value:null,unit:"",tolerance:0,violation_action:"block"},geo:{type:"geo",name:"",boundary_type:"circle",center:{lat:0,lon:0},radius_meters:1e3,violation_action:"block"},time:{type:"time",name:"",allowed_hours_start:6,allowed_hours_end:22,allowed_days:[0,1,2,3,4],violation_action:"block"},state:{type:"state",name:"",parameter:"",allowed_values:[],forbidden_values:[],violation_action:"block"}};s(_=>({..._,[u]:[..._[u],b[w]]}))},A=(w,u,b)=>{const _=`${w}_boundaries`;s(k=>({...k,[_]:k[_].map((N,U)=>U===u?b:N)}))},m=(w,u)=>{const b=`${w}_boundaries`;s(_=>({..._,[b]:_[b].filter((k,N)=>N!==u)}))},S=async()=>{c(!0);try{await a(r)}finally{c(!1)}},f=()=>{try{const w=JSON.parse(x);s(w),p(!1)}catch(w){alert("Invalid JSON: "+w.message)}},v=r.numeric_boundaries.length+r.geo_boundaries.length+r.time_boundaries.length+r.state_boundaries.length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:ee.purpleBright,margin:0},children:"Boundary Configuration"}),e.jsxs("p",{style:{color:ee.textSecondary,margin:"8px 0 0",fontSize:"14px"},children:[v," boundaries defined"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(_e,{variant:"secondary",onClick:()=>p(!d),children:d?"Visual Editor":"Raw JSON"}),e.jsx(_e,{onClick:S,disabled:l,children:l?"Saving...":"Save Boundaries"})]})]}),d?e.jsxs(Te,{children:[e.jsx("textarea",{value:x,onChange:w=>y(w.target.value),style:{width:"100%",minHeight:"400px",padding:"16px",background:ee.bgPrimary,border:`1px solid ${ee.border}`,borderRadius:"6px",color:ee.textPrimary,fontSize:"13px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",resize:"vertical"}}),e.jsx(_e,{onClick:f,style:{marginTop:"12px"},children:"Apply JSON"})]}):e.jsxs("div",{children:[e.jsxs(Te,{style:{marginBottom:"24px"},children:[e.jsx("p",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,margin:"0 0 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Add Boundary"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx(_e,{variant:"secondary",onClick:()=>j("numeric"),children:"+ Numeric (Speed, Temp, etc.)"}),e.jsx(_e,{variant:"secondary",onClick:()=>j("geo"),children:"+ Geographic (Geofence)"}),e.jsx(_e,{variant:"secondary",onClick:()=>j("time"),children:"+ Time (Operating Hours)"}),e.jsx(_e,{variant:"secondary",onClick:()=>j("state"),children:"+ State (Allowed Modes)"})]})]}),r.numeric_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:ee.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Numeric Boundaries (",r.numeric_boundaries.length,")"]}),r.numeric_boundaries.map((w,u)=>e.jsx(ys,{boundary:w,onChange:b=>A("numeric",u,b),onRemove:()=>m("numeric",u)},u))]}),r.geo_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:ee.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Geographic Boundaries (",r.geo_boundaries.length,")"]}),r.geo_boundaries.map((w,u)=>e.jsx(_s,{boundary:w,onChange:b=>A("geo",u,b),onRemove:()=>m("geo",u)},u))]}),r.time_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:ee.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Time Boundaries (",r.time_boundaries.length,")"]}),r.time_boundaries.map((w,u)=>e.jsx(bs,{boundary:w,onChange:b=>A("time",u,b),onRemove:()=>m("time",u)},u))]}),r.state_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:ee.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["State Boundaries (",r.state_boundaries.length,")"]}),r.state_boundaries.map((w,u)=>e.jsx(vs,{boundary:w,onChange:b=>A("state",u,b),onRemove:()=>m("state",u)},u))]}),e.jsxs(Te,{children:[e.jsx("h3",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,margin:"0 0 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Enforcement Settings"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsx(Ct,{label:"On Violation",value:((C=r.safe_state)==null?void 0:C.action)||"stop",onChange:w=>s(u=>({...u,safe_state:{...u.safe_state,action:w}})),options:[{value:"stop",label:"Stop System"},{value:"reduce",label:"Reduce Operation"},{value:"handoff",label:"Human Handoff"}]}),e.jsx(Ct,{label:"Fail Mode",value:r.fail_closed?"closed":"open",onChange:w=>s(u=>({...u,fail_closed:w==="closed"})),options:[{value:"closed",label:"Fail Closed (Block)"},{value:"open",label:"Fail Open (Allow)"}]}),e.jsx(se,{label:"Telemetry Interval (sec)",type:"number",value:r.telemetry_interval||1,onChange:w=>s(u=>({...u,telemetry_interval:w}))})]})]}),v===0&&e.jsxs(Te,{style:{textAlign:"center",padding:"48px"},children:[e.jsx("p",{style:{color:ee.textSecondary,fontSize:"16px",margin:0},children:"No boundaries defined yet."}),e.jsx("p",{style:{color:ee.textTertiary,fontSize:"14px",marginTop:"8px"},children:"Add boundaries above to define the system's Operational Design Domain."})]})]})]})}function Ss(){var Z;const{id:t}=ar(),o=ye(),{user:a}=le(),i=Ce(),[r,s]=h.useState(null),[l,c]=h.useState(!1),[d,p]=h.useState(null),[x,y]=h.useState([]),[j,A]=h.useState([]),[m,S]=h.useState(""),[f,v]=h.useState(!1),[C,w]=h.useState(!1),[u,b]=h.useState(null),[_,k]=h.useState(!1),N=async(G,Q)=>{k(!0);try{const B=await E.get(`/api/applications/${t}/email-preview?new_state=${G}`);b({...B.data,label:Q,newState:G})}catch{o.show("Preview failed","error")}k(!1)},U=async()=>{var G,Q;if(u)try{await E.patch(`/api/applications/${t}/state?new_state=${u.newState}`),b(null),await g(),o.show(`State changed to ${u.newState}`,"success")}catch(B){o.show("Failed: "+(((Q=(G=B.response)==null?void 0:G.data)==null?void 0:Q.detail)||B.message),"error")}};h.useEffect(()=>{t&&(E.get(`/api/applications/${t}`).then(G=>s(G.data)).catch(console.error),E.get(`/api/applications/${t}/history`).then(G=>y(G.data)).catch(console.error),E.get(`/api/applications/${t}/comments`).then(G=>A(G.data)).catch(console.error))},[t]);const T=async()=>{var G,Q;if(await i({title:"Schedule Test",message:"Schedule a CAT-72 test for this application? The test will need to be started manually."})){c(!0);try{const B=await E.post("/api/cat72/tests",{application_id:parseInt(t)});p(B.data),o.show(`CAT-72 Test created: ${B.data.test_id}  Go to CAT-72 Console to start.`,"success")}catch(B){o.show("Failed to create test: "+(((Q=(G=B.response)==null?void 0:G.data)==null?void 0:Q.detail)||B.message),"error")}c(!1)}},$=Le(),z=async()=>{var G,Q;if(await i({title:"Delete Application",message:"Are you sure? This cannot be undone.",danger:!0,confirmLabel:"Delete"}))try{await E.delete(`/api/applications/${t}`),o.show("Application deleted","success"),$("/applications")}catch(B){o.show("Failed to delete: "+(((Q=(G=B.response)==null?void 0:G.data)==null?void 0:Q.detail)||B.message),"error")}},L=()=>N("approved","Approve Application"),g=async()=>{try{const G=await E.get(`/api/applications/${t}`);s(G.data),E.get(`/api/applications/${t}/history`).then(Q=>y(Q.data)).catch(console.error)}catch(G){console.error("Failed to refresh:",G)}},P=async()=>{var G,Q;if(m.trim()){w(!0);try{const B=await E.post(`/api/applications/${t}/comments`,{content:m,is_internal:f});A(D=>[B.data,...D]),S(""),v(!1),o.show("Comment added","success")}catch(B){o.show("Failed to post comment: "+(((Q=(G=B.response)==null?void 0:G.data)==null?void 0:Q.detail)||B.message),"error")}w(!1)}},I=async G=>{var Q,B;try{await E.delete(`/api/applications/${t}/comments/${G}`),A(D=>D.filter(F=>F.id!==G)),o.show("Comment deleted","success")}catch(D){o.show("Failed to delete comment: "+(((B=(Q=D.response)==null?void 0:Q.data)==null?void 0:B.detail)||D.message),"error")}},q=()=>N("under_review","Begin Review"),W=()=>N("suspended","Suspend Application"),J=async()=>{var G,Q;if(await i({title:"Reinstate",message:"Reinstate this application to pending? The applicant will need to go through review again."}))try{await E.patch(`/api/applications/${t}/state?new_state=pending`),await g()}catch(B){o.show("Failed to reinstate: "+(((Q=(G=B.response)==null?void 0:G.data)==null?void 0:Q.detail)||B.message),"error")}},M=[{key:"pending",label:"Submitted",icon:"1"},{key:"under_review",label:"Under Review",icon:"2"},{key:"approved",label:"Approved",icon:"3"},{key:"testing",label:"CAT-72 Testing",icon:"4"},{key:"conformant",label:"Conformant",icon:""}],O=M.findIndex(G=>G.key===(r==null?void 0:r.state)),K=(r==null?void 0:r.state)==="revoked"||(r==null?void 0:r.state)==="suspended",te=()=>{switch(r==null?void 0:r.state){case"pending":return"Your application is queued for review by the Sentinel Authority team.";case"under_review":return"Our team is evaluating your ODD specification and boundary definitions.";case"approved":return"Your system is approved. The ENVELO agent is being configured for CAT-72 testing.";case"testing":return"CAT-72 continuous conformance test is in progress (72-hour minimum).";case"conformant":return"Your system has achieved ODDC Conformance. Your certificate and ENVELO agent credentials are active.";case"revoked":return"This application has been suspended. Contact info@sentinelauthority.org for remediation steps.";default:return""}};return r?e.jsxs("div",{className:"space-y-6",children:[u&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)"},children:e.jsxs("div",{style:{background:n.bgCard,border:"1px solid "+n.borderGlass,borderRadius:"16px",maxWidth:"650px",width:"90%",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid "+n.borderGlass,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright},children:"Email Preview"}),e.jsxs("p",{style:{margin:"4px 0 0",fontSize:"12px",color:n.textTertiary},children:["This email will be sent to ",e.jsx("strong",{style:{color:n.textPrimary},children:u.to})]})]}),e.jsx("button",{onClick:()=>b(null),style:{background:"none",border:"none",color:n.textTertiary,cursor:"pointer",fontSize:"20px",padding:"4px 8px"},children:"X"})]}),e.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid "+n.borderGlass,background:"rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:"11px",color:n.textTertiary,marginBottom:"2px"},children:"Subject"}),e.jsx("div",{style:{fontSize:"14px",color:n.textPrimary,fontWeight:500},children:u.subject})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px 24px"},children:e.jsx("div",{style:{background:"#fff",borderRadius:"8px",overflow:"hidden"},dangerouslySetInnerHTML:{__html:u.html}})}),e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid "+n.borderGlass,display:"flex",justifyContent:"flex-end",gap:"10px"},children:[e.jsx("button",{onClick:()=>b(null),style:{padding:"8px 20px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid "+n.borderGlass,color:n.textSecondary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:U,className:"sexy-btn",style:{padding:"8px 20px",borderRadius:"8px",background:u.newState==="suspended"?"rgba(214,92,92,0.2)":n.purplePrimary,border:"1px solid "+(u.newState==="suspended"?"rgba(214,92,92,0.4)":n.purpleBright),color:u.newState==="suspended"?"#D65C5C":"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:[u.label," + Send Email"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ne,{to:"/applications",className:"flex items-center gap-2 no-underline",style:{color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(co,{className:"w-4 h-4"}),"Back to Applications"]}),(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.state==="pending"&&e.jsx("button",{onClick:q,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.4)",color:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Begin Review"}),(r.state==="pending"||r.state==="under_review")&&e.jsx("button",{onClick:L,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.4)",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Approve Application"}),r.state==="approved"&&e.jsx("button",{onClick:T,disabled:l,className:"px-4 py-2 rounded-lg transition-all",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:l?"wait":"pointer",opacity:l?.7:1},children:l?"Scheduling...":"Schedule CAT-72 Test"}),["pending","under_review","approved","testing","conformant"].includes(r.state)&&e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Suspend"}),(r.state==="suspended"||r.state==="revoked")&&e.jsx("button",{onClick:J,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.4)",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Reinstate"}),r.state==="expired"&&e.jsx("button",{onClick:J,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(157,140,207,0.15)",border:`1px solid ${n.purpleBright}`,color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Re-open"}),e.jsx("button",{onClick:z,className:"px-4 py-2 rounded-lg transition-all",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Delete"})]})]}),e.jsx(Y,{children:e.jsxs("div",{style:{padding:"8px 0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:M.map((G,Q)=>{const B=G.key===r.state,D=O>Q;return e.jsxs(fe.Fragment,{children:[Q>0&&e.jsx("div",{style:{flex:1,height:"2px",background:D?n.accentGreen:n.borderGlass,margin:"0 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minWidth:"80px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:"bold",background:D?"rgba(92,214,133,0.2)":B?"rgba(157,140,207,0.25)":"rgba(255,255,255,0.03)",border:`2px solid ${D?n.accentGreen:B?n.purpleBright:n.borderGlass}`,color:D?n.accentGreen:B?n.purpleBright:n.textTertiary},children:D?"":G.icon}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"0.5px",textTransform:"uppercase",color:B?n.purpleBright:D?n.accentGreen:n.textTertiary,textAlign:"center"},children:G.label})]})]},G.key)})}),K&&e.jsx("div",{style:{padding:"12px 16px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",borderRadius:"8px",marginBottom:"12px"},children:e.jsx("span",{style:{color:n.accentRed,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:" SUSPENDED  This application has been suspended pending review."})}),e.jsx("div",{style:{padding:"12px 16px",background:"rgba(157,140,207,0.08)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px"},children:e.jsx("span",{style:{color:n.textSecondary,fontSize:"13px",lineHeight:"1.5"},children:te()})})]})}),d&&e.jsx("div",{className:"p-4 rounded-lg",style:{background:"rgba(92,214,133,0.1)",border:"1px solid rgba(157,140,207,0.3)"},children:e.jsxs("p",{style:{color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:["Test Created: ",d.test_id,"  ",e.jsx(ne,{to:"/cat72",style:{color:n.purpleBright},children:"Go to CAT-72 Console"})]})}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:["Application ",r.application_number]}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:r.system_name}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:r.system_description})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Organization"}),e.jsx("p",{style:{color:n.textPrimary,fontSize:"18px",marginBottom:"8px"},children:r.organization_name}),e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"4px"},children:[e.jsx("strong",{children:"Contact:"})," ",r.contact_name]}),e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"4px"},children:[e.jsx("strong",{children:"Email:"})," ",r.contact_email]}),r.contact_phone&&e.jsxs("p",{style:{color:n.textSecondary},children:[e.jsx("strong",{children:"Phone:"})," ",r.contact_phone]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Status"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"px-3 py-1 rounded",style:{background:r.state==="conformant"?"rgba(92,214,133,0.15)":r.state==="revoked"?"rgba(214,92,92,0.15)":"rgba(214,160,92,0.15)",color:r.state==="conformant"?n.accentGreen:r.state==="revoked"?n.accentRed:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase"},children:r.state}),(a==null?void 0:a.role)==="admin"&&e.jsxs("select",{value:r.state,onChange:async G=>{var B,D;const Q=G.target.value;if(await i({title:"Change Status",message:`Change status to ${Q.toUpperCase()}?`}))try{if(await E.patch(`/api/applications/${t}/state?new_state=${Q}`),Q==="approved")try{await E.post("/api/apikeys/admin/provision",null,{params:{application_id:t,send_email:!0}})}catch(F){console.log("Auto-provision note:",F.message)}s({...r,state:Q})}catch(F){o.show("Failed to update state: "+(((D=(B=F.response)==null?void 0:B.data)==null?void 0:D.detail)||F.message),"error")}},className:"px-3 py-2 rounded-lg",style:{background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved (Agent Access)"}),e.jsx("option",{value:"testing",children:"Testing (CAT-72 Active)"}),e.jsx("option",{value:"conformant",children:"Conformant"}),e.jsx("option",{value:"revoked",children:"Revoked"})]})]}),e.jsxs("p",{style:{color:n.textSecondary},children:[e.jsx("strong",{children:"Submitted:"})," ",r.submitted_at?new Date(r.submitted_at).toLocaleString():"N/A"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"System Details"}),e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:[e.jsx("strong",{children:"Version:"})," ",r.system_version||"N/A"]}),e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:[e.jsx("strong",{children:"Manufacturer:"})," ",r.manufacturer||"N/A"]}),r.facility_location&&e.jsxs("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:[e.jsx("strong",{children:"Facility:"})," ",r.facility_location]}),r.preferred_test_date&&e.jsxs("p",{style:{color:n.textSecondary},children:[e.jsx("strong",{children:"Preferred Test Date:"})," ",new Date(r.preferred_test_date).toLocaleDateString()]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Safety Boundaries & Operational Limits"}),e.jsx("p",{style:{color:n.textSecondary,lineHeight:1.7,whiteSpace:"pre-wrap"},children:typeof r.envelope_definition=="object"?JSON.stringify(r.envelope_definition,null,2):r.envelope_definition||"Not specified"})]})]}),(a==null?void 0:a.role)==="admin"&&e.jsx(ws,{applicationId:r.id,initialBoundaries:r.envelope_definition||{},onSave:async G=>{try{await E.patch(`/api/applicants/${r.id}`,{envelope_definition:G}),o.show("Boundaries saved","success"),s({...r,envelope_definition:G})}catch(Q){o.show("Failed to save: "+Q.message,"error")}}}),x.length>0&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"20px"},children:"State Change History"}),e.jsxs("div",{style:{position:"relative",paddingLeft:"28px"},children:[e.jsx("div",{style:{position:"absolute",left:"8px",top:"4px",bottom:"4px",width:"2px",background:n.borderGlass}}),x.map((G,Q)=>{var de,Re,oe,Se,et;const D={submitted:n.purpleBright,state_changed:(()=>{var xt;const Ne=(xt=G.details)==null?void 0:xt.new_state;return Ne==="conformant"?n.accentGreen:Ne==="suspended"||Ne==="revoked"?"#D65C5C":Ne==="approved"?n.accentGreen:Ne==="under_review"||Ne==="testing"?n.purpleBright:"#D6A05C"})(),certificate_issued:n.accentGreen}[G.action]||n.textTertiary,F=((Re=(de=G.details)==null?void 0:de.new_state)==null?void 0:Re.replace("_"," "))||((oe=G.action)==null?void 0:oe.replace("_"," ")),V=(et=(Se=G.details)==null?void 0:Se.old_state)==null?void 0:et.replace("_"," "),H=G.timestamp?new Date(G.timestamp):null;return e.jsxs("div",{style:{position:"relative",paddingBottom:Q<x.length-1?"20px":"0",marginBottom:(Q<x.length-1,"0")},children:[e.jsx("div",{style:{position:"absolute",left:"-24px",top:"2px",width:"12px",height:"12px",borderRadius:"50%",background:`${D}30`,border:`2px solid ${D}`}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:500,color:D,textTransform:"uppercase",letterSpacing:"0.5px"},children:F}),V&&G.action!=="submitted"&&e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginLeft:"8px"},children:["from ",V]}),e.jsx("div",{style:{marginTop:"4px"},children:e.jsx("span",{style:{fontSize:"12px",color:n.textTertiary},children:G.user_email})})]}),e.jsx("div",{style:{textAlign:"right",flexShrink:0},children:H&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:H.toLocaleDateString()}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:H.toLocaleTimeString()})]})})]})]},Q)})]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"ODD Specification"}),e.jsx("p",{style:{color:n.textSecondary,lineHeight:1.7,whiteSpace:"pre-wrap"},children:typeof r.odd_specification=="object"?((Z=r.odd_specification)==null?void 0:Z.description)||JSON.stringify(r.odd_specification,null,2):r.odd_specification})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Comments & Notes"}),e.jsxs("div",{style:{marginBottom:j.length>0?"20px":"0"},children:[e.jsx("textarea",{value:m,onChange:G=>S(G.target.value),rows:3,placeholder:"Add a comment or note...",className:"w-full px-4 py-3 rounded-lg outline-none resize-none",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px",fontFamily:"inherit",transition:"border-color 0.2s"},onFocus:G=>G.target.style.borderColor=n.purpleBright,onBlur:G=>G.target.style.borderColor=n.borderGlass}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(a==null?void 0:a.role)==="admin"&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:f,onChange:G=>v(G.target.checked),style:{accentColor:n.purpleBright}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,letterSpacing:"0.5px",textTransform:"uppercase"},children:"Internal only"})]})}),e.jsx("button",{onClick:P,disabled:C||!m.trim(),className:"px-4 py-2 rounded-lg",style:{background:m.trim()?n.purplePrimary:"rgba(255,255,255,0.05)",border:`1px solid ${m.trim()?n.purpleBright:n.borderGlass}`,color:m.trim()?"#fff":n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:m.trim()?"pointer":"default",opacity:C?.6:1},children:C?"Posting...":"Post Comment"})]})]}),j.length>0&&e.jsx("div",{style:{borderTop:`1px solid ${n.borderGlass}`,paddingTop:"16px"},children:j.map(G=>e.jsxs("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:G.user_role==="admin"?n.purpleBright:n.textSecondary,fontWeight:500},children:G.user_email}),G.user_role==="admin"&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",padding:"2px 6px",borderRadius:"4px",background:"rgba(157,140,207,0.15)",color:n.purpleBright,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Admin"}),G.is_internal&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",padding:"2px 6px",borderRadius:"4px",background:"rgba(214,160,92,0.15)",color:n.accentAmber,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Internal"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:G.created_at?new Date(G.created_at).toLocaleString():""}),((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.email)===G.user_email)&&e.jsx("button",{onClick:()=>I(G.id),style:{background:"none",border:"none",color:n.textTertiary,cursor:"pointer",fontSize:"12px",padding:"0",opacity:.5},title:"Delete comment",children:""})]})]}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",lineHeight:1.6,margin:0,whiteSpace:"pre-wrap"},children:G.content})]},G.id))}),j.length===0&&!m&&e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",fontStyle:"italic",margin:0},children:"No comments yet"})]}),r.notes&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Applicant Notes"}),e.jsx("p",{style:{color:n.textSecondary,lineHeight:1.7,whiteSpace:"pre-wrap"},children:r.notes})]})]}):e.jsx("div",{style:{color:n.textTertiary},children:"Loading..."})}function js(){const t=Ce(),{user:o}=le(),[a,i]=h.useState([]),r=ye(),[s,l]=h.useState({}),[c,d]=h.useState(Date.now()),p=()=>{E.get("/api/cat72/tests").then(v=>i(v.data)).catch(console.error)};h.useEffect(()=>{p();const v=setInterval(p,15e3),C=setInterval(()=>d(Date.now()),1e3);return()=>{clearInterval(v),clearInterval(C)}},[]);const x=async v=>{var C,w;if(await t({title:"Start Test",message:"Start this CAT-72 test? The 72-hour timer will begin."})){l(u=>({...u,[v]:"starting"}));try{await E.post(`/api/cat72/tests/${v}/start`),p()}catch(u){r.show("Failed to start test: "+(((w=(C=u.response)==null?void 0:C.data)==null?void 0:w.detail)||u.message),"error")}l(u=>({...u,[v]:null}))}},y=async v=>{var C,w;if(await t({title:"Stop Test",message:"Stop this CAT-72 test and evaluate results?"})){l(u=>({...u,[v]:"stopping"}));try{await E.post(`/api/cat72/tests/${v}/stop`),p()}catch(u){r.show("Failed to stop test: "+(((w=(C=u.response)==null?void 0:C.data)==null?void 0:w.detail)||u.message),"error")}l(u=>({...u,[v]:null}))}},j=async v=>{var C,w;if(await t({title:"Issue Certificate",message:"Issue ODDC certificate for this passed test?"})){l(u=>({...u,[v]:"issuing"}));try{const u=await E.post(`/api/certificates/issue/${v}`);r.show(`Certificate issued: ${u.data.certificate_number}`,"success"),p()}catch(u){r.show("Failed to issue certificate: "+(((w=(C=u.response)==null?void 0:C.data)==null?void 0:w.detail)||u.message),"error")}l(u=>({...u,[v]:null}))}},A=v=>{const C=Math.floor(v/3600),w=Math.floor(v%3600/60),u=Math.floor(v%60);return`${String(C).padStart(2,"0")}:${String(w).padStart(2,"0")}:${String(u).padStart(2,"0")}`},m=a.filter(v=>v.state==="running"),S=a.filter(v=>v.state==="scheduled"),f=a.filter(v=>v.state==="completed");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Testing"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:"CAT-72 Console"}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:(o==null?void 0:o.role)==="admin"?"72-hour Convergence Authorization Tests  Auto-refreshes every 15s":"Monitor your 72-hour conformance test in real time"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:n.serif,fontSize:"24px",fontWeight:200,color:n.accentAmber},children:m.length}),e.jsx("div",{style:{fontFamily:n.mono,fontSize:"9px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginTop:"4px"},children:"Running"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:n.serif,fontSize:"24px",fontWeight:200,color:n.purpleBright},children:S.length}),e.jsx("div",{style:{fontFamily:n.mono,fontSize:"9px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginTop:"4px"},children:"Scheduled"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:n.serif,fontSize:"24px",fontWeight:200,color:n.accentGreen},children:f.filter(v=>v.result==="PASS").length}),e.jsx("div",{style:{fontFamily:n.mono,fontSize:"9px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginTop:"4px"},children:"Passed"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:n.serif,fontSize:"24px",fontWeight:200,color:n.accentRed},children:f.filter(v=>v.result==="FAIL").length}),e.jsx("div",{style:{fontFamily:n.mono,fontSize:"9px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginTop:"4px"},children:"Failed"})]})]}),m.length>0&&e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.accentAmber,marginBottom:"12px"},children:" Live Tests"}),e.jsx("div",{className:"space-y-4",children:m.map(v=>{const C=v.duration_hours*3600,w=Math.min(100,Math.round(v.elapsed_seconds/C*100)),u=Math.max(0,C-v.elapsed_seconds);return e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,fontSize:"16px",color:n.textPrimary,marginBottom:"4px"},children:[v.organization_name,"  ",v.system_name]}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:["Test ID: ",v.test_id,"  Duration: ",v.duration_hours,"h"]})]}),(o==null?void 0:o.role)==="admin"&&e.jsx("button",{onClick:()=>y(v.test_id),disabled:s[v.test_id],className:"px-4 py-2 rounded-lg",style:{background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",color:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:s[v.test_id]==="stopping"?"...":"Stop & Evaluate"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"8px"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"28px",fontWeight:200,color:n.purpleBright,letterSpacing:"2px"},children:A(v.elapsed_seconds)}),e.jsx("div",{style:{flex:1},children:e.jsx("div",{className:"w-full h-3 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.08)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${w}%`,background:w>=100?n.accentGreen:`linear-gradient(90deg, ${n.purplePrimary}, ${n.purpleBright})`}})})}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",color:w>=100?n.accentGreen:n.textSecondary,fontWeight:500},children:[w,"%"]})]}),e.jsxs("div",{style:{display:"flex",gap:"24px"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:["Remaining: ",A(u)]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:["Telemetry: ",v.telemetry_count||0," events"]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:v.violations_count>0?n.accentRed:n.textTertiary},children:["Violations: ",v.violations_count||0]})]})]},v.id)})})]}),S.length>0&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Scheduled"}),e.jsx("div",{className:"space-y-3",children:S.map(v=>e.jsxs("div",{style:{padding:"14px 16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,color:n.textPrimary,marginBottom:"2px"},children:[v.organization_name,"  ",v.system_name]}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[v.test_id,"  ",v.duration_hours,"h test"]})]}),(o==null?void 0:o.role)==="admin"&&e.jsx("button",{onClick:()=>x(v.test_id),disabled:s[v.test_id],className:"px-4 py-2 rounded-lg",style:{background:"rgba(92,214,133,0.15)",border:"1px solid rgba(92,214,133,0.3)",color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:s[v.test_id]==="starting"?"...":"Start Test"})]},v.id))})]}),f.length>0&&e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Completed"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Result"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:f.map(v=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{style:{fontWeight:500,color:n.textPrimary},children:[v.organization_name,"  ",v.system_name]}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:v.test_id})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:600,color:v.result==="PASS"?n.accentGreen:n.accentRed,padding:"4px 10px",borderRadius:"4px",background:v.result==="PASS"?"rgba(92,214,133,0.15)":"rgba(214,92,92,0.15)"},children:v.result})}),e.jsx("td",{className:"px-4 py-4",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:n.textSecondary},children:A(v.elapsed_seconds)}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[(o==null?void 0:o.role)==="admin"&&v.result==="PASS"&&!v.certificate_issued&&e.jsx("button",{onClick:()=>j(v.test_id),disabled:s[v.test_id],className:"px-3 py-1 rounded",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:s[v.test_id]==="issuing"?"...":"Issue Certificate"}),v.certificate_issued&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px"},children:" Certified"}),e.jsx("a",{href:`${Ue}/api/certificates/${v.certificate_number||v.test_id}/pdf`,target:"_blank",style:{marginLeft:"8px",padding:"2px 8px",background:n.purplePrimary,borderRadius:"4px",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",textDecoration:"none"},children:"PDF"})]})]})})]},v.id))})]})]}),a.length===0&&e.jsx(Y,{children:e.jsxs("div",{className:"text-center py-12",style:{color:n.textTertiary},children:[e.jsx("p",{style:{marginBottom:"8px"},children:(o==null?void 0:o.role)==="admin"?"No tests yet":"No active tests"}),e.jsx("p",{style:{fontSize:"13px"},children:(o==null?void 0:o.role)==="admin"?"Approve an application and schedule a CAT-72 test to get started.":"When your application is approved and a CAT-72 test is scheduled, you can monitor its progress here in real time."})]})})]})}function Cs(){const[t,o]=h.useState([]),[a,i]=h.useState("active");h.useEffect(()=>{E.get("/api/certificates/").then(c=>o(c.data)).catch(console.error)},[]);const r=t.filter(c=>a==="all"?!0:a==="active"?c.state==="conformant"||c.state==="active"||c.state==="issued":c.state===a),s={all:t.length,active:t.filter(c=>c.state==="conformant"||c.state==="active"||c.state==="issued").length,suspended:t.filter(c=>c.state==="suspended").length,revoked:t.filter(c=>c.state==="revoked").length},l=[{key:"active",label:"Active"},{key:"suspended",label:"Suspended"},{key:"revoked",label:"Revoked"},{key:"all",label:"All Records"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Records"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,margin:0},children:"Certificates"}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px"},children:"Issued ODDC conformance determinations"})]}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"rgba(255,255,255,0.03)",borderRadius:"8px",padding:"4px",border:`1px solid ${n.borderGlass}`},children:l.map(c=>e.jsxs("button",{onClick:()=>i(c.key),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase",transition:"all 0.2s",background:a===c.key?n.purplePrimary:"transparent",color:a===c.key?"#fff":n.textTertiary},children:[c.label," ",s[c.key]>0?`(${s[c.key]})`:""]},c.key))}),e.jsxs(Y,{children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Certificate #"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Expires"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:r.map(c=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("td",{className:"px-4 py-4",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:c.certificate_number}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textPrimary},children:c.system_name}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textSecondary},children:c.organization_name}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1 rounded",style:{background:c.state==="conformant"?"rgba(92,214,133,0.15)":c.state==="suspended"?"rgba(214,160,92,0.15)":"rgba(214,92,92,0.15)",color:c.state==="conformant"?n.accentGreen:c.state==="suspended"?n.accentAmber:n.accentRed,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:c.state})}),e.jsx("td",{className:"px-4 py-4",style:{color:n.textTertiary,fontSize:"14px"},children:c.expires_at?new Date(c.expires_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[c.state!=="revoked"&&c.state!=="suspended"?e.jsx("a",{href:`${Ue}/api/certificates/${c.certificate_number}/pdf`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 rounded transition-colors no-underline",style:{background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Download PDF"}):e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,letterSpacing:"1px",textTransform:"uppercase"},children:c.state==="revoked"?"Revoked":"Suspended"}),e.jsx(ne,{to:`/verify?cert=${c.certificate_number}`,className:"px-2 py-1 rounded no-underline",style:{background:"rgba(255,255,255,0.05)",border:`1px solid ${n.borderGlass}`,color:n.textSecondary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"0.5px",textTransform:"uppercase"},children:"Verify"})]})})]},c.id))})]}),r.length===0&&e.jsx("div",{className:"text-center py-12",style:{color:n.textTertiary},children:t.length===0?"No certificates issued":`No ${a==="all"?"":a+" "}certificates`})]})]})}var mt={},ks=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Jo={},he={};let wn;const Ts=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];he.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17};he.getSymbolTotalCodewords=function(o){return Ts[o]};he.getBCHDigit=function(t){let o=0;for(;t!==0;)o++,t>>>=1;return o};he.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');wn=o};he.isKanjiModeEnabled=function(){return typeof wn<"u"};he.toSJIS=function(o){return wn(o)};var Nt={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function o(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,r){if(t.isValid(i))return i;try{return o(i)}catch{return r}}})(Nt);function Yo(){this.buffer=[],this.length=0}Yo.prototype={get:function(t){const o=Math.floor(t/8);return(this.buffer[o]>>>7-t%8&1)===1},put:function(t,o){for(let a=0;a<o;a++)this.putBit((t>>>o-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),t&&(this.buffer[o]|=128>>>this.length%8),this.length++}};var Bs=Yo;function ut(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ut.prototype.set=function(t,o,a,i){const r=t*this.size+o;this.data[r]=a,i&&(this.reservedBit[r]=!0)};ut.prototype.get=function(t,o){return this.data[t*this.size+o]};ut.prototype.xor=function(t,o,a){this.data[t*this.size+o]^=a};ut.prototype.isReserved=function(t,o){return this.reservedBit[t*this.size+o]};var zs=ut,Qo={};(function(t){const o=he.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const r=Math.floor(i/7)+2,s=o(i),l=s===145?26:Math.ceil((s-13)/(2*r-2))*2,c=[s-7];for(let d=1;d<r-1;d++)c[d]=c[d-1]-l;return c.push(6),c.reverse()},t.getPositions=function(i){const r=[],s=t.getRowColCoords(i),l=s.length;for(let c=0;c<l;c++)for(let d=0;d<l;d++)c===0&&d===0||c===0&&d===l-1||c===l-1&&d===0||r.push([s[c],s[d]]);return r}})(Qo);var Xo={};const As=he.getSymbolSize,eo=7;Xo.getPositions=function(o){const a=As(o);return[[0,0],[a-eo,0],[0,a-eo]]};var Zo={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o={N1:3,N2:3,N3:40,N4:10};t.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},t.from=function(r){return t.isValid(r)?parseInt(r,10):void 0},t.getPenaltyN1=function(r){const s=r.size;let l=0,c=0,d=0,p=null,x=null;for(let y=0;y<s;y++){c=d=0,p=x=null;for(let j=0;j<s;j++){let A=r.get(y,j);A===p?c++:(c>=5&&(l+=o.N1+(c-5)),p=A,c=1),A=r.get(j,y),A===x?d++:(d>=5&&(l+=o.N1+(d-5)),x=A,d=1)}c>=5&&(l+=o.N1+(c-5)),d>=5&&(l+=o.N1+(d-5))}return l},t.getPenaltyN2=function(r){const s=r.size;let l=0;for(let c=0;c<s-1;c++)for(let d=0;d<s-1;d++){const p=r.get(c,d)+r.get(c,d+1)+r.get(c+1,d)+r.get(c+1,d+1);(p===4||p===0)&&l++}return l*o.N2},t.getPenaltyN3=function(r){const s=r.size;let l=0,c=0,d=0;for(let p=0;p<s;p++){c=d=0;for(let x=0;x<s;x++)c=c<<1&2047|r.get(p,x),x>=10&&(c===1488||c===93)&&l++,d=d<<1&2047|r.get(x,p),x>=10&&(d===1488||d===93)&&l++}return l*o.N3},t.getPenaltyN4=function(r){let s=0;const l=r.data.length;for(let d=0;d<l;d++)s+=r.data[d];return Math.abs(Math.ceil(s*100/l/5)-10)*o.N4};function a(i,r,s){switch(i){case t.Patterns.PATTERN000:return(r+s)%2===0;case t.Patterns.PATTERN001:return r%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(r+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return r*s%2+r*s%3===0;case t.Patterns.PATTERN110:return(r*s%2+r*s%3)%2===0;case t.Patterns.PATTERN111:return(r*s%3+(r+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(r,s){const l=s.size;for(let c=0;c<l;c++)for(let d=0;d<l;d++)s.isReserved(d,c)||s.xor(d,c,a(r,d,c))},t.getBestMask=function(r,s){const l=Object.keys(t.Patterns).length;let c=0,d=1/0;for(let p=0;p<l;p++){s(p),t.applyMask(p,r);const x=t.getPenaltyN1(r)+t.getPenaltyN2(r)+t.getPenaltyN3(r)+t.getPenaltyN4(r);t.applyMask(p,r),x<d&&(d=x,c=p)}return c}})(Zo);var Ft={};const Be=Nt,ft=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ht=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ft.getBlocksCount=function(o,a){switch(a){case Be.L:return ft[(o-1)*4+0];case Be.M:return ft[(o-1)*4+1];case Be.Q:return ft[(o-1)*4+2];case Be.H:return ft[(o-1)*4+3];default:return}};Ft.getTotalCodewordsCount=function(o,a){switch(a){case Be.L:return ht[(o-1)*4+0];case Be.M:return ht[(o-1)*4+1];case Be.Q:return ht[(o-1)*4+2];case Be.H:return ht[(o-1)*4+3];default:return}};var ea={},Et={};const nt=new Uint8Array(512),kt=new Uint8Array(256);(function(){let o=1;for(let a=0;a<255;a++)nt[a]=o,kt[o]=a,o<<=1,o&256&&(o^=285);for(let a=255;a<512;a++)nt[a]=nt[a-255]})();Et.log=function(o){if(o<1)throw new Error("log("+o+")");return kt[o]};Et.exp=function(o){return nt[o]};Et.mul=function(o,a){return o===0||a===0?0:nt[kt[o]+kt[a]]};(function(t){const o=Et;t.mul=function(i,r){const s=new Uint8Array(i.length+r.length-1);for(let l=0;l<i.length;l++)for(let c=0;c<r.length;c++)s[l+c]^=o.mul(i[l],r[c]);return s},t.mod=function(i,r){let s=new Uint8Array(i);for(;s.length-r.length>=0;){const l=s[0];for(let d=0;d<r.length;d++)s[d]^=o.mul(r[d],l);let c=0;for(;c<s.length&&s[c]===0;)c++;s=s.slice(c)}return s},t.generateECPolynomial=function(i){let r=new Uint8Array([1]);for(let s=0;s<i;s++)r=t.mul(r,new Uint8Array([1,o.exp(s)]));return r}})(ea);const ta=ea;function Sn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Sn.prototype.initialize=function(o){this.degree=o,this.genPoly=ta.generateECPolynomial(this.degree)};Sn.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(o.length+this.degree);a.set(o);const i=ta.mod(a,this.genPoly),r=this.degree-i.length;if(r>0){const s=new Uint8Array(this.degree);return s.set(i,r),s}return i};var Ms=Sn,na={},Ie={},jn={};jn.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40};var we={};const oa="[0-9]+",Ps="[A-Z $%*+\\-./:]+";let it="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";it=it.replace(/u/g,"\\u");const Is="(?:(?![A-Z0-9 $%*+\\-./:]|"+it+`)(?:.|[\r
]))+`;we.KANJI=new RegExp(it,"g");we.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");we.BYTE=new RegExp(Is,"g");we.NUMERIC=new RegExp(oa,"g");we.ALPHANUMERIC=new RegExp(Ps,"g");const Rs=new RegExp("^"+it+"$"),Ns=new RegExp("^"+oa+"$"),Fs=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");we.testKanji=function(o){return Rs.test(o)};we.testNumeric=function(o){return Ns.test(o)};we.testAlphanumeric=function(o){return Fs.test(o)};(function(t){const o=jn,a=we;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,l){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!o.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?s.ccBits[0]:l<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return a.testNumeric(s)?t.NUMERIC:a.testAlphanumeric(s)?t.ALPHANUMERIC:a.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function i(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+r)}}t.from=function(s,l){if(t.isValid(s))return s;try{return i(s)}catch{return l}}})(Ie);(function(t){const o=he,a=Ft,i=Nt,r=Ie,s=jn,l=7973,c=o.getBCHDigit(l);function d(j,A,m){for(let S=1;S<=40;S++)if(A<=t.getCapacity(S,m,j))return S}function p(j,A){return r.getCharCountIndicator(j,A)+4}function x(j,A){let m=0;return j.forEach(function(S){const f=p(S.mode,A);m+=f+S.getBitsLength()}),m}function y(j,A){for(let m=1;m<=40;m++)if(x(j,m)<=t.getCapacity(m,A,r.MIXED))return m}t.from=function(A,m){return s.isValid(A)?parseInt(A,10):m},t.getCapacity=function(A,m,S){if(!s.isValid(A))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=r.BYTE);const f=o.getSymbolTotalCodewords(A),v=a.getTotalCodewordsCount(A,m),C=(f-v)*8;if(S===r.MIXED)return C;const w=C-p(S,A);switch(S){case r.NUMERIC:return Math.floor(w/10*3);case r.ALPHANUMERIC:return Math.floor(w/11*2);case r.KANJI:return Math.floor(w/13);case r.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(A,m){let S;const f=i.from(m,i.M);if(Array.isArray(A)){if(A.length>1)return y(A,f);if(A.length===0)return 1;S=A[0]}else S=A;return d(S.mode,S.getLength(),f)},t.getEncodedBits=function(A){if(!s.isValid(A)||A<7)throw new Error("Invalid QR Code version");let m=A<<12;for(;o.getBCHDigit(m)-c>=0;)m^=l<<o.getBCHDigit(m)-c;return A<<12|m}})(na);var aa={};const rn=he,ra=1335,Es=21522,to=rn.getBCHDigit(ra);aa.getEncodedBits=function(o,a){const i=o.bit<<3|a;let r=i<<10;for(;rn.getBCHDigit(r)-to>=0;)r^=ra<<rn.getBCHDigit(r)-to;return(i<<10|r)^Es};var ia={};const Ds=Ie;function He(t){this.mode=Ds.NUMERIC,this.data=t.toString()}He.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)};He.prototype.getLength=function(){return this.data.length};He.prototype.getBitsLength=function(){return He.getBitsLength(this.data.length)};He.prototype.write=function(o){let a,i,r;for(a=0;a+3<=this.data.length;a+=3)i=this.data.substr(a,3),r=parseInt(i,10),o.put(r,10);const s=this.data.length-a;s>0&&(i=this.data.substr(a),r=parseInt(i,10),o.put(r,s*3+1))};var Os=He;const Ls=Ie,Wt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ve(t){this.mode=Ls.ALPHANUMERIC,this.data=t}Ve.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)};Ve.prototype.getLength=function(){return this.data.length};Ve.prototype.getBitsLength=function(){return Ve.getBitsLength(this.data.length)};Ve.prototype.write=function(o){let a;for(a=0;a+2<=this.data.length;a+=2){let i=Wt.indexOf(this.data[a])*45;i+=Wt.indexOf(this.data[a+1]),o.put(i,11)}this.data.length%2&&o.put(Wt.indexOf(this.data[a]),6)};var Us=Ve;const Gs=Ie;function Ke(t){this.mode=Gs.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Ke.getBitsLength=function(o){return o*8};Ke.prototype.getLength=function(){return this.data.length};Ke.prototype.getBitsLength=function(){return Ke.getBitsLength(this.data.length)};Ke.prototype.write=function(t){for(let o=0,a=this.data.length;o<a;o++)t.put(this.data[o],8)};var Ws=Ke;const $s=Ie,qs=he;function Je(t){this.mode=$s.KANJI,this.data=t}Je.getBitsLength=function(o){return o*13};Je.prototype.getLength=function(){return this.data.length};Je.prototype.getBitsLength=function(){return Je.getBitsLength(this.data.length)};Je.prototype.write=function(t){let o;for(o=0;o<this.data.length;o++){let a=qs.toSJIS(this.data[o]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),t.put(a,13)}};var Hs=Je,sa={exports:{}};(function(t){var o={single_source_shortest_paths:function(a,i,r){var s={},l={};l[i]=0;var c=o.PriorityQueue.make();c.push(i,0);for(var d,p,x,y,j,A,m,S,f;!c.empty();){d=c.pop(),p=d.value,y=d.cost,j=a[p]||{};for(x in j)j.hasOwnProperty(x)&&(A=j[x],m=y+A,S=l[x],f=typeof l[x]>"u",(f||S>m)&&(l[x]=m,c.push(x,m),s[x]=p))}if(typeof r<"u"&&typeof l[r]>"u"){var v=["Could not find a path from ",i," to ",r,"."].join("");throw new Error(v)}return s},extract_shortest_path_from_predecessor_list:function(a,i){for(var r=[],s=i;s;)r.push(s),a[s],s=a[s];return r.reverse(),r},find_path:function(a,i,r){var s=o.single_source_shortest_paths(a,i,r);return o.extract_shortest_path_from_predecessor_list(s,r)},PriorityQueue:{make:function(a){var i=o.PriorityQueue,r={},s;a=a||{};for(s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);return r.queue=[],r.sorter=a.sorter||i.default_sorter,r},default_sorter:function(a,i){return a.cost-i.cost},push:function(a,i){var r={value:a,cost:i};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=o})(sa);var Vs=sa.exports;(function(t){const o=Ie,a=Os,i=Us,r=Ws,s=Hs,l=we,c=he,d=Vs;function p(v){return unescape(encodeURIComponent(v)).length}function x(v,C,w){const u=[];let b;for(;(b=v.exec(w))!==null;)u.push({data:b[0],index:b.index,mode:C,length:b[0].length});return u}function y(v){const C=x(l.NUMERIC,o.NUMERIC,v),w=x(l.ALPHANUMERIC,o.ALPHANUMERIC,v);let u,b;return c.isKanjiModeEnabled()?(u=x(l.BYTE,o.BYTE,v),b=x(l.KANJI,o.KANJI,v)):(u=x(l.BYTE_KANJI,o.BYTE,v),b=[]),C.concat(w,u,b).sort(function(k,N){return k.index-N.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function j(v,C){switch(C){case o.NUMERIC:return a.getBitsLength(v);case o.ALPHANUMERIC:return i.getBitsLength(v);case o.KANJI:return s.getBitsLength(v);case o.BYTE:return r.getBitsLength(v)}}function A(v){return v.reduce(function(C,w){const u=C.length-1>=0?C[C.length-1]:null;return u&&u.mode===w.mode?(C[C.length-1].data+=w.data,C):(C.push(w),C)},[])}function m(v){const C=[];for(let w=0;w<v.length;w++){const u=v[w];switch(u.mode){case o.NUMERIC:C.push([u,{data:u.data,mode:o.ALPHANUMERIC,length:u.length},{data:u.data,mode:o.BYTE,length:u.length}]);break;case o.ALPHANUMERIC:C.push([u,{data:u.data,mode:o.BYTE,length:u.length}]);break;case o.KANJI:C.push([u,{data:u.data,mode:o.BYTE,length:p(u.data)}]);break;case o.BYTE:C.push([{data:u.data,mode:o.BYTE,length:p(u.data)}])}}return C}function S(v,C){const w={},u={start:{}};let b=["start"];for(let _=0;_<v.length;_++){const k=v[_],N=[];for(let U=0;U<k.length;U++){const T=k[U],$=""+_+U;N.push($),w[$]={node:T,lastCount:0},u[$]={};for(let z=0;z<b.length;z++){const L=b[z];w[L]&&w[L].node.mode===T.mode?(u[L][$]=j(w[L].lastCount+T.length,T.mode)-j(w[L].lastCount,T.mode),w[L].lastCount+=T.length):(w[L]&&(w[L].lastCount=T.length),u[L][$]=j(T.length,T.mode)+4+o.getCharCountIndicator(T.mode,C))}}b=N}for(let _=0;_<b.length;_++)u[b[_]].end=0;return{map:u,table:w}}function f(v,C){let w;const u=o.getBestModeForData(v);if(w=o.from(C,u),w!==o.BYTE&&w.bit<u.bit)throw new Error('"'+v+'" cannot be encoded with mode '+o.toString(w)+`.
 Suggested mode is: `+o.toString(u));switch(w===o.KANJI&&!c.isKanjiModeEnabled()&&(w=o.BYTE),w){case o.NUMERIC:return new a(v);case o.ALPHANUMERIC:return new i(v);case o.KANJI:return new s(v);case o.BYTE:return new r(v)}}t.fromArray=function(C){return C.reduce(function(w,u){return typeof u=="string"?w.push(f(u,null)):u.data&&w.push(f(u.data,u.mode)),w},[])},t.fromString=function(C,w){const u=y(C,c.isKanjiModeEnabled()),b=m(u),_=S(b,w),k=d.find_path(_.map,"start","end"),N=[];for(let U=1;U<k.length-1;U++)N.push(_.table[k[U]].node);return t.fromArray(A(N))},t.rawSplit=function(C){return t.fromArray(y(C,c.isKanjiModeEnabled()))}})(ia);const Dt=he,$t=Nt,Ks=Bs,Js=zs,Ys=Qo,Qs=Xo,sn=Zo,ln=Ft,Xs=Ms,Tt=na,Zs=aa,el=Ie,qt=ia;function tl(t,o){const a=t.size,i=Qs.getPositions(o);for(let r=0;r<i.length;r++){const s=i[r][0],l=i[r][1];for(let c=-1;c<=7;c++)if(!(s+c<=-1||a<=s+c))for(let d=-1;d<=7;d++)l+d<=-1||a<=l+d||(c>=0&&c<=6&&(d===0||d===6)||d>=0&&d<=6&&(c===0||c===6)||c>=2&&c<=4&&d>=2&&d<=4?t.set(s+c,l+d,!0,!0):t.set(s+c,l+d,!1,!0))}}function nl(t){const o=t.size;for(let a=8;a<o-8;a++){const i=a%2===0;t.set(a,6,i,!0),t.set(6,a,i,!0)}}function ol(t,o){const a=Ys.getPositions(o);for(let i=0;i<a.length;i++){const r=a[i][0],s=a[i][1];for(let l=-2;l<=2;l++)for(let c=-2;c<=2;c++)l===-2||l===2||c===-2||c===2||l===0&&c===0?t.set(r+l,s+c,!0,!0):t.set(r+l,s+c,!1,!0)}}function al(t,o){const a=t.size,i=Tt.getEncodedBits(o);let r,s,l;for(let c=0;c<18;c++)r=Math.floor(c/3),s=c%3+a-8-3,l=(i>>c&1)===1,t.set(r,s,l,!0),t.set(s,r,l,!0)}function Ht(t,o,a){const i=t.size,r=Zs.getEncodedBits(o,a);let s,l;for(s=0;s<15;s++)l=(r>>s&1)===1,s<6?t.set(s,8,l,!0):s<8?t.set(s+1,8,l,!0):t.set(i-15+s,8,l,!0),s<8?t.set(8,i-s-1,l,!0):s<9?t.set(8,15-s-1+1,l,!0):t.set(8,15-s-1,l,!0);t.set(i-8,8,1,!0)}function rl(t,o){const a=t.size;let i=-1,r=a-1,s=7,l=0;for(let c=a-1;c>0;c-=2)for(c===6&&c--;;){for(let d=0;d<2;d++)if(!t.isReserved(r,c-d)){let p=!1;l<o.length&&(p=(o[l]>>>s&1)===1),t.set(r,c-d,p),s--,s===-1&&(l++,s=7)}if(r+=i,r<0||a<=r){r-=i,i=-i;break}}}function il(t,o,a){const i=new Ks;a.forEach(function(d){i.put(d.mode.bit,4),i.put(d.getLength(),el.getCharCountIndicator(d.mode,t)),d.write(i)});const r=Dt.getSymbolTotalCodewords(t),s=ln.getTotalCodewordsCount(t,o),l=(r-s)*8;for(i.getLengthInBits()+4<=l&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const c=(l-i.getLengthInBits())/8;for(let d=0;d<c;d++)i.put(d%2?17:236,8);return sl(i,t,o)}function sl(t,o,a){const i=Dt.getSymbolTotalCodewords(o),r=ln.getTotalCodewordsCount(o,a),s=i-r,l=ln.getBlocksCount(o,a),c=i%l,d=l-c,p=Math.floor(i/l),x=Math.floor(s/l),y=x+1,j=p-x,A=new Xs(j);let m=0;const S=new Array(l),f=new Array(l);let v=0;const C=new Uint8Array(t.buffer);for(let k=0;k<l;k++){const N=k<d?x:y;S[k]=C.slice(m,m+N),f[k]=A.encode(S[k]),m+=N,v=Math.max(v,N)}const w=new Uint8Array(i);let u=0,b,_;for(b=0;b<v;b++)for(_=0;_<l;_++)b<S[_].length&&(w[u++]=S[_][b]);for(b=0;b<j;b++)for(_=0;_<l;_++)w[u++]=f[_][b];return w}function ll(t,o,a,i){let r;if(Array.isArray(t))r=qt.fromArray(t);else if(typeof t=="string"){let p=o;if(!p){const x=qt.rawSplit(t);p=Tt.getBestVersionForData(x,a)}r=qt.fromString(t,p||40)}else throw new Error("Invalid data");const s=Tt.getBestVersionForData(r,a);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!o)o=s;else if(o<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const l=il(o,a,r),c=Dt.getSymbolSize(o),d=new Js(c);return tl(d,o),nl(d),ol(d,o),Ht(d,a,0),o>=7&&al(d,o),rl(d,l),isNaN(i)&&(i=sn.getBestMask(d,Ht.bind(null,d,a))),sn.applyMask(i,d),Ht(d,a,i),{modules:d,version:o,errorCorrectionLevel:a,maskPattern:i,segments:r}}Jo.create=function(o,a){if(typeof o>"u"||o==="")throw new Error("No input text");let i=$t.M,r,s;return typeof a<"u"&&(i=$t.from(a.errorCorrectionLevel,$t.M),r=Tt.from(a.version),s=sn.from(a.maskPattern),a.toSJISFunc&&Dt.setToSJISFunction(a.toSJISFunc)),ll(o,r,i,s)};var la={},Cn={};(function(t){function o(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let i=a.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+a);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const r=parseInt(i.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const r=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,l=i.scale||4;return{width:s,scale:s?4:l,margin:r,color:{dark:o(i.color.dark||"#000000ff"),light:o(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,r){return r.width&&r.width>=i+r.margin*2?r.width/(i+r.margin*2):r.scale},t.getImageWidth=function(i,r){const s=t.getScale(i,r);return Math.floor((i+r.margin*2)*s)},t.qrToImageData=function(i,r,s){const l=r.modules.size,c=r.modules.data,d=t.getScale(l,s),p=Math.floor((l+s.margin*2)*d),x=s.margin*d,y=[s.color.light,s.color.dark];for(let j=0;j<p;j++)for(let A=0;A<p;A++){let m=(j*p+A)*4,S=s.color.light;if(j>=x&&A>=x&&j<p-x&&A<p-x){const f=Math.floor((j-x)/d),v=Math.floor((A-x)/d);S=y[c[f*l+v]?1:0]}i[m++]=S.r,i[m++]=S.g,i[m++]=S.b,i[m]=S.a}}})(Cn);(function(t){const o=Cn;function a(r,s,l){r.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=l,s.width=l,s.style.height=l+"px",s.style.width=l+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,l,c){let d=c,p=l;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),l||(p=i()),d=o.getOptions(d);const x=o.getImageWidth(s.modules.size,d),y=p.getContext("2d"),j=y.createImageData(x,x);return o.qrToImageData(j.data,s,d),a(y,p,x),y.putImageData(j,0,0),p},t.renderToDataURL=function(s,l,c){let d=c;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),d||(d={});const p=t.render(s,l,d),x=d.type||"image/png",y=d.rendererOpts||{};return p.toDataURL(x,y.quality)}})(la);var ca={};const cl=Cn;function no(t,o){const a=t.a/255,i=o+'="'+t.hex+'"';return a<1?i+" "+o+'-opacity="'+a.toFixed(2).slice(1)+'"':i}function Vt(t,o,a){let i=t+o;return typeof a<"u"&&(i+=" "+a),i}function dl(t,o,a){let i="",r=0,s=!1,l=0;for(let c=0;c<t.length;c++){const d=Math.floor(c%o),p=Math.floor(c/o);!d&&!s&&(s=!0),t[c]?(l++,c>0&&d>0&&t[c-1]||(i+=s?Vt("M",d+a,.5+p+a):Vt("m",r,0),r=0,s=!1),d+1<o&&t[c+1]||(i+=Vt("h",l),l=0)):r++}return i}ca.render=function(o,a,i){const r=cl.getOptions(a),s=o.modules.size,l=o.modules.data,c=s+r.margin*2,d=r.color.light.a?"<path "+no(r.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",p="<path "+no(r.color.dark,"stroke")+' d="'+dl(l,s,r.margin)+'"/>',x='viewBox="0 0 '+c+" "+c+'"',j='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+x+' shape-rendering="crispEdges">'+d+p+`</svg>
`;return typeof i=="function"&&i(null,j),j};const pl=ks,cn=Jo,da=la,ml=ca;function kn(t,o,a,i,r){const s=[].slice.call(arguments,1),l=s.length,c=typeof s[l-1]=="function";if(!c&&!pl())throw new Error("Callback required as last argument");if(c){if(l<2)throw new Error("Too few arguments provided");l===2?(r=a,a=o,o=i=void 0):l===3&&(o.getContext&&typeof r>"u"?(r=i,i=void 0):(r=i,i=a,a=o,o=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(a=o,o=i=void 0):l===2&&!o.getContext&&(i=a,a=o,o=void 0),new Promise(function(d,p){try{const x=cn.create(a,i);d(t(x,o,i))}catch(x){p(x)}})}try{const d=cn.create(a,i);r(null,t(d,o,i))}catch(d){r(d)}}mt.create=cn.create;mt.toCanvas=kn.bind(null,da.render);mt.toDataURL=kn.bind(null,da.renderToDataURL);mt.toString=kn.bind(null,function(t,o,a){return ml.render(t,a)});function ul(){const[t,o]=h.useState("verify"),[a,i]=h.useState(""),[r,s]=h.useState([]),[l,c]=h.useState(null),[d,p]=h.useState("conformant"),[x,y]=h.useState(!1),[j,A]=h.useState(""),[m,S]=h.useState(null),[f,v]=h.useState(null),[C,w]=h.useState(!1),[u,b]=h.useState(""),[_,k]=h.useState(!1),[N,U]=h.useState(!1),[T,$]=h.useState(null),[z,L]=h.useState(!1),g=async O=>{try{const K=`${window.location.origin}/verify?cert=${O}`,te=await mt.toDataURL(K,{width:256,margin:2,color:{dark:"#5B4B8A",light:"#ffffff"},errorCorrectionLevel:"H"});$(te)}catch(K){console.error("QR generation failed:",K)}},P=()=>{if(!T)return;const O=document.createElement("a");O.href=T,O.download=`sentinel-${j}-qr.png`,document.body.appendChild(O),O.click(),document.body.removeChild(O)};h.useEffect(()=>{const K=new URLSearchParams(window.location.search).get("cert");K&&(A(K.toUpperCase()),setTimeout(()=>{I(K.toUpperCase())},300))},[]);const I=async O=>{const K=O||j;if(K.trim()){b(""),S(null),v(null),w(!1),k(!0);try{const te=await E.get(`/api/verify/${K}`);S(te.data),g(K);const Z=new URL(window.location);Z.searchParams.set("cert",K),window.history.replaceState({},"",Z)}catch{b("Certificate not found")}k(!1)}},q=async()=>{if(f){w(!C);return}try{const O=await E.get(`/api/verify/${j}/evidence`);v(O.data),w(!0)}catch{console.error("Evidence fetch failed")}},W=()=>{const O=`${window.location.origin}/verify?cert=${j}`;navigator.clipboard.writeText(O),U(!0),setTimeout(()=>U(!1),2e3)},J=async O=>{O.preventDefault(),await I()};fe.useEffect(()=>{t==="search"&&!x&&(E.get("/api/registry/stats").then(O=>c(O.data)).catch(console.error),E.get("/api/registry/search?status=conformant").then(O=>{s(O.data.results||[]),y(!0)}).catch(console.error))},[t]);const M=async O=>{if(O.preventDefault(),!!a.trim()){b(""),s([]),k(!0);try{const K=new URLSearchParams;a.trim()&&K.set("q",a.trim()),d&&K.set("status",d);const te=await E.get(`/api/registry/search?${K.toString()}`);s(te.data.results||[]),(!te.data.results||te.data.results.length===0)&&b("No certificates found for that search")}catch{b("Unable to connect to registry")}k(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",style:{background:n.bgDeep},children:[e.jsxs(ne,{to:"/dashboard",style:{position:"fixed",top:"24px",right:"32px",zIndex:20,color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase",textDecoration:"none",display:"flex",alignItems:"center",gap:"6px",transition:"color 0.2s"},children:[e.jsx(oo,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-3.5 h-3.5"})," Dashboard"]}),e.jsx("div",{style:{position:"absolute",top:"-20%",left:"-10%",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(91,75,138,0.18) 0%, transparent 65%)",animation:"float1 25s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",bottom:"-30%",right:"-15%",width:"800px",height:"800px",background:"radial-gradient(circle, rgba(92,214,133,0.06) 0%, transparent 65%)",animation:"float2 30s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",top:"40%",right:"10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(157,140,207,0.10) 0%, transparent 65%)",animation:"float3 15s ease-in-out infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",inset:0,backgroundImage:"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.2,pointerEvents:"none",maskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, rgba(0,0,0,0.9) 20%, transparent 70%)"}}),e.jsx("div",{style:{position:"absolute",top:"15%",left:"8%",width:"1px",height:"150px",background:"linear-gradient(to bottom, transparent, rgba(157,140,207,0.4), transparent)"}}),e.jsx("div",{style:{position:"absolute",bottom:"20%",right:"5%",width:"100px",height:"1px",background:"linear-gradient(to right, transparent, rgba(92,214,133,0.4), transparent)"}}),e.jsx("style",{children:`
        @keyframes float1 { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -30px) scale(1.05); } 66% { transform: translate(-20px, 20px) scale(0.95); } }
        @keyframes float2 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-40px, -40px) scale(1.1); } }
        @keyframes float3 { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(20px, 30px); } }
        @keyframes pulse-ring { 0% { transform: scale(0.9); opacity: 0.6; } 50% { transform: scale(1.1); opacity: 0; } 100% { transform: scale(0.9); opacity: 0.6; } }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        .verify-input { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .verify-input:focus { border-color: rgba(157,140,207,0.6) !important; box-shadow: 0 0 0 3px rgba(157,140,207,0.1), 0 4px 20px rgba(0,0,0,0.2); transform: translateY(-1px); }
        .verify-btn { position: relative; overflow: hidden; transition: all 0.3s ease; }
        .verify-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(91,75,138,0.5); }
        .verify-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
      `}),e.jsxs("div",{className:"w-full max-w-lg relative z-10",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsxs("div",{className:"relative flex justify-center mb-6",style:{height:"100px",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",width:"80px",height:"80px",border:"1px solid rgba(157,140,207,0.3)",borderRadius:"50%",animation:"pulse-ring 3s ease-out infinite"}}),e.jsx("div",{style:{position:"absolute",width:"100px",height:"100px",border:"1px solid rgba(157,140,207,0.15)",borderRadius:"50%",animation:"pulse-ring 3s ease-out infinite 0.5s"}}),e.jsx("div",{style:{width:"56px",height:"56px",background:"linear-gradient(135deg, #5B4B8A 0%, #8b5cf6 100%)",border:"2px solid #a896d6",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(157,140,207,0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},children:e.jsx("div",{style:{width:"18px",height:"18px",background:"radial-gradient(circle, #e8e0ff 0%, #c4b8e8 100%)",borderRadius:"50%",boxShadow:"0 0 20px rgba(196,184,232,0.5)"}})})]}),e.jsxs("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"36px",fontWeight:200,color:n.textPrimary,margin:"0 0 8px 0",letterSpacing:"-0.02em"},children:["Certificate ",e.jsx("span",{style:{color:n.purpleBright,fontStyle:"italic"},children:"Verification"})]}),e.jsx("p",{style:{color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"3px",textTransform:"uppercase",marginTop:"16px"},children:"Sentinel Authority  ODDC Registry"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"24px"},children:[e.jsx("button",{onClick:()=>o("verify"),style:{padding:"10px 24px",borderRadius:"20px",border:"none",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",background:t==="verify"?n.purplePrimary:"rgba(255,255,255,0.05)",color:t==="verify"?"#fff":n.textTertiary,transition:"all 0.2s"},children:"Verify Certificate"}),e.jsx("button",{onClick:()=>o("search"),style:{padding:"10px 24px",borderRadius:"20px",border:"none",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",background:t==="search"?n.purplePrimary:"rgba(255,255,255,0.05)",color:t==="search"?"#fff":n.textTertiary,transition:"all 0.2s"},children:"Search Registry"})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"24px",padding:"40px",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.05) inset",transition:"all 0.3s ease",minHeight:"280px"},children:[t==="verify"&&e.jsxs("form",{onSubmit:J,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",textAlign:"center"},children:"Certificate Number"}),e.jsx("input",{type:"text",placeholder:"ODDC-2026-00001",value:j,onChange:O=>{A(O.target.value.toUpperCase()),b(""),S(null)},className:"verify-input w-full px-5 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px",textAlign:"center",letterSpacing:"2px"}})]}),e.jsx("button",{type:"submit",disabled:_||!j.trim(),className:"verify-btn w-full py-4 rounded-xl font-medium",style:{background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"1px solid rgba(157,140,207,0.5)",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"2px",textTransform:"uppercase",cursor:"pointer",boxShadow:"0 4px 20px rgba(91,75,138,0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:_?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4",style:{animation:"spin 1s linear infinite"}})," Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"w-4 h-4"})," Verify Certificate"]})})]}),t==="search"&&e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginBottom:"24px"},children:[{label:"Active Certs",value:l.active_certificates,color:n.accentGreen},{label:"Organizations",value:l.certified_organizations,color:n.purpleBright},{label:"Last 30 Days",value:l.issued_last_30_days,color:"#D6A05C"}].map(O=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"24px",fontWeight:600,color:O.color},children:O.value}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",color:n.textTertiary,letterSpacing:"1px",textTransform:"uppercase",marginTop:"2px"},children:O.label})]},O.label))}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",textAlign:"center"},children:"Organization or System Name"}),e.jsx("input",{type:"text",placeholder:"Company name or system...",value:a,onChange:O=>{i(O.target.value),b("")},className:"verify-input w-full px-5 py-4 rounded-xl outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px",textAlign:"center",letterSpacing:"2px"}})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsxs("select",{value:d,onChange:O=>p(O.target.value),style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:n.textPrimary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",padding:"8px 16px",borderRadius:"8px",outline:"none",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx("option",{value:"conformant",children:"Conformant"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"revoked",children:"Revoked"})]})}),e.jsx("button",{type:"submit",disabled:_,className:"verify-btn w-full py-4 rounded-xl font-medium",style:{background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"1px solid rgba(157,140,207,0.5)",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"2px",textTransform:"uppercase",cursor:"pointer",boxShadow:"0 4px 20px rgba(91,75,138,0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:_?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4",style:{animation:"spin 1s linear infinite"}})," Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"w-4 h-4"})," Search Registry"]})})]}),r.length>0&&e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsxs("p",{style:{color:n.textTertiary,fontSize:"12px",marginBottom:"12px",textAlign:"center"},children:[r.length," certificate(s) found"]}),r.map(O=>e.jsx("div",{onClick:()=>{A(O.certificate_number),o("verify"),setTimeout(()=>{var K;return(K=document.querySelector("form"))==null?void 0:K.requestSubmit()},100)},style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",padding:"16px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:n.textPrimary,fontWeight:500},children:O.organization_name}),e.jsx("div",{style:{color:n.textTertiary,fontSize:"12px"},children:O.system_name})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:O.certificate_number}),e.jsx("div",{style:{color:n.accentGreen,fontSize:"10px",textTransform:"uppercase"},children:O.state})]})]})},O.certificate_number))]})]}),e.jsxs("div",{style:{minHeight:"80px",marginTop:"16px"},children:[u&&e.jsxs("div",{className:"p-5 rounded-xl text-center",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx(We,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.accentRed}}),e.jsx("span",{style:{color:n.accentRed,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:"Not Found"})]}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"14px"},children:u})]}),m&&(m.status==="NOT_FOUND"||m.state==="NOT_FOUND")&&e.jsxs("div",{className:"mt-6 p-5 rounded-xl text-center",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx(We,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:n.accentRed}}),e.jsx("span",{style:{color:n.accentRed,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:"Certificate Not Found"})]}),e.jsxs("p",{style:{color:n.textSecondary,fontSize:"14px"},children:["No certificate exists with number: ",e.jsx("strong",{children:m.certificate_number})]})]}),m&&m.status!=="NOT_FOUND"&&m.state!=="NOT_FOUND"&&(()=>{var D;const O=m.valid,K=(m.status||"").toUpperCase(),te={CONFORMANT:{color:n.accentGreen,bg:"rgba(92,214,133,0.08)",border:"rgba(92,214,133,0.25)",headerBg:"rgba(92,214,133,0.15)",icon:"Valid Certificate",label:"CONFORMANT"},SUSPENDED:{color:"#D6A05C",bg:"rgba(214,160,92,0.08)",border:"rgba(214,160,92,0.25)",headerBg:"rgba(214,160,92,0.15)",icon:"Suspended",label:"SUSPENDED"},REVOKED:{color:"#D65C5C",bg:"rgba(214,92,92,0.08)",border:"rgba(214,92,92,0.25)",headerBg:"rgba(214,92,92,0.15)",icon:"Revoked",label:"REVOKED"},EXPIRED:{color:"#D65C5C",bg:"rgba(214,92,92,0.08)",border:"rgba(214,92,92,0.25)",headerBg:"rgba(214,92,92,0.15)",icon:"Expired",label:"EXPIRED"}},Z=te[K]||te.CONFORMANT,G={display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.06)"},Q={color:n.textTertiary,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px"},B={color:n.textPrimary,fontSize:"14px"};return e.jsxs("div",{className:"mt-6 rounded-xl overflow-hidden",style:{background:Z.bg,border:"1px solid "+Z.border},children:[e.jsxs("div",{style:{padding:"16px 20px",background:Z.headerBg,borderBottom:"1px solid "+Z.border,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[O?e.jsx(pn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:Z.color}}):e.jsx(We,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-5 h-5",style:{color:Z.color}}),e.jsx("span",{style:{color:Z.color,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",fontWeight:500},children:Z.icon})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"10px",background:Z.bg,color:Z.color,fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",gap:"6px",border:"1px solid "+Z.border},children:[e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",background:Z.color,boxShadow:"0 0 8px "+Z.color}}),Z.label]})})]}),m.message&&e.jsx("div",{style:{padding:"12px 20px",background:"rgba(0,0,0,0.15)",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:e.jsx("p",{style:{margin:0,color:Z.color,fontSize:"13px"},children:m.message})}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsxs("div",{style:G,children:[e.jsx("span",{style:Q,children:"Certificate"}),e.jsx("span",{style:{color:Z.color,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",fontWeight:500},children:m.certificate_number})]}),e.jsxs("div",{style:G,children:[e.jsx("span",{style:Q,children:"Organization"}),e.jsx("span",{style:B,children:m.organization_name||"-"})]}),e.jsxs("div",{style:G,children:[e.jsx("span",{style:Q,children:"System"}),e.jsxs("span",{style:B,children:[m.system_name||"-",m.system_version?" v"+m.system_version:""]})]}),e.jsxs("div",{style:G,children:[e.jsx("span",{style:Q,children:"Issued"}),e.jsx("span",{style:B,children:m.issued_at?new Date(m.issued_at).toLocaleDateString():"N/A"})]}),e.jsxs("div",{style:G,children:[e.jsx("span",{style:Q,children:"Expires"}),e.jsx("span",{style:{...B,color:K==="EXPIRED"?"#D65C5C":n.textPrimary},children:m.expires_at?new Date(m.expires_at).toLocaleDateString():"N/A"})]}),m.convergence_score!=null&&e.jsxs("div",{style:G,children:[e.jsx("span",{style:Q,children:"Convergence Score"}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",color:m.convergence_score>=.95?n.accentGreen:"#D6A05C"},children:[(m.convergence_score*100).toFixed(1),"%"]})]}),m.evidence_hash&&e.jsxs("div",{style:{paddingBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("span",{style:Q,children:"Evidence Hash"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary,marginTop:"6px",wordBreak:"break-all",lineHeight:"1.5"},children:m.evidence_hash})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"20px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:W,style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:n.textSecondary,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:N?" Copied!":" Share Link"}),e.jsx("button",{onClick:()=>L(!z),style:{padding:"8px 16px",background:z?"rgba(91,75,138,0.25)":"rgba(255,255,255,0.05)",border:z?"1px solid rgba(91,75,138,0.4)":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:z?n.purpleBright:n.textSecondary,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:z?" Hide QR":" QR Code"}),O&&e.jsxs("a",{href:`${Ue}/api/certificates/${j}/pdf`,target:"_blank",rel:"noopener noreferrer",style:{padding:"8px 16px",background:"rgba(92,214,133,0.1)",border:"1px solid rgba(92,214,133,0.3)",borderRadius:"8px",color:n.accentGreen,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px",textDecoration:"none"},children:[e.jsx(ot,{size:12})," Certificate PDF"]}),O&&e.jsx("button",{onClick:q,style:{padding:"8px 16px",background:"rgba(91,75,138,0.15)",border:"1px solid rgba(91,75,138,0.3)",borderRadius:"8px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:C?" Hide Evidence":" View Evidence"})]}),z&&T&&e.jsxs("div",{style:{marginTop:"16px",padding:"20px",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.06)",textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Verification QR Code"}),e.jsx("div",{style:{display:"inline-block",padding:"12px",background:"#fff",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:e.jsx("img",{src:T,alt:"Verification QR Code",style:{width:"200px",height:"200px",display:"block"}})}),e.jsx("div",{style:{marginTop:"12px",display:"flex",justifyContent:"center",gap:"8px"},children:e.jsxs("button",{onClick:P,style:{padding:"6px 14px",background:"rgba(91,75,138,0.15)",border:"1px solid rgba(91,75,138,0.3)",borderRadius:"6px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ot,{size:12})," Download PNG"]})}),e.jsxs("p",{style:{fontSize:"11px",color:n.textTertiary,marginTop:"12px",lineHeight:"1.5"},children:["Scan to verify certificate ",j," on any device"]})]}),C&&f&&e.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Evidence Chain"}),e.jsxs("div",{style:{display:"grid",gap:"10px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Evidence Hash (SHA-256)"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.purpleBright,wordBreak:"break-all",marginTop:"4px"},children:f.evidence_hash||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Convergence Score"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",color:n.accentGreen,marginTop:"4px"},children:f.convergence_score?(f.convergence_score*100).toFixed(2)+"%":"-"})]}),((D=f.odd_scope)==null?void 0:D.environment_type)&&e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"ODD Environment"}),e.jsx("div",{style:{fontSize:"13px",color:n.textPrimary,marginTop:"4px"},children:f.odd_scope.environment_type})]}),e.jsx("div",{style:{marginTop:"8px",padding:"12px",background:"rgba(0,0,0,0.2)",borderRadius:"8px"},children:e.jsx("p",{style:{fontSize:"11px",color:n.textTertiary,lineHeight:"1.6",whiteSpace:"pre-line",margin:0},children:f.verification_instructions||""})})]})]})]})]})})()]})]})]})]})}function xl(){const{user:t,logout:o}=le();return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:n.bgPrimary,padding:"20px"},children:e.jsxs("div",{style:{maxWidth:"500px",textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(245,158,11,0.1)",border:"2px solid rgba(245,158,11,0.3)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:e.jsx(ao,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,style:{width:"36px",height:"36px",color:"#f59e0b"}})}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:"#f59e0b",marginBottom:"12px"},children:"APPLICATION UNDER REVIEW"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"28px",fontWeight:200,color:n.textPrimary,margin:"0 0 16px"},children:"Welcome to Sentinel Authority"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"15px",lineHeight:"1.6",marginBottom:"32px"},children:"Your account is being reviewed by our team. You will receive full portal access once approved. This typically takes 1-2 business days."}),e.jsxs("div",{style:{padding:"20px",borderRadius:"12px",border:"1px solid "+n.borderGlass,background:"rgba(255,255,255,0.02)",marginBottom:"24px",textAlign:"left"},children:[e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"8px"},children:"Registered as:"}),e.jsx("p",{style:{color:n.textPrimary,fontWeight:500},children:t==null?void 0:t.full_name}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px"},children:t==null?void 0:t.email})]}),e.jsxs("p",{style:{color:n.textTertiary,fontSize:"13px",marginBottom:"24px"},children:["Questions? Contact ",e.jsx("a",{href:"mailto:info@sentinelauthority.org",style:{color:n.purpleBright},children:"info@sentinelauthority.org"})]}),e.jsx("button",{onClick:o,style:{padding:"10px 24px",borderRadius:"8px",background:"transparent",border:"1px solid "+n.borderGlass,color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Sign Out"})]})})}function gl(){const{user:t}=le(),[o,a]=h.useState([]),[i,r]=h.useState(!0);h.useEffect(()=>{E.get("/api/documents/").then(l=>{a(Array.isArray(l.data)?l.data:[]),r(!1)}).catch(()=>r(!1))},[]);const s=async(l,c)=>{try{const d=await E.get("/api/documents/"+l+"/download",{responseType:"blob"}),p=window.URL.createObjectURL(d.data),x=document.createElement("a");x.href=p,x.download=c.replace(/\s+/g,"_")+".pdf",document.body.appendChild(x),x.click(),x.remove(),window.URL.revokeObjectURL(p)}catch(d){console.error("Download error:",d)}};return e.jsxs("div",{style:{padding:"32px",maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"RESOURCES"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"28px",fontWeight:200,color:n.textPrimary,margin:0},children:"Documents & Guides"}),e.jsx("p",{style:{color:n.textTertiary,marginTop:"8px",fontSize:"14px"},children:"Reference materials for the ODDC certification process."})]}),i?e.jsx("div",{style:{color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:"Loading documents..."}):o.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",borderRadius:"12px",border:"1px solid "+n.borderGlass,background:n.bgCard,color:n.textTertiary},children:"No documents available."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:o.map(l=>e.jsxs("div",{style:{padding:"24px",borderRadius:"12px",border:"1px solid "+n.borderGlass,background:n.bgCard,display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"10px",background:n.purplePrimary+"22",border:"1px solid "+n.purplePrimary+"44",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ro,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,style:{width:"22px",height:"22px",color:n.purpleBright}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,color:n.textPrimary,fontSize:"15px",marginBottom:"4px"},children:l.title}),e.jsx("div",{style:{color:n.textTertiary,fontSize:"13px",lineHeight:"1.4"},children:l.description}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginTop:"6px",letterSpacing:"1px",textTransform:"uppercase"},children:"PDF  v"+l.version})]}),e.jsx("button",{onClick:()=>s(l.id,l.title),style:{padding:"10px 20px",borderRadius:"8px",background:n.purplePrimary,border:"1px solid "+n.purpleBright,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer",flexShrink:0},children:"Download"})]},l.id))}),t&&t.role==="admin"&&e.jsx("div",{style:{marginTop:"40px",padding:"20px",borderRadius:"10px",border:"1px dashed "+n.borderGlass,color:n.textTertiary,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"ADMIN: To add documents, place PDFs in backend/static/documents/ and register them in documents.py"})]})}function Ae({label:t,title:o,description:a,action:i}){return e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[t&&e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:n.purpleBright}}),t]}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"32px",fontWeight:200,margin:0,letterSpacing:"-0.02em"},children:o}),a&&e.jsx("p",{style:{color:n.textSecondary,marginTop:"8px",fontSize:"15px"},children:a})]}),i]})})}function pa({apiEndpoint:t,apiKey:o,certificateNumber:a,systemName:i,organizationName:r}){const s=new Date().toISOString();return`#!/usr/bin/env python3
"""
ENVELO Agent - Sentinel Authority
Enforced Non-Violable Execution-Limit Override

System:       ${i}
Certificate:  ${a}
Organization: ${r}
Generated:    ${s}

DEPLOY:
  pip install httpx
  python envelo_agent.py

INTEGRATE:
  from envelo_agent import agent

  @agent.enforce
  def autonomous_action(speed=0, temperature=0):
      pass  # your logic here
"""

import os, sys, time, json, uuid, signal, threading, logging
from datetime import datetime, timezone
from functools import wraps

try:
    import httpx
except ImportError:
    print("[ENVELO] Installing httpx...")
    os.system(f"{sys.executable} -m pip install httpx -q")
    import httpx

# ${"".repeat(65)}
# CREDENTIALS (pre-configured by Sentinel Authority)
# ${"".repeat(65)}
API_ENDPOINT = "${t}"
API_KEY      = "${o}"
CERTIFICATE  = "${a}"
SYSTEM_NAME  = "${i}"

logging.basicConfig(level=logging.INFO, format="[ENVELO] %(message)s")
log = logging.getLogger("envelo")


class Boundary:
    """Single ODD boundary with min/max/hard-limit enforcement."""
    def __init__(self, name, parameter=None, min_value=None, max_value=None,
                 hard_limit=None, unit="", tolerance=0):
        self.name = name
        self.parameter = parameter or name
        self.min_value = float(min_value) if min_value is not None else None
        self.max_value = float(max_value) if max_value is not None else None
        self.hard_limit = float(hard_limit) if hard_limit is not None else None
        self.unit = unit
        self.tolerance = float(tolerance) if tolerance else 0

    def check(self, value):
        v = float(value)
        if self.hard_limit is not None and v > self.hard_limit:
            return False, f"{self.name}={v}{self.unit} exceeds hard limit {self.hard_limit}{self.unit}"
        if self.min_value is not None and v < self.min_value - self.tolerance:
            return False, f"{self.name}={v}{self.unit} below min {self.min_value}{self.unit}"
        if self.max_value is not None and v > self.max_value + self.tolerance:
            return False, f"{self.name}={v}{self.unit} above max {self.max_value}{self.unit}"
        return True, None


class EnveloAgent:
    """
    Production ENVELO agent with server-synced boundaries,
    background telemetry, heartbeat, and graceful shutdown.
    """
    def __init__(self):
        self.client = httpx.Client(
            base_url=API_ENDPOINT,
            headers={"Authorization": f"Bearer {API_KEY}"},
            timeout=15,
        )
        self.session_id = uuid.uuid4().hex
        self.boundaries = {}
        self.telemetry_buffer = []
        self.stats = {"pass": 0, "block": 0}
        self.running = False
        self._threads = []

    #  lifecycle 

    def start(self):
        log.info("Starting ENVELO Agent v2.0.0")
        log.info(f"  System:      {SYSTEM_NAME}")
        log.info(f"  Certificate: {CERTIFICATE}")
        log.info(f"  Endpoint:    {API_ENDPOINT}")

        # 1. Fetch approved boundaries from server
        try:
            res = self.client.get("/api/envelo/boundaries/config")
            if res.status_code == 200:
                cfg = res.json()
                for b in cfg.get("numeric_boundaries", []):
                    self.boundaries[b.get("parameter", b["name"])] = Boundary(**b)
                log.info(f"  Boundaries:  {len(self.boundaries)} loaded from server")
            else:
                log.warning(f"  Boundaries:  server returned {res.status_code}, using local")
        except Exception as e:
            log.warning(f"  Boundaries:  fetch failed ({e}), using local")

        # 2. Register session
        try:
            self.client.post("/api/envelo/sessions", json={
                "certificate_id": CERTIFICATE,
                "session_id": self.session_id,
                "started_at": datetime.now(timezone.utc).isoformat(),
                "agent_version": "2.0.0",
                "system_name": SYSTEM_NAME,
                "boundaries": [
                    {"name": b.name, "min": b.min_value, "max": b.max_value}
                    for b in self.boundaries.values()
                ],
            })
            log.info(f"  Session:     {self.session_id[:16]}...")
        except Exception as e:
            log.warning(f"  Session registration failed: {e}")

        self.running = True

        # 3. Background threads
        for target in [self._heartbeat_loop, self._flush_loop]:
            t = threading.Thread(target=target, daemon=True)
            t.start()
            self._threads.append(t)

        log.info("  Status:       RUNNING")
        return self

    def shutdown(self):
        log.info("Shutting down...")
        self.running = False
        self._flush_telemetry()
        try:
            self.client.post(f"/api/envelo/sessions/{self.session_id}/end", json={
                "ended_at": datetime.now(timezone.utc).isoformat(),
                "final_stats": {
                    "pass_count": self.stats["pass"],
                    "block_count": self.stats["block"],
                },
            })
        except:
            pass
        self.client.close()
        log.info(f"Done. {self.stats['pass']} passed, {self.stats['block']} blocked.")

    #  boundary management 

    def add_boundary(self, name, min_value=None, max_value=None, unit="", tolerance=0):
        self.boundaries[name] = Boundary(
            name=name, min_value=min_value, max_value=max_value,
            unit=unit, tolerance=tolerance,
        )
        log.info(f"  + {name}: {min_value} to {max_value} {unit}")

    #  enforcement 

    def check(self, parameter, value):
        """Check one parameter. Returns (passed: bool, message: str|None)."""
        if parameter not in self.boundaries:
            return True, None
        return self.boundaries[parameter].check(value)

    def enforce_params(self, **params):
        """Check all params. Returns (all_passed, violations_list)."""
        violations = []
        evals = []
        for param, value in params.items():
            passed, msg = self.check(param, value)
            evals.append({"boundary": param, "passed": passed})
            if not passed:
                violations.append({"boundary": param, "value": value, "message": msg})

        result = "PASS" if not violations else "BLOCK"
        self.telemetry_buffer.append({
            "timestamp": datetime.now(timezone.utc).isoformat(),
            "action_id": uuid.uuid4().hex[:8],
            "action_type": "boundary_check",
            "result": result,
            "parameters": {k: v for k, v in params.items()},
            "boundary_evaluations": evals,
        })

        if violations:
            self.stats["block"] += 1
            for v in violations:
                log.warning(f"VIOLATION: {v['message']}")
            return False, violations
        self.stats["pass"] += 1
        return True, []

    def enforce(self, func):
        """Decorator  blocks execution if any kwarg violates a boundary."""
        @wraps(func)
        def wrapper(*args, **kwargs):
            passed, violations = self.enforce_params(**kwargs)
            if not passed:
                raise RuntimeError(f"ENVELO BLOCK: {violations[0]['message']}")
            return func(*args, **kwargs)
        return wrapper

    #  background loops 

    def _heartbeat_loop(self):
        while self.running:
            try:
                self.client.post("/api/envelo/heartbeat", json={
                    "session_id": self.session_id,
                    "certificate_id": CERTIFICATE,
                    "timestamp": datetime.now(timezone.utc).isoformat(),
                    "stats": self.stats,
                })
            except:
                pass
            time.sleep(30)

    def _flush_loop(self):
        while self.running:
            time.sleep(10)
            self._flush_telemetry()

    def _flush_telemetry(self):
        if not self.telemetry_buffer:
            return
        batch, self.telemetry_buffer = self.telemetry_buffer[:], []
        try:
            self.client.post("/api/envelo/telemetry", json={
                "certificate_id": CERTIFICATE,
                "session_id": self.session_id,
                "records": batch,
                "stats": {"pass_count": self.stats["pass"], "block_count": self.stats["block"]},
            })
        except Exception as e:
            log.warning(f"Telemetry flush failed: {e}")
            self.telemetry_buffer = batch + self.telemetry_buffer


#  global instance 
agent = EnveloAgent()

def _shutdown(sig, frame):
    agent.shutdown()
    sys.exit(0)

signal.signal(signal.SIGINT, _shutdown)
signal.signal(signal.SIGTERM, _shutdown)


if __name__ == "__main__":
    print()
    print("${""+"".repeat(59)+""}")
    print("  ENVELO Agent  Sentinel Authority                         ")
    print("  Enforced Non-Violable Execution-Limit Override              ")
    print("${""+"".repeat(59)+""}")
    print()

    agent.start()
    print()
    print("Agent running. Ctrl+C to stop.")
    print()
    print("" * 60)
    print("INTEGRATION:")
    print()
    print("  from envelo_agent import agent")
    print("  agent.start()")
    print()
    print("  @agent.enforce")
    print("  def my_action(speed=0, temperature=0):")
    print("      # your autonomous logic")
    print("      pass")
    print()
    print("  # Or check directly:")
    print("  passed, violations = agent.enforce_params(speed=50, temp=25)")
    print("" * 60)
    print()

    try:
        while agent.running:
            time.sleep(1)
    except KeyboardInterrupt:
        agent.shutdown()
`}function fl({session:t}){var a;if(!t)return null;const o=t.pass_count+t.block_count>0?(t.pass_count/(t.pass_count+t.block_count)*100).toFixed(1):0;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:500,color:"#fff"},children:(t.pass_count||0)+(t.block_count||0)}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Total Actions"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(92,214,133,0.1)",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:500,color:"#5CD685"},children:t.pass_count||0}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Passed"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(214,92,92,0.1)",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:500,color:"#D65C5C"},children:t.block_count||0}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Blocked"})]}),e.jsxs("div",{style:{padding:"16px",background:o>=95?"rgba(92,214,133,0.1)":"rgba(214,92,92,0.1)",borderRadius:"8px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"28px",fontWeight:500,color:o>=95?"#5CD685":"#D65C5C"},children:[o,"%"]}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Pass Rate"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"SESSION ID"}),e.jsx("div",{style:{fontFamily:"monospace",color:"#ccc"},children:t.session_id})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"CERTIFICATE"}),e.jsx("div",{style:{color:"#ccc"},children:t.certificate_id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"STARTED"}),e.jsx("div",{style:{color:"#ccc"},children:t.started_at?new Date(t.started_at).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"STATUS"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",background:t.status==="active"?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.1)",color:t.status==="active"?"#5CD685":"#888"},children:(a=t.status)==null?void 0:a.toUpperCase()})]})]})]})}function hl({sessionId:t}){const[o,a]=h.useState([]),[i,r]=h.useState(!0);return h.useEffect(()=>{t&&E.get(`/api/envelo/admin/sessions/${t}/telemetry`).then(s=>a(s.data.records||[])).catch(console.error).finally(()=>r(!1))},[t]),i?e.jsx("div",{style:{color:"#888",padding:"12px"},children:"Loading..."}):o.length?e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Time"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Action"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Result"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Params"})]})}),e.jsx("tbody",{children:o.map((s,l)=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("td",{style:{padding:"8px",fontFamily:"monospace",fontSize:"11px",color:"#aaa"},children:s.timestamp?new Date(s.timestamp).toLocaleTimeString():"-"}),e.jsx("td",{style:{padding:"8px",color:"#fff"},children:s.action_type}),e.jsx("td",{style:{padding:"8px"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:400,background:s.result==="PASS"?"rgba(92,214,133,0.2)":"rgba(214,92,92,0.2)",color:s.result==="PASS"?"#5CD685":"#D65C5C"},children:s.result})}),e.jsx("td",{style:{padding:"8px",color:"#666",fontFamily:"monospace",fontSize:"10px"},children:JSON.stringify(s.parameters||{})})]},l))})]})}):e.jsx("div",{style:{color:"#888",padding:"12px"},children:"No telemetry records"})}function yl({onKeyGenerated:t}){const[o,a]=h.useState([]),[i,r]=h.useState(!0),[s,l]=h.useState(""),[c,d]=h.useState(null);h.useEffect(()=>{c!=null&&c.key&&(t==null||t(c.key))},[c]),h.useEffect(()=>{x()},[]);const p=C=>{const w=y.find(N=>N.id===A),u=pa({apiEndpoint:Ue,apiKey:C,certificateNumber:(w==null?void 0:w.certificate_number)||"PENDING",systemName:(w==null?void 0:w.system_name)||"My System",organizationName:(w==null?void 0:w.organization_name)||""}),b=new Blob([u],{type:"text/plain"}),_=URL.createObjectURL(b),k=document.createElement("a");k.href=_,k.download="envelo_agent.py",document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(_)},x=async()=>{try{const C=await E.get("/api/apikeys/");a(C.data)}catch(C){console.error("Failed to load API keys:",C)}r(!1)},[y,j]=h.useState([]),[A,m]=h.useState(null);h.useEffect(()=>{E.get("/api/certificates/").then(C=>{const w=(C.data||[]).filter(u=>u.state==="conformant"||u.state==="active"||u.state==="issued");j(w),w.length>0&&m(w[0].id)}).catch(()=>{})},[]);const S=async()=>{if(s.trim())try{const C=await E.post("/api/apikeys/generate",{name:s,certificate_id:A});d(C.data),l(""),x()}catch(C){console.error("Failed to generate key:",C)}},f=async C=>{if(await confirm({title:"Revoke Key",message:"Revoke this API key? This cannot be undone.",danger:!0,confirmLabel:"Revoke"}))try{await E.delete(`/api/apikeys/${C}`),x()}catch(w){console.error("Failed to revoke key:",w)}},v=()=>{c!=null&&c.key&&navigator.clipboard.writeText(c.key)};return i?e.jsx("div",{style:{color:n.textTertiary},children:"Loading..."}):e.jsxs("div",{children:[c&&e.jsxs("div",{style:{background:"rgba(92,214,133,0.1)",border:"1px solid rgba(157,140,207,0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.accentGreen,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:" New API Key Generated"}),e.jsx("div",{style:{background:"rgba(0,0,0,0.3)",padding:"12px",borderRadius:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:n.textPrimary,wordBreak:"break-all",marginBottom:"12px"},children:c.key}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:v,style:{padding:"8px 16px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",cursor:"pointer"},children:"Copy to Clipboard"}),e.jsx("button",{onClick:()=>d(null),style:{padding:"8px 16px",background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textSecondary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",cursor:"pointer"},children:"Dismiss"})]}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"12px",marginTop:"12px"},children:" Save this key now. You won't be able to see it again."}),e.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"rgba(91,75,138,0.2)",border:"1px solid rgba(91,75,138,0.3)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.purpleBright,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Next Step"}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",marginBottom:"12px"},children:"Download the ENVELO Agent pre-configured with your credentials:"}),e.jsxs("button",{onClick:()=>p(c.key),style:{padding:"12px 24px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ot,{size:16})," Download ENVELO Agent"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[e.jsx("input",{type:"text",placeholder:"Key name (e.g., Production)",value:s,onChange:C=>l(C.target.value),style:{flex:1,padding:"10px 14px",background:"rgba(0,0,0,0.3)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textPrimary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"}}),e.jsx("button",{onClick:S,disabled:!s.trim(),style:{padding:"10px 20px",background:s.trim()?n.purplePrimary:"rgba(0,0,0,0.2)",border:`1px solid ${s.trim()?n.purpleBright:n.borderGlass}`,borderRadius:"6px",color:s.trim()?"#fff":n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:s.trim()?"pointer":"not-allowed"},children:"Generate Key"})]}),o.length>0?e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginBottom:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:"Your API Keys"}),o.map(C=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"rgba(0,0,0,0.2)",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",marginBottom:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:n.textPrimary},children:C.name}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary,marginTop:"4px"},children:[C.key_prefix,""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:C.last_used_at?`Last used: ${new Date(C.last_used_at).toLocaleDateString()}`:"Never used"}),e.jsx("button",{onClick:()=>f(C.id),style:{padding:"6px 12px",background:"rgba(255,100,100,0.1)",border:"1px solid rgba(255,100,100,0.3)",borderRadius:"4px",color:"#ff6464",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer"},children:"Revoke"})]})]},C.id))]}):e.jsx("p",{style:{color:n.textTertiary,fontSize:"14px"},children:"No API keys yet. Generate one to connect the ENVELO Agent."})]})}function _l({certificateNumber:t,initialBoundaries:o,onSave:a}){const i=ye(),[r,s]=h.useState(!1),[l,c]=h.useState(!1),d=b=>{const _=((b==null?void 0:b.numeric_boundaries)||[]).map(T=>({name:T.name||"",parameter:T.parameter||"",min_value:T.min_value??"",max_value:T.max_value??"",hard_limit:T.hard_limit??"",unit:T.unit||"",tolerance:T.tolerance??""})),k=((b==null?void 0:b.geographic_boundaries)||[]).map(T=>{var $,z;return{name:T.name||"",boundary_type:T.boundary_type||"circle",lat:(($=T.center)==null?void 0:$.lat)??T.lat??"",lon:((z=T.center)==null?void 0:z.lon)??T.lon??"",radius_meters:T.radius_meters??"",altitude_min:T.altitude_min??"",altitude_max:T.altitude_max??""}}),N=((b==null?void 0:b.time_boundaries)||[]).map(T=>({name:T.name||"",start_hour:String(T.allowed_hours_start??T.start_hour??6),end_hour:String(T.allowed_hours_end??T.end_hour??22),timezone:T.timezone||"America/Chicago",days:T.allowed_days||T.days||[0,1,2,3,4,5,6]})),U=((b==null?void 0:b.state_boundaries)||[]).map(T=>({name:T.name||"",parameter:T.parameter||"",allowed_values:Array.isArray(T.allowed_values)?T.allowed_values.join(", "):T.allowed_values||"",forbidden_values:Array.isArray(T.forbidden_values)?T.forbidden_values.join(", "):T.forbidden_values||""}));return{numeric:_.length?_:[{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}],geo:k.length?k:[{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}],time:N.length?N:[{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}],state:U.length?U:[{name:"",parameter:"",allowed_values:"",forbidden_values:""}]}},[p,x]=h.useState(()=>d(o)),y=(b,_,k,N)=>{x(U=>{const T=[...U[b]];return T[_]={...T[_],[k]:N},{...U,[b]:T}}),c(!0)},j=(b,_)=>{x(k=>({...k,[b]:[...k[b],{..._}]})),c(!0)},A=(b,_)=>{x(k=>({...k,[b]:k[b].filter((N,U)=>U!==_)})),c(!0)},m=()=>({numeric_boundaries:p.numeric.filter(b=>b.name&&b.parameter).map(b=>({name:b.name,parameter:b.parameter,min_value:b.min_value!==""?parseFloat(b.min_value):null,max_value:b.max_value!==""?parseFloat(b.max_value):null,hard_limit:b.hard_limit!==""?parseFloat(b.hard_limit):null,unit:b.unit||null,tolerance:b.tolerance!==""?parseFloat(b.tolerance):0})),geographic_boundaries:p.geo.filter(b=>b.name&&b.lat&&b.lon).map(b=>({name:b.name,boundary_type:b.boundary_type,center:{lat:parseFloat(b.lat),lon:parseFloat(b.lon)},radius_meters:b.radius_meters?parseFloat(b.radius_meters):1e3,altitude_min:b.altitude_min!==""?parseFloat(b.altitude_min):null,altitude_max:b.altitude_max!==""?parseFloat(b.altitude_max):null})),time_boundaries:p.time.filter(b=>b.name).map(b=>({name:b.name,allowed_hours_start:parseInt(b.start_hour),allowed_hours_end:parseInt(b.end_hour),allowed_days:b.days,timezone:b.timezone})),state_boundaries:p.state.filter(b=>b.name&&b.parameter).map(b=>({name:b.name,parameter:b.parameter,allowed_values:b.allowed_values?b.allowed_values.split(",").map(_=>_.trim()).filter(Boolean):[],forbidden_values:b.forbidden_values?b.forbidden_values.split(",").map(_=>_.trim()).filter(Boolean):[]}))}),S=async()=>{s(!0);try{const b=m();await a(b),c(!1)}catch(b){i.show("Save failed: "+b.message,"error")}s(!1)},f={background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,color:n.textPrimary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",outline:"none"},v=b=>e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px",marginTop:"20px"},children:b}),C=b=>e.jsx("p",{style:{color:n.textTertiary,fontSize:"11px",marginBottom:"8px"},children:b}),w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=p.numeric.filter(b=>b.name).length+p.geo.filter(b=>b.name).length+p.time.filter(b=>b.name).length+p.state.filter(b=>b.name).length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"12px 16px",background:l?"rgba(214,160,92,0.08)":"rgba(92,214,133,0.05)",border:"1px solid "+(l?"rgba(214,160,92,0.2)":"rgba(92,214,133,0.15)"),borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[u," boundaries defined"]}),l&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.accentAmber,letterSpacing:"1px",textTransform:"uppercase"},children:" Unsaved changes"})]}),e.jsx("button",{onClick:S,disabled:r||!l,style:{padding:"8px 24px",borderRadius:"8px",background:l?n.purplePrimary:"rgba(255,255,255,0.05)",border:"1px solid "+(l?n.purpleBright:n.borderGlass),color:l?"#fff":n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:l?"pointer":"default",opacity:r?.6:1},children:r?"Saving...":l?"Save Boundaries":"Saved "})]}),v("Numeric Boundaries"),C("Measurable limits: speed, temperature, altitude, weight, pressure, distance."),p.numeric.map((b,_)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid "+n.borderGlass,borderRadius:"8px",padding:"12px",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:b.name,onChange:k=>y("numeric",_,"name",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Name (e.g., Speed Limit)"}),e.jsx("input",{type:"text",value:b.parameter,onChange:k=>y("numeric",_,"parameter",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Parameter (e.g., speed)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:[e.jsx("input",{type:"number",value:b.min_value,onChange:k=>y("numeric",_,"min_value",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Min"}),e.jsx("input",{type:"number",value:b.max_value,onChange:k=>y("numeric",_,"max_value",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Max"}),e.jsx("input",{type:"number",value:b.hard_limit,onChange:k=>y("numeric",_,"hard_limit",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Hard limit"}),e.jsx("input",{type:"text",value:b.unit,onChange:k=>y("numeric",_,"unit",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Unit"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:b.tolerance,onChange:k=>y("numeric",_,"tolerance",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f,flex:1},placeholder:"Tol"}),p.numeric.length>1&&e.jsx("button",{onClick:()=>A("numeric",_),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},_)),e.jsx("button",{onClick:()=>j("numeric",{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}),style:{width:"100%",marginBottom:"4px",background:"transparent",border:"1px dashed "+n.borderGlass,borderRadius:"6px",padding:"8px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px"},children:"+ Add Numeric Boundary"}),v("Geographic Boundaries"),C("Physical operating zone  center coordinates + radius."),p.geo.map((b,_)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid "+n.borderGlass,borderRadius:"8px",padding:"12px",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:b.name,onChange:k=>y("geo",_,"name",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Name (e.g., Operating Zone)"}),e.jsxs("select",{value:b.boundary_type,onChange:k=>y("geo",_,"boundary_type",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},children:[e.jsx("option",{value:"circle",children:"Radius from Point"}),e.jsx("option",{value:"polygon",children:"Polygon (advanced)"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:[e.jsx("input",{type:"number",step:"any",value:b.lat,onChange:k=>y("geo",_,"lat",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:b.lon,onChange:k=>y("geo",_,"lon",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Longitude"}),e.jsx("input",{type:"number",value:b.radius_meters,onChange:k=>y("geo",_,"radius_meters",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Radius (m)"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:b.altitude_max,onChange:k=>y("geo",_,"altitude_max",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f,flex:1},placeholder:"Alt max (m)"}),p.geo.length>1&&e.jsx("button",{onClick:()=>A("geo",_),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},_)),e.jsx("button",{onClick:()=>j("geo",{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}),style:{width:"100%",marginBottom:"4px",background:"transparent",border:"1px dashed "+n.borderGlass,borderRadius:"6px",padding:"8px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px"},children:"+ Add Geographic Boundary"}),v("Time Boundaries"),C("Allowed operating hours and days of week."),p.time.map((b,_)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid "+n.borderGlass,borderRadius:"8px",padding:"12px",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:b.name,onChange:k=>y("time",_,"name",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Name"}),e.jsx("input",{type:"number",min:"0",max:"23",value:b.start_hour,onChange:k=>y("time",_,"start_hour",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Start hour"}),e.jsx("input",{type:"number",min:"0",max:"23",value:b.end_hour,onChange:k=>y("time",_,"end_hour",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"End hour"}),e.jsxs("select",{value:b.timezone,onChange:k=>y("time",_,"timezone",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},children:[e.jsx("option",{value:"America/New_York",children:"Eastern"}),e.jsx("option",{value:"America/Chicago",children:"Central"}),e.jsx("option",{value:"America/Denver",children:"Mountain"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Europe/London",children:"UK"}),e.jsx("option",{value:"Europe/Berlin",children:"CET"}),e.jsx("option",{value:"Asia/Tokyo",children:"JST"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{color:n.textTertiary,fontSize:"11px",marginRight:"4px"},children:"Days:"}),w.map((k,N)=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",cursor:"pointer",fontSize:"11px",color:b.days.includes(N)?n.purpleBright:n.textTertiary},children:[e.jsx("input",{type:"checkbox",checked:b.days.includes(N),onChange:U=>{const T=U.target.checked?[...b.days,N].sort():b.days.filter($=>$!==N);y("time",_,"days",T)},style:{accentColor:n.purpleBright,width:"12px",height:"12px"}}),k]},N)),p.time.length>1&&e.jsx("button",{onClick:()=>A("time",_),style:{marginLeft:"auto",background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"2px 8px",fontSize:"14px"},children:""})]})]},_)),e.jsx("button",{onClick:()=>j("time",{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}),style:{width:"100%",marginBottom:"4px",background:"transparent",border:"1px dashed "+n.borderGlass,borderRadius:"6px",padding:"8px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px"},children:"+ Add Time Boundary"}),v("State Boundaries"),C("Allowed/forbidden operational states and modes."),p.state.map((b,_)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid "+n.borderGlass,borderRadius:"8px",padding:"12px",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:b.name,onChange:k=>y("state",_,"name",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Name (e.g., Mode Check)"}),e.jsx("input",{type:"text",value:b.parameter,onChange:k=>y("state",_,"parameter",k.target.value),className:"px-3 py-2 rounded-lg",style:{...f},placeholder:"Parameter (e.g., mode)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:b.allowed_values,onChange:k=>y("state",_,"allowed_values",k.target.value),className:"w-full px-3 py-2 rounded-lg",style:{...f},placeholder:"Allowed (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:n.textTertiary},children:"e.g., autonomous, semi-autonomous"})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("input",{type:"text",value:b.forbidden_values,onChange:k=>y("state",_,"forbidden_values",k.target.value),className:"w-full px-3 py-2 rounded-lg",style:{...f},placeholder:"Forbidden (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:n.textTertiary},children:"e.g., manual_override, degraded"})]}),p.state.length>1&&e.jsx("button",{onClick:()=>A("state",_),style:{background:"rgba(214,92,92,0.15)",border:"none",borderRadius:"6px",color:n.accentRed,cursor:"pointer",padding:"0 8px",fontSize:"14px",alignSelf:"flex-start"},children:""})]})]})]},_)),e.jsx("button",{onClick:()=>j("state",{name:"",parameter:"",allowed_values:"",forbidden_values:""}),style:{width:"100%",marginBottom:"4px",background:"transparent",border:"1px dashed "+n.borderGlass,borderRadius:"6px",padding:"8px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px"},children:"+ Add State Boundary"})]})}function bl(){var $;const t=ye(),o=Ce(),[a,i]=h.useState(null),[r,s]=h.useState([]),[l,c]=h.useState([]),[d,p]=h.useState([]),[x,y]=h.useState(0),[j,A]=h.useState({}),[m,S]=h.useState(null),[f,v]=h.useState(null),[C,w]=h.useState("monitoring"),[u,b]=h.useState(!0);if(h.useEffect(()=>{const z=async()=>{try{const[g,P,I,q]=await Promise.all([E.get("/api/envelo/stats").catch(()=>({data:null})),E.get("/api/envelo/admin/sessions").catch(()=>({data:{sessions:[]}})),E.get("/api/certificates/").catch(()=>({data:[]})),E.get("/api/applications/").catch(()=>({data:[]}))]);i(g.data),s(P.data.sessions||[]),c(I.data||[]),p(q.data.applications||q.data||[])}catch(g){console.error(g)}b(!1)};z();const L=setInterval(z,3e4);return()=>clearInterval(L)},[]),u)return e.jsx("div",{style:{color:n.textTertiary,padding:"40px",textAlign:"center"},children:e.jsx(Me,{size:24,style:{animation:"spin 1s linear infinite"}})});const _=r.filter(z=>z.status==="active"),k=r.reduce((z,L)=>z+(L.block_count||0),0),N=l.filter(z=>z.state==="conformant"||z.state==="active"||z.state==="issued"),U=d.filter(z=>z.state==="approved"||z.state==="testing"),T=z=>{const L=pa({apiEndpoint:Ue,apiKey:"YOUR_API_KEY",certificateNumber:z.certificate_number,systemName:z.system_name||"Unknown",organizationName:z.organization_name||"Unknown"}),g=new Blob([L],{type:"text/plain"}),P=URL.createObjectURL(g),I=document.createElement("a");I.href=P,I.download=`envelo_agent_${z.certificate_number}.py`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(P)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ae,{label:" Admin Console",title:"ENVELO Management",description:"Monitor, configure, and manage all customer systems"}),e.jsx("div",{style:{display:"flex",gap:"8px",borderBottom:`1px solid ${n.borderGlass}`,paddingBottom:"16px"},children:[{id:"monitoring",label:"Live Monitoring"},{id:"customers",label:"Customer Systems"},{id:"configure",label:"Configure Boundaries"}].map(z=>e.jsx("button",{onClick:()=>w(z.id),style:{padding:"10px 20px",background:C===z.id?n.purplePrimary:"transparent",border:`1px solid ${C===z.id?n.purpleBright:n.borderGlass}`,borderRadius:"8px",color:C===z.id?"#fff":n.textSecondary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer",transition:"all 0.2s"},children:z.label},z.id))}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Active Sessions"}),e.jsx("p",{style:{fontSize:"36px",fontWeight:200,color:n.accentGreen},children:_.length})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Attested Systems"}),e.jsx("p",{style:{fontSize:"36px",fontWeight:200,color:n.purpleBright},children:N.length})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"CAT-72 In Progress"}),e.jsx("p",{style:{fontSize:"36px",fontWeight:200,color:n.accentAmber},children:U.length})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Violations (Total)"}),e.jsx("p",{style:{fontSize:"36px",fontWeight:200,color:k>0?n.accentRed:n.accentGreen},children:k})]})]}),C==="monitoring"&&e.jsxs(e.Fragment,{children:[e.jsxs(Y,{glow:!0,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Active Sessions"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 12px",background:"rgba(92,214,133,0.15)",borderRadius:"20px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:n.accentGreen,boxShadow:`0 0 8px ${n.accentGreen}`,animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.accentGreen,textTransform:"uppercase"},children:"Live"})]})]}),r.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Certificate"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Status"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Pass"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Block"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:n.textTertiary,fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:r.map((z,L)=>e.jsxs("tr",{className:"sexy-row",style:{borderBottom:`1px solid ${n.borderGlass}`},children:[e.jsx("td",{style:{padding:"16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:z.certificate_id||"N/A"}),e.jsx("td",{style:{padding:"16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:z.status==="active"?n.accentGreen:n.textTertiary,boxShadow:z.status==="active"?`0 0 8px ${n.accentGreen}`:"none"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",textTransform:"uppercase",color:z.status==="active"?n.accentGreen:n.textTertiary},children:z.status})]})}),e.jsx("td",{style:{padding:"16px",color:n.accentGreen},children:z.pass_count||0}),e.jsx("td",{style:{padding:"16px",color:(z.block_count||0)>0?n.accentRed:n.textTertiary},children:z.block_count||0}),e.jsx("td",{style:{padding:"16px"},children:e.jsx("button",{onClick:()=>S(z),style:{padding:"6px 12px",background:"rgba(157,140,207,0.15)",border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:n.purpleBright,fontSize:"11px",cursor:"pointer"},children:"View Details"})})]},L))})]})}):e.jsx("p",{style:{color:n.textTertiary,textAlign:"center",padding:"40px"},children:"No sessions found."})]}),m&&e.jsxs(Y,{accent:"purple",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:["Session: ",($=m.session_id)==null?void 0:$.substring(0,16),"..."]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:async()=>{try{const z=await E.get(`/api/envelo/admin/sessions/${m.id}/report`,{responseType:"blob"}),L=window.URL.createObjectURL(new Blob([z.data])),g=document.createElement("a");g.href=L,g.download=`CAT72-Report-${m.session_id}.pdf`,g.click()}catch(z){t.show("Failed: "+z.message,"error")}},style:{padding:"8px 16px",background:n.purplePrimary,border:"none",borderRadius:"6px",color:"#fff",fontSize:"11px",cursor:"pointer"},children:"Download Report"}),e.jsx("button",{onClick:()=>S(null),style:{padding:"8px 16px",background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textTertiary,cursor:"pointer",fontSize:"11px"},children:" Close"})]})]}),e.jsx(fl,{session:m}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(hl,{sessionId:m.id})})]})]}),C==="customers"&&e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"20px"},children:"Attested Systems"}),N.length>0?e.jsx("div",{className:"space-y-4",children:N.map(z=>e.jsx("div",{style:{padding:"20px",background:"rgba(0,0,0,0.2)",border:`1px solid ${n.borderGlass}`,borderRadius:"12px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:500,color:n.textPrimary,margin:"0 0 4px 0"},children:z.system_name||"Unnamed"}),e.jsx("p",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"8px"},children:z.organization_name}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:n.purpleBright},children:z.certificate_number})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>{v(z),w("configure")},style:{padding:"8px 16px",background:"rgba(157,140,207,0.15)",border:`1px solid ${n.purpleBright}`,borderRadius:"6px",color:n.purpleBright,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(De,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:12})," Configure"]}),e.jsxs("button",{onClick:async()=>{var L,g;if(await o({title:"Provision Agent",message:`Provision and send ENVELO agent to ${z.organization_name}?`}))try{const P=await E.post("/api/apikeys/admin/provision",null,{params:{user_id:z.applicant_id,certificate_id:z.id,send_email:!0}});if(P.data.agent_code){const I=new Blob([P.data.agent_code],{type:"text/plain"}),q=URL.createObjectURL(I),W=document.createElement("a");W.href=q,W.download="envelo_agent.py",W.click(),URL.revokeObjectURL(q)}t.show("Agent provisioned successfully","success")}catch(P){t.show("Failed: "+(((g=(L=P.response)==null?void 0:L.data)==null?void 0:g.detail)||P.message),"error")}},style:{padding:"8px 16px",background:n.accentGreen,border:`1px solid ${n.accentGreen}`,borderRadius:"6px",color:"#fff",fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Kt,{size:12})," Provision & Send"]}),e.jsxs("button",{onClick:()=>T(z),style:{padding:"8px 16px",background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textSecondary,fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ot,{size:12})," Download Only"]})]})]})},z.id))}):e.jsx("p",{style:{color:n.textTertiary,textAlign:"center",padding:"24px"},children:"No attested systems yet."})]}),U.length>0&&e.jsxs(Y,{accent:"amber",children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.accentAmber,marginBottom:"20px"},children:"CAT-72 Testing In Progress"}),e.jsx("div",{className:"space-y-4",children:U.map(z=>e.jsx("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:`1px solid ${n.borderGlass}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",color:n.textPrimary,marginBottom:"4px"},children:z.system_name}),e.jsx("p",{style:{fontSize:"12px",color:n.textSecondary},children:z.organization_name})]}),e.jsx("span",{style:{padding:"4px 12px",background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",borderRadius:"20px",fontSize:"10px",color:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase"},children:z.cat72_started?"In Progress":"Ready"})]})},z.id))})]}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"API Key Management"}),e.jsx(yl,{})]})]}),C==="configure"&&e.jsx(e.Fragment,{children:f?e.jsxs(Y,{glow:!0,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.purpleBright,marginBottom:"8px"},children:"Configuring Boundaries"}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:200,margin:"0 0 4px 0"},children:f.system_name}),e.jsxs("p",{style:{color:n.textSecondary},children:[f.organization_name,"  ",f.certificate_number]})]}),e.jsx("button",{onClick:()=>v(null),style:{padding:"8px 16px",background:"transparent",border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:n.textTertiary,cursor:"pointer",fontSize:"11px"},children:" Back to List"})]}),e.jsx(_l,{certificateNumber:f.certificate_number,initialBoundaries:f.envelope_definition||{},onSave:async z=>{try{await E.put(`/api/envelo/boundaries/config/boundaries?certificate_number=${f.certificate_number}`,z),t.show("Boundaries saved","success")}catch(L){t.show("Failed to save: "+L.message,"error")}}})]}):e.jsx(Y,{children:e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx(De,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:48,style:{color:n.textTertiary,margin:"0 auto 16px"}}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:200,marginBottom:"8px"},children:"Select a System to Configure"}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"24px"},children:"Choose a system from the Customer Systems tab to configure its boundaries."}),e.jsx("button",{onClick:()=>w("customers"),style:{padding:"12px 24px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,borderRadius:"8px",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"View Customer Systems"})]})})})]})}function vl(){var g;const[t,o]=h.useState(null),[a,i]=h.useState(!1),[r,s]=h.useState([]),[l,c]=h.useState([]),[d,p]=h.useState([]),[x,y]=h.useState([]),[j,A]=h.useState(!0),[m,S]=h.useState(!1),f=ye(),{user:v}=le();h.useEffect(()=>{(async()=>{try{const[I,q,W,J]=await Promise.all([E.get("/api/certificates/").catch(()=>({data:[]})),E.get("/api/applications/").catch(()=>({data:[]})),E.get("/api/envelo/sessions").catch(()=>({data:{sessions:[]}})),E.get("/api/apikeys/").catch(()=>({data:[]}))]);s(I.data||[]),c(q.data||[]),p(W.data.sessions||[]),y(J.data||[])}catch(I){console.error(I)}A(!1)})()},[]);const C=(Array.isArray(r)?r:[]).filter(P=>P.state==="conformant"||P.state==="active"||P.state==="issued"),w=(Array.isArray(l)?l:[]).filter(P=>P.state==="approved"||P.state==="testing"),u=[...w,...C],b=C.length>0||w.length>0,_=d.filter(P=>P.status==="active"),k=_.length>0,N=async()=>{var P,I,q;i(!0);try{const W=u[0],J=(W==null?void 0:W.certificate_id)||null,M="deploy-"+new Date().toISOString().split("T")[0],O=await E.post("/api/apikeys/generate",{name:M,certificate_id:J});(P=O.data)!=null&&P.key&&o(O.data.key)}catch(W){f.show("Failed to generate key: "+(((q=(I=W.response)==null?void 0:I.data)==null?void 0:q.detail)||W.message),"error")}i(!1)},U=()=>{const P=u[0];return(P==null?void 0:P.certificate_number)||(P==null?void 0:P.application_number)||"PENDING"},T=()=>t?'curl -sSL "'+Ue+"/api/deploy/"+U()+"?key="+t+'" | bash':null,$=()=>{const P=T();P&&(navigator.clipboard.writeText(P),S(!0),setTimeout(()=>S(!1),3e3))};if(j)return e.jsx("div",{style:{color:n.textTertiary,padding:"40px",textAlign:"center"},children:e.jsx(Me,{size:24,style:{animation:"spin 1s linear infinite"}})});if(!b)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ae,{label:"ENVELO Agent",title:"Application Required"}),e.jsx(Y,{children:e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx(De,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:48,style:{color:n.textTertiary,margin:"0 auto 16px"}}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"24px",fontWeight:200,marginBottom:"12px"},children:"Pending Approval"}),e.jsx("p",{style:{color:n.textSecondary,maxWidth:"400px",margin:"0 auto"},children:"Your application is being reviewed. Once approved, you'll deploy the ENVELO agent with a single command."})]})})]});if(k)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ae,{label:"ENVELO Agent",title:"Active",description:"Your agent is connected and enforcing boundaries"}),C.map(P=>{const I=d.find(W=>W.certificate_id===P.certificate_number),q=I&&I.status==="active";return e.jsxs(Y,{glow:q,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:500,color:n.textPrimary,margin:"0 0 8px 0"},children:P.system_name||"System"}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:n.purpleBright,marginBottom:"4px"},children:P.certificate_number}),e.jsx("p",{style:{fontSize:"12px",color:n.textTertiary},children:"Attested "+(P.issued_at?new Date(P.issued_at).toLocaleDateString():"N/A")})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"rgba(92,214,133,0.15)",borderRadius:"20px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.accentGreen,boxShadow:"0 0 8px "+n.accentGreen,animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",textTransform:"uppercase",color:n.accentGreen},children:"ENVELO Active"})]})]}),I&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid "+n.borderGlass},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:n.accentGreen},children:I.uptime||"0h"}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Uptime"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:n.purpleBright},children:I.record_count||0}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Telemetry"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:(I.violations||0)>0?n.accentRed:n.accentGreen},children:I.violations||0}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Violations"})]})]})]},P.id)}),w.filter(P=>!C.some(I=>I.application_id===P.id)).map(P=>{const I=_[0];return e.jsxs(Y,{glow:!0,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:500,color:n.textPrimary,margin:"0 0 4px 0"},children:P.system_name}),e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:n.accentAmber},children:[P.application_number,"  CAT-72 Testing"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"rgba(92,214,133,0.15)",borderRadius:"20px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.accentGreen,boxShadow:"0 0 8px "+n.accentGreen,animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",textTransform:"uppercase",color:n.accentGreen},children:"ENVELO Active"})]})]}),I&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid "+n.borderGlass},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:n.accentGreen},children:I.pass_count||0}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Passed"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:(I.block_count||0)>0?n.accentRed:n.accentGreen},children:I.block_count||0}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Blocked"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"28px",fontWeight:200,color:n.purpleBright},children:(I.pass_count||0)+(I.block_count||0)}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary},children:"Total"})]})]})]},P.id)}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"Agent Management"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px"},children:[e.jsx("p",{style:{fontWeight:500,color:n.textPrimary,marginBottom:"4px",fontSize:"14px"},children:"View Logs"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:n.textSecondary,padding:"8px",background:"rgba(0,0,0,0.3)",borderRadius:"6px",marginTop:"8px"},children:"cat ~/.envelo/envelo.log"})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px"},children:[e.jsx("p",{style:{fontWeight:500,color:n.textPrimary,marginBottom:"4px",fontSize:"14px"},children:"Restart Agent"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:n.textSecondary,padding:"8px",background:"rgba(0,0,0,0.3)",borderRadius:"6px",marginTop:"8px"},children:"kill $(cat ~/.envelo/envelo.pid) && python3 ~/.envelo/envelo_agent.py &"})]})]})]})]});const z=((g=u[0])==null?void 0:g.system_name)||"Your System",L=T();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ae,{label:"ENVELO Agent",title:"Deploy",description:"Ready to deploy "+z}),e.jsx(Y,{glow:!0,children:e.jsx("div",{style:{textAlign:"center",padding:"40px 20px"},children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"rgba(92,214,133,0.1)",borderRadius:"20px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.accentGreen}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.accentGreen,textTransform:"uppercase",letterSpacing:"1px"},children:"Ready to Deploy"})]}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"24px",fontWeight:200,color:n.textPrimary,margin:"0 0 8px 0"},children:"Paste in your terminal"})]}),e.jsxs("div",{style:{maxWidth:"700px",margin:"0 auto",textAlign:"left"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.5)",borderRadius:"12px",border:"1px solid "+n.purpleBright,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid "+n.borderGlass},children:[e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#ff5f57"}}),e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#febc2e"}}),e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#28c840"}})]}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary},children:"Terminal"}),e.jsx("button",{onClick:$,style:{padding:"4px 16px",background:m?"rgba(92,214,133,0.2)":n.purplePrimary,border:"1px solid "+(m?n.accentGreen:n.purpleBright),borderRadius:"6px",color:m?n.accentGreen:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:m?" Copied":"Copy"})]}),e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",lineHeight:"1.6",overflowX:"auto",whiteSpace:"nowrap"},children:[e.jsx("span",{style:{color:n.accentGreen},children:"$"})," ",e.jsx("span",{style:{color:n.textPrimary},children:L})]})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",border:"1px solid "+n.borderGlass},children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"12px"},children:"What happens"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",textAlign:"center"},children:[{icon:"",label:"Installs"},{icon:"",label:"Configures"},{icon:"",label:"Starts"},{icon:"",label:"Auto-restarts"}].map((P,I)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",marginBottom:"4px"},children:P.icon}),e.jsx("div",{style:{fontSize:"11px",color:n.textSecondary},children:P.label})]},I))})]}),e.jsx("p",{style:{color:n.accentAmber,fontSize:"12px",marginTop:"16px",textAlign:"center"},children:" This command contains your API key. Don't share it."}),e.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:e.jsx("button",{onClick:()=>o(null),style:{background:"transparent",border:"none",color:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",cursor:"pointer",textDecoration:"underline"},children:"Generate new key"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:56,style:{color:n.purpleBright,margin:"0 auto 20px"}}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"28px",fontWeight:200,marginBottom:"12px",color:n.textPrimary},children:"One Command. That's It."}),e.jsx("p",{style:{color:n.textSecondary,maxWidth:"440px",margin:"0 auto 32px",lineHeight:"1.6"},children:"Generate your deploy command. Paste it in a terminal. The ENVELO agent installs, configures your approved boundaries, starts running, and auto-restarts on reboot."}),e.jsx("button",{onClick:N,disabled:a,style:{padding:"16px 48px",background:"linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)",border:"1px solid "+n.purpleBright,borderRadius:"12px",color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",letterSpacing:"1px",cursor:a?"wait":"pointer",opacity:a?.7:1,boxShadow:"0 4px 24px rgba(91,75,138,0.3)",transition:"all 0.2s"},children:a?" Generating...":" Generate Deploy Command"})]})})})]})}function wl(){const{user:t}=le();return(t==null?void 0:t.role)==="admin"?e.jsx(bl,{}):e.jsx(vl,{})}function Sl(){var L;const[t,o]=h.useState(null),[a,i]=h.useState([]),[r,s]=h.useState(null),[l,c]=h.useState([]),[d,p]=h.useState(!0),[x,y]=h.useState(!0),[j,A]=h.useState(!1),[m,S]=h.useState(""),[f,v]=h.useState(!1),[C,w]=h.useState(!0),{user:u}=le(),b=ye(),_=Ce(),k=async()=>{try{const[g,P]=await Promise.all([E.get("/api/envelo/monitoring/overview"),E.get("/api/envelo/monitoring/alerts")]);o(g.data),i(P.data.alerts||[])}catch(g){console.error("Failed to fetch monitoring data:",g)}finally{p(!1)}};h.useEffect(()=>{if(k(),x){const g=setInterval(k,1e4);return()=>clearInterval(g)}},[x]);const N=async g=>{try{const P=await E.get(`/api/envelo/monitoring/session/${g}/timeline?hours=24`);c(P.data.timeline||[])}catch(P){console.error("Failed to fetch timeline:",P)}};h.useEffect(()=>{r&&N(r.id)},[r]);const U=()=>{const g=z.map(M=>{var te;const O=(M.pass_count||0)+(M.block_count||0),K=O>0?(M.pass_count/O*100).toFixed(2):"0.00";return{status:M.is_online?"Online":M.status==="ended"?"Ended":"Offline",organization:M.organization_name||"",system_name:M.system_name||"",certificate:M.certificate_id||"",session_id:M.session_id||"",started_at:M.started_at||"",ended_at:M.ended_at||"",uptime_hours:((te=M.uptime_hours)==null?void 0:te.toFixed(2))||"0",pass_count:M.pass_count||0,block_count:M.block_count||0,total_actions:O,pass_rate:K+"%",agent_version:M.agent_version||"",last_activity:M.last_activity||""}});if(g.length===0){b.show("No sessions to export","warning");return}const P=Object.keys(g[0]),I=[P.join(","),...g.map(M=>P.map(O=>{const K=String(M[O]).replace(/"/g,'""');return K.includes(",")||K.includes('"')||K.includes(`
`)?`"${K}"`:K}).join(","))].join(`
`),q=new Blob([I],{type:"text/csv;charset=utf-8;"}),W=URL.createObjectURL(q),J=document.createElement("a");J.href=W,J.download=`envelo-sessions-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(W)};if(d)return e.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[e.jsx(Me,{size:24,style:{animation:"spin 1s linear infinite",color:n.purpleBright}}),e.jsx("p",{style:{marginTop:"16px",color:n.textSecondary},children:"Loading monitoring data..."})]});const T=(t==null?void 0:t.summary)||{},$=(t==null?void 0:t.sessions)||[],z=$.filter(g=>!(m&&g.organization_name!==m||f&&!g.is_online||C&&(g.status==="ended"||g.status==="completed"||g.status==="disconnected")));return e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"sa-page-title",style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"28px",fontWeight:300,margin:0},children:"System Monitoring"}),e.jsx("p",{style:{color:n.textSecondary,marginTop:"4px",fontSize:"14px"},children:(u==null?void 0:u.role)==="admin"?"Real-time ENVELO agent status and telemetry":"Track your certified systems' compliance status"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:n.textSecondary,fontSize:"13px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:g=>y(g.target.checked),style:{accentColor:n.purpleBright}}),"Auto-refresh"]}),e.jsxs("button",{onClick:async()=>{A(!0),await k(),setTimeout(()=>A(!1),600)},style:{background:n.bgPanel,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 16px",color:n.textPrimary,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Me,{size:14,style:j?{animation:"spin 1s linear infinite"}:{}})," ",j?"Refreshing...":"Refresh"]}),(u==null?void 0:u.role)==="admin"&&e.jsxs("button",{onClick:U,style:{background:n.bgPanel,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 16px",color:n.textPrimary,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"0.5px"},children:[e.jsx(ot,{size:14})," Export CSV"]})]})]}),a.length>0&&e.jsxs("div",{style:{background:"rgba(214, 92, 92, 0.1)",border:"1px solid rgba(214, 92, 92, 0.3)",borderRadius:"12px",padding:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(We,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:18,style:{color:"#D65C5C"}}),e.jsxs("span",{style:{fontWeight:500,color:"#D65C5C"},children:[a.length," Active Alert",a.length>1?"s":""]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.map((g,P)=>{var I;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"10px 14px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:g.severity==="critical"?"#D65C5C":"#D6A05C",marginRight:"12px"},children:g.severity}),e.jsx("span",{style:{color:n.textPrimary},children:g.message})]}),e.jsxs("span",{style:{color:n.textTertiary,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:[(I=g.session_id)==null?void 0:I.slice(0,8),"..."]})]},P)})})]}),(()=>{var O,K,te;const g=$.filter(Z=>Z.is_online).length,P=$.filter(Z=>!Z.is_online&&Z.status!=="ended").length,I=g+P,q=I>0?g/I*100:0,W={background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",padding:"20px"},J={fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"2px",color:n.textTertiary,marginBottom:"8px"},M={fontSize:"12px",color:n.textSecondary,marginTop:"4px"};return e.jsxs("div",{style:{marginBottom:"32px"},children:[I>0&&e.jsxs("div",{style:{marginBottom:"20px",padding:"16px 20px",...W},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("div",{style:J,children:"Fleet Health"}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:q>=90?n.accentGreen:q>=70?"#D6A05C":"#D65C5C",fontWeight:500},children:[q.toFixed(0),"% Online"]})]}),e.jsxs("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(255,255,255,0.05)",overflow:"hidden",display:"flex"},children:[g>0&&e.jsx("div",{style:{width:g/I*100+"%",background:n.accentGreen,borderRadius:"4px 0 0 4px",transition:"width 0.5s"}}),P>0&&e.jsx("div",{style:{width:P/I*100+"%",background:"#D65C5C",transition:"width 0.5s"}})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"8px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:n.accentGreen,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.accentGreen,display:"inline-block"}})," ",g," online"]}),e.jsxs("span",{style:{fontSize:"11px",color:"#D65C5C",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#D65C5C",display:"inline-block"}})," ",P," offline"]}),e.jsxs("span",{style:{fontSize:"11px",color:n.textTertiary,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.textTertiary,display:"inline-block"}})," ",T.ended||0," ended"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:W,children:[e.jsx("div",{style:J,children:(u==null?void 0:u.role)==="admin"?"Active Sessions":"Active Systems"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:n.accentGreen},children:T.active||0}),e.jsxs("div",{style:M,children:[T.offline||0," offline"]})]}),e.jsxs("div",{style:W,children:[e.jsx("div",{style:J,children:"Total Actions"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:n.textPrimary},children:(T.total_actions||0).toLocaleString()}),e.jsxs("div",{style:M,children:[((O=T.total_pass)==null?void 0:O.toLocaleString())||0," passed, ",((K=T.total_block)==null?void 0:K.toLocaleString())||0," blocked"]})]}),e.jsxs("div",{style:W,children:[e.jsx("div",{style:J,children:"Pass Rate"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:300,color:T.pass_rate>=99?n.accentGreen:T.pass_rate>=95?"#D6A05C":"#D65C5C"},children:[((te=T.pass_rate)==null?void 0:te.toFixed(1))||0,"%"]}),e.jsx("div",{style:M,children:"enforcement success"})]}),e.jsxs("div",{style:W,children:[e.jsx("div",{style:J,children:"Violations (24h)"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:(T.total_block||0)>0?"#D65C5C":n.accentGreen},children:(T.total_block||0).toLocaleString()}),e.jsxs("div",{style:M,children:[((T.total_block||0)/Math.max(T.total_actions||1,1)*100).toFixed(2),"% of actions"]})]}),(u==null?void 0:u.role)==="admin"&&e.jsxs("div",{style:W,children:[e.jsx("div",{style:J,children:"Total Sessions"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:n.textPrimary},children:T.total||0}),e.jsxs("div",{style:M,children:[T.ended||0," completed"]})]}),(u==null?void 0:u.role)==="admin"&&e.jsxs("div",{style:W,children:[e.jsx("div",{style:J,children:"Unique Systems"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:n.purpleBright},children:[...new Set($.map(Z=>Z.certificate_id).filter(Boolean))].length}),e.jsxs("div",{style:M,children:[[...new Set($.map(Z=>Z.organization_name).filter(Boolean))].length," organizations"]})]})]})]})})(),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${n.borderGlass}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{margin:0,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"2px",color:n.textTertiary},children:(u==null?void 0:u.role)==="admin"?"Agent Sessions":"System Monitoring"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[(u==null?void 0:u.role)==="admin"&&e.jsxs("select",{value:m,onChange:g=>S(g.target.value),style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",padding:"6px 10px",color:n.textPrimary,fontSize:"12px"},children:[e.jsx("option",{value:"",children:"All Customers"}),[...new Set($.map(g=>g.organization_name).filter(Boolean))].map(g=>e.jsx("option",{value:g,children:g},g))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:n.textSecondary,fontSize:"12px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:C,onChange:g=>w(g.target.checked),style:{accentColor:n.purpleBright}}),"Hide ended"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:n.textSecondary,fontSize:"12px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:f,onChange:g=>v(g.target.checked),style:{accentColor:n.purpleBright}}),"Online only"]})]})]}),z.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textSecondary},children:(u==null?void 0:u.role)==="admin"?"No ENVELO sessions found. Deploy an agent to begin monitoring.":"No active systems. Once your system is ODDC certified and running the ENVELO agent, real-time monitoring data will appear here."}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(0,0,0,0.2)"},children:(()=>{const g={padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},P={...g,textAlign:"right"};return e.jsxs(e.Fragment,{children:[e.jsx("th",{style:g,children:"Status"}),e.jsx("th",{style:g,children:"Organization"}),e.jsx("th",{style:g,children:"System / Certificate"}),e.jsx("th",{style:g,children:"Session"}),e.jsx("th",{style:g,children:"Uptime"}),e.jsx("th",{style:P,children:"Actions"}),e.jsx("th",{style:P,children:"Pass Rate"}),e.jsx("th",{style:g,children:"Last Activity"})]})})()})}),e.jsx("tbody",{children:z.map(g=>{var W,J;const P=g.pass_count+g.block_count,I=P>0?g.pass_count/P*100:0,q=(r==null?void 0:r.id)===g.id;return e.jsxs("tr",{onClick:()=>s(q?null:g),style:{borderBottom:`1px solid ${n.borderGlass}`,cursor:"pointer",background:q?"rgba(91, 75, 138, 0.15)":"transparent",transition:"background 0.15s"},onMouseEnter:M=>{q||(M.currentTarget.style.background="rgba(255,255,255,0.03)")},onMouseLeave:M=>{q||(M.currentTarget.style.background="transparent")},children:[e.jsx("td",{style:{padding:"14px 16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:g.is_online?n.accentGreen:g.status==="ended"?n.textTertiary:"#D65C5C",boxShadow:g.is_online?`0 0 8px ${n.accentGreen}`:"none"}}),e.jsx("span",{style:{fontSize:"11px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:g.is_online?n.accentGreen:g.status==="ended"?n.textTertiary:"#D65C5C"},children:g.is_online?"Online":g.status==="ended"?"Ended":"Offline"})]})}),e.jsx("td",{style:{padding:"14px 16px"},children:e.jsx("div",{style:{fontSize:"13px",color:n.textPrimary,fontWeight:500},children:g.organization_name||"Unknown"})}),e.jsxs("td",{style:{padding:"14px 16px"},children:[e.jsx("div",{style:{fontSize:"13px",color:n.textPrimary},children:g.system_name||"-"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginTop:"2px"},children:g.certificate_id||"-"})]}),e.jsxs("td",{style:{padding:"14px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[(W=g.session_id)==null?void 0:W.slice(0,12),"..."]}),e.jsxs("td",{style:{padding:"14px 16px",color:n.textSecondary,fontSize:"13px"},children:[(J=g.uptime_hours)==null?void 0:J.toFixed(1),"h"]}),e.jsx("td",{style:{padding:"14px 16px",textAlign:"right",color:n.textPrimary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:P.toLocaleString()}),e.jsx("td",{style:{padding:"14px 16px",textAlign:"right"},children:e.jsxs("span",{style:{color:I>=99?n.accentGreen:I>=95?"#D6A05C":"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:[I.toFixed(1),"%"]})}),e.jsx("td",{style:{padding:"14px 16px",color:n.textTertiary,fontSize:"12px"},children:g.last_activity?new Date(g.last_activity).toLocaleString():"-"})]},g.id)})})]})})]}),r&&e.jsxs("div",{style:{marginTop:"24px",background:n.bgPanel,border:`1px solid ${n.borderGlass}`,borderRadius:"12px",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${n.borderGlass}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"2px",color:n.textTertiary},children:["Session Detail: ",r.session_id]}),e.jsx("button",{onClick:()=>s(null),style:{background:"none",border:"none",color:n.textTertiary,cursor:"pointer",fontSize:"18px"},children:""})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:400,color:n.textPrimary},children:r.organization_name||"Unknown Organization"}),e.jsxs("p",{style:{margin:0,fontSize:"13px",color:n.textSecondary},children:[r.system_name||"Unknown System","  ",r.certificate_id||"No certificate"]}),e.jsxs("p",{style:{margin:"4px 0 0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:["Agent v",r.agent_version||"1.0.0","  Session ",r.session_id]})]}),r.is_online&&e.jsx("button",{onClick:async()=>{if(await _({title:"End Session",message:"Force-end this session?",danger:!0}))try{await E.post("/api/envelo/sessions/"+r.session_id+"/end",{ended_at:new Date().toISOString(),final_stats:{pass_count:r.pass_count,block_count:r.block_count}}),s(null),k()}catch(g){b.show("Failed: "+g.message,"error")}},style:{padding:"8px 16px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",borderRadius:"8px",color:"#D65C5C",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:"Force End Session"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Started"}),e.jsx("div",{style:{color:n.textPrimary,fontSize:"13px"},children:r.started_at?new Date(r.started_at).toLocaleString():"-"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Uptime"}),e.jsxs("div",{style:{color:n.textPrimary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:[((L=r.uptime_hours)==null?void 0:L.toFixed(1))||"0","h"]})]}),e.jsxs("div",{style:{background:"rgba(92,214,133,0.08)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Passed"}),e.jsx("div",{style:{color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:(r.pass_count||0).toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(214,92,92,0.08)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Blocked"}),e.jsx("div",{style:{color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:(r.block_count||0).toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Pass Rate"}),(()=>{const g=(r.pass_count||0)+(r.block_count||0),P=g>0?r.pass_count/g*100:0;return e.jsxs("div",{style:{color:P>=99?n.accentGreen:P>=95?"#D6A05C":"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:[P.toFixed(1),"%"]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"10px",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Certificate"}),e.jsx("div",{style:{color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:r.certificate_id||"-"})]})]}),(()=>{const g=(r.pass_count||0)+(r.block_count||0);if(g===0)return null;const P=r.pass_count/g*100;return e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Enforcement Distribution"}),e.jsxs("div",{style:{height:"12px",borderRadius:"6px",background:"rgba(255,255,255,0.05)",overflow:"hidden",display:"flex"},children:[e.jsx("div",{style:{width:P+"%",background:"linear-gradient(90deg, "+n.accentGreen+", #4BC87A)",transition:"width 0.5s"}}),e.jsx("div",{style:{width:100-P+"%",background:"#D65C5C",transition:"width 0.5s"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"11px"},children:[e.jsxs("span",{style:{color:n.accentGreen},children:["Pass: ",P.toFixed(1),"%"]}),e.jsxs("span",{style:{color:"#D65C5C"},children:["Block: ",(100-P).toFixed(1),"%"]})]})]})})(),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:async()=>{try{const P=(u==null?void 0:u.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",q=(await E.get(P+r.id+"/telemetry")).data.records||[];if(q.length===0){b.show("No telemetry data yet","info");return}const W=["timestamp","action_id","action_type","result","execution_time_ms"],J=[W.join(","),...q.map(K=>W.map(te=>JSON.stringify(K[te]??"")).join(","))].join(`
`),M=new Blob([J],{type:"text/csv"}),O=document.createElement("a");O.href=URL.createObjectURL(M),O.download=`telemetry-${r.session_id}.csv`,O.click()}catch{b.show("Failed to download telemetry","error")}},style:{padding:"8px 16px",background:"rgba(157,140,207,0.1)",border:"1px solid rgba(157,140,207,0.3)",borderRadius:"8px",color:n.purpleBright,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:" Telemetry CSV"}),e.jsx("button",{onClick:async()=>{try{const P=(u==null?void 0:u.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",q=(await E.get(P+r.id+"/violations")).data.violations||[];if(q.length===0){b.show("No violations recorded","info");return}const W=["timestamp","boundary_name","violation_message"],J=[W.join(","),...q.map(K=>W.map(te=>JSON.stringify(K[te]??"")).join(","))].join(`
`),M=new Blob([J],{type:"text/csv"}),O=document.createElement("a");O.href=URL.createObjectURL(M),O.download=`violations-${r.session_id}.csv`,O.click()}catch{b.show("Failed to download violations","error")}},style:{padding:"8px 16px",background:"rgba(214,92,92,0.08)",border:"1px solid rgba(214,92,92,0.25)",borderRadius:"8px",color:"#D65C5C",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:" Violations CSV"}),e.jsx("button",{onClick:async()=>{try{const P=(u==null?void 0:u.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",I=await E.get(P+r.id+"/report",{responseType:"blob"}),q=new Blob([I.data],{type:"application/pdf"}),W=document.createElement("a");W.href=URL.createObjectURL(q),W.download=`CAT72-Report-${r.session_id}.pdf`,W.click()}catch{b.show("Failed to download report","error")}},style:{padding:"8px 16px",background:"rgba(92,214,133,0.08)",border:"1px solid rgba(92,214,133,0.25)",borderRadius:"8px",color:n.accentGreen,cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",display:"flex",alignItems:"center",gap:"6px"},children:" CAT-72 Report PDF"})]}),l.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"12px"},children:"24-Hour Activity"}),e.jsx("div",{style:{display:"flex",gap:"2px",height:"60px",alignItems:"flex-end"},children:l.map((g,P)=>{const I=Math.max(...l.map(J=>J.total),1),q=g.total/I*100,W=g.total>0?g.pass/g.total:1;return e.jsx("div",{style:{flex:1,height:`${Math.max(q,2)}%`,background:W>=.99?n.accentGreen:W>=.95?"#D6A05C":"#D65C5C",borderRadius:"2px 2px 0 0",opacity:.8},title:`${new Date(g.hour).toLocaleTimeString()}: ${g.total} actions (${g.pass} pass, ${g.block} block)`},P)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"10px",color:n.textTertiary},children:[e.jsx("span",{children:"24h ago"}),e.jsx("span",{children:"Now"})]})]})]})]})]})}function jl(){var z,L;const t=Ce(),o=ye(),[a,i]=h.useState([]),[r,s]=h.useState(!0),[l,c]=h.useState(""),[d,p]=h.useState(!1),[x,y]=h.useState(!1),[j,A]=h.useState(null),[m,S]=h.useState({email:"",full_name:"",company:"",role:"applicant"}),[f,v]=h.useState(!1);h.useEffect(()=>{C()},[]);const C=async()=>{try{const g=await E.get("/api/users/");i(g.data||[])}catch(g){console.log("Users API not available:",g),i([])}s(!1)},w=a.filter(g=>{var P,I,q;return((P=g.email)==null?void 0:P.toLowerCase().includes(l.toLowerCase()))||((I=g.full_name)==null?void 0:I.toLowerCase().includes(l.toLowerCase()))||((q=g.company)==null?void 0:q.toLowerCase().includes(l.toLowerCase()))}),u={total:a.length,admins:a.filter(g=>g.role==="admin").length,applicants:a.filter(g=>g.role==="applicant").length,pending:a.filter(g=>g.role==="pending").length,inactive:a.filter(g=>g.is_active===!1).length},b=async()=>{var g,P;if(!m.email||!m.full_name){o.show("Email and full name are required","warning");return}v(!0);try{const I=Math.random().toString(36).slice(-8)+"A1!";await E.post("/api/users/",{...m,password:I}),o.show("User created  share credentials securely","success"),p(!1),S({email:"",full_name:"",company:"",role:"applicant"}),C()}catch(I){o.show("Failed to create user: "+(((P=(g=I.response)==null?void 0:g.data)==null?void 0:P.detail)||I.message),"error")}v(!1)},_=async(g,P)=>{var I,q;if(await t({title:"Change Role",message:"Change user role to "+P.toUpperCase()+"?"}))try{await E.patch("/api/users/"+g,{role:P}),C(),y(!1)}catch(W){o.show("Failed to update role: "+(((q=(I=W.response)==null?void 0:I.data)==null?void 0:q.detail)||W.message),"error")}},k=async(g,P)=>{var q,W;const I=P?"deactivate":"activate";if(await t({title:I.charAt(0).toUpperCase()+I.slice(1),message:I.charAt(0).toUpperCase()+I.slice(1)+" this user?"}))try{await E.patch("/api/users/"+g,{is_active:!P}),C(),y(!1)}catch(J){o.show("Failed to update user: "+(((W=(q=J.response)==null?void 0:q.data)==null?void 0:W.detail)||J.message),"error")}},N=async(g,P)=>{var I,q;if(await t({title:"Reset Password",message:"Reset password for "+P+"?"}))try{const W=Math.random().toString(36).slice(-8)+"A1!";await E.post("/api/users/"+g+"/reset-password"),o.show("Password reset  share credentials securely","success")}catch(W){o.show("Failed to reset password: "+(((q=(I=W.response)==null?void 0:I.data)==null?void 0:q.detail)||W.message),"error")}},U=async(g,P)=>{var I,q;if(await t({title:"Approve User",message:"Approve "+P+" as an applicant?"}))try{await E.post("/api/users/"+g+"/approve"),C(),y(!1)}catch(W){o.show("Failed to approve: "+(((q=(I=W.response)==null?void 0:I.data)==null?void 0:q.detail)||W.message),"error")}},T=async(g,P)=>{var I,q;if(await t({title:"Reject User",message:"Reject "+P+"? Their account will be deactivated.",danger:!0}))try{await E.post("/api/users/"+g+"/reject"),C(),y(!1)}catch(W){o.show("Failed to reject: "+(((q=(I=W.response)==null?void 0:I.data)==null?void 0:q.detail)||W.message),"error")}},$=async(g,P)=>{var I,q;if(await t({title:"Delete User",message:"DELETE "+P+"? This cannot be undone.",danger:!0,confirmLabel:"Delete"}))try{await E.delete("/api/users/"+g),C(),y(!1)}catch(W){o.show("Failed to delete user: "+(((q=(I=W.response)==null?void 0:I.data)==null?void 0:q.detail)||W.message),"error")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ae,{label:"Administration",title:"User Management",description:"Manage admin and applicant accounts",action:e.jsxs("button",{onClick:()=>p(!0),className:"sexy-btn px-4 py-2 rounded-lg flex items-center gap-2",style:{background:n.purplePrimary,border:"1px solid "+n.purpleBright,color:"#fff"},children:[e.jsx(lo,{className:"w-4 h-4"})," Invite User"]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(pe,{label:"Total Users",value:u.total,color:n.textPrimary}),e.jsx(pe,{label:"Admins",value:u.admins,color:n.purpleBright}),e.jsx(pe,{label:"Applicants",value:u.applicants,color:n.accentGreen}),e.jsx(pe,{label:"Pending",value:u.pending,color:n.accentAmber}),e.jsx(pe,{label:"Inactive",value:u.inactive,color:n.accentRed})]}),e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wt,{className:"w-5 h-5",style:{color:n.textTertiary}}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or company...",value:l,onChange:g=>c(g.target.value),className:"sexy-input flex-1 px-4 py-3 rounded-lg",style:{background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,color:n.textPrimary,outline:"none"}})]})}),e.jsx(Y,{children:r?e.jsx("div",{style:{color:n.textTertiary,textAlign:"center",padding:"40px"},children:"Loading users..."}):w.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx(io,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-12 h-12 mx-auto mb-4",style:{color:n.textTertiary}}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"8px"},children:"No users found"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"14px"},children:a.length===0?"The /api/users/ endpoint may not be configured.":"Try adjusting your search."})]}):e.jsx("div",{className:"space-y-2",children:w.map(g=>{var P,I;return e.jsxs("div",{onClick:()=>{A(g),y(!0)},className:"flex items-center gap-4 p-4 rounded-lg cursor-pointer transition-all",style:{background:"rgba(255,255,255,0.02)",border:"1px solid "+n.borderGlass},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{background:n.purplePrimary,color:"#fff",fontWeight:"400"},children:((P=g.full_name)==null?void 0:P[0])||((I=g.email)==null?void 0:I[0])||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{style:{color:n.textPrimary,fontWeight:"500"},children:g.full_name||"No Name"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"13px"},children:g.email}),g.company&&e.jsx("p",{style:{color:n.textTertiary,fontSize:"12px"},children:g.company})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{background:g.role==="admin"?"rgba(157,140,207,0.2)":g.role==="pending"?"rgba(245,158,11,0.15)":"rgba(255,255,255,0.1)",color:g.role==="admin"?n.purpleBright:g.role==="pending"?"#f59e0b":n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase"},children:g.role}),g.role==="pending"&&e.jsxs("div",{className:"flex gap-1",onClick:q=>q.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(g.id,g.email),className:"px-2 py-1 rounded text-xs",style:{background:"rgba(34,197,94,0.15)",color:"#22c55e",border:"1px solid rgba(34,197,94,0.3)",cursor:"pointer"},children:"Approve"}),e.jsx("button",{onClick:()=>T(g.id,g.email),className:"px-2 py-1 rounded text-xs",style:{background:"rgba(214,92,92,0.15)",color:"#d65c5c",border:"1px solid rgba(214,92,92,0.3)",cursor:"pointer"},children:"Reject"})]}),g.is_active===!1&&e.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{background:"rgba(214,92,92,0.15)",color:n.accentRed},children:"Inactive"})]})]},g.id||g.email)})})}),d&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"rgba(0,0,0,0.7)"},children:e.jsxs("div",{className:"w-full max-w-md mx-4 p-6 rounded-xl",style:{background:n.bgDeep,border:"1px solid "+n.borderGlass},children:[e.jsx("h2",{style:{color:n.textPrimary,fontSize:"20px",fontWeight:"400",marginBottom:"24px",textAlign:"center"},children:"Invite New User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:n.textSecondary,fontSize:"12px",display:"block",marginBottom:"6px"},children:"Email *"}),e.jsx("input",{type:"email",value:m.email,onChange:g=>S({...m,email:g.target.value}),placeholder:"user@company.com",className:"sexy-input w-full px-4 py-3 rounded-lg",style:{background:"rgba(255,255,255,0.05)",border:"1px solid "+n.borderGlass,color:n.textPrimary,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:n.textSecondary,fontSize:"12px",display:"block",marginBottom:"6px"},children:"Full Name *"}),e.jsx("input",{type:"text",value:m.full_name,onChange:g=>S({...m,full_name:g.target.value}),placeholder:"John Smith",className:"sexy-input w-full px-4 py-3 rounded-lg",style:{background:"rgba(255,255,255,0.05)",border:"1px solid "+n.borderGlass,color:n.textPrimary,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:n.textSecondary,fontSize:"12px",display:"block",marginBottom:"6px"},children:"Company"}),e.jsx("input",{type:"text",value:m.company,onChange:g=>S({...m,company:g.target.value}),placeholder:"Company name",className:"sexy-input w-full px-4 py-3 rounded-lg",style:{background:"rgba(255,255,255,0.05)",border:"1px solid "+n.borderGlass,color:n.textPrimary,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:n.textSecondary,fontSize:"12px",display:"block",marginBottom:"6px"},children:"Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>S({...m,role:"applicant"}),className:"flex-1 px-4 py-3 rounded-lg",style:{background:m.role==="applicant"?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(m.role==="applicant"?n.purpleBright:n.borderGlass),color:m.role==="applicant"?n.purpleBright:n.textTertiary},children:"Applicant"}),e.jsx("button",{onClick:()=>S({...m,role:"admin"}),className:"flex-1 px-4 py-3 rounded-lg",style:{background:m.role==="admin"?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(m.role==="admin"?n.purpleBright:n.borderGlass),color:m.role==="admin"?n.purpleBright:n.textTertiary},children:"Admin"})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("button",{onClick:b,disabled:f,className:"sexy-btn w-full px-4 py-3 rounded-lg",style:{background:n.purplePrimary,border:"1px solid "+n.purpleBright,color:"#fff",opacity:f?.7:1},children:f?"Creating...":"Create Account"}),e.jsx("button",{onClick:()=>{p(!1),S({email:"",full_name:"",company:"",role:"applicant"})},className:"w-full px-4 py-3 rounded-lg",style:{background:"transparent",border:"none",color:n.textTertiary},children:"Cancel"})]})]})}),x&&j&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"rgba(0,0,0,0.7)"},children:e.jsxs("div",{className:"w-full max-w-md mx-4 p-6 rounded-xl",style:{background:n.bgDeep,border:"1px solid "+n.borderGlass},children:[e.jsx("h2",{style:{color:n.textPrimary,fontSize:"20px",fontWeight:"400",marginBottom:"24px",textAlign:"center"},children:"Manage User"}),e.jsxs("div",{className:"text-center mb-6 p-4 rounded-lg",style:{background:"rgba(255,255,255,0.03)"},children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",style:{background:n.purplePrimary,color:"#fff",fontSize:"24px",fontWeight:"400"},children:((z=j.full_name)==null?void 0:z[0])||((L=j.email)==null?void 0:L[0])||"?"}),e.jsx("p",{style:{color:n.textPrimary,fontSize:"18px",fontWeight:"500"},children:j.full_name||"No Name"}),e.jsx("p",{style:{color:n.textTertiary,fontSize:"14px"},children:j.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{style:{color:n.textTertiary,fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",display:"block",marginBottom:"8px"},children:"Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>_(j.id,"applicant"),className:"flex-1 px-4 py-3 rounded-lg",style:{background:j.role==="applicant"?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(j.role==="applicant"?n.purpleBright:n.borderGlass),color:j.role==="applicant"?n.purpleBright:n.textTertiary},children:"Applicant"}),e.jsx("button",{onClick:()=>_(j.id,"admin"),className:"flex-1 px-4 py-3 rounded-lg",style:{background:j.role==="admin"?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.05)",border:"1px solid "+(j.role==="admin"?n.purpleBright:n.borderGlass),color:j.role==="admin"?n.purpleBright:n.textTertiary},children:"Admin"})]})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("label",{style:{color:n.textTertiary,fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",display:"block",marginBottom:"8px"},children:"Actions"}),e.jsxs("button",{onClick:()=>N(j.id,j.email),className:"w-full px-4 py-3 rounded-lg flex items-center gap-3",style:{background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,color:n.textSecondary,textAlign:"left"},children:[e.jsx(Me,{className:"w-4 h-4",style:{color:n.purpleBright}}),"Reset Password"]}),e.jsx("button",{onClick:()=>k(j.id,j.is_active!==!1),className:"w-full px-4 py-3 rounded-lg flex items-center gap-3",style:{background:"rgba(255,255,255,0.03)",border:"1px solid "+n.borderGlass,color:j.is_active===!1?n.accentGreen:n.accentRed,textAlign:"left"},children:j.is_active===!1?e.jsxs(e.Fragment,{children:[e.jsx(pn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-4 h-4"})," Activate Account"]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"w-4 h-4"})," Deactivate Account"]})}),e.jsxs("button",{onClick:()=>$(j.id,j.email),className:"w-full px-4 py-3 rounded-lg flex items-center gap-3",style:{background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:n.accentRed,textAlign:"left"},children:[e.jsx(Jt,{className:"w-4 h-4"})," Delete User"]})]}),e.jsx("button",{onClick:()=>{y(!1),A(null)},className:"w-full px-4 py-3 rounded-lg",style:{background:"transparent",border:"none",color:n.textTertiary},children:"Close"})]})})]})}function Cl(){const t=ye(),[o,a]=h.useState([]),[i,r]=h.useState(0),[s,l]=h.useState(!0),[c,d]=h.useState(""),[p,x]=h.useState(""),[y,j]=h.useState(""),[A,m]=h.useState(0),[S,f]=h.useState(""),[v,C]=h.useState(""),[w,u]=h.useState(null),[b,_]=h.useState(!1),[k,N]=h.useState("30"),U=M=>{if(N(M),m(0),M==="all")f(""),C("");else{const O=new Date;O.setDate(O.getDate()-parseInt(M)),f(O.toISOString().split("T")[0]),C("")}},T=async()=>{_(!0);try{const M=await E.get("/api/audit/verify?limit=5000");u(M.data),t.show(M.data.integrity==="passed"?`Integrity verified  ${M.data.valid} entries valid`:`Integrity check FAILED  ${M.data.invalid} tampered entries`,M.data.integrity==="passed"?"success":"error")}catch{t.show("Verification failed","error")}_(!1)},[$,z]=h.useState([]),[L,g]=h.useState([]),P=50;h.useEffect(()=>{E.get("/api/audit/actions").then(M=>z(M.data.actions||[])).catch(()=>{}),E.get("/api/audit/resource-types").then(M=>g(M.data.resource_types||[])).catch(()=>{})},[]);const I=async()=>{l(!0);try{const M=new URLSearchParams;c&&M.set("action",c),p&&M.set("resource_type",p),y&&M.set("user_email",y),S&&M.set("date_from",new Date(S).toISOString()),v&&M.set("date_to",new Date(v+"T23:59:59").toISOString()),M.set("limit",P),M.set("offset",A*P);const O=await E.get(`/api/audit/logs?${M}`);a(O.data.logs||[]),r(O.data.total||0)}catch(M){console.error("Failed to load audit logs:",M)}l(!1)},q=async()=>{try{const M=new URLSearchParams;c&&M.set("action",c),p&&M.set("resource_type",p),y&&M.set("user_email",y),S&&M.set("date_from",new Date(S).toISOString()),v&&M.set("date_to",new Date(v+"T23:59:59").toISOString()),M.set("limit",1e4),M.set("offset",0);const K=(await E.get(`/api/audit/logs?${M}`)).data.logs||[];if(K.length===0){t.show("No entries to export","warning");return}const Z=["Timestamp,User,Action,Resource Type,Resource ID,Details,Hash",...K.map(D=>{const F=D.details?Object.entries(D.details).map(([V,H])=>V+"="+H).join("; "):"";return[D.timestamp||"",D.user_email||"",D.action||"",D.resource_type||"",D.resource_id||"",'"'+F.replace(/"/g,'""')+'"',D.log_hash||""].join(",")})].join(`
`),G=new Blob([Z],{type:"text/csv"}),Q=URL.createObjectURL(G),B=document.createElement("a");B.href=Q,B.download="audit-log-"+new Date().toISOString().split("T")[0]+".csv",B.click(),URL.revokeObjectURL(Q),t.show("CSV exported ("+K.length+" entries)","success")}catch{t.show("Export failed","error")}};h.useEffect(()=>{I()},[c,p,y,S,v,A]);const W=M=>M!=null&&M.includes("issued")||M!=null&&M.includes("approved")||M!=null&&M.includes("conformant")?n.accentGreen:M!=null&&M.includes("suspended")||M!=null&&M.includes("revoked")||M!=null&&M.includes("failed")?"#D65C5C":M!=null&&M.includes("pending")||M!=null&&M.includes("under_review")?"#D6A05C":n.purpleBright,J=Math.ceil(i/P);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ae,{label:"Administration",title:"Activity History"}),e.jsx(Y,{children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("select",{value:c,onChange:M=>{d(M.target.value),m(0)},style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",minWidth:"180px"},children:[e.jsx("option",{value:"",children:"All Actions"}),$.map(M=>e.jsx("option",{value:M,children:M},M))]}),e.jsxs("select",{value:p,onChange:M=>{x(M.target.value),m(0)},style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"All Resources"}),L.map(M=>e.jsx("option",{value:M,children:M},M))]}),e.jsx("input",{value:y,onChange:M=>{j(M.target.value),m(0)},placeholder:"Filter by email...",style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",flex:1,minWidth:"150px"}}),["7","30","90","all"].map(M=>e.jsx("button",{onClick:()=>U(M),style:{padding:"5px 10px",background:k===M?"rgba(168,150,214,0.15)":"transparent",border:`1px solid ${k===M?"rgba(168,150,214,0.4)":n.borderGlass}`,borderRadius:"6px",color:k===M?n.purpleBright:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"0.5px",transition:"all 0.15s ease"},children:M==="all"?"All":M+"d"},M)),e.jsx("input",{type:"date",value:S,onChange:M=>{f(M.target.value),m(0),N("")},style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",colorScheme:"dark"}}),e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"to"}),e.jsx("input",{type:"date",value:v,onChange:M=>{C(M.target.value),m(0),N("")},style:{background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",colorScheme:"dark"}}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[i.toLocaleString()," entries"]}),e.jsx("button",{onClick:q,style:{padding:"6px 14px",background:"rgba(157,140,207,0.12)",border:"1px solid rgba(157,140,207,0.3)",borderRadius:"8px",color:n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:"Export CSV"}),e.jsx("button",{onClick:T,disabled:b,style:{padding:"6px 14px",background:w?w.integrity==="passed"?"rgba(92,214,133,0.12)":"rgba(214,92,92,0.12)":"rgba(157,140,207,0.12)",border:"1px solid "+(w?w.integrity==="passed"?"rgba(92,214,133,0.3)":"rgba(214,92,92,0.3)":"rgba(157,140,207,0.3)"),borderRadius:"8px",color:w?w.integrity==="passed"?n.accentGreen:"#D65C5C":n.purpleBright,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:b?"wait":"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:b?"Verifying...":w?w.integrity==="passed"?` ${w.valid} Verified`:` ${w.invalid} Invalid`:" Verify Chain"})]})}),e.jsxs(Y,{noPad:!0,children:[s?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textTertiary},children:"Loading..."}):o.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textTertiary},children:"No audit log entries found"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0,0,0,0.2)"},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Timestamp"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"User"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Action"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Resource"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Details"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:n.textTertiary},children:"Hash"})]})}),e.jsx("tbody",{children:o.map(M=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.borderSubtle}`},children:[e.jsx("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textSecondary,whiteSpace:"nowrap"},children:M.timestamp?new Date(M.timestamp).toLocaleString():"-"}),e.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:n.textPrimary},children:M.user_email||"-"}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:W(M.action),letterSpacing:"0.5px"},children:M.action})}),e.jsxs("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary},children:[M.resource_type,M.resource_id?` #${M.resource_id}`:""]}),e.jsx("td",{style:{padding:"12px 16px",fontSize:"12px",color:n.textTertiary,maxWidth:"300px"},children:M.details?Object.entries(M.details).filter(([O])=>O!=="old_state").map(([O,K])=>e.jsxs("span",{style:{marginRight:"12px"},children:[e.jsxs("span",{style:{color:n.textTertiary},children:[O.replace(/_/g," "),":"]})," ",e.jsx("span",{style:{color:n.textSecondary},children:String(K)})]},O)):"-"}),e.jsx("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,letterSpacing:"0.5px"},children:M.log_hash||"-"})]},M.id))})]})}),J>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",padding:"16px",borderTop:`1px solid ${n.borderSubtle}`},children:[e.jsx("button",{onClick:()=>m(Math.max(0,A-1)),disabled:A===0,style:{padding:"6px 12px",background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:A===0?n.textTertiary:n.textPrimary,cursor:A===0?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:" Prev"}),e.jsxs("span",{style:{padding:"6px 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textSecondary},children:[A+1," / ",J]}),e.jsx("button",{onClick:()=>m(Math.min(J-1,A+1)),disabled:A>=J-1,style:{padding:"6px 12px",background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:A>=J-1?n.textTertiary:n.textPrimary,cursor:A>=J-1?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"Next "})]})]})]})}function kl(){const{user:t}=le(),[o,a]=h.useState([]),[i,r]=h.useState(0),[s,l]=h.useState(!0),[c,d]=h.useState(0),[p,x]=h.useState("30"),y=30,j=()=>{if(p==="all")return"";const f=new Date;return f.setDate(f.getDate()-parseInt(p)),f.toISOString()},A=async()=>{l(!0);try{const f=new URLSearchParams;f.set("limit",y),f.set("offset",c*y);const v=j();v&&f.set("date_from",v);const C=await E.get(`/api/audit/my-logs?${f}`);a(C.data.logs||[]),r(C.data.total||0)}catch(f){console.error("Failed to load activity:",f)}l(!1)};h.useEffect(()=>{A()},[c,p]);const m=f=>f!=null&&f.includes("approved")||f!=null&&f.includes("issued")||f!=null&&f.includes("conformant")?{icon:"",color:n.accentGreen}:f!=null&&f.includes("failed")||f!=null&&f.includes("revoked")||f!=null&&f.includes("suspended")?{icon:"",color:"#D65C5C"}:f!=null&&f.includes("pending")||f!=null&&f.includes("under_review")?{icon:"",color:"#D6A05C"}:{icon:"",color:n.purpleBright},S=Math.ceil(i/y);return e.jsxs("div",{className:"space-y-6",style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsx(Ae,{label:"Account",title:"My Activity"}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textTertiary,letterSpacing:"1px",textTransform:"uppercase"},children:"Activity Log"}),e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[["7","30","90","all"].map(f=>e.jsx("button",{onClick:()=>{x(f),d(0)},style:{padding:"4px 10px",background:p===f?"rgba(168,150,214,0.15)":"transparent",border:`1px solid ${p===f?"rgba(168,150,214,0.4)":n.borderGlass}`,borderRadius:"6px",color:p===f?n.purpleBright:n.textTertiary,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"0.5px",transition:"all 0.15s ease"},children:f==="all"?"All":f+"d"},f)),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,marginLeft:"8px"},children:[i," entries"]})]})]}),s?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textTertiary},children:"Loading..."}):o.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:n.textTertiary},children:"No activity yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:o.map(f=>{var C;const v=m(f.action);return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px",borderRadius:"8px",background:"rgba(255,255,255,0.01)",borderBottom:`1px solid ${n.borderSubtle}`},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:`${v.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginTop:"2px"},children:e.jsx("span",{style:{color:v.color,fontSize:"13px",fontWeight:"bold"},children:v.icon})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:v.color,letterSpacing:"0.5px"},children:(C=f.action)==null?void 0:C.replace(/_/g," ")}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:n.textTertiary,whiteSpace:"nowrap"},children:f.timestamp?new Date(f.timestamp).toLocaleString():""})]}),e.jsxs("div",{style:{fontSize:"12px",color:n.textSecondary},children:[f.resource_type,f.resource_id?` #${f.resource_id}`:"",f.details&&Object.keys(f.details).length>0&&e.jsx("span",{style:{color:n.textTertiary,marginLeft:"8px"},children:Object.entries(f.details).filter(([w])=>w!=="old_state").slice(0,3).map(([w,u])=>`${w.replace(/_/g," ")}: ${u}`).join("  ")})]})]})]},f.id)})}),S>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",paddingTop:"16px",marginTop:"16px",borderTop:`1px solid ${n.borderSubtle}`},children:[e.jsx("button",{onClick:()=>d(Math.max(0,c-1)),disabled:c===0,style:{padding:"6px 12px",background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:c===0?n.textTertiary:n.textPrimary,cursor:c===0?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"\\u2190 Prev"}),e.jsxs("span",{style:{padding:"6px 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:n.textSecondary},children:[c+1," / ",S]}),e.jsx("button",{onClick:()=>d(Math.min(S-1,c+1)),disabled:c>=S-1,style:{padding:"6px 12px",background:n.bgDeep,border:`1px solid ${n.borderGlass}`,borderRadius:"6px",color:c>=S-1?n.textTertiary:n.textPrimary,cursor:c>=S-1?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"Next \\u2192"})]})]})]})}function Tl(){const{user:t}=le();Ce();const[o,a]=h.useState(null),[i,r]=h.useState(!1),[s,l]=h.useState(!1),[c,d]=h.useState({full_name:(t==null?void 0:t.full_name)||"",organization:(t==null?void 0:t.organization)||""}),[p,x]=h.useState(!1),[y,j]=h.useState({current:"",new_pw:"",confirm:""}),[A,m]=h.useState(!1),[S,f]=h.useState(""),[v,C]=h.useState({enabled:!1,loading:!0,setup:null,code:"",verifying:!1,disablePw:"",disabling:!1});h.useEffect(()=>{E.get("/api/auth/me").then(z=>{C(L=>({...L,enabled:z.data.totp_enabled||!1,loading:!1}))}).catch(()=>C(z=>({...z,loading:!1})))},[]);const w=async()=>{var z,L;try{const g=await E.post("/api/auth/2fa/setup");C(P=>({...P,setup:g.data}))}catch(g){_.show("Setup failed: "+(((L=(z=g.response)==null?void 0:z.data)==null?void 0:L.detail)||g.message),"error")}},u=async()=>{var z,L;C(g=>({...g,verifying:!0}));try{const g=await E.post("/api/auth/2fa/enable",{code:v.code});_.show("Two-factor authentication enabled","success"),C(P=>({...P,enabled:!0,setup:null,code:"",verifying:!1,backupCodes:g.data.backup_codes||[]}))}catch(g){_.show(((L=(z=g.response)==null?void 0:z.data)==null?void 0:L.detail)||"Invalid code","error"),C(P=>({...P,verifying:!1}))}},b=async()=>{var z,L;C(g=>({...g,disabling:!0}));try{await E.post("/api/auth/2fa/disable",{current_password:v.disablePw}),_.show("Two-factor authentication disabled","success"),C(g=>({...g,enabled:!1,disablePw:"",disabling:!1}))}catch(g){_.show(((L=(z=g.response)==null?void 0:z.data)==null?void 0:L.detail)||"Failed","error"),C(P=>({...P,disabling:!1}))}},_=ye(),k=async()=>{var z,L;x(!0);try{const g=await E.put("/api/auth/profile",c);_.show("Profile updated","success"),g.data.user&&window.location.reload()}catch(g){_.show("Failed to update profile: "+(((L=(z=g.response)==null?void 0:z.data)==null?void 0:L.detail)||g.message),"error")}x(!1)},N=async()=>{var z,L;if(f(""),y.current===""||y.new_pw===""||y.confirm===""){f("All fields required");return}if(y.new_pw!==y.confirm){f("Passwords do not match");return}if(y.new_pw.length<8){f("Min 8 characters");return}m(!0);try{await E.post("/api/auth/change-password",{current_password:y.current,new_password:y.new_pw}),_.show("Password changed successfully","success"),j({current:"",new_pw:"",confirm:""})}catch(g){f(((L=(z=g.response)==null?void 0:z.data)==null?void 0:L.detail)||"Failed to change password")}m(!1)};h.useEffect(()=>{E.get("/api/users/email-preferences").then(z=>a(z.data.preferences||{})).catch(()=>{a({application_updates:!0,test_notifications:!0,certificate_alerts:!0,agent_alerts:!0,marketing:!1})})},[]);const U=z=>{a(L=>({...L,[z]:!L[z]})),l(!1)},T=async()=>{var z,L;r(!0);try{await E.put("/api/users/email-preferences",o),l(!0),setTimeout(()=>l(!1),3e3)}catch(g){_.show("Failed to save: "+(((L=(z=g.response)==null?void 0:z.data)==null?void 0:L.detail)||g.message),"error")}r(!1)},$=[{key:"application_updates",label:"Application Updates",desc:"Submission confirmations, review status changes, approval notifications"},{key:"test_notifications",label:"CAT-72 Test Notifications",desc:"Test scheduled, started, passed, and failed alerts"},{key:"certificate_alerts",label:"Certificate Alerts",desc:"Certificate issued, expiry warnings (30-day / 7-day), expiration notices"},{key:"agent_alerts",label:"ENVELO Agent Alerts",desc:"Agent offline warnings, high violation rate, suspension alerts"},{key:"marketing",label:"Product Updates",desc:"New features, platform updates, and industry news from Sentinel Authority"}];return o?e.jsxs("div",{className:"space-y-6",style:{maxWidth:"700px",margin:"0 auto"},children:[e.jsx(Ae,{label:"Account",title:"Settings"}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Account Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxWidth:"400px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"11px",color:n.textTertiary,display:"block",marginBottom:"4px"},children:"Full Name"}),e.jsx("input",{type:"text",value:c.full_name,onChange:z=>d({...c,full_name:z.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none sexy-input",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"11px",color:n.textTertiary,display:"block",marginBottom:"4px"},children:"Organization"}),e.jsx("input",{type:"text",value:c.organization,onChange:z=>d({...c,organization:z.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none sexy-input",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Email"}),e.jsx("div",{style:{color:n.textPrimary,marginTop:"4px",fontSize:"13px"},children:(t==null?void 0:t.email)||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Role"}),e.jsx("div",{style:{color:n.purpleBright,marginTop:"4px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:(t==null?void 0:t.role)||"-"})]})]}),e.jsx("button",{onClick:k,disabled:p,className:"sexy-btn",style:{padding:"10px 24px",borderRadius:"10px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:p?"wait":"pointer",opacity:p?.7:1,alignSelf:"flex-start"},children:p?"Saving...":"Save Profile"})]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Change Password"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxWidth:"400px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"11px",color:n.textTertiary,display:"block",marginBottom:"4px"},children:"Current Password"}),e.jsx("input",{type:"password",value:y.current,onChange:z=>j({...y,current:z.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none sexy-input",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"11px",color:n.textTertiary,display:"block",marginBottom:"4px"},children:"New Password"}),e.jsx("input",{type:"password",value:y.new_pw,onChange:z=>j({...y,new_pw:z.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none sexy-input",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"11px",color:n.textTertiary,display:"block",marginBottom:"4px"},children:"Confirm New Password"}),e.jsx("input",{type:"password",value:y.confirm,onChange:z=>j({...y,confirm:z.target.value}),className:"w-full px-4 py-3 rounded-lg outline-none sexy-input",style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,color:n.textPrimary,fontSize:"13px"}})]}),S&&e.jsx("div",{style:{color:"#D65C5C",fontSize:"12px"},children:S}),e.jsx("div",{style:{fontSize:"11px",color:n.textTertiary},children:"Min 8 chars, 1 uppercase, 1 lowercase, 1 number"}),e.jsx("button",{onClick:N,disabled:A,className:"sexy-btn",style:{padding:"10px 24px",borderRadius:"10px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:A?"wait":"pointer",opacity:A?.7:1,alignSelf:"flex-start"},children:A?"Changing...":"Change Password"})]})]}),e.jsxs(Y,{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,marginBottom:"16px"},children:"Two-Factor Authentication"}),v.loading?e.jsx("div",{style:{color:n.textTertiary,fontSize:"13px"},children:"Loading..."}):v.enabled?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.accentGreen}}),e.jsx("span",{style:{color:n.accentGreen,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:"ENABLED"})]}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",marginBottom:"12px"},children:"Your account is protected with TOTP two-factor authentication."}),v.backupCodes&&v.backupCodes.length>0&&e.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"rgba(214,160,92,0.1)",border:"1px solid rgba(214,160,92,0.3)",borderRadius:"8px"},children:[e.jsx("p",{style:{color:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",marginBottom:"8px",fontWeight:600},children:"SAVE YOUR BACKUP CODES"}),e.jsx("p",{style:{color:n.textSecondary,fontSize:"12px",marginBottom:"12px"},children:"Use these if you lose your authenticator. Each code works once."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"4px"},children:v.backupCodes.map((z,L)=>e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:n.textPrimary,padding:"4px 8px",background:"rgba(255,255,255,0.05)",borderRadius:"4px",textAlign:"center"},children:z},L))}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(v.backupCodes.join(`
`)),_.show("Backup codes copied")},style:{marginTop:"12px",padding:"6px 16px",background:"rgba(214,160,92,0.15)",border:"1px solid rgba(214,160,92,0.3)",borderRadius:"6px",color:n.accentAmber,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:"Copy All"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",maxWidth:"400px"},children:[e.jsx("input",{type:"password",value:v.disablePw,onChange:z=>C(L=>({...L,disablePw:z.target.value})),placeholder:"Enter password to disable",className:"sexy-input",style:{flex:1,background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"8px 12px",color:n.textPrimary,fontSize:"13px"}}),e.jsx("button",{onClick:b,disabled:v.disabling,style:{padding:"8px 16px",borderRadius:"8px",background:"rgba(214,92,92,0.1)",border:"1px solid rgba(214,92,92,0.3)",color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:v.disabling?"wait":"pointer",whiteSpace:"nowrap"},children:v.disabling?"...":"Disable 2FA"})]})]}):v.setup?e.jsxs("div",{style:{maxWidth:"400px"},children:[e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",marginBottom:"16px"},children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, 1Password):"}),v.setup.qr_base64&&e.jsx("div",{style:{textAlign:"center",marginBottom:"16px"},children:e.jsx("img",{src:"data:image/png;base64,"+v.setup.qr_base64,alt:"QR Code",style:{width:"200px",height:"200px",borderRadius:"8px"}})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"10px",color:n.textTertiary,marginBottom:"4px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px"},children:"Manual Entry Key"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",color:n.purpleBright,letterSpacing:"2px",wordBreak:"break-all"},children:v.setup.secret})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:v.code,onChange:z=>C(L=>({...L,code:z.target.value.replace(/\D/g,"").slice(0,6)})),placeholder:"6-digit code",maxLength:6,className:"sexy-input",style:{flex:1,background:"rgba(255,255,255,0.03)",border:`1px solid ${n.borderGlass}`,borderRadius:"8px",padding:"10px 12px",color:n.textPrimary,fontSize:"18px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",letterSpacing:"6px",textAlign:"center"}}),e.jsx("button",{onClick:u,disabled:v.verifying||v.code.length!==6,className:"sexy-btn",style:{padding:"10px 20px",borderRadius:"8px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",cursor:v.verifying?"wait":"pointer",opacity:v.code.length!==6?.5:1},children:v.verifying?"...":"Verify"})]})]}):e.jsxs("div",{children:[e.jsx("p",{style:{color:n.textSecondary,fontSize:"13px",marginBottom:"16px"},children:"Add an extra layer of security by requiring a code from your authenticator app when signing in."}),e.jsx("button",{onClick:w,className:"sexy-btn",style:{padding:"10px 24px",borderRadius:"10px",background:n.purplePrimary,border:`1px solid ${n.purpleBright}`,color:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Enable 2FA"})]})]}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:n.textTertiary,margin:0},children:"Email Notifications"}),e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"from notifications@sentinelauthority.org"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:$.map(z=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderRadius:"10px",background:o[z.key]?"rgba(92,214,133,0.03)":"rgba(255,255,255,0.01)",border:`1px solid ${o[z.key]?"rgba(92,214,133,0.1)":n.borderGlass}`,transition:"all 0.2s"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:n.textPrimary,fontWeight:500,fontSize:"14px",marginBottom:"4px"},children:z.label}),e.jsx("div",{style:{color:n.textTertiary,fontSize:"12px",lineHeight:"1.5"},children:z.desc})]}),e.jsx("button",{onClick:()=>U(z.key),style:{width:"48px",height:"26px",borderRadius:"13px",border:"none",cursor:"pointer",background:o[z.key]?n.accentGreen:"rgba(255,255,255,0.1)",position:"relative",transition:"background 0.2s",flexShrink:0,marginLeft:"16px"},children:e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"#fff",position:"absolute",top:"3px",left:o[z.key]?"25px":"3px",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}})})]},z.key))}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",paddingTop:"16px",borderTop:`1px solid ${n.borderGlass}`},children:[e.jsx("span",{style:{fontSize:"11px",color:n.textTertiary},children:"Admin and security emails are always sent."}),e.jsx("button",{onClick:T,disabled:i,className:"sexy-btn",style:{padding:"10px 24px",borderRadius:"10px",background:s?"rgba(92,214,133,0.15)":n.purplePrimary,border:`1px solid ${s?"rgba(92,214,133,0.4)":n.purpleBright}`,color:s?n.accentGreen:"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:i?"wait":"pointer",opacity:i?.7:1},children:s?" Saved":i?"Saving...":"Save Preferences"})]})]})]}):e.jsx("div",{style:{color:n.textTertiary,padding:"40px",textAlign:"center"},children:"Loading preferences..."})}const Bl="goldenticket";function zl(){const[t,o]=h.useState(!1),[a,i]=h.useState(""),[r,s]=h.useState(""),l=c=>{c.preventDefault(),a===Bl?(o(!0),s("")):s("Invalid password")};return t?e.jsx("div",{style:{width:"100%",height:"calc(100vh - 80px)"},children:e.jsx("iframe",{src:`${vn}/internal-docs`,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px"},title:"API Documentation"})}):e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"2rem",maxWidth:"400px",width:"100%"},children:[e.jsx("h2",{style:{color:"#fff",marginBottom:"0.5rem"},children:"API Documentation"}),e.jsx("p",{style:{color:"#a896d6",marginBottom:"1.5rem",fontSize:"0.9rem"},children:"Enter the docs password to view the API reference."}),e.jsxs("div",{children:[e.jsx("input",{type:"password",value:a,onChange:c=>i(c.target.value),onKeyDown:c=>c.key==="Enter"&&l(c),placeholder:"Docs password",style:{width:"100%",padding:"0.75rem",background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:"8px",color:"#fff",fontSize:"1rem",marginBottom:"1rem",boxSizing:"border-box"}}),r&&e.jsx("p",{style:{color:"#ff6b6b",fontSize:"0.85rem",marginBottom:"0.5rem"},children:r}),e.jsx("button",{onClick:l,style:{width:"100%",padding:"0.75rem",background:"#5B4B8A",border:"none",borderRadius:"8px",color:"#fff",fontSize:"1rem",cursor:"pointer"},children:"Unlock Docs"})]})]})})}function Al(){return e.jsx(ss,{children:e.jsx(Tr,{children:e.jsx(ls,{children:e.jsx(is,{children:e.jsxs(br,{children:[e.jsx(ie,{path:"/login",element:e.jsx(ds,{})}),e.jsx(ie,{path:"/verify",element:e.jsx(ul,{})}),e.jsx(ie,{path:"/dashboard",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(ms,{})})})}),e.jsx(ie,{path:"/applications",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(gs,{})})})}),e.jsx(ie,{path:"/applications/new",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(hs,{})})})}),e.jsx(ie,{path:"/applications/:id",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(Ss,{})})})}),e.jsx(ie,{path:"/cat72",element:e.jsx(me,{roles:["admin","operator","applicant"],children:e.jsx(ue,{children:e.jsx(js,{})})})}),e.jsx(ie,{path:"/certificates",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(Cs,{})})})}),e.jsx(ie,{path:"/pending",element:e.jsx(xl,{})}),e.jsx(ie,{path:"/resources",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(gl,{})})})}),e.jsx(ie,{path:"/envelo",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(wl,{})})})}),e.jsx(ie,{path:"/monitoring",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(Sl,{})})})}),e.jsx(ie,{path:"/activity",element:e.jsx(me,{roles:["admin"],children:e.jsx(ue,{children:e.jsx(Cl,{})})})}),e.jsx(ie,{path:"/my-activity",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(kl,{})})})}),e.jsx(ie,{path:"/settings",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(Tl,{})})})}),e.jsx(ie,{path:"/api-docs",element:e.jsx(me,{roles:["admin"],children:e.jsx(ue,{children:e.jsx(zl,{})})})}),e.jsx(ie,{path:"/users",element:e.jsx(me,{roles:["admin"],children:e.jsx(ue,{children:e.jsx(jl,{})})})}),e.jsx(ie,{path:"/",element:e.jsx(Xt,{to:"/dashboard"})})]})})})})})}Yt.createRoot(document.getElementById("root")).render(e.jsx(fe.StrictMode,{children:e.jsx(Al,{})}));
