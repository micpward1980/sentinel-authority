import{r as u,R as di,a as xe,H as ia,F as at,C as oa,A as cn,B as ra,b as pi,U as Kt,c as dn,S as mi,E as zn,X as Jt,L as ui,M as gi,d as xi,e as fi,f as hi,g as Ie,h as $e,W as sa,i as yi,j as We,P as la,D as qe,k as wt,l as ca,m as pn}from"./icons-XmD9Qu1Q.js";import{r as _i}from"./vendor-BngjAmFe.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();var da={exports:{}},At={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bi=u,vi=Symbol.for("react.element"),wi=Symbol.for("react.fragment"),ji=Object.prototype.hasOwnProperty,Si=bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ci={key:!0,ref:!0,__self:!0,__source:!0};function pa(t,n,a){var o,i={},r=null,s=null;a!==void 0&&(r=""+a),n.key!==void 0&&(r=""+n.key),n.ref!==void 0&&(s=n.ref);for(o in n)ji.call(n,o)&&!Ci.hasOwnProperty(o)&&(i[o]=n[o]);if(t&&t.defaultProps)for(o in n=t.defaultProps,n)i[o]===void 0&&(i[o]=n[o]);return{$$typeof:vi,type:t,key:r,ref:s,props:i,_owner:Si.current}}At.Fragment=wi;At.jsx=pa;At.jsxs=pa;da.exports=At;var e=da.exports,Yt={},An=_i;Yt.createRoot=An.createRoot,Yt.hydrateRoot=An.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function it(){return it=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},it.apply(this,arguments)}var ze;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ze||(ze={}));const Tn="popstate";function ki(t){t===void 0&&(t={});function n(o,i){let{pathname:r,search:s,hash:l}=o.location;return Qt("",{pathname:r,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function a(o,i){return typeof i=="string"?i:jt(i)}return Ai(n,a,null,t)}function re(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function mn(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function zi(){return Math.random().toString(36).substr(2,8)}function Bn(t,n){return{usr:t.state,key:t.key,idx:n}}function Qt(t,n,a,o){return a===void 0&&(a=null),it({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?Ye(n):n,{state:a,key:n&&n.key||o||zi()})}function jt(t){let{pathname:n="/",search:a="",hash:o=""}=t;return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Ye(t){let n={};if(t){let a=t.indexOf("#");a>=0&&(n.hash=t.substr(a),t=t.substr(0,a));let o=t.indexOf("?");o>=0&&(n.search=t.substr(o),t=t.substr(0,o)),t&&(n.pathname=t)}return n}function Ai(t,n,a,o){o===void 0&&(o={});let{window:i=document.defaultView,v5Compat:r=!1}=o,s=i.history,l=ze.Pop,c=null,d=p();d==null&&(d=0,s.replaceState(it({},s.state,{idx:d}),""));function p(){return(s.state||{idx:null}).idx}function f(){l=ze.Pop;let g=p(),A=g==null?null:g-d;d=g,c&&c({action:l,location:w.location,delta:A})}function v(g,A){l=ze.Push;let C=Qt(w.location,g,A);d=p()+1;let h=Bn(C,d),x=w.createHref(C);try{s.pushState(h,"",x)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;i.location.assign(x)}r&&c&&c({action:l,location:w.location,delta:1})}function k(g,A){l=ze.Replace;let C=Qt(w.location,g,A);d=p();let h=Bn(C,d),x=w.createHref(C);s.replaceState(h,"",x),r&&c&&c({action:l,location:w.location,delta:0})}function m(g){let A=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof g=="string"?g:jt(g);return C=C.replace(/ $/,"%20"),re(A,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,A)}let w={get action(){return l},get location(){return t(i,s)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Tn,f),c=g,()=>{i.removeEventListener(Tn,f),c=null}},createHref(g){return n(i,g)},createURL:m,encodeLocation(g){let A=m(g);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:k,go(g){return s.go(g)}};return w}var Nn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Nn||(Nn={}));function Ti(t,n,a){return a===void 0&&(a="/"),Bi(t,n,a)}function Bi(t,n,a,o){let i=typeof n=="string"?Ye(n):n,r=un(i.pathname||"/",a);if(r==null)return null;let s=ma(t);Ni(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let d=$i(r);l=Li(s[c],d)}return l}function ma(t,n,a,o){n===void 0&&(n=[]),a===void 0&&(a=[]),o===void 0&&(o="");let i=(r,s,l)=>{let c={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:s,route:r};c.relativePath.startsWith("/")&&(re(c.relativePath.startsWith(o),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(o.length));let d=Be([o,c.relativePath]),p=a.concat(c);r.children&&r.children.length>0&&(re(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ma(r.children,n,p,d)),!(r.path==null&&!r.index)&&n.push({path:d,score:Di(d,r.index),routesMeta:p})};return t.forEach((r,s)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,s);else for(let c of ua(r.path))i(r,s,c)}),n}function ua(t){let n=t.split("/");if(n.length===0)return[];let[a,...o]=n,i=a.endsWith("?"),r=a.replace(/\?$/,"");if(o.length===0)return i?[r,""]:[r];let s=ua(o.join("/")),l=[];return l.push(...s.map(c=>c===""?r:[r,c].join("/"))),i&&l.push(...s),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Ni(t){t.sort((n,a)=>n.score!==a.score?a.score-n.score:Oi(n.routesMeta.map(o=>o.childrenIndex),a.routesMeta.map(o=>o.childrenIndex)))}const Ii=/^:[\w-]+$/,Ei=3,Pi=2,Ri=1,Mi=10,Fi=-2,In=t=>t==="*";function Di(t,n){let a=t.split("/"),o=a.length;return a.some(In)&&(o+=Fi),n&&(o+=Pi),a.filter(i=>!In(i)).reduce((i,r)=>i+(Ii.test(r)?Ei:r===""?Ri:Mi),o)}function Oi(t,n){return t.length===n.length&&t.slice(0,-1).every((o,i)=>o===n[i])?t[t.length-1]-n[n.length-1]:0}function Li(t,n,a){let{routesMeta:o}=t,i={},r="/",s=[];for(let l=0;l<o.length;++l){let c=o[l],d=l===o.length-1,p=r==="/"?n:n.slice(r.length)||"/",f=Ui({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),v=c.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Be([r,f.pathname]),pathnameBase:Ki(Be([r,f.pathnameBase])),route:v}),f.pathnameBase!=="/"&&(r=Be([r,f.pathnameBase]))}return s}function Ui(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,o]=Wi(t.path,t.caseSensitive,t.end),i=n.match(a);if(!i)return null;let r=i[0],s=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:o.reduce((d,p,f)=>{let{paramName:v,isOptional:k}=p;if(v==="*"){let w=l[f]||"";s=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const m=l[f];return k&&!m?d[v]=void 0:d[v]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:s,pattern:t}}function Wi(t,n,a){n===void 0&&(n=!1),a===void 0&&(a=!0),mn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(o.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,n?void 0:"i"),o]}function $i(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return mn(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),t}}function un(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,o=t.charAt(a);return o&&o!=="/"?null:t.slice(a)||"/"}const qi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hi=t=>qi.test(t);function Vi(t,n){n===void 0&&(n="/");let{pathname:a,search:o="",hash:i=""}=typeof t=="string"?Ye(t):t,r;if(a)if(Hi(a))r=a;else{if(a.includes("//")){let s=a;a=a.replace(/\/\/+/g,"/"),mn(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+a))}a.startsWith("/")?r=En(a.substring(1),"/"):r=En(a,n)}else r=n;return{pathname:r,search:Ji(o),hash:Yi(i)}}function En(t,n){let a=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?a.length>1&&a.pop():i!=="."&&a.push(i)}),a.length>1?a.join("/"):"/"}function Ot(t,n,a,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gi(t){return t.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function gn(t,n){let a=Gi(t);return n?a.map((o,i)=>i===a.length-1?o.pathname:o.pathnameBase):a.map(o=>o.pathnameBase)}function xn(t,n,a,o){o===void 0&&(o=!1);let i;typeof t=="string"?i=Ye(t):(i=it({},t),re(!i.pathname||!i.pathname.includes("?"),Ot("?","pathname","search",i)),re(!i.pathname||!i.pathname.includes("#"),Ot("#","pathname","hash",i)),re(!i.search||!i.search.includes("#"),Ot("#","search","hash",i)));let r=t===""||i.pathname==="",s=r?"/":i.pathname,l;if(s==null)l=a;else{let f=n.length-1;if(!o&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),f-=1;i.pathname=v.join("/")}l=f>=0?n[f]:"/"}let c=Vi(i,l),d=s&&s!=="/"&&s.endsWith("/"),p=(r||s===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const Be=t=>t.join("/").replace(/\/\/+/g,"/"),Ki=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ji=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Yi=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Qi(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ga=["post","put","patch","delete"];new Set(ga);const Xi=["get",...ga];new Set(Xi);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ot(){return ot=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},ot.apply(this,arguments)}const fn=u.createContext(null),Zi=u.createContext(null),Ee=u.createContext(null),Tt=u.createContext(null),Ce=u.createContext({outlet:null,matches:[],isDataRoute:!1}),xa=u.createContext(null);function eo(t,n){let{relative:a}=n===void 0?{}:n;Qe()||re(!1);let{basename:o,navigator:i}=u.useContext(Ee),{hash:r,pathname:s,search:l}=ha(t,{relative:a}),c=s;return o!=="/"&&(c=s==="/"?o:Be([o,s])),i.createHref({pathname:c,search:l,hash:r})}function Qe(){return u.useContext(Tt)!=null}function Xe(){return Qe()||re(!1),u.useContext(Tt).location}function fa(t){u.useContext(Ee).static||u.useLayoutEffect(t)}function Oe(){let{isDataRoute:t}=u.useContext(Ce);return t?xo():to()}function to(){Qe()||re(!1);let t=u.useContext(fn),{basename:n,future:a,navigator:o}=u.useContext(Ee),{matches:i}=u.useContext(Ce),{pathname:r}=Xe(),s=JSON.stringify(gn(i,a.v7_relativeSplatPath)),l=u.useRef(!1);return fa(()=>{l.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!l.current)return;if(typeof d=="number"){o.go(d);return}let f=xn(d,JSON.parse(s),r,p.relative==="path");t==null&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Be([n,f.pathname])),(p.replace?o.replace:o.push)(f,p.state,p)},[n,o,s,r,t])}function no(){let{matches:t}=u.useContext(Ce),n=t[t.length-1];return n?n.params:{}}function ha(t,n){let{relative:a}=n===void 0?{}:n,{future:o}=u.useContext(Ee),{matches:i}=u.useContext(Ce),{pathname:r}=Xe(),s=JSON.stringify(gn(i,o.v7_relativeSplatPath));return u.useMemo(()=>xn(t,JSON.parse(s),r,a==="path"),[t,s,r,a])}function ao(t,n){return io(t,n)}function io(t,n,a,o){Qe()||re(!1);let{navigator:i}=u.useContext(Ee),{matches:r}=u.useContext(Ce),s=r[r.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let d=Xe(),p;if(n){var f;let g=typeof n=="string"?Ye(n):n;c==="/"||(f=g.pathname)!=null&&f.startsWith(c)||re(!1),p=g}else p=d;let v=p.pathname||"/",k=v;if(c!=="/"){let g=c.replace(/^\//,"").split("/");k="/"+v.replace(/^\//,"").split("/").slice(g.length).join("/")}let m=Ti(t,{pathname:k}),w=co(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Be([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Be([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),r,a,o);return n&&w?u.createElement(Tt.Provider,{value:{location:ot({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ze.Pop}},w):w}function oo(){let t=go(),n=Qi(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},n),a?u.createElement("pre",{style:i},a):null,null)}const ro=u.createElement(oo,null);class so extends u.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,a){return a.location!==n.location||a.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:a.error,location:a.location,revalidation:n.revalidation||a.revalidation}}componentDidCatch(n,a){console.error("React Router caught the following error during render",n,a)}render(){return this.state.error!==void 0?u.createElement(Ce.Provider,{value:this.props.routeContext},u.createElement(xa.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lo(t){let{routeContext:n,match:a,children:o}=t,i=u.useContext(fn);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),u.createElement(Ce.Provider,{value:n},o)}function co(t,n,a,o){var i;if(n===void 0&&(n=[]),a===void 0&&(a=null),o===void 0&&(o=null),t==null){var r;if(!a)return null;if(a.errors)t=a.matches;else if((r=o)!=null&&r.v7_partialHydration&&n.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let s=t,l=(i=a)==null?void 0:i.errors;if(l!=null){let p=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);p>=0||re(!1),s=s.slice(0,Math.min(s.length,p+1))}let c=!1,d=-1;if(a&&o&&o.v7_partialHydration)for(let p=0;p<s.length;p++){let f=s[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:v,errors:k}=a,m=f.route.loader&&v[f.route.id]===void 0&&(!k||k[f.route.id]===void 0);if(f.route.lazy||m){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((p,f,v)=>{let k,m=!1,w=null,g=null;a&&(k=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||ro,c&&(d<0&&v===0?(fo("route-fallback"),m=!0,g=null):d===v&&(m=!0,g=f.route.hydrateFallbackElement||null)));let A=n.concat(s.slice(0,v+1)),C=()=>{let h;return k?h=w:m?h=g:f.route.Component?h=u.createElement(f.route.Component,null):f.route.element?h=f.route.element:h=p,u.createElement(lo,{match:f,routeContext:{outlet:p,matches:A,isDataRoute:a!=null},children:h})};return a&&(f.route.ErrorBoundary||f.route.errorElement||v===0)?u.createElement(so,{location:a.location,revalidation:a.revalidation,component:w,error:k,children:C(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):C()},null)}var ya=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ya||{}),_a=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_a||{});function po(t){let n=u.useContext(fn);return n||re(!1),n}function mo(t){let n=u.useContext(Zi);return n||re(!1),n}function uo(t){let n=u.useContext(Ce);return n||re(!1),n}function ba(t){let n=uo(),a=n.matches[n.matches.length-1];return a.route.id||re(!1),a.route.id}function go(){var t;let n=u.useContext(xa),a=mo(),o=ba();return n!==void 0?n:(t=a.errors)==null?void 0:t[o]}function xo(){let{router:t}=po(ya.UseNavigateStable),n=ba(_a.UseNavigateStable),a=u.useRef(!1);return fa(()=>{a.current=!0}),u.useCallback(function(i,r){r===void 0&&(r={}),a.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ot({fromRouteId:n},r)))},[t,n])}const Pn={};function fo(t,n,a){Pn[t]||(Pn[t]=!0)}function ho(t,n){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yt(t){let{to:n,replace:a,state:o,relative:i}=t;Qe()||re(!1);let{future:r,static:s}=u.useContext(Ee),{matches:l}=u.useContext(Ce),{pathname:c}=Xe(),d=Oe(),p=xn(n,gn(l,r.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(p);return u.useEffect(()=>d(JSON.parse(f),{replace:a,state:o,relative:i}),[d,f,i,a,o]),null}function le(t){re(!1)}function yo(t){let{basename:n="/",children:a=null,location:o,navigationType:i=ze.Pop,navigator:r,static:s=!1,future:l}=t;Qe()&&re(!1);let c=n.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:r,static:s,future:ot({v7_relativeSplatPath:!1},l)}),[c,l,r,s]);typeof o=="string"&&(o=Ye(o));let{pathname:p="/",search:f="",hash:v="",state:k=null,key:m="default"}=o,w=u.useMemo(()=>{let g=un(p,c);return g==null?null:{location:{pathname:g,search:f,hash:v,state:k,key:m},navigationType:i}},[c,p,f,v,k,m,i]);return w==null?null:u.createElement(Ee.Provider,{value:d},u.createElement(Tt.Provider,{children:a,value:w}))}function _o(t){let{children:n,location:a}=t;return ao(Xt(n),a)}new Promise(()=>{});function Xt(t,n){n===void 0&&(n=[]);let a=[];return u.Children.forEach(t,(o,i)=>{if(!u.isValidElement(o))return;let r=[...n,i];if(o.type===u.Fragment){a.push.apply(a,Xt(o.props.children,r));return}o.type!==le&&re(!1),!o.props.index||!o.props.children||re(!1);let s={id:o.props.id||r.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(s.children=Xt(o.props.children,r)),a.push(s)}),a}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},Zt.apply(this,arguments)}function bo(t,n){if(t==null)return{};var a={},o=Object.keys(t),i,r;for(r=0;r<o.length;r++)i=o[r],!(n.indexOf(i)>=0)&&(a[i]=t[i]);return a}function vo(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wo(t,n){return t.button===0&&(!n||n==="_self")&&!vo(t)}const jo=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],So="6";try{window.__reactRouterVersion=So}catch{}const Co="startTransition",Rn=di[Co];function ko(t){let{basename:n,children:a,future:o,window:i}=t,r=u.useRef();r.current==null&&(r.current=ki({window:i,v5Compat:!0}));let s=r.current,[l,c]=u.useState({action:s.action,location:s.location}),{v7_startTransition:d}=o||{},p=u.useCallback(f=>{d&&Rn?Rn(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>s.listen(p),[s,p]),u.useEffect(()=>ho(o),[o]),u.createElement(yo,{basename:n,children:a,location:l.location,navigationType:l.action,navigator:s,future:o})}const zo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ao=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=u.forwardRef(function(n,a){let{onClick:o,relative:i,reloadDocument:r,replace:s,state:l,target:c,to:d,preventScrollReset:p,viewTransition:f}=n,v=bo(n,jo),{basename:k}=u.useContext(Ee),m,w=!1;if(typeof d=="string"&&Ao.test(d)&&(m=d,zo))try{let h=new URL(window.location.href),x=d.startsWith("//")?new URL(h.protocol+d):new URL(d),y=un(x.pathname,k);x.origin===h.origin&&y!=null?d=y+x.search+x.hash:w=!0}catch{}let g=eo(d,{relative:i}),A=To(d,{replace:s,state:l,target:c,preventScrollReset:p,relative:i,viewTransition:f});function C(h){o&&o(h),h.defaultPrevented||A(h)}return u.createElement("a",Zt({},v,{href:m||g,onClick:w||r?o:C,ref:a,target:c}))});var Mn;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Mn||(Mn={}));var Fn;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fn||(Fn={}));function To(t,n){let{target:a,replace:o,state:i,preventScrollReset:r,relative:s,viewTransition:l}=n===void 0?{}:n,c=Oe(),d=Xe(),p=ha(t,{relative:s});return u.useCallback(f=>{if(wo(f,a)){f.preventDefault();let v=o!==void 0?o:jt(d)===jt(p);c(t,{replace:v,state:i,preventScrollReset:r,relative:s,viewTransition:l})}},[d,c,p,o,i,a,t,r,s,l])}function va(t,n){return function(){return t.apply(n,arguments)}}const{toString:Bo}=Object.prototype,{getPrototypeOf:hn}=Object,{iterator:Bt,toStringTag:wa}=Symbol,Nt=(t=>n=>{const a=Bo.call(n);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),be=t=>(t=t.toLowerCase(),n=>Nt(n)===t),It=t=>n=>typeof n===t,{isArray:Ze}=Array,He=It("undefined");function st(t){return t!==null&&!He(t)&&t.constructor!==null&&!He(t.constructor)&&fe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ja=be("ArrayBuffer");function No(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&ja(t.buffer),n}const Io=It("string"),fe=It("function"),Sa=It("number"),lt=t=>t!==null&&typeof t=="object",Eo=t=>t===!0||t===!1,_t=t=>{if(Nt(t)!=="object")return!1;const n=hn(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(wa in t)&&!(Bt in t)},Po=t=>{if(!lt(t)||st(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Ro=be("Date"),Mo=be("File"),Fo=be("Blob"),Do=be("FileList"),Oo=t=>lt(t)&&fe(t.pipe),Lo=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||fe(t.append)&&((n=Nt(t))==="formdata"||n==="object"&&fe(t.toString)&&t.toString()==="[object FormData]"))},Uo=be("URLSearchParams"),[Wo,$o,qo,Ho]=["ReadableStream","Request","Response","Headers"].map(be),Vo=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ct(t,n,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let o,i;if(typeof t!="object"&&(t=[t]),Ze(t))for(o=0,i=t.length;o<i;o++)n.call(null,t[o],o,t);else{if(st(t))return;const r=a?Object.getOwnPropertyNames(t):Object.keys(t),s=r.length;let l;for(o=0;o<s;o++)l=r[o],n.call(null,t[l],l,t)}}function Ca(t,n){if(st(t))return null;n=n.toLowerCase();const a=Object.keys(t);let o=a.length,i;for(;o-- >0;)if(i=a[o],n===i.toLowerCase())return i;return null}const Me=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ka=t=>!He(t)&&t!==Me;function en(){const{caseless:t,skipUndefined:n}=ka(this)&&this||{},a={},o=(i,r)=>{const s=t&&Ca(a,r)||r;_t(a[s])&&_t(i)?a[s]=en(a[s],i):_t(i)?a[s]=en({},i):Ze(i)?a[s]=i.slice():(!n||!He(i))&&(a[s]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&ct(arguments[i],o);return a}const Go=(t,n,a,{allOwnKeys:o}={})=>(ct(n,(i,r)=>{a&&fe(i)?Object.defineProperty(t,r,{value:va(i,a),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,r,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),t),Ko=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Jo=(t,n,a,o)=>{t.prototype=Object.create(n.prototype,o),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:n.prototype}),a&&Object.assign(t.prototype,a)},Yo=(t,n,a,o)=>{let i,r,s;const l={};if(n=n||{},t==null)return n;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)s=i[r],(!o||o(s,t,n))&&!l[s]&&(n[s]=t[s],l[s]=!0);t=a!==!1&&hn(t)}while(t&&(!a||a(t,n))&&t!==Object.prototype);return n},Qo=(t,n,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=n.length;const o=t.indexOf(n,a);return o!==-1&&o===a},Xo=t=>{if(!t)return null;if(Ze(t))return t;let n=t.length;if(!Sa(n))return null;const a=new Array(n);for(;n-- >0;)a[n]=t[n];return a},Zo=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&hn(Uint8Array)),er=(t,n)=>{const o=(t&&t[Bt]).call(t);let i;for(;(i=o.next())&&!i.done;){const r=i.value;n.call(t,r[0],r[1])}},tr=(t,n)=>{let a;const o=[];for(;(a=t.exec(n))!==null;)o.push(a);return o},nr=be("HTMLFormElement"),ar=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,o,i){return o.toUpperCase()+i}),Dn=(({hasOwnProperty:t})=>(n,a)=>t.call(n,a))(Object.prototype),ir=be("RegExp"),za=(t,n)=>{const a=Object.getOwnPropertyDescriptors(t),o={};ct(a,(i,r)=>{let s;(s=n(i,r,t))!==!1&&(o[r]=s||i)}),Object.defineProperties(t,o)},or=t=>{za(t,(n,a)=>{if(fe(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const o=t[a];if(fe(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},rr=(t,n)=>{const a={},o=i=>{i.forEach(r=>{a[r]=!0})};return Ze(t)?o(t):o(String(t).split(n)),a},sr=()=>{},lr=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function cr(t){return!!(t&&fe(t.append)&&t[wa]==="FormData"&&t[Bt])}const dr=t=>{const n=new Array(10),a=(o,i)=>{if(lt(o)){if(n.indexOf(o)>=0)return;if(st(o))return o;if(!("toJSON"in o)){n[i]=o;const r=Ze(o)?[]:{};return ct(o,(s,l)=>{const c=a(s,i+1);!He(c)&&(r[l]=c)}),n[i]=void 0,r}}return o};return a(t,0)},pr=be("AsyncFunction"),mr=t=>t&&(lt(t)||fe(t))&&fe(t.then)&&fe(t.catch),Aa=((t,n)=>t?setImmediate:n?((a,o)=>(Me.addEventListener("message",({source:i,data:r})=>{i===Me&&r===a&&o.length&&o.shift()()},!1),i=>{o.push(i),Me.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",fe(Me.postMessage)),ur=typeof queueMicrotask<"u"?queueMicrotask.bind(Me):typeof process<"u"&&process.nextTick||Aa,gr=t=>t!=null&&fe(t[Bt]),E={isArray:Ze,isArrayBuffer:ja,isBuffer:st,isFormData:Lo,isArrayBufferView:No,isString:Io,isNumber:Sa,isBoolean:Eo,isObject:lt,isPlainObject:_t,isEmptyObject:Po,isReadableStream:Wo,isRequest:$o,isResponse:qo,isHeaders:Ho,isUndefined:He,isDate:Ro,isFile:Mo,isBlob:Fo,isRegExp:ir,isFunction:fe,isStream:Oo,isURLSearchParams:Uo,isTypedArray:Zo,isFileList:Do,forEach:ct,merge:en,extend:Go,trim:Vo,stripBOM:Ko,inherits:Jo,toFlatObject:Yo,kindOf:Nt,kindOfTest:be,endsWith:Qo,toArray:Xo,forEachEntry:er,matchAll:tr,isHTMLForm:nr,hasOwnProperty:Dn,hasOwnProp:Dn,reduceDescriptors:za,freezeMethods:or,toObjectSet:rr,toCamelCase:ar,noop:sr,toFiniteNumber:lr,findKey:Ca,global:Me,isContextDefined:ka,isSpecCompliantForm:cr,toJSONObject:dr,isAsyncFn:pr,isThenable:mr,setImmediate:Aa,asap:ur,isIterable:gr};let Y=class Ta extends Error{static from(n,a,o,i,r,s){const l=new Ta(n.message,a||n.code,o,i,r);return l.cause=n,l.name=n.name,s&&Object.assign(l,s),l}constructor(n,a,o,i,r){super(n),this.name="AxiosError",this.isAxiosError=!0,a&&(this.code=a),o&&(this.config=o),i&&(this.request=i),r&&(this.response=r,this.status=r.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:E.toJSONObject(this.config),code:this.code,status:this.status}}};Y.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Y.ERR_BAD_OPTION="ERR_BAD_OPTION";Y.ECONNABORTED="ECONNABORTED";Y.ETIMEDOUT="ETIMEDOUT";Y.ERR_NETWORK="ERR_NETWORK";Y.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Y.ERR_DEPRECATED="ERR_DEPRECATED";Y.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Y.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Y.ERR_CANCELED="ERR_CANCELED";Y.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Y.ERR_INVALID_URL="ERR_INVALID_URL";const xr=null;function tn(t){return E.isPlainObject(t)||E.isArray(t)}function Ba(t){return E.endsWith(t,"[]")?t.slice(0,-2):t}function On(t,n,a){return t?t.concat(n).map(function(i,r){return i=Ba(i),!a&&r?"["+i+"]":i}).join(a?".":""):n}function fr(t){return E.isArray(t)&&!t.some(tn)}const hr=E.toFlatObject(E,{},null,function(n){return/^is[A-Z]/.test(n)});function Et(t,n,a){if(!E.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,a=E.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,g){return!E.isUndefined(g[w])});const o=a.metaTokens,i=a.visitor||p,r=a.dots,s=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&E.isSpecCompliantForm(n);if(!E.isFunction(i))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(E.isDate(m))return m.toISOString();if(E.isBoolean(m))return m.toString();if(!c&&E.isBlob(m))throw new Y("Blob is not supported. Use a Buffer instead.");return E.isArrayBuffer(m)||E.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function p(m,w,g){let A=m;if(m&&!g&&typeof m=="object"){if(E.endsWith(w,"{}"))w=o?w:w.slice(0,-2),m=JSON.stringify(m);else if(E.isArray(m)&&fr(m)||(E.isFileList(m)||E.endsWith(w,"[]"))&&(A=E.toArray(m)))return w=Ba(w),A.forEach(function(h,x){!(E.isUndefined(h)||h===null)&&n.append(s===!0?On([w],x,r):s===null?w:w+"[]",d(h))}),!1}return tn(m)?!0:(n.append(On(g,w,r),d(m)),!1)}const f=[],v=Object.assign(hr,{defaultVisitor:p,convertValue:d,isVisitable:tn});function k(m,w){if(!E.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(m),E.forEach(m,function(A,C){(!(E.isUndefined(A)||A===null)&&i.call(n,A,E.isString(C)?C.trim():C,w,v))===!0&&k(A,w?w.concat(C):[C])}),f.pop()}}if(!E.isObject(t))throw new TypeError("data must be an object");return k(t),n}function Ln(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function yn(t,n){this._pairs=[],t&&Et(t,this,n)}const Na=yn.prototype;Na.append=function(n,a){this._pairs.push([n,a])};Na.toString=function(n){const a=n?function(o){return n.call(this,o,Ln)}:Ln;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function yr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ia(t,n,a){if(!n)return t;const o=a&&a.encode||yr,i=E.isFunction(a)?{serialize:a}:a,r=i&&i.serialize;let s;if(r?s=r(n,i):s=E.isURLSearchParams(n)?n.toString():new yn(n,i).toString(o),s){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Un{constructor(){this.handlers=[]}use(n,a,o){return this.handlers.push({fulfilled:n,rejected:a,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){E.forEach(this.handlers,function(o){o!==null&&n(o)})}}const Ea={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_r=typeof URLSearchParams<"u"?URLSearchParams:yn,br=typeof FormData<"u"?FormData:null,vr=typeof Blob<"u"?Blob:null,wr={isBrowser:!0,classes:{URLSearchParams:_r,FormData:br,Blob:vr},protocols:["http","https","file","blob","url","data"]},_n=typeof window<"u"&&typeof document<"u",nn=typeof navigator=="object"&&navigator||void 0,jr=_n&&(!nn||["ReactNative","NativeScript","NS"].indexOf(nn.product)<0),Sr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Cr=_n&&window.location.href||"http://localhost",kr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_n,hasStandardBrowserEnv:jr,hasStandardBrowserWebWorkerEnv:Sr,navigator:nn,origin:Cr},Symbol.toStringTag,{value:"Module"})),pe={...kr,...wr};function zr(t,n){return Et(t,new pe.classes.URLSearchParams,{visitor:function(a,o,i,r){return pe.isNode&&E.isBuffer(a)?(this.append(o,a.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...n})}function Ar(t){return E.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function Tr(t){const n={},a=Object.keys(t);let o;const i=a.length;let r;for(o=0;o<i;o++)r=a[o],n[r]=t[r];return n}function Pa(t){function n(a,o,i,r){let s=a[r++];if(s==="__proto__")return!0;const l=Number.isFinite(+s),c=r>=a.length;return s=!s&&E.isArray(i)?i.length:s,c?(E.hasOwnProp(i,s)?i[s]=[i[s],o]:i[s]=o,!l):((!i[s]||!E.isObject(i[s]))&&(i[s]=[]),n(a,o,i[s],r)&&E.isArray(i[s])&&(i[s]=Tr(i[s])),!l)}if(E.isFormData(t)&&E.isFunction(t.entries)){const a={};return E.forEachEntry(t,(o,i)=>{n(Ar(o),i,a,0)}),a}return null}function Br(t,n,a){if(E.isString(t))try{return(n||JSON.parse)(t),E.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(a||JSON.stringify)(t)}const dt={transitional:Ea,adapter:["xhr","http","fetch"],transformRequest:[function(n,a){const o=a.getContentType()||"",i=o.indexOf("application/json")>-1,r=E.isObject(n);if(r&&E.isHTMLForm(n)&&(n=new FormData(n)),E.isFormData(n))return i?JSON.stringify(Pa(n)):n;if(E.isArrayBuffer(n)||E.isBuffer(n)||E.isStream(n)||E.isFile(n)||E.isBlob(n)||E.isReadableStream(n))return n;if(E.isArrayBufferView(n))return n.buffer;if(E.isURLSearchParams(n))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let l;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return zr(n,this.formSerializer).toString();if((l=E.isFileList(n))||o.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Et(l?{"files[]":n}:n,c&&new c,this.formSerializer)}}return r||i?(a.setContentType("application/json",!1),Br(n)):n}],transformResponse:[function(n){const a=this.transitional||dt.transitional,o=a&&a.forcedJSONParsing,i=this.responseType==="json";if(E.isResponse(n)||E.isReadableStream(n))return n;if(n&&E.isString(n)&&(o&&!this.responseType||i)){const s=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(n,this.parseReviver)}catch(l){if(s)throw l.name==="SyntaxError"?Y.from(l,Y.ERR_BAD_RESPONSE,this,null,this.response):l}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pe.classes.FormData,Blob:pe.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};E.forEach(["delete","get","head","post","put","patch"],t=>{dt.headers[t]={}});const Nr=E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ir=t=>{const n={};let a,o,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),a=s.substring(0,i).trim().toLowerCase(),o=s.substring(i+1).trim(),!(!a||n[a]&&Nr[a])&&(a==="set-cookie"?n[a]?n[a].push(o):n[a]=[o]:n[a]=n[a]?n[a]+", "+o:o)}),n},Wn=Symbol("internals");function tt(t){return t&&String(t).trim().toLowerCase()}function bt(t){return t===!1||t==null?t:E.isArray(t)?t.map(bt):String(t)}function Er(t){const n=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=a.exec(t);)n[o[1]]=o[2];return n}const Pr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Lt(t,n,a,o,i){if(E.isFunction(o))return o.call(this,n,a);if(i&&(n=a),!!E.isString(n)){if(E.isString(o))return n.indexOf(o)!==-1;if(E.isRegExp(o))return o.test(n)}}function Rr(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,a,o)=>a.toUpperCase()+o)}function Mr(t,n){const a=E.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+a,{value:function(i,r,s){return this[o].call(this,n,i,r,s)},configurable:!0})})}let he=class{constructor(n){n&&this.set(n)}set(n,a,o){const i=this;function r(l,c,d){const p=tt(c);if(!p)throw new Error("header name must be a non-empty string");const f=E.findKey(i,p);(!f||i[f]===void 0||d===!0||d===void 0&&i[f]!==!1)&&(i[f||c]=bt(l))}const s=(l,c)=>E.forEach(l,(d,p)=>r(d,p,c));if(E.isPlainObject(n)||n instanceof this.constructor)s(n,a);else if(E.isString(n)&&(n=n.trim())&&!Pr(n))s(Ir(n),a);else if(E.isObject(n)&&E.isIterable(n)){let l={},c,d;for(const p of n){if(!E.isArray(p))throw TypeError("Object iterator must return a key-value pair");l[d=p[0]]=(c=l[d])?E.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}s(l,a)}else n!=null&&r(a,n,o);return this}get(n,a){if(n=tt(n),n){const o=E.findKey(this,n);if(o){const i=this[o];if(!a)return i;if(a===!0)return Er(i);if(E.isFunction(a))return a.call(this,i,o);if(E.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,a){if(n=tt(n),n){const o=E.findKey(this,n);return!!(o&&this[o]!==void 0&&(!a||Lt(this,this[o],o,a)))}return!1}delete(n,a){const o=this;let i=!1;function r(s){if(s=tt(s),s){const l=E.findKey(o,s);l&&(!a||Lt(o,o[l],l,a))&&(delete o[l],i=!0)}}return E.isArray(n)?n.forEach(r):r(n),i}clear(n){const a=Object.keys(this);let o=a.length,i=!1;for(;o--;){const r=a[o];(!n||Lt(this,this[r],r,n,!0))&&(delete this[r],i=!0)}return i}normalize(n){const a=this,o={};return E.forEach(this,(i,r)=>{const s=E.findKey(o,r);if(s){a[s]=bt(i),delete a[r];return}const l=n?Rr(r):String(r).trim();l!==r&&delete a[r],a[l]=bt(i),o[l]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const a=Object.create(null);return E.forEach(this,(o,i)=>{o!=null&&o!==!1&&(a[i]=n&&E.isArray(o)?o.join(", "):o)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,a])=>n+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...a){const o=new this(n);return a.forEach(i=>o.set(i)),o}static accessor(n){const o=(this[Wn]=this[Wn]={accessors:{}}).accessors,i=this.prototype;function r(s){const l=tt(s);o[l]||(Mr(i,s),o[l]=!0)}return E.isArray(n)?n.forEach(r):r(n),this}};he.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);E.reduceDescriptors(he.prototype,({value:t},n)=>{let a=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(o){this[a]=o}}});E.freezeMethods(he);function Ut(t,n){const a=this||dt,o=n||a,i=he.from(o.headers);let r=o.data;return E.forEach(t,function(l){r=l.call(a,r,i.normalize(),n?n.status:void 0)}),i.normalize(),r}function Ra(t){return!!(t&&t.__CANCEL__)}let pt=class extends Y{constructor(n,a,o){super(n??"canceled",Y.ERR_CANCELED,a,o),this.name="CanceledError",this.__CANCEL__=!0}};function Ma(t,n,a){const o=a.config.validateStatus;!a.status||!o||o(a.status)?t(a):n(new Y("Request failed with status code "+a.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Fr(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function Dr(t,n){t=t||10;const a=new Array(t),o=new Array(t);let i=0,r=0,s;return n=n!==void 0?n:1e3,function(c){const d=Date.now(),p=o[r];s||(s=d),a[i]=c,o[i]=d;let f=r,v=0;for(;f!==i;)v+=a[f++],f=f%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),d-s<n)return;const k=p&&d-p;return k?Math.round(v*1e3/k):void 0}}function Or(t,n){let a=0,o=1e3/n,i,r;const s=(d,p=Date.now())=>{a=p,i=null,r&&(clearTimeout(r),r=null),t(...d)};return[(...d)=>{const p=Date.now(),f=p-a;f>=o?s(d,p):(i=d,r||(r=setTimeout(()=>{r=null,s(i)},o-f)))},()=>i&&s(i)]}const St=(t,n,a=3)=>{let o=0;const i=Dr(50,250);return Or(r=>{const s=r.loaded,l=r.lengthComputable?r.total:void 0,c=s-o,d=i(c),p=s<=l;o=s;const f={loaded:s,total:l,progress:l?s/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&p?(l-s)/d:void 0,event:r,lengthComputable:l!=null,[n?"download":"upload"]:!0};t(f)},a)},$n=(t,n)=>{const a=t!=null;return[o=>n[0]({lengthComputable:a,total:t,loaded:o}),n[1]]},qn=t=>(...n)=>E.asap(()=>t(...n)),Lr=pe.hasStandardBrowserEnv?((t,n)=>a=>(a=new URL(a,pe.origin),t.protocol===a.protocol&&t.host===a.host&&(n||t.port===a.port)))(new URL(pe.origin),pe.navigator&&/(msie|trident)/i.test(pe.navigator.userAgent)):()=>!0,Ur=pe.hasStandardBrowserEnv?{write(t,n,a,o,i,r,s){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(n)}`];E.isNumber(a)&&l.push(`expires=${new Date(a).toUTCString()}`),E.isString(o)&&l.push(`path=${o}`),E.isString(i)&&l.push(`domain=${i}`),r===!0&&l.push("secure"),E.isString(s)&&l.push(`SameSite=${s}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Wr(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $r(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function Fa(t,n,a){let o=!Wr(n);return t&&(o||a==!1)?$r(t,n):n}const Hn=t=>t instanceof he?{...t}:t;function De(t,n){n=n||{};const a={};function o(d,p,f,v){return E.isPlainObject(d)&&E.isPlainObject(p)?E.merge.call({caseless:v},d,p):E.isPlainObject(p)?E.merge({},p):E.isArray(p)?p.slice():p}function i(d,p,f,v){if(E.isUndefined(p)){if(!E.isUndefined(d))return o(void 0,d,f,v)}else return o(d,p,f,v)}function r(d,p){if(!E.isUndefined(p))return o(void 0,p)}function s(d,p){if(E.isUndefined(p)){if(!E.isUndefined(d))return o(void 0,d)}else return o(void 0,p)}function l(d,p,f){if(f in n)return o(d,p);if(f in t)return o(void 0,d)}const c={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(d,p,f)=>i(Hn(d),Hn(p),f,!0)};return E.forEach(Object.keys({...t,...n}),function(p){const f=c[p]||i,v=f(t[p],n[p],p);E.isUndefined(v)&&f!==l||(a[p]=v)}),a}const Da=t=>{const n=De({},t);let{data:a,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:r,headers:s,auth:l}=n;if(n.headers=s=he.from(s),n.url=Ia(Fa(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),E.isFormData(a)){if(pe.hasStandardBrowserEnv||pe.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(E.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([p,f])=>{d.includes(p.toLowerCase())&&s.set(p,f)})}}if(pe.hasStandardBrowserEnv&&(o&&E.isFunction(o)&&(o=o(n)),o||o!==!1&&Lr(n.url))){const c=i&&r&&Ur.read(r);c&&s.set(i,c)}return n},qr=typeof XMLHttpRequest<"u",Hr=qr&&function(t){return new Promise(function(a,o){const i=Da(t);let r=i.data;const s=he.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=i,p,f,v,k,m;function w(){k&&k(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function A(){if(!g)return;const h=he.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),y={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:h,config:t,request:g};Ma(function(R){a(R),w()},function(R){o(R),w()},y),g=null}"onloadend"in g?g.onloadend=A:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(A)},g.onabort=function(){g&&(o(new Y("Request aborted",Y.ECONNABORTED,t,g)),g=null)},g.onerror=function(x){const y=x&&x.message?x.message:"Network Error",T=new Y(y,Y.ERR_NETWORK,t,g);T.event=x||null,o(T),g=null},g.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const y=i.transitional||Ea;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),o(new Y(x,y.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,t,g)),g=null},r===void 0&&s.setContentType(null),"setRequestHeader"in g&&E.forEach(s.toJSON(),function(x,y){g.setRequestHeader(y,x)}),E.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),l&&l!=="json"&&(g.responseType=i.responseType),d&&([v,m]=St(d,!0),g.addEventListener("progress",v)),c&&g.upload&&([f,k]=St(c),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",k)),(i.cancelToken||i.signal)&&(p=h=>{g&&(o(!h||h.type?new pt(null,t,g):h),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const C=Fr(i.url);if(C&&pe.protocols.indexOf(C)===-1){o(new Y("Unsupported protocol "+C+":",Y.ERR_BAD_REQUEST,t));return}g.send(r||null)})},Vr=(t,n)=>{const{length:a}=t=t?t.filter(Boolean):[];if(n||a){let o=new AbortController,i;const r=function(d){if(!i){i=!0,l();const p=d instanceof Error?d:this.reason;o.abort(p instanceof Y?p:new pt(p instanceof Error?p.message:p))}};let s=n&&setTimeout(()=>{s=null,r(new Y(`timeout of ${n}ms exceeded`,Y.ETIMEDOUT))},n);const l=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(r):d.removeEventListener("abort",r)}),t=null)};t.forEach(d=>d.addEventListener("abort",r));const{signal:c}=o;return c.unsubscribe=()=>E.asap(l),c}},Gr=function*(t,n){let a=t.byteLength;if(a<n){yield t;return}let o=0,i;for(;o<a;)i=o+n,yield t.slice(o,i),o=i},Kr=async function*(t,n){for await(const a of Jr(t))yield*Gr(a,n)},Jr=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:a,value:o}=await n.read();if(a)break;yield o}}finally{await n.cancel()}},Vn=(t,n,a,o)=>{const i=Kr(t,n);let r=0,s,l=c=>{s||(s=!0,o&&o(c))};return new ReadableStream({async pull(c){try{const{done:d,value:p}=await i.next();if(d){l(),c.close();return}let f=p.byteLength;if(a){let v=r+=f;a(v)}c.enqueue(new Uint8Array(p))}catch(d){throw l(d),d}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},Gn=64*1024,{isFunction:xt}=E,Yr=(({Request:t,Response:n})=>({Request:t,Response:n}))(E.global),{ReadableStream:Kn,TextEncoder:Jn}=E.global,Yn=(t,...n)=>{try{return!!t(...n)}catch{return!1}},Qr=t=>{t=E.merge.call({skipUndefined:!0},Yr,t);const{fetch:n,Request:a,Response:o}=t,i=n?xt(n):typeof fetch=="function",r=xt(a),s=xt(o);if(!i)return!1;const l=i&&xt(Kn),c=i&&(typeof Jn=="function"?(m=>w=>m.encode(w))(new Jn):async m=>new Uint8Array(await new a(m).arrayBuffer())),d=r&&l&&Yn(()=>{let m=!1;const w=new a(pe.origin,{body:new Kn,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!w}),p=s&&l&&Yn(()=>E.isReadableStream(new o("").body)),f={stream:p&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(w,g)=>{let A=w&&w[m];if(A)return A.call(w);throw new Y(`Response type '${m}' is not supported`,Y.ERR_NOT_SUPPORT,g)})});const v=async m=>{if(m==null)return 0;if(E.isBlob(m))return m.size;if(E.isSpecCompliantForm(m))return(await new a(pe.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(E.isArrayBufferView(m)||E.isArrayBuffer(m))return m.byteLength;if(E.isURLSearchParams(m)&&(m=m+""),E.isString(m))return(await c(m)).byteLength},k=async(m,w)=>{const g=E.toFiniteNumber(m.getContentLength());return g??v(w)};return async m=>{let{url:w,method:g,data:A,signal:C,cancelToken:h,timeout:x,onDownloadProgress:y,onUploadProgress:T,responseType:R,headers:U,withCredentials:I="same-origin",fetchOptions:P}=Da(m),z=n||fetch;R=R?(R+"").toLowerCase():"text";let D=Vr([C,h&&h.toAbortSignal()],x),M=null;const b=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let N;try{if(T&&d&&g!=="get"&&g!=="head"&&(N=await k(U,A))!==0){let $=new a(w,{method:"POST",body:A,duplex:"half"}),G;if(E.isFormData(A)&&(G=$.headers.get("content-type"))&&U.setContentType(G),$.body){const[Q,ne]=$n(N,St(qn(T)));A=Vn($.body,Gn,Q,ne)}}E.isString(I)||(I=I?"include":"omit");const _=r&&"credentials"in a.prototype,B={...P,signal:D,method:g.toUpperCase(),headers:U.normalize().toJSON(),body:A,duplex:"half",credentials:_?I:void 0};M=r&&new a(w,B);let F=await(r?z(M,P):z(w,B));const V=p&&(R==="stream"||R==="response");if(p&&(y||V&&b)){const $={};["status","statusText","headers"].forEach(H=>{$[H]=F[H]});const G=E.toFiniteNumber(F.headers.get("content-length")),[Q,ne]=y&&$n(G,St(qn(y),!0))||[];F=new o(Vn(F.body,Gn,Q,()=>{ne&&ne(),b&&b()}),$)}R=R||"text";let j=await f[E.findKey(f,R)||"text"](F,m);return!V&&b&&b(),await new Promise(($,G)=>{Ma($,G,{data:j,headers:he.from(F.headers),status:F.status,statusText:F.statusText,config:m,request:M})})}catch(_){throw b&&b(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,m,M),{cause:_.cause||_}):Y.from(_,_&&_.code,m,M)}}},Xr=new Map,Oa=t=>{let n=t&&t.env||{};const{fetch:a,Request:o,Response:i}=n,r=[o,i,a];let s=r.length,l=s,c,d,p=Xr;for(;l--;)c=r[l],d=p.get(c),d===void 0&&p.set(c,d=l?new Map:Qr(n)),p=d;return d};Oa();const bn={http:xr,xhr:Hr,fetch:{get:Oa}};E.forEach(bn,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Qn=t=>`- ${t}`,Zr=t=>E.isFunction(t)||t===null||t===!1;function es(t,n){t=E.isArray(t)?t:[t];const{length:a}=t;let o,i;const r={};for(let s=0;s<a;s++){o=t[s];let l;if(i=o,!Zr(o)&&(i=bn[(l=String(o)).toLowerCase()],i===void 0))throw new Y(`Unknown adapter '${l}'`);if(i&&(E.isFunction(i)||(i=i.get(n))))break;r[l||"#"+s]=i}if(!i){const s=Object.entries(r).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?s.length>1?`since :
`+s.map(Qn).join(`
`):" "+Qn(s[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i}const La={getAdapter:es,adapters:bn};function Wt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new pt(null,t)}function Xn(t){return Wt(t),t.headers=he.from(t.headers),t.data=Ut.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),La.getAdapter(t.adapter||dt.adapter,t)(t).then(function(o){return Wt(t),o.data=Ut.call(t,t.transformResponse,o),o.headers=he.from(o.headers),o},function(o){return Ra(o)||(Wt(t),o&&o.response&&(o.response.data=Ut.call(t,t.transformResponse,o.response),o.response.headers=he.from(o.response.headers))),Promise.reject(o)})}const Ua="1.13.3",Pt={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Pt[t]=function(o){return typeof o===t||"a"+(n<1?"n ":" ")+t}});const Zn={};Pt.transitional=function(n,a,o){function i(r,s){return"[Axios v"+Ua+"] Transitional option '"+r+"'"+s+(o?". "+o:"")}return(r,s,l)=>{if(n===!1)throw new Y(i(s," has been removed"+(a?" in "+a:"")),Y.ERR_DEPRECATED);return a&&!Zn[s]&&(Zn[s]=!0,console.warn(i(s," has been deprecated since v"+a+" and will be removed in the near future"))),n?n(r,s,l):!0}};Pt.spelling=function(n){return(a,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function ts(t,n,a){if(typeof t!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let i=o.length;for(;i-- >0;){const r=o[i],s=n[r];if(s){const l=t[r],c=l===void 0||s(l,r,t);if(c!==!0)throw new Y("option "+r+" must be "+c,Y.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Y("Unknown option "+r,Y.ERR_BAD_OPTION)}}const vt={assertOptions:ts,validators:Pt},we=vt.validators;let Fe=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Un,response:new Un}}async request(n,a){try{return await this._request(n,a)}catch(o){if(o instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}}_request(n,a){typeof n=="string"?(a=a||{},a.url=n):a=n||{},a=De(this.defaults,a);const{transitional:o,paramsSerializer:i,headers:r}=a;o!==void 0&&vt.assertOptions(o,{silentJSONParsing:we.transitional(we.boolean),forcedJSONParsing:we.transitional(we.boolean),clarifyTimeoutError:we.transitional(we.boolean)},!1),i!=null&&(E.isFunction(i)?a.paramsSerializer={serialize:i}:vt.assertOptions(i,{encode:we.function,serialize:we.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),vt.assertOptions(a,{baseUrl:we.spelling("baseURL"),withXsrfToken:we.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let s=r&&E.merge(r.common,r[a.method]);r&&E.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),a.headers=he.concat(s,r);const l=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(a)===!1||(c=c&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let p,f=0,v;if(!c){const m=[Xn.bind(this),void 0];m.unshift(...l),m.push(...d),v=m.length,p=Promise.resolve(a);let w=a;for(;f<v;)p=p.then(m[f++]).then(g=>{w=g!==void 0?g:w}).catch(m[f++]).then(()=>w);return p}v=l.length;let k=a;for(;f<v;){const m=l[f++],w=l[f++];try{k=m(k)}catch(g){w.call(this,g);break}}try{p=Xn.call(this,k)}catch(m){return Promise.reject(m)}for(f=0,v=d.length;f<v;)p=p.then(d[f++]).catch(d[f++]);return p}getUri(n){n=De(this.defaults,n);const a=Fa(n.baseURL,n.url,n.allowAbsoluteUrls);return Ia(a,n.params,n.paramsSerializer)}};E.forEach(["delete","get","head","options"],function(n){Fe.prototype[n]=function(a,o){return this.request(De(o||{},{method:n,url:a,data:(o||{}).data}))}});E.forEach(["post","put","patch"],function(n){function a(o){return function(r,s,l){return this.request(De(l||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Fe.prototype[n]=a(),Fe.prototype[n+"Form"]=a(!0)});let ns=class Wa{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(r){a=r});const o=this;this.promise.then(i=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](i);o._listeners=null}),this.promise.then=i=>{let r;const s=new Promise(l=>{o.subscribe(l),r=l}).then(i);return s.cancel=function(){o.unsubscribe(r)},s},n(function(r,s,l){o.reason||(o.reason=new pt(r,s,l),a(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const a=this._listeners.indexOf(n);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const n=new AbortController,a=o=>{n.abort(o)};return this.subscribe(a),n.signal.unsubscribe=()=>this.unsubscribe(a),n.signal}static source(){let n;return{token:new Wa(function(i){n=i}),cancel:n}}};function as(t){return function(a){return t.apply(null,a)}}function is(t){return E.isObject(t)&&t.isAxiosError===!0}const an={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(an).forEach(([t,n])=>{an[n]=t});function $a(t){const n=new Fe(t),a=va(Fe.prototype.request,n);return E.extend(a,Fe.prototype,n,{allOwnKeys:!0}),E.extend(a,n,null,{allOwnKeys:!0}),a.create=function(i){return $a(De(t,i))},a}const se=$a(dt);se.Axios=Fe;se.CanceledError=pt;se.CancelToken=ns;se.isCancel=Ra;se.VERSION=Ua;se.toFormData=Et;se.AxiosError=Y;se.Cancel=se.CanceledError;se.all=function(n){return Promise.all(n)};se.spread=as;se.isAxiosError=is;se.mergeConfig=De;se.AxiosHeaders=he;se.formToJSON=t=>Pa(E.isHTMLForm(t)?new FormData(t):t);se.getAdapter=La.getAdapter;se.HttpStatusCode=an;se.default=se;const{Axios:Fl,AxiosError:Dl,CanceledError:Ol,isCancel:Ll,CancelToken:Ul,VERSION:Wl,all:$l,Cancel:ql,isAxiosError:Hl,spread:Vl,toFormData:Gl,AxiosHeaders:Kl,HttpStatusCode:Jl,formToJSON:Yl,getAdapter:Ql,mergeConfig:Xl}=se,vn="https://sentinel-authority-production.up.railway.app",Le=vn,L=se.create({baseURL:vn});L.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(t.headers.Authorization=`Bearer ${n}`),t});L.interceptors.response.use(t=>t,t=>(t.response&&t.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(t)));const qa=u.createContext(null);function os({children:t}){const[n,a]=u.useState(null),[o,i]=u.useState(!0);u.useEffect(()=>{const c=localStorage.getItem("token"),d=localStorage.getItem("user");c&&d&&a(JSON.parse(d)),i(!1)},[]);const r=async(c,d)=>{const p=await L.post("/api/auth/login",{email:c,password:d});return localStorage.setItem("token",p.data.access_token),localStorage.setItem("user",JSON.stringify(p.data.user)),a(p.data.user),p.data.user},s=async c=>{const d=await L.post("/api/auth/register",c);return localStorage.setItem("token",d.data.access_token),localStorage.setItem("user",JSON.stringify(d.data.user)),a(d.data.user),d.data.user},l=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null)};return e.jsx(qa.Provider,{value:{user:n,login:r,register:s,logout:l,loading:o},children:t})}function de(){return u.useContext(qa)}const Ha=xe.createContext();function rs({children:t}){const[n,a]=u.useState([]),o=xe.useCallback((s,l="info")=>{const c=Date.now()+Math.random();a(d=>[...d,{id:c,message:s,type:l}]),setTimeout(()=>a(d=>d.filter(p=>p.id!==c)),4500)},[]),i=xe.useCallback(s=>{a(l=>l.filter(c=>c.id!==s))},[]),r={success:{bg:"rgba(92,214,133,.10)",border:"rgba(92,214,133,.35)",text:"#5CD685",icon:""},error:{bg:"rgba(214,92,92,.10)",border:"rgba(214,92,92,.35)",text:"#D65C5C",icon:""},warning:{bg:"rgba(214,160,92,.10)",border:"rgba(214,160,92,.35)",text:"#D6A05C",icon:""},info:{bg:"rgba(157,140,207,.10)",border:"rgba(157,140,207,.35)",text:"#a896d6",icon:""}};return e.jsxs(Ha.Provider,{value:{show:o},children:[t,e.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,display:"flex",flexDirection:"column",gap:"6px",maxWidth:"380px"},children:n.map(s=>{const l=r[s.type]||r.info;return e.jsxs("div",{style:{background:l.bg,backdropFilter:"blur(12px)",border:`1px solid ${l.border}`,padding:"10px 14px",display:"flex",alignItems:"flex-start",gap:"8px",animation:"slideIn .25s ease-out"},children:[e.jsx("span",{style:{fontSize:"13px",lineHeight:1,marginTop:"1px"},children:l.icon}),e.jsx("span",{style:{flex:1,color:l.text,fontSize:"12px",lineHeight:1.4,fontFamily:"var(--mono)"},children:s.message}),e.jsx("button",{onClick:()=>i(s.id),style:{background:"none",border:"none",color:l.text,cursor:"pointer",fontSize:"14px",padding:0,lineHeight:1,opacity:.6},children:""})]},s.id)})})]})}function ve(){return xe.useContext(Ha)}const te={purpleBright:"#a896d6",bgDeep:"#2a2f3d",accentGreen:"#5CD685",textPrimary:"rgba(255,255,255,.94)",textSecondary:"rgba(255,255,255,.78)",serif:"Georgia, 'Source Serif 4', serif",mono:"Consolas, 'IBM Plex Mono', monospace",sans:"Calibri, 'Inter', system-ui, -apple-system, sans-serif"},Va=xe.createContext();function ss({children:t}){const[n,a]=u.useState({open:!1,title:"",message:"",onConfirm:null,onCancel:null,confirmLabel:"Confirm",danger:!1}),o=i=>new Promise(r=>{a({open:!0,title:i.title||"Confirm",message:i.message||"Are you sure?",confirmLabel:i.confirmLabel||"Confirm",danger:i.danger||!1,onConfirm:()=>{a(s=>({...s,open:!1})),r(!0)},onCancel:()=>{a(s=>({...s,open:!1})),r(!1)}})});return e.jsxs(Va.Provider,{value:o,children:[t,n.open&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,.6)",backdropFilter:"blur(6px)"},children:e.jsxs("div",{style:{background:te.bgDeep,border:"1px solid rgba(255,255,255,.07)",maxWidth:"400px",width:"90%"},children:[e.jsxs("div",{style:{padding:"20px 20px 14px"},children:[e.jsx("h3",{style:{margin:"0 0 8px",fontFamily:te.mono,fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:n.danger?"#D65C5C":te.purpleBright},children:n.title}),e.jsx("p",{style:{margin:0,color:te.textSecondary,fontSize:"13px",lineHeight:1.5},children:n.message})]}),e.jsxs("div",{style:{padding:"14px 20px",display:"flex",justifyContent:"flex-end",gap:"10px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[e.jsx("button",{className:"btn",style:{padding:"8px 18px"},onClick:n.onCancel,children:"Cancel"}),e.jsx("button",{className:`btn ${n.danger?"":"primary"}`,style:{padding:"8px 18px",...n.danger?{borderColor:"rgba(214,92,92,.4)",color:"#D65C5C"}:{}},onClick:n.onConfirm,children:n.confirmLabel})]})]})})]})}const ke=()=>xe.useContext(Va);function me({children:t,roles:n}){const{user:a,loading:o}=de();return o?e.jsx("div",{className:"flex items-center justify-center h-screen",style:{background:"#2a2f3d",color:"rgba(255,255,255,0.94)"},children:"Loading..."}):a?a.role==="pending"?e.jsx(yt,{to:"/pending"}):n&&!n.includes(a.role)?e.jsx(yt,{to:"/dashboard"}):t:e.jsx(yt,{to:"/login"})}function ls(){const[t,n]=u.useState(window.innerWidth<768);return u.useEffect(()=>{const a=()=>n(window.innerWidth<768);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t}function ea({size:t=24}){return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"1",y:"1",width:"22",height:"22",rx:"5",fill:"#5B4B8A",stroke:"#9d8ccf",strokeWidth:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3.5",fill:"#c4b8e8",children:e.jsx("animate",{attributeName:"opacity",values:"0.75;1;0.75",dur:"7s",repeatCount:"indefinite"})})]})}function ue({children:t}){var U;const{user:n,logout:a}=de(),o=ls(),[i,r]=u.useState(!o),[s,l]=u.useState([]),[c,d]=u.useState([]),p=Xe(),[f,v]=u.useState([]),[k,m]=u.useState(!1),[w,g]=u.useState(0);u.useEffect(()=>{n&&(L.get("/api/certificates/").then(I=>l(I.data||[])).catch(()=>l([])),L.get("/api/applications/").then(I=>d(I.data.applications||I.data||[])).catch(()=>d([])),localStorage.getItem("token")&&L.get("/api/users/notifications").then(I=>{v(I.data.notifications||[]),g(I.data.unread_count||0)}).catch(()=>{}))},[n]),u.useEffect(()=>{if(!n)return;const I=setInterval(()=>{localStorage.getItem("token")&&L.get("/api/users/notifications").then(P=>{v(P.data.notifications||[]),g(P.data.unread_count||0)}).catch(()=>{})},6e4);return()=>clearInterval(I)},[n]);const A=()=>{L.post("/api/users/notifications/mark-read").then(()=>g(0)).catch(()=>{}),m(!1)},C=[{name:"Dashboard",href:"/dashboard",icon:ia,roles:["admin","applicant"]},{name:"Applications",href:"/applications",icon:at,roles:["admin","applicant"]},{name:"CAT-72 Console",href:"/cat72",icon:oa,roles:["admin","applicant"]},{name:"Certificates",href:"/certificates",icon:cn,roles:["admin","applicant"]},{name:"Resources",href:"/resources",icon:ra,roles:["admin","applicant"]},{name:"ENVELO Interlock",href:"/envelo",icon:"brand",roles:["admin","applicant"],requiresCert:!0},{name:"Monitoring",href:"/monitoring",icon:pi,roles:["admin","applicant"]},{name:"Licensees",href:"/licensees",icon:Kt,roles:["admin"]},{name:"User Management",href:"/users",icon:Kt,roles:["admin"]},{name:"My Activity",href:"/my-activity",icon:dn,roles:["admin","applicant"]},{name:"Activity Log",href:"/activity",icon:at,roles:["admin"]},{name:"Settings",href:"/settings",icon:mi,roles:["admin","applicant"]},{name:"API Docs",href:"/api-docs",icon:zn,roles:["admin"]}],h=Array.isArray(s)&&s.some(I=>I.state==="conformant"||I.state==="active"||I.state==="issued"),x=Array.isArray(c)&&c.some(I=>I.state==="approved"||I.state==="testing"),y=h||x,T=C.filter(I=>!(!I.roles.includes((n==null?void 0:n.role)||"")||I.requiresCert&&(n==null?void 0:n.role)!=="admin"&&!y)),R=I=>p.pathname===I||I!=="/dashboard"&&p.pathname.startsWith(I);return e.jsxs("div",{style:{minHeight:"100vh",color:te.textPrimary,fontFamily:te.sans},children:[e.jsx("div",{className:"sa-grid-overlay"}),e.jsx("div",{className:"sa-vignette"}),o&&i&&e.jsx("div",{onClick:()=>r(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,.5)",zIndex:40}}),e.jsxs("aside",{style:{width:"240px",background:"rgba(42,47,61,.92)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRight:"1px solid rgba(255,255,255,.06)",position:"fixed",top:0,left:0,bottom:0,zIndex:50,transform:!o||i?"translateX(0)":"translateX(-100%)",transition:"transform .2s ease",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{height:"56px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",borderBottom:"1px solid rgba(255,255,255,.06)",flexShrink:0},children:[e.jsxs(oe,{to:"/dashboard",style:{display:"flex",alignItems:"center",gap:"10px",textDecoration:"none"},children:[e.jsx(ea,{size:22}),e.jsx("span",{style:{fontFamily:te.mono,fontSize:"9px",letterSpacing:"2.5px",textTransform:"uppercase",color:"rgba(255,255,255,.82)"},children:"Sentinel Authority"})]}),o&&e.jsx("button",{onClick:()=>r(!1),style:{color:"var(--text-tertiary)",background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e.jsx(Jt,{size:16})})]}),e.jsx("nav",{style:{flex:1,overflowY:"auto",padding:"8px 0"},children:T.map(I=>{const P=R(I.href);return e.jsxs(oe,{to:I.href,onClick:()=>o&&r(!1),style:{display:"flex",alignItems:"center",gap:"10px",padding:"9px 16px",fontFamily:te.mono,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:P?te.textPrimary:"rgba(255,255,255,.35)",borderLeft:P?`2px solid ${te.purpleBright}`:"2px solid transparent",background:P?"rgba(157,140,207,.06)":"transparent",transition:"color .2s, background .15s",textDecoration:"none"},onMouseEnter:z=>{P||(z.currentTarget.style.color="rgba(255,255,255,.65)",z.currentTarget.style.background="rgba(255,255,255,.02)")},onMouseLeave:z=>{P||(z.currentTarget.style.color="rgba(255,255,255,.35)",z.currentTarget.style.background="transparent")},children:[I.icon==="brand"?e.jsx(ea,{size:13}):e.jsx(I.icon,{size:13,style:{opacity:P?.85:.4}}),I.name]},I.name)})}),e.jsxs("div",{style:{padding:"14px 16px",borderTop:"1px solid rgba(255,255,255,.06)",flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[e.jsx("div",{className:"sa-avatar",style:{width:"26px",height:"26px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:"#fff",fontSize:"10px",fontWeight:600},children:((U=n==null?void 0:n.full_name)==null?void 0:U[0])||"U"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:te.textPrimary,lineHeight:1.2},children:n==null?void 0:n.full_name}),e.jsx("div",{style:{fontFamily:te.mono,fontSize:"8px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.3)"},children:n==null?void 0:n.role})]})]}),e.jsxs("button",{onClick:a,style:{display:"flex",alignItems:"center",gap:"6px",fontFamily:te.mono,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.3)",background:"none",border:"none",cursor:"pointer",padding:0},onMouseEnter:I=>I.currentTarget.style.color=te.textPrimary,onMouseLeave:I=>I.currentTarget.style.color="rgba(255,255,255,.3)",children:[e.jsx(ui,{size:11})," Sign Out"]})]})]}),e.jsxs("div",{style:{marginLeft:o?0:"240px",position:"relative",zIndex:10,minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e.jsxs("header",{style:{height:"56px",display:"flex",alignItems:"center",padding:"0 24px",gap:"14px",borderBottom:"1px solid rgba(255,255,255,.06)",background:"rgba(42,47,61,.88)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",position:"sticky",top:0,zIndex:30},children:[o&&e.jsx("button",{onClick:()=>r(!0),style:{color:"var(--text-tertiary)",background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e.jsx(gi,{size:18})}),e.jsx("div",{style:{flex:1}}),e.jsxs("a",{href:"https://sentinelauthority.org",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"5px",color:"rgba(255,255,255,.35)",fontFamily:te.mono,fontSize:"8px",letterSpacing:"1.5px",textTransform:"uppercase",textDecoration:"none",transition:"color .2s"},onMouseEnter:I=>I.currentTarget.style.color=te.textPrimary,onMouseLeave:I=>I.currentTarget.style.color="rgba(255,255,255,.35)",children:[e.jsx(zn,{size:11})," Main Site"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>m(!k),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:k?te.purpleBright:"rgba(255,255,255,.4)",transition:"color .2s"},children:[e.jsx(xi,{size:15,strokeWidth:1.5}),w>0&&e.jsx("span",{style:{position:"absolute",top:"-1px",right:"-1px",minWidth:"13px",height:"13px",borderRadius:"50%",background:"#D65C5C",color:"#fff",fontSize:"7px",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:te.mono,padding:"0 2px"},children:w>9?"9+":w})]}),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>m(!1),style:{position:"fixed",inset:0,zIndex:90}}),e.jsxs("div",{style:{position:"absolute",right:0,top:"40px",width:"min(320px, 88vw)",maxHeight:"65vh",overflowY:"auto",background:"rgba(42,47,61,.96)",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,.07)",zIndex:100},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[e.jsx("span",{style:{fontFamily:te.mono,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:"rgba(255,255,255,.35)"},children:"Notifications"}),w>0&&e.jsx("button",{onClick:A,style:{background:"none",border:"none",color:te.purpleBright,fontFamily:te.mono,fontSize:"9px",letterSpacing:"1px",cursor:"pointer",padding:0},children:"Mark all read"})]}),f.length===0?e.jsx("div",{style:{padding:"28px 14px",textAlign:"center",color:"rgba(255,255,255,.3)",fontSize:"11px",fontFamily:te.mono},children:"No recent activity"}):f.map((I,P)=>{const z={success:te.accentGreen,warning:"#D6A05C",info:te.purpleBright,error:"#D65C5C"}[I.type]||te.purpleBright;return e.jsx("div",{className:"sa-hover-row",onClick:()=>{I.resource_type==="application"&&I.resource_id&&(m(!1),window.location.hash="#/applications/"+I.resource_id)},style:{padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,.04)",cursor:I.resource_id?"pointer":"default"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"},children:[e.jsx("span",{style:{display:"inline-block",width:"4px",height:"4px",borderRadius:"50%",background:z,marginTop:"6px",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{margin:0,fontSize:"12px",color:I.read?te.textSecondary:te.textPrimary,lineHeight:1.4},children:I.message}),e.jsxs("span",{style:{fontFamily:te.mono,fontSize:"8px",color:"rgba(255,255,255,.3)",marginTop:"3px",display:"block"},children:[I.timestamp?new Date(I.timestamp).toLocaleString():"",I.user_email?"  "+I.user_email:""]})]})]})},I.id||P)})]})]})]})]}),e.jsx("main",{className:"sa-main-content",style:{flex:1,padding:"clamp(16px, 3vw, 32px)",position:"relative",zIndex:1},children:t})]})]})}function cs(){const{login:t,register:n}=de(),a=Oe(),[o,i]=u.useState(!1),[r,s]=u.useState(""),[l,c]=u.useState({email:"",password:"",full_name:"",organization_name:""}),[d,p]=u.useState(!1),[f,v]=u.useState(!1),[k,m]=u.useState(""),[w,g]=u.useState(!1),A=async I=>{var P,z,D,M;I.preventDefault(),s("");try{o?await n(l):await t(l.email,l.password),a("/dashboard")}catch(b){((z=(P=b.response)==null?void 0:P.data)==null?void 0:z.detail)==="2FA_REQUIRED"?v(!0):s(((M=(D=b.response)==null?void 0:D.data)==null?void 0:M.detail)||"Authentication failed")}},C=async I=>{var P,z;I.preventDefault(),g(!0),s("");try{await t(l.email,l.password,k),a("/dashboard")}catch(D){s(((z=(P=D.response)==null?void 0:P.data)==null?void 0:z.detail)||"Invalid code")}finally{g(!1)}},h="Consolas, 'IBM Plex Mono', monospace",x="Georgia, 'Source Serif 4', serif",y="rgba(255,255,255,.94)",T="rgba(255,255,255,.78)",R="rgba(255,255,255,.50)",U="#a896d6";return e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:9999,overflowY:"auto",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 20px",fontFamily:"Calibri, 'Inter', system-ui, sans-serif",color:y,background:"radial-gradient(1200px 700px at 15% 10%, rgba(91,75,138,.10), transparent 55%), radial-gradient(900px 600px at 85% 80%, rgba(92,214,133,.04), transparent 55%), #2a2f3d",WebkitFontSmoothing:"antialiased"},children:[e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,backgroundImage:"linear-gradient(rgba(255,255,255,.015) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.015) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.25,maskImage:"radial-gradient(ellipse at center, black 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, black 20%, transparent 70%)"}}),e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,background:"radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,.2) 85%, rgba(0,0,0,.4) 100%)"}}),e.jsxs("div",{style:{width:"100%",maxWidth:"460px",position:"relative",zIndex:1},children:[e.jsx("div",{style:{fontFamily:h,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:R,marginBottom:"16px"},children:"Sentinel Authority"}),e.jsx("h1",{style:{fontFamily:x,fontSize:"clamp(32px, 5vw, 48px)",fontWeight:200,letterSpacing:"-0.03em",lineHeight:1.1,margin:"0 0 12px",color:y},children:f?e.jsxs(e.Fragment,{children:["Two-Factor ",e.jsx("span",{style:{color:U,fontStyle:"italic"},children:"Auth"})]}):e.jsxs(e.Fragment,{children:["Sign ",e.jsx("span",{style:{color:U,fontStyle:"italic"},children:"In"})]})}),e.jsx("p",{style:{color:T,fontWeight:200,lineHeight:1.75,fontSize:"15px",margin:"0 0 48px",maxWidth:"50ch"},children:f?"Enter the 6-digit code from your authenticator app.":"Access the ODDC certification platform. Manage applications, certificates, and ENVELO Interlock."}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.04)",marginBottom:"40px"}}),f?e.jsxs("div",{children:[r&&e.jsx("p",{style:{color:"rgba(214,92,92,.95)",fontFamily:h,fontSize:"11px",letterSpacing:"1px",marginBottom:"24px"},children:r}),e.jsxs("form",{onSubmit:C,children:[e.jsx("div",{style:{fontFamily:h,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:R,marginBottom:"12px"},children:"Verification Code"}),e.jsx("input",{type:"text",value:k,onChange:I=>m(I.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,autoFocus:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:y,fontFamily:h,fontSize:"28px",letterSpacing:"10px",textAlign:"center",padding:"16px 0",outline:"none",marginBottom:"32px"}}),e.jsx("button",{type:"submit",className:"btn primary",disabled:w||k.length!==6,style:{width:"100%",justifyContent:"center"},children:w?"Verifying":"Verify "})]}),e.jsxs("button",{onClick:()=>{v(!1),m(""),s("")},style:{fontFamily:h,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:U,background:"none",border:"none",cursor:"pointer",marginTop:"20px",padding:0},children:[""," Back to sign in"]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:0,borderBottom:"1px solid rgba(255,255,255,.04)",marginBottom:"36px"},children:[e.jsx("button",{onClick:()=>{i(!1),s("")},type:"button",style:{fontFamily:h,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:o?R:y,background:"none",border:"none",borderBottom:o?"1px solid transparent":"1px solid "+U,padding:"10px 20px 10px 0",cursor:"pointer"},children:"Sign In"}),e.jsx("button",{onClick:()=>{i(!0),s("")},type:"button",style:{fontFamily:h,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:o?y:R,background:"none",border:"none",borderBottom:o?"1px solid "+U:"1px solid transparent",padding:"10px 20px",cursor:"pointer"},children:"Register"})]}),r&&e.jsx("p",{style:{color:"rgba(214,92,92,.95)",fontFamily:h,fontSize:"11px",letterSpacing:"1px",marginBottom:"24px"},children:r}),e.jsxs("form",{onSubmit:A,children:[o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"28px"},children:[e.jsx("label",{style:{display:"block",fontFamily:h,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:R,marginBottom:"12px"},children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Jane Smith",value:l.full_name,onChange:I=>c({...l,full_name:I.target.value}),required:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:y,fontFamily:h,fontSize:"14px",padding:"10px 0",outline:"none"}})]}),e.jsxs("div",{style:{marginBottom:"28px"},children:[e.jsx("label",{style:{display:"block",fontFamily:h,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:R,marginBottom:"12px"},children:"Organization"}),e.jsx("input",{type:"text",placeholder:"Acme Robotics Inc.",value:l.organization_name,onChange:I=>c({...l,organization_name:I.target.value}),required:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:y,fontFamily:h,fontSize:"14px",padding:"10px 0",outline:"none"}})]})]}),e.jsxs("div",{style:{marginBottom:"28px"},children:[e.jsx("label",{style:{display:"block",fontFamily:h,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:R,marginBottom:"12px"},children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"you@company.com",value:l.email,onChange:I=>c({...l,email:I.target.value}),required:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:y,fontFamily:h,fontSize:"14px",padding:"10px 0",outline:"none"}})]}),e.jsxs("div",{style:{marginBottom:"36px"},children:[e.jsx("label",{style:{display:"block",fontFamily:h,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:R,marginBottom:"12px"},children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:d?"text":"password",placeholder:"".repeat(12),value:l.password,onChange:I=>c({...l,password:I.target.value}),required:!0,style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:y,fontFamily:h,fontSize:"14px",padding:"10px 0",paddingRight:"40px",outline:"none"}}),e.jsx("button",{type:"button",onClick:()=>p(!d),style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:R,padding:"4px"},children:d?e.jsx(fi,{size:14}):e.jsx(hi,{size:14})})]})]}),e.jsx("button",{type:"submit",className:"btn primary",style:{width:"100%",justifyContent:"center"},children:o?"Create Account ":"Sign In "})]}),!o&&e.jsx("a",{href:"mailto:support@sentinelauthority.org?subject=Password%20Reset%20Request",style:{fontFamily:h,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:U,marginTop:"20px",display:"inline-block"},children:"Forgot password?"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.04)",marginTop:"48px",paddingTop:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontFamily:h,fontSize:"9px",letterSpacing:"1.5px",color:R,textTransform:"uppercase"},children:"Powered by ENVELO Interlock"}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsx("a",{href:"https://sentinelauthority.org",style:{fontFamily:h,fontSize:"9px",letterSpacing:"1.5px",color:U},children:"Main Site"}),e.jsx("a",{href:"https://sentinelauthority.org/privacy.html",style:{fontFamily:h,fontSize:"9px",letterSpacing:"1.5px",color:U},children:"Privacy"}),e.jsx("a",{href:"https://sentinelauthority.org/terms.html",style:{fontFamily:h,fontSize:"9px",letterSpacing:"1.5px",color:U},children:"Terms"})]})]})]})]})}function Z({children:t,className:n="",style:a={},...o}){return e.jsx("div",{className:`panel ${n}`,style:a,...o,children:t})}function ge({label:t,value:n,sublabel:a,subtitle:o,color:i,icon:r,onClick:s,className:l=""}){const c=a||o;return e.jsx("div",{className:`stat-card ${l}`,"data-clickable":s?"true":void 0,onClick:s,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:"var(--text-tertiary)",marginBottom:"10px"},children:t}),e.jsx("div",{style:{fontFamily:"var(--serif)",fontSize:"28px",fontWeight:"normal",color:i||"var(--text-primary)",letterSpacing:"-0.02em",lineHeight:1},children:n}),c&&e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"10px",letterSpacing:"1px",color:"rgba(255,255,255,.38)",marginTop:"8px"},children:c})]}),r&&e.jsx("div",{style:{opacity:.5,color:i||"var(--text-tertiary)"},children:r})]})})}function ds({icon:t,title:n,message:a,description:o,action:i}){const r=a||o;return e.jsxs("div",{style:{textAlign:"center",padding:"48px 20px",fontFamily:"var(--mono)"},children:[t&&e.jsx("div",{style:{marginBottom:"16px",opacity:.4,display:"flex",justifyContent:"center"},children:xe.isValidElement(t)?t:e.jsx(t,{size:28,strokeWidth:1.5})}),n&&e.jsx("div",{style:{fontFamily:"var(--serif)",fontSize:"20px",fontWeight:"normal",color:"var(--text-secondary)",marginBottom:"8px"},children:n}),r&&e.jsx("div",{style:{fontSize:"12px",letterSpacing:"0.5px",color:"var(--text-tertiary)",maxWidth:"380px",margin:"0 auto",lineHeight:1.7},children:r}),i&&e.jsx("div",{style:{marginTop:"20px"},children:i})]})}function ps(){var h;ke();const{user:t}=de();ve();const n=Oe(),[a,o]=u.useState([]),[i,r]=u.useState([]),[s,l]=u.useState(!0),[c,d]=u.useState(null),[p,f]=u.useState([]);u.useEffect(()=>{Promise.all([L.get("/api/applications/").catch(()=>({data:[]})),L.get("/api/certificates/").catch(()=>({data:[]})),L.get("/api/envelo/monitoring/overview").catch(()=>({data:null})),L.get("/api/audit/my-logs?limit=5&offset=0").catch(()=>({data:{logs:[]}}))]).then(([x,y,T,R])=>{o(x.data.applications||x.data||[]),r(y.data||[]),T.data&&d(T.data),f(R.data.logs||R.data||[]),l(!1)})},[]);const v=[{key:"pending",label:"Submitted"},{key:"under_review",label:"In Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"}],k=x=>v.findIndex(y=>y.key===x),m=x=>x==="conformant"?"var(--accent-green)":x==="revoked"||x==="suspended"?"var(--accent-red)":x==="testing"||x==="approved"?"var(--purple-bright)":"var(--accent-amber)",w=x=>{switch(x){case"pending":return"Awaiting review";case"under_review":return"Under evaluation";case"approved":return"Preparing CAT-72";case"testing":return"Test in progress";case"conformant":return"Certificate issued";case"revoked":return"Suspended";default:return"Pending"}};if(s)return e.jsx("div",{className:"hud-label",style:{padding:"60px",textAlign:"center"},children:"Loading"});const A=((c==null?void 0:c.sessions)||[]).filter(x=>{const y=x.last_heartbeat_at||x.last_telemetry_at||x.last_activity||x.started_at;return x.status==="active"&&y&&Date.now()-new Date(y).getTime()<12e4}).length,C=((h=c==null?void 0:c.summary)==null?void 0:h.total)||0;return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--purple-bright)",letterSpacing:"4px",display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:"var(--purple-bright)"}}),"ODDC CERTIFICATION"]}),e.jsxs("h1",{style:{fontFamily:"var(--serif)",fontSize:"clamp(26px,5vw,38px)",fontWeight:200,margin:"0 0 6px",letterSpacing:"-0.02em"},children:["Welcome",t!=null&&t.full_name?`, ${t.full_name.split(" ")[0]}`:""]}),e.jsxs("p",{style:{color:"var(--text-tertiary)",fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px"},children:[new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),t!=null&&t.organization_name?`  ${t.organization_name}`:""]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0",marginBottom:"32px",borderTop:"none",borderBottom:"none"},children:[e.jsx(ge,{onClick:()=>n("/applications"),label:"Applications",value:a.length,color:"var(--purple-bright)",icon:e.jsx(at,{size:16,strokeWidth:1.5}),sublabel:a.filter(x=>x.state==="pending"||x.state==="under_review").length>0?`${a.filter(x=>x.state==="pending"||x.state==="under_review").length} in review`:null}),e.jsx(ge,{onClick:()=>n("/certificates"),label:"Certificates",value:i.length,color:"var(--accent-green)",icon:e.jsx(cn,{size:16,strokeWidth:1.5}),sublabel:i.filter(x=>x.state==="conformant").length>0?`${i.filter(x=>x.state==="conformant").length} active`:null}),e.jsx(ge,{onClick:()=>n("/cat72"),label:"Active Tests",value:a.filter(x=>x.state==="testing").length,color:"var(--accent-amber)",icon:e.jsx(dn,{size:16,strokeWidth:1.5})}),e.jsx(ge,{onClick:()=>n("/monitoring"),label:"Live Status",value:C>0?A:"",color:C>0?A>0?"var(--accent-green)":"var(--accent-amber)":"var(--text-tertiary)",icon:e.jsx(sa,{size:16,strokeWidth:1.5}),sublabel:C>0?A>0?`${A} of ${C} online`:"All offline":null})]}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("span",{className:"hud-label",children:"Your Applications"}),a.length>0&&e.jsx(oe,{to:"/applications",className:"hud-link",style:{fontSize:"10px"},children:"View All "})]}),a.length===0?e.jsxs("div",{className:"hud-frame",style:{textAlign:"center",padding:"48px 20px"},children:[e.jsx("i",{}),e.jsx($e,{size:28,strokeWidth:1,style:{color:"var(--purple-bright)",opacity:.4,marginBottom:"16px"}}),e.jsx("p",{style:{fontFamily:"var(--serif)",fontSize:"17px",color:"var(--text-secondary)",marginBottom:"8px"},children:"Begin Your Certification"}),e.jsx("p",{style:{fontSize:"12px",color:"var(--text-tertiary)",maxWidth:"360px",margin:"0 auto 20px",lineHeight:1.7},children:"Submit your autonomous system for ODDC certification. Our CAT-72 test validates real-time boundary enforcement over 72 hours."}),e.jsxs(oe,{to:"/applications/new",className:"btn primary",children:[e.jsx(la,{size:12})," New Application"]})]}):e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),a.map((x,y)=>{var R;const T=k(x.state);return e.jsx(oe,{to:`/applications/${x.id}`,style:{textDecoration:"none",display:"block"},children:e.jsxs("div",{className:"hud-row",style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",paddingTop:"14px",paddingBottom:"14px"},children:[e.jsx("span",{className:"hud-num",style:{minWidth:"20px"},children:String(y+1).padStart(2,"0")}),e.jsx("span",{className:"hud-dot",style:{background:m(x.state),marginRight:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{className:"hud-title",children:x.system_name}),e.jsxs("div",{style:{fontFamily:"var(--mono)",fontSize:"10px",letterSpacing:"1px",color:"var(--text-tertiary)",marginTop:"2px"},children:[x.application_number,"  ",w(x.state)]})]}),e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:m(x.state)},children:(R=x.state)==null?void 0:R.replace(/_/g," ")}),e.jsx("div",{style:{display:"flex",gap:"2px",width:"60px"},children:v.map((U,I)=>e.jsx("div",{className:"sa-fill",style:{flex:1,height:"3px","--sa-bg":I<=T?m(x.state):"rgba(255,255,255,0.04)"}},U.key))})]})},x.id)})]})]}),i.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("span",{className:"hud-label",style:{marginBottom:"16px",display:"block"},children:"Your Certificates"}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),i.map((x,y)=>e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"13px",color:"var(--accent-green)",letterSpacing:"1px"},children:x.certificate_number}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"2px"},children:["Issued: ",x.issued_at?new Date(x.issued_at).toLocaleDateString():"",x.expires_at?`  Expires: ${new Date(x.expires_at).toLocaleDateString()}`:""]})]}),e.jsxs("a",{href:`${Le}/api/certificates/${x.certificate_number}/pdf`,target:"_blank",className:"btn",style:{padding:"6px 14px",fontSize:"9px"},children:[e.jsx(qe,{size:11})," PDF"]})]},x.id))]})]}),i.length===0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("span",{className:"hud-label",style:{marginBottom:"16px",display:"block"},children:"Certificates"}),e.jsx("div",{style:{textAlign:"center",padding:"32px 20px",borderTop:"none"},children:e.jsx("p",{style:{fontSize:"12px",color:"var(--text-tertiary)",fontFamily:"var(--mono)",letterSpacing:"0.5px"},children:"Certificates are issued after your system passes the 72-hour CAT-72 conformance test."})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("span",{className:"hud-label",children:"Recent Activity"}),e.jsx(oe,{to:"/my-activity",className:"hud-link",style:{fontSize:"10px"},children:"View All "})]}),p.length===0?e.jsx("p",{style:{color:"var(--text-tertiary)",fontSize:"12px",fontFamily:"var(--mono)",textAlign:"center",padding:"20px 0"},children:"No activity yet"}):e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),p.map((x,y)=>{var D,M,b;const T={user_login:"Signed in",user_registered:"Account created",login_failed:"Failed login",application_submitted:"Application submitted",application_state_changed:"Status updated",application_deleted:"Application deleted",test_created:"CAT-72 test scheduled",test_started:"CAT-72 test started",test_completed:"CAT-72 test completed",certificate_issued:"Certificate issued",certificate_suspended:"Certificate suspended",certificate_revoked:"Certificate revoked",certificate_reinstated:"Certificate reinstated",api_key_created:"API key created",api_key_revoked:"API key revoked",password_changed:"Password changed",profile_updated:"Profile updated","2fa_enabled":"2FA enabled","2fa_disabled":"2FA disabled"},R={certificate_issued:"var(--accent-green)",test_completed:"var(--accent-green)",certificate_revoked:"var(--accent-red)",login_failed:"var(--accent-red)",certificate_suspended:"var(--accent-amber)",application_submitted:"var(--purple-bright)",test_created:"var(--purple-bright)"},U=T[x.action]||((D=x.action)==null?void 0:D.replace(/_/g," ")),I=R[x.action]||"rgba(157,140,207,0.5)",P=((M=x.details)==null?void 0:M.system_name)||((b=x.details)==null?void 0:b.application_number)||"",z=N=>{const _=Date.now()-new Date(N).getTime(),B=Math.floor(_/6e4);if(B<1)return"just now";if(B<60)return B+"m ago";const F=Math.floor(B/60);return F<24?F+"h ago":Math.floor(F/24)+"d ago"};return e.jsxs("div",{className:"hud-row",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{className:"hud-dot",style:{background:I,marginRight:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:U}),P&&e.jsx("span",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginLeft:"8px"},children:P})]}),e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",color:"var(--text-tertiary)",letterSpacing:"0.5px",flexShrink:0},children:x.timestamp?z(x.timestamp):""})]},x.id||y)})]})]})]})}function ms(){var I,P;const{user:t}=de(),n=ve(),a=ke(),o=Oe(),[i,r]=u.useState(null),[s,l]=u.useState([]),[c,d]=u.useState([]),[p,f]=u.useState([]),[v,k]=u.useState([]),[m,w]=u.useState(null),[g,A]=u.useState(!1),C=z=>{z&&A(!0),L.get("/api/dashboard/stats").then(D=>r(D.data)).catch(console.error),L.get("/api/dashboard/recent-applications").then(D=>l(D.data)).catch(console.error),L.get("/api/dashboard/active-tests").then(D=>d(D.data)).catch(console.error),L.get("/api/applications/").then(D=>f(D.data.applications||D.data||[])).catch(console.error),L.get("/api/dashboard/recent-certificates").then(D=>k(D.data)).catch(console.error),L.get("/api/envelo/monitoring/overview").then(D=>w(D.data)).catch(console.error),z&&setTimeout(()=>A(!1),800)};u.useEffect(()=>{C();const z=setInterval(C,3e4);return()=>clearInterval(z)},[]);const h={pending:p.filter(z=>z.state==="pending").length,under_review:p.filter(z=>z.state==="under_review").length,approved:p.filter(z=>z.state==="approved").length,testing:p.filter(z=>z.state==="testing").length,conformant:p.filter(z=>z.state==="conformant").length,revoked:p.filter(z=>z.state==="revoked"||z.state==="suspended").length},x=p.filter(z=>z.state==="pending"||z.state==="under_review"),y=async(z,D,M)=>{var b,N;if(await a({title:"Confirm",message:M+"?"}))try{if(await L.patch(`/api/applications/${z}/state?new_state=${D}`),D==="approved")try{await L.post("/api/apikeys/admin/provision",null,{params:{application_id:z,send_email:!0}}),n.show("Approved  API key provisioned","success")}catch{n.show("Approved","success")}C()}catch(_){n.show("Failed: "+(((N=(b=_.response)==null?void 0:b.data)==null?void 0:N.detail)||_.message),"error")}},T=((I=m==null?void 0:m.sessions)==null?void 0:I.filter(z=>{const D=z.last_heartbeat_at||z.last_telemetry_at||z.started_at;return z.status==="active"&&D&&Date.now()-new Date(D).getTime()<12e4}).length)||((P=m==null?void 0:m.summary)==null?void 0:P.active)||0,R=v.filter(z=>z.expires_at&&z.state==="conformant"&&new Date(z.expires_at)<new Date(Date.now()+30*24*60*60*1e3)).length,U=x.length+R;return e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"32px"},children:[e.jsxs("div",{children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--purple-bright)",letterSpacing:"4px",display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:"var(--purple-bright)"}}),"ADMINISTRATION"]}),e.jsxs("h1",{style:{fontFamily:"var(--serif)",fontSize:"clamp(26px,5vw,38px)",fontWeight:200,margin:"0 0 6px",letterSpacing:"-0.02em"},children:["Welcome",t!=null&&t.full_name?`, ${t.full_name.split(" ")[0]}`:""]}),e.jsx("p",{style:{color:"var(--text-tertiary)",fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px"},children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),e.jsxs("button",{onClick:()=>C(!0),className:"btn",style:{padding:"8px 16px"},children:[e.jsx(Ie,{size:12,style:g?{animation:"spin 0.8s linear infinite"}:{}})," ",g?"Refreshing":"Refresh"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"0",marginBottom:"32px",borderTop:"none",borderBottom:"none"},children:[e.jsx(ge,{label:"Applications",value:(i==null?void 0:i.total_applications)||0,color:"var(--purple-bright)",icon:e.jsx(at,{size:16,strokeWidth:1.5})}),e.jsx(ge,{onClick:()=>o("/cat72"),label:"Active Tests",value:(i==null?void 0:i.active_tests)||0,color:"var(--accent-amber)",icon:e.jsx(dn,{size:16,strokeWidth:1.5})}),e.jsx(ge,{label:"Active Certs",value:(i==null?void 0:i.certificates_active)||0,color:"var(--accent-green)",icon:e.jsx($e,{size:16,strokeWidth:1.5})}),e.jsx(ge,{label:"Online Interlocks",value:T,color:T>0?"var(--accent-green)":"var(--text-tertiary)",icon:e.jsx(sa,{size:16,strokeWidth:1.5})}),e.jsx(ge,{label:"Certs Issued",value:(i==null?void 0:i.certificates_issued)||0,color:"var(--purple-bright)",icon:e.jsx(cn,{size:16,strokeWidth:1.5})}),e.jsx(ge,{label:"Needs Action",value:U,color:U>0?"var(--accent-amber)":"var(--text-tertiary)",icon:e.jsx(yi,{size:16,strokeWidth:1.5})})]}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Certification Pipeline"}),e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)",letterSpacing:"1px"},children:[p.length," total"]})]}),e.jsxs("div",{style:{display:"flex",gap:"2px",height:"28px",overflow:"hidden"},children:[[{key:"pending",label:"Pending",color:"var(--accent-amber)",count:h.pending},{key:"review",label:"Review",color:"var(--accent-amber)",count:h.under_review},{key:"approved",label:"Approved",color:"var(--purple-bright)",count:h.approved},{key:"testing",label:"Testing",color:"var(--purple-bright)",count:h.testing},{key:"conformant",label:"Conformant",color:"var(--accent-green)",count:h.conformant},{key:"suspended",label:"Suspended",color:"var(--accent-red)",count:h.revoked}].map(z=>{const D=p.length||1,M=Math.max(z.count/D*100,z.count>0?8:0);return z.count>0?e.jsx("div",{className:"sa-fill",style:{width:`${M}%`,minWidth:"48px",display:"flex",alignItems:"center",justifyContent:"center","--sa-bg":"rgba(255,255,255,0.02)","--sa-accent":z.color,borderLeftWidth:"2px"},title:`${z.label}: ${z.count}`,children:e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1px",color:z.color,whiteSpace:"nowrap"},children:[z.count," ",z.label]})},z.key):null}),p.length===0&&e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.02)"},children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)",letterSpacing:"1px"},children:"No applications yet"})})]})]}),x.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("span",{className:"hud-label",style:{color:"var(--accent-amber)",marginBottom:"12px",display:"block"},children:[" REVIEW QUEUE (",x.length,")"]}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),x.slice(0,5).map((z,D)=>{var M;return e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",minWidth:0,flex:1},children:[e.jsx("span",{className:"hud-num",children:String(D+1).padStart(2,"0")}),e.jsx("span",{className:"hud-dot",style:{background:z.state==="pending"?"var(--accent-amber)":"var(--purple-bright)",marginRight:0}}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx(oe,{to:`/applications/${z.id}`,className:"hud-title",style:{textDecoration:"none",color:"var(--text-primary)"},children:z.system_name}),e.jsxs("div",{style:{fontSize:"10px",color:"var(--text-tertiary)",fontFamily:"var(--mono)",letterSpacing:"0.5px"},children:[z.organization_name,"  ",(M=z.state)==null?void 0:M.replace(/_/g," ")]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexShrink:0},children:[z.state==="pending"&&e.jsx("button",{onClick:()=>y(z.id,"under_review",`Begin review for ${z.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px"},children:"Review"}),e.jsx("button",{onClick:()=>y(z.id,"approved",`Approve ${z.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px",color:"var(--accent-green)",borderColor:"rgba(92,214,133,0.2)"},children:"Approve"}),e.jsx("button",{onClick:()=>y(z.id,"suspended",`Suspend ${z.system_name}`),className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px",color:"var(--accent-red)",borderColor:"rgba(214,92,92,0.2)"},children:"Suspend"}),e.jsx(oe,{to:`/applications/${z.id}`,className:"btn",style:{padding:"5px 10px",fontSize:"8px",letterSpacing:"1px"},children:"View"})]})]},z.id)})]})]}),c.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Active CAT-72 Tests"}),e.jsx(oe,{to:"/cat72",className:"hud-link",style:{fontSize:"10px"},children:"Console "})]}),e.jsxs("div",{className:"hud-frame",children:[e.jsx("i",{}),c.map((z,D)=>{const M=Math.round(z.elapsed_seconds/(z.duration_hours*3600)*100),b=Math.max(0,(z.duration_hours*3600-z.elapsed_seconds)/3600).toFixed(1);return e.jsxs("div",{className:"hud-row",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"1px",color:"var(--purple-bright)"},children:[z.organization_name,"  ",z.system_name]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--text-tertiary)"},children:[b,"h remaining"]}),e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--accent-amber)"},children:[M,"%"]})]})]}),e.jsx("div",{className:"sa-fill",style:{height:"3px","--sa-bg":"rgba(255,255,255,0.04)",overflow:"hidden"},children:e.jsx("div",{className:"sa-fill",style:{height:"100%",width:`${M}%`,"--sa-bg":M>=100?"var(--accent-green)":"var(--purple-bright)",transition:"width 0.4s ease"}})})]},z.id)})]})]}),(()=>{const z=v.filter(D=>D.expires_at&&D.state==="conformant"&&new Date(D.expires_at)<new Date(Date.now()+2592e6));return z.length===0?null:e.jsx("div",{style:{marginBottom:"32px"},children:e.jsxs("div",{className:"hud-frame hud-frame-amber",children:[e.jsx("i",{}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(We,{size:14,style:{color:"var(--accent-amber)"}}),e.jsxs("span",{className:"hud-label",style:{color:"var(--accent-amber)"},children:[z.length," Certificate",z.length>1?"s":""," Expiring Within 30 Days"]})]}),z.map(D=>{const M=Math.ceil((new Date(D.expires_at)-Date.now())/864e5);return e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px"},children:D.system_name}),e.jsx("span",{style:{color:"var(--text-tertiary)",fontSize:"11px",marginLeft:"10px"},children:D.organization_name})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:M<=7?"var(--accent-red)":"var(--accent-amber)"},children:[M,"d remaining"]}),e.jsx(oe,{to:`/verify?cert=${D.certificate_number}`,className:"hud-link",style:{fontSize:"10px"},children:D.certificate_number})]})]},D.id)})]})})})(),v.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Recent Certificates"}),e.jsx(oe,{to:"/certificates",className:"hud-link",style:{fontSize:"10px"},children:"View All "})]}),e.jsx(Z,{children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:["Certificate","System","Status","Issued","Expires"].map(z=>e.jsx("th",{children:z},z))})}),e.jsx("tbody",{children:v.slice(0,5).map(z=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(oe,{to:`/verify?cert=${z.certificate_number}`,style:{color:"var(--purple-bright)",fontFamily:"var(--mono)",fontSize:"12px",letterSpacing:"0.5px"},children:z.certificate_number})}),e.jsxs("td",{children:[e.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px"},children:z.system_name})," ",e.jsx("span",{style:{color:"var(--text-tertiary)",fontSize:"11px"},children:z.organization_name})]}),e.jsx("td",{children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:z.state==="conformant"?"var(--accent-green)":"var(--accent-red)"},children:z.state})}),e.jsx("td",{style:{color:"var(--text-tertiary)",fontSize:"12px"},children:z.issued_at?new Date(z.issued_at).toLocaleDateString():""}),e.jsx("td",{style:{fontFamily:"var(--mono)",fontSize:"11px",color:z.expires_at&&new Date(z.expires_at)<new Date(Date.now()+30*24*60*60*1e3)?"var(--accent-amber)":"var(--text-tertiary)"},children:z.expires_at?new Date(z.expires_at).toLocaleDateString():""})]},z.id))})]})})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{className:"hud-label",children:"Recent Applications"}),e.jsx(oe,{to:"/applications",className:"hud-link",style:{fontSize:"10px"},children:"View All "})]}),e.jsx(Z,{children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:["System","Organization","State","Submitted"].map(z=>e.jsx("th",{children:z},z))})}),e.jsx("tbody",{children:s.map(z=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>o(`/applications/${z.id}`),children:[e.jsx("td",{children:e.jsx(oe,{to:`/applications/${z.id}`,style:{color:"var(--purple-bright)"},children:z.system_name})}),e.jsx("td",{children:z.organization_name}),e.jsx("td",{children:e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:z.state==="conformant"?"var(--accent-green)":z.state==="revoked"?"var(--accent-red)":z.state==="testing"||z.state==="approved"?"var(--purple-bright)":"var(--accent-amber)"},children:z.state})}),e.jsx("td",{style:{color:"var(--text-tertiary)",fontSize:"13px"},children:z.submitted_at?new Date(z.submitted_at).toLocaleDateString():""})]},z.id))})]})})})]})]})}function us(){const{user:t}=de();return(t==null?void 0:t.role)==="admin"?e.jsx(ms,{}):e.jsx(ps,{})}function gs({isOpen:t,onClose:n,onImport:a,boundaryType:o}){const[i,r]=xe.useState(""),[s,l]=xe.useState("json"),[c,d]=xe.useState(""),[p,f]=xe.useState(null),v={numeric:{json:'[{"name":"Speed Limit","parameter":"speed","min_value":0,"max_value":100,"unit":"km/h","tolerance":5}]',csv:`name,parameter,min_value,max_value,hard_limit,unit,tolerance
Speed Limit,speed,0,100,120,km/h,5`},geo:{json:'[{"name":"Operating Zone","boundary_type":"circle","lat":30.123,"lon":-97.456,"radius_meters":500}]',csv:`name,boundary_type,lat,lon,radius_meters,altitude_max
Operating Zone,circle,30.123,-97.456,500,120`},time:{json:'[{"name":"Business Hours","start_hour":6,"end_hour":22,"timezone":"America/Chicago","days":[0,1,2,3,4]}]',csv:`name,start_hour,end_hour,timezone,days
Business Hours,6,22,America/Chicago,0;1;2;3;4`},state:{json:'[{"name":"Mode Check","parameter":"mode","allowed_values":"autonomous,semi-auto","forbidden_values":"manual_override"}]',csv:`name,parameter,allowed_values,forbidden_values
Mode Check,mode,"autonomous,semi-auto",manual_override`}},k=()=>{d(""),f(null);try{let m=[];if(s==="json"){const w=JSON.parse(i);m=Array.isArray(w)?w:[w]}else{const w=i.trim().split(`
`);if(w.length<2)throw new Error("CSV needs header + data rows");const g=w[0].split(",").map(A=>A.trim());m=w.slice(1).map(A=>{const C=A.match(/(".*?"|[^,]+)/g)||[],h={};return g.forEach((x,y)=>{let T=(C[y]||"").replace(/^"|"$/g,"").trim();x==="days"?h[x]=T.split(";").map(Number):["min_value","max_value","hard_limit","tolerance","lat","lon","radius_meters","altitude_min","altitude_max","start_hour","end_hour"].includes(x)?h[x]=T===""?"":T:h[x]=T}),h})}if(m.length===0)throw new Error("No data found");f(m)}catch(m){d(m.message)}};return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:n,children:e.jsxs("div",{style:{background:"#1a1a2e",border:"1px solid rgba(157,140,207,0.2)",padding:"32px",maxWidth:"min(700px, 95vw)",width:"100%",maxHeight:"80vh",overflowY:"auto"},onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"20px",fontWeight:200,margin:0},children:["Bulk Import  ",o]}),e.jsx("button",{onClick:n,style:{background:"none",border:"none",color:"#6a6a80",fontSize:"20px",cursor:"pointer"},children:""})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[["json","csv"].map(m=>e.jsx("button",{onClick:()=>{l(m),d(""),f(null)},style:{padding:"6px 16px",border:"1px solid "+(s===m?"#8b5cf6":"rgba(255,255,255,0.1)"),background:s===m?"rgba(139,92,246,0.15)":"transparent",color:s===m?"#8b5cf6":"#a0a0b0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:m},m)),e.jsx("button",{onClick:()=>{var m;return r(((m=v[o])==null?void 0:m[s])||"")},style:{marginLeft:"auto",padding:"6px 12px",border:"1px solid rgba(255,255,255,0.1)",background:"transparent",color:"#a0a0b0",fontSize:"11px",cursor:"pointer"},children:"Load Example"})]}),e.jsx("textarea",{value:i,onChange:m=>r(m.target.value),rows:10,placeholder:s==="json"?"Paste JSON array of boundaries...":"Paste CSV with header row...",style:{width:"100%",background:"rgba(255,255,255,.05)",border:"1px solid rgba(255,255,255,0.1)",padding:"12px",color:"#e8e8f0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",lineHeight:"1.5",resize:"vertical",outline:"none"}}),c&&e.jsxs("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"8px"},children:[" ",c]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[e.jsx("button",{onClick:k,style:{padding:"8px 20px",border:"1px solid #8b5cf6",background:"transparent",color:"#8b5cf6",fontSize:"12px",cursor:"pointer"},children:"Preview"}),p&&e.jsxs("button",{onClick:()=>{a(p),n(),r(""),f(null)},style:{padding:"8px 20px",border:"none",background:"transparent",color:"rgba(255,255,255,.94)",fontSize:"12px",cursor:"pointer",fontWeight:500},children:["Import ",p.length," ",p.length===1?"boundary":"boundaries"]})]}),p&&e.jsxs("div",{style:{marginTop:"16px",background:"transparent",padding:"12px",maxHeight:"200px",overflowY:"auto"},children:[e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"#6a6a80",marginBottom:"8px"},children:["PREVIEW (",p.length," rows)"]}),p.map((m,w)=>e.jsx("div",{style:{fontSize:"11px",color:"#a0a0b0",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Object.entries(m).map(([g,A])=>`${g}: ${A}`).join("  ")},w))]})]})}):null}function xs(){const t=ve(),{user:n}=de(),a=ke(),[o,i]=u.useState([]),[r,s]=u.useState(0),[l,c]=u.useState({}),[d,p]=u.useState("all"),[f,v]=u.useState(""),[k,m]=u.useState(new Set),[w,g]=u.useState(!1),A=P=>m(z=>{const D=new Set(z);return D.has(P)?D.delete(P):D.add(P),D}),C=()=>m(new Set(U.map(P=>P.id))),h=()=>m(new Set),x=async(P,z)=>{var b,N;const D=[...k];if(D.length===0)return;const M=P==="delete"?`Delete ${D.length} application(s)?`:`${P} ${D.length} application(s)?`;if(await a({title:"Confirm",message:M})){g(!0);try{P==="delete"?await L.post("/api/applications/bulk-delete",{ids:D}):await L.post("/api/applications/bulk-state",{ids:D,new_state:z}),m(new Set),y()}catch(_){t.show("Bulk operation failed: "+(((N=(b=_.response)==null?void 0:b.data)==null?void 0:N.detail)||_.message),"error")}g(!1)}},y=(P="",z="all")=>{const D={};P&&(D.search=P),z&&z!=="all"&&(D.state=z),L.get("/api/applications/",{params:D}).then(M=>{i(M.data.applications||M.data),s(M.data.total??(M.data.applications||M.data).length),c(M.data.state_counts||{})}).catch(console.error)};u.useEffect(()=>{y()},[]),u.useEffect(()=>{const P=setTimeout(()=>{y(f,d)},300);return()=>clearTimeout(P)},[f,d]);const T=async(P,z,D)=>{var M,b;if(await a({title:"Confirm",message:D+"?"}))try{await L.patch(`/api/applications/${P}/state?new_state=${z}`),y()}catch(N){t.show("Failed: "+(((b=(M=N.response)==null?void 0:M.data)==null?void 0:b.detail)||N.message),"error")}},R=[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"under_review",label:"Review"},{key:"approved",label:"Approved"},{key:"testing",label:"Testing"},{key:"conformant",label:"Conformant"},{key:"revoked",label:"Suspended"}],U=o,I=P=>P==="conformant"?"#5CD685":P==="revoked"||P==="suspended"?"#D65C5C":P==="testing"||P==="approved"?"#a896d6":"#D6A05C";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:(n==null?void 0:n.role)==="admin"?"Conformance":"My Organization"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:(n==null?void 0:n.role)==="admin"?"Applications":"Certification Status"})]})}),(n==null?void 0:n.role)==="admin"&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"min(400px, 90vw)"},children:[e.jsx(wt,{className:"w-4 h-4",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,.50)"}}),e.jsx("input",{value:f,onChange:P=>v(P.target.value),placeholder:"Search by name, org, or ID...",style:{width:"100%",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px 8px 36px",color:"rgba(255,255,255,.94)",fontSize:"13px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",outline:"none"}})]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[U.length," of ",r]})]}),(n==null?void 0:n.role)==="admin"&&e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:R.map(P=>{const z=P.key==="all"?l.all||0:P.key==="revoked"?(l.suspended||0)+(l.revoked||0):l[P.key]||0;return e.jsxs("button",{onClick:()=>p(P.key),style:{padding:"6px 14px",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",background:d===P.key?"rgba(157,140,207,0.2)":"rgba(255,255,255,0.03)",border:`1px solid ${d===P.key?"#a896d6":"rgba(255,255,255,.07)"}`,color:d===P.key?"#a896d6":"rgba(255,255,255,.50)"},children:[P.label," ",z>0?`(${z})`:""]},P.key)})}),e.jsxs(Z,{children:[e.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{className:"w-full",style:{minWidth:"700px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[(n==null?void 0:n.role)==="admin"&&e.jsx("th",{className:"px-2 py-3 text-center",style:{width:"40px"},children:e.jsx("input",{type:"checkbox",checked:k.size>0&&k.size===U.length,onChange:P=>P.target.checked?C():h(),style:{cursor:"pointer",accentColor:"#a896d6"}})}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"System Name"}),(n==null?void 0:n.role)==="admin"&&e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"State"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Submitted"}),(n==null?void 0:n.role)==="admin"&&e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:U.map(P=>{var z;return e.jsxs("tr",{className:"transition-colors",style:{borderBottom:"1px solid rgba(255,255,255,.07)",background:k.has(P.id)?"rgba(157,140,207,0.08)":"transparent"},children:[(n==null?void 0:n.role)==="admin"&&e.jsx("td",{className:"px-2 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:k.has(P.id),onChange:()=>A(P.id),style:{cursor:"pointer",accentColor:"#a896d6"}})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx(oe,{to:`/applications/${P.id}`,style:{color:"#a896d6",textDecoration:"none"},children:P.system_name}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",marginTop:"2px"},children:P.application_number})]}),(n==null?void 0:n.role)==="admin"&&e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.78)"},children:P.organization_name}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1",style:{background:`${I(P.state)}06`,color:I(P.state),border:`1px solid ${I(P.state)}10`,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:(z=P.state)==null?void 0:z.replace("_"," ")})}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:P.submitted_at?new Date(P.submitted_at).toLocaleDateString():"N/A"}),(n==null?void 0:n.role)==="admin"&&e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[P.state==="pending"&&e.jsx("button",{onClick:D=>{D.stopPropagation(),T(P.id,"under_review",`Begin review for ${P.system_name}`)},className:"btn",style:{padding:"4px 10px",color:"#D6A05C"},children:"Review"}),(P.state==="pending"||P.state==="under_review")&&e.jsx("button",{onClick:D=>{D.stopPropagation(),T(P.id,"approved",`Approve ${P.system_name}`)},className:"btn",style:{padding:"4px 10px",color:"#5CD685"},children:"Approve"}),P.state==="approved"&&e.jsx(oe,{to:`/applications/${P.id}`,className:"px-2 py-1 no-underline btn",children:"Schedule Test"}),P.state==="conformant"&&e.jsx("span",{style:{color:"#5CD685",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px"},children:" Certified"}),P.state==="testing"&&e.jsx(oe,{to:"/cat72",className:"px-2 py-1 no-underline btn",children:"View Test"}),["pending","under_review","approved","testing","conformant"].includes(P.state)&&e.jsx("button",{onClick:D=>{D.stopPropagation(),T(P.id,"suspended",`Suspend ${P.system_name}`)},className:"btn",style:{padding:"4px 10px",color:"#D65C5C"},children:"Suspend"}),(P.state==="suspended"||P.state==="revoked")&&e.jsx("button",{onClick:D=>{D.stopPropagation(),T(P.id,"pending",`Reinstate ${P.system_name} to pending`)},className:"btn",style:{padding:"4px 10px",color:"#5CD685"},children:"Reinstate"})]})})]},P.id)})})]})}),k.size>0&&(n==null?void 0:n.role)==="admin"&&e.jsxs("div",{style:{position:"sticky",bottom:"16px",zIndex:50,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",padding:"12px 20px",margin:"16px",background:"rgba(18,12,30,0.95)",border:"1px solid #a896d6"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"#a896d6"},children:[k.size," selected"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>x("approve","approved"),disabled:w,className:"btn",style:{padding:"6px 14px",color:"var(--accent-green)"},children:"Approve"}),e.jsx("button",{onClick:()=>x("review","under_review"),disabled:w,className:"btn",style:{padding:"6px 14px",color:"#D6A05C"},children:"Review"}),e.jsx("button",{onClick:()=>x("suspend","suspended"),disabled:w,className:"btn",style:{padding:"6px 14px",color:"#D65C5C"},children:"Suspend"}),e.jsx("button",{onClick:()=>x("reinstate","pending"),disabled:w,className:"btn",style:{padding:"6px 14px",color:"var(--accent-green)"},children:"Reinstate"}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,.07)",margin:"0 4px"}}),e.jsx("button",{onClick:()=>x("delete"),disabled:w,className:"btn",style:{padding:"6px 14px",color:"#D65C5C"},children:"Delete"}),e.jsx("button",{onClick:h,className:"btn",children:"Cancel"}),w&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:"Processing..."})]})]}),U.length===0&&e.jsx(ds,{icon:at,title:"No Applications Found",description:o.length===0?"You haven't submitted any certification applications yet. Start your ODDC certification journey.":"No applications match your current filter."})]})]})}const fs=[{key:"ground_robots",label:"Ground Robots & Mobile Platforms"},{key:"aerial",label:"Aerial Systems (UAV / UAS)"},{key:"vehicles",label:"Autonomous Vehicles & Mobility"},{key:"marine",label:"Marine & Maritime"},{key:"medical",label:"Medical & Healthcare"},{key:"financial",label:"Financial & Trading"},{key:"energy",label:"Energy & Utilities"},{key:"manufacturing",label:"Manufacturing & Industrial"},{key:"defense",label:"Defense & Security"},{key:"agriculture",label:"Agriculture & Environment"},{key:"space_extreme",label:"Space & Extreme Environments"},{key:"telecom_digital",label:"Telecommunications & Digital Infrastructure"},{key:"construction",label:"Construction & Mining"},{key:"logistics",label:"Logistics & Supply Chain"},{key:"retail_hospitality",label:"Retail & Hospitality"},{key:"education_research",label:"Education & Research"},{key:"legal_compliance",label:"Legal & Compliance"},{key:"other",label:"Other / Custom"}],Ue={warehouse_amr_indoor:{label:"Warehouse AMR (Indoor)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:2,unit:"m/s",tolerance:.1},{name:"max_payload",min:0,max:500,unit:"kg",tolerance:5},{name:"max_shelf_height",min:0,max:8,unit:"m",tolerance:.1},{name:"min_obstacle_clearance",min:.3,max:null,unit:"m",tolerance:.05}],geo:{type:"polygon",description:"Warehouse floor plan boundary  excludes human-only zones, charging stations, loading docks during active operations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","navigating","picking","placing","charging","queued"],forbidden:["manual_override_disabled","sensor_degraded_navigation"]},odd_description:"Indoor warehouse environment with controlled lighting, flat concrete floors, marked aisles, and mixed human-robot zones. System operates within geofenced warehouse boundary with speed reduction in human-occupied zones.",safety:{violation_action:"block",fail_closed:!0,human_zone_speed_limit:.5,emergency_stop:!0}}},warehouse_amr_cold_storage:{label:"Warehouse AMR (Cold Storage)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:1.5,unit:"m/s",tolerance:.1},{name:"max_payload",min:0,max:400,unit:"kg",tolerance:5},{name:"min_operating_temp",min:-30,max:5,unit:"C",tolerance:1},{name:"max_continuous_cold_exposure",min:0,max:120,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Cold storage facility boundary  includes freezer zones, transition airlocks, excludes warm staging areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","navigating","picking","placing","charging","defrost_cycle"],forbidden:["battery_below_20pct_in_freezer","condensation_detected"]},odd_description:"Cold storage warehouse (-25C to 5C) with frost-resistant flooring, limited visibility, and mandatory defrost cycling. Robot must return to warm zone before battery threshold.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},last_mile_delivery_robot:{label:"Last-Mile Delivery Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:6,unit:"km/h",tolerance:.5},{name:"max_payload",min:0,max:25,unit:"kg",tolerance:1},{name:"max_range",min:0,max:30,unit:"km",tolerance:1},{name:"min_battery_for_return",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Approved sidewalk corridors and pedestrian zones  excludes roadways, private property beyond delivery points, restricted government areas"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"delivery_zone_local"},states:{allowed:["idle","en_route","delivering","returning","charging","waiting_pickup"],forbidden:["road_surface_detected","pedestrian_density_exceeded"]},odd_description:"Urban/suburban sidewalk environment during daylight and early evening. System navigates pedestrian infrastructure only, yields to all pedestrians, and maintains minimum battery reserve for return to base.",safety:{violation_action:"block",fail_closed:!0,max_pedestrian_proximity:.5,emergency_stop:!0}}},sidewalk_delivery_robot:{label:"Sidewalk Delivery Robot (Campus)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:4,unit:"km/h",tolerance:.5},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_incline",min:0,max:15,unit:"degrees",tolerance:1}],geo:{type:"polygon",description:"Campus pedestrian pathways  excludes vehicle roads, building interiors, construction zones"},time:{operating_hours:"07:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"campus_local"},states:{allowed:["idle","navigating","delivering","waiting","charging"],forbidden:["road_detected","stairway_detected"]},odd_description:"University or corporate campus pedestrian pathways. Flat to moderate grade, paved surfaces, mixed foot traffic. System operates during campus active hours only.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},campus_shuttle_low_speed:{label:"Campus Shuttle (Low-Speed AV)",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:12,unit:"persons",tolerance:0},{name:"max_grade",min:0,max:10,unit:"%",tolerance:.5},{name:"min_visibility",min:50,max:null,unit:"m",tolerance:5}],geo:{type:"polygon",description:"Fixed campus route with approved stops  excludes public roadways, parking structures, pedestrian-only zones"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"facility_local"},states:{allowed:["idle","en_route","stopped_at_station","loading","unloading","returning_to_depot"],forbidden:["off_route","door_open_while_moving","passenger_standing"]},odd_description:"Fixed-route low-speed shuttle on private campus roads. Controlled environment with designated stops, speed bumps, and pedestrian crossings. No public road interaction.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,emergency_stop:!0}}},security_patrol_robot:{label:"Security Patrol Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_patrol_radius",min:0,max:2e3,unit:"m",tolerance:10},{name:"min_battery_reserve",min:15,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Facility perimeter and approved patrol corridors  excludes public areas, sensitive restricted zones without clearance"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["patrolling","stationary_monitoring","returning_to_base","charging","alert_mode"],forbidden:["pursuit_mode","physical_intervention"]},odd_description:"Outdoor facility perimeter and indoor corridors. System performs observation and alerting only  no physical intervention capability. Operates in all weather within sensor limits.",safety:{violation_action:"block",fail_closed:!0,no_pursuit:!0,emergency_stop:!0}}},agricultural_field_robot:{label:"Agricultural Field Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:10,unit:"km/h",tolerance:.5},{name:"max_spray_rate",min:0,max:200,unit:"L/ha",tolerance:5},{name:"max_wind_speed",min:0,max:15,unit:"km/h",tolerance:1},{name:"buffer_zone_waterway",min:10,max:null,unit:"m",tolerance:1}],geo:{type:"polygon",description:"Defined field boundaries  excludes waterways, buffer zones, neighboring properties, public roads"},time:{operating_hours:"05:00-21:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","seeding","spraying","harvesting","transiting","charging"],forbidden:["wind_exceeded","rain_during_spray","near_waterway_while_spraying"]},odd_description:"Open agricultural field with GPS-defined boundaries. System operates on soil/crop surfaces in fair weather. Spray operations prohibited near waterways and above wind thresholds.",safety:{violation_action:"block",fail_closed:!0,spray_shutoff:!0,emergency_stop:!0}}},vineyard_orchard_robot:{label:"Vineyard / Orchard Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_arm_reach",min:0,max:2.5,unit:"m",tolerance:.05},{name:"max_cutting_force",min:0,max:50,unit:"N",tolerance:2}],geo:{type:"polygon",description:"Row-by-row vineyard/orchard boundary  excludes equipment sheds, irrigation infrastructure, public access paths"},time:{operating_hours:"06:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","navigating_row","pruning","harvesting","inspecting","returning"],forbidden:["human_in_arm_radius","row_end_exceeded"]},odd_description:"Structured vineyard or orchard rows with GPS-guided navigation. System moves along defined row paths and performs precision tasks within arm reach envelope.",safety:{violation_action:"block",fail_closed:!0,arm_retract_on_human:!0,emergency_stop:!0}}},hazmat_inspection_robot:{label:"Hazmat / CBRN Inspection Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.5},{name:"max_radiation_exposure",min:0,max:100,unit:"mSv/hr",tolerance:5},{name:"max_chemical_concentration",min:0,max:500,unit:"ppm",tolerance:10},{name:"max_mission_duration",min:0,max:240,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Designated hazmat zone with hot/warm/cold zone boundaries  robot must not exit hot zone without decontamination sequence"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["standby","entering_zone","inspecting","sampling","retreating","decontaminating"],forbidden:["human_follow_mode_in_hot_zone","sample_container_open_in_cold_zone"]},odd_description:"Hazardous material incident scene with defined exclusion zones. Robot operates in contaminated environments where human entry is prohibited or limited. All actions logged for incident command.",safety:{violation_action:"block",fail_closed:!0,auto_retreat_on_threshold:!0,emergency_stop:!0}}},tunnel_inspection_robot:{label:"Tunnel / Pipe Inspection Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:2,unit:"km/h",tolerance:.2},{name:"min_pipe_diameter",min:150,max:null,unit:"mm",tolerance:10},{name:"max_tether_length",min:0,max:500,unit:"m",tolerance:5},{name:"max_depth",min:0,max:100,unit:"m",tolerance:1}],geo:{type:"linear",description:"Defined tunnel or pipeline segment with entry/exit points  system must not exceed tether length or enter unmarked branches"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["standby","inserting","inspecting","retreating","data_upload"],forbidden:["tether_tension_exceeded","communication_lost_advancing"]},odd_description:"Confined pipe or tunnel environment with tethered operation. System advances along defined path, retreats on communication loss or tether limit. GPS-denied environment uses odometry and tether measurement.",safety:{violation_action:"block",fail_closed:!0,auto_retreat_on_comms_loss:!0,emergency_stop:!0}}},snow_removal_robot:{label:"Snow Removal / Grounds Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"km/h",tolerance:.5},{name:"max_plow_width",min:0,max:2,unit:"m",tolerance:.05},{name:"min_temperature",min:-40,max:5,unit:"C",tolerance:1},{name:"max_snow_depth",min:0,max:30,unit:"cm",tolerance:2}],geo:{type:"polygon",description:"Facility sidewalks and pathways  excludes vehicle lanes, building entrances during occupancy, garden areas"},time:{operating_hours:"03:00-07:00",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","plowing","salting","returning","charging"],forbidden:["pedestrian_detected_ahead","ice_on_slope_above_grade_limit"]},odd_description:"Outdoor facility pathways during winter conditions. System operates during low-traffic hours, clearing designated paths. Halts on pedestrian detection and avoids steep grades when icy.",safety:{violation_action:"block",fail_closed:!0,pedestrian_stop:!0,emergency_stop:!0}}},street_cleaning_robot:{label:"Street Cleaning Robot",domain:"ground_robots",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"km/h",tolerance:.5},{name:"max_water_usage",min:0,max:500,unit:"L/hr",tolerance:10},{name:"max_noise_level",min:0,max:70,unit:"dB",tolerance:2}],geo:{type:"polygon",description:"Approved pedestrian zones, sidewalks, plazas  excludes vehicle roadways, private property, construction zones"},time:{operating_hours:"04:00-07:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["idle","cleaning","refilling","returning","charging"],forbidden:["crowd_detected","event_zone_active"]},odd_description:"Urban pedestrian infrastructure during low-traffic hours. System follows predefined cleaning routes on paved surfaces. Noise-limited operation during early morning hours.",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}},small_survey_drone:{label:"Small Survey Drone (<25kg)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:35,unit:"km/h",tolerance:2},{name:"min_battery_for_rtl",min:25,max:null,unit:"%",tolerance:3},{name:"max_range_from_pilot",min:0,max:500,unit:"m",tolerance:10}],geo:{type:"polygon_3d",description:"Approved flight zone with altitude ceiling  excludes airports, restricted airspace, populated areas per Part 107"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","takeoff","surveying","hovering","returning","landing"],forbidden:["gps_lost_above_30m","battery_below_rtl_threshold","wind_exceeded"]},odd_description:"Visual line of sight operations in Class G airspace below 400ft AGL. Operations in fair weather with wind below threshold. System maintains return-to-launch battery reserve at all times.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},agricultural_spray_drone:{label:"Agricultural Spray Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:15,unit:"m",tolerance:1},{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_spray_rate",min:0,max:30,unit:"L/min",tolerance:1},{name:"max_wind_speed",min:0,max:15,unit:"km/h",tolerance:1},{name:"buffer_distance_waterway",min:30,max:null,unit:"m",tolerance:3}],geo:{type:"polygon",description:"Defined field boundary with spray buffer zones around waterways, neighboring properties, and roads"},time:{operating_hours:"05:00-10:00",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["grounded","spraying","transiting","refilling","returning"],forbidden:["wind_exceeded_during_spray","over_buffer_zone","tank_empty_pumping"]},odd_description:"Low-altitude precision spraying over defined agricultural fields. Early morning operations to minimize drift. Hard geofence around buffer zones with automatic spray shutoff.",safety:{violation_action:"block",fail_closed:!0,spray_auto_shutoff:!0,geofence_hard:!0,emergency_stop:!0}}},infrastructure_inspection_drone:{label:"Infrastructure Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:150,unit:"m",tolerance:3},{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:2},{name:"min_structure_clearance",min:3,max:null,unit:"m",tolerance:.5},{name:"max_wind_speed",min:0,max:30,unit:"km/h",tolerance:2}],geo:{type:"polygon_3d",description:"Approved inspection corridor around structure  includes buffer zones from public areas, roads, and occupied buildings"},time:{operating_hours:"07:00-17:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","en_route","inspecting","hovering","returning","landing"],forbidden:["proximity_alert_structure","gps_degraded_near_structure"]},odd_description:"Close-range inspection of bridges, towers, power lines, or buildings. Controlled airspace with NOTAM. System maintains minimum clearance from structure and auto-returns on sensor degradation.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,collision_avoidance:!0,emergency_stop:!0}}},delivery_drone_urban:{label:"Delivery Drone (Urban)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:70,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:5,unit:"kg",tolerance:.2},{name:"max_wind_speed",min:0,max:30,unit:"km/h",tolerance:2},{name:"min_battery_for_rtl",min:30,max:null,unit:"%",tolerance:3}],geo:{type:"corridor",description:"Approved flight corridors between depot and delivery zones  excludes restricted airspace, schools, hospitals, crowd areas"},time:{operating_hours:"08:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"delivery_zone_local"},states:{allowed:["grounded","en_route","hovering_delivery","descending","returning","landing"],forbidden:["crowd_below","restricted_airspace_entered","battery_below_rtl"]},odd_description:"Urban drone delivery along approved corridors in controlled low-altitude airspace. System avoids populated areas during transit, descends only at approved delivery points. Hard geofence on all corridor boundaries.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,parachute_deploy:!0,emergency_stop:!0}}},delivery_drone_rural:{label:"Delivery Drone (Rural / Suburban)",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:90,unit:"km/h",tolerance:3},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_range",min:0,max:30,unit:"km",tolerance:1},{name:"max_wind_speed",min:0,max:35,unit:"km/h",tolerance:2}],geo:{type:"corridor",description:"Approved rural flight paths  avoids populated areas, livestock, and restricted airspace"},time:{operating_hours:"06:00-20:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["grounded","en_route","delivering","returning","diverting","landing"],forbidden:["thunderstorm_detected","beyond_range_for_rtl"]},odd_description:"Rural and suburban delivery routes with extended range. Lower population density allows broader corridors. System maintains energy reserve for full return at all decision points.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},search_rescue_drone:{label:"Search & Rescue Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:200,unit:"m",tolerance:5},{name:"max_speed",min:0,max:80,unit:"km/h",tolerance:3},{name:"max_wind_speed",min:0,max:45,unit:"km/h",tolerance:3},{name:"max_mission_duration",min:0,max:45,unit:"min",tolerance:2}],geo:{type:"polygon_3d",description:"Defined search area as authorized by incident command  excludes active fire zones, other aircraft operating areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["grounded","searching","hovering_target","payload_drop","returning","landing"],forbidden:["fire_zone_entered","other_aircraft_proximity"]},odd_description:"Emergency search operations in defined area under incident command authority. Extended weather envelope. System coordinates with manned aircraft via ADS-B and maintains deconfliction boundaries.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,deconfliction:!0,emergency_stop:!0}}},power_line_inspection_drone:{label:"Power Line Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:1},{name:"min_line_clearance",min:5,max:null,unit:"m",tolerance:.5},{name:"max_emf_exposure",min:0,max:100,unit:"V/m",tolerance:5}],geo:{type:"corridor",description:"Power line right-of-way corridor  excludes residential areas beyond ROW, substations during maintenance"},time:{operating_hours:"07:00-17:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","transiting","inspecting","hovering","returning","landing"],forbidden:["min_clearance_violated","emf_exceeded","gps_lost"]},odd_description:"Linear corridor following power line rights-of-way. System maintains safe clearance from energized lines and auto-retreats on EMF threshold exceedance. BVLOS operations under waiver.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,emf_protection:!0,emergency_stop:!0}}},pipeline_inspection_drone:{label:"Pipeline Inspection Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:100,unit:"m",tolerance:3},{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_range",min:0,max:50,unit:"km",tolerance:2},{name:"min_ground_clearance",min:15,max:null,unit:"m",tolerance:2}],geo:{type:"corridor",description:"Pipeline right-of-way corridor with lateral buffer  excludes populated areas, restricted airspace, water crossings during sensitive periods"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","transiting","inspecting","leak_detected_hovering","returning","landing"],forbidden:["off_corridor","low_fuel_advancing"]},odd_description:"Extended linear inspection along pipeline routes. BVLOS operations with relay communication. System follows pipeline corridor with automatic anomaly detection and reporting.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},mapping_photogrammetry_drone:{label:"Mapping / Photogrammetry Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:120,unit:"m",tolerance:3},{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:25,unit:"km/h",tolerance:2},{name:"min_overlap",min:60,max:null,unit:"%",tolerance:5}],geo:{type:"polygon_3d",description:"Defined survey area boundary  excludes neighboring properties, sensitive sites, restricted airspace"},time:{operating_hours:"09:00-15:00",operating_days:[1,2,3,4,5],timezone:"ops_local"},states:{allowed:["grounded","en_route","mapping","returning","landing"],forbidden:["shadow_angle_exceeded","cloud_cover_above_80pct"]},odd_description:"Systematic grid pattern flight over defined survey area for photogrammetric capture. Optimal lighting conditions required. System maintains overlap requirements and compensates for wind drift.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,geofence_hard:!0,emergency_stop:!0}}},urban_air_mobility_evtol:{label:"Urban Air Mobility (eVTOL Passenger)",domain:"aerial",template:{numeric:[{name:"max_altitude_msl",min:0,max:1500,unit:"ft",tolerance:50},{name:"max_speed",min:0,max:250,unit:"km/h",tolerance:5},{name:"max_passengers",min:0,max:6,unit:"persons",tolerance:0},{name:"max_wind_speed",min:0,max:50,unit:"km/h",tolerance:3},{name:"min_battery_for_alternate",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"corridor_3d",description:"Approved UAM corridors between vertiports  includes approach/departure paths, excludes restricted airspace, noise-sensitive zones"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["parked","boarding","takeoff","cruise","approach","landing","disembarking"],forbidden:["battery_below_alternate_reserve","icing_detected","passenger_door_open_in_flight"]},odd_description:"Urban air mobility corridors between certified vertiports. System operates under Part 135 equivalent with full ATC integration. Maintains alternate landing site energy reserve at all times.",safety:{violation_action:"block",fail_closed:!0,auto_divert:!0,redundant_flight_controls:!0,emergency_stop:!1}}},cargo_evtol:{label:"Cargo eVTOL",domain:"aerial",template:{numeric:[{name:"max_altitude_msl",min:0,max:1e3,unit:"ft",tolerance:50},{name:"max_speed",min:0,max:200,unit:"km/h",tolerance:5},{name:"max_payload",min:0,max:500,unit:"kg",tolerance:5},{name:"max_range",min:0,max:150,unit:"km",tolerance:5}],geo:{type:"corridor_3d",description:"Approved cargo flight corridors between distribution hubs  avoids populated areas during cruise"},time:{operating_hours:"05:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["parked","loading","takeoff","cruise","approach","landing","unloading"],forbidden:["overweight","center_of_gravity_exceeded","icing_detected"]},odd_description:"Point-to-point cargo transport between approved landing sites. Unpopulated corridors preferred. System verifies weight and balance before each flight and maintains energy reserves.",safety:{violation_action:"block",fail_closed:!0,auto_divert:!0,geofence_hard:!0,emergency_stop:!1}}},firefighting_drone:{label:"Firefighting Support Drone",domain:"aerial",template:{numeric:[{name:"max_altitude_agl",min:0,max:200,unit:"m",tolerance:5},{name:"max_speed",min:0,max:70,unit:"km/h",tolerance:3},{name:"max_thermal_exposure",min:0,max:200,unit:"C",tolerance:10},{name:"max_wind_speed",min:0,max:50,unit:"km/h",tolerance:3}],geo:{type:"polygon_3d",description:"Incident command designated airspace  deconflicted from manned aircraft, excludes active drop zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"incident_local"},states:{allowed:["grounded","scouting","monitoring","thermal_mapping","returning","landing"],forbidden:["manned_aircraft_proximity","thermal_limit_exceeded"]},odd_description:"Fire incident support under incident command authority. Thermal imaging and situational awareness only  no suppression. Deconflicted from manned firefighting aircraft at all times.",safety:{violation_action:"block",fail_closed:!0,auto_rtl:!0,thermal_protection:!0,emergency_stop:!0}}},highway_l4_truck_longhaul:{label:"Highway L4 Truck (Long-Haul)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:105,unit:"km/h",tolerance:2},{name:"max_gvw",min:0,max:36e3,unit:"kg",tolerance:100},{name:"min_following_distance",min:2.5,max:null,unit:"s",tolerance:.2},{name:"max_wind_speed",min:0,max:80,unit:"km/h",tolerance:5},{name:"min_visibility",min:200,max:null,unit:"m",tolerance:20}],geo:{type:"road_network",description:"Approved interstate highway segments  excludes urban interchanges, construction zones, mountain passes above grade limit"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"route_local"},states:{allowed:["parked","highway_cruise","lane_change","merging","exiting","minimal_risk_condition"],forbidden:["urban_street","construction_zone","visibility_below_minimum","ice_detected"]},odd_description:"Interstate highway operations on approved segments. L4 autonomy with no human driver. System transitions to minimal risk condition (MRC) on any ODD exit. Pre-mapped route with known infrastructure.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,v2x_enabled:!0,emergency_stop:!0}}},highway_l4_truck_regional:{label:"Highway L4 Truck (Regional)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:90,unit:"km/h",tolerance:2},{name:"max_gvw",min:0,max:26e3,unit:"kg",tolerance:100},{name:"min_following_distance",min:2,max:null,unit:"s",tolerance:.2},{name:"max_route_length",min:0,max:300,unit:"km",tolerance:10}],geo:{type:"road_network",description:"Approved regional highway and arterial segments  includes transfer hub access roads"},time:{operating_hours:"04:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"route_local"},states:{allowed:["parked","highway_cruise","arterial_drive","hub_approach","loading","unloading","mrc"],forbidden:["residential_street","school_zone","unpaved_road"]},odd_description:"Regional distribution routes on approved highways and arterials. Shorter segments with more frequent stops. System handles hub ingress/egress on pre-mapped facility roads.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},urban_robotaxi:{label:"Urban Robotaxi",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:4,unit:"persons",tolerance:0},{name:"min_visibility",min:100,max:null,unit:"m",tolerance:10},{name:"max_precipitation_rate",min:0,max:10,unit:"mm/hr",tolerance:1}],geo:{type:"road_network",description:"Approved urban street network with pickup/dropoff zones  excludes highways, unpaved roads, restricted zones"},time:{operating_hours:"05:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["parked","cruising","passenger_pickup","passenger_transit","dropoff","repositioning","mrc"],forbidden:["freeway_entered","visibility_degraded","door_open_moving"]},odd_description:"Dense urban street environment with mixed traffic, pedestrians, cyclists. L4 autonomy on mapped city streets. System handles intersections, traffic signals, and complex urban scenarios within speed and weather limits.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,passenger_interlock:!0,emergency_stop:!0}}},suburban_robotaxi:{label:"Suburban Robotaxi",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:80,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:4,unit:"persons",tolerance:0},{name:"min_visibility",min:150,max:null,unit:"m",tolerance:10}],geo:{type:"road_network",description:"Approved suburban road network including arterials and residential streets  excludes highways, rural roads"},time:{operating_hours:"05:00-00:00",operating_days:[0,1,2,3,4,5,6],timezone:"city_local"},states:{allowed:["parked","cruising","pickup","transit","dropoff","repositioning","mrc"],forbidden:["highway_entered","unpaved_road","school_zone_during_hours"]},odd_description:"Suburban mixed-use road environment. Lower traffic density than urban, higher speed limits. System operates on mapped residential and arterial roads with school zone awareness.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},fixed_route_autonomous_bus:{label:"Fixed-Route Autonomous Bus",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:50,unit:"km/h",tolerance:2},{name:"max_passengers",min:0,max:40,unit:"persons",tolerance:0},{name:"max_grade",min:0,max:12,unit:"%",tolerance:.5}],geo:{type:"route",description:"Fixed transit route with designated stops  no deviation from approved route under any circumstances"},time:{operating_hours:"05:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"transit_local"},states:{allowed:["depot","en_route","stopped_at_station","loading","unloading","returning_depot","mrc"],forbidden:["off_route","door_open_moving","passenger_count_exceeded"]},odd_description:"Fixed transit route on public roads with designated bus stops. System follows exact route with no autonomous deviation. Passenger loading/unloading at stops only with door interlocks.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,door_interlock:!0,emergency_stop:!0}}},airport_shuttle_airside:{label:"Airport Shuttle (Airside)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:20,unit:"persons",tolerance:0},{name:"min_aircraft_clearance",min:10,max:null,unit:"m",tolerance:1}],geo:{type:"route",description:"Approved airside taxiway and apron routes  deconflicted from active runways and taxiways"},time:{operating_hours:"04:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"airport_local"},states:{allowed:["parked","en_route","at_gate","loading","unloading"],forbidden:["active_runway_proximity","aircraft_pushback_zone"]},odd_description:"Airport airside operations on controlled surface routes. System integrates with airport surface management and maintains clearance from all aircraft operations. Speed limited to airside regulations.",safety:{violation_action:"block",fail_closed:!0,atc_integration:!0,emergency_stop:!0}}},airport_shuttle_landside:{label:"Airport Shuttle (Landside)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:30,unit:"persons",tolerance:0}],geo:{type:"route",description:"Terminal-to-parking/rental fixed route  excludes active roadways, departure lanes"},time:{operating_hours:"04:00-01:00",operating_days:[0,1,2,3,4,5,6],timezone:"airport_local"},states:{allowed:["parked","en_route","at_stop","loading","unloading","returning"],forbidden:["off_route","departure_lane_entered"]},odd_description:"Fixed route between airport terminals and parking/rental facilities on landside roads. Controlled low-speed environment with dedicated lanes where possible.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,emergency_stop:!0}}},port_terminal_tractor:{label:"Port Terminal Tractor (Yard Truck)",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:25,unit:"km/h",tolerance:1},{name:"max_tow_weight",min:0,max:8e4,unit:"kg",tolerance:500},{name:"min_container_clearance",min:1,max:null,unit:"m",tolerance:.1}],geo:{type:"polygon",description:"Port terminal yard boundary  approved lanes between crane positions and stacking areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["parked","empty_transit","loaded_transit","crane_position","stacking_position","charging"],forbidden:["public_road","human_zone_speed_exceeded","unstable_load"]},odd_description:"Closed port terminal environment with controlled traffic. System transports containers between cranes and stacking areas on predefined yard lanes. No public road interaction.",safety:{violation_action:"block",fail_closed:!0,load_stability_check:!0,emergency_stop:!0}}},mining_site_vehicle:{label:"Mining Site Autonomous Vehicle",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:60,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:4e5,unit:"kg",tolerance:1e3},{name:"max_grade",min:0,max:15,unit:"%",tolerance:.5},{name:"min_edge_distance",min:5,max:null,unit:"m",tolerance:.5}],geo:{type:"polygon",description:"Mine site operational boundary  approved haul roads, pit zones, dump areas  excludes blast zones, maintenance areas during service"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mine_local"},states:{allowed:["parked","hauling_loaded","hauling_empty","loading","dumping","fueling"],forbidden:["blast_zone_active","maintenance_area","edge_proximity_exceeded"]},odd_description:"Open-pit or underground mine with controlled vehicle traffic. Haul trucks operate on designated mine roads with edge detection. System integrates with mine dispatch and blast management.",safety:{violation_action:"block",fail_closed:!0,edge_protection:!0,blast_zone_interlock:!0,emergency_stop:!0}}},valet_parking_system:{label:"Automated Valet Parking",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:10,unit:"km/h",tolerance:.5},{name:"max_steering_angle",min:0,max:40,unit:"degrees",tolerance:1},{name:"min_obstacle_clearance",min:.2,max:null,unit:"m",tolerance:.05}],geo:{type:"polygon",description:"Parking structure or lot boundary  approved driving lanes and parking spaces only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["parked","maneuvering_to_spot","maneuvering_to_pickup","waiting_at_pickup"],forbidden:["pedestrian_detected","exit_lane_blocked","slope_exceeded"]},odd_description:"Controlled parking facility environment. Vehicle self-parks and self-retrieves at very low speed. Facility must be mapped and infrastructure-equipped. No pedestrians allowed in autonomous zone.",safety:{violation_action:"block",fail_closed:!0,pedestrian_stop:!0,ultra_low_speed:!0,emergency_stop:!0}}},low_speed_neighborhood_ev:{label:"Low-Speed Neighborhood EV",domain:"vehicles",template:{numeric:[{name:"max_speed",min:0,max:40,unit:"km/h",tolerance:1},{name:"max_passengers",min:0,max:6,unit:"persons",tolerance:0},{name:"max_road_speed_limit",min:0,max:45,unit:"km/h",tolerance:0}],geo:{type:"road_network",description:"Neighborhood streets with posted speed limits 45 km/h  excludes arterials, highways, roads without sidewalks"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"community_local"},states:{allowed:["parked","cruising","pickup","dropoff","charging","mrc"],forbidden:["arterial_road","night_unlighted_road","heavy_rain"]},odd_description:"Residential neighborhood and retirement community streets. Low-speed vehicle class per FMVSS. Operates only on roads with posted speed limits at or below vehicle max speed.",safety:{violation_action:"block",fail_closed:!0,mrc_pullover:!0,emergency_stop:!0}}},autonomous_cargo_vessel_coastal:{label:"Autonomous Cargo Vessel (Coastal)",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:15,unit:"knots",tolerance:.5},{name:"max_sea_state",min:0,max:5,unit:"Beaufort",tolerance:0},{name:"max_draft",min:0,max:8,unit:"m",tolerance:.1},{name:"min_under_keel_clearance",min:2,max:null,unit:"m",tolerance:.2}],geo:{type:"corridor",description:"Approved coastal shipping lanes  excludes TSS separation zones, marine protected areas, port approaches without pilot"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","departing","underway","approaching","anchored","mrc"],forbidden:["sea_state_exceeded","visibility_below_1nm","traffic_density_exceeded"]},odd_description:"Coastal shipping routes within 50nm of shore. System follows COLREG rules, maintains AIS broadcast, and transitions to remote operator handoff in congested waters. IMO MASS Level 3.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,remote_handoff:!0,emergency_stop:!1}}},autonomous_cargo_vessel_ocean:{label:"Autonomous Cargo Vessel (Ocean)",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:20,unit:"knots",tolerance:.5},{name:"max_sea_state",min:0,max:7,unit:"Beaufort",tolerance:0},{name:"max_roll_angle",min:0,max:30,unit:"degrees",tolerance:2},{name:"min_stability_gm",min:.5,max:null,unit:"m",tolerance:.05}],geo:{type:"corridor",description:"Ocean routing corridors  avoids ice zones, piracy high-risk areas, environmentally sensitive waters per IMO designations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","departing","ocean_transit","weather_routing","approaching","anchored"],forbidden:["stability_compromised","communication_lost_48hr","ice_zone_entered"]},odd_description:"Trans-oceanic shipping routes. Fully autonomous with shore-based remote monitoring. System performs weather routing optimization within approved corridor. COLREG compliant with enhanced collision avoidance.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,weather_routing:!0,emergency_stop:!1}}},port_crane_system:{label:"Automated Port Crane (STS/RTG)",domain:"marine",template:{numeric:[{name:"max_hoist_speed",min:0,max:90,unit:"m/min",tolerance:2},{name:"max_trolley_speed",min:0,max:240,unit:"m/min",tolerance:5},{name:"max_gantry_speed",min:0,max:45,unit:"m/min",tolerance:2},{name:"max_wind_speed",min:0,max:72,unit:"km/h",tolerance:3},{name:"max_lift_weight",min:0,max:65,unit:"tonnes",tolerance:1}],geo:{type:"linear",description:"Crane rail span and apron reach  excludes adjacent crane working zones, vessel superstructure clearance zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["idle","lifting","lowering","trolleying","gantry_moving","container_placing"],forbidden:["wind_exceeded","anti_collision_triggered","overload_detected","personnel_in_zone"]},odd_description:"Port container terminal crane operations. System handles container lift/place cycles within defined crane envelope. Anti-collision zones with adjacent cranes enforced. Wind speed limits enforced with automatic shutdown.",safety:{violation_action:"block",fail_closed:!0,anti_collision:!0,overload_protection:!0,emergency_stop:!0}}},container_yard_agv:{label:"Container Yard AGV",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:20,unit:"km/h",tolerance:1},{name:"max_payload",min:0,max:7e4,unit:"kg",tolerance:500},{name:"min_obstacle_distance",min:2,max:null,unit:"m",tolerance:.2}],geo:{type:"polygon",description:"Container yard lane network  approved travel lanes between crane positions and stacking blocks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["parked","empty_transit","loaded_transit","crane_exchange","charging"],forbidden:["personnel_zone","off_lane","unstable_load"]},odd_description:"Closed container terminal yard with controlled traffic. AGVs transport containers between quay cranes and yard stacking equipment on predefined lane network.",safety:{violation_action:"block",fail_closed:!0,personnel_detection:!0,emergency_stop:!0}}},autonomous_tugboat:{label:"Autonomous Tugboat",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:14,unit:"knots",tolerance:.5},{name:"max_bollard_pull",min:0,max:80,unit:"tonnes",tolerance:2},{name:"max_wind_speed",min:0,max:50,unit:"knots",tolerance:2},{name:"max_current",min:0,max:4,unit:"knots",tolerance:.2}],geo:{type:"polygon",description:"Port harbor and approach channel  approved escort and assist zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["moored","transiting","escort_position","assisting","standby","returning"],forbidden:["towline_overload","sea_state_exceeded","vessel_communication_lost"]},odd_description:"Port harbor tug operations for vessel assist and escort. System operates in close proximity to large vessels under port control coordination. Remote operator oversight for all assist maneuvers.",safety:{violation_action:"block",fail_closed:!0,towline_monitor:!0,remote_handoff:!0,emergency_stop:!0}}},underwater_auv_inspection:{label:"Underwater AUV (Inspection)",domain:"marine",template:{numeric:[{name:"max_depth",min:0,max:300,unit:"m",tolerance:5},{name:"max_speed",min:0,max:4,unit:"knots",tolerance:.2},{name:"max_mission_duration",min:0,max:12,unit:"hr",tolerance:.5},{name:"min_battery_for_surface",min:20,max:null,unit:"%",tolerance:3}],geo:{type:"polygon_3d",description:"Defined underwater inspection zone around target structure  exclusion zones around intake/outflow, shipping lanes overhead"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["surface","diving","inspecting","transiting","ascending","recovery"],forbidden:["battery_below_surface_reserve","depth_exceeded","communication_timeout"]},odd_description:"Underwater inspection of subsea infrastructure (pipelines, platforms, hulls). Tethered or free-swimming within defined zone. System maintains energy reserve for safe surfacing at all times.",safety:{violation_action:"block",fail_closed:!0,auto_surface:!0,depth_limiter:!0,emergency_stop:!1}}},underwater_auv_survey:{label:"Underwater AUV (Survey / Mapping)",domain:"marine",template:{numeric:[{name:"max_depth",min:0,max:6e3,unit:"m",tolerance:10},{name:"max_speed",min:0,max:5,unit:"knots",tolerance:.2},{name:"max_mission_duration",min:0,max:72,unit:"hr",tolerance:1},{name:"max_range",min:0,max:200,unit:"km",tolerance:5}],geo:{type:"polygon_3d",description:"Defined survey grid with depth ceiling/floor  avoids shipping lanes, fishing grounds, protected marine areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["surface","diving","surveying","transiting","ascending","recovery_wait"],forbidden:["depth_exceeded","energy_below_return_threshold","off_grid"]},odd_description:"Deep-water autonomous survey operations. Extended duration missions with pre-programmed grid patterns. System surfaces on completion or energy threshold. No real-time control in deep operations.",safety:{violation_action:"block",fail_closed:!0,auto_surface:!0,depth_limiter:!0,emergency_stop:!1}}},autonomous_ferry:{label:"Autonomous Ferry",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:12,unit:"knots",tolerance:.5},{name:"max_passengers",min:0,max:150,unit:"persons",tolerance:0},{name:"max_wind_speed",min:0,max:40,unit:"knots",tolerance:2},{name:"max_wave_height",min:0,max:1.5,unit:"m",tolerance:.1}],geo:{type:"corridor",description:"Fixed ferry route between terminals  approved transit corridor with exclusion from shipping lanes"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"port_local"},states:{allowed:["moored","loading","departing","underway","arriving","unloading"],forbidden:["sea_state_exceeded","passenger_on_deck_during_transit","off_corridor"]},odd_description:"Fixed-route passenger ferry between two terminals. Short crossing in sheltered or semi-sheltered waters. System follows predefined route with COLREG compliance and weather-based operational limits.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,passenger_safety:!0,emergency_stop:!0}}},aquaculture_robot:{label:"Aquaculture Robot",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"knots",tolerance:.2},{name:"max_depth",min:0,max:30,unit:"m",tolerance:1},{name:"max_feed_rate",min:0,max:500,unit:"kg/hr",tolerance:10}],geo:{type:"polygon_3d",description:"Fish farm cage/pen boundaries  excludes neighboring pens, mooring lines, net edges"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["docked","feeding","inspecting","net_cleaning","monitoring","returning"],forbidden:["net_contact","fish_mortality_spike","current_exceeded"]},odd_description:"Marine aquaculture installation with defined cage structures. System operates within and around fish pens for feeding, inspection, and net maintenance. Tethered or cage-bounded operation.",safety:{violation_action:"block",fail_closed:!0,net_proximity:!0,emergency_stop:!0}}},surface_survey_vessel:{label:"Autonomous Surface Survey Vessel",domain:"marine",template:{numeric:[{name:"max_speed",min:0,max:8,unit:"knots",tolerance:.3},{name:"max_sea_state",min:0,max:4,unit:"Beaufort",tolerance:0},{name:"max_range",min:0,max:100,unit:"km",tolerance:5},{name:"max_mission_duration",min:0,max:48,unit:"hr",tolerance:2}],geo:{type:"polygon",description:"Defined survey area  excludes shipping lanes, restricted zones, shallow water below draft"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["moored","transiting","surveying","station_keeping","returning"],forbidden:["sea_state_exceeded","shipping_lane_entered","communication_lost_2hr"]},odd_description:"Surface vessel conducting hydrographic or environmental survey in defined area. COLREG compliant with AIS. System follows pre-programmed survey pattern and returns on weather degradation.",safety:{violation_action:"block",fail_closed:!0,colreg_compliance:!0,auto_return:!0,emergency_stop:!1}}},surgical_robot_orthopedic:{label:"Surgical Robot (Orthopedic)",domain:"medical",template:{numeric:[{name:"max_cutting_force",min:0,max:50,unit:"N",tolerance:1},{name:"max_cutting_depth",min:0,max:15,unit:"mm",tolerance:.1},{name:"positional_accuracy",min:0,max:.5,unit:"mm",tolerance:.05},{name:"max_joint_velocity",min:0,max:100,unit:"mm/s",tolerance:2}],geo:{type:"volume",description:"Surgical workspace envelope defined by pre-operative plan  hard boundaries around critical anatomy (nerves, vessels)"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"hospital_local"},states:{allowed:["powered_off","initializing","registered","cutting","paused","retracting","complete"],forbidden:["registration_lost","force_limit_exceeded","outside_planned_volume"]},odd_description:"Operating room environment with patient-registered coordinate system. Robot executes pre-planned bone cuts within defined volume. Surgeon maintains supervisory control and can override at any time. FDA Class II/III.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,surgeon_override:!0,emergency_stop:!0}}},surgical_robot_soft_tissue:{label:"Surgical Robot (Soft Tissue / Laparoscopic)",domain:"medical",template:{numeric:[{name:"max_instrument_force",min:0,max:10,unit:"N",tolerance:.5},{name:"max_instrument_speed",min:0,max:50,unit:"mm/s",tolerance:2},{name:"max_workspace_radius",min:0,max:150,unit:"mm",tolerance:2},{name:"max_insufflation_pressure",min:0,max:15,unit:"mmHg",tolerance:.5}],geo:{type:"volume",description:"Surgical cavity workspace  instrument reach envelope with exclusion zones around critical structures"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5],timezone:"hospital_local"},states:{allowed:["powered_off","initializing","docked","operating","paused","undocking","complete"],forbidden:["force_exceeded","workspace_exceeded","communication_lost"]},odd_description:"Operating room with teleoperated or semi-autonomous laparoscopic instruments. Surgeon maintains primary control with haptic feedback. System enforces instrument workspace and force limits.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,surgeon_override:!0,emergency_stop:!0}}},pharmacy_dispensing_robot:{label:"Pharmacy Dispensing Robot",domain:"medical",template:{numeric:[{name:"max_dispensing_rate",min:0,max:200,unit:"scripts/hr",tolerance:5},{name:"max_controlled_substance_quantity",min:0,max:30,unit:"doses",tolerance:0},{name:"temperature_range_min",min:2,max:null,unit:"C",tolerance:.5},{name:"temperature_range_max",min:0,max:8,unit:"C",tolerance:.5}],geo:{type:"enclosure",description:"Pharmacy dispensing cabinet footprint  secure enclosure with controlled access"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","dispensing","restocking","inventory_count","maintenance_mode"],forbidden:["barcode_mismatch","controlled_substance_count_discrepancy","temperature_excursion"]},odd_description:"Hospital or retail pharmacy automated dispensing. System verifies every medication against prescription via barcode/RFID. Controlled substance tracking with DEA-compliant chain of custody. Pharmacist verification required.",safety:{violation_action:"block",fail_closed:!0,pharmacist_override:!0,dea_logging:!0,emergency_stop:!0}}},hospital_logistics_robot:{label:"Hospital Logistics Robot",domain:"medical",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.2},{name:"max_payload",min:0,max:50,unit:"kg",tolerance:2},{name:"max_noise_level",min:0,max:55,unit:"dB",tolerance:2}],geo:{type:"floor_plan",description:"Hospital floor plan corridors and elevators  excludes ICU during quiet hours, operating rooms during procedures, isolation rooms"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","en_route","at_station","loading","unloading","elevator_transit","charging"],forbidden:["or_during_procedure","isolation_room","speed_exceeded_in_patient_area"]},odd_description:"Hospital interior corridors for medication, specimen, and supply delivery. System navigates around patients, staff, and equipment. Reduced speed near patient areas. Elevator integration required.",safety:{violation_action:"block",fail_closed:!0,patient_area_speed_limit:!0,emergency_stop:!0}}},rehabilitation_robot:{label:"Rehabilitation / Physical Therapy Robot",domain:"medical",template:{numeric:[{name:"max_assistive_force",min:0,max:100,unit:"N",tolerance:2},{name:"max_joint_velocity",min:0,max:30,unit:"deg/s",tolerance:1},{name:"max_range_of_motion",min:0,max:180,unit:"degrees",tolerance:2},{name:"max_session_duration",min:0,max:60,unit:"min",tolerance:2}],geo:{type:"workspace",description:"Rehabilitation bay or patient room  robot workspace envelope around patient"},time:{operating_hours:"07:00-19:00",operating_days:[1,2,3,4,5],timezone:"facility_local"},states:{allowed:["powered_off","initializing","exercise_mode","passive_mode","paused","session_complete"],forbidden:["force_exceeded","pain_signal_detected","patient_not_secured"]},odd_description:"Clinical rehabilitation environment with patient physically interfacing with robotic device. System follows prescribed exercise protocol with force and range-of-motion limits. Therapist supervision required.",safety:{violation_action:"block",fail_closed:!0,force_limiting:!0,patient_override:!0,therapist_override:!0,emergency_stop:!0}}},radiology_ai_diagnostic:{label:"Radiology AI (Diagnostic)",domain:"medical",template:{numeric:[{name:"max_daily_reads",min:0,max:500,unit:"studies",tolerance:10},{name:"min_confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"max_report_latency",min:0,max:60,unit:"min",tolerance:5}],geo:{type:"logical",description:"Connected PACS/RIS systems  approved imaging modalities and body regions only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","processing","flagging","reporting","quality_review"],forbidden:["confidence_below_threshold_auto_report","unsupported_modality","radiologist_override_bypassed"]},odd_description:"Medical imaging AI for triage, detection, and measurement. System flags findings for radiologist review  does not issue final diagnostic reports autonomously. FDA 510(k) cleared for specific indications.",safety:{violation_action:"block",fail_closed:!0,radiologist_review_required:!0,audit_trail:!0}}},pathology_ai_diagnostic:{label:"Pathology AI (Diagnostic)",domain:"medical",template:{numeric:[{name:"max_daily_slides",min:0,max:300,unit:"slides",tolerance:10},{name:"min_confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"max_turnaround",min:0,max:24,unit:"hr",tolerance:1}],geo:{type:"logical",description:"Connected digital pathology scanner and LIS  approved stain types and tissue types only"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"lab_local"},states:{allowed:["idle","scanning","analyzing","flagging","reporting","qa_review"],forbidden:["unsupported_stain_type","confidence_below_threshold","pathologist_review_bypassed"]},odd_description:"Digital pathology AI for slide analysis, cell counting, and anomaly detection. System provides preliminary analysis for pathologist review. Does not issue independent diagnoses.",safety:{violation_action:"block",fail_closed:!0,pathologist_review_required:!0,audit_trail:!0}}},patient_monitoring_icu:{label:"Patient Monitoring AI (ICU)",domain:"medical",template:{numeric:[{name:"max_patients_monitored",min:0,max:50,unit:"patients",tolerance:0},{name:"alert_latency",min:0,max:5,unit:"s",tolerance:.5},{name:"max_false_alarm_rate",min:0,max:5,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected ICU bed monitoring systems  approved vital sign parameters and device types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["monitoring","alerting","trending","shift_handoff","calibrating"],forbidden:["alert_suppression_unauthorized","sensor_disconnected_unacknowledged"]},odd_description:"ICU patient monitoring with AI-driven early warning. System analyzes continuous vital sign streams and alerts nursing staff to deterioration patterns. Does not autonomously modify treatment.",safety:{violation_action:"warn",fail_closed:!0,nurse_notification_required:!0,audit_trail:!0}}},patient_monitoring_remote:{label:"Patient Monitoring AI (Remote / RPM)",domain:"medical",template:{numeric:[{name:"max_patients_monitored",min:0,max:500,unit:"patients",tolerance:10},{name:"max_alert_latency",min:0,max:60,unit:"s",tolerance:5},{name:"check_in_frequency",min:0,max:24,unit:"hr",tolerance:1}],geo:{type:"logical",description:"Connected RPM devices (blood pressure, glucose, pulse ox, weight)  approved device models and firmware versions"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"patient_local"},states:{allowed:["monitoring","alerting","trending","provider_review","patient_engagement"],forbidden:["critical_value_unescalated","device_disconnected_48hr_unnoticed"]},odd_description:"Remote patient monitoring for chronic disease management. System tracks trends and alerts clinical team to concerning patterns. Patient-facing with provider oversight. HIPAA compliant.",safety:{violation_action:"warn",fail_closed:!0,provider_escalation:!0,hipaa_compliant:!0}}},medication_dosing_ai:{label:"Medication Dosing AI",domain:"medical",template:{numeric:[{name:"max_dose_deviation",min:0,max:10,unit:"%",tolerance:1},{name:"max_infusion_rate",min:0,max:999,unit:"mL/hr",tolerance:1},{name:"max_daily_dose",min:0,max:null,unit:"mg",tolerance:0}],geo:{type:"logical",description:"Connected infusion pumps and EHR system  approved medication formulary only"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","calculating","recommending","infusing","monitoring","complete"],forbidden:["allergy_conflict","interaction_detected","dose_exceeds_protocol","pharmacist_override_bypassed"]},odd_description:"AI-assisted medication dosing for titration protocols (insulin, heparin, vasopressors). System recommends doses based on patient parameters. Pharmacist and nurse verification required before administration.",safety:{violation_action:"block",fail_closed:!0,pharmacist_verification:!0,nurse_verification:!0,five_rights_check:!0,emergency_stop:!0}}},triage_ai_system:{label:"Triage AI System (ED)",domain:"medical",template:{numeric:[{name:"max_patients_per_hour",min:0,max:60,unit:"patients/hr",tolerance:5},{name:"max_triage_time",min:0,max:5,unit:"min",tolerance:.5},{name:"min_acuity_accuracy",min:.85,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"ED triage workflow  connected to EHR, vital sign monitors, and patient tracking board"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hospital_local"},states:{allowed:["idle","assessing","scoring","recommending","nurse_review","complete"],forbidden:["auto_assign_without_nurse_review","downgrade_critical_patient"]},odd_description:"Emergency department triage assistance AI. System suggests acuity level based on chief complaint, vitals, and history. Triage nurse makes final acuity determination. System cannot independently downgrade patient acuity.",safety:{violation_action:"block",fail_closed:!0,nurse_override_required:!0,critical_patient_escalation:!0}}},lab_automation_robot:{label:"Lab Automation Robot",domain:"medical",template:{numeric:[{name:"max_sample_throughput",min:0,max:1e3,unit:"samples/hr",tolerance:20},{name:"max_pipette_volume",min:0,max:1e3,unit:"L",tolerance:.5},{name:"temperature_stability",min:-.5,max:.5,unit:"C",tolerance:.1}],geo:{type:"enclosure",description:"Biosafety cabinet or lab bench footprint  enclosed workspace with controlled access"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"lab_local"},states:{allowed:["idle","processing","pipetting","incubating","reading","cleaning","maintenance"],forbidden:["sample_id_mismatch","biosafety_breach","reagent_expired"]},odd_description:"Clinical or research laboratory with automated sample processing. System handles sample accessioning, preparation, and analysis within enclosed workspace. Chain of custody maintained via barcode/RFID tracking.",safety:{violation_action:"block",fail_closed:!0,sample_tracking:!0,biosafety_interlock:!0,emergency_stop:!0}}},high_frequency_trading:{label:"High-Frequency Trading System",domain:"financial",template:{numeric:[{name:"max_position_size",min:0,max:1e7,unit:"USD",tolerance:1e5},{name:"max_daily_loss",min:0,max:5e5,unit:"USD",tolerance:1e4},{name:"max_orders_per_second",min:0,max:1e4,unit:"orders/s",tolerance:100},{name:"max_notional_exposure",min:0,max:1e8,unit:"USD",tolerance:1e6}],geo:{type:"logical",description:"Approved exchanges and trading venues  approved instrument types and symbol lists"},time:{operating_hours:"09:30-16:00",operating_days:[1,2,3,4,5],timezone:"exchange_local"},states:{allowed:["pre_market","active_trading","risk_check","position_unwinding","end_of_day","halted"],forbidden:["daily_loss_exceeded","position_limit_exceeded","exchange_circuit_breaker"]},odd_description:"Automated trading on regulated exchanges. System executes within position limits, loss limits, and approved instruments. Kill switch triggers on daily loss threshold or anomalous market conditions. SEC/FINRA compliant.",safety:{violation_action:"block",fail_closed:!0,kill_switch:!0,risk_monitor:!0,regulatory_reporting:!0}}},algorithmic_market_making:{label:"Algorithmic Market Making",domain:"financial",template:{numeric:[{name:"max_spread",min:0,max:50,unit:"bps",tolerance:2},{name:"max_inventory",min:0,max:5e6,unit:"USD",tolerance:1e5},{name:"max_daily_loss",min:0,max:2e5,unit:"USD",tolerance:1e4},{name:"min_quote_lifetime",min:100,max:null,unit:"ms",tolerance:10}],geo:{type:"logical",description:"Approved trading venues and symbol lists  approved counterparty types"},time:{operating_hours:"09:30-16:00",operating_days:[1,2,3,4,5],timezone:"exchange_local"},states:{allowed:["quoting","hedging","inventory_management","risk_pause","end_of_day"],forbidden:["inventory_exceeded","loss_exceeded","market_manipulation_pattern"]},odd_description:"Automated market making with continuous two-sided quotes. System manages inventory within limits and hedges exposure. Withdrawal from market on volatility spikes or inventory breaches.",safety:{violation_action:"block",fail_closed:!0,kill_switch:!0,inventory_limit:!0,regulatory_reporting:!0}}},credit_underwriting_ai:{label:"Credit Underwriting AI",domain:"financial",template:{numeric:[{name:"max_auto_approve_amount",min:0,max:5e4,unit:"USD",tolerance:1e3},{name:"max_daily_approvals",min:0,max:1e3,unit:"applications",tolerance:20},{name:"min_model_confidence",min:.85,max:null,unit:"score",tolerance:.02},{name:"max_adverse_action_rate",min:0,max:40,unit:"%",tolerance:2}],geo:{type:"logical",description:"Approved lending markets and jurisdictions  excludes prohibited jurisdictions and sanctioned entities"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["receiving","scoring","decisioning","approved","declined","referred_to_human","adverse_action"],forbidden:["prohibited_factor_used","fair_lending_violation","model_drift_exceeded"]},odd_description:"Automated credit decisioning within approved parameters. System scores applications and auto-approves within limits. Applications exceeding thresholds referred to human underwriter. ECOA/FCRA compliant with adverse action notices.",safety:{violation_action:"block",fail_closed:!0,fair_lending_monitor:!0,human_escalation:!0,regulatory_reporting:!0}}},insurance_underwriting_ai:{label:"Insurance Underwriting AI",domain:"financial",template:{numeric:[{name:"max_auto_bind_premium",min:0,max:25e3,unit:"USD",tolerance:1e3},{name:"max_coverage_amount",min:0,max:1e6,unit:"USD",tolerance:5e4},{name:"max_daily_binds",min:0,max:500,unit:"policies",tolerance:10}],geo:{type:"logical",description:"Approved states/territories and lines of business  excludes surplus lines requiring manual review"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["receiving","rating","quoting","binding","referring","declining"],forbidden:["prohibited_classification_used","rate_deviation_exceeded","catastrophe_moratorium_active"]},odd_description:"Automated insurance underwriting for standard risk classes. System rates, quotes, and binds within approved guidelines. Non-standard risks referred to human underwriter. State DOI rate filing compliant.",safety:{violation_action:"block",fail_closed:!0,human_escalation:!0,rate_compliance:!0}}},fraud_detection_ai:{label:"Fraud Detection AI",domain:"financial",template:{numeric:[{name:"max_auto_block_amount",min:0,max:1e4,unit:"USD",tolerance:500},{name:"max_false_positive_rate",min:0,max:3,unit:"%",tolerance:.5},{name:"alert_latency",min:0,max:500,unit:"ms",tolerance:50},{name:"max_daily_blocks",min:0,max:5e3,unit:"transactions",tolerance:100}],geo:{type:"logical",description:"All transaction channels  card present, card not present, ACH, wire"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","scoring","alerting","blocking","reviewing","releasing"],forbidden:["legitimate_pattern_blocked_repeatedly","model_drift_exceeded","override_audit_gap"]},odd_description:"Real-time transaction fraud scoring and blocking. System scores every transaction and blocks those exceeding risk thresholds. Blocked transactions queued for human review. Customer notification on blocks.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,customer_notification:!0}}},aml_ai:{label:"Anti-Money Laundering AI",domain:"financial",template:{numeric:[{name:"max_daily_alerts",min:0,max:500,unit:"alerts",tolerance:20},{name:"max_alert_resolution_time",min:0,max:48,unit:"hr",tolerance:4},{name:"min_sar_confidence",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"All customer accounts and transaction channels  OFAC/SDN list integration"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","alert_generated","investigating","sar_recommended","cleared","escalated"],forbidden:["sar_auto_filed_without_review","sanctions_hit_ignored","alert_auto_closed"]},odd_description:"Transaction monitoring and suspicious activity detection. System generates alerts for human BSA/AML analysts. Cannot auto-file SARs or auto-close alerts. FinCEN/BSA compliant with full audit trail.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,regulatory_reporting:!0}}},robo_advisory:{label:"Robo-Advisory (Wealth Management)",domain:"financial",template:{numeric:[{name:"max_single_trade_pct",min:0,max:10,unit:"% of portfolio",tolerance:.5},{name:"max_daily_rebalance_pct",min:0,max:25,unit:"% of portfolio",tolerance:1},{name:"max_leverage",min:0,max:1,unit:"ratio",tolerance:0},{name:"max_concentration_single_security",min:0,max:15,unit:"%",tolerance:1}],geo:{type:"logical",description:"Approved investment universe  approved asset classes, exchanges, and instrument types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","rebalancing","tax_loss_harvesting","dividend_reinvesting","reporting"],forbidden:["leverage_used","prohibited_security","concentration_exceeded","suitability_violation"]},odd_description:"Automated portfolio management within client-approved investment policy. System rebalances to target allocation, harvests tax losses, and reinvests dividends. No leverage, no derivatives, approved universe only. SEC/FINRA RIA compliant.",safety:{violation_action:"block",fail_closed:!0,suitability_check:!0,client_notification:!0}}},loan_origination_ai:{label:"Loan Origination AI",domain:"financial",template:{numeric:[{name:"max_auto_approve_amount",min:0,max:1e5,unit:"USD",tolerance:5e3},{name:"max_dti_ratio",min:0,max:43,unit:"%",tolerance:1},{name:"max_ltv_ratio",min:0,max:97,unit:"%",tolerance:1}],geo:{type:"logical",description:"Approved lending jurisdictions and property types"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["application_received","verifying","scoring","approved","conditional","denied","referred"],forbidden:["dti_exceeded_auto_approve","fair_lending_flag","incomplete_verification_approved"]},odd_description:"Automated loan origination with document verification and creditworthiness assessment. System handles standard conforming loans within guidelines. Non-conforming loans referred to human underwriter. TRID/HMDA compliant.",safety:{violation_action:"block",fail_closed:!0,human_escalation:!0,fair_lending_monitor:!0}}},claims_processing_ai:{label:"Claims Processing AI",domain:"financial",template:{numeric:[{name:"max_auto_pay_amount",min:0,max:5e3,unit:"USD",tolerance:250},{name:"max_daily_auto_pays",min:0,max:2e3,unit:"claims",tolerance:50},{name:"max_processing_time",min:0,max:72,unit:"hr",tolerance:4}],geo:{type:"logical",description:"Approved claim types and coverage lines  approved provider networks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["received","reviewing","approved","denied","referred","paid","appealed"],forbidden:["fraud_indicator_auto_paid","above_threshold_auto_paid","duplicate_claim_paid"]},odd_description:"Automated insurance claims adjudication for standard claims within auto-pay thresholds. System reviews documentation, verifies coverage, and processes payment. Complex or high-value claims referred to human adjuster.",safety:{violation_action:"block",fail_closed:!0,fraud_detection:!0,human_escalation:!0}}},payment_risk_scoring:{label:"Payment Risk Scoring AI",domain:"financial",template:{numeric:[{name:"max_transaction_amount",min:0,max:5e4,unit:"USD",tolerance:1e3},{name:"scoring_latency",min:0,max:100,unit:"ms",tolerance:10},{name:"max_false_decline_rate",min:0,max:2,unit:"%",tolerance:.5}],geo:{type:"logical",description:"All payment channels and geographies  with country risk scoring"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["scoring","approved","declined","review_queue","manual_review"],forbidden:["sanctioned_country_approved","velocity_exceeded_approved"]},odd_description:"Real-time payment authorization risk scoring. System evaluates transaction risk and returns approve/decline/review decision within latency SLA. High-risk transactions queued for manual review.",safety:{violation_action:"block",fail_closed:!1,manual_review_queue:!0}}},grid_balancing_system:{label:"Grid Balancing System",domain:"energy",template:{numeric:[{name:"max_frequency_deviation",min:-.5,max:.5,unit:"Hz",tolerance:.01},{name:"max_autonomous_dispatch",min:0,max:500,unit:"MW",tolerance:10},{name:"max_ramp_rate",min:0,max:100,unit:"MW/min",tolerance:5},{name:"response_time",min:0,max:4,unit:"s",tolerance:.5}],geo:{type:"logical",description:"Balancing authority area  approved generation and load resources"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["monitoring","regulating","dispatching","emergency_response","manual_override"],forbidden:["islanding_unauthorized","load_shed_protected_category","frequency_collapse_unresponded"]},odd_description:"Real-time grid frequency regulation within balancing authority area. System dispatches generation and load resources within authorized MW limits. Protected categories (hospitals, emergency services) hardcoded as non-sheddable. NERC compliant.",safety:{violation_action:"block",fail_closed:!0,protected_loads:!0,nerc_logging:!0,emergency_stop:!0}}},renewable_integration_controller:{label:"Renewable Integration Controller",domain:"energy",template:{numeric:[{name:"max_curtailment",min:0,max:200,unit:"MW",tolerance:5},{name:"max_ramp_rate",min:0,max:50,unit:"MW/min",tolerance:2},{name:"min_reserve_margin",min:5,max:null,unit:"%",tolerance:1}],geo:{type:"logical",description:"Connected renewable assets  solar, wind, storage facilities within control area"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["monitoring","dispatching","curtailing","ramping","forecasting"],forbidden:["reserve_margin_violated","ppa_curtailment_exceeded","grid_code_violation"]},odd_description:"Renewable energy integration management across portfolio of solar, wind, and storage assets. System optimizes dispatch, manages curtailment within PPA limits, and maintains grid code compliance.",safety:{violation_action:"block",fail_closed:!0,grid_code_compliance:!0,ppa_limits:!0}}},demand_response_system:{label:"Demand Response System",domain:"energy",template:{numeric:[{name:"max_load_reduction",min:0,max:100,unit:"MW",tolerance:5},{name:"max_event_duration",min:0,max:4,unit:"hr",tolerance:.25},{name:"max_events_per_month",min:0,max:10,unit:"events",tolerance:0},{name:"notification_lead_time",min:15,max:null,unit:"min",tolerance:5}],geo:{type:"logical",description:"Enrolled demand response participants  approved load categories and customer segments"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"utility_local"},states:{allowed:["standby","event_called","ramping_down","sustained","ramping_up","event_complete"],forbidden:["protected_load_curtailed","event_limit_exceeded","customer_opt_out_overridden"]},odd_description:"Automated demand response dispatch to enrolled participants. System manages load curtailment events within contractual limits. Protected and opted-out loads excluded from all events.",safety:{violation_action:"block",fail_closed:!0,protected_loads:!0,customer_consent:!0}}},battery_storage_dispatch:{label:"Battery Storage Dispatch System",domain:"energy",template:{numeric:[{name:"max_charge_rate",min:0,max:100,unit:"MW",tolerance:2},{name:"max_discharge_rate",min:0,max:100,unit:"MW",tolerance:2},{name:"min_soc",min:10,max:null,unit:"%",tolerance:1},{name:"max_soc",min:0,max:95,unit:"%",tolerance:1},{name:"max_cell_temperature",min:0,max:45,unit:"C",tolerance:1}],geo:{type:"logical",description:"Battery energy storage system  approved grid interconnection points and market participation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["idle","charging","discharging","grid_forming","maintenance","thermal_management"],forbidden:["soc_below_minimum","temperature_exceeded","cell_imbalance_critical"]},odd_description:"Grid-scale battery storage dispatch for energy arbitrage, frequency regulation, and peak shaving. System operates within thermal and SOC limits with fire suppression interlock. NERC/FERC compliant.",safety:{violation_action:"block",fail_closed:!0,thermal_protection:!0,fire_suppression_interlock:!0,emergency_stop:!0}}},nuclear_plant_monitor:{label:"Nuclear Plant Monitoring AI",domain:"energy",template:{numeric:[{name:"max_reactor_temperature",min:0,max:350,unit:"C",tolerance:1},{name:"max_neutron_flux",min:0,max:100,unit:"% rated",tolerance:.5},{name:"max_coolant_pressure",min:0,max:155,unit:"bar",tolerance:.5},{name:"alert_response_time",min:0,max:1,unit:"s",tolerance:.1}],geo:{type:"logical",description:"Plant instrumentation and control systems  monitoring only, no autonomous control authority over safety systems"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"plant_local"},states:{allowed:["monitoring","trending","alerting","reporting","maintenance_support"],forbidden:["safety_system_modification","scram_inhibit","setpoint_change_unauthorized"]},odd_description:"Advisory monitoring system for nuclear plant operations. System analyzes plant parameters and provides operator recommendations. NO autonomous control authority over any safety-related system. NRC/10CFR50 compliant. Human operators make all control decisions.",safety:{violation_action:"block",fail_closed:!0,monitoring_only:!0,nrc_compliant:!0}}},oil_gas_pipeline_monitor:{label:"Oil & Gas Pipeline Monitor AI",domain:"energy",template:{numeric:[{name:"max_pressure",min:0,max:100,unit:"bar",tolerance:1},{name:"max_flow_rate",min:0,max:5e3,unit:"m/hr",tolerance:50},{name:"leak_detection_threshold",min:.1,max:null,unit:"% flow",tolerance:.05},{name:"alert_latency",min:0,max:30,unit:"s",tolerance:5}],geo:{type:"linear",description:"Pipeline segments with sensor coverage  approved operating pressure zones by segment"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","leak_alert","pressure_alert","flow_alert","shutdown_recommended","maintenance"],forbidden:["leak_confirmed_flow_continued","pressure_exceeded_no_alert"]},odd_description:"Pipeline integrity monitoring with SCADA integration. System detects anomalies (leaks, pressure excursions, flow irregularities) and alerts operators. Can recommend emergency shutdown but requires operator confirmation. PHMSA compliant.",safety:{violation_action:"warn",fail_closed:!0,operator_confirmation_for_shutdown:!0,phmsa_logging:!0}}},wind_farm_controller:{label:"Wind Farm Controller",domain:"energy",template:{numeric:[{name:"max_wind_speed_operation",min:0,max:25,unit:"m/s",tolerance:.5},{name:"max_power_output",min:0,max:500,unit:"MW",tolerance:5},{name:"max_yaw_rate",min:0,max:.5,unit:"deg/s",tolerance:.05},{name:"max_rotor_speed",min:0,max:15,unit:"rpm",tolerance:.2}],geo:{type:"logical",description:"Wind farm turbine array  approved grid connection and curtailment participation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","starting","generating","curtailing","shutting_down","maintenance","storm_shutdown"],forbidden:["wind_exceeded_generating","rotor_overspeed","grid_fault_generating"]},odd_description:"Wind farm autonomous control including turbine start/stop, yaw control, power curtailment, and grid compliance. System manages individual turbines and farm-level output. Automatic storm shutdown above cut-out wind speed.",safety:{violation_action:"block",fail_closed:!0,overspeed_protection:!0,storm_shutdown:!0,grid_code_compliance:!0}}},solar_farm_controller:{label:"Solar Farm Controller",domain:"energy",template:{numeric:[{name:"max_power_output",min:0,max:300,unit:"MW",tolerance:5},{name:"max_ramp_rate",min:0,max:30,unit:"MW/min",tolerance:2},{name:"max_inverter_temperature",min:0,max:60,unit:"C",tolerance:1},{name:"min_power_factor",min:.95,max:null,unit:"ratio",tolerance:.01}],geo:{type:"logical",description:"Solar array blocks and inverter stations  approved grid connection point"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["offline","starting","generating","curtailing","ramping","grid_support","maintenance"],forbidden:["inverter_overtemp_generating","grid_fault_generating","anti_islanding_failed"]},odd_description:"Utility-scale solar farm control including tracker positioning, inverter management, power curtailment, and reactive power support. Automatic anti-islanding protection and grid code compliance.",safety:{violation_action:"block",fail_closed:!0,anti_islanding:!0,thermal_protection:!0,grid_code_compliance:!0}}},ev_charging_network:{label:"EV Charging Network Manager",domain:"energy",template:{numeric:[{name:"max_station_power",min:0,max:350,unit:"kW",tolerance:5},{name:"max_network_load",min:0,max:10,unit:"MW",tolerance:.5},{name:"max_price_per_kwh",min:0,max:1,unit:"USD/kWh",tolerance:.05},{name:"max_demand_charge_exposure",min:0,max:5e4,unit:"USD/mo",tolerance:2e3}],geo:{type:"logical",description:"Managed charging stations across network  utility interconnection points and demand response enrollment"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["monitoring","load_balancing","demand_response","dynamic_pricing","maintenance"],forbidden:["demand_charge_exceeded","grid_overload","price_gouging_threshold"]},odd_description:"Network-wide EV charging load management. System optimizes charging across stations to minimize demand charges and participate in demand response. Dynamic pricing within regulatory limits.",safety:{violation_action:"block",fail_closed:!0,demand_limiting:!0,price_caps:!0}}},smart_meter_analytics:{label:"Smart Meter Analytics AI",domain:"energy",template:{numeric:[{name:"max_meters_monitored",min:0,max:1e6,unit:"meters",tolerance:1e4},{name:"anomaly_detection_latency",min:0,max:60,unit:"min",tolerance:5},{name:"max_auto_disconnect",min:0,max:0,unit:"meters",tolerance:0}],geo:{type:"logical",description:"Utility service territory  connected AMI infrastructure"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"utility_local"},states:{allowed:["monitoring","analyzing","alerting","reporting","forecasting"],forbidden:["auto_disconnect","customer_data_shared_unauthorized","billing_modification_unauthorized"]},odd_description:"Smart meter data analytics for usage patterns, theft detection, and demand forecasting. System provides insights to utility operators. NO autonomous disconnect authority. Customer data handled per PUC privacy rules.",safety:{violation_action:"block",fail_closed:!0,no_disconnect_authority:!0,privacy_compliant:!0}}},cnc_machine_controller:{label:"CNC Machine Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_spindle_speed",min:0,max:24e3,unit:"rpm",tolerance:50},{name:"max_feed_rate",min:0,max:15e3,unit:"mm/min",tolerance:50},{name:"max_cutting_force",min:0,max:5e3,unit:"N",tolerance:50},{name:"positional_accuracy",min:0,max:.01,unit:"mm",tolerance:.002}],geo:{type:"workspace",description:"Machine tool work envelope  defined by axis travel limits and fixture positions"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","running_program","tool_change","probing","coolant_on","paused"],forbidden:["tool_breakage_detected_running","door_open_spindle_on","axis_limit_exceeded"]},odd_description:"CNC machining with AI-optimized feed rates and tool paths. System operates within machine tool envelope with hard axis limits, force monitoring, and tool breakage detection. Door interlock required.",safety:{violation_action:"block",fail_closed:!0,door_interlock:!0,force_monitoring:!0,emergency_stop:!0}}},welding_robot:{label:"Welding Robot",domain:"manufacturing",template:{numeric:[{name:"max_welding_current",min:0,max:500,unit:"A",tolerance:5},{name:"max_wire_feed_speed",min:0,max:25,unit:"m/min",tolerance:.5},{name:"max_travel_speed",min:0,max:2e3,unit:"mm/min",tolerance:20},{name:"max_heat_input",min:0,max:3,unit:"kJ/mm",tolerance:.1}],geo:{type:"workspace",description:"Welding cell with light curtain boundary  human exclusion zone during operation"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","welding","seam_tracking","torch_cleaning","part_change","inspection"],forbidden:["light_curtain_broken","gas_flow_lost","wire_stuck"]},odd_description:"Automated welding cell with safety-rated perimeter. System executes programmed weld sequences with adaptive seam tracking. Human exclusion zone enforced by light curtains and safety-rated controller.",safety:{violation_action:"block",fail_closed:!0,light_curtain:!0,gas_monitoring:!0,emergency_stop:!0}}},assembly_line_robot:{label:"Assembly Line Robot (Collaborative)",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:250,unit:"mm/s",tolerance:5},{name:"max_force",min:0,max:150,unit:"N",tolerance:5},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.2},{name:"max_power",min:0,max:80,unit:"W",tolerance:2}],geo:{type:"workspace",description:"Collaborative workspace shared with human workers  speed/force limits per ISO/TS 15066"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","assembling","handing_off","waiting","returning","paused"],forbidden:["force_exceeded","speed_exceeded_human_present","payload_exceeded"]},odd_description:"Collaborative robot (cobot) working alongside humans on assembly tasks. Power and force limiting per ISO/TS 15066. System reduces speed when human is in collaborative workspace.",safety:{violation_action:"block",fail_closed:!0,power_force_limiting:!0,speed_separation:!0,emergency_stop:!0}}},quality_inspection_ai:{label:"Quality Inspection AI (Vision)",domain:"manufacturing",template:{numeric:[{name:"max_inspection_rate",min:0,max:1e3,unit:"parts/hr",tolerance:20},{name:"min_defect_detection_rate",min:.95,max:null,unit:"ratio",tolerance:.01},{name:"max_false_reject_rate",min:0,max:2,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected inspection stations  approved part types and defect classifications"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","inspecting","classifying","rejecting","passing","calibrating"],forbidden:["model_confidence_below_threshold_passing","uncalibrated_inspecting","new_part_type_unvalidated"]},odd_description:"Machine vision quality inspection for manufactured parts. System classifies parts as pass/fail/review based on visual defects. Low-confidence parts routed to human inspector. Calibration checks required per shift.",safety:{violation_action:"block",fail_closed:!0,human_review_queue:!0,calibration_interlock:!0}}},predictive_maintenance_ai:{label:"Predictive Maintenance AI",domain:"manufacturing",template:{numeric:[{name:"max_monitored_assets",min:0,max:1e4,unit:"assets",tolerance:100},{name:"prediction_horizon",min:0,max:90,unit:"days",tolerance:5},{name:"max_auto_work_orders",min:0,max:50,unit:"orders/day",tolerance:5}],geo:{type:"logical",description:"Connected sensor network across facility  approved asset types and maintenance categories"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["monitoring","analyzing","alerting","work_order_generated","technician_dispatched"],forbidden:["critical_alert_suppressed","auto_shutdown_without_confirmation"]},odd_description:"Vibration, thermal, and performance monitoring for rotating equipment and industrial assets. System predicts failures and generates maintenance work orders. Cannot autonomously shut down production equipment.",safety:{violation_action:"warn",fail_closed:!0,no_auto_shutdown:!0,maintenance_team_notification:!0}}},chemical_process_controller:{label:"Chemical Process Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_temperature",min:0,max:500,unit:"C",tolerance:2},{name:"max_pressure",min:0,max:50,unit:"bar",tolerance:.5},{name:"max_flow_rate",min:0,max:1e3,unit:"L/hr",tolerance:10},{name:"max_concentration",min:0,max:100,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Process unit with SIS boundaries  approved setpoint ranges per unit operation"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","startup","steady_state","grade_change","shutdown","emergency_shutdown"],forbidden:["sis_setpoint_override","safety_valve_bypass","runaway_reaction_unresponded"]},odd_description:"Advanced process control for chemical manufacturing. System optimizes within safety instrumented system (SIS) boundaries. Cannot modify SIS setpoints. Independent SIS takes priority over all APC actions. ISA-84/IEC 61511 compliant.",safety:{violation_action:"block",fail_closed:!0,sis_independent:!0,process_safety:!0,emergency_stop:!0}}},semiconductor_fab_controller:{label:"Semiconductor Fab Controller AI",domain:"manufacturing",template:{numeric:[{name:"max_particle_count",min:0,max:100,unit:"particles/m",tolerance:5},{name:"temperature_stability",min:-.1,max:.1,unit:"C",tolerance:.02},{name:"humidity_stability",min:-.5,max:.5,unit:"%RH",tolerance:.1},{name:"max_wafers_in_process",min:0,max:5e3,unit:"wafers",tolerance:50}],geo:{type:"logical",description:"Cleanroom zones with environmental controls  approved tool groups and process recipes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"fab_local"},states:{allowed:["idle","processing","transferring","measuring","recipe_running","maintenance"],forbidden:["cleanroom_excursion_processing","recipe_deviation_unapproved","contamination_detected_running"]},odd_description:"Semiconductor fabrication process optimization and scheduling. System manages wafer routing, recipe execution, and environmental control within cleanroom specifications. Recipe changes require engineering approval.",safety:{violation_action:"block",fail_closed:!0,recipe_lock:!0,environmental_interlock:!0}}},food_processing_robot:{label:"Food Processing Robot",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:200,unit:"mm/s",tolerance:5},{name:"max_force",min:0,max:100,unit:"N",tolerance:5},{name:"max_product_temperature",min:0,max:10,unit:"C",tolerance:.5},{name:"max_processing_time",min:0,max:30,unit:"min",tolerance:1}],geo:{type:"workspace",description:"Food processing line  hygienic zone with controlled access"},time:{operating_hours:"04:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","processing","sorting","packaging","cleaning","sanitizing"],forbidden:["temperature_exceeded","foreign_object_detected","sanitation_schedule_missed"]},odd_description:"Food processing automation with temperature-controlled handling. System operates in hygienic environment with HACCP compliance. Temperature limits enforced throughout processing chain. Sanitation schedule mandatory.",safety:{violation_action:"block",fail_closed:!0,haccp_compliance:!0,temperature_monitoring:!0,emergency_stop:!0}}},packaging_robot:{label:"Packaging Robot",domain:"manufacturing",template:{numeric:[{name:"max_speed",min:0,max:500,unit:"mm/s",tolerance:10},{name:"max_payload",min:0,max:30,unit:"kg",tolerance:1},{name:"max_cycle_rate",min:0,max:120,unit:"cycles/min",tolerance:5}],geo:{type:"workspace",description:"Packaging cell with guarded perimeter  conveyor in/out interfaces"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","picking","placing","palletizing","labeling","changeover"],forbidden:["guard_open_running","conveyor_jam_running","overweight_package"]},odd_description:"End-of-line packaging automation including case packing, palletizing, and labeling. System operates within guarded cell with safety-rated perimeter. Conveyor interlocks prevent operation during jams.",safety:{violation_action:"block",fail_closed:!0,guard_interlock:!0,conveyor_interlock:!0,emergency_stop:!0}}},paint_coating_robot:{label:"Paint / Coating Robot",domain:"manufacturing",template:{numeric:[{name:"max_spray_pressure",min:0,max:200,unit:"bar",tolerance:5},{name:"max_flow_rate",min:0,max:1e3,unit:"mL/min",tolerance:10},{name:"max_booth_temperature",min:0,max:30,unit:"C",tolerance:1},{name:"max_voc_concentration",min:0,max:200,unit:"ppm",tolerance:10}],geo:{type:"workspace",description:"Spray booth envelope  explosion-proof zone with ventilation requirements"},time:{operating_hours:"06:00-22:00",operating_days:[1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","spraying","flushing","color_change","curing","booth_purge"],forbidden:["ventilation_failed_spraying","voc_exceeded","fire_suppression_triggered"]},odd_description:"Automated paint/coating application in explosion-proof spray booth. System monitors VOC levels, booth ventilation, and fire suppression status. Operations halt immediately on ventilation failure or VOC exceedance.",safety:{violation_action:"block",fail_closed:!0,ventilation_interlock:!0,fire_suppression:!0,explosion_proof:!0,emergency_stop:!0}}},perimeter_surveillance:{label:"Perimeter Surveillance System",domain:"defense",template:{numeric:[{name:"max_detection_range",min:0,max:5e3,unit:"m",tolerance:50},{name:"max_tracking_targets",min:0,max:100,unit:"targets",tolerance:5},{name:"alert_latency",min:0,max:2,unit:"s",tolerance:.2},{name:"min_classification_confidence",min:.85,max:null,unit:"score",tolerance:.02}],geo:{type:"polygon",description:"Facility perimeter with detection zones  inner/outer alert zones, exclusion zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["monitoring","tracking","alerting","recording","reporting"],forbidden:["autonomous_response","weapon_system_activation","perimeter_breach_unreported"]},odd_description:"Fixed perimeter surveillance with AI-assisted detection and classification. System detects, tracks, and classifies intrusions. All responses are human-initiated. No autonomous engagement capability.",safety:{violation_action:"block",fail_closed:!0,human_response_only:!0,recording_mandatory:!0}}},threat_detection_ai:{label:"Threat Detection AI",domain:"defense",template:{numeric:[{name:"max_concurrent_feeds",min:0,max:500,unit:"feeds",tolerance:10},{name:"detection_latency",min:0,max:5,unit:"s",tolerance:.5},{name:"min_confidence_for_alert",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"Connected sensor network  cameras, radar, acoustic, seismic sensors"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","detecting","classifying","alerting","reporting"],forbidden:["autonomous_engagement","alert_suppression","classification_override_unauthorized"]},odd_description:"Multi-sensor threat detection and classification for critical infrastructure protection. System fuses data from multiple sensor types and alerts human operators. Detection and alert only  no autonomous response.",safety:{violation_action:"block",fail_closed:!0,human_response_only:!0,audit_trail:!0}}},military_logistics_automation:{label:"Military Logistics Automation",domain:"defense",template:{numeric:[{name:"max_autonomous_requisition",min:0,max:5e4,unit:"USD",tolerance:5e3},{name:"max_route_deviation",min:0,max:10,unit:"%",tolerance:1},{name:"max_classified_handling_level",min:0,max:2,unit:"level",tolerance:0}],geo:{type:"polygon",description:"Approved logistics corridors and supply points  excludes forward operating areas without authorization"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"theater_local"},states:{allowed:["planning","routing","dispatching","tracking","receiving","reporting"],forbidden:["classified_material_untracked","requisition_exceeded","unauthorized_route"]},odd_description:"Military supply chain automation for routine logistics operations. System optimizes routing and inventory within authorized parameters. Classified material handling requires additional authorization layers.",safety:{violation_action:"block",fail_closed:!0,classification_enforcement:!0,chain_of_custody:!0}}},eod_mine_clearance_robot:{label:"EOD / Mine Clearance Robot",domain:"defense",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"max_detection_depth",min:0,max:.5,unit:"m",tolerance:.02},{name:"max_mission_duration",min:0,max:8,unit:"hr",tolerance:.5},{name:"min_safe_distance",min:100,max:null,unit:"m",tolerance:10}],geo:{type:"polygon",description:"Defined clearance lane or area  marked safe zones, exclusion zones for personnel"},time:{operating_hours:"06:00-18:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["standby","scanning","detecting","marking","neutralizing","retreating","decontaminating"],forbidden:["personnel_in_danger_zone","autonomous_detonation_without_authorization"]},odd_description:"Remote-controlled or semi-autonomous EOD/mine clearance operations. System scans, detects, and marks ordnance. Neutralization requires human authorization for each item. Personnel exclusion zone enforced.",safety:{violation_action:"block",fail_closed:!0,human_authorization_for_neutralization:!0,personnel_exclusion:!0,emergency_stop:!0}}},autonomous_sensor_network:{label:"Autonomous Sensor Network",domain:"defense",template:{numeric:[{name:"max_nodes",min:0,max:1e3,unit:"nodes",tolerance:10},{name:"max_data_rate",min:0,max:100,unit:"Mbps",tolerance:5},{name:"max_classification_level",min:0,max:3,unit:"level",tolerance:0}],geo:{type:"polygon",description:"Deployed sensor coverage area  data handling boundaries per classification"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["deployed","collecting","processing","transmitting","low_power","maintenance"],forbidden:["classification_spillage","unauthorized_transmission","node_compromise_undetected"]},odd_description:"Distributed autonomous sensor network for ISR operations. Nodes self-organize mesh network and process data at edge. Classification-level data handling enforced at each node. Anti-tamper protection.",safety:{violation_action:"block",fail_closed:!0,classification_enforcement:!0,anti_tamper:!0}}},cyber_defense_ai:{label:"Cyber Defense AI",domain:"defense",template:{numeric:[{name:"max_auto_block_duration",min:0,max:60,unit:"min",tolerance:5},{name:"max_auto_isolate_hosts",min:0,max:10,unit:"hosts",tolerance:1},{name:"detection_latency",min:0,max:5,unit:"s",tolerance:.5}],geo:{type:"logical",description:"Defended network segments  approved response actions per segment criticality"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","detecting","alerting","auto_responding","containing","reporting"],forbidden:["mission_critical_system_isolated","offensive_action","evidence_destroyed"]},odd_description:"Network defense AI with limited autonomous response capability. System can block IPs and isolate non-critical hosts for limited duration. Mission-critical system isolation requires human authorization. Forensic evidence preserved.",safety:{violation_action:"block",fail_closed:!0,mission_critical_protection:!0,forensic_preservation:!0,human_escalation:!0}}},precision_irrigation:{label:"Precision Irrigation System",domain:"agriculture",template:{numeric:[{name:"max_water_usage_daily",min:0,max:5e5,unit:"L",tolerance:5e3},{name:"max_zone_flow_rate",min:0,max:100,unit:"L/min",tolerance:2},{name:"min_soil_moisture",min:20,max:null,unit:"%",tolerance:2},{name:"max_soil_moisture",min:0,max:80,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Irrigation zones with soil type mapping  water rights boundaries and buffer zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["idle","irrigating","monitoring","draining","frost_protection","maintenance"],forbidden:["water_rights_exceeded","runoff_detected","freeze_warning_irrigating"]},odd_description:"Automated precision irrigation based on soil moisture, weather forecast, and crop stage. System operates within water rights allocations and prevents overwatering/runoff. Frost protection mode available.",safety:{violation_action:"block",fail_closed:!0,water_rights_enforcement:!0,runoff_prevention:!0}}},crop_monitoring_ai:{label:"Crop Monitoring AI",domain:"agriculture",template:{numeric:[{name:"max_field_area",min:0,max:1e4,unit:"ha",tolerance:100},{name:"monitoring_frequency",min:0,max:24,unit:"hr",tolerance:1},{name:"min_detection_confidence",min:.8,max:null,unit:"score",tolerance:.02}],geo:{type:"polygon",description:"Farm field boundaries  satellite/drone coverage areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["monitoring","analyzing","alerting","recommending","reporting"],forbidden:["auto_spray_trigger","misidentified_pest_treated"]},odd_description:"Remote sensing and AI analysis for crop health, pest detection, and yield estimation. System provides recommendations to farm operators. Cannot autonomously trigger treatments  farmer approval required.",safety:{violation_action:"warn",fail_closed:!0,farmer_approval_required:!0}}},livestock_monitoring_ai:{label:"Livestock Monitoring AI",domain:"agriculture",template:{numeric:[{name:"max_herd_size",min:0,max:1e4,unit:"head",tolerance:100},{name:"alert_latency",min:0,max:60,unit:"s",tolerance:5},{name:"monitoring_frequency",min:0,max:15,unit:"min",tolerance:1}],geo:{type:"polygon",description:"Pasture and barn boundaries  fence lines and water sources"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"farm_local"},states:{allowed:["monitoring","alerting_health","alerting_escape","alerting_predator","reporting"],forbidden:["auto_medication","fence_breach_unreported"]},odd_description:"Wearable sensor and camera-based livestock health and behavior monitoring. System detects illness, calving, escape, and predator presence. Alerts farm staff  no autonomous treatment or intervention.",safety:{violation_action:"warn",fail_closed:!0,farmer_notification:!0}}},greenhouse_controller:{label:"Greenhouse Controller AI",domain:"agriculture",template:{numeric:[{name:"temperature_min",min:15,max:null,unit:"C",tolerance:.5},{name:"temperature_max",min:0,max:35,unit:"C",tolerance:.5},{name:"humidity_min",min:40,max:null,unit:"%RH",tolerance:2},{name:"humidity_max",min:0,max:85,unit:"%RH",tolerance:2},{name:"co2_max",min:0,max:1500,unit:"ppm",tolerance:50}],geo:{type:"enclosure",description:"Greenhouse zones with independent climate control  propagation, growing, hardening areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["day_mode","night_mode","ventilating","heating","cooling","co2_enriching","irrigating"],forbidden:["co2_exceeded_vents_closed","temperature_critical","humidity_condensation"]},odd_description:"Automated greenhouse climate control including heating, cooling, ventilation, CO2 enrichment, and irrigation. System maintains crop-specific environmental profiles. Safety ventilation override on CO2 or temperature exceedance.",safety:{violation_action:"block",fail_closed:!0,ventilation_override:!0,temperature_protection:!0}}},environmental_monitoring_station:{label:"Environmental Monitoring Station AI",domain:"agriculture",template:{numeric:[{name:"max_stations",min:0,max:500,unit:"stations",tolerance:10},{name:"data_collection_interval",min:0,max:60,unit:"min",tolerance:5},{name:"alert_threshold_aqi",min:0,max:500,unit:"AQI",tolerance:10}],geo:{type:"polygon",description:"Monitoring network coverage area  station locations with sensor configurations"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["collecting","analyzing","alerting","reporting","calibrating","maintenance"],forbidden:["data_gap_unreported","calibration_expired_reporting","alert_suppressed"]},odd_description:"Environmental monitoring network for air quality, water quality, noise, and weather. System aggregates data, detects exceedances, and issues public alerts. Cannot suppress or modify raw sensor data.",safety:{violation_action:"warn",fail_closed:!0,data_integrity:!0,public_notification:!0}}},satellite_constellation_manager:{label:"Satellite Constellation Manager",domain:"space_extreme",template:{numeric:[{name:"max_satellites",min:0,max:5e3,unit:"satellites",tolerance:10},{name:"max_autonomous_maneuver_delta_v",min:0,max:1,unit:"m/s",tolerance:.01},{name:"min_collision_avoidance_time",min:24,max:null,unit:"hr",tolerance:2}],geo:{type:"orbital",description:"Approved orbital shells and planes  conjunction avoidance zones, debris tracking"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["nominal","station_keeping","collision_avoidance","orbit_raising","deorbiting","safe_mode"],forbidden:["maneuver_without_conjunction_check","debris_creation_risk","frequency_interference"]},odd_description:"LEO satellite constellation management including station-keeping, collision avoidance, and deorbiting. System performs autonomous collision avoidance maneuvers within delta-V budget. Large maneuvers require ground authorization.",safety:{violation_action:"block",fail_closed:!0,conjunction_assessment:!0,space_debris_mitigation:!0}}},planetary_rover:{label:"Planetary Rover",domain:"space_extreme",template:{numeric:[{name:"max_speed",min:0,max:.15,unit:"km/h",tolerance:.01},{name:"max_tilt_angle",min:0,max:30,unit:"degrees",tolerance:1},{name:"max_daily_traverse",min:0,max:200,unit:"m",tolerance:10},{name:"min_power_reserve",min:20,max:null,unit:"%",tolerance:2}],geo:{type:"polygon",description:"Approved traverse corridor based on orbital imagery  avoids steep terrain, soft soil, and science preservation zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mission_local"},states:{allowed:["parked","traversing","science_stop","drilling","communicating","sleeping"],forbidden:["tilt_exceeded","power_critical_traversing","hazard_terrain_entered"]},odd_description:"Planetary surface exploration with autonomous hazard avoidance. Communication delays require autonomous navigation between waypoints. System preserves power for communication windows and avoids terrain hazards.",safety:{violation_action:"block",fail_closed:!0,hazard_avoidance:!0,power_preservation:!0}}},deep_sea_mining_robot:{label:"Deep Sea Mining Robot",domain:"space_extreme",template:{numeric:[{name:"max_depth",min:0,max:6e3,unit:"m",tolerance:10},{name:"max_collection_rate",min:0,max:100,unit:"tonnes/hr",tolerance:5},{name:"max_sediment_plume",min:0,max:50,unit:"m_visibility",tolerance:5},{name:"max_mission_duration",min:0,max:720,unit:"hr",tolerance:24}],geo:{type:"polygon_3d",description:"Licensed mining claim boundary  excludes environmental protection zones, vent communities, cable routes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["surface","diving","collecting","transiting","ascending","maintenance"],forbidden:["environmental_zone_entered","plume_exceeded","claim_boundary_exceeded"]},odd_description:"Deep-sea polymetallic nodule or mineral collection within licensed claim area. System operates at extreme depth with limited communication. Environmental exclusion zones enforced by onboard navigation.",safety:{violation_action:"block",fail_closed:!0,environmental_protection:!0,depth_limiter:!0}}},arctic_research_robot:{label:"Arctic / Antarctic Research Robot",domain:"space_extreme",template:{numeric:[{name:"max_speed",min:0,max:5,unit:"km/h",tolerance:.5},{name:"min_operating_temperature",min:-50,max:null,unit:"C",tolerance:2},{name:"max_ice_thickness",min:0,max:3,unit:"m",tolerance:.1},{name:"max_mission_duration",min:0,max:168,unit:"hr",tolerance:12}],geo:{type:"polygon",description:"Approved research area  excludes wildlife protected zones, thin ice areas, crevasse fields"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["base_camp","traversing","sampling","monitoring","sheltering","returning"],forbidden:["thin_ice_detected","wildlife_zone","whiteout_conditions","communication_lost_24hr"]},odd_description:"Polar research platform operating in extreme cold with limited communication. System performs environmental sampling and monitoring within approved research zones. Auto-return on weather degradation or communication loss.",safety:{violation_action:"block",fail_closed:!0,weather_protection:!0,auto_return:!0,wildlife_avoidance:!0}}},network_traffic_controller:{label:"Network Traffic Controller AI",domain:"telecom_digital",template:{numeric:[{name:"max_bandwidth_allocation",min:0,max:100,unit:"Tbps",tolerance:1},{name:"max_route_changes_per_hour",min:0,max:1e3,unit:"changes/hr",tolerance:50},{name:"max_latency_target",min:0,max:50,unit:"ms",tolerance:2}],geo:{type:"logical",description:"Managed network topology  approved routing policies and peering agreements"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["normal","load_balancing","failover","congestion_management","maintenance_window"],forbidden:["routing_loop_created","peering_violation","priority_traffic_degraded"]},odd_description:"Software-defined network traffic engineering with AI optimization. System manages routing, load balancing, and failover within approved policies. Priority traffic classes (emergency services, healthcare) protected.",safety:{violation_action:"block",fail_closed:!0,priority_traffic_protection:!0,routing_validation:!0}}},content_moderation_ai:{label:"Content Moderation AI",domain:"telecom_digital",template:{numeric:[{name:"max_daily_reviews",min:0,max:1e7,unit:"items",tolerance:1e5},{name:"max_auto_remove_confidence",min:.95,max:null,unit:"score",tolerance:.01},{name:"review_latency",min:0,max:60,unit:"s",tolerance:5},{name:"max_false_positive_rate",min:0,max:1,unit:"%",tolerance:.2}],geo:{type:"logical",description:"Platform content streams  approved content policies by jurisdiction"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["scanning","classifying","auto_removing","queuing_review","reporting","escalating"],forbidden:["political_content_auto_removed","satire_auto_removed","appeal_ignored"]},odd_description:"AI-assisted content moderation for platform safety. System auto-removes clear violations (CSAM, spam, malware links) and queues borderline content for human review. Political, satirical, and newsworthy content requires human decision.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,appeal_process:!0,transparency_reporting:!0}}},cloud_resource_allocator:{label:"Cloud Resource Allocator AI",domain:"telecom_digital",template:{numeric:[{name:"max_auto_scale_instances",min:0,max:1e4,unit:"instances",tolerance:100},{name:"max_hourly_spend",min:0,max:1e5,unit:"USD/hr",tolerance:5e3},{name:"target_utilization",min:0,max:85,unit:"%",tolerance:2}],geo:{type:"logical",description:"Approved cloud regions and availability zones  data residency requirements by workload"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","scaling_up","scaling_down","migrating","rebalancing","cost_optimizing"],forbidden:["budget_exceeded","data_residency_violation","single_az_critical_workload"]},odd_description:"Autonomous cloud infrastructure management with cost optimization. System scales resources based on demand within budget limits and data residency requirements. Cannot exceed hourly spend cap or violate data sovereignty rules.",safety:{violation_action:"block",fail_closed:!0,budget_enforcement:!0,data_residency:!0}}},data_center_cooling:{label:"Data Center Cooling Controller AI",domain:"telecom_digital",template:{numeric:[{name:"max_server_inlet_temp",min:0,max:27,unit:"C",tolerance:.5},{name:"max_pue",min:0,max:1.5,unit:"ratio",tolerance:.02},{name:"max_water_usage",min:0,max:1e4,unit:"L/hr",tolerance:100},{name:"min_redundancy",min:1,max:null,unit:"N+1",tolerance:0}],geo:{type:"logical",description:"Data center cooling infrastructure  CRAC/CRAH units, chillers, cooling towers per zone"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["normal","economizer_mode","mechanical_cooling","emergency_cooling","maintenance"],forbidden:["temperature_exceeded_no_response","redundancy_lost_no_alert","water_leak_undetected"]},odd_description:"AI-optimized data center cooling for energy efficiency. System manages HVAC equipment to minimize PUE while maintaining temperature limits. Redundancy requirements enforced  cannot take cooling unit offline below N+1.",safety:{violation_action:"block",fail_closed:!0,temperature_protection:!0,redundancy_enforcement:!0,emergency_stop:!0}}},five_g_network_slicing:{label:"5G Network Slicing Controller",domain:"telecom_digital",template:{numeric:[{name:"max_slices",min:0,max:1e3,unit:"slices",tolerance:10},{name:"min_guaranteed_bandwidth",min:0,max:null,unit:"Mbps",tolerance:1},{name:"max_latency_critical_slice",min:0,max:5,unit:"ms",tolerance:.5}],geo:{type:"logical",description:"RAN and core network elements  approved slice configurations per customer SLA"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["configuring","active","scaling","migrating","decommissioning"],forbidden:["sla_violation_unresolved","critical_slice_degraded","resource_overcommit"]},odd_description:"5G network slice lifecycle management. System allocates, scales, and optimizes network slices within SLA guarantees. Critical slices (emergency services, healthcare) have priority and guaranteed resources.",safety:{violation_action:"block",fail_closed:!0,sla_enforcement:!0,priority_slices:!0}}},construction_excavator_autonomous:{label:"Autonomous Construction Excavator",domain:"construction",template:{numeric:[{name:"max_dig_depth",min:0,max:7,unit:"m",tolerance:.1},{name:"max_swing_speed",min:0,max:6,unit:"rpm",tolerance:.2},{name:"max_bucket_load",min:0,max:3e3,unit:"kg",tolerance:50},{name:"min_utility_clearance",min:1,max:null,unit:"m",tolerance:.1}],geo:{type:"polygon",description:"Excavation zone with known utility locations  exclusion zones around buried infrastructure, pedestrian areas"},time:{operating_hours:"07:00-18:00",operating_days:[1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["idle","excavating","loading","grading","repositioning","refueling"],forbidden:["utility_zone_entered","personnel_in_swing_radius","grade_exceeded"]},odd_description:"Autonomous excavation within defined dig zone. System uses GPS-RTK positioning with known utility maps. Hard exclusion zones around buried utilities. Personnel detection stops all motion.",safety:{violation_action:"block",fail_closed:!0,utility_avoidance:!0,personnel_detection:!0,emergency_stop:!0}}},construction_site_drone:{label:"Construction Site Survey Drone",domain:"construction",template:{numeric:[{name:"max_altitude_agl",min:0,max:100,unit:"m",tolerance:3},{name:"max_speed",min:0,max:30,unit:"km/h",tolerance:2},{name:"max_wind_speed",min:0,max:25,unit:"km/h",tolerance:2}],geo:{type:"polygon_3d",description:"Construction site boundary with crane exclusion zones and active work area buffers"},time:{operating_hours:"06:00-18:00",operating_days:[1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["grounded","surveying","inspecting","returning","landing"],forbidden:["crane_zone_entered","active_pour_zone","wind_exceeded"]},odd_description:"Construction site progress monitoring and survey via drone. System avoids active crane zones and work areas. Flights coordinated with site safety officer. Daily progress capture for BIM comparison.",safety:{violation_action:"block",fail_closed:!0,crane_avoidance:!0,geofence_hard:!0,emergency_stop:!0}}},tunnel_boring_machine_ai:{label:"Tunnel Boring Machine AI",domain:"construction",template:{numeric:[{name:"max_advance_rate",min:0,max:30,unit:"m/day",tolerance:1},{name:"max_face_pressure",min:0,max:5,unit:"bar",tolerance:.1},{name:"max_torque",min:0,max:5e4,unit:"kNm",tolerance:500},{name:"max_deviation_from_alignment",min:0,max:50,unit:"mm",tolerance:5}],geo:{type:"linear",description:"Tunnel alignment with designed profile  exclusion zones around surface structures and utilities"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"site_local"},states:{allowed:["standby","boring","segment_erecting","grouting","maintenance","survey_check"],forbidden:["face_pressure_exceeded","alignment_exceeded","ground_settlement_exceeded"]},odd_description:"AI-optimized TBM operation for tunnel construction. System controls advance rate, face pressure, and grouting based on ground conditions. Alignment maintained within tolerances. Ground settlement monitoring with automatic pause.",safety:{violation_action:"block",fail_closed:!0,settlement_monitoring:!0,face_pressure_control:!0,emergency_stop:!0}}},autonomous_haul_truck_surface:{label:"Surface Mine Haul Truck",domain:"construction",template:{numeric:[{name:"max_speed_loaded",min:0,max:40,unit:"km/h",tolerance:2},{name:"max_speed_empty",min:0,max:55,unit:"km/h",tolerance:2},{name:"max_payload",min:0,max:35e4,unit:"kg",tolerance:5e3},{name:"max_grade",min:0,max:12,unit:"%",tolerance:.5}],geo:{type:"polygon",description:"Mine haul roads with edge detection zones  approved routes between pit, crusher, dump, and fuel bay"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"mine_local"},states:{allowed:["parked","hauling_loaded","hauling_empty","loading","dumping","fueling","washing"],forbidden:["edge_proximity_exceeded","blast_zone_active","overloaded","grade_exceeded_loaded"]},odd_description:"Ultra-class autonomous haul truck in open-pit mine. System follows designated haul roads with edge detection. Integrates with mine dispatch, blast management, and fleet traffic control.",safety:{violation_action:"block",fail_closed:!0,edge_protection:!0,blast_interlock:!0,overload_protection:!0,emergency_stop:!0}}},warehouse_sorting_system:{label:"Warehouse Sorting System",domain:"logistics",template:{numeric:[{name:"max_throughput",min:0,max:2e4,unit:"packages/hr",tolerance:500},{name:"max_package_weight",min:0,max:35,unit:"kg",tolerance:1},{name:"max_divert_speed",min:0,max:3,unit:"m/s",tolerance:.1},{name:"max_misroute_rate",min:0,max:.1,unit:"%",tolerance:.02}],geo:{type:"linear",description:"Sortation conveyor system  input stations, divert chutes, recirculation loop"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["idle","sorting","recirculating","jam_clearing","calibrating","maintenance"],forbidden:["misroute_rate_exceeded","jam_uncleared","overweight_on_sorter"]},odd_description:"High-speed automated package sortation with vision-based routing. System reads labels, routes packages to correct chutes, and recirculates unreadable items. Overweight/oversized packages rejected to manual lane.",safety:{violation_action:"block",fail_closed:!0,jam_detection:!0,oversize_rejection:!0,emergency_stop:!0}}},fleet_management_ai:{label:"Fleet Management / Route Optimization AI",domain:"logistics",template:{numeric:[{name:"max_fleet_size",min:0,max:1e4,unit:"vehicles",tolerance:100},{name:"max_daily_route_changes",min:0,max:5e4,unit:"changes",tolerance:1e3},{name:"max_driver_hours",min:0,max:11,unit:"hr",tolerance:0},{name:"max_fuel_budget_deviation",min:0,max:10,unit:"%",tolerance:1}],geo:{type:"road_network",description:"Approved road network with vehicle restrictions  bridge limits, tunnel restrictions, hazmat routes"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["planning","dispatching","routing","monitoring","re_routing","reporting"],forbidden:["hos_violation_dispatched","restricted_road_assigned","overweight_route"]},odd_description:"AI fleet dispatch and route optimization. System assigns loads, optimizes routes, and monitors delivery progress. Hours-of-service limits enforced  cannot dispatch driver beyond legal limits. Vehicle restrictions (weight, height, hazmat) enforced per route segment.",safety:{violation_action:"block",fail_closed:!0,hos_compliance:!0,vehicle_restrictions:!0}}},inventory_management_ai:{label:"Inventory Management / Reorder AI",domain:"logistics",template:{numeric:[{name:"max_auto_reorder_value",min:0,max:1e5,unit:"USD",tolerance:5e3},{name:"max_sku_count",min:0,max:1e6,unit:"SKUs",tolerance:1e4},{name:"max_price_deviation",min:0,max:5,unit:"%",tolerance:.5}],geo:{type:"logical",description:"Connected warehouse and ERP systems  approved vendor list and procurement channels"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["monitoring","forecasting","reorder_generated","po_created","receiving","reconciling"],forbidden:["unapproved_vendor","price_deviation_exceeded","budget_exceeded"]},odd_description:"AI-driven demand forecasting and automatic reorder point management. System generates purchase orders within approved vendor list and budget limits. Orders exceeding thresholds require human approval.",safety:{violation_action:"block",fail_closed:!0,budget_enforcement:!0,vendor_approval:!0,human_escalation:!0}}},cold_chain_monitor:{label:"Cold Chain Monitoring AI",domain:"logistics",template:{numeric:[{name:"temperature_min",min:-25,max:null,unit:"C",tolerance:.5},{name:"temperature_max",min:0,max:8,unit:"C",tolerance:.5},{name:"max_excursion_duration",min:0,max:30,unit:"min",tolerance:2},{name:"max_door_open_time",min:0,max:5,unit:"min",tolerance:.5}],geo:{type:"logical",description:"Cold chain from origin to destination  sensors in trucks, warehouses, and retail cases"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","alerting","logging","reporting","audit_mode"],forbidden:["excursion_exceeded_unreported","sensor_offline_unnoticed","falsified_log"]},odd_description:"End-to-end cold chain temperature monitoring for pharmaceuticals and food. System logs continuous temperature data, alerts on excursions, and generates compliance reports. Cannot modify temperature logs. FDA 21 CFR Part 11 compliant where required.",safety:{violation_action:"warn",fail_closed:!0,tamper_evident_logging:!0,immediate_alert:!0}}},retail_shelf_scanning_robot:{label:"Retail Shelf-Scanning Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.3},{name:"max_aisle_width_required",min:1,max:null,unit:"m",tolerance:.1},{name:"scan_frequency",min:0,max:3,unit:"scans/day",tolerance:0}],geo:{type:"floor_plan",description:"Retail store floor plan  approved aisles and scan paths, excludes back of house, checkout lanes during busy periods"},time:{operating_hours:"22:00-06:00",operating_days:[0,1,2,3,4,5,6],timezone:"store_local"},states:{allowed:["docked","scanning","navigating","obstacle_wait","returning","charging"],forbidden:["customer_collision_risk","aisle_blocked_forcing","store_open_peak_hours"]},odd_description:"Autonomous shelf-scanning robot for inventory accuracy during off-hours. System navigates store aisles, captures shelf images, and identifies out-of-stocks. Operates primarily during closed or low-traffic hours.",safety:{violation_action:"block",fail_closed:!0,pedestrian_avoidance:!0,emergency_stop:!0}}},hotel_service_robot:{label:"Hotel / Hospitality Service Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_speed",min:0,max:3,unit:"km/h",tolerance:.3},{name:"max_payload",min:0,max:10,unit:"kg",tolerance:.5},{name:"max_noise_level",min:0,max:50,unit:"dB",tolerance:2}],geo:{type:"floor_plan",description:"Hotel corridors and elevator system  excludes guest rooms (delivery to door only), kitchen prep areas, pool deck"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"hotel_local"},states:{allowed:["docked","delivering","returning","elevator_transit","waiting_at_door","charging"],forbidden:["guest_room_entry","speed_exceeded_lobby","noise_exceeded_night"]},odd_description:"Hotel room service and amenity delivery robot. System delivers items to guest room doors via corridors and elevators. Does not enter rooms. Reduced speed in lobby, noise limits during quiet hours.",safety:{violation_action:"block",fail_closed:!0,no_room_entry:!0,quiet_hours:!0,emergency_stop:!0}}},restaurant_kitchen_robot:{label:"Restaurant Kitchen Automation Robot",domain:"retail_hospitality",template:{numeric:[{name:"max_oil_temperature",min:0,max:190,unit:"C",tolerance:2},{name:"max_grill_temperature",min:0,max:300,unit:"C",tolerance:5},{name:"max_portion_deviation",min:0,max:5,unit:"%",tolerance:1},{name:"max_orders_per_hour",min:0,max:200,unit:"orders/hr",tolerance:10}],geo:{type:"workspace",description:"Kitchen prep and cook stations  human exclusion zones around hot equipment during autonomous operation"},time:{operating_hours:"10:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"restaurant_local"},states:{allowed:["idle","prepping","cooking","plating","cleaning","maintenance"],forbidden:["human_in_hot_zone","oil_overtemp","fire_suppression_triggered"]},odd_description:"Automated food preparation and cooking for quick-service restaurant. System handles repetitive cooking tasks (frying, grilling, assembly) within enclosed stations. Human exclusion zones around hot equipment.",safety:{violation_action:"block",fail_closed:!0,fire_suppression:!0,temperature_limits:!0,human_exclusion:!0,emergency_stop:!0}}},autonomous_checkout:{label:"Autonomous Checkout / Just Walk Out",domain:"retail_hospitality",template:{numeric:[{name:"max_concurrent_shoppers",min:0,max:200,unit:"shoppers",tolerance:10},{name:"max_item_price",min:0,max:500,unit:"USD",tolerance:10},{name:"min_detection_accuracy",min:.95,max:null,unit:"ratio",tolerance:.01},{name:"max_charge_latency",min:0,max:60,unit:"min",tolerance:5}],geo:{type:"polygon",description:"Store sensor coverage area  entry/exit gates, shelf sensors, camera zones"},time:{operating_hours:"06:00-23:00",operating_days:[0,1,2,3,4,5,6],timezone:"store_local"},states:{allowed:["monitoring","tracking","cart_building","checkout_processing","dispute_queue"],forbidden:["charge_without_confidence","privacy_zone_recording","minor_unaccompanied_alcohol"]},odd_description:"Computer vision-based autonomous checkout system. System tracks item selection and charges on exit. Low-confidence transactions queued for human review. Privacy zones in fitting rooms and restrooms.",safety:{violation_action:"block",fail_closed:!1,human_review_queue:!0,privacy_zones:!0,dispute_process:!0}}},research_lab_robot:{label:"Research Lab Automation Robot",domain:"education_research",template:{numeric:[{name:"max_experiments_per_day",min:0,max:100,unit:"experiments",tolerance:5},{name:"max_reagent_volume",min:0,max:50,unit:"mL",tolerance:.5},{name:"temperature_control_range",min:-20,max:100,unit:"C",tolerance:.5}],geo:{type:"workspace",description:"Lab bench and instrument footprint  fume hood, biosafety cabinet, instrument cluster"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"lab_local"},states:{allowed:["idle","experiment_running","sample_prep","analysis","data_collection","cleaning"],forbidden:["reagent_incompatibility","fume_hood_closed_volatile","biosafety_breach"]},odd_description:"Laboratory automation for high-throughput experimentation. System executes experiment protocols with reagent handling, incubation, and measurement. Safety interlocks for volatile chemicals and biological materials.",safety:{violation_action:"block",fail_closed:!0,chemical_compatibility:!0,biosafety_interlock:!0,emergency_stop:!0}}},educational_tutoring_ai:{label:"Educational Tutoring AI",domain:"education_research",template:{numeric:[{name:"max_session_duration",min:0,max:120,unit:"min",tolerance:5},{name:"max_daily_sessions_per_student",min:0,max:5,unit:"sessions",tolerance:0},{name:"min_age_requirement",min:5,max:null,unit:"years",tolerance:0}],geo:{type:"logical",description:"Approved curriculum content and grade levels  content filtered by age appropriateness"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"student_local"},states:{allowed:["idle","tutoring","assessing","reviewing","reporting_to_teacher"],forbidden:["off_curriculum_content","personal_data_collection_unauthorized","session_exceeded"]},odd_description:"AI tutoring system for K-12 students within approved curriculum. System provides personalized instruction, practice, and assessment. Content restricted to grade-appropriate material. Teacher oversight and progress reporting. COPPA/FERPA compliant.",safety:{violation_action:"block",fail_closed:!0,age_appropriate_content:!0,coppa_compliant:!0,teacher_oversight:!0}}},contract_review_ai:{label:"Contract Review AI",domain:"legal_compliance",template:{numeric:[{name:"max_documents_per_day",min:0,max:1e3,unit:"documents",tolerance:50},{name:"max_auto_approve_value",min:0,max:0,unit:"USD",tolerance:0},{name:"min_extraction_confidence",min:.9,max:null,unit:"score",tolerance:.02}],geo:{type:"logical",description:"Connected document management system  approved contract types and clause libraries"},time:{operating_hours:"00:00-23:59",operating_days:[1,2,3,4,5],timezone:"firm_local"},states:{allowed:["idle","reviewing","extracting","flagging","summarizing","reporting"],forbidden:["auto_approval","legal_advice_given","privileged_content_exposed"]},odd_description:"AI-assisted contract review for clause extraction, risk flagging, and comparison against standard terms. System highlights deviations and risks for attorney review. Cannot approve contracts or provide legal advice. Attorney-client privilege protected.",safety:{violation_action:"block",fail_closed:!0,attorney_review_required:!0,privilege_protection:!0}}},regulatory_compliance_monitor:{label:"Regulatory Compliance Monitor AI",domain:"legal_compliance",template:{numeric:[{name:"max_rules_monitored",min:0,max:5e4,unit:"rules",tolerance:500},{name:"update_frequency",min:0,max:24,unit:"hr",tolerance:1},{name:"max_false_alert_rate",min:0,max:5,unit:"%",tolerance:1}],geo:{type:"logical",description:"Connected regulatory databases and internal policy systems  approved jurisdictions and regulatory bodies"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"institution_local"},states:{allowed:["monitoring","analyzing","alerting","reporting","updating_rules"],forbidden:["compliance_certification_issued","regulation_interpretation_given","alert_suppressed"]},odd_description:"Regulatory change monitoring and compliance gap analysis. System tracks regulatory updates across jurisdictions and flags potential impacts to compliance team. Cannot certify compliance or interpret regulations  compliance officer review required.",safety:{violation_action:"warn",fail_closed:!0,compliance_officer_review:!0,audit_trail:!0}}},hiring_screening_ai:{label:"Hiring / HR Screening AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.25,unit:"ratio",tolerance:.05},{name:"confidence_threshold",min:.7,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.2,max:null,unit:"ratio",tolerance:.05},{name:"false_negative_rate",min:0,max:.15,unit:"rate",tolerance:.02},{name:"consecutive_autonomous_max",min:0,max:50,unit:"decisions",tolerance:5},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"explainability_score_min",min:.6,max:null,unit:"score",tolerance:.05},{name:"decision_rate",min:0,max:200,unit:"decisions/hr",tolerance:20}],geo:{type:"logical",description:"Approved job categories and jurisdictions  applicable labor law regions only"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4],timezone:"ops_local"},states:{allowed:["screening","scoring","shortlisting","human_review","archived"],forbidden:["auto_reject_protected_class","bias_threshold_exceeded","unexplainable_decision"]},odd_description:"Resume screening and candidate scoring system. System provides ranked shortlists for human recruiter review. Cannot autonomously reject candidates  all rejections require human confirmation. EEOC/OFCCP compliant. Disparate impact monitored continuously.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,audit_trail:!0}}},sentencing_recommendation_ai:{label:"Sentencing / Parole Recommendation AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.1,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"false_positive_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"false_negative_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"explainability_score_min",min:.8,max:null,unit:"score",tolerance:.03},{name:"model_drift_threshold",min:0,max:.05,unit:"delta",tolerance:.01},{name:"data_staleness_max",min:0,max:3600,unit:"sec",tolerance:300}],geo:{type:"logical",description:"Authorized court jurisdictions  applicable sentencing guidelines and statutory frameworks"},time:{operating_hours:"07:00-19:00",operating_days:[0,1,2,3,4],timezone:"court_local"},states:{allowed:["assessment","scoring","report_generation","judicial_review","sealed"],forbidden:["auto_sentence","bias_detected","unexplainable_recommendation","stale_data"]},odd_description:"Risk assessment and sentencing recommendation advisory system. ALL recommendations require judicial review  system has ZERO autonomous sentencing authority. Continuous bias auditing with demographic parity monitoring. Court-approved validation required annually.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,judicial_override:!0,audit_trail:!0}}},child_welfare_ai:{label:"Child Welfare Risk Scoring AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.15,unit:"ratio",tolerance:.03},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"false_negative_rate",min:0,max:.03,unit:"rate",tolerance:.005},{name:"consecutive_autonomous_max",min:0,max:0,unit:"decisions",tolerance:0},{name:"escalation_timeout_sec",min:0,max:3600,unit:"sec",tolerance:300},{name:"explainability_score_min",min:.75,max:null,unit:"score",tolerance:.05},{name:"data_staleness_max",min:0,max:7200,unit:"sec",tolerance:600}],geo:{type:"logical",description:"County/state child protective services jurisdiction  applicable mandated reporting laws"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"agency_local"},states:{allowed:["intake_screening","risk_scoring","caseworker_review","supervisor_review","closed"],forbidden:["auto_close_high_risk","auto_removal_recommendation","caseworker_bypass"]},odd_description:"Child safety risk scoring for intake screening. System flags cases for caseworker assessment  ZERO autonomous case closure or removal decisions. Every scored case reviewed by human caseworker. Continuous bias monitoring across demographics.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,supervisor_escalation:!0,audit_trail:!0}}},benefits_eligibility_ai:{label:"Benefits / Disability Eligibility AI",domain:"government",template:{numeric:[{name:"bias_disparity_ratio",min:0,max:1.2,unit:"ratio",tolerance:.03},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.3,max:null,unit:"ratio",tolerance:.05},{name:"false_negative_rate",min:0,max:.05,unit:"rate",tolerance:.01},{name:"decision_rate",min:0,max:500,unit:"decisions/hr",tolerance:50},{name:"escalation_timeout_sec",min:0,max:7200,unit:"sec",tolerance:600},{name:"explainability_score_min",min:.7,max:null,unit:"score",tolerance:.05},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600}],geo:{type:"logical",description:"Applicable benefit programs and jurisdictional eligibility rules"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["intake","document_review","scoring","human_review","approved","denied","appeal"],forbidden:["auto_deny_without_review","stale_data_decision","unexplainable_denial"]},odd_description:"Automated eligibility screening for government benefit programs. System pre-screens applications and flags for human adjudicator review. Denials require human confirmation and written explanation. APA/due process compliant.",safety:{violation_action:"block",fail_closed:!0,human_review_required:!0,appeal_path_required:!0,audit_trail:!0}}},clinical_trial_matching_ai:{label:"Clinical Trial Matching AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"false_positive_rate",min:0,max:.1,unit:"rate",tolerance:.02},{name:"false_negative_rate",min:0,max:.08,unit:"rate",tolerance:.02},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"consent_verification_required",min:1,max:1,unit:"bool",tolerance:0},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"model_drift_threshold",min:0,max:.08,unit:"delta",tolerance:.02},{name:"decision_rate",min:0,max:100,unit:"matches/hr",tolerance:10}],geo:{type:"logical",description:"Approved clinical sites and IRB-approved trial protocols  patient catchment areas"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["screening","matching","clinician_review","patient_consent","enrolled","ineligible"],forbidden:["auto_enroll","consent_bypassed","exclusion_criteria_ignored"]},odd_description:"Patient-trial matching system using EHR data and trial protocols. System suggests matches for clinician review  cannot auto-enroll. Patient consent verified independently. HIPAA compliant, IRB-approved protocols only.",safety:{violation_action:"block",fail_closed:!0,clinician_review_required:!0,consent_required:!0,audit_trail:!0}}},surgical_planning_ai:{label:"Surgical Planning / Guidance AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"max_planning_latency",min:0,max:30,unit:"sec",tolerance:5},{name:"positional_accuracy",min:0,max:2,unit:"mm",tolerance:.5},{name:"false_positive_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"false_negative_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"model_drift_threshold",min:0,max:.03,unit:"delta",tolerance:.01},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Approved surgical suites and imaging systems  validated instrument sets only"},time:{operating_hours:"06:00-22:00",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["imaging","planning","surgeon_review","intraop_guidance","post_op_analysis"],forbidden:["autonomous_incision","surgeon_override_bypassed","uncalibrated_guidance","stale_imaging"]},odd_description:"AI-assisted surgical planning and intraoperative guidance. System provides 3D planning, trajectory optimization, and real-time guidance overlays. Surgeon maintains full manual authority at all times. FDA 510(k)/De Novo cleared.",safety:{violation_action:"block",fail_closed:!0,surgeon_authority:!0,calibration_required:!0,audit_trail:!0}}},drug_interaction_ai:{label:"Drug Interaction Checker AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.85,max:null,unit:"score",tolerance:.02},{name:"false_negative_rate",min:0,max:.01,unit:"rate",tolerance:.002},{name:"max_response_latency",min:0,max:2e3,unit:"ms",tolerance:200},{name:"data_staleness_max",min:0,max:86400,unit:"sec",tolerance:3600},{name:"model_drift_threshold",min:0,max:.05,unit:"delta",tolerance:.01},{name:"decision_rate",min:0,max:1e4,unit:"checks/hr",tolerance:1e3},{name:"database_coverage_min",min:.95,max:null,unit:"ratio",tolerance:.01}],geo:{type:"logical",description:"Connected EHR/pharmacy systems  approved drug databases and formularies"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["active","checking","alert_generated","pharmacist_review","overridden_with_reason"],forbidden:["interaction_suppressed","database_stale","unchecked_dispense"]},odd_description:"Real-time drug-drug, drug-allergy, and drug-condition interaction checking integrated with EHR/pharmacy workflow. System blocks dispensing on critical interactions until pharmacist review. Cannot be silently overridden.",safety:{violation_action:"block",fail_closed:!0,pharmacist_review:!0,override_requires_reason:!0,audit_trail:!0}}},mental_health_risk_ai:{label:"Mental Health Risk Assessment AI",domain:"medical",template:{numeric:[{name:"confidence_threshold",min:.75,max:null,unit:"score",tolerance:.03},{name:"false_negative_rate",min:0,max:.02,unit:"rate",tolerance:.005},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"escalation_timeout_sec",min:0,max:900,unit:"sec",tolerance:60},{name:"consecutive_autonomous_max",min:0,max:0,unit:"decisions",tolerance:0},{name:"bias_disparity_ratio",min:0,max:1.2,unit:"ratio",tolerance:.05},{name:"data_staleness_max",min:0,max:3600,unit:"sec",tolerance:300},{name:"explainability_score_min",min:.7,max:null,unit:"score",tolerance:.05}],geo:{type:"logical",description:"Approved clinical settings  licensed provider jurisdictions and telehealth-eligible states"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["screening","risk_scoring","clinician_alert","clinician_review","safety_plan","crisis_escalation"],forbidden:["auto_discharge_high_risk","suppress_self_harm_flag","clinician_bypass","stale_assessment"]},odd_description:"Suicide/self-harm risk screening and mental health acuity scoring. System flags at-risk patients for immediate clinician review  ZERO autonomous clinical decisions. Crisis-level flags trigger immediate escalation with timeout enforcement.",safety:{violation_action:"block",fail_closed:!0,clinician_review_required:!0,crisis_escalation:!0,audit_trail:!0}}},water_treatment_ai:{label:"Water Treatment Control AI",domain:"critical_infra",template:{numeric:[{name:"ph_range",min:6.5,max:8.5,unit:"pH",tolerance:.2},{name:"chlorine_residual",min:.2,max:4,unit:"mg/L",tolerance:.1},{name:"turbidity_max",min:0,max:1,unit:"NTU",tolerance:.1},{name:"flow_rate",min:0,max:5e4,unit:"gal/min",tolerance:500},{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"human_review_ratio",min:.1,max:null,unit:"ratio",tolerance:.02},{name:"decision_rate",min:0,max:60,unit:"adjustments/hr",tolerance:5},{name:"data_staleness_max",min:0,max:60,unit:"sec",tolerance:10}],geo:{type:"polygon",description:"Treatment plant facility boundary  intake, treatment, and distribution control zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"facility_local"},states:{allowed:["normal_operation","adjustment","flushing","backwash","operator_review","maintenance"],forbidden:["chemical_limit_exceeded","sensor_fault_unacknowledged","operator_lockout_bypassed"]},odd_description:"AI-controlled water treatment process optimization. System adjusts chemical dosing, filtration, and flow within EPA-mandated Safe Drinking Water Act parameters. Operator can override at any time. Critical parameter changes require operator confirmation.",safety:{violation_action:"block",fail_closed:!0,operator_override:!0,epa_compliance:!0,audit_trail:!0}}},air_traffic_ai:{label:"Air Traffic Management AI",domain:"critical_infra",template:{numeric:[{name:"min_separation_horizontal",min:3,max:null,unit:"nm",tolerance:.5},{name:"min_separation_vertical",min:1e3,max:null,unit:"ft",tolerance:100},{name:"max_response_latency",min:0,max:500,unit:"ms",tolerance:50},{name:"confidence_threshold",min:.95,max:null,unit:"score",tolerance:.01},{name:"false_negative_rate",min:0,max:.001,unit:"rate",tolerance:5e-4},{name:"human_review_ratio",min:1,max:null,unit:"ratio",tolerance:0},{name:"data_staleness_max",min:0,max:5,unit:"sec",tolerance:1},{name:"decision_rate",min:0,max:300,unit:"advisories/hr",tolerance:30}],geo:{type:"polygon_3d",description:"Assigned airspace sectors  terminal, en-route, and transition zones with altitude blocks"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"UTC"},states:{allowed:["monitoring","advisory","conflict_detection","resolution_advisory","controller_review","emergency"],forbidden:["autonomous_reroute","controller_override_bypassed","radar_contact_lost_unacknowledged"]},odd_description:"AI advisory system for air traffic conflict detection and resolution. System provides separation advisories to human controllers  ZERO autonomous authority over aircraft routing or clearances. FAA NextGen/EUROCONTROL compliant. Controller maintains full authority.",safety:{violation_action:"block",fail_closed:!0,controller_authority:!0,tcas_integration:!0,audit_trail:!0}}},railway_signaling_ai:{label:"Railway Signaling / Train Control AI",domain:"critical_infra",template:{numeric:[{name:"min_headway",min:90,max:null,unit:"sec",tolerance:10},{name:"max_speed",min:0,max:300,unit:"km/h",tolerance:5},{name:"braking_distance_margin",min:50,max:null,unit:"meters",tolerance:10},{name:"max_response_latency",min:0,max:200,unit:"ms",tolerance:20},{name:"confidence_threshold",min:.99,max:null,unit:"score",tolerance:.002},{name:"false_negative_rate",min:0,max:1e-4,unit:"rate",tolerance:5e-5},{name:"data_staleness_max",min:0,max:2,unit:"sec",tolerance:.5},{name:"model_drift_threshold",min:0,max:.01,unit:"delta",tolerance:.002}],geo:{type:"polygon",description:"Track segments, interlocking zones, platform areas, and level crossings under AI control"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"network_local"},states:{allowed:["green","caution","restrictive","stop","emergency_brake","maintenance_mode"],forbidden:["signal_conflict","interlocking_fault_unacknowledged","occupied_block_cleared"]},odd_description:"AI-enhanced positive train control and signaling. System enforces movement authorities, speed restrictions, and safe separation. Fail-safe defaults to most restrictive signal aspect. ERTMS/PTC compliant. Human dispatcher maintains route authority.",safety:{violation_action:"block",fail_closed:!0,fail_safe_restrictive:!0,dispatcher_authority:!0,audit_trail:!0}}},power_grid_ai:{label:"Power Grid Load Balancing AI",domain:"critical_infra",template:{numeric:[{name:"frequency_range",min:59.95,max:60.05,unit:"Hz",tolerance:.01},{name:"voltage_range_pu",min:.95,max:1.05,unit:"p.u.",tolerance:.005},{name:"max_ramp_rate",min:0,max:500,unit:"MW/min",tolerance:50},{name:"reserve_margin_min",min:.15,max:null,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.9,max:null,unit:"score",tolerance:.02},{name:"decision_rate",min:0,max:120,unit:"dispatches/hr",tolerance:10},{name:"data_staleness_max",min:0,max:4,unit:"sec",tolerance:1},{name:"human_review_ratio",min:.05,max:null,unit:"ratio",tolerance:.02}],geo:{type:"logical",description:"Balancing authority area  interconnected generation, transmission, and load zones"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"grid_local"},states:{allowed:["normal","economic_dispatch","contingency","emergency","restoration","islanded"],forbidden:["frequency_out_of_band","cascading_trip","load_shed_unauthorized","blackstart_without_approval"]},odd_description:"AI-optimized economic dispatch and load balancing for electric grid. System optimizes generation scheduling within NERC reliability standards. Emergency load shedding requires operator authorization. NERC CIP compliant.",safety:{violation_action:"block",fail_closed:!0,operator_authority:!0,nerc_compliance:!0,audit_trail:!0}}},robo_advisor_ai:{label:"Robo-Advisor / Wealth Management AI",domain:"financial",template:{numeric:[{name:"max_single_trade_pct",min:0,max:5,unit:"%_portfolio",tolerance:.5},{name:"max_daily_rebalance_pct",min:0,max:15,unit:"%_portfolio",tolerance:2},{name:"concentration_limit",min:0,max:25,unit:"%_single_asset",tolerance:2},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"human_review_ratio",min:.05,max:null,unit:"ratio",tolerance:.02},{name:"model_drift_threshold",min:0,max:.1,unit:"delta",tolerance:.02},{name:"decision_rate",min:0,max:1e3,unit:"trades/hr",tolerance:100},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Approved exchanges, asset classes, and jurisdictions  SEC/FINRA registered instruments only"},time:{operating_hours:"04:00-20:00",operating_days:[0,1,2,3,4],timezone:"America/New_York"},states:{allowed:["monitoring","rebalancing","tax_loss_harvesting","client_review","compliance_check"],forbidden:["concentration_exceeded","suitability_mismatch","unauthorized_asset_class"]},odd_description:"Automated portfolio management and rebalancing. System executes within client-approved investment policy statements. Trades exceeding thresholds require advisor review. SEC/FINRA/DOL fiduciary compliant.",safety:{violation_action:"block",fail_closed:!0,advisor_review_threshold:!0,suitability_check:!0,audit_trail:!0}}},property_valuation_ai:{label:"Automated Property Valuation (AVM)",domain:"financial",template:{numeric:[{name:"confidence_threshold",min:.75,max:null,unit:"score",tolerance:.03},{name:"max_valuation_variance",min:0,max:15,unit:"%",tolerance:2},{name:"bias_disparity_ratio",min:0,max:1.15,unit:"ratio",tolerance:.03},{name:"data_staleness_max",min:0,max:604800,unit:"sec",tolerance:86400},{name:"model_drift_threshold",min:0,max:.08,unit:"delta",tolerance:.02},{name:"human_review_ratio",min:.15,max:null,unit:"ratio",tolerance:.03},{name:"decision_rate",min:0,max:5e3,unit:"valuations/hr",tolerance:500},{name:"false_positive_rate",min:0,max:.1,unit:"rate",tolerance:.02}],geo:{type:"logical",description:"Approved MSAs and property types  residential, commercial, agricultural classifications"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["data_collection","valuation","confidence_check","appraiser_review","final"],forbidden:["low_confidence_auto_approve","stale_comps_used","redlining_pattern_detected"]},odd_description:"Automated property valuation for mortgage origination, refinancing, and portfolio assessment. High-variance or low-confidence valuations routed to licensed appraiser. ECOA/Fair Housing Act compliant with continuous bias monitoring.",safety:{violation_action:"block",fail_closed:!0,appraiser_escalation:!0,fair_lending_compliance:!0,audit_trail:!0}}},dynamic_pricing_ai:{label:"Dynamic Pricing AI (Regulated)",domain:"financial",template:{numeric:[{name:"max_price_multiplier",min:1,max:3,unit:"x_base",tolerance:.1},{name:"max_price_change_rate",min:0,max:10,unit:"%/hr",tolerance:1},{name:"min_price_floor",min:.01,max:null,unit:"currency",tolerance:0},{name:"bias_disparity_ratio",min:0,max:1.1,unit:"ratio",tolerance:.02},{name:"confidence_threshold",min:.8,max:null,unit:"score",tolerance:.03},{name:"decision_rate",min:0,max:1e4,unit:"price_updates/hr",tolerance:1e3},{name:"human_review_ratio",min:.01,max:null,unit:"ratio",tolerance:.005},{name:"data_staleness_max",min:0,max:300,unit:"sec",tolerance:30}],geo:{type:"logical",description:"Service regions with applicable price gouging statutes and regulatory caps"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:["normal_pricing","surge","promotional","regulatory_cap","manual_override","emergency_freeze"],forbidden:["price_ceiling_exceeded","discriminatory_pricing_detected","emergency_gouging"]},odd_description:"Real-time dynamic pricing within regulatory price caps and anti-gouging statutes. System enforces price ceilings during declared emergencies. Discriminatory pricing patterns trigger automatic freeze and human review.",safety:{violation_action:"block",fail_closed:!0,price_ceiling_enforcement:!0,emergency_freeze:!0,audit_trail:!0}}},custom_system:{label:"Custom / Other System",domain:"other",template:{numeric:[],geo:{type:"custom",description:"Define your operational boundary  geographic, logical, or physical workspace"},time:{operating_hours:"00:00-23:59",operating_days:[0,1,2,3,4,5,6],timezone:"ops_local"},states:{allowed:[],forbidden:[]},odd_description:"",safety:{violation_action:"block",fail_closed:!0,emergency_stop:!0}}}};Object.keys(Ue).length;function hs(){const{user:t}=de(),n=Oe(),[a,o]=u.useState(1),i=6,[r,s]=u.useState(""),[l,c]=u.useState({organization_name:"",contact_name:"",contact_email:"",contact_phone:""}),[d,p]=u.useState({system_name:"",system_type:"",system_version:"",manufacturer:"",system_description:"",deployment_type:"",environment:"",integration_method:"python",expected_volume:"",compliance_requirements:""}),[f,v]=u.useState({odd_description:"",facility_location:"",preferred_test_date:"",temp_min:"",temp_max:"",temp_unit:"F",weather_constraints:"",surface_type:"",notes:""}),[k,m]=u.useState([{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}]),[w,g]=u.useState({open:!1,type:""}),[A,C]=u.useState(""),[h,x]=u.useState([{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]),[y,T]=u.useState([{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}]),[R,U]=u.useState([{name:"",parameter:"",allowed_values:"",forbidden_values:""}]),[I,P]=u.useState({violation_action:"stop",connection_loss_action:"stop",fail_closed:!0,emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_email:"",existing_safety_systems:"",escalation_triggers:""}),[z,D]=u.useState(!1);u.useEffect(()=>{t&&c(S=>({...S,contact_name:S.contact_name||t.full_name||"",contact_email:S.contact_email||t.email||"",organization_name:S.organization_name||t.organization_name||""}))},[t]);const M=S=>{var X,ie;const q=Ue[S];if(!q||!q.template)return;const W=q.template;if(W.numeric&&W.numeric.length>0?m(W.numeric.map(ae=>({name:ae.name.replace(/_/g," ").replace(/\b\w/g,Se=>Se.toUpperCase()),parameter:ae.name,min_value:ae.min!=null?String(ae.min):"",max_value:ae.max!=null?String(ae.max):"",hard_limit:ae.max!=null?String(ae.max):"",unit:ae.unit||"",tolerance:ae.tolerance!=null?String(ae.tolerance):""}))):m([{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}]),W.geo?x([{name:"Primary Operating Zone",boundary_type:W.geo.type==="polygon"||W.geo.type==="polygon_3d"?"polygon":"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]):x([{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}]),W.time){const[ae,Se]=(W.time.operating_hours||"0-23").split("-").map(gt=>String(parseInt(gt))),et=W.time.timezone||"America/Chicago";T([{name:"Operating Hours",start_hour:ae,end_hour:Se,timezone:{facility_local:"America/Chicago",ops_local:"America/Chicago",farm_local:"America/Chicago",delivery_zone_local:"America/Chicago",campus_local:"America/Chicago",city_local:"America/Chicago",community_local:"America/Chicago",site_local:"America/Chicago",hospital_local:"America/Chicago",lab_local:"America/Chicago",mine_local:"America/Chicago",port_local:"America/Chicago",airport_local:"America/Chicago",transit_local:"America/Chicago",incident_local:"America/Chicago",exchange_local:"America/New_York",institution_local:"America/New_York",utility_local:"America/Chicago",grid_local:"America/Chicago",plant_local:"America/Chicago",fab_local:"America/Chicago",restaurant_local:"America/Chicago",store_local:"America/Chicago",hotel_local:"America/Chicago",network_local:"UTC",theater_local:"UTC",patient_local:"America/Chicago",student_local:"America/Chicago",firm_local:"America/New_York",mission_local:"UTC"}[et]||et,days:W.time.operating_days||[0,1,2,3,4,5,6]}])}else T([{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}]);W.states&&((X=W.states.allowed)!=null&&X.length||(ie=W.states.forbidden)!=null&&ie.length)?U([{name:"Operational States",parameter:"mode",allowed_values:(W.states.allowed||[]).join(", "),forbidden_values:(W.states.forbidden||[]).join(", ")}]):U([{name:"",parameter:"",allowed_values:"",forbidden_values:""}]),W.odd_description&&v(ae=>({...ae,odd_description:W.odd_description}));const K={ground_robots:"indoor",aerial:"outdoor",vehicles:"outdoor",marine:"outdoor",medical:"indoor",financial:"virtual",energy:"hybrid",manufacturing:"indoor",defense:"hybrid",agriculture:"outdoor",space_extreme:"outdoor",telecom_digital:"virtual",construction:"outdoor",logistics:"indoor",retail_hospitality:"indoor",education_research:"indoor",legal_compliance:"virtual",other:""},O={ground_robots:"warehouse",aerial:"airspace",vehicles:"road",marine:"other",medical:"clinical",financial:"data_center",energy:"other",manufacturing:"manufacturing",defense:"other",agriculture:"agriculture",space_extreme:"other",telecom_digital:"data_center",construction:"construction",logistics:"warehouse",retail_hospitality:"other",education_research:"other",legal_compliance:"other",other:""};if(p(ae=>({...ae,deployment_type:K[q.domain]||ae.deployment_type,environment:O[q.domain]||ae.environment})),W.safety){const ae={block:"stop",warn:"alert",stop:"stop"};P(Se=>({...Se,violation_action:ae[W.safety.violation_action]||W.safety.violation_action||Se.violation_action,fail_closed:W.safety.fail_closed!==!1}))}},b={background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",fontFamily:"'Inter', sans-serif"},N=S=>e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:"#a896d6",marginBottom:"16px"},children:S}),_=S=>e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"rgba(255,255,255,.78)",fontSize:"14px"},children:S}),B=S=>e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",marginTop:"4px",lineHeight:"1.4"},children:S}),F=(S,q,W)=>q([...S,{...W}]),V=(S,q,W)=>{S.length>1&&q(S.filter((K,O)=>O!==W))},j=(S,q,W,K,O)=>{const X=[...S];X[W]={...X[W],[K]:O},q(X)},$=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],G=()=>{const S=k.filter(O=>O.name&&O.parameter).map(O=>({name:O.name,parameter:O.parameter,min_value:O.min_value?parseFloat(O.min_value):null,max_value:O.max_value?parseFloat(O.max_value):null,hard_limit:O.hard_limit?parseFloat(O.hard_limit):null,unit:O.unit||null,tolerance:O.tolerance?parseFloat(O.tolerance):0})),q=h.filter(O=>O.name&&O.lat&&O.lon).map(O=>({name:O.name,boundary_type:O.boundary_type,center:{lat:parseFloat(O.lat),lon:parseFloat(O.lon)},radius_meters:O.radius_meters?parseFloat(O.radius_meters):1e3,altitude_min:O.altitude_min?parseFloat(O.altitude_min):null,altitude_max:O.altitude_max?parseFloat(O.altitude_max):null})),W=y.filter(O=>O.name).map(O=>({name:O.name,allowed_hours_start:parseInt(O.start_hour),allowed_hours_end:parseInt(O.end_hour),allowed_days:O.days,timezone:O.timezone})),K=R.filter(O=>O.name&&O.parameter).map(O=>({name:O.name,parameter:O.parameter,allowed_values:O.allowed_values?O.allowed_values.split(",").map(X=>X.trim()).filter(Boolean):[],forbidden_values:O.forbidden_values?O.forbidden_values.split(",").map(X=>X.trim()).filter(Boolean):[]}));return{numeric_boundaries:S,geo_boundaries:q,time_boundaries:W,state_boundaries:K,rate_boundaries:[],safe_state:{action:I.violation_action,connection_loss:I.connection_loss_action,notify:!0,emergency_contact:{name:I.emergency_contact_name,phone:I.emergency_contact_phone,email:I.emergency_contact_email}},fail_closed:I.fail_closed}},Q=async()=>{var S,q;try{const W=G(),K={organization_name:l.organization_name,contact_name:l.contact_name,contact_email:l.contact_email,contact_phone:l.contact_phone,system_name:d.system_name,system_type:d.system_type,custom_system_type:A||null,system_version:d.system_version,manufacturer:d.manufacturer,system_description:d.system_description,odd_specification:{description:f.odd_description,deployment_type:d.deployment_type,environment:d.environment,facility_location:f.facility_location,operating_temp:f.temp_min&&f.temp_max?{min:parseFloat(f.temp_min),max:parseFloat(f.temp_max),unit:f.temp_unit}:null,weather_constraints:f.weather_constraints||null,surface_type:f.surface_type||null,integration_method:d.integration_method,expected_volume:d.expected_volume,compliance_requirements:d.compliance_requirements},envelope_definition:W,facility_location:f.facility_location,preferred_test_date:f.preferred_test_date||null,notes:f.notes};await L.post("/api/applications/",K),n("/applications")}catch(W){s(((q=(S=W.response)==null?void 0:S.data)==null?void 0:q.detail)||"Failed to submit application"),o(1)}},ne=(S,q)=>{S==="numeric"&&m(W=>[...W.filter(K=>K.name),...q.map(K=>({name:K.name||"",parameter:K.parameter||"",min_value:K.min_value||"",max_value:K.max_value||"",hard_limit:K.hard_limit||"",unit:K.unit||"",tolerance:K.tolerance||""}))]),S==="geo"&&x(W=>[...W.filter(K=>K.name),...q.map(K=>({name:K.name||"",boundary_type:K.boundary_type||"circle",lat:K.lat||"",lon:K.lon||"",radius_meters:K.radius_meters||"",altitude_min:K.altitude_min||"",altitude_max:K.altitude_max||""}))]),S==="time"&&T(W=>[...W.filter(K=>K.name),...q.map(K=>({name:K.name||"",start_hour:K.start_hour||"6",end_hour:K.end_hour||"22",timezone:K.timezone||"America/Chicago",days:Array.isArray(K.days)?K.days:[0,1,2,3,4,5,6]}))]),S==="state"&&U(W=>[...W.filter(K=>K.name),...q.map(K=>({name:K.name||"",parameter:K.parameter||"",allowed_values:K.allowed_values||"",forbidden_values:K.forbidden_values||""}))])},H=()=>a===1?l.organization_name&&l.contact_email:a===2?d.system_name&&d.system_type:a===3?f.odd_description:!0,J=["Organization","System","Operating Domain","Boundaries","Safety & Failure","Review"];return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs(oe,{to:"/applications",className:"flex items-center gap-2 mb-4 no-underline",style:{color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(ca,{className:"w-4 h-4"}),"Back to Applications"]}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"New Submission"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"ODDC Application"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:"Submit your autonomous system for conformance determination"})]}),e.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:J.map((S,q)=>e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{height:"3px",background:q+1<=a?"#a896d6":"rgba(255,255,255,0.08)",transition:"background 0.3s",marginBottom:"6px"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"8px",letterSpacing:"1px",textTransform:"uppercase",color:q+1<=a?"#a896d6":"rgba(255,255,255,.50)"},children:S})]},q))}),e.jsxs(Z,{children:[r&&e.jsx("div",{className:"mb-4 p-3",style:{background:"transparent",border:"1px solid rgba(255,255,255,0.07)",color:"#D65C5C"},children:r}),z&&e.jsxs("div",{style:{textAlign:"center",padding:"clamp(24px, 5vw, 60px) clamp(12px, 3vw, 20px)"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"transparent",border:"2px solid rgba(92,214,133,0.4)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",fontSize:"clamp(20px, 4vw, 28px)"},children:""}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,margin:"0 0 12px",color:"rgba(255,255,255,.94)"},children:"Application Submitted"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"14px",lineHeight:"1.6",maxWidth:"480px",margin:"0 auto 8px"},children:"Your application is now in the queue. Our team will review your ODD specification and boundary definitions."}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",marginBottom:"32px"},children:"You'll receive email updates as your application progresses through the certification pipeline."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx(oe,{to:"/applications",className:"no-underline px-6 py-3 btn",children:"View Applications"}),e.jsx(oe,{to:"/dashboard",className:"no-underline px-6 py-3 btn",children:"Dashboard"})]})]}),!z&&e.jsxs(e.Fragment,{children:[a===1&&e.jsxs("div",{className:"space-y-4",children:[N("Organization Information"),e.jsxs("div",{children:[_("Organization Name *"),e.jsx("input",{type:"text",value:l.organization_name,onChange:S=>c({...l,organization_name:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]}),e.jsxs("div",{children:[_("Contact Name"),e.jsx("input",{type:"text",value:l.contact_name,onChange:S=>c({...l,contact_name:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[_("Contact Email *"),e.jsx("input",{type:"email",value:l.contact_email,onChange:S=>c({...l,contact_email:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]}),e.jsxs("div",{children:[_("Contact Phone"),e.jsx("input",{type:"tel",value:l.contact_phone,onChange:S=>c({...l,contact_phone:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-4",children:[N("System Information"),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[_("System Name *"),e.jsx("input",{type:"text",value:d.system_name,onChange:S=>p({...d,system_name:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]}),e.jsxs("div",{children:[_("System Type *"),e.jsxs("select",{value:d.system_type,onChange:S=>{p({...d,system_type:S.target.value}),M(S.target.value)},className:"w-full px-4 py-3 outline-none",style:b,children:[e.jsxs("option",{value:"",children:["Select system type (",Object.keys(Ue).length," available)..."]}),fs.map(S=>{const q=Object.entries(Ue).filter(([,W])=>W.domain===S.key);return q.length?e.jsx("optgroup",{label:S.label,children:q.map(([W,K])=>e.jsx("option",{value:W,children:K.label},W))},S.key):null})]})]})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[_("System Version"),e.jsx("input",{type:"text",value:d.system_version,onChange:S=>p({...d,system_version:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,placeholder:"e.g., 1.0.0"})]}),e.jsxs("div",{children:[_("Manufacturer"),e.jsx("input",{type:"text",value:d.manufacturer,onChange:S=>p({...d,manufacturer:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]})]}),e.jsxs("div",{children:[_("System Description *"),e.jsx("textarea",{value:d.system_description,onChange:S=>p({...d,system_description:S.target.value}),rows:3,className:"w-full px-4 py-3 outline-none resize-none",style:b})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[_("Deployment Type"),e.jsxs("select",{value:d.deployment_type,onChange:S=>p({...d,deployment_type:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"indoor",children:"Indoor"}),e.jsx("option",{value:"outdoor",children:"Outdoor"}),e.jsx("option",{value:"hybrid",children:"Indoor + Outdoor"}),e.jsx("option",{value:"virtual",children:"Virtual / Cloud"})]})]}),e.jsxs("div",{children:[_("Environment"),e.jsxs("select",{value:d.environment,onChange:S=>p({...d,environment:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"warehouse",children:"Warehouse / Logistics"}),e.jsx("option",{value:"manufacturing",children:"Manufacturing Floor"}),e.jsx("option",{value:"road",children:"Public Road"}),e.jsx("option",{value:"airspace",children:"Airspace"}),e.jsx("option",{value:"clinical",children:"Clinical / Hospital"}),e.jsx("option",{value:"data_center",children:"Data Center"}),e.jsx("option",{value:"agriculture",children:"Agriculture / Field"}),e.jsx("option",{value:"construction",children:"Construction Site"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[_("Agent Deployment Method"),e.jsxs("select",{value:d.integration_method,onChange:S=>p({...d,integration_method:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,children:[e.jsx("option",{value:"python",children:"Python Package"}),e.jsx("option",{value:"docker",children:"Docker Container"}),e.jsx("option",{value:"kubernetes",children:"Kubernetes"})]})]}),e.jsxs("div",{children:[_("Expected Actions / Day"),e.jsxs("select",{value:d.expected_volume,onChange:S=>p({...d,expected_volume:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"low",children:"Low (< 1,000)"}),e.jsx("option",{value:"medium",children:"Medium (1K  10K)"}),e.jsx("option",{value:"high",children:"High (10K  100K)"}),e.jsx("option",{value:"very_high",children:"Very High (100K+)"})]})]})]}),e.jsxs("div",{children:[d.system_type&&d.system_type.includes("custom")&&e.jsxs("div",{style:{marginTop:"-8px"},children:[_("Describe Your System Type *"),e.jsx("input",{type:"text",value:A,onChange:S=>C(S.target.value),className:"w-full px-4 py-3 outline-none",style:b,placeholder:"e.g., Underwater pipeline inspection ROV, Agricultural pollination drone swarm"}),B("Since your system doesn't fit a standard category, please describe it so we can configure appropriate boundaries.")]}),_("Compliance Requirements"),e.jsx("input",{type:"text",value:d.compliance_requirements,onChange:S=>p({...d,compliance_requirements:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,placeholder:"e.g., ISO 26262, FDA 510(k), FAA Part 107, SOC 2"}),B("List any regulatory or compliance frameworks your system must adhere to.")]})]}),a===3&&e.jsxs("div",{className:"space-y-4",children:[N("Operational Design Domain"),e.jsxs("div",{children:[_("ODD Description *"),e.jsx("textarea",{value:f.odd_description,onChange:S=>v({...f,odd_description:S.target.value}),rows:5,className:"w-full px-4 py-3 outline-none resize-none",style:b,placeholder:"Describe the operating domain in plain language: where, how, and under what conditions the system operates."}),B("This is the human-readable description of your system's intended operating domain. Specific numeric limits will be defined in the next step.")]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[_("Facility / Deployment Location"),e.jsx("input",{type:"text",value:f.facility_location,onChange:S=>v({...f,facility_location:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,placeholder:"Address or region"})]}),e.jsxs("div",{children:[_("Preferred Test Start Date"),e.jsx("input",{type:"date",value:f.preferred_test_date,onChange:S=>v({...f,preferred_test_date:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]})]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px",marginTop:"8px"},children:N("Environmental Conditions")}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))"},children:[e.jsxs("div",{children:[_("Temp Min"),e.jsx("input",{type:"number",value:f.temp_min,onChange:S=>v({...f,temp_min:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,placeholder:"e.g., 32"})]}),e.jsxs("div",{children:[_("Temp Max"),e.jsx("input",{type:"number",value:f.temp_max,onChange:S=>v({...f,temp_max:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,placeholder:"e.g., 110"})]}),e.jsxs("div",{children:[_("Unit"),e.jsxs("select",{value:f.temp_unit,onChange:S=>v({...f,temp_unit:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,children:[e.jsx("option",{value:"F",children:"F"}),e.jsx("option",{value:"C",children:"C"})]})]})]}),e.jsxs("div",{children:[_("Surface / Terrain Type"),e.jsx("input",{type:"text",value:f.surface_type,onChange:S=>v({...f,surface_type:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,placeholder:"e.g., flat concrete, paved road, gravel"})]}),e.jsxs("div",{children:[_("Weather Constraints"),e.jsx("input",{type:"text",value:f.weather_constraints,onChange:S=>v({...f,weather_constraints:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,placeholder:"e.g., no operation in rain/snow, wind < 25 mph"})]}),e.jsxs("div",{children:[_("Additional Notes"),e.jsx("textarea",{value:f.notes,onChange:S=>v({...f,notes:S.target.value}),rows:2,className:"w-full px-4 py-3 outline-none resize-none",style:b,placeholder:"Anything else relevant to the operating domain"})]})]}),a===4&&e.jsxs("div",{className:"space-y-6",children:[d.system_type&&Ue[d.system_type]&&e.jsxs("div",{style:{padding:"12px 16px",background:d.system_type.includes("custom")?"rgba(139,92,246,0.1)":"rgba(92,214,133,0.1)",border:"1px solid "+(d.system_type.includes("custom")?"rgba(139,92,246,0.2)":"rgba(92,214,133,0.2)"),display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:d.system_type.includes("custom")?e.jsxs(e.Fragment,{children:[e.jsx(We,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:16,style:{color:"#a896d6"}}),e.jsxs("span",{style:{color:"#a896d6",fontSize:"13px"},children:["Custom system  define all boundaries manually or use Bulk Import",A?` (${A})`:""]})]}):e.jsxs(e.Fragment,{children:[e.jsx(pn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:16,style:{color:"#5CD685"}}),e.jsxs("span",{style:{color:"#5CD685",fontSize:"13px"},children:["Loaded recommended boundaries for ",Ue[d.system_type].label]})]})}),!d.system_type.includes("custom")&&e.jsx("button",{onClick:()=>M(d.system_type),className:"btn",children:"Reload Defaults"})]}),e.jsxs("div",{children:[N("Numeric Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>g({open:!0,type:"numeric"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),B("Define measurable limits: speed, temperature, altitude, weight, pressure, distance, etc."),k.map((S,q)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:S.name,onChange:W=>j(k,m,q,"name",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Name (e.g., Speed Limit)"}),e.jsx("input",{type:"text",value:S.parameter,onChange:W=>j(k,m,q,"parameter",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Parameter (e.g., speed)"})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsx("input",{type:"number",value:S.min_value,onChange:W=>j(k,m,q,"min_value",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Min"}),e.jsx("input",{type:"number",value:S.max_value,onChange:W=>j(k,m,q,"max_value",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Max"}),e.jsx("input",{type:"number",value:S.hard_limit,onChange:W=>j(k,m,q,"hard_limit",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Hard limit"}),e.jsx("input",{type:"text",value:S.unit,onChange:W=>j(k,m,q,"unit",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Unit"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:S.tolerance,onChange:W=>j(k,m,q,"tolerance",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px",flex:1},placeholder:"Tol"}),k.length>1&&e.jsx("button",{onClick:()=>V(k,m,q),style:{background:"transparent",border:"none",color:"#D65C5C",cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},q)),e.jsx("button",{onClick:()=>F(k,m,{name:"",parameter:"",min_value:"",max_value:"",hard_limit:"",unit:"",tolerance:""}),style:{marginTop:"8px",background:"transparent",border:"1px dashed rgba(255,255,255,.07)",padding:"8px 16px",color:"#a896d6",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Numeric Boundary"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:[N("Geographic Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>g({open:!0,type:"geo"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),B("Define the physical operating zone. Enter center coordinates and radius."),h.map((S,q)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:S.name,onChange:W=>j(h,x,q,"name",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Name (e.g., Operating Zone)"}),e.jsxs("select",{value:S.boundary_type,onChange:W=>j(h,x,q,"boundary_type",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},children:[e.jsx("option",{value:"circle",children:"Radius from Point"}),e.jsx("option",{value:"polygon",children:"Polygon (contact us)"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"number",step:"any",value:S.lat,onChange:W=>j(h,x,q,"lat",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Latitude"}),e.jsx("input",{type:"number",step:"any",value:S.lon,onChange:W=>j(h,x,q,"lon",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Longitude"}),e.jsx("input",{type:"number",value:S.radius_meters,onChange:W=>j(h,x,q,"radius_meters",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Radius (m)"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"number",value:S.altitude_max,onChange:W=>j(h,x,q,"altitude_max",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px",flex:1},placeholder:"Alt max (m)"}),h.length>1&&e.jsx("button",{onClick:()=>V(h,x,q),style:{background:"transparent",border:"none",color:"#D65C5C",cursor:"pointer",padding:"0 8px",fontSize:"14px"},children:""})]})]})]},q)),e.jsx("button",{onClick:()=>F(h,x,{name:"",boundary_type:"circle",lat:"",lon:"",radius_meters:"",altitude_min:"",altitude_max:""}),style:{marginTop:"8px",background:"transparent",border:"1px dashed rgba(255,255,255,.07)",padding:"8px 16px",color:"#a896d6",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Geographic Boundary"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:[N("Time Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>g({open:!0,type:"time"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),B("Define allowed operating hours and days."),y.map((S,q)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:S.name,onChange:W=>j(y,T,q,"name",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Name"}),e.jsx("input",{type:"number",min:"0",max:"23",value:S.start_hour,onChange:W=>j(y,T,q,"start_hour",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Start hour"}),e.jsx("input",{type:"number",min:"0",max:"23",value:S.end_hour,onChange:W=>j(y,T,q,"end_hour",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"End hour"}),e.jsxs("select",{value:S.timezone,onChange:W=>j(y,T,q,"timezone",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},children:[e.jsx("option",{value:"America/New_York",children:"Eastern"}),e.jsx("option",{value:"America/Chicago",children:"Central"}),e.jsx("option",{value:"America/Denver",children:"Mountain"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Europe/London",children:"UK"}),e.jsx("option",{value:"Europe/Berlin",children:"CET"}),e.jsx("option",{value:"Asia/Tokyo",children:"JST"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",marginRight:"4px"},children:"Days:"}),$.map((W,K)=>e.jsx("button",{onClick:()=>{const O=S.days.includes(K)?S.days.filter(X=>X!==K):[...S.days,K].sort();j(y,T,q,"days",O)},className:"btn",style:{padding:"2px 6px",fontSize:"10px",minWidth:"28px",justifyContent:"center",color:S.days.includes(K)?"var(--purple-bright)":"var(--text-tertiary)",borderColor:S.days.includes(K)?"rgba(157,140,207,.3)":"rgba(255,255,255,.04)"},children:W},K)),y.length>1&&e.jsx("button",{onClick:()=>V(y,T,q),style:{marginLeft:"auto",background:"transparent",border:"none",color:"#D65C5C",cursor:"pointer",padding:"2px 8px",fontSize:"14px"},children:""})]})]},q)),e.jsx("button",{onClick:()=>F(y,T,{name:"",start_hour:"6",end_hour:"22",timezone:"America/Chicago",days:[0,1,2,3,4,5,6]}),style:{marginTop:"8px",background:"transparent",border:"1px dashed rgba(255,255,255,.07)",padding:"8px 16px",color:"#a896d6",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add Time Boundary"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:[N("State Boundaries"),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:e.jsx("button",{onClick:()=>g({open:!0,type:"state"}),style:{background:"transparent",border:"1px solid rgba(139,92,246,0.3)",padding:"4px 12px",color:"#8b5cf6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:" Bulk Import"})}),B("Define allowed/forbidden operational states and modes."),R.map((S,q)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"12px",marginTop:"8px"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",style:{marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:S.name,onChange:W=>j(R,U,q,"name",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Name (e.g., Mode Check)"}),e.jsx("input",{type:"text",value:S.parameter,onChange:W=>j(R,U,q,"parameter",W.target.value),className:"px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Parameter (e.g., mode)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:S.allowed_values,onChange:W=>j(R,U,q,"allowed_values",W.target.value),className:"w-full px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Allowed (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:"rgba(255,255,255,.50)"},children:"e.g., autonomous, semi-autonomous"})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("input",{type:"text",value:S.forbidden_values,onChange:W=>j(R,U,q,"forbidden_values",W.target.value),className:"w-full px-3 py-2 outline-none",style:{...b,fontSize:"13px"},placeholder:"Forbidden (comma-sep)"}),e.jsx("span",{style:{fontSize:"9px",color:"rgba(255,255,255,.50)"},children:"e.g., manual_override, degraded"})]}),R.length>1&&e.jsx("button",{onClick:()=>V(R,U,q),style:{background:"transparent",border:"none",color:"#D65C5C",cursor:"pointer",padding:"0 8px",fontSize:"14px",alignSelf:"flex-start"},children:""})]})]})]},q)),e.jsx("button",{onClick:()=>F(R,U,{name:"",parameter:"",allowed_values:"",forbidden_values:""}),style:{marginTop:"8px",background:"transparent",border:"1px dashed rgba(255,255,255,.07)",padding:"8px 16px",color:"#a896d6",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",width:"100%"},children:"+ Add State Boundary"})]}),e.jsx(gs,{isOpen:w.open,onClose:()=>g({open:!1,type:""}),onImport:S=>ne(w.type,S),boundaryType:w.type})]}),a===5&&e.jsxs("div",{className:"space-y-4",children:[N("Safety & Failure Mode"),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[e.jsxs("div",{children:[_("On Boundary Violation *"),e.jsxs("select",{value:I.violation_action,onChange:S=>P({...I,violation_action:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,children:[e.jsx("option",{value:"stop",children:"Full Stop"}),e.jsx("option",{value:"slow",children:"Slow / Degrade"}),e.jsx("option",{value:"alert",children:"Alert Only (log + notify)"}),e.jsx("option",{value:"revert",children:"Revert to Last Safe State"}),e.jsx("option",{value:"handoff",children:"Hand Off to Human Operator"})]})]}),e.jsxs("div",{children:[_("On Connection Loss *"),e.jsxs("select",{value:I.connection_loss_action,onChange:S=>P({...I,connection_loss_action:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b,children:[e.jsx("option",{value:"stop",children:"Full Stop"}),e.jsx("option",{value:"continue",children:"Continue (local enforcement)"}),e.jsx("option",{value:"degrade",children:"Degrade to Reduced Capability"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>P({...I,fail_closed:!I.fail_closed}),className:"btn",style:{padding:"6px 14px",color:I.fail_closed?"var(--accent-green)":"var(--text-tertiary)",borderColor:I.fail_closed?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:I.fail_closed?"ON":"OFF"}),e.jsx("span",{style:{color:"rgba(255,255,255,.78)",fontSize:"14px"},children:"Fail-Closed Mode (recommended)"})]}),B("When enabled, the agent blocks ALL actions if it cannot verify boundaries.")]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:N("Emergency Contact")}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))"},children:[e.jsxs("div",{children:[_("Name"),e.jsx("input",{type:"text",value:I.emergency_contact_name,onChange:S=>P({...I,emergency_contact_name:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]}),e.jsxs("div",{children:[_("Phone"),e.jsx("input",{type:"tel",value:I.emergency_contact_phone,onChange:S=>P({...I,emergency_contact_phone:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]}),e.jsxs("div",{children:[_("Email"),e.jsx("input",{type:"email",value:I.emergency_contact_email,onChange:S=>P({...I,emergency_contact_email:S.target.value}),className:"w-full px-4 py-3 outline-none",style:b})]})]}),e.jsxs("div",{children:[_("Escalation Triggers"),e.jsx("textarea",{value:I.escalation_triggers,onChange:S=>P({...I,escalation_triggers:S.target.value}),rows:2,className:"w-full px-4 py-3 outline-none resize-none",style:b,placeholder:"Conditions requiring immediate human takeover (e.g., sensor failure, repeated violations)"})]}),e.jsxs("div",{children:[_("Existing Safety Systems"),e.jsx("textarea",{value:I.existing_safety_systems,onChange:S=>P({...I,existing_safety_systems:S.target.value}),rows:2,className:"w-full px-4 py-3 outline-none resize-none",style:b,placeholder:"Other safety mechanisms in place (e.g., physical e-stop, LIDAR, safety PLC)"})]})]}),a===6&&e.jsxs("div",{className:"space-y-4",children:[N("Review Application"),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"13px",lineHeight:"1.5"},children:"Review your application. After submission, our team will review your boundary definitions and configure the ENVELO agent for your system."}),e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Organization"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px"},children:l.organization_name})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Contact"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px"},children:l.contact_name||l.contact_email})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"System"}),e.jsx("br",{}),e.jsxs("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px"},children:[d.system_name," (",d.system_type,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Deployment"}),e.jsx("br",{}),e.jsxs("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px"},children:[d.deployment_type||"Not specified","  ",d.environment||"Not specified"]})]})]})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"16px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:"#a896d6"},children:"Boundary Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#a896d6"},children:k.filter(S=>S.name).length}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:"Numeric"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#a896d6"},children:h.filter(S=>S.name).length}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:"Geographic"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#a896d6"},children:y.filter(S=>S.name).length}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:"Time"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"rgba(91,75,138,0.1)"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#a896d6"},children:R.filter(S=>S.name).length}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:"State"})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)",padding:"16px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:"#a896d6"},children:"Safety Configuration"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"On Violation"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"13px"},children:I.violation_action})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"On Connection Loss"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"13px"},children:I.connection_loss_action})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Fail-Closed"}),e.jsx("br",{}),e.jsx("span",{style:{color:I.fail_closed?"#5CD685":"#D65C5C",fontSize:"13px"},children:I.fail_closed?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px"},children:"Agent Method"}),e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)",fontSize:"13px"},children:d.integration_method})]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginTop:"24px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,.07)"},children:[a>1?e.jsx("button",{onClick:()=>o(a-1),className:"btn",children:"Back"}):e.jsx("div",{}),a<i?e.jsx("button",{onClick:()=>H()&&o(a+1),disabled:!H(),className:"btn",children:"Continue"}):e.jsx("button",{onClick:Q,className:"btn",children:"Submit Application"})]})]})]})]})}const ee={bgPrimary:"#0d0d1a",bgSecondary:"#1a1a2e",bgTertiary:"#252540",textPrimary:"#e8e8f0",textSecondary:"#a0a0b0",textTertiary:"#6a6a80",purpleBright:"#8b5cf6",greenBright:"#10b981",redBright:"#ef4444",border:"#2a2a45"},Ae=({children:t,style:n={}})=>e.jsx("div",{style:{background:`linear-gradient(135deg, ${ee.bgSecondary} 0%, ${ee.bgTertiary} 100%)`,border:`1px solid ${ee.border}`,padding:"24px",...n},children:t}),_e=({children:t,onClick:n,variant:a="primary",disabled:o=!1,style:i={}})=>e.jsx("button",{onClick:n,disabled:o,style:{padding:"10px 20px",border:"none",cursor:o?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase",transition:"all 0.2s",opacity:o?.5:1,...a==="primary"?{background:ee.purpleBright,color:"rgba(255,255,255,.94)"}:a==="danger"?{background:ee.redBright,color:"rgba(255,255,255,.94)"}:{background:"transparent",border:`1px solid ${ee.border}`,color:ee.textSecondary},...i},children:t}),ce=({label:t,value:n,onChange:a,type:o="text",placeholder:i="",style:r={}})=>e.jsxs("div",{style:{marginBottom:"12px",...r},children:[t&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,marginBottom:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:t}),e.jsx("input",{type:o,value:n,onChange:s=>a(o==="number"?parseFloat(s.target.value)||0:s.target.value),placeholder:i,style:{width:"100%",padding:"10px 12px",background:ee.bgPrimary,border:`1px solid ${ee.border}`,color:ee.textPrimary,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"}})]}),Ct=({label:t,value:n,onChange:a,options:o,style:i={}})=>e.jsxs("div",{style:{marginBottom:"12px",...i},children:[t&&e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,marginBottom:"6px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:t}),e.jsx("select",{value:n,onChange:r=>a(r.target.value),style:{width:"100%",padding:"10px 12px",background:ee.bgPrimary,border:`1px solid ${ee.border}`,color:ee.textPrimary,fontSize:"14px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:o.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),ys=({boundary:t,onChange:n,onRemove:a})=>e.jsxs(Ae,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:ee.purpleBright,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"NUMERIC BOUNDARY"}),e.jsx(_e,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(ce,{label:"Name",value:t.name||"",onChange:o=>n({...t,name:o}),placeholder:"e.g., Speed Limit"}),e.jsx(ce,{label:"Parameter",value:t.parameter||"",onChange:o=>n({...t,parameter:o}),placeholder:"e.g., speed"}),e.jsx(ce,{label:"Min Value",type:"number",value:t.min_value??"",onChange:o=>n({...t,min_value:o||null}),placeholder:"Optional"}),e.jsx(ce,{label:"Max Value",type:"number",value:t.max_value??"",onChange:o=>n({...t,max_value:o||null}),placeholder:"Required"}),e.jsx(ce,{label:"Unit",value:t.unit||"",onChange:o=>n({...t,unit:o}),placeholder:"e.g., km/h, C"}),e.jsx(ce,{label:"Tolerance",type:"number",value:t.tolerance||0,onChange:o=>n({...t,tolerance:o}),placeholder:"0"})]}),e.jsx(Ct,{label:"On Violation",value:t.violation_action||"block",onChange:o=>n({...t,violation_action:o}),options:[{value:"block",label:"Block Action"},{value:"warn",label:"Warn Only"},{value:"log",label:"Log Only"}],style:{marginTop:"12px",marginBottom:0}})]}),_s=({boundary:t,onChange:n,onRemove:a})=>{var o,i;return e.jsxs(Ae,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:ee.greenBright,fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"GEOGRAPHIC BOUNDARY"}),e.jsx(_e,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(ce,{label:"Name",value:t.name||"",onChange:r=>n({...t,name:r}),placeholder:"e.g., Warehouse Zone"}),e.jsx(Ct,{label:"Boundary Type",value:t.boundary_type||"circle",onChange:r=>n({...t,boundary_type:r}),options:[{value:"circle",label:"Circle (Center + Radius)"},{value:"polygon",label:"Polygon (Multiple Points)"}]}),t.boundary_type==="circle"||!t.boundary_type?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[e.jsx(ce,{label:"Center Latitude",type:"number",value:((o=t.center)==null?void 0:o.lat)??"",onChange:r=>n({...t,center:{...t.center,lat:r}}),placeholder:"30.2672"}),e.jsx(ce,{label:"Center Longitude",type:"number",value:((i=t.center)==null?void 0:i.lon)??"",onChange:r=>n({...t,center:{...t.center,lon:r}}),placeholder:"-97.7431"}),e.jsx(ce,{label:"Radius (meters)",type:"number",value:t.radius_meters||"",onChange:r=>n({...t,radius_meters:r}),placeholder:"1000"})]}):e.jsx("div",{style:{color:ee.textSecondary,fontSize:"12px",padding:"12px",background:ee.bgPrimary},children:"Polygon editor coming soon. For now, enter coordinates as JSON in the raw editor below."})]})},bs=({boundary:t,onChange:n,onRemove:a})=>e.jsxs(Ae,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#f59e0b",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"TIME BOUNDARY"}),e.jsx(_e,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsx(ce,{label:"Name",value:t.name||"",onChange:o=>n({...t,name:o}),placeholder:"e.g., Operating Hours"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(ce,{label:"Start Hour (0-23)",type:"number",value:t.allowed_hours_start??0,onChange:o=>n({...t,allowed_hours_start:Math.min(23,Math.max(0,o))})}),e.jsx(ce,{label:"End Hour (0-23)",type:"number",value:t.allowed_hours_end??23,onChange:o=>n({...t,allowed_hours_end:Math.min(23,Math.max(0,o))})})]}),e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,marginBottom:"8px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Allowed Days"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((o,i)=>{const r=t.allowed_days||[0,1,2,3,4,5,6],s=r.includes(i);return e.jsx("button",{onClick:()=>{const l=s?r.filter(c=>c!==i):[...r,i].sort();n({...t,allowed_days:l})},style:{padding:"6px 12px",border:`1px solid ${s?ee.purpleBright:ee.border}`,background:s?ee.purpleBright:"transparent",color:s?"white":ee.textSecondary,cursor:"pointer",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:o},o)})})]})]}),vs=({boundary:t,onChange:n,onRemove:a})=>e.jsxs(Ae,{style:{marginBottom:"12px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{color:"#ec4899",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"STATE BOUNDARY"}),e.jsx(_e,{variant:"danger",onClick:a,style:{padding:"4px 12px",fontSize:"10px"},children:"Remove"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(ce,{label:"Name",value:t.name||"",onChange:o=>n({...t,name:o}),placeholder:"e.g., Operation Mode"}),e.jsx(ce,{label:"Parameter",value:t.parameter||"",onChange:o=>n({...t,parameter:o}),placeholder:"e.g., mode"})]}),e.jsx(ce,{label:"Allowed Values (comma-separated)",value:(t.allowed_values||[]).join(", "),onChange:o=>n({...t,allowed_values:o.split(",").map(i=>i.trim()).filter(Boolean)}),placeholder:"e.g., idle, moving, charging"}),e.jsx(ce,{label:"Forbidden Values (comma-separated)",value:(t.forbidden_values||[]).join(", "),onChange:o=>n({...t,forbidden_values:o.split(",").map(i=>i.trim()).filter(Boolean)}),placeholder:"e.g., emergency, override",style:{marginBottom:0}})]});function ws({applicationId:t,initialBoundaries:n,onSave:a,api:o}){var C;const[i,r]=u.useState({numeric_boundaries:[],geo_boundaries:[],time_boundaries:[],state_boundaries:[],safe_state:{action:"stop",notify:!0,log:!0},fail_closed:!0,telemetry_interval:1,heartbeat_interval:60}),[s,l]=u.useState(!1),[c,d]=u.useState(!1),[p,f]=u.useState("");u.useEffect(()=>{n&&typeof n=="object"&&r(h=>({...h,...n}))},[n]),u.useEffect(()=>{f(JSON.stringify(i,null,2))},[i]);const v=h=>{const x=`${h}_boundaries`,y={numeric:{type:"numeric",name:"",parameter:"",max_value:null,unit:"",tolerance:0,violation_action:"block"},geo:{type:"geo",name:"",boundary_type:"circle",center:{lat:0,lon:0},radius_meters:1e3,violation_action:"block"},time:{type:"time",name:"",allowed_hours_start:6,allowed_hours_end:22,allowed_days:[0,1,2,3,4],violation_action:"block"},state:{type:"state",name:"",parameter:"",allowed_values:[],forbidden_values:[],violation_action:"block"}};r(T=>({...T,[x]:[...T[x],y[h]]}))},k=(h,x,y)=>{const T=`${h}_boundaries`;r(R=>({...R,[T]:R[T].map((U,I)=>I===x?y:U)}))},m=(h,x)=>{const y=`${h}_boundaries`;r(T=>({...T,[y]:T[y].filter((R,U)=>U!==x)}))},w=async()=>{l(!0);try{await a(i)}finally{l(!1)}},g=()=>{try{const h=JSON.parse(p);r(h),d(!1)}catch(h){alert("Invalid JSON: "+h.message)}},A=i.numeric_boundaries.length+i.geo_boundaries.length+i.time_boundaries.length+i.state_boundaries.length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:ee.purpleBright,margin:0},children:"Boundary Configuration"}),e.jsxs("p",{style:{color:ee.textSecondary,margin:"8px 0 0",fontSize:"14px"},children:[A," boundaries defined"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(_e,{variant:"secondary",onClick:()=>d(!c),children:c?"Visual Editor":"Raw JSON"}),e.jsx(_e,{onClick:w,disabled:s,children:s?"Saving...":"Save Boundaries"})]})]}),c?e.jsxs(Ae,{children:[e.jsx("textarea",{value:p,onChange:h=>f(h.target.value),style:{width:"100%",minHeight:"400px",padding:"16px",background:ee.bgPrimary,border:`1px solid ${ee.border}`,color:ee.textPrimary,fontSize:"13px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",resize:"vertical"}}),e.jsx(_e,{onClick:g,style:{marginTop:"12px"},children:"Apply JSON"})]}):e.jsxs("div",{children:[e.jsxs(Ae,{style:{marginBottom:"24px"},children:[e.jsx("p",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,margin:"0 0 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Add Boundary"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx(_e,{variant:"secondary",onClick:()=>v("numeric"),children:"+ Numeric (Speed, Temp, etc.)"}),e.jsx(_e,{variant:"secondary",onClick:()=>v("geo"),children:"+ Geographic (Geofence)"}),e.jsx(_e,{variant:"secondary",onClick:()=>v("time"),children:"+ Time (Operating Hours)"}),e.jsx(_e,{variant:"secondary",onClick:()=>v("state"),children:"+ State (Allowed Modes)"})]})]}),i.numeric_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:ee.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Numeric Boundaries (",i.numeric_boundaries.length,")"]}),i.numeric_boundaries.map((h,x)=>e.jsx(ys,{boundary:h,onChange:y=>k("numeric",x,y),onRemove:()=>m("numeric",x)},x))]}),i.geo_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:ee.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Geographic Boundaries (",i.geo_boundaries.length,")"]}),i.geo_boundaries.map((h,x)=>e.jsx(_s,{boundary:h,onChange:y=>k("geo",x,y),onRemove:()=>m("geo",x)},x))]}),i.time_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:ee.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["Time Boundaries (",i.time_boundaries.length,")"]}),i.time_boundaries.map((h,x)=>e.jsx(bs,{boundary:h,onChange:y=>k("time",x,y),onRemove:()=>m("time",x)},x))]}),i.state_boundaries.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{color:ee.textPrimary,fontSize:"14px",marginBottom:"12px"},children:["State Boundaries (",i.state_boundaries.length,")"]}),i.state_boundaries.map((h,x)=>e.jsx(vs,{boundary:h,onChange:y=>k("state",x,y),onRemove:()=>m("state",x)},x))]}),e.jsxs(Ae,{children:[e.jsx("h3",{style:{fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",color:ee.textTertiary,margin:"0 0 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"Enforcement Settings"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsx(Ct,{label:"On Violation",value:((C=i.safe_state)==null?void 0:C.action)||"stop",onChange:h=>r(x=>({...x,safe_state:{...x.safe_state,action:h}})),options:[{value:"stop",label:"Stop System"},{value:"reduce",label:"Reduce Operation"},{value:"handoff",label:"Human Handoff"}]}),e.jsx(Ct,{label:"Fail Mode",value:i.fail_closed?"closed":"open",onChange:h=>r(x=>({...x,fail_closed:h==="closed"})),options:[{value:"closed",label:"Fail Closed (Block)"},{value:"open",label:"Fail Open (Allow)"}]}),e.jsx(ce,{label:"Telemetry Interval (sec)",type:"number",value:i.telemetry_interval||1,onChange:h=>r(x=>({...x,telemetry_interval:h}))})]})]}),A===0&&e.jsxs(Ae,{style:{textAlign:"center",padding:"48px"},children:[e.jsx("p",{style:{color:ee.textSecondary,fontSize:"16px",margin:0},children:"No boundaries defined yet."}),e.jsx("p",{style:{color:ee.textTertiary,fontSize:"14px",marginTop:"8px"},children:"Add boundaries above to define the system's Operational Design Domain."})]})]})]})}function js(){var ne;const{id:t}=no(),n=ve(),{user:a}=de(),o=ke(),[i,r]=u.useState(null),[s,l]=u.useState(!1),[c,d]=u.useState(null),[p,f]=u.useState([]),[v,k]=u.useState([]),[m,w]=u.useState(""),[g,A]=u.useState(!1),[C,h]=u.useState(!1),[x,y]=u.useState(null),[T,R]=u.useState(!1),U=async(H,J)=>{R(!0);try{const S=await L.get(`/api/applications/${t}/email-preview?new_state=${H}`);y({...S.data,label:J,newState:H})}catch{n.show("Preview failed","error")}R(!1)},I=async()=>{var H,J;if(x)try{await L.patch(`/api/applications/${t}/state?new_state=${x.newState}`),y(null),await b(),n.show(`State changed to ${x.newState}`,"success")}catch(S){n.show("Failed: "+(((J=(H=S.response)==null?void 0:H.data)==null?void 0:J.detail)||S.message),"error")}};u.useEffect(()=>{t&&(L.get(`/api/applications/${t}`).then(H=>r(H.data)).catch(console.error),L.get(`/api/applications/${t}/history`).then(H=>f(H.data)).catch(console.error),L.get(`/api/applications/${t}/comments`).then(H=>k(H.data)).catch(console.error))},[t]);const P=async()=>{var H,J;if(await o({title:"Schedule Test",message:"Schedule a CAT-72 test for this application? The test will need to be started manually."})){l(!0);try{const S=await L.post("/api/cat72/tests",{application_id:parseInt(t)});d(S.data),n.show(`CAT-72 Test created: ${S.data.test_id}  Go to CAT-72 Console to start.`,"success")}catch(S){n.show("Failed to create test: "+(((J=(H=S.response)==null?void 0:H.data)==null?void 0:J.detail)||S.message),"error")}l(!1)}},z=Oe(),D=async()=>{var H,J;if(await o({title:"Delete Application",message:"Are you sure? This cannot be undone.",danger:!0,confirmLabel:"Delete"}))try{await L.delete(`/api/applications/${t}`),n.show("Application deleted","success"),z("/applications")}catch(S){n.show("Failed to delete: "+(((J=(H=S.response)==null?void 0:H.data)==null?void 0:J.detail)||S.message),"error")}},M=()=>U("approved","Approve Application"),b=async()=>{try{const H=await L.get(`/api/applications/${t}`);r(H.data),L.get(`/api/applications/${t}/history`).then(J=>f(J.data)).catch(console.error)}catch(H){console.error("Failed to refresh:",H)}},N=async()=>{var H,J;if(m.trim()){h(!0);try{const S=await L.post(`/api/applications/${t}/comments`,{content:m,is_internal:g});k(q=>[S.data,...q]),w(""),A(!1),n.show("Comment added","success")}catch(S){n.show("Failed to post comment: "+(((J=(H=S.response)==null?void 0:H.data)==null?void 0:J.detail)||S.message),"error")}h(!1)}},_=async H=>{var J,S;try{await L.delete(`/api/applications/${t}/comments/${H}`),k(q=>q.filter(W=>W.id!==H)),n.show("Comment deleted","success")}catch(q){n.show("Failed to delete comment: "+(((S=(J=q.response)==null?void 0:J.data)==null?void 0:S.detail)||q.message),"error")}},B=()=>U("under_review","Begin Review"),F=()=>U("suspended","Suspend Application"),V=async()=>{var H,J;if(await o({title:"Reinstate",message:"Reinstate this application to pending? The applicant will need to go through review again."}))try{await L.patch(`/api/applications/${t}/state?new_state=pending`),await b()}catch(S){n.show("Failed to reinstate: "+(((J=(H=S.response)==null?void 0:H.data)==null?void 0:J.detail)||S.message),"error")}},j=[{key:"pending",label:"Submitted",icon:"1"},{key:"under_review",label:"Under Review",icon:"2"},{key:"approved",label:"Approved",icon:"3"},{key:"testing",label:"CAT-72 Testing",icon:"4"},{key:"conformant",label:"Conformant",icon:""}],$=j.findIndex(H=>H.key===(i==null?void 0:i.state)),G=(i==null?void 0:i.state)==="revoked"||(i==null?void 0:i.state)==="suspended",Q=()=>{switch(i==null?void 0:i.state){case"pending":return"Your application is queued for review by the Sentinel Authority team.";case"under_review":return"Our team is evaluating your ODD specification and boundary definitions.";case"approved":return"Your system is approved. The ENVELO agent is being configured for CAT-72 testing.";case"testing":return"CAT-72 continuous conformance test is in progress (72-hour minimum).";case"conformant":return"Your system has achieved ODDC Conformance. Your certificate and ENVELO agent credentials are active.";case"revoked":return"This application has been suspended. Contact info@sentinelauthority.org for remediation steps.";default:return""}};return i?e.jsxs("div",{className:"space-y-6",children:[x&&e.jsx("div",{className:"sa-modal-overlay",style:{position:"fixed",inset:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",maxWidth:"min(650px, 95vw)",width:"95%",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:"#a896d6"},children:"Email Preview"}),e.jsxs("p",{style:{margin:"4px 0 0",fontSize:"12px",color:"rgba(255,255,255,.50)"},children:["This email will be sent to ",e.jsx("strong",{style:{color:"rgba(255,255,255,.94)"},children:x.to})]})]}),e.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",color:"rgba(255,255,255,.50)",cursor:"pointer",fontSize:"20px",padding:"4px 8px"},children:"X"})]}),e.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid rgba(255,255,255,.07)",background:"transparent"},children:[e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Subject"}),e.jsx("div",{style:{fontSize:"14px",color:"rgba(255,255,255,.94)",fontWeight:500},children:x.subject})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px 24px"},children:e.jsx("div",{style:{background:"#fff",overflow:"hidden"},dangerouslySetInnerHTML:{__html:x.html}})}),e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[e.jsx("button",{onClick:()=>y(null),style:{padding:"8px 20px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.78)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:I,style:{padding:"8px 20px",background:x.newState==="suspended"?"rgba(214,92,92,0.2)":"#5B4B8A",border:"1px solid "+(x.newState==="suspended"?"rgba(214,92,92,0.4)":"#a896d6"),color:x.newState==="suspended"?"#D65C5C":"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:[x.label," + Send Email"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(oe,{to:"/applications",className:"flex items-center gap-2 no-underline",style:{color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase"},children:[e.jsx(ca,{className:"w-4 h-4"}),"Back to Applications"]}),(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.state==="pending"&&e.jsx("button",{onClick:B,className:"px-4 py-2 transition-all btn",children:"Begin Review"}),(i.state==="pending"||i.state==="under_review")&&e.jsx("button",{onClick:M,className:"px-4 py-2 transition-all btn",children:"Approve Application"}),i.state==="approved"&&e.jsx("button",{onClick:P,disabled:s,className:"px-4 py-2 transition-all btn",children:s?"Scheduling...":"Schedule CAT-72 Test"}),["pending","under_review","approved","testing","conformant"].includes(i.state)&&e.jsx("button",{onClick:F,className:"px-4 py-2 transition-all btn",children:"Suspend"}),(i.state==="suspended"||i.state==="revoked")&&e.jsx("button",{onClick:V,className:"px-4 py-2 transition-all btn",children:"Reinstate"}),i.state==="expired"&&e.jsx("button",{onClick:V,className:"px-4 py-2 transition-all btn",children:"Re-open"}),e.jsx("button",{onClick:D,className:"px-4 py-2 transition-all btn",children:"Delete"})]})]}),e.jsx(Z,{children:e.jsxs("div",{style:{padding:"8px 0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginBottom:"20px"},children:j.map((H,J)=>{const S=H.key===i.state,q=$>J;return e.jsxs(xe.Fragment,{children:[J>0&&e.jsx("div",{style:{flex:1,height:"2px",background:q?"#5CD685":"rgba(255,255,255,.07)",margin:"0 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minWidth:"80px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:"bold",background:q?"rgba(92,214,133,0.2)":S?"rgba(157,140,207,0.25)":"rgba(255,255,255,0.03)",border:`2px solid ${q?"#5CD685":S?"#a896d6":"rgba(255,255,255,.07)"}`,color:q?"#5CD685":S?"#a896d6":"rgba(255,255,255,.50)"},children:q?"":H.icon}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"0.5px",textTransform:"uppercase",color:S?"#a896d6":q?"#5CD685":"rgba(255,255,255,.50)",textAlign:"center"},children:H.label})]})]},H.key)})}),G&&e.jsx("div",{style:{padding:"12px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.07)",marginBottom:"12px"},children:e.jsx("span",{style:{color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:" SUSPENDED  This application has been suspended pending review."})}),e.jsx("div",{style:{padding:"12px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)"},children:e.jsx("span",{style:{color:"rgba(255,255,255,.78)",fontSize:"13px",lineHeight:"1.5"},children:Q()})})]})}),c&&e.jsx("div",{className:"p-4",style:{background:"transparent",border:"1px solid rgba(255,255,255,0.07)"},children:e.jsxs("p",{style:{color:"#5CD685",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:["Test Created: ",c.test_id,"  ",e.jsx(oe,{to:"/cat72",style:{color:"#a896d6"},children:"Go to CAT-72 Console"})]})}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:["Application ",i.application_number]}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:i.system_name}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:i.system_description})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Organization"}),e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontSize:"18px",marginBottom:"8px"},children:i.organization_name}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"4px"},children:[e.jsx("strong",{children:"Contact:"})," ",i.contact_name]}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"4px"},children:[e.jsx("strong",{children:"Email:"})," ",i.contact_email]}),i.contact_phone&&e.jsxs("p",{style:{color:"rgba(255,255,255,.78)"},children:[e.jsx("strong",{children:"Phone:"})," ",i.contact_phone]})]}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Status"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"px-3 py-1",style:{background:i.state==="conformant"?"rgba(92,214,133,0.04)":i.state==="revoked"?"rgba(214,92,92,0.04)":"rgba(214,160,92,0.04)",color:i.state==="conformant"?"#5CD685":i.state==="revoked"?"#D65C5C":"#D6A05C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",letterSpacing:"1px",textTransform:"uppercase"},children:i.state}),(a==null?void 0:a.role)==="admin"&&e.jsxs("select",{value:i.state,onChange:async H=>{var S,q;const J=H.target.value;if(await o({title:"Change Status",message:`Change status to ${J.toUpperCase()}?`}))try{if(await L.patch(`/api/applications/${t}/state?new_state=${J}`),J==="approved")try{await L.post("/api/apikeys/admin/provision",null,{params:{application_id:t,send_email:!0}})}catch(W){console.error("Auto-provision:",W.message)}r({...i,state:J})}catch(W){n.show("Failed to update state: "+(((q=(S=W.response)==null?void 0:S.data)==null?void 0:q.detail)||W.message),"error")}},className:"px-3 py-2",style:{background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved (Agent Access)"}),e.jsx("option",{value:"testing",children:"Testing (CAT-72 Active)"}),e.jsx("option",{value:"conformant",children:"Conformant"}),e.jsx("option",{value:"revoked",children:"Revoked"})]})]}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)"},children:[e.jsx("strong",{children:"Submitted:"})," ",i.submitted_at?new Date(i.submitted_at).toLocaleString():"N/A"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"System Details"}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:[e.jsx("strong",{children:"Version:"})," ",i.system_version||"N/A"]}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:[e.jsx("strong",{children:"Manufacturer:"})," ",i.manufacturer||"N/A"]}),i.facility_location&&e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:[e.jsx("strong",{children:"Facility:"})," ",i.facility_location]}),i.preferred_test_date&&e.jsxs("p",{style:{color:"rgba(255,255,255,.78)"},children:[e.jsx("strong",{children:"Preferred Test Date:"})," ",new Date(i.preferred_test_date).toLocaleDateString()]})]}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Safety Boundaries & Operational Limits"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:typeof i.envelope_definition=="object"?JSON.stringify(i.envelope_definition,null,2):i.envelope_definition||"Not specified"})]})]}),(a==null?void 0:a.role)==="admin"&&e.jsx(ws,{applicationId:i.id,initialBoundaries:i.envelope_definition||{},onSave:async H=>{try{await L.patch(`/api/applicants/${i.id}`,{envelope_definition:H}),n.show("Boundaries saved","success"),r({...i,envelope_definition:H})}catch(J){n.show("Failed to save: "+J.message,"error")}}}),p.length>0&&e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"State Change History"}),e.jsxs("div",{style:{position:"relative",paddingLeft:"28px"},children:[e.jsx("div",{style:{position:"absolute",left:"8px",top:"4px",bottom:"4px",width:"2px",background:"rgba(255,255,255,.07)"}}),p.map((H,J)=>{var X,ie,ae,Se,et;const q={submitted:"#a896d6",state_changed:(()=>{var gt;const Re=(gt=H.details)==null?void 0:gt.new_state;return Re==="conformant"?"#5CD685":Re==="suspended"||Re==="revoked"?"#D65C5C":Re==="approved"?"#5CD685":Re==="under_review"||Re==="testing"?"#a896d6":"#D6A05C"})(),certificate_issued:"#5CD685"}[H.action]||"rgba(255,255,255,.50)",W=((ie=(X=H.details)==null?void 0:X.new_state)==null?void 0:ie.replace("_"," "))||((ae=H.action)==null?void 0:ae.replace("_"," ")),K=(et=(Se=H.details)==null?void 0:Se.old_state)==null?void 0:et.replace("_"," "),O=H.timestamp?new Date(H.timestamp):null;return e.jsxs("div",{style:{position:"relative",paddingBottom:J<p.length-1?"20px":"0",marginBottom:(J<p.length-1,"0")},children:[e.jsx("div",{style:{position:"absolute",left:"-24px",top:"2px",width:"12px",height:"12px",borderRadius:"50%",background:`${q}08`,border:`2px solid ${q}`}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:500,color:q,textTransform:"uppercase",letterSpacing:"0.5px"},children:W}),K&&H.action!=="submitted"&&e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginLeft:"8px"},children:["from ",K]}),e.jsx("div",{style:{marginTop:"4px"},children:e.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,.50)"},children:H.user_email})})]}),e.jsx("div",{style:{textAlign:"right",flexShrink:0},children:O&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:O.toLocaleDateString()}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:O.toLocaleTimeString()})]})})]})]},J)})]})]}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"ODD Specification"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:typeof i.odd_specification=="object"?((ne=i.odd_specification)==null?void 0:ne.description)||JSON.stringify(i.odd_specification,null,2):i.odd_specification})]}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Comments & Notes"}),e.jsxs("div",{style:{marginBottom:v.length>0?"20px":"0"},children:[e.jsx("textarea",{value:m,onChange:H=>w(H.target.value),rows:3,placeholder:"Add a comment or note...",className:"w-full px-4 py-3 outline-none resize-none",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",fontSize:"13px",fontFamily:"inherit",transition:"border-color 0.2s"},onFocus:H=>H.target.style.borderColor="#a896d6",onBlur:H=>H.target.style.borderColor="rgba(255,255,255,.07)"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginTop:"8px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(a==null?void 0:a.role)==="admin"&&e.jsxs("button",{onClick:()=>A(!g),className:"btn",style:{padding:"4px 10px",color:g?"var(--accent-green)":"var(--text-tertiary)",borderColor:g?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Internal ",g?"ON":"OFF"]})}),e.jsx("button",{onClick:N,disabled:C||!m.trim(),className:"px-4 py-2 btn",children:C?"Posting...":"Post Comment"})]})]}),v.length>0&&e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,.07)",paddingTop:"16px"},children:v.map(H=>e.jsxs("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:H.user_role==="admin"?"#a896d6":"rgba(255,255,255,.78)",fontWeight:500},children:H.user_email}),H.user_role==="admin"&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",padding:"2px 6px",background:"transparent",color:"#a896d6",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Admin"}),H.is_internal&&e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",padding:"2px 6px",background:"transparent",color:"#D6A05C",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Internal"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:H.created_at?new Date(H.created_at).toLocaleString():""}),((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.email)===H.user_email)&&e.jsx("button",{onClick:()=>_(H.id),style:{background:"none",border:"none",color:"rgba(255,255,255,.50)",cursor:"pointer",fontSize:"12px",padding:"0",opacity:.5},title:"Delete comment",children:""})]})]}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"13px",lineHeight:1.6,margin:0,whiteSpace:"pre-wrap"},children:H.content})]},H.id))}),v.length===0&&!m&&e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",fontStyle:"italic",margin:0},children:"No comments yet"})]}),i.notes&&e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Applicant Notes"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:i.notes})]})]}):e.jsx("div",{style:{color:"rgba(255,255,255,.50)"},children:"Loading..."})}function Ss(){const t=ke(),{user:n}=de(),[a,o]=u.useState([]),[i,r]=u.useState([]),[s,l]=u.useState(!1),c=ve(),[d,p]=u.useState({}),[f,v]=u.useState(Date.now()),k=()=>{L.get("/api/cat72/tests").then(y=>o(y.data)).catch(console.error),L.get("/api/envelo/monitoring/overview").then(y=>{const T=(y.data.sessions||[]).filter(R=>R.session_type==="cat72_test");r(T)}).catch(console.error)};u.useEffect(()=>{k();const y=setInterval(k,6e4),T=setInterval(()=>v(Date.now()),1e3);return()=>{clearInterval(y),clearInterval(T)}},[]);const m=async y=>{var T,R;if(await t({title:"Start Test",message:"Start this CAT-72 test? The 72-hour timer will begin."})){p(U=>({...U,[y]:"starting"}));try{await L.post(`/api/cat72/tests/${y}/start`),k()}catch(U){c.show("Failed to start test: "+(((R=(T=U.response)==null?void 0:T.data)==null?void 0:R.detail)||U.message),"error")}p(U=>({...U,[y]:null}))}},w=async y=>{var T,R;if(await t({title:"Stop Test",message:"Stop this CAT-72 test and evaluate results?"})){p(U=>({...U,[y]:"stopping"}));try{await L.post(`/api/cat72/tests/${y}/stop`),k()}catch(U){c.show("Failed to stop test: "+(((R=(T=U.response)==null?void 0:T.data)==null?void 0:R.detail)||U.message),"error")}p(U=>({...U,[y]:null}))}},g=async y=>{var T,R;if(await t({title:"Issue Certificate",message:"Issue ODDC certificate for this passed test?"})){p(U=>({...U,[y]:"issuing"}));try{const U=await L.post(`/api/certificates/issue/${y}`);c.show(`Certificate issued: ${U.data.certificate_number}`,"success"),k()}catch(U){c.show("Failed to issue certificate: "+(((R=(T=U.response)==null?void 0:T.data)==null?void 0:R.detail)||U.message),"error")}p(U=>({...U,[y]:null}))}},A=y=>{const T=Math.floor(y/3600),R=Math.floor(y%3600/60),U=Math.floor(y%60);return`${String(T).padStart(2,"0")}:${String(R).padStart(2,"0")}:${String(U).padStart(2,"0")}`},C=a.filter(y=>y.state==="running"),h=a.filter(y=>y.state==="scheduled"),x=a.filter(y=>y.state==="completed");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"Testing"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"CAT-72 Console"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:(n==null?void 0:n.role)==="admin"?"72-hour Convergence Authorization Tests  Auto-refreshes every 15s":"Monitor your 72-hour conformance test in real time"})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"16px"},children:[e.jsx("button",{onClick:()=>l(!1),style:{background:s?"transparent":"rgba(91,75,138,0.25)",border:"1px solid rgba(91,75,138,0.3)",color:s?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",padding:"6px 16px",fontFamily:"Consolas, monospace",fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",cursor:"pointer"},children:"Scheduled Tests"}),e.jsx("button",{onClick:()=>l(!0),style:{background:s?"rgba(91,75,138,0.25)":"transparent",border:"1px solid rgba(91,75,138,0.3)",color:s?"rgba(255,255,255,.94)":"rgba(255,255,255,.50)",padding:"6px 16px",fontFamily:"Consolas, monospace",fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",cursor:"pointer"},children:"Live Agent Sessions"})]}),s?e.jsx(Cs,{sessions:i}):e.jsxs(e.Fragment,{children:[C.length>0&&e.jsxs("div",{children:[e.jsx("h2",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:"#D6A05C",marginBottom:"12px"},children:" Live Tests"}),e.jsx("div",{className:"space-y-4",children:C.map(y=>{const T=y.duration_hours*3600,R=Math.min(100,Math.round(y.elapsed_seconds/T*100)),U=Math.max(0,T-y.elapsed_seconds);return e.jsxs(Z,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,fontSize:"16px",color:"rgba(255,255,255,.94)",marginBottom:"4px"},children:[y.organization_name,"  ",y.system_name]}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:["Test ID: ",y.test_id,"  Duration: ",y.duration_hours,"h"]})]}),(n==null?void 0:n.role)==="admin"&&e.jsx("button",{onClick:()=>w(y.test_id),disabled:d[y.test_id],className:"px-4 py-2 btn",children:d[y.test_id]==="stopping"?"...":"Stop & Evaluate"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"8px"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"#a896d6",letterSpacing:"2px"},children:A(y.elapsed_seconds)}),e.jsx("div",{style:{flex:1},children:e.jsx("div",{className:"w-full h-3 overflow-hidden",style:{background:"transparent"},children:e.jsx("div",{className:"h-full transition-all",style:{width:`${R}%`,background:R>=100?"#5CD685":"#5B4B8A"}})})}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",color:R>=100?"#5CD685":"rgba(255,255,255,.78)",fontWeight:500},children:[R,"%"]})]}),e.jsxs("div",{style:{display:"flex",gap:"24px"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:["Remaining: ",A(U)]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:["Telemetry: ",y.telemetry_count||0," events"]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:y.violations_count>0?"#D65C5C":"rgba(255,255,255,.50)"},children:["Violations: ",y.violations_count||0]})]})]},y.id)})})]}),h.length>0&&e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Scheduled"}),e.jsx("div",{className:"space-y-3",children:h.map(y=>e.jsxs("div",{style:{padding:"14px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,color:"rgba(255,255,255,.94)",marginBottom:"2px"},children:[y.organization_name,"  ",y.system_name]}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[y.test_id,"  ",y.duration_hours,"h test"]})]}),(n==null?void 0:n.role)==="admin"&&e.jsx("button",{onClick:()=>m(y.test_id),disabled:d[y.test_id],className:"px-4 py-2 btn",children:d[y.test_id]==="starting"?"...":"Start Test"})]},y.id))})]}),x.length>0&&e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Completed"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Result"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:x.map(y=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{style:{fontWeight:500,color:"rgba(255,255,255,.94)"},children:[y.organization_name,"  ",y.system_name]}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:y.test_id})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",fontWeight:600,color:y.result==="PASS"?"#5CD685":"#D65C5C",padding:"4px 10px",background:y.result==="PASS"?"rgba(92,214,133,0.04)":"rgba(214,92,92,0.04)"},children:y.result})}),e.jsx("td",{className:"px-4 py-4",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"rgba(255,255,255,.78)"},children:A(y.elapsed_seconds)}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[(n==null?void 0:n.role)==="admin"&&y.result==="PASS"&&!y.certificate_issued&&e.jsx("button",{onClick:()=>g(y.test_id),disabled:d[y.test_id],className:"px-3 py-1 btn",children:d[y.test_id]==="issuing"?"...":"Issue Certificate"}),y.certificate_issued&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#5CD685",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px"},children:" Certified"}),e.jsx("a",{href:`${Le}/api/certificates/${y.certificate_number||y.test_id}/pdf`,target:"_blank",style:{marginLeft:"8px",padding:"2px 8px",background:"#5B4B8A",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",textDecoration:"none"},children:"PDF"})]})]})})]},y.id))})]})]})]}),!s&&a.length===0&&e.jsx(Z,{children:e.jsxs("div",{className:"text-center py-12",style:{color:"rgba(255,255,255,.50)"},children:[e.jsx("p",{style:{marginBottom:"8px"},children:(n==null?void 0:n.role)==="admin"?"No tests yet":"No active tests"}),e.jsx("p",{style:{fontSize:"13px"},children:(n==null?void 0:n.role)==="admin"?"Approve an application and schedule a CAT-72 test to get started.":"When your application is approved and a CAT-72 test is scheduled, you can monitor its progress here in real time."})]})})]})}function Cs({sessions:t}){return t.length?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map(n=>{const a=(n.pass_count||0)+(n.block_count||0),o=a>0?((n.pass_count||0)/a*100).toFixed(1):"0.0",i=n.is_online;return e.jsx("div",{style:{padding:"12px 16px",background:"rgba(91,75,138,0.08)",border:"1px solid rgba(91,75,138,0.15)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:i?"#5CD685":"rgba(255,255,255,.50)"},children:[" ",i?"ONLINE":"OFFLINE"]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.80)",marginLeft:"12px"},children:[n.session_id.slice(0,16),"..."]})]}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:["Actions: ",a.toLocaleString()]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:parseFloat(o)>=98?"#5CD685":"#D6A35C"},children:["Pass: ",o,"%"]}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:["Uptime: ",n.uptime_hours||0,"h"]})]})]})},n.session_id)})}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"rgba(255,255,255,.4)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"No active CAT-72 agent sessions"})}function ks(){const[t,n]=u.useState([]),[a,o]=u.useState("active");u.useEffect(()=>{L.get("/api/certificates/").then(l=>n(l.data)).catch(console.error)},[]);const i=t.filter(l=>a==="all"?!0:a==="active"?l.state==="conformant"||l.state==="active"||l.state==="issued":l.state===a),r={all:t.length,active:t.filter(l=>l.state==="conformant"||l.state==="active"||l.state==="issued").length,suspended:t.filter(l=>l.state==="suspended").length,revoked:t.filter(l=>l.state==="revoked").length},s=[{key:"active",label:"Active"},{key:"suspended",label:"Suspended"},{key:"revoked",label:"Revoked"},{key:"all",label:"All Records"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"Records"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"Certificates"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:"Issued ODDC conformance determinations"})]}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"rgba(255,255,255,0.03)",padding:"4px",border:"1px solid rgba(255,255,255,.07)"},children:s.map(l=>e.jsxs("button",{onClick:()=>o(l.key),style:{flex:1,padding:"8px 16px",border:"none",cursor:"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1.5px",textTransform:"uppercase",transition:"all 0.2s",background:a===l.key?"#5B4B8A":"transparent",color:a===l.key?"#fff":"rgba(255,255,255,.50)"},children:[l.label," ",r[l.key]>0?`(${r[l.key]})`:""]},l.key))}),e.jsxs(Z,{children:[e.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{className:"w-full",style:{minWidth:"600px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Certificate #"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"System"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Organization"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Expires"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:i.map(l=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("td",{className:"px-4 py-4",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"#a896d6"},children:l.certificate_number}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.94)"},children:l.system_name}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.78)"},children:l.organization_name}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1",style:{background:l.state==="conformant"?"rgba(92,214,133,0.04)":l.state==="suspended"?"rgba(214,160,92,0.04)":"rgba(214,92,92,0.04)",color:l.state==="conformant"?"#5CD685":l.state==="suspended"?"#D6A05C":"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:l.state})}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:l.expires_at?new Date(l.expires_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[l.state!=="revoked"&&l.state!=="suspended"?e.jsx("a",{href:`${Le}/api/certificates/${l.certificate_number}/pdf`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 transition-colors no-underline btn",children:"Download PDF"}):e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",letterSpacing:"1px",textTransform:"uppercase"},children:l.state==="revoked"?"Revoked":"Suspended"}),e.jsx(oe,{to:`/verify?cert=${l.certificate_number}`,className:"px-2 py-1 no-underline btn",children:"Verify"})]})})]},l.id))})]})}),i.length===0&&e.jsx("div",{className:"text-center py-12",style:{color:"rgba(255,255,255,.50)"},children:t.length===0?"No certificates issued":`No ${a==="all"?"":a+" "}certificates`})]})]})}var mt={},zs=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ga={},ye={};let wn;const As=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ye.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};ye.getSymbolTotalCodewords=function(n){return As[n]};ye.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n};ye.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');wn=n};ye.isKanjiModeEnabled=function(){return typeof wn<"u"};ye.toSJIS=function(n){return wn(n)};var Rt={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},t.from=function(o,i){if(t.isValid(o))return o;try{return n(o)}catch{return i}}})(Rt);function Ka(){this.buffer=[],this.length=0}Ka.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let a=0;a<n;a++)this.putBit((t>>>n-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var Ts=Ka;function ut(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ut.prototype.set=function(t,n,a,o){const i=t*this.size+n;this.data[i]=a,o&&(this.reservedBit[i]=!0)};ut.prototype.get=function(t,n){return this.data[t*this.size+n]};ut.prototype.xor=function(t,n,a){this.data[t*this.size+n]^=a};ut.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]};var Bs=ut,Ja={};(function(t){const n=ye.getSymbolSize;t.getRowColCoords=function(o){if(o===1)return[];const i=Math.floor(o/7)+2,r=n(o),s=r===145?26:Math.ceil((r-13)/(2*i-2))*2,l=[r-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-s;return l.push(6),l.reverse()},t.getPositions=function(o){const i=[],r=t.getRowColCoords(o),s=r.length;for(let l=0;l<s;l++)for(let c=0;c<s;c++)l===0&&c===0||l===0&&c===s-1||l===s-1&&c===0||i.push([r[l],r[c]]);return i}})(Ja);var Ya={};const Ns=ye.getSymbolSize,ta=7;Ya.getPositions=function(n){const a=Ns(n);return[[0,0],[a-ta,0],[0,a-ta]]};var Qa={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const r=i.size;let s=0,l=0,c=0,d=null,p=null;for(let f=0;f<r;f++){l=c=0,d=p=null;for(let v=0;v<r;v++){let k=i.get(f,v);k===d?l++:(l>=5&&(s+=n.N1+(l-5)),d=k,l=1),k=i.get(v,f),k===p?c++:(c>=5&&(s+=n.N1+(c-5)),p=k,c=1)}l>=5&&(s+=n.N1+(l-5)),c>=5&&(s+=n.N1+(c-5))}return s},t.getPenaltyN2=function(i){const r=i.size;let s=0;for(let l=0;l<r-1;l++)for(let c=0;c<r-1;c++){const d=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(d===4||d===0)&&s++}return s*n.N2},t.getPenaltyN3=function(i){const r=i.size;let s=0,l=0,c=0;for(let d=0;d<r;d++){l=c=0;for(let p=0;p<r;p++)l=l<<1&2047|i.get(d,p),p>=10&&(l===1488||l===93)&&s++,c=c<<1&2047|i.get(p,d),p>=10&&(c===1488||c===93)&&s++}return s*n.N3},t.getPenaltyN4=function(i){let r=0;const s=i.data.length;for(let c=0;c<s;c++)r+=i.data[c];return Math.abs(Math.ceil(r*100/s/5)-10)*n.N4};function a(o,i,r){switch(o){case t.Patterns.PATTERN000:return(i+r)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(i+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return i*r%2+i*r%3===0;case t.Patterns.PATTERN110:return(i*r%2+i*r%3)%2===0;case t.Patterns.PATTERN111:return(i*r%3+(i+r)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}t.applyMask=function(i,r){const s=r.size;for(let l=0;l<s;l++)for(let c=0;c<s;c++)r.isReserved(c,l)||r.xor(c,l,a(i,c,l))},t.getBestMask=function(i,r){const s=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let d=0;d<s;d++){r(d),t.applyMask(d,i);const p=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(d,i),p<c&&(c=p,l=d)}return l}})(Qa);var Mt={};const Te=Rt,ft=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ht=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Mt.getBlocksCount=function(n,a){switch(a){case Te.L:return ft[(n-1)*4+0];case Te.M:return ft[(n-1)*4+1];case Te.Q:return ft[(n-1)*4+2];case Te.H:return ft[(n-1)*4+3];default:return}};Mt.getTotalCodewordsCount=function(n,a){switch(a){case Te.L:return ht[(n-1)*4+0];case Te.M:return ht[(n-1)*4+1];case Te.Q:return ht[(n-1)*4+2];case Te.H:return ht[(n-1)*4+3];default:return}};var Xa={},Ft={};const nt=new Uint8Array(512),kt=new Uint8Array(256);(function(){let n=1;for(let a=0;a<255;a++)nt[a]=n,kt[n]=a,n<<=1,n&256&&(n^=285);for(let a=255;a<512;a++)nt[a]=nt[a-255]})();Ft.log=function(n){if(n<1)throw new Error("log("+n+")");return kt[n]};Ft.exp=function(n){return nt[n]};Ft.mul=function(n,a){return n===0||a===0?0:nt[kt[n]+kt[a]]};(function(t){const n=Ft;t.mul=function(o,i){const r=new Uint8Array(o.length+i.length-1);for(let s=0;s<o.length;s++)for(let l=0;l<i.length;l++)r[s+l]^=n.mul(o[s],i[l]);return r},t.mod=function(o,i){let r=new Uint8Array(o);for(;r.length-i.length>=0;){const s=r[0];for(let c=0;c<i.length;c++)r[c]^=n.mul(i[c],s);let l=0;for(;l<r.length&&r[l]===0;)l++;r=r.slice(l)}return r},t.generateECPolynomial=function(o){let i=new Uint8Array([1]);for(let r=0;r<o;r++)i=t.mul(i,new Uint8Array([1,n.exp(r)]));return i}})(Xa);const Za=Xa;function jn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}jn.prototype.initialize=function(n){this.degree=n,this.genPoly=Za.generateECPolynomial(this.degree)};jn.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(n.length+this.degree);a.set(n);const o=Za.mod(a,this.genPoly),i=this.degree-o.length;if(i>0){const r=new Uint8Array(this.degree);return r.set(o,i),r}return o};var Is=jn,ei={},Pe={},Sn={};Sn.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var je={};const ti="[0-9]+",Es="[A-Z $%*+\\-./:]+";let rt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";rt=rt.replace(/u/g,"\\u");const Ps="(?:(?![A-Z0-9 $%*+\\-./:]|"+rt+`)(?:.|[\r
]))+`;je.KANJI=new RegExp(rt,"g");je.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");je.BYTE=new RegExp(Ps,"g");je.NUMERIC=new RegExp(ti,"g");je.ALPHANUMERIC=new RegExp(Es,"g");const Rs=new RegExp("^"+rt+"$"),Ms=new RegExp("^"+ti+"$"),Fs=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");je.testKanji=function(n){return Rs.test(n)};je.testNumeric=function(n){return Ms.test(n)};je.testAlphanumeric=function(n){return Fs.test(n)};(function(t){const n=Sn,a=je;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(r,s){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!n.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?r.ccBits[0]:s<27?r.ccBits[1]:r.ccBits[2]},t.getBestModeForData=function(r){return a.testNumeric(r)?t.NUMERIC:a.testAlphanumeric(r)?t.ALPHANUMERIC:a.testKanji(r)?t.KANJI:t.BYTE},t.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},t.isValid=function(r){return r&&r.bit&&r.ccBits};function o(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(r,s){if(t.isValid(r))return r;try{return o(r)}catch{return s}}})(Pe);(function(t){const n=ye,a=Mt,o=Rt,i=Pe,r=Sn,s=7973,l=n.getBCHDigit(s);function c(v,k,m){for(let w=1;w<=40;w++)if(k<=t.getCapacity(w,m,v))return w}function d(v,k){return i.getCharCountIndicator(v,k)+4}function p(v,k){let m=0;return v.forEach(function(w){const g=d(w.mode,k);m+=g+w.getBitsLength()}),m}function f(v,k){for(let m=1;m<=40;m++)if(p(v,m)<=t.getCapacity(m,k,i.MIXED))return m}t.from=function(k,m){return r.isValid(k)?parseInt(k,10):m},t.getCapacity=function(k,m,w){if(!r.isValid(k))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=i.BYTE);const g=n.getSymbolTotalCodewords(k),A=a.getTotalCodewordsCount(k,m),C=(g-A)*8;if(w===i.MIXED)return C;const h=C-d(w,k);switch(w){case i.NUMERIC:return Math.floor(h/10*3);case i.ALPHANUMERIC:return Math.floor(h/11*2);case i.KANJI:return Math.floor(h/13);case i.BYTE:default:return Math.floor(h/8)}},t.getBestVersionForData=function(k,m){let w;const g=o.from(m,o.M);if(Array.isArray(k)){if(k.length>1)return f(k,g);if(k.length===0)return 1;w=k[0]}else w=k;return c(w.mode,w.getLength(),g)},t.getEncodedBits=function(k){if(!r.isValid(k)||k<7)throw new Error("Invalid QR Code version");let m=k<<12;for(;n.getBCHDigit(m)-l>=0;)m^=s<<n.getBCHDigit(m)-l;return k<<12|m}})(ei);var ni={};const on=ye,ai=1335,Ds=21522,na=on.getBCHDigit(ai);ni.getEncodedBits=function(n,a){const o=n.bit<<3|a;let i=o<<10;for(;on.getBCHDigit(i)-na>=0;)i^=ai<<on.getBCHDigit(i)-na;return(o<<10|i)^Ds};var ii={};const Os=Pe;function Ve(t){this.mode=Os.NUMERIC,this.data=t.toString()}Ve.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};Ve.prototype.getLength=function(){return this.data.length};Ve.prototype.getBitsLength=function(){return Ve.getBitsLength(this.data.length)};Ve.prototype.write=function(n){let a,o,i;for(a=0;a+3<=this.data.length;a+=3)o=this.data.substr(a,3),i=parseInt(o,10),n.put(i,10);const r=this.data.length-a;r>0&&(o=this.data.substr(a),i=parseInt(o,10),n.put(i,r*3+1))};var Ls=Ve;const Us=Pe,$t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ge(t){this.mode=Us.ALPHANUMERIC,this.data=t}Ge.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};Ge.prototype.getLength=function(){return this.data.length};Ge.prototype.getBitsLength=function(){return Ge.getBitsLength(this.data.length)};Ge.prototype.write=function(n){let a;for(a=0;a+2<=this.data.length;a+=2){let o=$t.indexOf(this.data[a])*45;o+=$t.indexOf(this.data[a+1]),n.put(o,11)}this.data.length%2&&n.put($t.indexOf(this.data[a]),6)};var Ws=Ge;const $s=Pe;function Ke(t){this.mode=$s.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Ke.getBitsLength=function(n){return n*8};Ke.prototype.getLength=function(){return this.data.length};Ke.prototype.getBitsLength=function(){return Ke.getBitsLength(this.data.length)};Ke.prototype.write=function(t){for(let n=0,a=this.data.length;n<a;n++)t.put(this.data[n],8)};var qs=Ke;const Hs=Pe,Vs=ye;function Je(t){this.mode=Hs.KANJI,this.data=t}Je.getBitsLength=function(n){return n*13};Je.prototype.getLength=function(){return this.data.length};Je.prototype.getBitsLength=function(){return Je.getBitsLength(this.data.length)};Je.prototype.write=function(t){let n;for(n=0;n<this.data.length;n++){let a=Vs.toSJIS(this.data[n]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),t.put(a,13)}};var Gs=Je,oi={exports:{}};(function(t){var n={single_source_shortest_paths:function(a,o,i){var r={},s={};s[o]=0;var l=n.PriorityQueue.make();l.push(o,0);for(var c,d,p,f,v,k,m,w,g;!l.empty();){c=l.pop(),d=c.value,f=c.cost,v=a[d]||{};for(p in v)v.hasOwnProperty(p)&&(k=v[p],m=f+k,w=s[p],g=typeof s[p]>"u",(g||w>m)&&(s[p]=m,l.push(p,m),r[p]=d))}if(typeof i<"u"&&typeof s[i]>"u"){var A=["Could not find a path from ",o," to ",i,"."].join("");throw new Error(A)}return r},extract_shortest_path_from_predecessor_list:function(a,o){for(var i=[],r=o;r;)i.push(r),a[r],r=a[r];return i.reverse(),i},find_path:function(a,o,i){var r=n.single_source_shortest_paths(a,o,i);return n.extract_shortest_path_from_predecessor_list(r,i)},PriorityQueue:{make:function(a){var o=n.PriorityQueue,i={},r;a=a||{};for(r in o)o.hasOwnProperty(r)&&(i[r]=o[r]);return i.queue=[],i.sorter=a.sorter||o.default_sorter,i},default_sorter:function(a,o){return a.cost-o.cost},push:function(a,o){var i={value:a,cost:o};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=n})(oi);var Ks=oi.exports;(function(t){const n=Pe,a=Ls,o=Ws,i=qs,r=Gs,s=je,l=ye,c=Ks;function d(A){return unescape(encodeURIComponent(A)).length}function p(A,C,h){const x=[];let y;for(;(y=A.exec(h))!==null;)x.push({data:y[0],index:y.index,mode:C,length:y[0].length});return x}function f(A){const C=p(s.NUMERIC,n.NUMERIC,A),h=p(s.ALPHANUMERIC,n.ALPHANUMERIC,A);let x,y;return l.isKanjiModeEnabled()?(x=p(s.BYTE,n.BYTE,A),y=p(s.KANJI,n.KANJI,A)):(x=p(s.BYTE_KANJI,n.BYTE,A),y=[]),C.concat(h,x,y).sort(function(R,U){return R.index-U.index}).map(function(R){return{data:R.data,mode:R.mode,length:R.length}})}function v(A,C){switch(C){case n.NUMERIC:return a.getBitsLength(A);case n.ALPHANUMERIC:return o.getBitsLength(A);case n.KANJI:return r.getBitsLength(A);case n.BYTE:return i.getBitsLength(A)}}function k(A){return A.reduce(function(C,h){const x=C.length-1>=0?C[C.length-1]:null;return x&&x.mode===h.mode?(C[C.length-1].data+=h.data,C):(C.push(h),C)},[])}function m(A){const C=[];for(let h=0;h<A.length;h++){const x=A[h];switch(x.mode){case n.NUMERIC:C.push([x,{data:x.data,mode:n.ALPHANUMERIC,length:x.length},{data:x.data,mode:n.BYTE,length:x.length}]);break;case n.ALPHANUMERIC:C.push([x,{data:x.data,mode:n.BYTE,length:x.length}]);break;case n.KANJI:C.push([x,{data:x.data,mode:n.BYTE,length:d(x.data)}]);break;case n.BYTE:C.push([{data:x.data,mode:n.BYTE,length:d(x.data)}])}}return C}function w(A,C){const h={},x={start:{}};let y=["start"];for(let T=0;T<A.length;T++){const R=A[T],U=[];for(let I=0;I<R.length;I++){const P=R[I],z=""+T+I;U.push(z),h[z]={node:P,lastCount:0},x[z]={};for(let D=0;D<y.length;D++){const M=y[D];h[M]&&h[M].node.mode===P.mode?(x[M][z]=v(h[M].lastCount+P.length,P.mode)-v(h[M].lastCount,P.mode),h[M].lastCount+=P.length):(h[M]&&(h[M].lastCount=P.length),x[M][z]=v(P.length,P.mode)+4+n.getCharCountIndicator(P.mode,C))}}y=U}for(let T=0;T<y.length;T++)x[y[T]].end=0;return{map:x,table:h}}function g(A,C){let h;const x=n.getBestModeForData(A);if(h=n.from(C,x),h!==n.BYTE&&h.bit<x.bit)throw new Error('"'+A+'" cannot be encoded with mode '+n.toString(h)+`.
 Suggested mode is: `+n.toString(x));switch(h===n.KANJI&&!l.isKanjiModeEnabled()&&(h=n.BYTE),h){case n.NUMERIC:return new a(A);case n.ALPHANUMERIC:return new o(A);case n.KANJI:return new r(A);case n.BYTE:return new i(A)}}t.fromArray=function(C){return C.reduce(function(h,x){return typeof x=="string"?h.push(g(x,null)):x.data&&h.push(g(x.data,x.mode)),h},[])},t.fromString=function(C,h){const x=f(C,l.isKanjiModeEnabled()),y=m(x),T=w(y,h),R=c.find_path(T.map,"start","end"),U=[];for(let I=1;I<R.length-1;I++)U.push(T.table[R[I]].node);return t.fromArray(k(U))},t.rawSplit=function(C){return t.fromArray(f(C,l.isKanjiModeEnabled()))}})(ii);const Dt=ye,qt=Rt,Js=Ts,Ys=Bs,Qs=Ja,Xs=Ya,rn=Qa,sn=Mt,Zs=Is,zt=ei,el=ni,tl=Pe,Ht=ii;function nl(t,n){const a=t.size,o=Xs.getPositions(n);for(let i=0;i<o.length;i++){const r=o[i][0],s=o[i][1];for(let l=-1;l<=7;l++)if(!(r+l<=-1||a<=r+l))for(let c=-1;c<=7;c++)s+c<=-1||a<=s+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(r+l,s+c,!0,!0):t.set(r+l,s+c,!1,!0))}}function al(t){const n=t.size;for(let a=8;a<n-8;a++){const o=a%2===0;t.set(a,6,o,!0),t.set(6,a,o,!0)}}function il(t,n){const a=Qs.getPositions(n);for(let o=0;o<a.length;o++){const i=a[o][0],r=a[o][1];for(let s=-2;s<=2;s++)for(let l=-2;l<=2;l++)s===-2||s===2||l===-2||l===2||s===0&&l===0?t.set(i+s,r+l,!0,!0):t.set(i+s,r+l,!1,!0)}}function ol(t,n){const a=t.size,o=zt.getEncodedBits(n);let i,r,s;for(let l=0;l<18;l++)i=Math.floor(l/3),r=l%3+a-8-3,s=(o>>l&1)===1,t.set(i,r,s,!0),t.set(r,i,s,!0)}function Vt(t,n,a){const o=t.size,i=el.getEncodedBits(n,a);let r,s;for(r=0;r<15;r++)s=(i>>r&1)===1,r<6?t.set(r,8,s,!0):r<8?t.set(r+1,8,s,!0):t.set(o-15+r,8,s,!0),r<8?t.set(8,o-r-1,s,!0):r<9?t.set(8,15-r-1+1,s,!0):t.set(8,15-r-1,s,!0);t.set(o-8,8,1,!0)}function rl(t,n){const a=t.size;let o=-1,i=a-1,r=7,s=0;for(let l=a-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,l-c)){let d=!1;s<n.length&&(d=(n[s]>>>r&1)===1),t.set(i,l-c,d),r--,r===-1&&(s++,r=7)}if(i+=o,i<0||a<=i){i-=o,o=-o;break}}}function sl(t,n,a){const o=new Js;a.forEach(function(c){o.put(c.mode.bit,4),o.put(c.getLength(),tl.getCharCountIndicator(c.mode,t)),c.write(o)});const i=Dt.getSymbolTotalCodewords(t),r=sn.getTotalCodewordsCount(t,n),s=(i-r)*8;for(o.getLengthInBits()+4<=s&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const l=(s-o.getLengthInBits())/8;for(let c=0;c<l;c++)o.put(c%2?17:236,8);return ll(o,t,n)}function ll(t,n,a){const o=Dt.getSymbolTotalCodewords(n),i=sn.getTotalCodewordsCount(n,a),r=o-i,s=sn.getBlocksCount(n,a),l=o%s,c=s-l,d=Math.floor(o/s),p=Math.floor(r/s),f=p+1,v=d-p,k=new Zs(v);let m=0;const w=new Array(s),g=new Array(s);let A=0;const C=new Uint8Array(t.buffer);for(let R=0;R<s;R++){const U=R<c?p:f;w[R]=C.slice(m,m+U),g[R]=k.encode(w[R]),m+=U,A=Math.max(A,U)}const h=new Uint8Array(o);let x=0,y,T;for(y=0;y<A;y++)for(T=0;T<s;T++)y<w[T].length&&(h[x++]=w[T][y]);for(y=0;y<v;y++)for(T=0;T<s;T++)h[x++]=g[T][y];return h}function cl(t,n,a,o){let i;if(Array.isArray(t))i=Ht.fromArray(t);else if(typeof t=="string"){let d=n;if(!d){const p=Ht.rawSplit(t);d=zt.getBestVersionForData(p,a)}i=Ht.fromString(t,d||40)}else throw new Error("Invalid data");const r=zt.getBestVersionForData(i,a);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=r;else if(n<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const s=sl(n,a,i),l=Dt.getSymbolSize(n),c=new Ys(l);return nl(c,n),al(c),il(c,n),Vt(c,a,0),n>=7&&ol(c,n),rl(c,s),isNaN(o)&&(o=rn.getBestMask(c,Vt.bind(null,c,a))),rn.applyMask(o,c),Vt(c,a,o),{modules:c,version:n,errorCorrectionLevel:a,maskPattern:o,segments:i}}Ga.create=function(n,a){if(typeof n>"u"||n==="")throw new Error("No input text");let o=qt.M,i,r;return typeof a<"u"&&(o=qt.from(a.errorCorrectionLevel,qt.M),i=zt.from(a.version),r=rn.from(a.maskPattern),a.toSJISFunc&&Dt.setToSJISFunction(a.toSJISFunc)),cl(n,i,o,r)};var ri={},Cn={};(function(t){function n(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let o=a.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+a);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(r){return[r,r]}))),o.length===6&&o.push("F","F");const i=parseInt(o.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+o.slice(0,6).join("")}}t.getOptions=function(o){o||(o={}),o.color||(o.color={});const i=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,r=o.width&&o.width>=21?o.width:void 0,s=o.scale||4;return{width:r,scale:r?4:s,margin:i,color:{dark:n(o.color.dark||"#000000ff"),light:n(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},t.getScale=function(o,i){return i.width&&i.width>=o+i.margin*2?i.width/(o+i.margin*2):i.scale},t.getImageWidth=function(o,i){const r=t.getScale(o,i);return Math.floor((o+i.margin*2)*r)},t.qrToImageData=function(o,i,r){const s=i.modules.size,l=i.modules.data,c=t.getScale(s,r),d=Math.floor((s+r.margin*2)*c),p=r.margin*c,f=[r.color.light,r.color.dark];for(let v=0;v<d;v++)for(let k=0;k<d;k++){let m=(v*d+k)*4,w=r.color.light;if(v>=p&&k>=p&&v<d-p&&k<d-p){const g=Math.floor((v-p)/c),A=Math.floor((k-p)/c);w=f[l[g*s+A]?1:0]}o[m++]=w.r,o[m++]=w.g,o[m++]=w.b,o[m]=w.a}}})(Cn);(function(t){const n=Cn;function a(i,r,s){i.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=s,r.width=s,r.style.height=s+"px",r.style.width=s+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(r,s,l){let c=l,d=s;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),s||(d=o()),c=n.getOptions(c);const p=n.getImageWidth(r.modules.size,c),f=d.getContext("2d"),v=f.createImageData(p,p);return n.qrToImageData(v.data,r,c),a(f,d,p),f.putImageData(v,0,0),d},t.renderToDataURL=function(r,s,l){let c=l;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),c||(c={});const d=t.render(r,s,c),p=c.type||"image/png",f=c.rendererOpts||{};return d.toDataURL(p,f.quality)}})(ri);var si={};const dl=Cn;function aa(t,n){const a=t.a/255,o=n+'="'+t.hex+'"';return a<1?o+" "+n+'-opacity="'+a.toFixed(2).slice(1)+'"':o}function Gt(t,n,a){let o=t+n;return typeof a<"u"&&(o+=" "+a),o}function pl(t,n,a){let o="",i=0,r=!1,s=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%n),d=Math.floor(l/n);!c&&!r&&(r=!0),t[l]?(s++,l>0&&c>0&&t[l-1]||(o+=r?Gt("M",c+a,.5+d+a):Gt("m",i,0),i=0,r=!1),c+1<n&&t[l+1]||(o+=Gt("h",s),s=0)):i++}return o}si.render=function(n,a,o){const i=dl.getOptions(a),r=n.modules.size,s=n.modules.data,l=r+i.margin*2,c=i.color.light.a?"<path "+aa(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+aa(i.color.dark,"stroke")+' d="'+pl(s,r,i.margin)+'"/>',p='viewBox="0 0 '+l+" "+l+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+p+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof o=="function"&&o(null,v),v};const ml=zs,ln=Ga,li=ri,ul=si;function kn(t,n,a,o,i){const r=[].slice.call(arguments,1),s=r.length,l=typeof r[s-1]=="function";if(!l&&!ml())throw new Error("Callback required as last argument");if(l){if(s<2)throw new Error("Too few arguments provided");s===2?(i=a,a=n,n=o=void 0):s===3&&(n.getContext&&typeof i>"u"?(i=o,o=void 0):(i=o,o=a,a=n,n=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(a=n,n=o=void 0):s===2&&!n.getContext&&(o=a,a=n,n=void 0),new Promise(function(c,d){try{const p=ln.create(a,o);c(t(p,n,o))}catch(p){d(p)}})}try{const c=ln.create(a,o);i(null,t(c,n,o))}catch(c){i(c)}}mt.create=ln.create;mt.toCanvas=kn.bind(null,li.render);mt.toDataURL=kn.bind(null,li.renderToDataURL);mt.toString=kn.bind(null,function(t,n,a){return ul.render(t,a)});function gl(){const[t,n]=u.useState("verify"),[a,o]=u.useState(""),[i,r]=u.useState([]),[s,l]=u.useState(null),[c,d]=u.useState("conformant"),[p,f]=u.useState(!1),[v,k]=u.useState(""),[m,w]=u.useState(null),[g,A]=u.useState(null),[C,h]=u.useState(!1),[x,y]=u.useState(""),[T,R]=u.useState(!1),[U,I]=u.useState(!1),[P,z]=u.useState(null),[D,M]=u.useState(!1),b="Consolas, 'IBM Plex Mono', monospace",N="Georgia, 'Source Serif 4', serif",_="rgba(255,255,255,.94)",B="rgba(255,255,255,.78)",F="rgba(255,255,255,.50)",V="#a896d6",j="#5CD685",$="#D6A05C",G="#D65C5C",Q=async O=>{try{const X=window.location.origin+"/verify?cert="+O,ie=await mt.toDataURL(X,{width:256,margin:2,color:{dark:"#5B4B8A",light:"#ffffff"},errorCorrectionLevel:"H"});z(ie)}catch(X){console.error("QR generation failed:",X)}},ne=()=>{if(!P)return;const O=document.createElement("a");O.href=P,O.download="sentinel-"+v+"-qr.png",document.body.appendChild(O),O.click(),document.body.removeChild(O)};u.useEffect(()=>{const X=new URLSearchParams(window.location.search).get("cert");X&&(k(X.toUpperCase()),setTimeout(()=>{H(X.toUpperCase())},300))},[]);const H=async O=>{const X=O||v;if(X.trim()){y(""),w(null),A(null),h(!1),R(!0);try{const ie=await L.get("/api/verify/"+X);w(ie.data),Q(X);const ae=new URL(window.location);ae.searchParams.set("cert",X),window.history.replaceState({},"",ae)}catch{y("Certificate not found")}R(!1)}},J=async()=>{if(g){h(!C);return}try{const O=await L.get("/api/verify/"+v+"/evidence");A(O.data),h(!0)}catch{console.error("Evidence fetch failed")}},S=()=>{const O=window.location.origin+"/verify?cert="+v;navigator.clipboard.writeText(O),I(!0),setTimeout(()=>I(!1),2e3)},q=async O=>{O.preventDefault(),await H()};xe.useEffect(()=>{t==="search"&&!p&&(L.get("/api/registry/stats").then(O=>l(O.data)).catch(console.error),L.get("/api/registry/search?status=conformant").then(O=>{r(O.data.results||[]),f(!0)}).catch(console.error))},[t]);const W=async O=>{if(O.preventDefault(),!!a.trim()){y(""),r([]),R(!0);try{const X=new URLSearchParams;a.trim()&&X.set("q",a.trim()),c&&X.set("status",c);const ie=await L.get("/api/registry/search?"+X.toString());r(ie.data.results||[]),(!ie.data.results||ie.data.results.length===0)&&y("No certificates found")}catch{y("Unable to connect to registry")}R(!1)}},K=({label:O,value:X,valueColor:ie,isMono:ae})=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px",padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:[e.jsx("span",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F},children:O}),e.jsx("span",{style:{color:ie||_,fontSize:"13px",fontFamily:ae?b:"inherit"},children:X})]});return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 16px",background:"radial-gradient(1200px 700px at 15% 10%, rgba(91,75,138,.10), transparent 55%), radial-gradient(900px 600px at 85% 80%, rgba(92,214,133,.04), transparent 55%), #2a2f3d"},children:[e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,backgroundImage:"linear-gradient(rgba(255,255,255,.015) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.015) 1px, transparent 1px)",backgroundSize:"120px 120px",opacity:.25,maskImage:"radial-gradient(ellipse at center, black 20%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse at center, black 20%, transparent 70%)"}}),e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,background:"radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,.2) 85%, rgba(0,0,0,.4) 100%)"}}),e.jsxs(oe,{to:"/dashboard",style:{position:"fixed",top:"24px",right:"32px",zIndex:20,color:F,fontFamily:b,fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",textDecoration:"none",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ia,{size:12})," Dashboard"]}),e.jsxs("div",{style:{width:"100%",maxWidth:"520px",position:"relative",zIndex:1},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"24px"},children:e.jsx("div",{style:{width:"24px",height:"24px",background:"#5B4B8A",border:"2px solid #9d8ccf",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{width:"8px",height:"8px",background:"#c4b8e8",borderRadius:"50%"}})})}),e.jsxs("h1",{style:{fontFamily:N,fontSize:"clamp(28px, 4vw, 44px)",fontWeight:200,letterSpacing:"-0.03em",lineHeight:1.1,margin:"0 0 8px",color:_,textAlign:"center"},children:["Certificate ",e.jsx("span",{style:{color:V,fontStyle:"italic"},children:"Verification"})]}),e.jsx("p",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F,textAlign:"center",marginTop:"12px"},children:"Sentinel Authority  ODDC Registry"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"32px"},children:["verify","search"].map(O=>e.jsx("button",{onClick:()=>n(O),className:"btn",style:t===O?{borderColor:"rgba(157,140,207,.4)",color:V}:{},children:O==="verify"?"Verify Certificate":"Search Registry"},O))}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.04)",margin:"32px 0"}}),t==="verify"&&e.jsxs("form",{onSubmit:q,children:[e.jsx("div",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F,marginBottom:"12px",textAlign:"center"},children:"Certificate Number"}),e.jsx("input",{type:"text",value:v,placeholder:"ODDC-2026-00001",onChange:O=>{k(O.target.value.toUpperCase()),y(""),w(null)},style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:_,fontFamily:b,fontSize:"16px",textAlign:"center",letterSpacing:"2px",padding:"14px 0",outline:"none"}}),e.jsx("div",{style:{marginTop:"24px"},children:e.jsx("button",{type:"submit",disabled:T||!v.trim(),className:"btn primary",style:{width:"100%",justifyContent:"center"},children:T?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:12,style:{animation:"spin 1s linear infinite"}})," Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{size:12})," Verify Certificate"]})})})]}),t==="search"&&e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"32px",marginBottom:"32px"},children:[{label:"Active",value:s.active_certificates,color:j},{label:"Orgs",value:s.certified_organizations,color:V},{label:"30 Days",value:s.issued_last_30_days,color:$}].map(O=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:N,fontSize:"24px",fontWeight:200,color:O.color},children:O.value}),e.jsx("div",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F,marginTop:"4px"},children:O.label})]},O.label))}),e.jsxs("form",{onSubmit:W,children:[e.jsx("div",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F,marginBottom:"12px",textAlign:"center"},children:"Organization or System Name"}),e.jsx("input",{type:"text",value:a,placeholder:"Company name or system...",onChange:O=>{o(O.target.value),y("")},style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:_,fontFamily:b,fontSize:"16px",textAlign:"center",letterSpacing:"2px",padding:"14px 0",outline:"none"}}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:e.jsxs("select",{value:c,onChange:O=>d(O.target.value),style:{background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:F,fontFamily:b,fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",padding:"8px 24px 8px 0",outline:"none",appearance:"none",cursor:"pointer"},children:[e.jsx("option",{value:"conformant",children:"Conformant"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"revoked",children:"Revoked"})]})}),e.jsx("div",{style:{marginTop:"24px"},children:e.jsx("button",{type:"submit",disabled:T,className:"btn primary",style:{width:"100%",justifyContent:"center"},children:T?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:12,style:{animation:"spin 1s linear infinite"}})," Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{size:12})," Search Registry"]})})})]}),i.length>0&&e.jsxs("div",{style:{marginTop:"32px"},children:[e.jsxs("div",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F,marginBottom:"16px",textAlign:"center"},children:[i.length," certificate(s) found"]}),i.map(O=>e.jsxs("div",{onClick:()=>{k(O.certificate_number),n("verify"),setTimeout(()=>document.querySelector("form")&&document.querySelector("form").requestSubmit(),100)},style:{padding:"14px 0",borderBottom:"1px solid rgba(255,255,255,0.02)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:_,fontSize:"14px"},children:O.organization_name}),e.jsx("div",{style:{color:F,fontSize:"12px",marginTop:"2px"},children:O.system_name})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{color:V,fontFamily:b,fontSize:"10px"},children:O.certificate_number}),e.jsx("div",{style:{color:j,fontFamily:b,fontSize:"9px",letterSpacing:"1px",textTransform:"uppercase",marginTop:"2px"},children:O.state})]})]},O.certificate_number))]})]}),x&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px 0",borderTop:"1px solid rgba(255,255,255,0.02)",textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx(We,{size:14,style:{color:G}}),e.jsx("span",{style:{color:G,fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase"},children:"Not Found"})]}),e.jsx("p",{style:{color:B,fontSize:"13px"},children:x})]}),m&&(m.status==="NOT_FOUND"||m.state==="NOT_FOUND")&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px 0",borderTop:"1px solid rgba(255,255,255,0.02)",textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx(We,{size:14,style:{color:G}}),e.jsx("span",{style:{color:G,fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase"},children:"Certificate Not Found"})]}),e.jsxs("p",{style:{color:B,fontSize:"13px"},children:["No certificate exists with number: ",e.jsx("strong",{children:m.certificate_number})]})]}),m&&m.status!=="NOT_FOUND"&&m.state!=="NOT_FOUND"&&(()=>{const O=m.valid,X=(m.status||"").toUpperCase(),ie={CONFORMANT:{color:j,label:"CONFORMANT",icon:"Valid Certificate"},SUSPENDED:{color:$,label:"SUSPENDED",icon:"Suspended"},REVOKED:{color:G,label:"REVOKED",icon:"Revoked"},EXPIRED:{color:G,label:"EXPIRED",icon:"Expired"}}[X]||{color:j,label:"CONFORMANT",icon:"Valid Certificate"};return e.jsxs("div",{style:{marginTop:"32px"},children:[e.jsxs("div",{style:{padding:"16px 0",borderTop:"1px solid rgba(255,255,255,0.04)",borderBottom:"1px solid rgba(255,255,255,0.04)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[O?e.jsx(pn,{size:14,style:{color:ie.color}}):e.jsx(We,{size:14,style:{color:ie.color}}),e.jsx("span",{style:{color:ie.color,fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase"},children:ie.icon})]}),e.jsxs("span",{className:"badge "+(X==="CONFORMANT"?"green":X==="SUSPENDED"?"amber":"red"),children:[e.jsx("span",{className:"s-dot",style:{background:ie.color}}),ie.label]})]}),m.message&&e.jsx("div",{style:{padding:"10px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:e.jsx("p",{style:{color:ie.color,fontSize:"12px",margin:0},children:m.message})}),e.jsxs("div",{style:{padding:"8px 0"},children:[e.jsx(K,{label:"Certificate",value:m.certificate_number,valueColor:ie.color,isMono:!0}),e.jsx(K,{label:"Organization",value:m.organization_name||"-"}),e.jsx(K,{label:"System",value:(m.system_name||"-")+(m.system_version?" v"+m.system_version:"")}),e.jsx(K,{label:"Issued",value:m.issued_at?new Date(m.issued_at).toLocaleDateString():"N/A"}),e.jsx(K,{label:"Expires",value:m.expires_at?new Date(m.expires_at).toLocaleDateString():"N/A",valueColor:X==="EXPIRED"?G:_}),m.convergence_score!=null&&e.jsx(K,{label:"Convergence",value:(m.convergence_score*100).toFixed(1)+"%",valueColor:m.convergence_score>=.95?j:$,isMono:!0}),m.evidence_hash&&e.jsxs("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:[e.jsx("div",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F,marginBottom:"6px"},children:"Evidence Hash"}),e.jsx("div",{style:{fontFamily:b,fontSize:"10px",color:F,wordBreak:"break-all",lineHeight:1.5},children:m.evidence_hash})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"20px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:S,className:"btn",children:U?" Copied":" Share Link"}),e.jsx("button",{onClick:()=>M(!D),className:"btn",style:D?{borderColor:"rgba(157,140,207,.4)",color:V}:{},children:D?" Hide QR":" QR Code"}),O&&e.jsxs("a",{href:Le+"/api/certificates/"+v+"/pdf",target:"_blank",rel:"noopener noreferrer",className:"btn",children:[e.jsx(qe,{size:10})," PDF"]}),O&&e.jsx("button",{onClick:J,className:"btn",children:C?" Hide Evidence":" Evidence"})]}),D&&P&&e.jsxs("div",{style:{marginTop:"24px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.02)",textAlign:"center"},children:[e.jsx("div",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F,marginBottom:"16px"},children:"Verification QR Code"}),e.jsx("div",{style:{display:"inline-block",padding:"12px",background:"#fff"},children:e.jsx("img",{src:P,alt:"QR Code",style:{width:"180px",height:"180px",display:"block"}})}),e.jsx("div",{style:{marginTop:"12px"},children:e.jsxs("button",{onClick:ne,className:"btn",children:[e.jsx(qe,{size:10})," Download PNG"]})}),e.jsxs("p",{style:{fontSize:"10px",color:F,marginTop:"10px",fontFamily:b,letterSpacing:"1px"},children:["Scan to verify ",v]})]}),C&&g&&e.jsxs("div",{style:{marginTop:"24px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.02)"},children:[e.jsx("div",{style:{fontFamily:b,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:F,marginBottom:"16px"},children:"Evidence Chain"}),e.jsx(K,{label:"Hash (SHA-256)",value:g.evidence_hash||"-",valueColor:V,isMono:!0}),e.jsx(K,{label:"Convergence",value:g.convergence_score?(g.convergence_score*100).toFixed(2)+"%":"-",valueColor:j,isMono:!0}),g.odd_scope&&g.odd_scope.environment_type&&e.jsx(K,{label:"ODD Environment",value:g.odd_scope.environment_type}),g.verification_instructions&&e.jsx("div",{style:{padding:"12px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:e.jsx("p",{style:{fontSize:"11px",color:F,lineHeight:1.6,whiteSpace:"pre-line",margin:0},children:g.verification_instructions})})]})]})})()]})]})}function xl(){const{user:t,logout:n}=de();return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#2a2f3d",padding:"20px"},children:e.jsxs("div",{style:{maxWidth:"min(500px, 90vw)",textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(245,158,11,0.1)",border:"2px solid rgba(245,158,11,0.3)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:e.jsx(oa,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,style:{width:"36px",height:"36px",color:"#f59e0b"}})}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:"#f59e0b",marginBottom:"12px"},children:"APPLICATION UNDER REVIEW"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"rgba(255,255,255,.94)",margin:"0 0 16px"},children:"Welcome to Sentinel Authority"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"15px",lineHeight:"1.6",marginBottom:"32px"},children:"Your account is being reviewed by our team. You will receive full portal access once approved. This typically takes 1-2 business days."}),e.jsxs("div",{style:{padding:"20px",border:"1px solid rgba(255,255,255,.07)",background:"rgba(255,255,255,0.02)",marginBottom:"24px",textAlign:"left"},children:[e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",marginBottom:"8px"},children:"Registered as:"}),e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontWeight:500},children:t==null?void 0:t.full_name}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px"},children:t==null?void 0:t.email})]}),e.jsxs("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",marginBottom:"24px"},children:["Questions? Contact ",e.jsx("a",{href:"mailto:info@sentinelauthority.org",style:{color:"#a896d6"},children:"info@sentinelauthority.org"})]}),e.jsx("button",{onClick:n,style:{padding:"10px 24px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:"Sign Out"})]})})}function fl(){const{user:t}=de(),[n,a]=u.useState([]),[o,i]=u.useState(!0);u.useEffect(()=>{L.get("/api/documents/").then(s=>{a(Array.isArray(s.data)?s.data:[]),i(!1)}).catch(()=>i(!1))},[]);const r=async(s,l)=>{try{const c=await L.get("/api/documents/"+s+"/download",{responseType:"blob"}),d=window.URL.createObjectURL(c.data),p=document.createElement("a");p.href=d,p.download=l.replace(/\s+/g,"_")+".pdf",document.body.appendChild(p),p.click(),p.remove(),window.URL.revokeObjectURL(d)}catch(c){console.error("Download error:",c)}};return e.jsxs("div",{style:{padding:"32px",maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"RESOURCES"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"rgba(255,255,255,.94)",margin:0},children:"Documents & Guides"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",marginTop:"8px",fontSize:"14px"},children:"Reference materials for the ODDC certification process."})]}),o?e.jsx("div",{style:{color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:"Loading documents..."}):n.length===0?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",border:"1px solid rgba(255,255,255,.07)",background:"#2a2f3d",color:"rgba(255,255,255,.50)"},children:"No documents available."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n.map(s=>e.jsxs("div",{style:{padding:"24px",border:"1px solid rgba(255,255,255,.07)",background:"#2a2f3d",display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#5B4B8A22",border:"1px solid #5B4B8A44",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ra,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,style:{width:"22px",height:"22px",color:"#a896d6"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,color:"rgba(255,255,255,.94)",fontSize:"15px",marginBottom:"4px"},children:s.title}),e.jsx("div",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px",lineHeight:"1.4"},children:s.description}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"6px",letterSpacing:"1px",textTransform:"uppercase"},children:"PDF  v"+s.version})]}),e.jsx("button",{onClick:()=>r(s.id,s.title),style:{padding:"10px 20px",background:"#5B4B8A",border:"1px solid #a896d6",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer",flexShrink:0},children:"Download"})]},s.id))}),t&&t.role==="admin"&&e.jsx("div",{style:{marginTop:"40px",padding:"20px",border:"1px dashed rgba(255,255,255,.07)",color:"rgba(255,255,255,.50)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:"ADMIN: To add documents, place PDFs in backend/static/documents/ and register them in documents.py"})]})}function Ne({label:t,title:n,description:a,action:o}){return e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[t&&e.jsxs("p",{style:{fontFamily:te.mono,fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:te.purpleBright,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{width:"24px",height:"1px",background:te.purpleBright}}),t]}),e.jsx("h1",{style:{fontFamily:te.serif,fontSize:"clamp(22px, 5vw, 32px)",fontWeight:"normal",margin:0,letterSpacing:"-0.02em"},children:n}),a&&e.jsx("p",{style:{color:te.textSecondary,marginTop:"8px",fontSize:"14px",lineHeight:1.6},children:a})]}),o]})})}function ci({apiEndpoint:t,apiKey:n,certificateNumber:a,systemName:o,organizationName:i}){const r=new Date().toISOString();return`#!/usr/bin/env python3
"""
ENVELO Interlock - Sentinel Authority
Enforced Non-Violable Execution-Limit Override

System:       ${o}
Certificate:  ${a}
Organization: ${i}
Generated:    ${r}

DEPLOY:
  pip install httpx
  python envelo_agent.py

INTEGRATE:
  from envelo_agent import agent

  @agent.enforce
  def autonomous_action(speed=0, temperature=0):
      pass  # your logic here
"""

import os, sys, time, json, uuid, signal, threading, logging
from datetime import datetime, timezone
from functools import wraps

try:
    import httpx
except ImportError:
    print("[ENVELO] Installing httpx...")
    os.system(f"{sys.executable} -m pip install httpx -q")
    import httpx

# ${"".repeat(65)}
# CREDENTIALS (pre-configured by Sentinel Authority)
# ${"".repeat(65)}
API_ENDPOINT = "${t}"
API_KEY      = "${n}"
CERTIFICATE  = "${a}"
SYSTEM_NAME  = "${o}"

logging.basicConfig(level=logging.INFO, format="[ENVELO] %(message)s")
log = logging.getLogger("envelo")


class Boundary:
    """Single ODD boundary with min/max/hard-limit enforcement."""
    def __init__(self, name, parameter=None, min_value=None, max_value=None,
                 hard_limit=None, unit="", tolerance=0):
        self.name = name
        self.parameter = parameter or name
        self.min_value = float(min_value) if min_value is not None else None
        self.max_value = float(max_value) if max_value is not None else None
        self.hard_limit = float(hard_limit) if hard_limit is not None else None
        self.unit = unit
        self.tolerance = float(tolerance) if tolerance else 0

    def check(self, value):
        v = float(value)
        if self.hard_limit is not None and v > self.hard_limit:
            return False, f"{self.name}={v}{self.unit} exceeds hard limit {self.hard_limit}{self.unit}"
        if self.min_value is not None and v < self.min_value - self.tolerance:
            return False, f"{self.name}={v}{self.unit} below min {self.min_value}{self.unit}"
        if self.max_value is not None and v > self.max_value + self.tolerance:
            return False, f"{self.name}={v}{self.unit} above max {self.max_value}{self.unit}"
        return True, None


class EnveloAgent:
    """
    Production ENVELO agent with server-synced boundaries,
    background telemetry, heartbeat, and graceful shutdown.
    """
    def __init__(self):
        self.client = httpx.Client(
            base_url=API_ENDPOINT,
            headers={"Authorization": f"Bearer {API_KEY}"},
            timeout=15,
        )
        self.session_id = uuid.uuid4().hex
        self.boundaries = {}
        self.telemetry_buffer = []
        self.stats = {"pass": 0, "block": 0}
        self.running = False
        self._threads = []

    #  lifecycle 

    def start(self):
        log.info("Starting ENVELO Interlock v2.0.0")
        log.info(f"  System:      {SYSTEM_NAME}")
        log.info(f"  Certificate: {CERTIFICATE}")
        log.info(f"  Endpoint:    {API_ENDPOINT}")

        # 1. Fetch approved boundaries from server
        try:
            res = self.client.get("/api/envelo/boundaries/config")
            if res.status_code == 200:
                cfg = res.json()
                for b in cfg.get("numeric_boundaries", []):
                    self.boundaries[b.get("parameter", b["name"])] = Boundary(**b)
                log.info(f"  Boundaries:  {len(self.boundaries)} loaded from server")
            else:
                log.warning(f"  Boundaries:  server returned {res.status_code}, using local")
        except Exception as e:
            log.warning(f"  Boundaries:  fetch failed ({e}), using local")

        # 2. Register session
        try:
            self.client.post("/api/envelo/sessions", json={
                "certificate_id": CERTIFICATE,
                "session_id": self.session_id,
                "started_at": datetime.now(timezone.utc).isoformat(),
                "agent_version": "2.0.0",
                "system_name": SYSTEM_NAME,
                "boundaries": [
                    {"name": b.name, "min": b.min_value, "max": b.max_value}
                    for b in self.boundaries.values()
                ]
            })
            log.info(f"  Session:     {self.session_id[:16]}...")
        except Exception as e:
            log.warning(f"  Session registration failed: {e}")

        self.running = True

        # 3. Background threads
        for target in [self._heartbeat_loop, self._flush_loop]:
            t = threading.Thread(target=target, daemon=True)
            t.start()
            self._threads.append(t)

        log.info("  Status:       RUNNING")
        return self

    def shutdown(self):
        log.info("Shutting down...")
        self.running = False
        self._flush_telemetry()
        try:
            self.client.post(f"/api/envelo/sessions/{self.session_id}/end", json={
                "ended_at": datetime.now(timezone.utc).isoformat(),
                "final_stats": {
                    "pass_count": self.stats["pass"],
                    "block_count": self.stats["block"]
                }
            })
        except:
            pass
        self.client.close()
        log.info(f"Done. {self.stats['pass']} passed, {self.stats['block']} blocked.")

    def _cleanup(self):
        """Remove PID file and disable auto-restart on key revocation."""
        import pathlib, subprocess
        pid_file = pathlib.Path.home() / ".envelo" / "envelo.pid"
        if pid_file.exists():
            pid_file.unlink()
        try:
            subprocess.run(["systemctl", "--user", "stop", "envelo.service"], capture_output=True)
            subprocess.run(["systemctl", "--user", "disable", "envelo.service"], capture_output=True)
        except: pass
        plist = pathlib.Path.home() / "Library" / "LaunchAgents" / "org.sentinelauthority.envelo.plist"
        if plist.exists():
            try: subprocess.run(["launchctl", "unload", str(plist)], capture_output=True)
            except: pass
        log.info("Auto-restart disabled. Agent stopped cleanly.")


    #  boundary management 

    def add_boundary(self, name, min_value=None, max_value=None, unit="", tolerance=0):
        self.boundaries[name] = Boundary(
            name=name, min_value=min_value, max_value=max_value,
            unit=unit, tolerance=tolerance,
        )
        log.info(f"  + {name}: {min_value} to {max_value} {unit}")

    #  enforcement 

    def check(self, parameter, value):
        """Check one parameter. Returns (passed: bool, message: str|None)."""
        if parameter not in self.boundaries:
            return True, None
        return self.boundaries[parameter].check(value)

    def enforce_params(self, **params):
        """Check all params. Returns (all_passed, violations_list)."""
        violations = []
        evals = []
        for param, value in params.items():
            passed, msg = self.check(param, value)
            evals.append({"boundary": param, "passed": passed})
            if not passed:
                violations.append({"boundary": param, "value": value, "message": msg})

        result = "PASS" if not violations else "BLOCK"
        self.telemetry_buffer.append({
            "timestamp": datetime.now(timezone.utc).isoformat(),
            "action_id": uuid.uuid4().hex[:8],
            "action_type": "boundary_check",
            "result": result,
            "parameters": {k: v for k, v in params.items()},
            "boundary_evaluations": evals
        })

        if violations:
            self.stats["block"] += 1
            for v in violations:
                log.warning(f"VIOLATION: {v['message']}")
            return False, violations
        self.stats["pass"] += 1
        return True, []

    def enforce(self, func):
        """Decorator  blocks execution if any kwarg violates a boundary."""
        @wraps(func)
        def wrapper(*args, **kwargs):
            passed, violations = self.enforce_params(**kwargs)
            if not passed:
                raise RuntimeError(f"ENVELO BLOCK: {violations[0]['message']}")
            return func(*args, **kwargs)
        return wrapper

    #  background loops 

    def _heartbeat_loop(self):
        fail_count = 0
        while self.running:
            try:
                res = self.client.post("/api/envelo/heartbeat", json={
                    "session_id": self.session_id,
                    "certificate_id": CERTIFICATE,
                    "timestamp": datetime.now(timezone.utc).isoformat(),
                    "stats": self.stats
                })
                if res.status_code == 401:
                    log.warning("API key revoked  shutting down")
                    self.running = False
                    self._flush_telemetry()
                    self._cleanup()
                    return
                fail_count = 0
            except:
                fail_count += 1
                if fail_count >= 10:
                    log.warning(f"Lost connection ({fail_count} failures)  stopping")
                    self.running = False
                    return
            time.sleep(30)

    def _flush_loop(self):
        while self.running:
            time.sleep(10)
            self._flush_telemetry()

    def _flush_telemetry(self):
        if not self.telemetry_buffer:
            return
        batch, self.telemetry_buffer = self.telemetry_buffer[:], []
        try:
            res = self.client.post("/api/envelo/telemetry", json={
                "certificate_id": CERTIFICATE,
                "session_id": self.session_id,
                "records": batch,
                "stats": {"pass_count": self.stats["pass"], "block_count": self.stats["block"]}
            })
            if res.status_code == 401:
                log.warning("API key revoked  shutting down")
                self.running = False
                self._cleanup()
                return
        except Exception as e:
            log.warning(f"Telemetry flush failed: {e}")
            self.telemetry_buffer = batch + self.telemetry_buffer


#  global instance 
agent = EnveloAgent()

def _shutdown(sig, frame):
    agent.shutdown()
    sys.exit(0)

signal.signal(signal.SIGINT, _shutdown)
signal.signal(signal.SIGTERM, _shutdown)


if __name__ == "__main__":
    print()
    print("${""+"".repeat(59)+""}")
    print("  ENVELO Interlock  Sentinel Authority                         ")
    print("  Enforced Non-Violable Execution-Limit Override              ")
    print("${""+"".repeat(59)+""}")
    print()

    agent.start()
    print()
    print("Agent running. Ctrl+C to stop.")
    print()
    print("" * 60)
    print("INTEGRATION:")
    print()
    print("  from envelo_agent import agent")
    print("  agent.start()")
    print()
    print("  @agent.enforce")
    print("  def my_action(speed=0, temperature=0):")
    print("      # your autonomous logic")
    print("      pass")
    print()
    print("  # Or check directly:")
    print("  passed, violations = agent.enforce_params(speed=50, temp=25)")
    print("" * 60)
    print()

    try:
        while agent.running:
            time.sleep(1)
    except KeyboardInterrupt:
        agent.shutdown()
`}function hl({session:t}){var a;if(!t)return null;const n=t.pass_count+t.block_count>0?(t.pass_count/(t.pass_count+t.block_count)*100).toFixed(1):0;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{padding:"16px",background:"transparent",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:500,color:"rgba(255,255,255,.94)"},children:(t.pass_count||0)+(t.block_count||0)}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Total Actions"})]}),e.jsxs("div",{style:{padding:"16px",background:"transparent",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:500,color:"#5CD685"},children:t.pass_count||0}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Passed"})]}),e.jsxs("div",{style:{padding:"16px",background:"transparent",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:500,color:"#D65C5C"},children:t.block_count||0}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Blocked"})]}),e.jsxs("div",{style:{padding:"16px",background:n>=95?"rgba(92,214,133,0.1)":"rgba(214,92,92,0.03)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:500,color:n>=95?"#5CD685":"#D65C5C"},children:[n,"%"]}),e.jsx("div",{style:{fontSize:"11px",color:"#888",textTransform:"uppercase"},children:"Pass Rate"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"SESSION ID"}),e.jsx("div",{style:{fontFamily:"monospace",color:"#ccc"},children:t.session_id})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"CERTIFICATE"}),e.jsx("div",{style:{color:"#ccc"},children:t.certificate_id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"STARTED"}),e.jsx("div",{style:{color:"#ccc"},children:t.started_at?new Date(t.started_at).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"STATUS"}),e.jsx("span",{style:{padding:"4px 12px",fontSize:"12px",background:t.status==="active"?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.1)",color:t.status==="active"?"#5CD685":"#888"},children:(a=t.status)==null?void 0:a.toUpperCase()})]})]})]})}function yl({sessionId:t}){const[n,a]=u.useState([]),[o,i]=u.useState(!0);return u.useEffect(()=>{t&&L.get(`/api/envelo/admin/sessions/${t}/telemetry`).then(r=>a(r.data.records||[])).catch(console.error).finally(()=>i(!1))},[t]),o?e.jsx("div",{style:{color:"#888",padding:"12px"},children:"Loading..."}):n.length?e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Time"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Action"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Result"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",color:"#888"},children:"Params"})]})}),e.jsx("tbody",{children:n.map((r,s)=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("td",{style:{padding:"8px",fontFamily:"monospace",fontSize:"11px",color:"#aaa"},children:r.timestamp?new Date(r.timestamp).toLocaleTimeString():"-"}),e.jsx("td",{style:{padding:"8px",color:"rgba(255,255,255,.94)"},children:r.action_type}),e.jsx("td",{style:{padding:"8px"},children:e.jsx("span",{style:{padding:"2px 8px",fontSize:"10px",fontWeight:400,background:r.result==="PASS"?"rgba(92,214,133,0.2)":"rgba(214,92,92,0.2)",color:r.result==="PASS"?"#5CD685":"#D65C5C"},children:r.result})}),e.jsx("td",{style:{padding:"8px",color:"#666",fontFamily:"monospace",fontSize:"10px"},children:JSON.stringify(r.parameters||{})})]},s))})]})}):e.jsx("div",{style:{color:"#888",padding:"12px"},children:"No telemetry records"})}function _l({onKeyGenerated:t}){const[n,a]=u.useState([]),[o,i]=u.useState(!0),[r,s]=u.useState(""),[l,c]=u.useState(null);u.useEffect(()=>{l!=null&&l.key&&(t==null||t(l.key))},[l]),u.useEffect(()=>{p()},[]);const d=C=>{const h=f.find(U=>U.id===k),x=ci({apiEndpoint:Le,apiKey:C,certificateNumber:(h==null?void 0:h.certificate_number)||"PENDING",systemName:(h==null?void 0:h.system_name)||"My System",organizationName:(h==null?void 0:h.organization_name)||""}),y=new Blob([x],{type:"text/plain"}),T=URL.createObjectURL(y),R=document.createElement("a");R.href=T,R.download="envelo_agent.py",document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(T)},p=async()=>{try{const C=await L.get("/api/apikeys/");a(C.data)}catch(C){console.error("Failed to load API keys:",C)}i(!1)},[f,v]=u.useState([]),[k,m]=u.useState(null);u.useEffect(()=>{L.get("/api/certificates/").then(C=>{const h=(C.data||[]).filter(x=>x.state==="conformant"||x.state==="active"||x.state==="issued");v(h),h.length>0&&m(h[0].id)}).catch(()=>{})},[]);const w=async()=>{if(r.trim())try{const C=await L.post("/api/apikeys/generate",{name:r,certificate_id:k});c(C.data),s(""),p()}catch(C){console.error("Failed to generate key:",C)}},g=async C=>{if(await confirm({title:"Revoke Key",message:"Revoke this API key? This cannot be undone.",danger:!0,confirmLabel:"Revoke"}))try{await L.delete(`/api/apikeys/${C}`),p()}catch(h){console.error("Failed to revoke key:",h)}},A=()=>{l!=null&&l.key&&navigator.clipboard.writeText(l.key)};return o?e.jsx("div",{style:{color:"rgba(255,255,255,.50)"},children:"Loading..."}):e.jsxs("div",{children:[l&&e.jsxs("div",{style:{background:"transparent",border:"1px solid rgba(255,255,255,0.07)",padding:"16px",marginBottom:"20px"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"#5CD685",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:" New API Key Generated"}),e.jsx("div",{style:{background:"rgba(255,255,255,.05)",padding:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:"rgba(255,255,255,.94)",wordBreak:"break-all",marginBottom:"12px"},children:l.key}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:A,className:"btn primary",children:"Copy to Clipboard"}),e.jsx("button",{onClick:()=>c(null),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.78)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",cursor:"pointer"},children:"Dismiss"})]}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"12px",marginTop:"12px"},children:" Save this key now. You won't be able to see it again."}),e.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"rgba(91,75,138,0.2)",border:"1px solid rgba(91,75,138,0.3)"},children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"#a896d6",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Next Step"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"13px",marginBottom:"12px"},children:"Download the ENVELO Interlock pre-configured with your credentials:"}),e.jsxs("button",{onClick:()=>d(l.key),className:"btn primary",children:[e.jsx(qe,{size:16})," Download ENVELO Interlock"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[e.jsx("input",{type:"text",placeholder:"Key name (e.g., Production)",value:r,onChange:C=>s(C.target.value),style:{flex:1,padding:"10px 14px",background:"rgba(255,255,255,.05)",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"}}),e.jsx("button",{onClick:w,disabled:!r.trim(),className:"btn",children:"Generate Key"})]}),n.length>0?e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:"Your API Keys"}),n.map(C=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",padding:"12px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",marginBottom:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:"rgba(255,255,255,.94)"},children:C.name}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)",marginTop:"4px"},children:[C.key_prefix,""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:C.last_used_at?`Last used: ${new Date(C.last_used_at).toLocaleDateString()}`:"Never used"}),e.jsx("button",{onClick:()=>g(C.id),style:{padding:"6px 12px",background:"rgba(255,100,100,0.1)",border:"1px solid rgba(255,100,100,0.3)",color:"#ff6464",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer"},children:"Revoke"})]})]},C.id))]}):e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:"No API keys yet. Generate one to connect the ENVELO Interlock."})]})}function bl(){var b;const t=ve();ke();const[n,a]=u.useState(null),[o,i]=u.useState([]),[r,s]=u.useState([]),[l,c]=u.useState([]),[d,p]=u.useState(0),[f,v]=u.useState({}),[k,m]=u.useState(null),[w,g]=u.useState(null),[A,C]=u.useState("monitoring"),[h,x]=u.useState(""),[y,T]=u.useState(null),[R,U]=u.useState(!0);if(u.useEffect(()=>{const N=async()=>{try{const[B,F,V,j]=await Promise.all([L.get("/api/envelo/stats").catch(()=>({data:null})),L.get("/api/envelo/admin/sessions").catch(()=>({data:{sessions:[]}})),L.get("/api/certificates/").catch(()=>({data:[]})),L.get("/api/applications/").catch(()=>({data:[]}))]);a(B.data),i(F.data.sessions||[]),s(V.data||[]),c(j.data.applications||j.data||[])}catch(B){console.error(B)}U(!1)};N();const _=setInterval(N,3e4);return()=>clearInterval(_)},[]),R)return e.jsx("div",{style:{color:"rgba(255,255,255,.50)",padding:"clamp(16px, 4vw, 40px)",textAlign:"center"},children:e.jsx(Ie,{size:24,style:{animation:"spin 1s linear infinite"}})});const I=o.filter(N=>N.status==="active"),P=o.reduce((N,_)=>N+(_.block_count||0),0),z=r.filter(N=>N.state==="conformant"||N.state==="active"||N.state==="issued"),D=l.filter(N=>N.state==="approved"||N.state==="testing"),M=N=>{const _=ci({apiEndpoint:Le,apiKey:"YOUR_API_KEY",certificateNumber:N.certificate_number,systemName:N.system_name||"Unknown",organizationName:N.organization_name||"Unknown"}),B=new Blob([_],{type:"text/plain"}),F=URL.createObjectURL(B),V=document.createElement("a");V.href=F,V.download=`envelo_agent_${N.certificate_number}.py`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(F)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ne,{label:" Admin Console",title:"ENVELO Management",description:"Monitor, configure, and manage all customer systems"}),e.jsx("div",{style:{display:"flex",gap:"8px",borderBottom:"1px solid rgba(255,255,255,.07)",paddingBottom:"16px",overflowX:"auto",WebkitOverflowScrolling:"touch"},children:[{id:"monitoring",label:"Live Monitoring"},{id:"customers",label:"Customer Systems"},{id:"review",label:"Review Boundaries"}].map(N=>e.jsx("button",{onClick:()=>C(N.id),className:"btn",children:N.label},N.id))}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))"},children:[e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"12px"},children:"Active Sessions"}),e.jsx("p",{style:{fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,color:"#5CD685"},children:I.length})]}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"12px"},children:"Attested Systems"}),e.jsx("p",{style:{fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,color:"#a896d6"},children:z.length})]}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"12px"},children:"CAT-72 In Progress"}),e.jsx("p",{style:{fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,color:"#D6A05C"},children:D.length})]}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"12px"},children:"Violations (Total)"}),e.jsx("p",{style:{fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,color:P>0?"#D65C5C":"#5CD685"},children:P})]})]}),A==="monitoring"&&e.jsxs(e.Fragment,{children:[e.jsxs(Z,{glow:!0,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"20px"},children:[e.jsx("div",{className:"hud-label",children:"Active Sessions"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 12px",background:"transparent"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#5CD685",boxShadow:"0 0 8px #5CD685",animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"#5CD685",textTransform:"uppercase"},children:"Live"})]})]}),o.length>0?e.jsx("div",{className:"table-scroll",style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Certificate"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Status"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Pass"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Block"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Actions"})]})}),e.jsx("tbody",{children:o.map((N,_)=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("td",{style:{padding:"16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"#a896d6"},children:N.certificate_id||"N/A"}),e.jsx("td",{style:{padding:"16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:N.status==="active"?"#5CD685":"rgba(255,255,255,.50)",boxShadow:N.status==="active"?"0 0 8px #5CD685":"none"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",textTransform:"uppercase",color:N.status==="active"?"#5CD685":"rgba(255,255,255,.50)"},children:N.status})]})}),e.jsx("td",{style:{padding:"16px",color:"#5CD685"},children:N.pass_count||0}),e.jsx("td",{style:{padding:"16px",color:(N.block_count||0)>0?"#D65C5C":"rgba(255,255,255,.50)"},children:N.block_count||0}),e.jsx("td",{style:{padding:"16px"},children:e.jsx("button",{onClick:()=>m(N),style:{padding:"6px 12px",background:"transparent",border:"1px solid #a896d6",color:"#a896d6",fontSize:"11px",cursor:"pointer"},children:"View Details"})})]},_))})]})}):e.jsx("p",{style:{color:"rgba(255,255,255,.50)",textAlign:"center",padding:"clamp(16px, 4vw, 40px)"},children:"No sessions found."})]}),k&&e.jsxs(Z,{accent:"purple",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"20px"},children:[e.jsxs("div",{className:"hud-label",children:["Session: ",(b=k.session_id)==null?void 0:b.substring(0,16),"..."]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:async()=>{try{const N=await L.get(`/api/envelo/admin/sessions/${k.id}/report`,{responseType:"blob"}),_=window.URL.createObjectURL(new Blob([N.data])),B=document.createElement("a");B.href=_,B.download=`CAT72-Report-${k.session_id}.pdf`,B.click()}catch(N){t.show("Failed: "+N.message,"error")}},style:{padding:"8px 16px",background:"#5B4B8A",border:"none",color:"rgba(255,255,255,.94)",fontSize:"11px",cursor:"pointer"},children:"Download Report"}),e.jsx("button",{onClick:()=>m(null),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.50)",cursor:"pointer",fontSize:"11px"},children:" Close"})]})]}),e.jsx(hl,{session:k}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(yl,{sessionId:k.id})})]})]}),A==="customers"&&e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"20px"},children:"Attested Systems"}),z.length>0?e.jsx("div",{className:"space-y-4",children:z.map(N=>e.jsx("div",{style:{padding:"20px",background:"transparent",border:"1px solid rgba(255,255,255,.07)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:500,color:"rgba(255,255,255,.94)",margin:"0 0 4px 0"},children:N.system_name||"Unnamed"}),e.jsx("p",{style:{fontSize:"13px",color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:N.organization_name}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"#a896d6"},children:N.certificate_number})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>{T(N),C("review")},style:{padding:"8px 16px",background:"transparent",border:"1px solid #a896d6",color:"#a896d6",fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx($e,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:12})," Review Boundaries"]}),e.jsx("span",{style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.06)",color:"#5CD685",fontSize:"11px",display:"flex",alignItems:"center",gap:"6px"},children:" Auto-provisioned on Approve"}),e.jsxs("button",{onClick:()=>M(N),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.78)",fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(qe,{size:12})," Download Only"]})]})]})},N.id))}):e.jsx("p",{style:{color:"rgba(255,255,255,.50)",textAlign:"center",padding:"24px"},children:"No attested systems yet."})]}),D.length>0&&e.jsxs(Z,{accent:"amber",children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"2px",textTransform:"uppercase",color:"#D6A05C",marginBottom:"20px"},children:"CAT-72 Testing In Progress"}),e.jsx("div",{className:"space-y-4",children:D.map(N=>e.jsx("div",{style:{padding:"16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",color:"rgba(255,255,255,.94)",marginBottom:"4px"},children:N.system_name}),e.jsx("p",{style:{fontSize:"12px",color:"rgba(255,255,255,.78)"},children:N.organization_name})]}),e.jsx("span",{className:"btn",children:N.cat72_started?"In Progress":"Ready"})]})},N.id))})]}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"API Key Management"}),e.jsx(_l,{})]})]}),A==="review"&&e.jsx(e.Fragment,{children:y?(()=>{const N=y.envelope_definition||{},_=N.numeric_boundaries||[],B=N.geographic_boundaries||[],F=N.time_boundaries||[],V=N.state_boundaries||[],j=_.length+B.length+F.length+V.length>0;return e.jsxs(Z,{glow:!0,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"2px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"Boundary Review  Read Only"}),e.jsx("h2",{style:{fontSize:"clamp(18px, 4vw, 24px)",fontWeight:200,margin:"0 0 4px 0"},children:y.system_name}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)"},children:[y.organization_name,"  ",y.certificate_number]})]}),e.jsx("button",{onClick:()=>T(null),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.50)",cursor:"pointer",fontSize:"11px"},children:" Back"})]}),e.jsx("div",{style:{padding:"12px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.10)",marginBottom:"24px"},children:e.jsx("p",{style:{color:"#D6A05C",fontSize:"13px",margin:0},children:" Sentinel Authority does not modify customer boundaries. Review and approve as submitted, or reject with required changes."})}),j?e.jsxs("div",{className:"space-y-6",children:[_.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"hud-label",style:{marginBottom:"12px"},children:["Numeric Boundaries (",_.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:_.map(($,G)=>e.jsxs("div",{style:{padding:"14px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Parameter"}),e.jsx("p",{style:{fontWeight:500,color:"rgba(255,255,255,.94)",fontSize:"14px"},children:$.name||$.parameter||""})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Range"}),e.jsxs("p",{style:{color:"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:[$.min_value??"","  ",$.max_value??""," ",$.unit||""]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Hard Limit"}),e.jsx("p",{style:{color:$.hard_limit?"#D65C5C":"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:$.hard_limit??"None"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Tolerance"}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:["",$.tolerance||0]})]})]},G))})]}),B.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"hud-label",style:{marginBottom:"12px"},children:["Geographic Boundaries (",B.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:B.map(($,G)=>{var Q,ne;return e.jsxs("div",{style:{padding:"14px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Zone"}),e.jsx("p",{style:{fontWeight:500,color:"rgba(255,255,255,.94)",fontSize:"14px"},children:$.name||""})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Type"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"13px"},children:$.boundary_type||"circle"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Center"}),e.jsxs("p",{style:{color:"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:[((Q=$.center)==null?void 0:Q.lat)||$.lat||"",", ",((ne=$.center)==null?void 0:ne.lon)||$.lon||""]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Radius"}),e.jsxs("p",{style:{color:"rgba(255,255,255,.78)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:[$.radius_meters||"","m"]})]})]},G)})})]}),F.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"hud-label",style:{marginBottom:"12px"},children:["Time Boundaries (",F.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:F.map(($,G)=>e.jsxs("div",{style:{padding:"14px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"16px",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Schedule"}),e.jsx("p",{style:{fontWeight:500,color:"rgba(255,255,255,.94)",fontSize:"14px"},children:$.name||""})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Hours"}),e.jsxs("p",{style:{color:"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:[$.allowed_hours_start??$.start_hour??0,":00  ",$.allowed_hours_end??$.end_hour??24,":00 ",$.timezone||"UTC"]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Days"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px"},children:($.allowed_days||$.days||[]).map(Q=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][Q]||Q).join(", ")||"All"})]})]},G))})]}),V.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"hud-label",style:{marginBottom:"12px"},children:["State Boundaries (",V.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:V.map(($,G)=>e.jsxs("div",{style:{padding:"14px 16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"16px",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Parameter"}),e.jsx("p",{style:{fontWeight:500,color:"rgba(255,255,255,.94)",fontSize:"14px"},children:$.name||$.parameter||""})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Allowed"}),e.jsx("p",{style:{color:"#5CD685",fontSize:"12px"},children:($.allowed_values||[]).join(", ")||""})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginBottom:"2px"},children:"Forbidden"}),e.jsx("p",{style:{color:"#D65C5C",fontSize:"12px"},children:($.forbidden_values||[]).join(", ")||""})]})]},G))})]})]}):e.jsx("p",{style:{color:"rgba(255,255,255,.50)",textAlign:"center",padding:"clamp(16px, 4vw, 40px)"},children:"No boundaries defined in this application."}),e.jsxs("div",{style:{marginTop:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Review Decision"}),e.jsx("textarea",{value:h,onChange:$=>x($.target.value),placeholder:"Review notes (required for rejection, optional for approval)...",style:{width:"100%",minHeight:"80px",padding:"12px 16px",background:"rgba(255,255,255,.05)",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",fontSize:"13px",fontFamily:"Georgia, 'Source Serif 4', serif",resize:"vertical"}}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[e.jsx("button",{onClick:async()=>{var $,G;try{await L.post(`/api/applications/${y.application_id||"unknown"}/comments`,{content:"[BOUNDARY REVIEW  APPROVED] "+(h||"Boundaries approved as submitted."),is_internal:!1}),t.show("Boundaries approved as submitted","success"),T(null),x("")}catch(Q){t.show("Failed: "+(((G=($=Q.response)==null?void 0:$.data)==null?void 0:G.detail)||Q.message),"error")}},className:"btn",children:" Approve Boundaries"}),e.jsx("button",{onClick:async()=>{var $,G;if(!h.trim()){t.show("Rejection requires specific feedback on what must change","error");return}try{await L.post(`/api/applications/${y.application_id||"unknown"}/comments`,{content:"[BOUNDARY REVIEW  CHANGES REQUIRED] "+h,is_internal:!1}),t.show("Sent back to applicant with required changes","success"),T(null),x("")}catch(Q){t.show("Failed: "+(((G=($=Q.response)==null?void 0:$.data)==null?void 0:G.detail)||Q.message),"error")}},className:"btn",children:" Reject  Require Changes"})]})]})]})})():e.jsx(Z,{children:e.jsxs("div",{style:{textAlign:"center",padding:"clamp(24px, 5vw, 60px) clamp(12px, 3vw, 20px)"},children:[e.jsx($e,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:48,style:{color:"rgba(255,255,255,.50)",margin:"0 auto 16px"}}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:200,marginBottom:"8px"},children:"Select a System to Review"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"24px"},children:"Choose a system from the Customer Systems tab to review its submitted boundaries."}),e.jsx("button",{onClick:()=>C("customers"),className:"btn",children:"View Customer Systems"})]})})})]})}function vl(){var _;const[t,n]=u.useState(null),[a,o]=u.useState(!1),[i,r]=u.useState([]),[s,l]=u.useState([]),[c,d]=u.useState([]),[p,f]=u.useState([]),[v,k]=u.useState(!0),[m,w]=u.useState(!1),[g,A]=u.useState(!1),C=ve(),{user:h}=de();u.useEffect(()=>{(async()=>{try{const[F,V,j,$]=await Promise.all([L.get("/api/certificates/").catch(()=>({data:[]})),L.get("/api/applications/").catch(()=>({data:[]})),L.get("/api/envelo/sessions").catch(()=>({data:{sessions:[]}})),L.get("/api/apikeys/").catch(()=>({data:[]}))]);r(F.data||[]),l(V.data||[]),d(j.data.sessions||[]),f($.data||[])}catch(F){console.error(F)}k(!1)})()},[]);const x=(Array.isArray(i)?i:[]).filter(B=>B.state==="conformant"||B.state==="active"||B.state==="issued"),y=(Array.isArray(s)?s:[]).filter(B=>B.state==="approved"||B.state==="testing"),T=[...y,...x],R=x.length>0||y.length>0,U=c.filter(B=>B.status==="active"),I=U.length>0,P=async()=>{var B,F,V;o(!0);try{const j=T[0],$=(j==null?void 0:j.certificate_id)||null,G="deploy-"+new Date().toISOString().split("T")[0],Q=await L.post("/api/apikeys/generate",{name:G,certificate_id:$});(B=Q.data)!=null&&B.key&&n(Q.data.key)}catch(j){C.show("Failed to generate key: "+(((V=(F=j.response)==null?void 0:F.data)==null?void 0:V.detail)||j.message),"error")}o(!1)},z=()=>{const B=T[0];return(B==null?void 0:B.certificate_number)||(B==null?void 0:B.application_number)||"PENDING"},D=()=>t?'curl -sSL "'+Le+"/api/deploy/"+z()+"?key="+t+'" | bash':null,M=()=>{const B=D();B&&(navigator.clipboard.writeText(B),w(!0),setTimeout(()=>w(!1),3e3))};if(v)return e.jsx("div",{style:{color:"rgba(255,255,255,.50)",padding:"clamp(16px, 4vw, 40px)",textAlign:"center"},children:e.jsx(Ie,{size:24,style:{animation:"spin 1s linear infinite"}})});if(!R)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ne,{label:"ENVELO Interlock",title:"Application Required"}),e.jsx(Z,{children:e.jsxs("div",{style:{textAlign:"center",padding:"clamp(24px, 5vw, 60px) clamp(12px, 3vw, 20px)"},children:[e.jsx($e,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:48,style:{color:"rgba(255,255,255,.50)",margin:"0 auto 16px"}}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(18px, 4vw, 24px)",fontWeight:200,marginBottom:"12px"},children:"Pending Approval"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",maxWidth:"min(400px, 90vw)",margin:"0 auto"},children:"Your application is being reviewed. Once approved, you'll deploy the ENVELO agent with a single command."})]})})]});if(I)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ne,{label:"ENVELO Interlock",title:"Active",description:"Your agent is connected and enforcing boundaries"}),x.map(B=>{const F=c.find(j=>j.certificate_id===B.certificate_number),V=F&&F.status==="active";return e.jsxs(Z,{glow:V,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:500,color:"rgba(255,255,255,.94)",margin:"0 0 8px 0"},children:B.system_name||"System"}),e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:"#a896d6",marginBottom:"4px"},children:B.certificate_number}),e.jsx("p",{style:{fontSize:"12px",color:"rgba(255,255,255,.50)"},children:"Attested "+(B.issued_at?new Date(B.issued_at).toLocaleDateString():"N/A")})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"transparent"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#5CD685",animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",textTransform:"uppercase",color:"#5CD685"},children:"ENVELO Active"})]})]}),F&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.07)"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"#5CD685"},children:F.uptime||"0h"}),e.jsx("div",{className:"hud-label",children:"Uptime"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"#a896d6"},children:F.record_count||0}),e.jsx("div",{className:"hud-label",children:"Telemetry"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:(F.violations||0)>0?"#D65C5C":"#5CD685"},children:F.violations||0}),e.jsx("div",{className:"hud-label",children:"Violations"})]})]})]},B.id)}),y.filter(B=>!x.some(F=>F.application_id===B.id)).map(B=>{const F=U[0];return e.jsxs(Z,{glow:!0,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:500,color:"rgba(255,255,255,.94)",margin:"0 0 4px 0"},children:B.system_name}),e.jsxs("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:"#D6A05C"},children:[B.application_number,"  CAT-72 Testing"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"transparent"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#5CD685",animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",textTransform:"uppercase",color:"#5CD685"},children:"ENVELO Active"})]})]}),F&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.07)"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"#5CD685"},children:F.pass_count||0}),e.jsx("div",{className:"hud-label",children:"Passed"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:(F.block_count||0)>0?"#D65C5C":"#5CD685"},children:F.block_count||0}),e.jsx("div",{className:"hud-label",children:"Blocked"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,color:"#a896d6"},children:(F.pass_count||0)+(F.block_count||0)}),e.jsx("div",{className:"hud-label",children:"Total"})]})]})]},B.id)}),e.jsxs(Z,{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:"Agent Control"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("button",{onClick:async()=>{var B,F;if(confirm("Stop the ENVELO agent? It will shut down within 30 seconds."))try{const V=await L.get("/api/apikeys/");for(const j of V.data||[])await L.delete(`/api/apikeys/${j.id}`);C.show("Agent will stop within 30 seconds","success"),setTimeout(()=>window.location.reload(),3e3)}catch(V){C.show("Failed: "+(((F=(B=V.response)==null?void 0:B.data)==null?void 0:F.detail)||V.message),"error")}},style:{padding:"16px",background:"transparent",border:"1px solid rgba(255,255,255,.10)",cursor:"pointer",textAlign:"left"},children:[e.jsx("p",{style:{fontWeight:500,color:"#D65C5C",marginBottom:"4px",fontSize:"14px"},children:" Stop Agent"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",margin:0},children:"Revokes API key. Agent shuts down within 30s."})]}),e.jsxs("button",{onClick:async()=>{var B,F;if(confirm("Redeploy? This revokes your current key and generates a new deploy command."))try{const V=await L.get("/api/apikeys/");for(const j of V.data||[])await L.delete(`/api/apikeys/${j.id}`);C.show("Old agent stopping. Generating new deploy...","success"),setTimeout(()=>window.location.reload(),2e3)}catch(V){C.show("Failed: "+(((F=(B=V.response)==null?void 0:B.data)==null?void 0:F.detail)||V.message),"error")}},style:{padding:"16px",background:"transparent",border:"1px solid rgba(91,75,138,0.2)",cursor:"pointer",textAlign:"left"},children:[e.jsx("p",{style:{fontWeight:500,color:"#a896d6",marginBottom:"4px",fontSize:"14px"},children:" Redeploy"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",margin:0},children:"Stop current agent and get a fresh deploy command."})]}),e.jsxs("button",{onClick:async()=>{var B,F;if(confirm("Uninstall ENVELO agent? This revokes all keys and shows cleanup instructions."))try{const V=await L.get("/api/apikeys/");for(const j of V.data||[])await L.delete(`/api/apikeys/${j.id}`);C.show("Keys revoked. Run the cleanup command below.","success"),A(!0)}catch(V){C.show("Failed: "+(((F=(B=V.response)==null?void 0:B.data)==null?void 0:F.detail)||V.message),"error")}},style:{padding:"16px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,.07)",cursor:"pointer",textAlign:"left"},children:[e.jsx("p",{style:{fontWeight:500,color:"rgba(255,255,255,.78)",marginBottom:"4px",fontSize:"14px"},children:" Uninstall"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",margin:0},children:"Remove agent, config, and auto-restart service."})]})]}),g&&e.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"rgba(255,255,255,.05)",border:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:"#D6A05C",marginBottom:"8px"},children:"Paste in terminal to fully remove"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"rgba(255,255,255,.78)",padding:"12px",background:"rgba(255,255,255,.05)",whiteSpace:"pre-wrap",lineHeight:"1.8"},children:`# Stop agent
kill $(cat ~/.envelo/envelo.pid) 2>/dev/null

# Remove systemd service (Linux)
systemctl --user stop envelo.service 2>/dev/null
systemctl --user disable envelo.service 2>/dev/null
rm -f ~/.config/systemd/user/envelo.service

# Remove launchd (macOS)
launchctl unload ~/Library/LaunchAgents/org.sentinelauthority.envelo.plist 2>/dev/null
rm -f ~/Library/LaunchAgents/org.sentinelauthority.envelo.plist

# Remove files
rm -rf ~/.envelo

echo " ENVELO uninstalled"`})]}),e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"transparent"},children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",marginBottom:"8px"},children:"Logs"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:"rgba(255,255,255,.78)",padding:"8px",background:"rgba(255,255,255,.05)"},children:"cat ~/.envelo/envelo.log"})]})]})]});const b=((_=T[0])==null?void 0:_.system_name)||"Your System",N=D();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ne,{label:"ENVELO Interlock",title:"Deploy",description:"Ready to deploy "+b}),e.jsx(Z,{glow:!0,children:e.jsx("div",{style:{textAlign:"center",padding:"clamp(20px, 4vw, 40px) clamp(12px, 3vw, 20px)"},children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"transparent",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#5CD685"}}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"#5CD685",textTransform:"uppercase",letterSpacing:"1px"},children:"Ready to Deploy"})]}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(18px, 4vw, 24px)",fontWeight:200,color:"rgba(255,255,255,.94)",margin:"0 0 8px 0"},children:"Paste in your terminal"})]}),e.jsxs("div",{style:{maxWidth:"min(700px, 95vw)",margin:"0 auto",textAlign:"left"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,.05)",border:"1px solid #a896d6",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",background:"rgba(255,255,255,.05)",borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#ff5f57"}}),e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#febc2e"}}),e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#28c840"}})]}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:"Terminal"}),e.jsx("button",{onClick:M,style:{padding:"4px 16px",background:m?"rgba(92,214,133,0.2)":"#5B4B8A",border:"1px solid "+(m?"#5CD685":"#a896d6"),color:m?"#5CD685":"#fff",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",cursor:"pointer"},children:m?" Copied":"Copy"})]}),e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",lineHeight:"1.6",overflowX:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:[e.jsx("span",{style:{color:"#5CD685"},children:"$"})," ",e.jsx("span",{style:{color:"rgba(255,255,255,.94)"},children:N})]})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"transparent",border:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",marginBottom:"12px"},children:"What happens"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",textAlign:"center"},children:[{icon:"",label:"Installs"},{icon:"",label:"Configures"},{icon:"",label:"Starts"},{icon:"",label:"Auto-restarts"}].map((B,F)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",marginBottom:"4px"},children:B.icon}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,.78)"},children:B.label})]},F))})]}),e.jsx("p",{style:{color:"#D6A05C",fontSize:"12px",marginTop:"16px",textAlign:"center"},children:" This command contains your API key. Don't share it."}),e.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:e.jsx("button",{onClick:()=>n(null),style:{background:"transparent",border:"none",color:"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",cursor:"pointer",textDecoration:"underline"},children:"Generate new key"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:56,style:{color:"#a896d6",margin:"0 auto 20px"}}),e.jsx("h2",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:200,marginBottom:"12px",color:"rgba(255,255,255,.94)"},children:"One Command. That's It."}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",maxWidth:"min(440px, 90vw)",margin:"0 auto 32px",lineHeight:"1.6"},children:"Generate your deploy command. Paste it in a terminal. The ENVELO agent installs, configures your approved boundaries, starts running, and auto-restarts on reboot."}),e.jsx("button",{onClick:P,disabled:a,style:{padding:"16px 48px",background:"transparent",border:"1px solid #a896d6",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"14px",letterSpacing:"1px",cursor:a?"wait":"pointer",opacity:a?.7:1,transition:"all 0.2s"},children:a?" Generating...":" Generate Deploy Command"})]})})})]})}function wl(){const{user:t}=de();return(t==null?void 0:t.role)==="admin"?e.jsx(bl,{}):e.jsx(vl,{})}function jl(){var N;const[t,n]=u.useState(null),[a,o]=u.useState([]),[i,r]=u.useState(null),[s,l]=u.useState([]),[c,d]=u.useState(!0),[p,f]=u.useState(!0),[v,k]=u.useState(!1),[m,w]=u.useState(""),[g,A]=u.useState(!1),[C,h]=u.useState(!0),[x,y]=u.useState(!1),{user:T}=de(),R=ve(),U=ke(),I=async()=>{try{const[_,B]=await Promise.all([L.get("/api/envelo/monitoring/overview"),L.get("/api/envelo/monitoring/alerts")]);n(_.data),o(B.data.alerts||[])}catch(_){console.error("Failed to fetch monitoring data:",_)}finally{d(!1)}};u.useEffect(()=>{if(I(),p){const _=setInterval(I,1e4);return()=>clearInterval(_)}},[p]);const P=async _=>{try{const B=await L.get(`/api/envelo/monitoring/session/${_}/timeline?hours=24`);l(B.data.timeline||[])}catch(B){console.error("Failed to fetch timeline:",B)}};u.useEffect(()=>{i&&P(i.session_id)},[i]);const z=()=>{const _=b.map(G=>{var H;const Q=(G.pass_count||0)+(G.block_count||0),ne=Q>0?(G.pass_count/Q*100).toFixed(2):"0.00";return{status:G.is_online?"Online":G.status==="ended"?"Ended":"Offline",organization:G.organization_name||"",system_name:G.system_name||"",certificate:G.certificate_id||"",session_id:G.session_id||"",started_at:G.started_at||"",ended_at:G.ended_at||"",uptime_hours:((H=G.uptime_hours)==null?void 0:H.toFixed(2))||"0",pass_count:G.pass_count||0,block_count:G.block_count||0,total_actions:Q,pass_rate:ne+"%",agent_version:G.agent_version||"",last_activity:G.last_activity||""}});if(_.length===0){R.show("No sessions to export","warning");return}const B=Object.keys(_[0]),F=[B.join(","),..._.map(G=>B.map(Q=>{const ne=String(G[Q]).replace(/"/g,'""');return ne.includes(",")||ne.includes('"')||ne.includes(`
`)?`"${ne}"`:ne}).join(","))].join(`
`),V=new Blob([F],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(V),$=document.createElement("a");$.href=j,$.download=`envelo-sessions-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(j)};if(c)return e.jsxs("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center"},children:[e.jsx(Ie,{size:24,style:{animation:"spin 1s linear infinite",color:"#a896d6"}}),e.jsx("p",{style:{marginTop:"16px",color:"rgba(255,255,255,.78)"},children:"Loading monitoring data..."})]});const D=(t==null?void 0:t.summary)||{},M=(t==null?void 0:t.sessions)||[],b=M.filter(_=>!(!x&&(_.session_type||"production")==="cat72_test"||m&&_.organization_name!==m||g&&!_.is_online||C&&(_.status==="ended"||_.status==="completed"||_.status==="disconnected")));return e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"sa-page-title",style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(20px, 4vw, 28px)",fontWeight:300,margin:0},children:"System Monitoring"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"4px",fontSize:"14px"},children:(T==null?void 0:T.role)==="admin"?"Real-time ENVELO agent status and telemetry":"Track your certified systems' compliance status"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>f(!p),className:"btn",style:{padding:"6px 12px",color:p?"var(--accent-green)":"var(--text-tertiary)",borderColor:p?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Auto-refresh ",p?"ON":"OFF"]}),e.jsxs("button",{onClick:async()=>{k(!0),await I(),setTimeout(()=>k(!1),600)},className:"btn",children:[e.jsx(Ie,{size:14,style:v?{animation:"spin 1s linear infinite"}:{}})," ",v?"Refreshing...":"Refresh"]}),(T==null?void 0:T.role)==="admin"&&e.jsxs("button",{onClick:z,className:"btn",children:[e.jsx(qe,{size:14})," Export CSV"]})]})]}),a.length>0&&e.jsxs("div",{style:{background:"rgba(214, 92, 92, 0.1)",border:"1px solid rgba(255,255,255,.10)",padding:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(We,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,size:18,style:{color:"#D65C5C"}}),e.jsxs("span",{style:{fontWeight:500,color:"#D65C5C"},children:[a.length," Active Alert",a.length>1?"s":""]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.map((_,B)=>{var F;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",background:"transparent",padding:"10px 14px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:_.severity==="critical"?"#D65C5C":"#D6A05C",marginRight:"12px"},children:_.severity}),e.jsx("span",{style:{color:"rgba(255,255,255,.94)"},children:_.message})]}),e.jsxs("span",{style:{color:"rgba(255,255,255,.50)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace"},children:[(F=_.session_id)==null?void 0:F.slice(0,8),"..."]})]},B)})})]}),(()=>{var Q,ne,H;const _=M.filter(J=>J.is_online).length,B=M.filter(J=>!J.is_online&&J.status!=="ended").length,F=_+B,V=F>0?_/F*100:0,j={padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.04)"},$={fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"2px",color:"rgba(255,255,255,.50)",marginBottom:"8px"},G={fontSize:"12px",color:"rgba(255,255,255,.78)",marginTop:"4px"};return e.jsxs("div",{style:{marginBottom:"32px"},children:[F>0&&e.jsxs("div",{style:{marginBottom:"20px",padding:"16px 20px",...j},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"10px"},children:[e.jsx("div",{style:$,children:"Fleet Health"}),e.jsxs("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px",color:V>=90?"#5CD685":V>=70?"#D6A05C":"#D65C5C",fontWeight:500},children:[V.toFixed(0),"% Online"]})]}),e.jsxs("div",{style:{height:"8px",background:"transparent",overflow:"hidden",display:"flex"},children:[_>0&&e.jsx("div",{style:{width:_/F*100+"%",background:"#5CD685",transition:"width 0.5s"}}),B>0&&e.jsx("div",{style:{width:B/F*100+"%",background:"#D65C5C",transition:"width 0.5s"}})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"8px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#5CD685",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#5CD685",display:"inline-block"}})," ",_," online"]}),e.jsxs("span",{style:{fontSize:"11px",color:"#D65C5C",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#D65C5C",display:"inline-block"}})," ",B," offline"]}),e.jsxs("span",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"rgba(255,255,255,.50)",display:"inline-block"}})," ",D.ended||0," ended"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:j,children:[e.jsx("div",{style:$,children:(T==null?void 0:T.role)==="admin"?"Active Sessions":"Active Systems"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:"#5CD685"},children:D.active||0}),e.jsxs("div",{style:G,children:[D.offline||0," offline"]})]}),e.jsxs("div",{style:j,children:[e.jsx("div",{style:$,children:"Total Actions"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:"rgba(255,255,255,.94)"},children:(D.total_actions||0).toLocaleString()}),e.jsxs("div",{style:G,children:[((Q=D.total_pass)==null?void 0:Q.toLocaleString())||0," passed, ",((ne=D.total_block)==null?void 0:ne.toLocaleString())||0," blocked"]})]}),e.jsxs("div",{style:j,children:[e.jsx("div",{style:$,children:"Pass Rate"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:300,color:D.pass_rate>=99?"#5CD685":D.pass_rate>=95?"#D6A05C":"#D65C5C"},children:[((H=D.pass_rate)==null?void 0:H.toFixed(1))||0,"%"]}),e.jsx("div",{style:G,children:"enforcement success"})]}),e.jsxs("div",{style:j,children:[e.jsx("div",{style:$,children:"Violations (24h)"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:(D.total_block||0)>0?"#D65C5C":"#5CD685"},children:(D.total_block||0).toLocaleString()}),e.jsxs("div",{style:G,children:[((D.total_block||0)/Math.max(D.total_actions||1,1)*100).toFixed(2),"% of actions"]})]}),(T==null?void 0:T.role)==="admin"&&e.jsxs("div",{style:j,children:[e.jsx("div",{style:$,children:"Total Sessions"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:"rgba(255,255,255,.94)"},children:D.total||0}),e.jsxs("div",{style:G,children:[D.ended||0," completed"]})]}),(T==null?void 0:T.role)==="admin"&&e.jsxs("div",{style:j,children:[e.jsx("div",{style:$,children:"Unique Systems"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:300,color:"#a896d6"},children:[...new Set(M.map(J=>J.certificate_id).filter(Boolean))].length}),e.jsxs("div",{style:G,children:[[...new Set(M.map(J=>J.organization_name).filter(Boolean))].length," organizations"]})]})]})]})})(),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"16px"},children:(T==null?void 0:T.role)==="admin"?"Agent Sessions":"System Monitoring"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[(T==null?void 0:T.role)==="admin"&&e.jsxs("select",{value:m,onChange:_=>w(_.target.value),style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"6px 10px",color:"rgba(255,255,255,.94)",fontSize:"12px"},children:[e.jsx("option",{value:"",children:"All Customers"}),[...new Set(M.map(_=>_.organization_name).filter(Boolean))].map(_=>e.jsx("option",{value:_,children:_},_))]}),e.jsxs("button",{onClick:()=>h(!C),className:"btn",style:{padding:"4px 10px",color:C?"var(--accent-green)":"var(--text-tertiary)",borderColor:C?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Hide ended ",C?"ON":"OFF"]}),e.jsxs("button",{onClick:()=>A(!g),className:"btn",style:{padding:"4px 10px",color:g?"var(--accent-green)":"var(--text-tertiary)",borderColor:g?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)"},children:["Online only ",g?"ON":"OFF"]}),e.jsxs("button",{onClick:()=>y(!x),className:"btn",style:{padding:"4px 10px",color:x?"#D6A35C":"var(--text-tertiary)",borderColor:x?"rgba(214,163,92,0.2)":"rgba(255,255,255,0.06)"},children:["CAT-72 tests ",x?"ON":"OFF"]})]})]}),b.length===0?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.78)"},children:(T==null?void 0:T.role)==="admin"?"No ENVELO sessions found. Deploy an agent to begin monitoring.":"No active systems. Once your system is ODDC certified and running the ENVELO agent, real-time monitoring data will appear here."}):e.jsx("div",{className:"table-scroll",style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"transparent"},children:(()=>{const _={padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},B={..._,textAlign:"right"};return e.jsxs(e.Fragment,{children:[e.jsx("th",{style:_,children:"Status"}),e.jsx("th",{style:_,children:"Organization"}),e.jsx("th",{style:_,children:"System / Certificate"}),e.jsx("th",{style:_,children:"Session"}),e.jsx("th",{style:_,children:"Uptime"}),e.jsx("th",{style:B,children:"Actions"}),e.jsx("th",{style:B,children:"Pass Rate"}),e.jsx("th",{style:_,children:"Last Activity"})]})})()})}),e.jsx("tbody",{children:b.map(_=>{var j,$;const B=_.pass_count+_.block_count,F=B>0?_.pass_count/B*100:0,V=(i==null?void 0:i.id)===_.id;return e.jsxs("tr",{onClick:()=>r(V?null:_),style:{borderBottom:"1px solid rgba(255,255,255,.07)",cursor:"pointer",background:V?"rgba(91, 75, 138, 0.15)":"transparent",transition:"background 0.15s"},onMouseEnter:G=>{V||(G.currentTarget.style.background="rgba(255,255,255,0.03)")},onMouseLeave:G=>{V||(G.currentTarget.style.background="transparent")},children:[e.jsx("td",{style:{padding:"14px 16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:_.is_online?"#5CD685":_.status==="ended"?"rgba(255,255,255,.50)":"#D65C5C",boxShadow:_.is_online?"0 0 8px #5CD685":"none"}}),e.jsx("span",{style:{fontSize:"11px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:_.is_online?"#5CD685":_.status==="ended"?"rgba(255,255,255,.50)":"#D65C5C"},children:_.is_online?"Online":_.status==="ended"?"Ended":"Offline"})]})}),e.jsx("td",{style:{padding:"14px 16px"},children:e.jsx("div",{style:{fontSize:"13px",color:"rgba(255,255,255,.94)",fontWeight:500},children:_.organization_name||"Unknown"})}),e.jsxs("td",{style:{padding:"14px 16px"},children:[e.jsx("div",{style:{fontSize:"13px",color:"rgba(255,255,255,.94)"},children:_.system_name||"-"}),e.jsx("div",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginTop:"2px"},children:_.certificate_id||"-"})]}),e.jsxs("td",{style:{padding:"14px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[(j=_.session_id)==null?void 0:j.slice(0,12),"..."]}),e.jsxs("td",{style:{padding:"14px 16px",color:"rgba(255,255,255,.78)",fontSize:"13px"},children:[($=_.uptime_hours)==null?void 0:$.toFixed(1),"h"]}),e.jsx("td",{style:{padding:"14px 16px",textAlign:"right",color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:B.toLocaleString()}),e.jsx("td",{style:{padding:"14px 16px",textAlign:"right"},children:e.jsxs("span",{style:{color:F>=99?"#5CD685":F>=95?"#D6A05C":"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"13px"},children:[F.toFixed(1),"%"]})}),e.jsx("td",{style:{padding:"14px 16px",color:"rgba(255,255,255,.50)",fontSize:"12px"},children:_.last_activity?new Date(_.last_activity).toLocaleString():"-"})]},_.id)})})]})})]}),i&&e.jsxs("div",{style:{marginTop:"24px",background:"rgba(255,255,255,.03)",border:"1px solid rgba(255,255,255,.07)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,.07)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{className:"hud-label",style:{marginBottom:"16px"},children:["Session Detail: ",i.session_id]}),e.jsx("button",{onClick:()=>r(null),style:{background:"none",border:"none",color:"rgba(255,255,255,.50)",cursor:"pointer",fontSize:"18px"},children:""})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:400,color:"rgba(255,255,255,.94)"},children:i.organization_name||"Unknown Organization"}),e.jsxs("p",{style:{margin:0,fontSize:"13px",color:"rgba(255,255,255,.78)"},children:[i.system_name||"Unknown System","  ",i.certificate_id||"No certificate"]}),e.jsxs("p",{style:{margin:"4px 0 0",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:["Agent v",i.agent_version||"1.0.0","  Session ",i.session_id]})]}),i.is_online&&e.jsx("button",{onClick:async()=>{if(await U({title:"End Session",message:"Force-end this session?",danger:!0}))try{await L.post("/api/envelo/sessions/"+i.session_id+"/end",{ended_at:new Date().toISOString(),final_stats:{pass_count:i.pass_count,block_count:i.block_count}}),r(null),I()}catch(_){R.show("Failed: "+_.message,"error")}},className:"btn",children:"Force End Session"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Started"}),e.jsx("div",{style:{color:"rgba(255,255,255,.94)",fontSize:"13px"},children:i.started_at?new Date(i.started_at).toLocaleString():"-"})]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Uptime"}),e.jsxs("div",{style:{color:"rgba(255,255,255,.94)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:[((N=i.uptime_hours)==null?void 0:N.toFixed(1))||"0","h"]})]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Passed"}),e.jsx("div",{style:{color:"#5CD685",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:(i.pass_count||0).toLocaleString()})]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Blocked"}),e.jsx("div",{style:{color:"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:(i.block_count||0).toLocaleString()})]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Pass Rate"}),(()=>{const _=(i.pass_count||0)+(i.block_count||0),B=_>0?i.pass_count/_*100:0;return e.jsxs("div",{style:{color:B>=99?"#5CD685":B>=95?"#D6A05C":"#D65C5C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"18px"},children:[B.toFixed(1),"%"]})})()]}),e.jsxs("div",{style:{background:"transparent",padding:"14px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Certificate"}),e.jsx("div",{style:{color:"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px"},children:i.certificate_id||"-"})]})]}),(()=>{const _=(i.pass_count||0)+(i.block_count||0);if(_===0)return null;const B=i.pass_count/_*100;return e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Enforcement Distribution"}),e.jsxs("div",{style:{height:"12px",background:"transparent",overflow:"hidden",display:"flex"},children:[e.jsx("div",{style:{width:B+"%",background:"#5CD685",transition:"width 0.5s"}}),e.jsx("div",{style:{width:100-B+"%",background:"#D65C5C",transition:"width 0.5s"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginTop:"4px",fontSize:"11px"},children:[e.jsxs("span",{style:{color:"#5CD685"},children:["Pass: ",B.toFixed(1),"%"]}),e.jsxs("span",{style:{color:"#D65C5C"},children:["Block: ",(100-B).toFixed(1),"%"]})]})]})})(),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:async()=>{try{const B=(T==null?void 0:T.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",V=(await L.get(B+i.session_id+"/telemetry")).data.records||[];if(V.length===0){R.show("No telemetry data yet","info");return}const j=["timestamp","action_id","action_type","result","execution_time_ms"],$=[j.join(","),...V.map(ne=>j.map(H=>JSON.stringify(ne[H]??"")).join(","))].join(`
`),G=new Blob([$],{type:"text/csv"}),Q=document.createElement("a");Q.href=URL.createObjectURL(G),Q.download=`telemetry-${i.session_id}.csv`,Q.click()}catch{R.show("Failed to download telemetry","error")}},className:"btn",children:" Telemetry CSV"}),e.jsx("button",{onClick:async()=>{try{const B=(T==null?void 0:T.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",V=(await L.get(B+i.session_id+"/violations")).data.violations||[];if(V.length===0){R.show("No violations recorded","info");return}const j=["timestamp","boundary_name","violation_message"],$=[j.join(","),...V.map(ne=>j.map(H=>JSON.stringify(ne[H]??"")).join(","))].join(`
`),G=new Blob([$],{type:"text/csv"}),Q=document.createElement("a");Q.href=URL.createObjectURL(G),Q.download=`violations-${i.session_id}.csv`,Q.click()}catch{R.show("Failed to download violations","error")}},className:"btn",children:" Violations CSV"}),e.jsx("button",{onClick:async()=>{try{const B=(T==null?void 0:T.role)==="admin"?"/api/envelo/admin/sessions/":"/api/envelo/my/sessions/",F=await L.get(B+i.session_id+"/report",{responseType:"blob"}),V=new Blob([F.data],{type:"application/pdf"}),j=document.createElement("a");j.href=URL.createObjectURL(V),j.download=`CAT72-Report-${i.session_id}.pdf`,j.click()}catch{R.show("Failed to download report","error")}},className:"btn",children:" CAT-72 Report PDF"})]}),s.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,.50)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"12px"},children:"24-Hour Activity"}),e.jsx("div",{style:{display:"flex",gap:"2px",height:"60px",alignItems:"flex-end"},children:s.map((_,B)=>{const F=Math.max(...s.map($=>$.total),1),V=_.total/F*100,j=_.total>0?_.pass/_.total:1;return e.jsx("div",{style:{flex:1,height:`${Math.max(V,2)}%`,background:j>=.99?"#5CD685":j>=.95?"#D6A05C":"#D65C5C",opacity:.8},title:`${new Date(_.hour).toLocaleTimeString()}: ${_.total} actions (${_.pass} pass, ${_.block} block)`},B)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"12px",marginTop:"4px",fontSize:"10px",color:"rgba(255,255,255,.50)"},children:[e.jsx("span",{children:"24h ago"}),e.jsx("span",{children:"Now"})]})]})]})]})]})}function Sl(){var D,M;const t=ke(),n=ve(),[a,o]=u.useState([]),[i,r]=u.useState(!0),[s,l]=u.useState(""),[c,d]=u.useState(!1),[p,f]=u.useState(!1),[v,k]=u.useState(null),[m,w]=u.useState({email:"",full_name:"",company:"",role:"applicant"}),[g,A]=u.useState(!1);u.useEffect(()=>{C()},[]);const C=async()=>{try{const b=await L.get("/api/users/");o(b.data||[])}catch(b){console.error("Users API:",b),o([])}r(!1)},h=a.filter(b=>{var N,_,B;return((N=b.email)==null?void 0:N.toLowerCase().includes(s.toLowerCase()))||((_=b.full_name)==null?void 0:_.toLowerCase().includes(s.toLowerCase()))||((B=b.company)==null?void 0:B.toLowerCase().includes(s.toLowerCase()))}),x={total:a.length,admins:a.filter(b=>b.role==="admin").length,applicants:a.filter(b=>b.role==="applicant").length,pending:a.filter(b=>b.role==="pending").length,inactive:a.filter(b=>b.is_active===!1).length},y=async()=>{var b,N;if(!m.email||!m.full_name){n.show("Email and full name are required","warning");return}A(!0);try{const _=Math.random().toString(36).slice(-8)+"A1!";await L.post("/api/users/",{...m,password:_}),n.show("User created  share credentials securely","success"),d(!1),w({email:"",full_name:"",company:"",role:"applicant"}),C()}catch(_){n.show("Failed to create user: "+(((N=(b=_.response)==null?void 0:b.data)==null?void 0:N.detail)||_.message),"error")}A(!1)},T=async(b,N)=>{var _,B;if(await t({title:"Change Role",message:"Change user role to "+N.toUpperCase()+"?"}))try{await L.patch("/api/users/"+b,{role:N}),C(),f(!1)}catch(F){n.show("Failed to update role: "+(((B=(_=F.response)==null?void 0:_.data)==null?void 0:B.detail)||F.message),"error")}},R=async(b,N)=>{var B,F;const _=N?"deactivate":"activate";if(await t({title:_.charAt(0).toUpperCase()+_.slice(1),message:_.charAt(0).toUpperCase()+_.slice(1)+" this user?"}))try{await L.patch("/api/users/"+b,{is_active:!N}),C(),f(!1)}catch(V){n.show("Failed to update user: "+(((F=(B=V.response)==null?void 0:B.data)==null?void 0:F.detail)||V.message),"error")}},U=async(b,N)=>{var _,B;if(await t({title:"Reset Password",message:"Reset password for "+N+"?"}))try{const F=Math.random().toString(36).slice(-8)+"A1!";await L.post("/api/users/"+b+"/reset-password"),n.show("Password reset  share credentials securely","success")}catch(F){n.show("Failed to reset password: "+(((B=(_=F.response)==null?void 0:_.data)==null?void 0:B.detail)||F.message),"error")}},I=async(b,N)=>{var _,B;if(await t({title:"Approve User",message:"Approve "+N+" as an applicant?"}))try{await L.post("/api/users/"+b+"/approve"),C(),f(!1)}catch(F){n.show("Failed to approve: "+(((B=(_=F.response)==null?void 0:_.data)==null?void 0:B.detail)||F.message),"error")}},P=async(b,N)=>{var _,B;if(await t({title:"Reject User",message:"Reject "+N+"? Their account will be deactivated.",danger:!0}))try{await L.post("/api/users/"+b+"/reject"),C(),f(!1)}catch(F){n.show("Failed to reject: "+(((B=(_=F.response)==null?void 0:_.data)==null?void 0:B.detail)||F.message),"error")}},z=async(b,N)=>{var _,B;if(await t({title:"Delete User",message:"DELETE "+N+"? This cannot be undone.",danger:!0,confirmLabel:"Delete"}))try{await L.delete("/api/users/"+b),C(),f(!1)}catch(F){n.show("Failed to delete user: "+(((B=(_=F.response)==null?void 0:_.data)==null?void 0:B.detail)||F.message),"error")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ne,{label:"Administration",title:"User Management",description:"Manage admin and applicant accounts",action:e.jsxs("button",{onClick:()=>d(!0),className:"btn px-4 py-2 flex items-center gap-2",children:[e.jsx(la,{className:"w-4 h-4"})," Invite User"]})}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))"},children:[e.jsx(ge,{label:"Total Users",value:x.total,color:"rgba(255,255,255,.94)"}),e.jsx(ge,{label:"Admins",value:x.admins,color:"#a896d6"}),e.jsx(ge,{label:"Applicants",value:x.applicants,color:"#5CD685"}),e.jsx(ge,{label:"Pending",value:x.pending,color:"#D6A05C"}),e.jsx(ge,{label:"Inactive",value:x.inactive,color:"#D65C5C"})]}),e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wt,{className:"w-5 h-5",style:{color:"rgba(255,255,255,.50)"}}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or company...",value:s,onChange:b=>l(b.target.value),className:"flex-1 px-4 py-3",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",outline:"none"}})]})}),e.jsx(Z,{children:i?e.jsx("div",{style:{color:"rgba(255,255,255,.50)",textAlign:"center",padding:"clamp(16px, 4vw, 40px)"},children:"Loading users..."}):h.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"clamp(24px, 5vw, 60px)"},children:[e.jsx(Kt,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-12 h-12 mx-auto mb-4",style:{color:"rgba(255,255,255,.50)"}}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginBottom:"8px"},children:"No users found"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:a.length===0?"The /api/users/ endpoint may not be configured.":"Try adjusting your search."})]}):e.jsx("div",{className:"space-y-2",children:h.map(b=>{var N,_;return e.jsxs("div",{onClick:()=>{k(b),f(!0)},className:"flex items-center gap-4 p-4 cursor-pointer transition-all",style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center flex-shrink-0",style:{background:"#5B4B8A",color:"rgba(255,255,255,.94)",fontWeight:"400"},children:((N=b.full_name)==null?void 0:N[0])||((_=b.email)==null?void 0:_[0])||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontWeight:"500"},children:b.full_name||"No Name"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px"},children:b.email}),b.company&&e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"12px"},children:b.company})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs",style:{background:b.role==="admin"?"rgba(157,140,207,0.2)":b.role==="pending"?"rgba(245,158,11,0.15)":"rgba(255,255,255,0.1)",color:b.role==="admin"?"#a896d6":b.role==="pending"?"#f59e0b":"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase"},children:b.role}),b.role==="pending"&&e.jsxs("div",{className:"flex gap-1",onClick:B=>B.stopPropagation(),children:[e.jsx("button",{onClick:()=>I(b.id,b.email),className:"btn",style:{padding:"4px 12px",color:"var(--accent-green)"},children:"Approve"}),e.jsx("button",{onClick:()=>P(b.id,b.email),className:"btn",style:{padding:"4px 12px",color:"var(--accent-red)"},children:"Reject"})]}),b.is_active===!1&&e.jsx("span",{className:"px-2 py-1 text-xs",style:{background:"transparent",color:"#D65C5C"},children:"Inactive"})]})]},b.id||b.email)})})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 sa-modal-overlay",children:e.jsxs("div",{className:"w-full max-w-md mx-4 p-6 sa-modal-panel",children:[e.jsx("h2",{style:{color:"rgba(255,255,255,.94)",fontSize:"20px",fontWeight:"400",marginBottom:"24px",textAlign:"center"},children:"Invite New User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px",display:"block",marginBottom:"6px"},children:"Email *"}),e.jsx("input",{type:"email",value:m.email,onChange:b=>w({...m,email:b.target.value}),placeholder:"user@company.com",className:"w-full px-4 py-3",style:{background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px",display:"block",marginBottom:"6px"},children:"Full Name *"}),e.jsx("input",{type:"text",value:m.full_name,onChange:b=>w({...m,full_name:b.target.value}),placeholder:"John Smith",className:"w-full px-4 py-3",style:{background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px",display:"block",marginBottom:"6px"},children:"Company"}),e.jsx("input",{type:"text",value:m.company,onChange:b=>w({...m,company:b.target.value}),placeholder:"Company name",className:"w-full px-4 py-3",style:{background:"transparent",border:"1px solid rgba(255,255,255,.07)",color:"rgba(255,255,255,.94)",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,.78)",fontSize:"12px",display:"block",marginBottom:"6px"},children:"Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>w({...m,role:"applicant"}),className:"btn",style:{padding:"10px 16px",flex:1,justifyContent:"center",color:m.role==="applicant"?"var(--purple-bright)":"var(--text-tertiary)",borderColor:m.role==="applicant"?"rgba(157,140,207,.3)":"rgba(255,255,255,.06)"},children:"Applicant"}),e.jsx("button",{onClick:()=>w({...m,role:"admin"}),className:"btn",style:{padding:"10px 16px",flex:1,justifyContent:"center",color:m.role==="admin"?"var(--purple-bright)":"var(--text-tertiary)",borderColor:m.role==="admin"?"rgba(157,140,207,.3)":"rgba(255,255,255,.06)"},children:"Admin"})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("button",{onClick:y,disabled:g,className:"btn primary",style:{width:"100%",opacity:g?.7:1},children:g?"Creating...":"Create Account"}),e.jsx("button",{onClick:()=>{d(!1),w({email:"",full_name:"",company:"",role:"applicant"})},className:"w-full px-4 py-3",style:{background:"transparent",border:"none",color:"rgba(255,255,255,.50)"},children:"Cancel"})]})]})}),p&&v&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 sa-modal-overlay",children:e.jsxs("div",{className:"w-full max-w-md mx-4 p-6 sa-modal-panel",children:[e.jsx("h2",{style:{color:"rgba(255,255,255,.94)",fontSize:"20px",fontWeight:"400",marginBottom:"24px",textAlign:"center"},children:"Manage User"}),e.jsxs("div",{className:"text-center mb-6 p-4",style:{background:"rgba(255,255,255,0.03)"},children:[e.jsx("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-3 sa-avatar",style:{background:"#5B4B8A",border:"2px solid #9d8ccf",borderRadius:"6px",color:"rgba(255,255,255,.94)",fontSize:"24px",fontWeight:"200",fontFamily:"Georgia, serif"},children:((D=v.full_name)==null?void 0:D[0])||((M=v.email)==null?void 0:M[0])||"?"}),e.jsx("p",{style:{color:"rgba(255,255,255,.94)",fontSize:"18px",fontWeight:"500"},children:v.full_name||"No Name"}),e.jsx("p",{style:{color:"rgba(255,255,255,.50)",fontSize:"14px"},children:v.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",display:"block",marginBottom:"8px"},children:"Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>T(v.id,"applicant"),className:"btn",style:{padding:"10px 16px",flex:1,justifyContent:"center",color:v.role==="applicant"?"var(--purple-bright)":"var(--text-tertiary)",borderColor:v.role==="applicant"?"rgba(157,140,207,.3)":"rgba(255,255,255,.06)"},children:"Applicant"}),e.jsx("button",{onClick:()=>T(v.id,"admin"),className:"btn",style:{padding:"10px 16px",flex:1,justifyContent:"center",color:v.role==="admin"?"var(--purple-bright)":"var(--text-tertiary)",borderColor:v.role==="admin"?"rgba(157,140,207,.3)":"rgba(255,255,255,.06)"},children:"Admin"})]})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("label",{style:{color:"rgba(255,255,255,.50)",fontSize:"11px",letterSpacing:"1px",textTransform:"uppercase",display:"block",marginBottom:"8px"},children:"Actions"}),e.jsxs("button",{onClick:()=>U(v.id,v.email),className:"w-full px-4 py-3 flex items-center gap-3 btn",style:{justifyContent:"flex-start",width:"100%"},children:[e.jsx(Ie,{className:"w-4 h-4",style:{color:"#a896d6"}}),"Reset Password"]}),e.jsx("button",{onClick:()=>R(v.id,v.is_active!==!1),className:"w-full px-4 py-3 flex items-center gap-3 btn",style:{justifyContent:"flex-start",width:"100%",color:v.is_active===!1?"var(--accent-green)":"var(--accent-red)"},children:v.is_active===!1?e.jsxs(e.Fragment,{children:[e.jsx(pn,{fill:"currentColor",fillOpacity:.15,strokeWidth:1.8,className:"w-4 h-4"})," Activate Account"]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"w-4 h-4"})," Deactivate Account"]})}),e.jsxs("button",{onClick:()=>z(v.id,v.email),className:"w-full px-4 py-3 flex items-center gap-3 btn",style:{justifyContent:"flex-start",width:"100%",color:"var(--accent-red)"},children:[e.jsx(Jt,{className:"w-4 h-4"})," Delete User"]})]}),e.jsx("button",{onClick:()=>{f(!1),k(null)},className:"w-full px-4 py-3",style:{background:"transparent",border:"none",color:"rgba(255,255,255,.50)"},children:"Close"})]})})]})}function Cl(){const[t,n]=u.useState([]);return u.useEffect(()=>{L.get("/api/licensees/").then(a=>n(a.data)).catch(console.error)},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"4px",textTransform:"uppercase",color:"#a896d6",marginBottom:"8px"},children:"Partners"}),e.jsx("h1",{style:{fontFamily:"Georgia, 'Source Serif 4', serif",fontSize:"clamp(24px, 5vw, 36px)",fontWeight:200,margin:0},children:"Licensed Implementers"}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",marginTop:"8px"},children:"Authorized ENVELO integrators"})]}),e.jsxs(Z,{children:[e.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{className:"w-full",style:{minWidth:"500px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Company"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left",style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"9px",letterSpacing:"1.5px",textTransform:"uppercase",color:"rgba(255,255,255,.50)",fontWeight:400},children:"Status"})]})}),e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.07)"},children:[e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.94)"},children:a.company_name}),e.jsx("td",{className:"px-4 py-4",style:{color:"rgba(255,255,255,.78)"},children:a.contact_email}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1",style:{background:a.status==="active"?"rgba(92,214,133,0.04)":"rgba(214,160,92,0.04)",color:a.status==="active"?"#5CD685":"#D6A05C",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",letterSpacing:"1px",textTransform:"uppercase"},children:a.status})})]},a.id))})]})}),t.length===0&&e.jsx("div",{className:"text-center py-12",style:{color:"rgba(255,255,255,.50)"},children:"No licensees yet"})]})]})}function kl(){const t=ve(),[n,a]=u.useState([]),[o,i]=u.useState(0),[r,s]=u.useState(!0),[l,c]=u.useState(""),[d,p]=u.useState(""),[f,v]=u.useState(""),[k,m]=u.useState(0),[w,g]=u.useState(""),[A,C]=u.useState(""),[h,x]=u.useState(null),[y,T]=u.useState(!1),[R,U]=u.useState("30"),I=j=>{if(U(j),m(0),j==="all")g(""),C("");else{const $=new Date;$.setDate($.getDate()-parseInt(j)),g($.toISOString().split("T")[0]),C("")}},P=async()=>{T(!0);try{const j=await L.get("/api/audit/verify?limit=5000");x(j.data),t.show(j.data.integrity==="passed"?`Integrity verified  ${j.data.valid} entries valid`:`Integrity check FAILED  ${j.data.invalid} tampered entries`,j.data.integrity==="passed"?"success":"error")}catch{t.show("Verification failed","error")}T(!1)},[z,D]=u.useState([]),[M,b]=u.useState([]),N=50;u.useEffect(()=>{L.get("/api/audit/actions").then(j=>D(j.data.actions||[])).catch(()=>{}),L.get("/api/audit/resource-types").then(j=>b(j.data.resource_types||[])).catch(()=>{})},[]);const _=async()=>{s(!0);try{const j=new URLSearchParams;l&&j.set("action",l),d&&j.set("resource_type",d),f&&j.set("user_email",f),w&&j.set("date_from",new Date(w).toISOString()),A&&j.set("date_to",new Date(A+"T23:59:59").toISOString()),j.set("limit",N),j.set("offset",k*N);const $=await L.get(`/api/audit/logs?${j}`);a($.data.logs||[]),i($.data.total||0)}catch(j){console.error("Failed to load audit logs:",j)}s(!1)},B=async()=>{try{const j=new URLSearchParams;l&&j.set("action",l),d&&j.set("resource_type",d),f&&j.set("user_email",f),w&&j.set("date_from",new Date(w).toISOString()),A&&j.set("date_to",new Date(A+"T23:59:59").toISOString()),j.set("limit",1e4),j.set("offset",0);const G=(await L.get(`/api/audit/logs?${j}`)).data.logs||[];if(G.length===0){t.show("No entries to export","warning");return}const ne=["Timestamp,User,Action,Resource Type,Resource ID,Details,Hash",...G.map(q=>{const W=q.details?Object.entries(q.details).map(([K,O])=>K+"="+O).join("; "):"";return[q.timestamp||"",q.user_email||"",q.action||"",q.resource_type||"",q.resource_id||"",'"'+W.replace(/"/g,'""')+'"',q.log_hash||""].join(",")})].join(`
`),H=new Blob([ne],{type:"text/csv"}),J=URL.createObjectURL(H),S=document.createElement("a");S.href=J,S.download="audit-log-"+new Date().toISOString().split("T")[0]+".csv",S.click(),URL.revokeObjectURL(J),t.show("CSV exported ("+G.length+" entries)","success")}catch{t.show("Export failed","error")}};u.useEffect(()=>{_()},[l,d,f,w,A,k]);const F=j=>j!=null&&j.includes("issued")||j!=null&&j.includes("approved")||j!=null&&j.includes("conformant")?"#5CD685":j!=null&&j.includes("suspended")||j!=null&&j.includes("revoked")||j!=null&&j.includes("failed")?"#D65C5C":j!=null&&j.includes("pending")||j!=null&&j.includes("under_review")?"#D6A05C":"#a896d6",V=Math.ceil(o/N);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ne,{label:"Administration",title:"Activity History"}),e.jsx(Z,{children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("select",{value:l,onChange:j=>{c(j.target.value),m(0)},style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",minWidth:"180px"},children:[e.jsx("option",{value:"",children:"All Actions"}),z.map(j=>e.jsx("option",{value:j,children:j},j))]}),e.jsxs("select",{value:d,onChange:j=>{p(j.target.value),m(0)},style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"All Resources"}),M.map(j=>e.jsx("option",{value:j,children:j},j))]}),e.jsx("input",{value:f,onChange:j=>{v(j.target.value),m(0)},placeholder:"Filter by email...",style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",flex:1,minWidth:"150px"}}),["7","30","90","all"].map(j=>e.jsx("button",{onClick:()=>I(j),style:{padding:"5px 10px",background:R===j?"rgba(168,150,214,0.15)":"transparent",border:`1px solid ${R===j?"rgba(168,150,214,0.4)":"rgba(255,255,255,.07)"}`,color:R===j?"#a896d6":"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"0.5px",transition:"all 0.15s ease"},children:j==="all"?"All":j+"d"},j)),e.jsx("input",{type:"date",value:w,onChange:j=>{g(j.target.value),m(0),U("")},style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",colorScheme:"dark"}}),e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:"to"}),e.jsx("input",{type:"date",value:A,onChange:j=>{C(j.target.value),m(0),U("")},style:{background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",padding:"8px 12px",color:"rgba(255,255,255,.94)",fontSize:"12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",colorScheme:"dark"}}),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[o.toLocaleString()," entries"]}),e.jsx("button",{onClick:B,style:{padding:"6px 14px",background:"rgba(157,140,207,0.12)",border:"1px solid rgba(157,140,207,0.3)",color:"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:"Export CSV"}),e.jsx("button",{onClick:P,disabled:y,style:{padding:"6px 14px",background:h?h.integrity==="passed"?"rgba(92,214,133,0.12)":"rgba(214,92,92,0.12)":"rgba(157,140,207,0.12)",border:"1px solid "+(h?h.integrity==="passed"?"rgba(92,214,133,0.3)":"rgba(214,92,92,0.3)":"rgba(157,140,207,0.3)"),color:h?h.integrity==="passed"?"#5CD685":"#D65C5C":"#a896d6",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:y?"wait":"pointer",letterSpacing:"1px",textTransform:"uppercase"},children:y?"Verifying...":h?h.integrity==="passed"?` ${h.valid} Verified`:` ${h.invalid} Invalid`:" Verify Chain"})]})}),e.jsxs(Z,{noPad:!0,children:[r?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.50)"},children:"Loading..."}):n.length===0?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.50)"},children:"No audit log entries found"}):e.jsx("div",{className:"table-scroll",style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"transparent"},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Timestamp"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"User"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Action"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Resource"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Details"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"10px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",textTransform:"uppercase",letterSpacing:"1px",color:"rgba(255,255,255,.50)"},children:"Hash"})]})}),e.jsx("tbody",{children:n.map(j=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.78)",whiteSpace:"nowrap"},children:j.timestamp?new Date(j.timestamp).toLocaleString():"-"}),e.jsx("td",{style:{padding:"12px 16px",fontSize:"13px",color:"rgba(255,255,255,.94)"},children:j.user_email||"-"}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:F(j.action),letterSpacing:"0.5px"},children:j.action})}),e.jsxs("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)"},children:[j.resource_type,j.resource_id?` #${j.resource_id}`:""]}),e.jsx("td",{style:{padding:"12px 16px",fontSize:"12px",color:"rgba(255,255,255,.50)",maxWidth:"300px"},children:j.details?Object.entries(j.details).filter(([$])=>$!=="old_state").map(([$,G])=>e.jsxs("span",{style:{marginRight:"12px"},children:[e.jsxs("span",{style:{color:"rgba(255,255,255,.50)"},children:[$.replace(/_/g," "),":"]})," ",e.jsx("span",{style:{color:"rgba(255,255,255,.78)"},children:String(G)})]},$)):"-"}),e.jsx("td",{style:{padding:"12px 16px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",letterSpacing:"0.5px"},children:j.log_hash||"-"})]},j.id))})]})}),V>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",padding:"16px",borderTop:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("button",{onClick:()=>m(Math.max(0,k-1)),disabled:k===0,style:{padding:"6px 12px",background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",color:k===0?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",cursor:k===0?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:" Prev"}),e.jsxs("span",{style:{padding:"6px 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.78)"},children:[k+1," / ",V]}),e.jsx("button",{onClick:()=>m(Math.min(V-1,k+1)),disabled:k>=V-1,style:{padding:"6px 12px",background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",color:k>=V-1?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",cursor:k>=V-1?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"Next "})]})]})]})}function zl(){const{user:t}=de(),[n,a]=u.useState([]),[o,i]=u.useState(0),[r,s]=u.useState(!0),[l,c]=u.useState(0),[d,p]=u.useState("30"),f=30,v=()=>{if(d==="all")return"";const g=new Date;return g.setDate(g.getDate()-parseInt(d)),g.toISOString()},k=async()=>{s(!0);try{const g=new URLSearchParams;g.set("limit",f),g.set("offset",l*f);const A=v();A&&g.set("date_from",A);const C=await L.get(`/api/audit/my-logs?${g}`);a(C.data.logs||[]),i(C.data.total||0)}catch(g){console.error("Failed to load activity:",g)}s(!1)};u.useEffect(()=>{k()},[l,d]);const m=g=>g!=null&&g.includes("approved")||g!=null&&g.includes("issued")||g!=null&&g.includes("conformant")?{icon:"",color:"#5CD685"}:g!=null&&g.includes("failed")||g!=null&&g.includes("revoked")||g!=null&&g.includes("suspended")?{icon:"",color:"#D65C5C"}:g!=null&&g.includes("pending")||g!=null&&g.includes("under_review")?{icon:"",color:"#D6A05C"}:{icon:"",color:"#a896d6"},w=Math.ceil(o/f);return e.jsxs("div",{className:"space-y-6",style:{maxWidth:"min(800px, 95vw)",margin:"0 auto"},children:[e.jsx(Ne,{label:"Account",title:"My Activity"}),e.jsxs(Z,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px",marginBottom:"16px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.50)",letterSpacing:"1px",textTransform:"uppercase"},children:"Activity Log"}),e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[["7","30","90","all"].map(g=>e.jsx("button",{onClick:()=>{p(g),c(0)},style:{padding:"4px 10px",background:d===g?"rgba(168,150,214,0.15)":"transparent",border:`1px solid ${d===g?"rgba(168,150,214,0.4)":"rgba(255,255,255,.07)"}`,color:d===g?"#a896d6":"rgba(255,255,255,.50)",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",cursor:"pointer",letterSpacing:"0.5px",transition:"all 0.15s ease"},children:g==="all"?"All":g+"d"},g)),e.jsxs("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",marginLeft:"8px"},children:[o," entries"]})]})]}),r?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.50)"},children:"Loading..."}):n.length===0?e.jsx("div",{style:{padding:"clamp(16px, 4vw, 40px)",textAlign:"center",color:"rgba(255,255,255,.50)"},children:"No activity yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:n.map(g=>{var C;const A=m(g.action);return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px",background:"rgba(255,255,255,0.01)",borderBottom:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:`${A.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginTop:"2px"},children:e.jsx("span",{style:{color:A.color,fontSize:"13px",fontWeight:"bold"},children:A.icon})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"12px",color:A.color,letterSpacing:"0.5px"},children:(C=g.action)==null?void 0:C.replace(/_/g," ")}),e.jsx("span",{style:{fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"10px",color:"rgba(255,255,255,.50)",whiteSpace:"nowrap"},children:g.timestamp?new Date(g.timestamp).toLocaleString():""})]}),e.jsxs("div",{style:{fontSize:"12px",color:"rgba(255,255,255,.78)"},children:[g.resource_type,g.resource_id?` #${g.resource_id}`:"",g.details&&Object.keys(g.details).length>0&&e.jsx("span",{style:{color:"rgba(255,255,255,.50)",marginLeft:"8px"},children:Object.entries(g.details).filter(([h])=>h!=="old_state").slice(0,3).map(([h,x])=>`${h.replace(/_/g," ")}: ${x}`).join("  ")})]})]})]},g.id)})}),w>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",paddingTop:"16px",marginTop:"16px",borderTop:"1px solid rgba(255,255,255,.04)"},children:[e.jsx("button",{onClick:()=>c(Math.max(0,l-1)),disabled:l===0,style:{padding:"6px 12px",background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",color:l===0?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",cursor:l===0?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"\\u2190 Prev"}),e.jsxs("span",{style:{padding:"6px 12px",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px",color:"rgba(255,255,255,.78)"},children:[l+1," / ",w]}),e.jsx("button",{onClick:()=>c(Math.min(w-1,l+1)),disabled:l>=w-1,style:{padding:"6px 12px",background:"#2a2f3d",border:"1px solid rgba(255,255,255,.07)",color:l>=w-1?"rgba(255,255,255,.50)":"rgba(255,255,255,.94)",cursor:l>=w-1?"not-allowed":"pointer",fontFamily:"Consolas, 'IBM Plex Mono', monospace",fontSize:"11px"},children:"Next \\u2192"})]})]})]})}function Al(){const{user:t}=de();ke();const n=ve(),[a,o]=u.useState(null),[i,r]=u.useState(!1),[s,l]=u.useState(!1),[c,d]=u.useState({full_name:(t==null?void 0:t.full_name)||"",organization:(t==null?void 0:t.organization)||""}),[p,f]=u.useState(!1),[v,k]=u.useState({current:"",new_pw:"",confirm:""}),[m,w]=u.useState(!1),[g,A]=u.useState(""),[C,h]=u.useState({enabled:!1,loading:!0,setup:null,code:"",verifying:!1,disablePw:"",disabling:!1});u.useEffect(()=>{L.get("/api/auth/me").then(M=>{h(b=>({...b,enabled:M.data.totp_enabled||!1,loading:!1}))}).catch(()=>h(M=>({...M,loading:!1})))},[]);const x=async()=>{var M,b;try{const N=await L.post("/api/auth/2fa/setup");h(_=>({..._,setup:N.data}))}catch(N){n.show("Setup failed: "+(((b=(M=N.response)==null?void 0:M.data)==null?void 0:b.detail)||N.message),"error")}},y=async()=>{var M,b;h(N=>({...N,verifying:!0}));try{const N=await L.post("/api/auth/2fa/enable",{code:C.code});n.show("Two-factor authentication enabled","success"),h(_=>({..._,enabled:!0,setup:null,code:"",verifying:!1,backupCodes:N.data.backup_codes||[]}))}catch(N){n.show(((b=(M=N.response)==null?void 0:M.data)==null?void 0:b.detail)||"Invalid code","error"),h(_=>({..._,verifying:!1}))}},T=async()=>{var M,b;h(N=>({...N,disabling:!0}));try{await L.post("/api/auth/2fa/disable",{current_password:C.disablePw}),n.show("Two-factor authentication disabled","success"),h(N=>({...N,enabled:!1,disablePw:"",disabling:!1}))}catch(N){n.show(((b=(M=N.response)==null?void 0:M.data)==null?void 0:b.detail)||"Failed","error"),h(_=>({..._,disabling:!1}))}},R=async()=>{var M,b;f(!0);try{const N=await L.put("/api/auth/profile",c);n.show("Profile updated","success"),N.data.user&&window.location.reload()}catch(N){n.show("Failed to update profile: "+(((b=(M=N.response)==null?void 0:M.data)==null?void 0:b.detail)||N.message),"error")}f(!1)},U=async()=>{var M,b;if(A(""),v.current===""||v.new_pw===""||v.confirm===""){A("All fields required");return}if(v.new_pw!==v.confirm){A("Passwords do not match");return}if(v.new_pw.length<8){A("Min 8 characters");return}w(!0);try{await L.post("/api/auth/change-password",{current_password:v.current,new_password:v.new_pw}),n.show("Password changed successfully","success"),k({current:"",new_pw:"",confirm:""})}catch(N){A(((b=(M=N.response)==null?void 0:M.data)==null?void 0:b.detail)||"Failed to change password")}w(!1)};u.useEffect(()=>{L.get("/api/users/email-preferences").then(M=>o(M.data.preferences||{})).catch(()=>{o({application_updates:!0,test_notifications:!0,certificate_alerts:!0,agent_alerts:!0,marketing:!1})})},[]);const I=M=>{o(b=>({...b,[M]:!b[M]})),l(!1)},P=async()=>{var M,b;r(!0);try{await L.put("/api/users/email-preferences",a),l(!0),setTimeout(()=>l(!1),3e3)}catch(N){n.show("Failed to save: "+(((b=(M=N.response)==null?void 0:M.data)==null?void 0:b.detail)||N.message),"error")}r(!1)},z=[{key:"application_updates",label:"Application Updates",desc:"Submission confirmations, review status changes, approval notifications"},{key:"test_notifications",label:"CAT-72 Test Notifications",desc:"Test scheduled, started, passed, and failed alerts"},{key:"certificate_alerts",label:"Certificate Alerts",desc:"Certificate issued, expiry warnings (30-day / 7-day), expiration notices"},{key:"agent_alerts",label:"ENVELO Interlock Alerts",desc:"Agent offline warnings, high violation rate, suspension alerts"},{key:"marketing",label:"Product Updates",desc:"New features, platform updates, and industry news from Sentinel Authority"}];if(!a)return e.jsx("div",{style:{color:"rgba(255,255,255,.50)",padding:"clamp(16px, 4vw, 40px)",textAlign:"center"},children:"Loading preferences..."});const D=M=>e.jsx("label",{className:"hud-label",style:{display:"block",marginBottom:"6px"},children:M});return e.jsxs("div",{style:{maxWidth:"min(700px, 95vw)",margin:"0 auto"},children:[e.jsx(Ne,{label:"Account",title:"Settings"}),e.jsxs("div",{style:{paddingTop:"32px"},children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"20px"},children:"Account Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",maxWidth:"min(400px, 90vw)"},children:[e.jsxs("div",{children:[D("Full Name"),e.jsx("input",{type:"text",value:c.full_name,onChange:M=>d({...c,full_name:M.target.value})})]}),e.jsxs("div",{children:[D("Organization"),e.jsx("input",{type:"text",value:c.organization,onChange:M=>d({...c,organization:M.target.value})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"hud-label",children:"Email"}),e.jsx("div",{style:{color:"rgba(255,255,255,.94)",marginTop:"6px",fontSize:"13px"},children:(t==null?void 0:t.email)||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"hud-label",children:"Role"}),e.jsx("div",{style:{color:"#a896d6",marginTop:"6px",fontFamily:"var(--mono)",fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:(t==null?void 0:t.role)||"-"})]})]}),e.jsx("button",{onClick:R,disabled:p,className:"btn",style:{alignSelf:"flex-start"},children:p?"Saving...":"Save Profile"})]})]}),e.jsx("div",{className:"hud-scanline",style:{margin:"32px 0"}}),e.jsxs("div",{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"20px"},children:"Change Password"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",maxWidth:"min(400px, 90vw)"},children:[e.jsxs("div",{children:[D("Current Password"),e.jsx("input",{type:"password",value:v.current,onChange:M=>k({...v,current:M.target.value})})]}),e.jsxs("div",{children:[D("New Password"),e.jsx("input",{type:"password",value:v.new_pw,onChange:M=>k({...v,new_pw:M.target.value})})]}),e.jsxs("div",{children:[D("Confirm New Password"),e.jsx("input",{type:"password",value:v.confirm,onChange:M=>k({...v,confirm:M.target.value})})]}),g&&e.jsx("div",{style:{color:"var(--accent-red)",fontSize:"12px"},children:g}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:"Min 8 chars, 1 uppercase, 1 lowercase, 1 number"}),e.jsx("button",{onClick:U,disabled:m,className:"btn",style:{alignSelf:"flex-start"},children:m?"Changing...":"Change Password"})]})]}),e.jsx("div",{className:"hud-scanline",style:{margin:"32px 0"}}),e.jsxs("div",{children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"20px"},children:"Two-Factor Authentication"}),C.loading?e.jsx("div",{style:{color:"rgba(255,255,255,.50)",fontSize:"13px"},children:"Loading..."}):C.enabled?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("span",{className:"hud-dot hud-dot-green"}),e.jsx("span",{style:{color:"var(--accent-green)",fontFamily:"var(--mono)",fontSize:"11px",letterSpacing:"2px"},children:"ENABLED"})]}),e.jsx("p",{className:"hud-desc",style:{marginBottom:"12px"},children:"Your account is protected with TOTP two-factor authentication."}),C.backupCodes&&C.backupCodes.length>0&&e.jsxs("div",{className:"hud-frame hud-frame-amber",style:{marginBottom:"16px"},children:[e.jsx("i",{}),e.jsx("div",{className:"hud-label",style:{color:"var(--accent-amber)",marginBottom:"8px"},children:"Save Your Backup Codes"}),e.jsx("p",{className:"hud-desc",style:{marginBottom:"12px"},children:"Use these if you lose your authenticator. Each code works once."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"4px"},children:C.backupCodes.map((M,b)=>e.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"13px",color:"rgba(255,255,255,.94)",padding:"4px 8px",textAlign:"center"},children:M},b))}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(C.backupCodes.join(`
`)),n.show("Backup codes copied")},className:"btn",style:{marginTop:"12px"},children:"Copy All"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",maxWidth:"min(400px, 90vw)"},children:[e.jsx("input",{type:"password",value:C.disablePw,onChange:M=>h(b=>({...b,disablePw:M.target.value})),placeholder:"Enter password to disable",style:{flex:1}}),e.jsx("button",{onClick:T,disabled:C.disabling,className:"btn",style:{color:"var(--accent-red)",whiteSpace:"nowrap"},children:C.disabling?"...":"Disable 2FA"})]})]}):C.setup?e.jsxs("div",{style:{maxWidth:"min(400px, 90vw)"},children:[e.jsx("p",{className:"hud-desc",style:{marginBottom:"16px"},children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, 1Password):"}),C.setup.qr_base64&&e.jsx("div",{style:{textAlign:"center",marginBottom:"16px"},children:e.jsx("img",{src:"data:image/png;base64,"+C.setup.qr_base64,alt:"QR Code",style:{width:"200px",height:"200px"}})}),e.jsxs("div",{style:{marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("div",{className:"hud-label",style:{marginBottom:"6px"},children:"Manual Entry Key"}),e.jsx("div",{style:{fontFamily:"var(--mono)",fontSize:"14px",color:"var(--purple-bright)",letterSpacing:"2px",wordBreak:"break-all"},children:C.setup.secret})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:C.code,onChange:M=>h(b=>({...b,code:M.target.value.replace(/\D/g,"").slice(0,6)})),placeholder:"6-digit code",maxLength:6,style:{flex:1,fontSize:"18px",letterSpacing:"6px",textAlign:"center"}}),e.jsx("button",{onClick:y,disabled:C.verifying||C.code.length!==6,className:"btn primary",children:C.verifying?"...":"Verify"})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"hud-desc",style:{marginBottom:"16px"},children:"Add an extra layer of security by requiring a code from your authenticator app when signing in."}),e.jsx("button",{onClick:x,className:"btn primary",children:"Enable 2FA"})]})]}),e.jsx("div",{className:"hud-scanline",style:{margin:"32px 0"}}),e.jsxs("div",{style:{paddingBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginBottom:"20px"},children:[e.jsx("div",{className:"hud-label",children:"Email Notifications"}),e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:"from notifications@sentinelauthority.org"})]}),e.jsx("div",{children:z.map(M=>e.jsxs("div",{className:"hud-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",padding:"16px 0"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"rgba(255,255,255,.94)",fontSize:"14px",marginBottom:"4px"},children:M.label}),e.jsx("div",{style:{color:"rgba(255,255,255,.50)",fontSize:"12px",lineHeight:"1.5"},children:M.desc})]}),e.jsx("button",{onClick:()=>I(M.key),className:"btn",style:{padding:"6px 16px",color:a[M.key]?"var(--accent-green)":"var(--text-tertiary)",borderColor:a[M.key]?"rgba(92,214,133,0.2)":"rgba(255,255,255,0.06)",minWidth:"56px",justifyContent:"center"},children:a[M.key]?"ON":"OFF"})]},M.key))}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px",marginTop:"20px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,.50)"},children:"Admin and security emails are always sent."}),e.jsx("button",{onClick:P,disabled:i,className:"btn primary",style:{color:s?"var(--accent-green)":void 0},children:s?" Saved":i?"Saving...":"Save Preferences"})]})]})]})}const Tl="goldenticket";function Bl(){const[t,n]=u.useState(!1),[a,o]=u.useState(""),[i,r]=u.useState(""),s=v=>{v.preventDefault(),a===Tl?(n(!0),r("")):r("Invalid password")},l="Consolas, 'IBM Plex Mono', monospace",c="Georgia, 'Source Serif 4', serif",d="rgba(255,255,255,.94)",p="rgba(255,255,255,.50)",f="#a896d6";return t?e.jsx("div",{style:{width:"100%",height:"calc(100vh - 80px)"},children:e.jsx("iframe",{src:`${vn}/internal-docs`,style:{width:"100%",height:"100%",border:"none"},title:"API Documentation"})}):e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsxs("div",{style:{maxWidth:"min(420px, 90vw)",width:"100%"},children:[e.jsx("div",{style:{fontFamily:l,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:p,marginBottom:"16px"},children:"Documentation"}),e.jsxs("h2",{style:{fontFamily:c,fontSize:"clamp(28px, 4vw, 44px)",fontWeight:200,letterSpacing:"-0.03em",lineHeight:1.1,color:d,margin:"0 0 12px"},children:["API ",e.jsx("span",{style:{color:f,fontStyle:"italic"},children:"Reference"})]}),e.jsx("p",{style:{color:"rgba(255,255,255,.78)",fontWeight:200,lineHeight:1.75,fontSize:"15px",margin:"0 0 40px"},children:"Enter the documentation password to access the full API reference."}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.04)",paddingTop:"28px"},children:[e.jsx("label",{style:{display:"block",fontFamily:l,fontSize:"9px",letterSpacing:"2px",textTransform:"uppercase",color:p,marginBottom:"12px"},children:"Password"}),e.jsx("input",{type:"password",value:a,onChange:v=>o(v.target.value),onKeyDown:v=>v.key==="Enter"&&s(v),placeholder:"Enter password",style:{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid rgba(255,255,255,.06)",color:d,fontFamily:l,fontSize:"14px",padding:"10px 0",outline:"none",marginBottom:"28px"}}),i&&e.jsx("p",{style:{color:"rgba(214,92,92,.95)",fontFamily:l,fontSize:"11px",letterSpacing:"1px",marginBottom:"16px"},children:i}),e.jsx("button",{onClick:s,className:"btn primary",style:{width:"100%",justifyContent:"center"},children:"Unlock Docs "})]})]})})}function Nl(){return e.jsx(rs,{children:e.jsx(ko,{children:e.jsx(ss,{children:e.jsx(os,{children:e.jsxs(_o,{children:[e.jsx(le,{path:"/login",element:e.jsx(cs,{})}),e.jsx(le,{path:"/verify",element:e.jsx(gl,{})}),e.jsx(le,{path:"/dashboard",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(us,{})})})}),e.jsx(le,{path:"/applications",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(xs,{})})})}),e.jsx(le,{path:"/applications/new",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(hs,{})})})}),e.jsx(le,{path:"/applications/:id",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(js,{})})})}),e.jsx(le,{path:"/cat72",element:e.jsx(me,{roles:["admin","operator","applicant"],children:e.jsx(ue,{children:e.jsx(Ss,{})})})}),e.jsx(le,{path:"/certificates",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(ks,{})})})}),e.jsx(le,{path:"/pending",element:e.jsx(xl,{})}),e.jsx(le,{path:"/resources",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(fl,{})})})}),e.jsx(le,{path:"/envelo",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(wl,{})})})}),e.jsx(le,{path:"/monitoring",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(jl,{})})})}),e.jsx(le,{path:"/activity",element:e.jsx(me,{roles:["admin"],children:e.jsx(ue,{children:e.jsx(kl,{})})})}),e.jsx(le,{path:"/my-activity",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(zl,{})})})}),e.jsx(le,{path:"/settings",element:e.jsx(me,{children:e.jsx(ue,{children:e.jsx(Al,{})})})}),e.jsx(le,{path:"/api-docs",element:e.jsx(me,{roles:["admin"],children:e.jsx(ue,{children:e.jsx(Bl,{})})})}),e.jsx(le,{path:"/licensees",element:e.jsx(me,{roles:["admin"],children:e.jsx(ue,{children:e.jsx(Cl,{})})})}),e.jsx(le,{path:"/users",element:e.jsx(me,{roles:["admin"],children:e.jsx(ue,{children:e.jsx(Sl,{})})})}),e.jsx(le,{path:"/",element:e.jsx(yt,{to:"/dashboard"})})]})})})})})}Yt.createRoot(document.getElementById("root")).render(e.jsx(xe.StrictMode,{children:e.jsx(Nl,{})}));
