<!DOCTYPE html>
<html lang="en" style="scroll-behavior:smooth;">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-192.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Sentinel Authority — Conformance Certification for Autonomous Systems</title>

  <meta
    name="description"
    content="Sentinel Authority publishes ODDC (ODD Conformance Determination): a voluntary conformance and evidence framework attesting that evidence supports operation within a defined ODD, with ENVELO-compliant enforcement present and auditable."
  />

  <!-- Open Graph / LinkedIn / Slack -->
  <meta property="og:title" content="Sentinel Authority — Conformance Certification for Autonomous Systems" />
  <meta property="og:description" content="Formal attestation that autonomous systems operate within their Operational Design Domain. Proof. Not promises." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sentinelauthority.org/" />
  <meta property="og:image" content="https://sentinelauthority.org/og.webp" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Sentinel Authority — Conformance Certification for Autonomous Systems" />
  <meta name="twitter:description" content="Formal attestation that autonomous systems operate within defined Operational Design Domains. Proof. Not promises." />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://sentinelauthority.org/" />

  <!-- Favicon (purple diamond) -->
<rect x='6' y='6' width='20' height='20' rx='5' fill='%235B4B8A' stroke='%239d8ccf' stroke-width='2'/><circle cx='16' cy='16' r='4' fill='%239d8ccf'/></svg>" />

  <link rel="preload" href="https://fonts.gstatic.com/s/ibmplexmono/v19/-F63fjptAgt5VM-kVkqdyU8n1iIq131nj-otFQ.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Performance: Preload critical fonts -->
    <!-- Georgia is a system font — no preload needed -->
    
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=IBM+Plex+Mono:wght@400;500&display=swap"
    rel="stylesheet"
  />

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Sentinel Authority",
    "url": "https://sentinelauthority.org/",
    "email": "info@sentinelauthority.org",
    "description": "Independent conformance determination for autonomous systems. ODD Conformance Determination (ODDC) with ENVELO enforcement requirements."
  }
  </script>

  <style>
    /* ═══════════════════════════════════════════════════
       INSTITUTIONAL TOKEN SYSTEM — Supreme Court × ISO
       ═══════════════════════════════════════════════════ */
    :root {
      --ink:          #0f1021;
      --accent:       #2a2560;
      --accent-hover: #1d1a3b;
      --bg:           #ffffff;
      --bg-soft:      #f6f7f9;
      --border:       #e6e8ec;
      --muted:        #5c6270;
      --ease:         150ms ease;
      --radius:       6px;

      /* Legacy aliases — keep for backward compat */
      --text-primary:   #0f1021;
      --text-secondary: #5c6270;
    }


    /* Performance optimizations */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    
    [class*="packet"], [class*="pulse"], [class*="flow"], .hero-ring {
      will-change: transform, opacity;
    }
    
    /* Replace expensive box-shadow animations with opacity */

    :root{
      color-scheme: light;
      
      /* Core palette */
      --purple-primary:#2a2560;
      --purple-bright:#2a2560;
      --purple-glow:rgba(42,37,96,.10);
      --bg-deep:#ffffff;
      --bg-panel:rgba(0,0,0,.025);
      --accent-green:#1d8a47;
      --accent-amber:#a67a22;
      --accent-red:#b84444;

      /* Text hierarchy */
      --text-primary:rgba(15,18,30,.88);
      --text-secondary:rgba(15,18,30,.58);
      --text-tertiary:rgba(15,18,30,.38);

      /* Borders */
      --border-glass:rgba(0,0,0,.09);
      --border-subtle:rgba(0,0,0,.05);

      /* Typography */
      --serif:Georgia,'Source Serif 4',serif;
      --mono:Consolas,'IBM Plex Mono',monospace;
      --sans:Calibri,'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;

      /* Timing */
      --ease: cubic-bezier(0.16, 1, 0.3, 1);
      --ease-out: cubic-bezier(0.33, 1, 0.68, 1);
      
      /* Spacing scale (10px base) */
      --space-1: 10px;
      --space-2: 20px;
      --space-3: 20px;
      --space-4: 28px;
      --space-5: 35px;
      --space-6: 40px;
      --space-8: 50px;
      --space-10: 60px;
      --space-12: 120px;
      
      /* Layout */
      --max: 1200px;
      --nav-height: 72px;
    }

    *{ box-sizing:border-box; }
    
    /* Skip link for accessibility */
    .skip-link{
      position:absolute;
      left:-9999px;
      top:auto;
      width:1px;
      height:1px;
      overflow:hidden;
      z-index:999;
    }
    .skip-link:focus{
      position:fixed;
      top:var(--space-1);
      left:var(--space-1);
      width:auto;
      height:auto;
      padding:12px 18px;
      background:var(--bg-deep);
      border:1px solid var(--purple-bright);
      border-radius:8px;
      color:var(--text-primary);
      font-family:var(--mono);
      font-size:11px;
      letter-spacing:2px;
      text-transform:uppercase;
      text-decoration:none;
    }
    
    /* Screen reader only */
    .sr-only{
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;
      border:0;
    }
    
    /* Focus styles for accessibility */
    a:focus-visible, button:focus-visible {
      outline: 2px solid rgba(60,48,100,1.00);
      outline-offset: 3px;
      border-radius: 10px;
    }
    
    html{ scroll-behavior:smooth; background:var(--bg-deep); }
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1200px 700px at 15% 10%, rgba(55,44,90,0.11), transparent 55%),
                  radial-gradient(900px 600px at 85% 80%, rgba(29,138,71,.03), transparent 55%),
                  var(--bg-deep);
      color:var(--text-primary);
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    a{ color:inherit; text-decoration:none; }
    a:hover{ text-decoration:none; filter:brightness(1.3); }
    ::selection { background: var(--accent); color: #fff; }

    /* Subtle grid overlay */
    .grid-overlay{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
      
      opacity:0;
      
      
    }

    /* ============================================
       NAVIGATION
       ============================================ */
    .site-header{
      position:fixed;
      top:0;
      width:100%;
      z-index:50;
      padding:0 var(--space-2, 20px);
      height: var(--nav-height, 72px);
      border-bottom:1px solid rgba(0,0,0,0.09);
      background: rgba(42,47,61,.85);
      -webkit-
      display: flex;
      align-items: center;
    }
    .nav-inner{
      max-width: var(--max, 1200px);
      margin:0 auto;
      width: 100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: var(--space-2, 20px);
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      gap: var(--space-1, 10px);
      flex-shrink: 0;
      text-decoration: none;
      visibility: visible;
      opacity: 1;
    }
    .brand:hover{ text-decoration: none; }
    .brand-mark { display: none; }
    
    @keyframes eye-pulse {
      0%, 100% {
        opacity: .75;
        transform: scale(.98);
        box-shadow: 0 0 0 rgba(196,184,232,0);
      }
      50% {
        opacity: 1;
        transform: scale(1.02);
        box-shadow: 0 0 10px rgba(60,48,100,0.55);
      }
    }
    @media (prefers-reduced-motion: reduce){
      
    }
    .brand-name { display: none; }

    .nav-links{
      display:flex;
      align-items:center;
      gap: 14px;
      flex-wrap: nowrap;
      justify-content:center;
    }
    .nav-links a{
      font-family: var(--mono);
      font-size: 9px;
      letter-spacing: 1.5px;
      color: var(--text-secondary);
      padding: 8px 4px;
      position: relative;
      transition: color .25s ease;
      white-space: nowrap;
    }
    .nav-links a:hover{ color: var(--text-primary); text-decoration:none; filter:brightness(1.3); }
    .nav-links a::after{
      content:none;
    }
    
    /* Active section indicator */
    .nav-links a.active{
      color: var(--text-primary);
      filter:brightness(1.2);
    }

    .nav-badge{
      display:flex;
      align-items:center;
      gap:6px;
      font-family: var(--mono);
      font-size: 8px;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: rgba(140,100,30,1.00);
      text-decoration: none !important;
      border: none;
      background: transparent;
      padding: 6px 0;
      border-radius: 0;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .nav-badge:hover{ text-decoration: none !important; }

    /* Mobile nav toggle */
    .nav-toggle{
      display: none;
      appearance: none;
      border: 1px solid var(--border-glass);
      background: rgba(0,0,0,0.04);
      width: 40px;
      height: 40px;
      border-radius: 0;
      cursor: pointer;
      position: relative;
      transition: border-color .2s ease;
    }
    .nav-toggle:hover{
      border-color: rgba(60,48,100,0.75);
      background: transparent;
    }
    .nav-toggle span{
      position: absolute;
      left: 50%;
      width: 16px;
      height: 1px;
      background: var(--text-secondary);
      transform: translateX(-50%);
      transition: all .18s var(--ease-out);
    }
    .nav-toggle span:nth-child(1){ top: 14px; }
    .nav-toggle span:nth-child(2){ top: 19px; }
    .nav-toggle span:nth-child(3){ top: 24px; }
    
    .nav-toggle[aria-expanded="true"] span:nth-child(1){
      top: 19px;
      transform: translateX(-50%) rotate(45deg);
    }
    .nav-toggle[aria-expanded="true"] span:nth-child(2){
      opacity: 0;
      transform: translateX(-50%) scaleX(0);
    }
    .nav-toggle[aria-expanded="true"] span:nth-child(3){
      top: 19px;
      transform: translateX(-50%) rotate(-45deg);
    }

    /* Mobile drawer */
    .nav-drawer{
      display: none;
      position: fixed;
      top: var(--nav-height);
      right: 0;
      width: 280px;
      max-width: calc(100vw - var(--space-4));
      height: calc(100vh - var(--nav-height));
      background: rgba(42,47,61,.96);
      border-left: 1px solid var(--border-glass);
      transform: translateX(100%);
      transition: transform .18s var(--ease-out);
      z-index: 49;
      padding: var(--space-3) var(--space-2);
      overflow-y: auto;
    }
    .nav-drawer.open{
      transform: translateX(0);
    }
    .nav-drawer a{
      display: flex;
      align-items: center;
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--text-secondary);
      padding: 14px 0;
      border-bottom: 1px solid var(--border-subtle);
      transition: color .2s ease;
    }
    .nav-drawer a:hover{
      color: var(--text-primary);
      text-decoration: none;
    }
    .nav-drawer .nav-signin{ color: #5a4a8a; border-bottom: none; margin-top: 12px; padding-top: 16px; border-top: 1px solid var(--border-glass); }
    .nav-drawer a.active{
      color: #5a4a8a;
    }
    
    .drawer-overlay{
      display: none;
      position: fixed;
      inset: 0;
      top: var(--nav-height);
      background: rgba(0,0,0,0.16);
      z-index: 48;
      opacity: 0;
      transition: opacity .18s ease;
      pointer-events: none;
    }
    .drawer-overlay.open{
      opacity: 1;
      pointer-events: auto;
    }


    /* ============================================
       MAIN CONTENT
       ============================================ */
    main{
      position: relative;
      z-index: 1;
      max-width: var(--max);
      margin: 0 auto;
      padding: 0 var(--space-2);
    }

    /* ============================================
       HERO
       ============================================ */
    .hero{
      position: relative;
      padding: 0 0 48px;
      margin: 0;
      margin-top: var(--nav-height);
      overflow: visible;
    }
    .hero::before{ display: none; }
    
    .hero-kicker{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 6px;
      text-transform: uppercase;
      color: #5a4a8a;
      display:flex;
      align-items:center;
      gap:14px;
    }
    .hero-kicker::before{
      content:"";
      width:var(--space-4);
      height:1px;
      background: var(--purple-bright);
      opacity:.95;
    }
    
    h1{
      font-family: var(--serif);
      font-size: clamp(44px, 7vw, 92px);
      font-weight: normal;
      line-height: .95;
      margin: 0;
      letter-spacing: -0.02em;
    }
    h1 .accent{
      font-style: italic;
      color: #5a4a8a;
      position: relative;
      text-shadow: 
        -1px 0 rgba(255,100,100,0.08), 
        1px 0 rgba(100,255,255,0.08),
        0 0 20px var(--purple-glow);
    }
    
    /* Hero stamp line */
    .hero-stamp{
      width: 60px;
      height: 1px;
      background: var(--purple-bright);
      opacity: .15;
      margin: var(--space-1) 0;
    }
    
    .hero-notice{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 1px;
      color: #5a4a8a;
      border: 1px solid rgba(60,48,100,0.55);
      background: rgba(55,44,90,0.11);
      padding: 8px 12px;
      border-radius: 8px;
      width: fit-content;
      margin: var(--space-1) 0 var(--space-2);
    }
    
    .hero-desc{
      max-width: 62ch;
      font-size: 18px;
      font-weight: 300;
      line-height: 1.75;
      color: var(--text-secondary);
      border-left: 2px solid rgba(55,44,90,1.00);
      padding-left: var(--space-2);
      margin: 0;
    }
    
    .hero-disclaimer{
      font-size: 11px;
      color: var(--text-tertiary);
      font-weight: 200;
      font-family: var(--mono);
      letter-spacing: 0.5px;
      margin: 0;
      line-height: 1.7;
    }
    .hero-disclaimer + .hero-disclaimer{
      margin-top: 6px;
    }
    
    .hero-subline{
      font-size: 15px;
      color: var(--text-secondary);
      font-weight: 300;
      margin: var(--space-1) 0 0;
    }

    .hero-actions{
      display:flex;
      gap: 14px;
      flex-wrap: wrap;
      margin-top: var(--space-1);
    }
    
    .hero-footnote{
      font-family: var(--mono);
      font-size: 9px;
      color: var(--text-tertiary);
      letter-spacing: 1px;
      margin-top: var(--space-2);
    }
    

    /* === HUD SYSTEM === */
    .hud-frame{position:relative;padding:20px 16px;border:none;}
    .hud-frame::before,.hud-frame::after,
    .hud-frame>i::before,.hud-frame>i::after{
      content:'';position:absolute;width:8px;height:8px;
      border-color:rgba(0,0,0,0.12);border-style:solid;pointer-events:none;
    }
    .hud-frame::before{top:0;left:0;border-width:1px 0 0 1px;}
    .hud-frame::after{top:0;right:0;border-width:1px 1px 0 0;}
    .hud-frame>i::before{bottom:0;left:0;border-width:0 0 1px 1px;position:absolute;}
    .hud-frame>i::after{bottom:0;right:0;border-width:0 1px 1px 0;position:absolute;}
    .hud-frame>i{position:absolute;inset:0;pointer-events:none;}
    .hud-frame-green::before,.hud-frame-green::after,
    .hud-frame-green>i::before,.hud-frame-green>i::after{border-color:rgba(22,120,58,0.30);}
    .hud-frame-amber::before,.hud-frame-amber::after,
    .hud-frame-amber>i::before,.hud-frame-amber>i::after{border-color:rgba(140,100,30,0.26);}
    .hud-frame-red::before,.hud-frame-red::after,
    .hud-frame-red>i::before,.hud-frame-red>i::after{border-color:rgba(160,50,50,0.24);}
    .hud-scanline{border-bottom:1px solid rgba(0,0,0,0.06);}
    .hud-dot{display:inline-block;width:4px;height:4px;border-radius:50%;background:rgba(60,48,100,1.00);margin-right:8px;flex-shrink:0;}
    .hud-dot-green{background:rgba(22,120,58,1.00);animation:hud-breathe 3s ease-in-out infinite;}
    .hud-dot-amber{background:rgba(140,100,30,1.00);animation:hud-breathe 3s ease-in-out infinite;}
    .hud-dot-red{background:rgba(160,50,50,1.00);}
    @keyframes hud-breathe{0%,100%{opacity:0.4;}50%{opacity:1;}}
    .hud-row{padding:12px 0;border-bottom:1px solid rgba(0,0,0,0.03);}
    .hud-row:last-child{border-bottom:none;}
    .hud-label{font-family:var(--mono);font-size:9px;letter-spacing:2px;color:rgba(0,0,0,0.52);text-transform:uppercase;}
    .hud-title{font-size:14px;color:rgba(0,0,0,1.00);font-weight:400;margin:2px 0;}
    .hud-desc{font-size:12px;color:rgba(0,0,0,1.00);line-height:1.5;}
    .hud-num{font-family:var(--mono);font-size:9px;letter-spacing:1px;color:rgba(60,48,100,1.00);margin-right:12px;}
    .hud-link{font-family:var(--mono);font-size:11px;letter-spacing:2px;color:rgba(60,48,100,1.00);text-decoration:none !important;border-bottom:none !important;padding-bottom:2px;transition:all 0.2s;}
    .hud-link:hover{color:rgba(60,48,100,1.00);}


    /* HUD phase row hover */
    .hud-row[style*="cursor:pointer"]:hover { background:rgba(0,0,0,0.03); }
    /* HUD verify tab hover */
    #tab-verify:hover, #tab-search:hover { background:rgba(60,48,100,0.25) !important; color:rgba(60,48,100,1.00) !important; }
    /* HUD button hover */
    #verify-btn:hover, #search-btn:hover { border-color:rgba(60,48,100,1.00) !important; color:#1a1d27 !important; background:rgba(60,48,100,0.30) !important; }

    /* ════════════════════════════════════════════
       NUCLEAR HUD OVERRIDE — zero border-radius everywhere
       ════════════════════════════════════════════ */
    
    /* Kill all rounded corners except dots and circles */
    .section *:not(.hud-dot):not(.hud-dot-green):not(.hud-dot-amber):not(.hud-dot-red):not([style*="border-radius: 50%"]):not(canvas) {
      border-radius: 0 !important;
    }
    
    /* Kill all box-shadows except canvas glow */
    .section *:not(canvas):not([id*="dot"]) {
      box-shadow: none !important;
    }
    
    /* Kill all gradient backgrounds on non-canvas, non-body elements */
    .section div[style*="linear-gradient(135deg"]:not([class*="hud"]) {
      background: transparent !important;
    }
    
    /* Kill translateY hover lifts */
    .section *:hover {
      transform: none !important;
    }
    
    /* Restore canvas transforms */
    canvas, canvas * { transform: unset !important; }
    
    /* Kill background radial blobs (decorative) */
    .section div[style*="radial-gradient"][style*="pointer-events: none"] {
      display: none !important;
    }
    
    /* All borders become sharp hairlines */
    .section [style*="border:"] {
      border-color: rgba(0,0,0,0.09) !important;
    }
    .section [style*="border: 1px solid rgba(157"] {
      border-color: rgba(60,48,100,0.38) !important;
    }
    .section [style*="border: 2px solid"] {
      border-width: 1px !important;
      border-color: rgba(60,48,100,0.38) !important;
    }
    
    /* Footer also flat */
    footer, footer * {
      border-radius: 0 !important;
    }
    
    /* Nav stays functional but flat */
    nav, nav * {
      border-radius: 0 !important;
    }
    .nav-drawer {
      border-radius: 0 !important;
    }


    /* 2050 HUD OVERLAY */

    /* page scan removed */

    .section::before {
      content: '';
      position: absolute;
      top: 0; left: 10%; right: 10%;
      height: 1px;
      background: linear-gradient(90deg,
        transparent,
        rgba(60,48,100,0.30) 30%,
        rgba(60,48,100,0.50) 50%,
        rgba(60,48,100,0.30) 70%,
        transparent);
      animation: edge-pulse 4s ease-in-out infinite;
    }
    @keyframes edge-pulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }

    .reveal { opacity: 1; transform: none; }

    .section-label {
      overflow: hidden;
      display: inline-block;
    }
    .section-label.scanned::after {
      content: '';
      display: inline-block;
      width: 2px;
      height: 1em;
      background: rgba(60,48,100,1.00);
      margin-left: 4px;
      animation: cursor-blink 0.8s step-end infinite;
      vertical-align: text-bottom;
    }
    @keyframes cursor-blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    .hud-frame::before, .hud-frame::after,
    .hud-frame > i::before, .hud-frame > i::after {
      width: 12px !important;
      height: 12px !important;
      transition: border-color 1.5s ease;
      animation: corner-breathe 4s ease-in-out infinite;
    }
    @keyframes corner-breathe {
      0%, 100% { border-color: rgba(0,0,0,0.09); }
      50% { border-color: rgba(60,48,100,0.50); }
    }
    .hud-frame-green::before, .hud-frame-green::after,
    .hud-frame-green > i::before, .hud-frame-green > i::after {
      animation: corner-breathe-green 4s ease-in-out infinite !important;
    }
    @keyframes corner-breathe-green {
      0%, 100% { border-color: rgba(22,120,58,0.20); }
      50% { border-color: rgba(22,120,58,1.00); }
    }

    .hud-frame {
      position: relative;
      overflow: hidden;
    }
    .hud-frame .hud-shimmer {
      position: absolute;
      top: 0; left: -100%; right: 0; bottom: 0;
      width: 100%;
      background: linear-gradient(105deg,
        transparent 40%,
        rgba(60,48,100,0.07) 45%,
        rgba(60,48,100,0.15) 50%,
        rgba(60,48,100,0.07) 55%,
        transparent 60%);
      pointer-events: none;
      z-index: 0;
    }
    @keyframes shimmer-sweep {
      from { left: -100%; }
      to { left: 200%; }
    }

    .hud-dot-green {
      position: relative;
    }
    .hud-dot-green::after {
      content: '';
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      background: rgba(22,120,58,0.38);
      animation: dot-breathe 3s ease-in-out infinite;
      pointer-events: none;
    }
    @keyframes dot-breathe {
      0%, 100% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.8); opacity: 1; }
    }

    .hud-tick {
      font-family: var(--mono);
      font-variant-numeric: tabular-nums;
      display: inline-block;
      min-width: 2ch;
    }

    .section {
      position: relative;
    }

    .hud-row {
      transition: background 0.3s ease;
    }
    .hud-row:hover {
      background: rgba(60,48,100,0.05);
    }

    .btn::before, .btn::after {
      content: '';
      position: absolute;
      width: 6px; height: 6px;
      border-style: solid;
      border-color: rgba(60,48,100,0.62);
      pointer-events: none;
      transition: border-color 0.3s ease;
    }
    .btn::before {
      top: -1px; left: -1px;
      border-width: 1px 0 0 1px;
    }
    .btn::after {
      bottom: -1px; right: -1px;
      border-width: 0 1px 1px 0;
    }
    .btn:hover::before, .btn:hover::after {
      border-color: rgba(60,48,100,1.00);
    }

    .hud-link {
      position: relative;
    }

    .section-title.glow {
      text-shadow: 0 0 30px rgba(60,48,100,0.38);
    }

    #verify .hud-frame,
    #contact .hud-frame {
      -webkit-
      background: rgba(14,14,20,0.4);
    }


    /* AWWWARDS LAYER */


    .sa-progress {
      position: fixed; top: 0; left: 0;
      height: 2px;
      background: linear-gradient(90deg, rgba(60,48,100,1.00), rgba(22,120,58,1.00));
      z-index: 99997; width: 0%;
      pointer-events: none;
    }
    .sa-noise {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 99990; opacity: 0.025;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      background-repeat: repeat; background-size: 256px 256px;
    }
    .sa-vignette {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 99989;
      background: none;
    }
    .sa-particles {
      position: fixed; inset: 0;
      pointer-events: none; z-index: -1;
    }
    @keyframes sa-fadeDown { from { opacity:0; transform:translateY(-20px); } to { opacity:1; transform:translateY(0); } }
    @keyframes sa-fadeUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
    @keyframes sa-fadeIn { from { opacity:0; } to { opacity:1; } }
    .btn {
      transition: color 0.2s ease, border-color 0.2s ease, transform 0.25s cubic-bezier(0.23, 1, 0.32, 1) !important;
      will-change: transform;
    }
    
    

    /* Hero responsive */


    
    /* ============================================
       BUTTONS
       ============================================ */
    .btn{
      appearance:none;
      border:1px solid rgba(0,0,0,0.15);
      background: transparent;
      color: rgba(0,0,0,1.00);
      padding: 12px 20px;
      border-radius: 0;
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 2.5px;
      text-transform: uppercase;
      cursor: pointer;
      transition: color .2s ease, border-color .2s ease;
      position: relative;
      overflow:visible;
    }
    .btn:hover{
      transform: none;
      border-color: rgba(60,48,100,1.00);
      color: rgba(60,48,100,1.00);
      background: transparent;
      text-decoration: none;
    }
    .btn.primary{
      border-color: rgba(60,48,100,0.75);
      background: transparent;
      box-shadow: none;
      color: rgba(60,48,100,1.00);
    }
    .btn.primary:hover{
      border-color: rgba(60,48,100,1.00);
      background: rgba(60,48,100,0.15);
    }

    /* ============================================
       SECTIONS
       ============================================ */
    .section{
      padding: var(--space-10) 0;
      border-top: 1px solid var(--border-glass);
      scroll-margin-top: calc(var(--nav-height) + 24px);
    }
    .section-head{
      display:flex;
      align-items:flex-end;
      justify-content: space-between;
      gap: var(--space-2);
      flex-wrap: wrap;
      margin-bottom: var(--space-3);
    }
    .section-label{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 5px;
      text-transform: uppercase;
      color: #5a4a8a;
      display:block;
      margin-bottom: 12px;
    }
    .section-title{
      font-family: var(--serif);
      font-size: clamp(30px, 4vw, 50px);
      font-weight: normal;
      line-height: 1.1;
      margin: 0;
      letter-spacing: -0.01em;
    }
    .section-lead{
      max-width: 70ch;
      color: var(--text-secondary);
      font-weight: 300;
      line-height: 1.85;
      margin: var(--space-2) 0 0;
      font-size: 16px;
    }

    .grid-2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-3);
      align-items: start;
    }

    /* ============================================
       PANELS
       ============================================ */
    .panel{
      background: transparent;
      border: none;
      border-radius: 0;
      padding: var(--space-3) 0;
      backdrop-filter: none;
      position: relative;
      overflow:visible;
      border-top: 1px solid rgba(0,0,0,0.06);
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .panel::before{ display:none; }
    .panel > *{ position: relative; z-index: 1; }

    .panel h3{
      margin: 0 0 14px;
      font-family: var(--mono);
      font-size: 9px;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: rgba(0,0,0,0.68);
    }
    .panel p{
      margin: 0 0 var(--space-2);
      color: var(--text-secondary);
      font-weight: 300;
      line-height: 1.85;
    }
    
    .panel-note{
      font-size: 12px;
      color: var(--text-tertiary);
      font-weight: 400;
      font-family: var(--mono);
      letter-spacing: 0.5px;
      margin-bottom: 14px;
    }
    .panel-detail{
      font-size: 13px;
      color: var(--text-secondary);
      font-weight: 300;
      margin-bottom: 8px;
    }
    .panel-fine{
      font-size: 11px;
      color: var(--text-tertiary);
      font-weight: 300;
      margin-bottom: 14px;
    }
    
    .list{
      list-style: none;
      padding: 0;
      margin: 0;
      border-top: 1px solid var(--border-glass);
    }
    .list li{
      padding: 12px 0;
      border-bottom: 1px solid var(--border-glass);
      color: var(--text-secondary);
      font-size: 14px;
      line-height: 1.6;
    }
    .list li:last-child{ border-bottom:none; }
    .list b{ color: var(--text-primary); font-weight: 600; }

    .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.21);
      background: rgba(0,0,0,0.04);
      color: rgba(0,0,0,1.00);
      width: fit-content;
    }

    /* Document download links */
    .doc-links {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .doc-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: rgba(55,44,90,0.33);
      border: 1px solid rgba(60,48,100,0.62);
      border-radius: 4px;
      color: #5a4a8a;
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 0.5px;
      text-decoration: none;
      transition: all 0.2s ease;
    }
    .doc-link:hover {
      background: rgba(55,44,90,0.66);
      border-color: rgba(60,48,100,1.00);
      color: #1a1d27;
      text-decoration: none;
    }
    .doc-icon {
      padding: 2px 5px;
      background: rgba(60,48,100,0.50);
      border-radius: 2px;
      font-size: 9px;
      font-weight: 600;
      letter-spacing: 1px;
    }
    .tag .dot{
      width:6px;height:6px;border-radius:50%;
      background: var(--accent-green);
      box-shadow: 0 0 0 6px rgba(22,120,58,0.25);
    }

    /* ============================================
       CRITERIA CHECKLIST
       ============================================ */
    .checklist{
      display:grid;
      gap: 12px;
      margin-top: var(--space-2);
    }
    .check{
      display:flex;
      gap: 12px;
      padding: 14px;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,0.09);
      background: linear-gradient(180deg, rgba(0,0,0,0.04) 0%, rgba(0,0,0,0.01) 100%);
      align-items:flex-start;
    }
    .check svg{ flex:0 0 auto; margin-top: 2px; }
    .check-title{
      font-weight: 600;
      color: var(--text-primary);
      font-size: 14px;
      margin-bottom: 2px;
    }
    .check-desc{
      color: var(--text-secondary);
      font-size: 13px;
      line-height: 1.6;
      font-weight: 300;
    }

    /* ============================================
       MECHANISM NODES
       ============================================ */
    .mechanism{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-1);
    }
    .node{
      border: 1px solid rgba(0,0,0,0.11);
      background: linear-gradient(180deg, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.02) 100%);
      border-radius: 18px;
      padding: 28px 22px;
      position: relative;
      overflow:hidden;
      min-height: 165px;
    }
    .node::before{
      content:"";
      position:absolute;
      top:0;left:0;right:0;height:1px;
      background: linear-gradient(90deg, transparent, rgba(0,0,0,0.09), transparent);
      pointer-events:none;
    }
    .node > *{ position: relative; z-index: 1; }
    .node-num{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 4px;
      color: #5a4a8a;
      text-transform: uppercase;
      margin-bottom: 12px;
    }
    .node-title{
      font-family: var(--serif);
      font-size: 22px;
      font-weight: normal;
      margin: 0 0 var(--space-1);
      letter-spacing: -0.01em;
    }
    .node-desc{
      color: var(--text-tertiary);
      line-height: 1.65;
      font-size: 13px;
      font-weight: 300;
      margin: 0;
    }

    /* ============================================
       RECORD BLOCK
       ============================================ */
    .record{
      background: linear-gradient(180deg, rgba(0,0,0,0.04) 0%, rgba(0,0,0,.12) 100%);
      border: 1px solid rgba(0,0,0,0.11);
      border-radius: 18px;
      overflow:hidden;
    }
    .record-head{
      display:flex;
      justify-content: space-between;
      align-items:center;
      padding: var(--space-2) 18px;
      background: rgba(55,44,90,0.18);
      border-bottom: 1px solid rgba(0,0,0,0.09);
      gap: 12px;
      flex-wrap: wrap;
    }
    .record-title{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: rgba(0,0,0,1.00);
    }
    .record-status{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: rgba(22,120,58,1.00);
      border: 1px solid rgba(22,120,58,0.50);
      background: rgba(22,120,58,0.15);
      padding: 6px 10px;
      border-radius: 999px;
      display:flex; align-items:center; gap: 8px;
    }
    .record-status .s-dot{
      width: 6px; height: 6px; border-radius: 50%;
      background: var(--accent-green);
    }
    .record-status.illustrative{
      color: rgba(140,100,30,1.00);
      border-color: rgba(140,100,30,0.55);
      background: rgba(140,100,30,0.18);
    }
    .record-status.illustrative .s-dot{
      background: var(--accent-amber);
    }
    .record-head-right{
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
    }
    .verify-link{
      font-family: var(--mono);
      font-size: 9px;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: #5a4a8a;
      border: 1px solid rgba(60,48,100,0.88);
      background: rgba(55,44,90,0.18);
      padding: 6px 10px;
      border-radius: 6px;
      transition: all .2s ease;
    }
    .verify-link:hover{
      border-color: rgba(60,48,100,1.00);
      background: rgba(55,44,90,0.33);
      text-decoration: none;
    }
    .record-body{
      padding: 18px;
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(0,0,0,1.00);
    }
    .kv{
      display:grid;
      grid-template-columns: 150px 1fr;
      gap: 12px;
      padding: var(--space-1) 0;
      border-bottom: 1px solid rgba(0,0,0,0.12);
    }
    .kv:last-child{ border-bottom:none; }
    .k{
      color: rgba(0,0,0,0.63);
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    .v{
      color: rgba(0,0,0,1.00);
      word-break: break-word;
    }
    .hash-row{
      display:flex;
      align-items:center;
      gap:var(--space-1);
    }
    .copy-btn{
      appearance:none;
      border:1px solid rgba(0,0,0,0.27);
      background:rgba(0,0,0,0.06);
      color:rgba(0,0,0,0.75);
      padding:4px 8px;
      border-radius:6px;
      font-family:var(--mono);
      font-size:9px;
      letter-spacing:1px;
      text-transform:uppercase;
      cursor:pointer;
      transition:all .2s ease;
    }
    .copy-btn:hover{
      border-color:rgba(60,48,100,1.00);
      background:rgba(55,44,90,0.40);
      color:rgba(0,0,0,1.00);
    }
    .copy-btn.copied{
      border-color:rgba(22,120,58,0.88);
      background:rgba(22,120,58,0.30);
      color:rgba(22,120,58,1.00);
    }
    .record-note{
      margin-top: 14px;
      padding-top: 14px;
      border-top: 1px solid rgba(0,0,0,0.15);
      color: rgba(0,0,0,0.93);
      font-size: 11.5px;
      line-height: 1.7;
      font-weight: 300;
      font-family: var(--sans);
    }
    
    /* Copy toast */
    .copy-toast{
      position: fixed;
      bottom: var(--space-3);
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: rgba(22,120,58,0.30);
      border: 1px solid rgba(22,120,58,0.88);
      color: rgba(22,120,58,1.00);
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      padding: 12px 18px;
      border-radius: 10px;
      opacity: 0;
      transition: opacity .18s ease, transform .18s var(--ease-out);
      pointer-events: none;
      z-index: 100;
    }
    .copy-toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* ============================================
       STATES
       ============================================ */
    .states{
      display:grid;
      gap: var(--space-1);
      margin-top: var(--space-2);
    }
    .state{
      padding: 14px;
      border: 1px solid rgba(0,0,0,0.09);
      background: linear-gradient(180deg, rgba(0,0,0,0.04) 0%, rgba(0,0,0,0.01) 100%);
      border-radius: 16px;
      display:flex;
      justify-content: space-between;
      gap: 12px;
      align-items:flex-start;
    }
    .state-left{
      display:flex; flex-direction: column; gap: 2px;
    }
    .state-name{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: rgba(0,0,0,1.00);
    }
    .state-desc{
      color: var(--text-secondary);
      font-size: 13px;
      line-height: 1.6;
      font-weight: 300;
      margin:0;
    }
    .badge{
      font-family: var(--mono);
      font-size: 9px;
      letter-spacing: 2px;
      text-transform: uppercase;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.21);
      background: rgba(0,0,0,0.04);
      color: rgba(0,0,0,1.00);
      white-space: nowrap;
    }
    .badge.green{ border-color: rgba(22,120,58,0.55); color: rgba(22,120,58,1.00); background: rgba(22,120,58,0.15); }
    .badge.amber{ border-color: rgba(140,100,30,0.48); color: rgba(140,100,30,1.00); background: rgba(140,100,30,0.13); }
    .badge.red{ border-color: rgba(160,50,50,0.44); color: rgba(160,50,50,1.00); background: rgba(160,50,50,0.12); }

    
    
    /* ENVELO mechanism animations */
    @keyframes mechFlowPacket {
      0% { left: 0; opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { left: calc(100% - 6px); opacity: 0; }
    }
    .flow-packet-green { animation: mechFlowPacket 2.5s ease-in-out infinite; }
    .flow-packet-purple { animation: mechFlowPacket 2.5s ease-in-out infinite; animation-delay: 1.2s; }

    
    /* Hero animations */
    
    .hero-eye { animation: hero-eye-pulse 4s ease-in-out infinite; }
    @keyframes hero-eye-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
    .scroll-line { animation: scroll-bounce 2s ease-in-out infinite; }
    @keyframes scroll-bounce { 0%, 100% { transform: scaleY(1); opacity: 0.5; } 50% { transform: scaleY(0.7); opacity: 1; } }

    
    
    
    /* [consolidated below] */

    /* [consolidated below] */

    /* ===== CONSOLIDATED MOBILE FIXES ===== */
    
    /* Small phones */
    
    
    
    /* ===== END MOBILE FIXES ===== */

    /* Security diagram animations */
    @keyframes flowPacket {
      0% { left: 0; opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { left: calc(100% - 6px); opacity: 0; }
    }
    .flow-packet { animation: flowPacket 2.5s ease-in-out infinite; }
    .flow-packet-delayed { animation-delay: 1.25s; }
    .envelo-eye { animation: eye-pulse 7s ease-in-out infinite; }
/* ============================================
       ENFORCEMENT DIAGRAM
       ============================================ */
    .diagram-container{
      display:flex;
      flex-direction: column;
      align-items: center;
      margin: var(--space-3) 0 var(--space-5);
    }
    .enforcement-diagram{
      max-width: 400px;
      width: 100%;
      height: auto;
    }
    .diagram-caption{
      font-size: 11px;
      color: var(--text-tertiary);
      text-align: center;
      margin-top: var(--space-2);
      font-family: var(--mono);
      letter-spacing: 0.5px;
    }
    
    /* Subtle interlock pulse */
    @keyframes interlock-pulse {
      0%, 100% { 
        stroke: rgba(60,48,100,1.00);
        filter: drop-shadow(0 0 0 rgba(60,48,100,0.00));
      }
      50% { 
        stroke: rgba(60,48,100,1.00);
        filter: drop-shadow(0 0 8px rgba(60,48,100,0.62));
      }
    }
    .interlock-bg{
      animation: interlock-pulse 3s ease-in-out infinite;
    }
    
    @media (prefers-reduced-motion: reduce){
      .interlock-bg{ animation: none; }
    }
    
    /* ============================================
       CONTACT
       ============================================ */
    /* Process Timeline */
    .process-timeline{ display: flex; flex-direction: column; gap: 0; }
    .process-step{ display: flex; gap: 16px; padding: 16px 0; border-bottom: 1px solid var(--border-glass); }
    .process-step:last-child{ border-bottom: none; }
    .process-step-num{ 
      width: 28px; height: 28px; flex-shrink: 0;
      background: rgba(55,44,90,0.40); border: 1px solid rgba(60,48,100,0.88);
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-family: var(--mono); font-size: 11px; color: #5a4a8a;
    }
    .process-step-content b{ display: block; margin-bottom: 4px; }
    .process-step-content p{ color: var(--text-secondary); font-size: 13px; line-height: 1.6; margin: 0; }

    .contact-card{
      max-width: 540px;
      background: linear-gradient(180deg, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.02) 100%);
      border: 1px solid rgba(0,0,0,0.11);
      border-radius: 18px;
      padding: 8px 0;
    }
    .contact-row{
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 28px;
      border-bottom: 1px solid var(--border-glass);
      gap: var(--space-2);
      flex-wrap: wrap;
    }
    .contact-row:last-child{ border-bottom: none; }
    .contact-label{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--text-tertiary);
    }
    .contact-link{
      font-family: var(--sans);
      font-size: 14px;
      color: #5a4a8a;
      transition: color .2s ease;
    }
    .contact-link:hover{
      color: var(--text-primary);
      text-decoration: none;
    }

    /* ============================================
       DEFINITION CALLOUT
       ============================================ */
    .definition-callout{
      background: linear-gradient(180deg, rgba(55,44,90,0.18) 0%, rgba(55,44,90,0.07) 100%);
      border: 1px solid rgba(60,48,100,0.38);
      border-radius: 12px;
      padding: var(--space-2) 18px;
      margin-top: var(--space-2);
    }
    .definition-term{
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: #5a4a8a;
      margin-bottom: 6px;
    }
    .definition-text{
      color: var(--text-secondary);
      font-size: 13px;
      line-height: 1.65;
      font-weight: 300;
      margin: 0;
    }
    
    /* ============================================
       PROGRAM IDENTITY
       ============================================ */
    .program-grid{
      display: grid;
      gap: 8px;
      font-size: 13px;
    }
    .program-row{
      display: flex;
      justify-content: space-between;
      gap: var(--space-2);
      flex-wrap: wrap;
      padding: 6px 0;
      border-bottom: 1px solid var(--border-glass);
    }
    .program-row:last-child{ border-bottom: none; }
    .program-label{
      color: var(--text-tertiary);
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    .program-value{
      color: var(--text-primary);
    }
    .program-value.amber{
      color: var(--accent-amber);
    }
    .program-value a{
      color: #5a4a8a;
    }
    
    /* ============================================
       FOOTER
       ============================================ */
    footer{
      border-top: 1px solid var(--border-glass);
      padding: var(--space-6) 0 var(--space-4);
      margin-top: var(--space-4);
      color: rgba(0,0,0,0.68);
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 1px;
    }
    .footer-inner{
      max-width: var(--max);
      margin: 0 auto;
      padding: 0 var(--space-2);
      display:flex;
      justify-content: space-between;
      align-items:flex-start;
      gap: var(--space-2);
      flex-wrap: wrap;
    }
    .footer-spec{
      margin-top: 8px;
      color: rgba(0,0,0,0.57);
      font-size: 9px;
      letter-spacing: 1px;
    }
    .footer-disclaimer{
      margin-top: 12px;
      color: rgba(0,0,0,0.63);
      font-size: 10px;
      max-width: 480px;
      line-height: 1.7;
    }
    .foot-links{ display:flex; gap: var(--space-4); flex-wrap: wrap; }
    .foot-col{ display:flex; flex-direction:column; gap:8px; min-width:120px; }
    .foot-col-title{ font-family:var(--mono); font-size:9px; letter-spacing:2px; color:#5a4a8a; margin-bottom:4px; }
    .foot-links a{ color: rgba(0,0,0,0.72); font-size:13px; }
    .foot-links a:hover{ color: rgba(0,0,0,1.00); text-decoration:none; }
    .old-foot-links{
      display:flex; gap: var(--space-2); flex-wrap: wrap;
    }
    .foot-links a{ color: rgba(0,0,0,0.72); }
    .foot-links a:hover{ color: rgba(0,0,0,1.00); text-decoration:none; }

    /* ============================================
       REVEAL ANIMATION
       ============================================ */
    .reveal{ 
      opacity: 0; 
      transform: translateY(8px); 
      transition: opacity .35s ease, transform .35s ease; 
    }
    .reveal.active{ opacity: 1; transform: translateY(0); }
    
    @media (prefers-reduced-motion: reduce){
      .reveal{ opacity: 1; transform: none; transition: none; }
    }

    /* Download Modal */
    .download-modal{
      display: none;
      position: fixed;
      inset: 0;
      z-index: 100;
      background: rgba(0,0,0,0.12);
      align-items: center;
      justify-content: center;
      padding: var(--space-2);
    }
    .download-modal.open{ display: flex; }
    .download-modal-card{
      background: var(--bg-deep);
      border: 1px solid rgba(0,0,0,0.09);
      padding: var(--space-3);
      max-width: 420px;
      width: 100%;
      position: relative;
    }
    .download-modal-close{
      position: absolute;
      top: 14px;
      right: 14px;
      appearance: none;
      border: none;
      background: none;
      color: var(--text-tertiary);
      font-family: var(--mono);
      font-size: 18px;
      cursor: pointer;
      line-height: 1;
      transition: filter .2s;
    }
    .download-modal-close:hover{ filter:brightness(1.3); color: var(--text-primary); }
    .download-modal-card h3{
      font-family: var(--mono);
      font-size: 10px;
      font-weight: 400;
      letter-spacing: 2.5px;
      text-transform: uppercase;
      color: rgba(60,48,100,1.00);
      margin: 0 0 4px;
    }
    .download-modal-card > p{
      color: var(--text-tertiary);
      font-family: var(--mono);
      font-size: 11px;
      line-height: 1.6;
      margin: 0 0 var(--space-2);
    }
    .download-form-group{ margin-bottom: 14px; }
    .download-form-label{
      display: block;
      font-family: var(--mono);
      font-size: 9px;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--text-tertiary);
      margin-bottom: 6px;
    }
    .download-form-input, .download-form-select{
      width: 100%;
      padding: 10px 12px;
      background: rgba(0,0,0,0.04);
      border: 1px solid rgba(0,0,0,0.09);
      color: var(--text-primary);
      font-family: var(--mono);
      font-size: 13px;
    }
    .download-form-input:focus, .download-form-select:focus{
      outline: none;
      border-color: rgba(60,48,100,1.00);
    }
    .download-form-select{
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='rgba(0,0,0,0.15)' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
    }
    .download-form-btn{
      appearance: none;
      width: 100%;
      border: 1px solid rgba(60,48,100,0.75);
      background: transparent;
      color: rgba(60,48,100,1.00);
      padding: 12px 24px;
      font-family: var(--mono);
      font-size: 10px;
      letter-spacing: 2.5px;
      text-transform: uppercase;
      cursor: pointer;
      transition: filter .2s, border-color .2s;
    }
    .download-form-btn:hover{
      filter: brightness(1.3);
      border-color: rgba(60,48,100,1.00);
    }
    .download-form-fine{
      font-size: 10px;
      font-family: var(--mono);
      color: var(--text-tertiary);
      margin-top: var(--space-2);
      line-height: 1.6;
      text-align: center;
      letter-spacing: 0.3px;
    }

    /* Animation Keyframes */
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      36% { transform: scale(1); }
      40% { transform: scale(1.06); }
      46% { transform: scale(1); }
      50% { transform: scale(1.03); }
      56% { transform: scale(1); }
    }
    @keyframes ecg-draw {
      0% { stroke-dashoffset: 1000; }
      100% { stroke-dashoffset: 0; }
    }
    .ecg-trace { animation: ecg-draw 4s linear infinite; }
    @keyframes pulse-slow { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 0.6; transform: scale(1.02); } }
    .timeline-dot animate { animation-play-state: paused; }
    .timeline-dot.playing animate { animation-play-state: running; }
    @keyframes bar-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
    @keyframes ekg-draw { 0% { stroke-dashoffset: 800; opacity: 1; } 80% { stroke-dashoffset: 0; opacity: 1; } 90%, 100% { stroke-dashoffset: 0; opacity: 0; } }
    @keyframes ekg-flow { 0% { transform: translateX(0); } 100% { transform: translateX(-500px); } }
    @keyframes ekg-scan { 0% { left: -80px; } 100% { left: 100%; } }
    @keyframes rotate-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .hour-block { width: 100%; aspect-ratio: 1; background: rgba(60,48,100,0.38); border-radius: 4px; animation: block-fill 0.5s ease forwards; opacity: 0; }
    .hour-block:nth-child(n+61) { animation-name: block-fill-green; }
    @keyframes block-fill { 0% { opacity: 0; transform: scale(0.8); } 100% { opacity: 1; transform: scale(1); background: rgba(60,48,100,1.00); } }
    @keyframes trail-fill { 0% { stroke-dashoffset: 880; } 100% { stroke-dashoffset: 0; } }
    @keyframes orbit-dot { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
     50% { transform: scaleX(1); } 100% { transform: scaleX(0); } } 50% { transform: scaleX(1); } 50.1%, 100% { transform: scaleX(0); } } 2%, 50% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); box-shadow: 0 0 10px rgba(22,120,58,1.00); } 50.1%, 100% { background: rgba(42,47,61,1); border-color: rgba(60,48,100,0.75); box-shadow: none; } } 17%, 50% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); box-shadow: 0 0 10px rgba(22,120,58,1.00); } 50.1%, 100% { background: rgba(42,47,61,1); border-color: rgba(60,48,100,0.75); box-shadow: none; } } 34%, 50% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); box-shadow: 0 0 10px rgba(22,120,58,1.00); } 50.1%, 100% { background: rgba(42,47,61,1); border-color: rgba(60,48,100,0.75); box-shadow: none; } } 50% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); box-shadow: 0 0 14px rgba(22,120,58,1.00); } 50.1%, 100% { background: rgba(42,47,61,1); border-color: rgba(60,48,100,0.75); box-shadow: none; } }
     }
    .cat72-progress { animation: cat72-fill 6s ease-in-out infinite; }
    @keyframes cat72-fill { 0%, 5% { stroke-dashoffset: 754; } 75% { stroke-dashoffset: 0; } 80%, 100% { stroke-dashoffset: 754; } }
    .cat72-marker { fill: rgba(42,47,61,1); stroke: rgba(60,48,100,1.00); stroke-width: 2; }
    .cat72-m0 { animation: cat72-mark 6s ease-in-out infinite; }
    .cat72-m24 { animation: cat72-mark 6s ease-in-out infinite; animation-delay: 0.5s; }
    .cat72-m48 { animation: cat72-mark 6s ease-in-out infinite; animation-delay: 1s; }
    .cat72-m72 { animation: cat72-mark-end 6s ease-in-out infinite; }
    @keyframes cat72-mark { 0%, 10% { fill: rgba(42,47,61,1); stroke: rgba(60,48,100,1.00); } 20%, 75% { fill: rgba(22,120,58,1.00); stroke: rgba(22,120,58,1.00); } 80%, 100% { fill: rgba(42,47,61,1); stroke: rgba(60,48,100,1.00); } }
    @keyframes cat72-mark-end { 0%, 70% { fill: rgba(42,47,61,1); stroke: rgba(60,48,100,1.00); } 75% { fill: rgba(22,120,58,1.00); stroke: rgba(22,120,58,1.00); filter: drop-shadow(0 0 8px rgba(22,120,58,1.00)); } 80%, 100% { fill: rgba(42,47,61,1); stroke: rgba(60,48,100,1.00); filter: none; } }
    .cat72-dot { animation: cat72-orbit 6s ease-in-out infinite; transform-origin: 140px 140px; }
    @keyframes cat72-orbit { 0%, 5% { transform: translateX(-50%) rotate(0deg); } 75% { transform: translateX(-50%) rotate(360deg); } 80%, 100% { transform: translateX(-50%) rotate(0deg); } }
    @keyframes thermo-width { 0% { width: 0%; } 80% { width: 100%; } 85%, 100% { width: 0%; } }
    @keyframes thermo-dot-0 { 0%, 0% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); opacity: 0.6; } 1%, 80% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); opacity: 1; } 85%, 100% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); opacity: 0.6; } } 1%, 80% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); box-shadow: 0 0 12px rgba(22,120,58,1.00); } 85%, 100% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); box-shadow: none; } }
    @keyframes thermo-dot-33 { 0%, 26% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); opacity: 0.6; } 27%, 80% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); opacity: 1; } 85%, 100% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); opacity: 0.6; } } 27%, 80% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); box-shadow: 0 0 12px rgba(22,120,58,1.00); } 85%, 100% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); box-shadow: none; } }
    @keyframes thermo-dot-66 { 0%, 52% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); opacity: 0.6; } 53%, 80% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); opacity: 1; } 85%, 100% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); opacity: 0.6; } } 53%, 80% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); box-shadow: 0 0 12px rgba(22,120,58,1.00); } 85%, 100% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); box-shadow: none; } }
    @keyframes thermo-dot-100 { 0%, 79% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); opacity: 0.6; } 80%, 80% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); opacity: 1; } 85%, 100% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); opacity: 0.6; } } 80% { background: rgba(22,120,58,1.00); border-color: rgba(22,120,58,1.00); box-shadow: 0 0 16px rgba(22,120,58,1.00); } 85%, 100% { background: rgba(30,33,43,1); border-color: rgba(60,48,100,0.75); box-shadow: none; } }
     17%, 52% { background: rgba(22,120,58,1.00); border: 2px solid rgba(22,120,58,1.00); box-shadow: 0 0 12px rgba(22,120,58,1.00); } 54%, 100% { background: rgba(42,47,61,1); border: 2px solid rgba(60,48,100,1.00); box-shadow: none; } }
     34%, 52% { background: rgba(22,120,58,1.00); border: 2px solid rgba(22,120,58,1.00); box-shadow: 0 0 12px rgba(22,120,58,1.00); } 54%, 100% { background: rgba(42,47,61,1); border: 2px solid rgba(60,48,100,1.00); box-shadow: none; } }
     50%, 52% { background: rgba(22,120,58,1.00); border: 2px solid rgba(22,120,58,1.00); box-shadow: 0 0 16px rgba(22,120,58,1.00); } 54%, 100% { background: rgba(42,47,61,1); border: 2px solid rgba(60,48,100,1.00); box-shadow: none; } }
    @keyframes trail-fill { 0% { stroke-dashoffset: 880; } 100% { stroke-dashoffset: 0; } }
    @keyframes orbit-dot { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @keyframes block-fill-green { 0% { opacity: 0; transform: scale(0.8); } 100% { opacity: 1; transform: scale(1); background: rgba(22,120,58,1.00); } }
    @keyframes pulse-dot { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } } 50% { opacity: 0.6; box-shadow: 0 0 16px rgba(22,120,58,1.00); } }
    @keyframes pulse-move { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
    @keyframes rotate-reverse { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    @keyframes orbit { from { transform: rotate(0deg) translateX(170px) rotate(0deg); } to { transform: rotate(360deg) translateX(170px) rotate(-360deg); } }
    @keyframes orbit-reverse { from { transform: rotate(360deg) translateX(170px) rotate(-360deg); } to { transform: rotate(0deg) translateX(170px) rotate(0deg); } }
    @keyframes flow-right { 0%, 100% { opacity: 0.4; transform: translateX(0); } 50% { opacity: 1; transform: translateX(4px); } }
    @keyframes flow-down { 0%, 100% { opacity: 0.4; transform: translateY(0); } 50% { opacity: 1; transform: translateY(4px); } }
  
    
    /* ============================================
       ENHANCED ANIMATIONS
       ============================================ */
    
    /* Staggered reveal — disabled, instant show */
    .reveal.active > * {
      opacity: 1;
    }
    
    @keyframes stagger-in {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* HUD — no card lift, no glow, no icon zoom */
    .btn.primary {
      position: relative;
      overflow: visible;
    }
    .btn.primary::before { display:none; }
    
    /* Badge hover */
    .badge {
      transition: all 0.2s ease !important;
    }
    
    .badge:hover {
      transform: translateY(-2px);
      background: rgba(0,0,0,0.12);
      border-color: #5a4a8a;
    }
    
    /* Smooth section transitions */
    .section {
      transition: opacity 0.5s ease;
    }
    
    /* Floating animation for hero elements */
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    /* Pulse glow for important elements */
    @keyframes glow-pulse {
      0%, 100% { box-shadow: 0 0 20px rgba(22,120,58,0.50); }
      50% { box-shadow: 0 0 40px rgba(22,120,58,1.00); }
    }
    
    /* Gate 3 (ENVELO) special glow */
    [style*="rgba(22,120,58,0.38)"] {
      animation: glow-pulse 3s ease-in-out infinite;
    }
    
    /* Smooth scroll indicator fade */
    .scroll-indicator {
      animation: bounce-fade 2s ease-in-out infinite;
    }
    
    @keyframes bounce-fade {
      0%, 100% { opacity: 0.5; transform: translateY(0); }
      50% { opacity: 1; transform: translateY(5px); }
    }
    
    /* Process step connector animation */
    @keyframes flow-right {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }
    
    /* Typing cursor effect for terminal */
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    
    /* Number counter animation prep */
    .counter {
      display: inline-block;
    }
    
    /* Reduce motion for accessibility */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      .reveal { opacity: 1; transform: none; }
      .reveal.active > * { animation: none; opacity: 1; }
    }
    
    
    
    /* ============================================
       LIGHT MODE - AGGRESSIVE OVERRIDE
       ============================================ */
    
    /* Kill the dark radial gradient */
    
    /* Make grid subtle */
    
    /* ===== HEADER ===== */
    
    /* ===== ALL TEXT - BRUTE FORCE ===== */
    
    /* Section labels stay purple */
    
    /* Tertiary/muted text */
    
    /* ===== PURPLE ACCENT TEXT ===== */
    
    /* ===== GREEN ACCENT TEXT ===== */
    
    /* ===== ALL CARDS & PANELS ===== */
    
    /* Cards with purple gradient */
    
    /* Cards with green gradient (ENVELO highlight) */
    
    /* ===== TERMINAL/VERIFY WIDGET ===== */
    
    /* ===== BUTTONS ===== */
    
    /* ===== BADGES ===== */
    
    /* ===== INPUTS ===== */
    
    /* ===== SVGS ===== */
    
    /* Purple SVG elements */
    
    /* Green SVG elements */
    
    /* Gate icons in cards */
    
    /* ===== RED/WARNING ===== */
    
    /* ===== AMBER/WARNING ===== */
    
    /* ===== DRAFT BANNER ===== */
    
    /* ===== FOOTER ===== */
    
    /* ===== MOBILE DRAWER ===== */
    
    /* ===== LINKS ===== */
    
    /* But not buttons or nav */
    
    /* ===== LEGAL PAGES ===== */
    
    /* ===== THEME TOGGLE ===== */
    
    
    .theme-toggle:hover {
      border-color: #5a4a8a !important;
    }
    
    .theme-toggle svg {
      width: 18px;
      height: 18px;
    }
    
    .theme-toggle .icon-sun { display: none; }
    .theme-toggle .icon-moon { display: block; }
    
    
    /* Accessibility - Skip Link */
    .skip-link {
      position: absolute;
      top: -50px;
      left: 16px;
      background: var(--purple-primary);
      color: #1a1d27;
      padding: 12px 24px;
      border-radius: 8px;
      font-family: var(--mono);
      font-size: 12px;
      z-index: 9999;
      transition: top 0.2s ease;
    }
    .skip-link:focus {
      top: 16px;
      outline: 2px solid var(--purple-bright);
      outline-offset: 2px;
    }
    
    /* Focus indicators */
    a:focus, button:focus, input:focus, select:focus, textarea:focus {
      outline: 2px solid var(--purple-bright);
      outline-offset: 2px;
    }
    
    /* Focus visible only for keyboard navigation */
    :focus:not(:focus-visible) {
      outline: none;
    }
    :focus-visible {
      outline: 2px solid var(--purple-bright);
      outline-offset: 2px;
    }
    
    /* ============================================
       MOBILE RESPONSIVE STYLES
       ============================================ */
    
    
    
    
    
    
    
    /* ===== ENVELO + SECURITY DIAGRAMS — MOBILE VERTICAL FLOW ===== */
    /* ===== END DIAGRAM MOBILE FIXES ===== */

    /* CAT-72 Process Flow Mobile */
    


      /* Flow Diagram Mobile */
  
    /* Show QR scanner button only on touch/mobile devices */
    
    
    
    

    
    

    
    

    
    /* ── MOBILE DIAGRAM STYLES ── */
    .m-diagram{display:none;}
    .m-diagram{--g:92,214,133;--p:157,140,207;--r:214,92,92;--a:214,160,92;}

    @keyframes md-glow{0%,100%{opacity:.5}50%{opacity:1}}
    @keyframes md-spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
    @keyframes md-drift{0%,100%{transform:translate(0,0)}33%{transform:translate(2px,-1.5px)}66%{transform:translate(-1.5px,1px)}}
    @keyframes md-flow{0%{background-position:-200% 0}100%{background-position:200% 0}}

    .m-diagram .d-label{display:flex;align-items:center;gap:8px;margin-bottom:16px;}
    .m-diagram .d-dot{width:5px;height:5px;border-radius:50%;animation:md-glow 3s ease infinite;flex-shrink:0;}
    .m-diagram .d-dot-g{background:rgba(var(--g),.9);box-shadow:0 0 10px rgba(var(--g),.35);}
    .m-diagram .d-dot-p{background:rgba(var(--p),.9);box-shadow:0 0 10px rgba(var(--p),.35);}
    .m-diagram .d-tag{font-family:var(--mono);font-size:8px;letter-spacing:2.5px;color:var(--text-tertiary);}
    .m-diagram .d-foot{margin-top:20px;padding-top:10px;border-top:1px solid rgba(0,0,0,0.04);font-family:var(--mono);font-size:7px;letter-spacing:2.5px;color:rgba(0,0,0,0.22);text-align:center;}

    /* ═ HERO + SECURITY ORBS ═ */
    .m-diagram .h-flow,.m-diagram .s-flow{display:flex;align-items:center;justify-content:center;padding:12px 0 20px;}
    .m-diagram .h-node{text-align:center;position:relative;}
    .m-diagram .h-orb{position:relative;width:62px;height:62px;margin:0 auto 10px;}
    .m-diagram .h-orb-xl{width:74px;height:74px;}
    .m-diagram .h-atmo{position:absolute;inset:-12px;border-radius:50%;opacity:0;}
    .m-diagram .h-g .h-atmo{background:radial-gradient(circle,rgba(var(--g),.08) 0%,transparent 70%);opacity:1;}
    .m-diagram .h-p .h-atmo{background:radial-gradient(circle,rgba(var(--p),.1) 0%,transparent 70%);opacity:1;}
    .m-diagram .h-ring{position:absolute;inset:0;border-radius:50%;border:1.5px solid;}
    .m-diagram .h-g .h-ring{border-color:rgba(var(--g),.3);}
    .m-diagram .h-p .h-ring{border-color:rgba(var(--p),.3);}
    .m-diagram .h-w .h-ring{border-color:rgba(0,0,0,0.15);}
    .m-diagram .h-fill{position:absolute;inset:3px;border-radius:50%;}
    .m-diagram .h-g .h-fill{background:radial-gradient(circle at 35% 30%,rgba(var(--g),.14) 0%,rgba(var(--g),.02) 50%,transparent 100%);}
    .m-diagram .h-p .h-fill{background:radial-gradient(circle at 35% 30%,rgba(var(--p),.16) 0%,rgba(var(--p),.03) 50%,transparent 100%);}
    .m-diagram .h-w .h-fill{background:radial-gradient(circle at 35% 30%,rgba(0,0,0,0.06) 0%,transparent 70%);}
    .m-diagram .h-detail{position:absolute;inset:10px;border-radius:50%;border:.5px solid rgba(0,0,0,0.06);}
    .m-diagram .h-core{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:6px;height:6px;border-radius:50%;}
    .m-diagram .h-g .h-core{background:rgba(var(--g),.95);box-shadow:0 0 14px rgba(var(--g),.5),0 0 4px rgba(var(--g),.9);}
    .m-diagram .h-p .h-core{background:rgba(var(--p),.95);box-shadow:0 0 14px rgba(var(--p),.5),0 0 4px rgba(var(--p),.9);}
    .m-diagram .h-w .h-core{background:rgba(0,0,0,0.14);box-shadow:0 0 10px rgba(0,0,0,0.22);}
    .m-diagram .h-orbit{position:absolute;inset:-10px;border-radius:50%;border:1px solid rgba(var(--p),.06);animation:md-spin 40s linear infinite;}
    .m-diagram .h-orbit::before{content:'';position:absolute;top:-2px;left:50%;width:3px;height:3px;border-radius:50%;background:rgba(var(--p),.6);box-shadow:0 0 6px rgba(var(--p),.4);transform:translateX(-50%);}
    .m-diagram .h-orbit-2{position:absolute;inset:-4px;border-radius:50%;border:.5px dashed rgba(var(--p),.06);animation:md-spin 60s linear infinite reverse;}
    .m-diagram .h-name{font-family:var(--mono);font-size:9px;letter-spacing:3px;font-weight:500;display:block;}
    .m-diagram .h-g .h-name{color:rgba(var(--g),.95);}
    .m-diagram .h-p .h-name{color:rgba(var(--p),.95);}
    .m-diagram .h-w .h-name{color:var(--text-secondary);}
    .m-diagram .h-sub{font-family:var(--mono);font-size:7px;letter-spacing:2px;color:rgba(var(--p),.4);display:block;margin-top:2px;}
    .m-diagram .h-conn{width:32px;height:2px;position:relative;margin:0 4px;margin-bottom:28px;}
    .m-diagram .h-conn-bg{position:absolute;inset:0;background:rgba(var(--p),.06);border-radius:1px;}
    .m-diagram .h-conn-flow{position:absolute;inset:0;border-radius:1px;background:linear-gradient(90deg,transparent 0%,rgba(var(--p),.35) 50%,transparent 100%);background-size:200% 100%;animation:md-flow 2.5s ease-in-out infinite;}
    .m-diagram .h-conn-tip{position:absolute;right:-3px;top:50%;transform:translateY(-50%);width:0;height:0;border-top:3.5px solid transparent;border-bottom:3.5px solid transparent;border-left:5px solid rgba(var(--p),.2);}
    .m-diagram .h-vrow{display:flex;justify-content:center;gap:8px;}
    .m-diagram .h-v{display:flex;align-items:center;gap:6px;font-family:var(--mono);font-size:8px;letter-spacing:2px;font-weight:500;padding:7px 14px;border:1px solid;border-radius:3px;position:relative;overflow:hidden;}
    .m-diagram .h-v::before{content:'';position:absolute;inset:0;opacity:.03;}
    .m-diagram .h-vd{width:5px;height:5px;border-radius:50%;}
    .m-diagram .h-vg{border-color:rgba(var(--g),.2);color:rgba(var(--g),.9);}
    .m-diagram .h-vg::before{background:rgb(var(--g));}
    .m-diagram .h-vg .h-vd{background:rgb(var(--g));box-shadow:0 0 8px rgba(var(--g),.5);}
    .m-diagram .h-va{border-color:rgba(var(--a),.2);color:rgba(var(--a),.9);}
    .m-diagram .h-va::before{background:rgb(var(--a));}
    .m-diagram .h-va .h-vd{background:rgb(var(--a));box-shadow:0 0 8px rgba(var(--a),.5);}
    .m-diagram .h-vr{border-color:rgba(var(--r),.2);color:rgba(var(--r),.9);}
    .m-diagram .h-vr::before{background:rgb(var(--r));}
    .m-diagram .h-vr .h-vd{background:rgb(var(--r));box-shadow:0 0 8px rgba(var(--r),.5);}

    /* ═ ENVELO PIPELINE ═ */
    .m-diagram .e-pipe{display:flex;align-items:center;justify-content:center;padding:8px 0 18px;}
    .m-diagram .e-node{text-align:center;padding:0 8px;}
    .m-diagram .e-node-core{background:rgba(var(--p),.03);border:1px solid rgba(var(--p),.06);border-radius:10px;padding:10px 12px;}
    .m-diagram .e-icon{font-size:24px;margin-bottom:4px;display:block;line-height:1;}
    .m-diagram .e-icon svg{width:24px;height:24px;display:block;margin:0 auto;}
    .m-diagram .e-nm{font-family:var(--mono);font-size:9px;letter-spacing:2px;font-weight:500;color:var(--text-secondary);display:block;}
    .m-diagram .e-ds{font-family:var(--mono);font-size:7.5px;color:var(--text-tertiary);display:block;margin-top:2px;}
    .m-diagram .e-arrow{width:20px;display:flex;align-items:center;gap:1px;}
    .m-diagram .e-aline{width:12px;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--p),.15));}
    .m-diagram .e-atip{width:0;height:0;border-top:3px solid transparent;border-bottom:3px solid transparent;border-left:4px solid rgba(var(--p),.2);}
    .m-diagram .e-tiers{display:flex;flex-direction:column;gap:5px;}
    .m-diagram .e-tier{display:flex;border-radius:4px;overflow:hidden;}
    .m-diagram .e-bar{width:4px;flex-shrink:0;}
    .m-diagram .e-tg .e-bar{background:linear-gradient(180deg,rgba(var(--g),.85),rgba(var(--g),.35));}
    .m-diagram .e-ta .e-bar{background:linear-gradient(180deg,rgba(var(--a),.85),rgba(var(--a),.35));}
    .m-diagram .e-tr .e-bar{background:linear-gradient(180deg,rgba(var(--r),.85),rgba(var(--r),.35));}
    .m-diagram .e-body{flex:1;padding:9px 14px;background:rgba(0,0,0,0.02);font-family:var(--mono);font-size:8.5px;color:var(--text-tertiary);line-height:1.5;}
    .m-diagram .e-tl{font-weight:600;letter-spacing:2px;margin-right:8px;}
    .m-diagram .e-tg .e-tl{color:rgba(var(--g),.9);}
    .m-diagram .e-ta .e-tl{color:rgba(var(--a),.9);}
    .m-diagram .e-tr .e-tl{color:rgba(var(--r),.9);}

    /* ═ SECURITY EXTRAS ═ */
    .m-diagram .s-flow{padding:12px 0 16px;}
    .m-diagram .s-badge{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:var(--mono);font-size:5.5px;letter-spacing:1.5px;color:rgba(var(--p),.35);white-space:nowrap;padding:2px 6px;border:1px solid rgba(var(--p),.06);border-radius:2px;background:var(--bg-deep);}
    .m-diagram .s-grid{display:grid;grid-template-columns:1fr 1fr;gap:4px;}
    .m-diagram .s-item{font-family:var(--mono);font-size:7.5px;letter-spacing:1px;padding:6px 10px;border-radius:3px;display:flex;align-items:center;gap:5px;}
    .m-diagram .s-deny{color:rgba(var(--r),.8);background:rgba(var(--r),.025);border:1px solid rgba(var(--r),.1);}
    .m-diagram .s-allow{color:rgba(var(--g),.8);background:rgba(var(--g),.025);border:1px solid rgba(var(--g),.1);}
    .m-diagram .s-item>span{font-size:9px;font-weight:600;}
    .m-diagram .s-gap{height:5px;}

    /* ═ CAT-72 RINGS ═ */
    .m-diagram .c-container{display:flex;justify-content:center;padding:10px 0 18px;}
    .m-diagram .c-wall{width:226px;height:226px;border-radius:50%;border:2px solid rgba(var(--r),.3);box-shadow:0 0 40px rgba(var(--r),.05),inset 0 0 30px rgba(var(--r),.02);display:flex;align-items:center;justify-content:center;position:relative;}
    .m-diagram .c-mrc{width:180px;height:180px;border-radius:50%;border:1px solid rgba(var(--r),.15);display:flex;align-items:center;justify-content:center;position:relative;}
    .m-diagram .c-warn{width:134px;height:134px;border-radius:50%;border:1px dashed rgba(var(--a),.2);display:flex;align-items:center;justify-content:center;position:relative;background:radial-gradient(circle,rgba(var(--a),.015) 0%,transparent 70%);}
    .m-diagram .c-odd{width:88px;height:88px;border-radius:50%;border:1.5px solid rgba(var(--g),.25);background:radial-gradient(circle at 35% 30%,rgba(var(--g),.07) 0%,rgba(var(--g),.015) 50%,transparent 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;box-shadow:0 0 24px rgba(var(--g),.04),inset 0 0 20px rgba(var(--g),.02);}
    .m-diagram .c-label{position:absolute;top:-8px;left:50%;transform:translateX(-50%);font-family:var(--mono);font-size:7px;letter-spacing:1.5px;font-weight:500;padding:1px 7px;background:var(--bg-deep);white-space:nowrap;}
    .m-diagram .c-wall>.c-label{color:rgba(var(--r),.65);}
    .m-diagram .c-mrc>.c-label{color:rgba(var(--r),.4);}
    .m-diagram .c-warn>.c-label{color:rgba(var(--a),.5);}
    .m-diagram .c-odd-text{font-family:var(--mono);font-size:10px;letter-spacing:3px;font-weight:600;color:rgba(var(--g),.75);}
    .m-diagram .c-agents{position:relative;width:48px;height:36px;margin-top:4px;}
    .m-diagram .c-dot{position:absolute;width:4px;height:4px;border-radius:50%;background:rgba(var(--g),.65);box-shadow:0 0 6px rgba(var(--g),.3);animation:md-drift 5s ease-in-out infinite;font-style:normal;}
    .m-diagram .c-dot:nth-child(1){top:4px;left:8px;animation-delay:0s}
    .m-diagram .c-dot:nth-child(2){top:16px;left:24px;animation-delay:.7s}
    .m-diagram .c-dot:nth-child(3){top:6px;left:32px;animation-delay:1.4s}
    .m-diagram .c-dot:nth-child(4){top:24px;left:12px;animation-delay:2.1s}
    .m-diagram .c-dot:nth-child(5){top:12px;left:20px;animation-delay:.35s}
    .m-diagram .c-dot:nth-child(6){top:22px;left:30px;animation-delay:1.05s}
    .m-diagram .c-dot-a{background:rgba(var(--a),.85) !important;box-shadow:0 0 10px rgba(var(--a),.5) !important;width:5px !important;height:5px !important;}
    .m-diagram .c-dot-r{background:rgba(var(--r),.85) !important;box-shadow:0 0 10px rgba(var(--r),.5) !important;width:5px !important;height:5px !important;}
    .m-diagram .c-legend{display:flex;justify-content:center;gap:16px;font-family:var(--mono);font-size:8px;color:var(--text-tertiary);}
    .m-diagram .c-legend>div{display:flex;align-items:center;gap:5px;}
    .m-diagram .c-ld{width:5px;height:5px;border-radius:50%;}
    .m-diagram .c-ldg{background:rgba(var(--g),.65);box-shadow:0 0 5px rgba(var(--g),.3);}
    .m-diagram .c-lda{background:rgba(var(--a),.65);box-shadow:0 0 5px rgba(var(--a),.3);}
    .m-diagram .c-ldr{background:rgba(var(--r),.65);box-shadow:0 0 5px rgba(var(--r),.3);}

    /* ═ PROCESS TIMELINE ═ */
    .m-diagram .p-timeline{padding:6px 0;}
    .m-diagram .p-step{display:flex;align-items:stretch;gap:16px;min-height:54px;}
    .m-diagram .p-track{display:flex;flex-direction:column;align-items:center;width:34px;flex-shrink:0;}
    .m-diagram .p-marker{width:34px;height:34px;border-radius:50%;border:1.5px solid;display:flex;align-items:center;justify-content:center;font-family:var(--mono);font-size:10px;letter-spacing:1.5px;font-weight:500;flex-shrink:0;position:relative;z-index:2;}
    .m-diagram .p-mp{border-color:rgba(var(--p),.35);color:rgba(var(--p),.95);background:rgba(var(--p),.05);box-shadow:0 0 12px rgba(var(--p),.08);}
    .m-diagram .p-mt{border-color:rgba(0,0,0,0.12);color:var(--text-tertiary);background:rgba(0,0,0,0.02);}
    .m-diagram .p-mg{border-color:rgba(var(--g),.35);color:rgba(var(--g),.95);background:rgba(var(--g),.05);box-shadow:0 0 12px rgba(var(--g),.08);}
    .m-diagram .p-line{width:1.5px;flex:1;}
    .m-diagram .p-lp{background:linear-gradient(180deg,rgba(var(--p),.18),rgba(var(--p),.04));}
    .m-diagram .p-lt{background:rgba(0,0,0,0.04);}
    .m-diagram .p-info{padding:7px 0 18px;}
    .m-diagram .p-title{font-family:var(--mono);font-size:11px;letter-spacing:3px;font-weight:500;color:var(--text-primary);margin-bottom:3px;}
    .m-diagram .p-desc{font-family:var(--mono);font-size:8.5px;color:var(--text-tertiary);line-height:1.4;}

    /* ═ LANDSCAPE ═ */
    @media (max-height:500px) and (orientation:landscape) {
      .m-diagram .h-orb{width:42px;height:42px;}
      .m-diagram .h-orb-xl{width:50px;height:50px;}
      .m-diagram .h-conn{width:22px;margin-bottom:20px;}
      .m-diagram .h-v{padding:5px 10px;font-size:7px;}
      .m-diagram .e-pipe{padding:4px 0 12px;}
      .m-diagram .e-icon{font-size:18px;}
      .m-diagram .e-icon svg{width:18px;height:18px;}
      .m-diagram .c-wall{width:164px;height:164px;}
      .m-diagram .c-mrc{width:130px;height:130px;}
      .m-diagram .c-warn{width:97px;height:97px;}
      .m-diagram .c-odd{width:64px;height:64px;}
      .m-diagram .c-odd-text{font-size:8px;}
      .m-diagram .p-marker{width:26px;height:26px;font-size:8px;}
      .m-diagram .p-step{min-height:42px;gap:12px;}
      .m-diagram .p-info{padding:5px 0 12px;}
      .m-diagram .p-title{font-size:9px;}
    }
    /* ── END MOBILE DIAGRAM STYLES ── */

    
    /* ══ LIGHT MODE GLOBAL OVERRIDES ══ */
    
    /* Force dark text everywhere as baseline */
    html { background: #ffffff !important; }
    
    /* Links hover — darken instead of brighten */
    a:hover { filter: brightness(0.85) !important; }
    
    /* Purple buttons — preserve white text */
    [style*="background: var(--purple-primary)"],
    [style*="background:var(--purple-primary)"],
    [style*="4a3d75"], [style*="5B4B8A"] {
      color: #fff !important;
    }
    [style*="background: var(--purple-primary)"] *,
    [style*="background:var(--purple-primary)"] * {
      color: #fff !important;
    }
    
    /* Canvas containers — slight warm tint instead of black */
    canvas {
      background: transparent !important;
    }

  
    /* ── Nav bar ── */
    .site-header {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 50;
      height: var(--nav-height, 72px);
      background: #ffffff;
      border-bottom: 1px solid rgba(0,0,0,0.08);
      display: flex;
      align-items: center;
      padding: 0 24px;
    }
    .nav-inner {
      max-width: var(--max, 1320px);
      margin: 0 auto;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }
    .brand {
      display: flex;
      align-items: center;
      flex-shrink: 0;
      text-decoration: none;
    }
    .brand:hover { opacity: 0.8; }
    .brand-mark { display: none; }
    .brand-name { display: none; }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 32px;
      flex: 1;
      justify-content: center;
    }
    .nav-links a {
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing: 1.5px;
      color: rgba(15,16,33,0.6);
      text-decoration: none;
      white-space: nowrap;
      transition: color 150ms ease;
    }
    .nav-links a:hover,
    .nav-links a.active { color: var(--ink); }
    .nav-signin {
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing: 1.5px;
      color: var(--ink);
      text-decoration: none;
      border: 1px solid rgba(15,16,33,0.25);
      padding: 7px 14px;
      border-radius: 4px;
      flex-shrink: 0;
      transition: border-color 150ms ease;
      white-space: nowrap;
    }
    .nav-signin:hover { border-color: rgba(15,16,33,0.6); }
    .nav-signin > i { display: none; }
    .nav-toggle {
      display: none;
      appearance: none;
      background: none;
      border: 1px solid rgba(15,16,33,0.2);
      border-radius: 4px;
      padding: 8px;
      cursor: pointer;
      flex-direction: column;
      gap: 4px;
      width: 36px;
      height: 36px;
      align-items: center;
      justify-content: center;
    }
    .nav-toggle span {
      display: block;
      width: 16px;
      height: 1.5px;
      background: var(--ink);
      border-radius: 1px;
    }
    .nav-badge { display: none; }

    </style>
  <link rel="stylesheet" href="mobile.css">
  <link rel="stylesheet" href="global.css">
</head>

<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main" class="skip-link">Skip to content</a>
    
  <a href="#main" class="skip-link">Skip to content</a>
  <div class="grid-overlay" aria-hidden="true"></div>

    <header class="site-header">
    <div class="nav-inner">

      <a href="/" class="brand" aria-label="Sentinel Authority home">
        <svg width="220" height="48" viewBox="0 0 460 120" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="62" cy="60" r="50" stroke="#1d1a3b" stroke-width="3.4"/>
          <circle cx="62" cy="60" r="43" stroke="#1d1a3b" stroke-width="1.1" stroke-opacity="0.20"/>
          <text x="62" y="74" text-anchor="middle" font-family="'League Spartan', Arial, sans-serif" font-weight="900" font-size="40" fill="#1d1a3b" letter-spacing="-1.1">SA</text>
          <text x="132" y="54" font-family="'League Spartan', Arial, sans-serif" font-weight="900" font-size="34" fill="#1d1a3b" letter-spacing="-0.15">SENTINEL</text>
          <text x="132" y="84" font-family="'League Spartan', Arial, sans-serif" font-weight="900" font-size="34" fill="#1d1a3b" letter-spacing="-0.25">AUTHORITY</text>
        </svg>
      </a>

      <nav class="nav-links" aria-label="Main navigation">
        <a href="/#envelo" data-section="envelo">STANDARD</a>
        <a href="/#cat72" data-section="cat72">CONFORMANCE</a>
        <a href="/#verify" data-section="verify">REGISTRY</a>
        <a href="/research.html">PUBLICATIONS</a>
      </nav>

      <a href="https://app.sentinelauthority.org" class="nav-signin">APPLICANT PORTAL</a>

      <button class="nav-toggle" aria-label="Open navigation menu" aria-expanded="false" aria-controls="nav-drawer">
        <span></span>
        <span></span>
        <span></span>
      </button>

    </div>
  </header>
  
  <div class="drawer-overlay" aria-hidden="true"></div>
  <div id="nav-drawer" class="nav-drawer" role="navigation" aria-label="Mobile navigation">
    <a href="#envelo" data-section="envelo">STANDARD</a>
    <a href="#buyers" data-section="buyers">ENTERPRISE</a>
    <a href="#security" data-section="security">SECURITY</a>
    <a href="#criteria" data-section="criteria">CERTIFICATION</a>
    <a href="#artifacts" data-section="artifacts">ARTIFACTS</a>
    <a href="#verify" data-section="verify">REGISTRY</a>
        <a href="research.html">RESEARCH</a>
    <a href="#contact" data-section="contact">CONTACT</a>
    <a href="https://app.sentinelauthority.org" class="nav-signin">SIGN IN</a>
  </div>  <!-- Copy toast -->
  <div class="copy-toast" role="status" aria-live="polite">Hash copied to clipboard</div>

  <main id="main" role="main">
    

    <!-- HERO -->
    <section class="hero">
      <!-- Full-viewport canvas -->
      <div style="position:relative;display:flex;flex-direction:column;align-items:center;margin:0 auto;max-width:880px;padding-top:8px;"><div style="width:100%;"><canvas id="hero-canvas" style="width:100%;height:calc(min(880px, 100vw) * 0.42);display:block;opacity:0;transition:opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1);"></canvas>
      <!-- Mobile Static: Hero v5 -->
      <div class="m-diagram" aria-label="ENVELO enforcement flow">
        <div class="d-label"><div class="d-dot d-dot-g"></div><span class="d-tag">ENVELO INTERLOCK · ENFORCEMENT FLOW</span></div>
        <div class="h-flow">
          <div class="h-node h-g"><div class="h-orb"><div class="h-atmo"></div><div class="h-ring"></div><div class="h-fill"></div><div class="h-detail"></div><div class="h-core"></div></div><span class="h-name">MODEL</span></div>
          <div class="h-conn"><div class="h-conn-bg"></div><div class="h-conn-flow"></div><div class="h-conn-tip"></div></div>
          <div class="h-node h-p"><div class="h-orb h-orb-xl"><div class="h-atmo"></div><div class="h-orbit"></div><div class="h-orbit-2"></div><div class="h-ring"></div><div class="h-fill"></div><div class="h-detail"></div><div class="h-core"></div></div><span class="h-name">ENVELO</span><span class="h-sub">INTERLOCK</span></div>
          <div class="h-conn"><div class="h-conn-bg"></div><div class="h-conn-flow"></div><div class="h-conn-tip"></div></div>
          <div class="h-node h-w"><div class="h-orb"><div class="h-ring"></div><div class="h-fill"></div><div class="h-detail"></div><div class="h-core"></div></div><span class="h-name">GATE</span></div>
        </div>
        <div class="h-vrow"><div class="h-v h-vg"><div class="h-vd"></div>EXECUTE</div><div class="h-v h-va"><div class="h-vd"></div>MRC</div><div class="h-v h-vr"><div class="h-vd"></div>HALT</div></div>
        <div class="d-foot">AUDIT · REAL-TIME · CRYPTOGRAPHIC</div>
      </div>

                        </div>
      <!-- Hero Content below canvas -->
      <div id="hero-text" class="hero-content-bottom" style="position:relative;z-index:10;text-align:center;padding:0 16px 0;margin-top:-32px;display:flex;flex-direction:column;align-items:center;">
        
        <p style="font-family:var(--mono);font-size:9px;letter-spacing:3px;text-transform:uppercase;color:rgba(60,48,100,1.00);margin:0 0 8px;">Independent Certification Body</p>

        <h1 style="font-family: var(--serif); font-size: clamp(26px, 4.5vw, 46px); font-weight: 200; line-height: 1.1; margin-bottom: 6px; letter-spacing: -0.02em; color: #1a1d27; max-width: 700px;">
          Conformance Certification<br><span style="color: rgba(60,48,100,1.00);">for Autonomous Systems</span>
        </h1>
        
        <p style="font-size: clamp(12px, 1.5vw, 14px); color:rgba(0,0,0,0.60); max-width: 540px; margin: 0 auto 14px; line-height: 1.6; font-family: var(--mono); letter-spacing: 0.3px;">
          Formal attestation that autonomous systems operate within their Operational Design Domain &mdash; enforced at runtime, verified independently, recorded immutably.
        </p>
        <p style="font-family: var(--serif); font-size: clamp(14px, 1.8vw, 17px); font-weight: 400; font-style: italic; color: rgba(196,184,232,0.7); margin: 0 0 16px; letter-spacing: 0.5px;">
          Proof. Not promises.
        </p>
        
        <!-- CTA Buttons -->
        <div style="display: flex; gap: 24px; justify-content: center; flex-wrap: wrap; align-items: center;">
          <a href="https://app.sentinelauthority.org" style="font-family:var(--mono);font-size:10px;letter-spacing:2.5px;text-transform:uppercase;color:rgba(60,48,100,1.00);text-decoration:none;display:inline-flex;align-items:center;gap:10px;transition:color .2s;">
            Request Certification
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
          <a href="#verify" style="font-family:var(--mono);font-size:10px;letter-spacing:2.5px;text-transform:uppercase;color:rgba(0,0,0,0.52);text-decoration:none;display:inline-flex;align-items:center;gap:8px;transition:color .2s;">
            Verify a Certificate
          </a>
        </div>

      </div>
      </div>

      <!-- Industry Strip -->
      <div class="reveal" style="text-align:center;padding:var(--space-2) var(--space-2) 0;">
        <span style="font-family:var(--mono);font-size:9px;letter-spacing:2.5px;text-transform:uppercase;color:rgba(0,0,0,0.30);">Healthcare AI &nbsp;·&nbsp; Autonomous Vehicles &nbsp;·&nbsp; Aviation &nbsp;·&nbsp; Defense &nbsp;·&nbsp; Robotics &nbsp;·&nbsp; Energy &nbsp;·&nbsp; Oil &amp; Gas &nbsp;·&nbsp; Industrial Automation &nbsp;·&nbsp; Logistics &nbsp;·&nbsp; Enterprise AI</span>
      </div>
      
      <!-- Disclaimer at bottom -->

      
  <script>
  (function() {
    var _rafs = [];
    var _origRAF = window.requestAnimationFrame;
    var _paused = false;
    document.addEventListener("visibilitychange", function() {
      _paused = document.hidden;
      if (!_paused) { _rafs.forEach(function(fn) { _origRAF.call(window, fn); }); _rafs = []; }
    });
    window.requestAnimationFrame = function(fn) {
      if (_paused) { _rafs.push(fn); return -1; }
      return _origRAF.call(window, fn);
    };
  })();
  </script>      <script>
        (function() {
  var c = document.getElementById('hero-canvas');
  if (!c) return;
  var ctx = c.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var W = 0, H = 0;

  var GREEN = [92,214,133];
  var PURPLE = [157,140,207];
  var RED = [214,92,92];
  var AMBER = [214,160,92];

  function isMob() { return W < 600 || (window.innerHeight < 500 && window.innerWidth > window.innerHeight); }

  var cx, cy, radius;
  var agents = [];
  var AGENT_COUNT = (window.innerWidth < 768 || window.innerHeight < 500) ? 14 : 28;
  var telemetry = [];
  var lastTel = 0;
  var boundaryPulses = [];

  var dataLabels = [
    // Autonomous vehicles
    'av:speed:62.4mph','av:lidar:clean','av:lane:2','av:brake_dist:184ft',
    // Aerospace & defense
    'uav:alt:12400ft','uav:heading:247\u00B0','sat:orbit:LEO','wpn:safe:locked',
    // Healthcare AI
    'dx:conf:0.994','imaging:mri:clear','dosage:verify:OK','patient:id:anon',
    // Industrial robotics
    'arm:torque:42Nm','weld:temp:1840\u00B0F','cell:cycle:14209','grip:psi:28.4',
    // Financial AI
    'txn:risk:0.003','algo:latency:2.1ms','fraud:score:LOW','aml:flag:clear',
    // Energy & grid
    'grid:load:84.2%','turbine:rpm:1812','solar:eff:22.4%','batt:soc:67%'
  ];

  function rgb(col,a){ return 'rgba('+col[0]+','+col[1]+','+col[2]+','+a+')'; }

  function heroH() {
    var el = document.getElementById('hero-text');
    if (!el) return 150;
    var rect = el.getBoundingClientRect();
    return window.innerHeight - rect.top + 20;
  }

  var _prevOrientation = (typeof screen !== 'undefined' && screen.orientation) ? screen.orientation.angle : 0;

  function resize() {
    var r = c.parentElement.getBoundingClientRect();
    var newW = r.width;
    var isLandscape = window.innerHeight < 500 && window.innerWidth > window.innerHeight;
    var curOrientation = (typeof screen !== 'undefined' && screen.orientation) ? screen.orientation.angle : 0;
    var orientationChanged = curOrientation !== _prevOrientation;

    // Detect if this is a real resize or just iOS URL bar
    // URL bar: width stays same, height changes < 100px
    // Rotation: width changes significantly OR orientation API reports change
    var widthDelta = Math.abs(newW - W);
    var isRealResize = widthDelta > 10 || orientationChanged || W === 0;

    if (!isRealResize) {
      // Just redraw at current size — don't recalculate layout
      return;
    }

    _prevOrientation = curOrientation;
    W = newW;

    // Calculate height based on context
    if (W < 550) {
      H = W * 0.80;
    } else if (isLandscape) {
      H = Math.min(W * 0.42, window.innerHeight * 0.70);
    } else {
      H = W * 0.42;
    }

    // Apply to canvas
    c.width = W * dpr;
    c.height = H * dpr;
    c.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    // Recalculate layout — always, since we passed the real-resize check
    cx = W * 0.5;
    cy = H * 0.48;
    radius = Math.min(W, H) * 0.34;
  }

  // Expose for orientation handler
  c._saResize = function() { W = 0; _prevOrientation = -1; resize(); };

  function initAgents() {
    agents = [];
    AGENT_COUNT = window.innerWidth < 768 ? 14 : 28;
    for (var i = 0; i < AGENT_COUNT; i++) {
      var a = Math.random() * Math.PI * 2;
      var isOutlier = i < 4;
      var r = isOutlier ? (0.5 + Math.random()*0.35) * radius : Math.random() * radius * 0.65;
      agents.push({
        x: cx + Math.cos(a) * r,
        y: cy + Math.sin(a) * r,
        vx: (Math.random()-0.5)*0.6,
        vy: (Math.random()-0.5)*0.6,
        size: 1.5 + Math.random()*1.8,
        phase: Math.random()*Math.PI*2,
        drift: 0.002 + Math.random()*0.003,
        softMax: isOutlier ? radius*0.95 : radius*0.75,
        isOutlier: isOutlier
      });
    }
  }

  var enveloEvents = [];

  function updateAgents(dt) {
    var oddR = heroOddRadius || radius*0.76;
    var enveloR = radius;
    var approachZone = oddR * 0.65;

    for (var i=0; i<agents.length; i++) {
      var a = agents[i];
      if (!a.tier) a.tier = 0;
      if (!a.mrcTimer) a.mrcTimer = 0;
      if (!a.haltTimer) a.haltTimer = 0;
      a.phase += a.drift * dt;

      // Tier 3: halted — frozen, counting down to respawn
      if (a.tier === 3) {
        a.haltTimer -= dt;
        if (a.haltTimer <= 0) {
          a.tier = 0;
          a.x = cx + (Math.random()-0.5)*oddR*0.6;
          a.y = cy + (Math.random()-0.5)*oddR*0.6;
          a.vx = (Math.random()-0.5)*0.3;
          a.vy = (Math.random()-0.5)*0.3;
        }
        continue;
      }

      // Tier 2: in enforcement margin — ENVELO decelerating to MRC
      if (a.tier === 2) {
        a.vx *= 0.92;
        a.vy *= 0.92;
        var dx2 = a.x-cx, dy2 = a.y-cy, dist2 = Math.sqrt(dx2*dx2+dy2*dy2)||1;
        a.vx -= (dx2/dist2)*0.02*dt;
        a.vy -= (dy2/dist2)*0.02*dt;
        a.x += a.vx*dt*(isMob()?0.03:0.06);
        a.y += a.vy*dt*(isMob()?0.03:0.06);
        a.mrcTimer -= dt;

        dx2 = a.x-cx; dy2 = a.y-cy; dist2 = Math.sqrt(dx2*dx2+dy2*dy2);
        if (dist2 < oddR*0.9) {
          a.tier = 0; a.mrcTimer = 0;
        }
        if (dist2 >= enveloR*0.98) {
          a.tier = 3; a.haltTimer = 3000;
          var ang3 = Math.atan2(dy2,dx2);
          a.vx=0; a.vy=0;
          enveloEvents.push({x:a.x,y:a.y,alpha:1});
          boundaryPulses.push({angle:ang3, alpha:0.8, spread:0});
        }
        if (a.mrcTimer <= 0 && a.tier===2) {
          a.tier = 0; a.mrcTimer = 0;
        }
        continue;
      }

      // Normal movement
      a.vx += Math.cos(a.phase)*0.015*dt*0.1;
      a.vy += Math.sin(a.phase*1.3)*0.015*dt*0.1;

      var dx = a.x - cx, dy = a.y - cy;
      var dist = Math.sqrt(dx*dx+dy*dy) || 1;
      var nx = dx/dist, ny = dy/dist;

      if (!a.isOutlier && dist > a.softMax) {
        var over = (dist - a.softMax) / oddR;
        a.vx -= nx * over * 0.004 * dt;
        a.vy -= ny * over * 0.004 * dt;
      }
      if (a.isOutlier) {
        a.vx += nx * 0.006 * dt * 0.1;
        a.vy += ny * 0.006 * dt * 0.1;
      }

      a.x += a.vx*dt*0.06;
      a.y += a.vy*dt*0.06;

      dx = a.x - cx; dy = a.y - cy;
      dist = Math.sqrt(dx*dx+dy*dy);

      // Tier 1: approaching ODD — system self-corrects
      if (dist > approachZone && dist < oddR) {
        a.tier = 1;
        var pullback = (dist - approachZone) / (oddR - approachZone);
        a.vx -= nx * pullback * 0.0008 * dt;
        a.vy -= ny * pullback * 0.0008 * dt;
      } else if (dist < approachZone) {
        a.tier = 0;
      }

      // Tier 2: crossed ODD into enforcement margin
      if (dist >= oddR) {
        a.tier = 2;
        a.mrcTimer = 2000 + Math.random()*1500;
        var ang2 = Math.atan2(dy,dx);
        boundaryPulses.push({angle:ang2, alpha:0.4, spread:0});
      }

      a.vx *= isMob() ? 0.990 : 0.997; a.vy *= isMob() ? 0.990 : 0.997;
    }
  }

  var heroOddRadius;

  // ── GRID ──
  function drawGrid() {
    var sp=W<600?36:48;ctx.strokeStyle='rgba(0,0,0,0.04)';ctx.lineWidth=0.5;
    for(var x=sp;x<W;x+=sp){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke();}
    for(var y=sp;y<H;y+=sp){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke();}
    for(var x=sp*2;x<W;x+=sp*2)for(var y=sp*2;y<H;y+=sp*2){
      ctx.beginPath();ctx.moveTo(x-2,y);ctx.lineTo(x+2,y);ctx.stroke();
      ctx.beginPath();ctx.moveTo(x,y-2);ctx.lineTo(x,y+2);ctx.stroke();}
  }

  // ── BRACKETS on ENVELO circle ──
  function drawBrackets() {
    var r=radius, x=cx, y=cy, ml=8;
    ctx.strokeStyle=rgb(PURPLE,0.32);ctx.lineWidth=0.6;
    ctx.beginPath();ctx.moveTo(x-r+4,y-r);ctx.lineTo(x-r+4+ml,y-r);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x-r,y-r+4);ctx.lineTo(x-r,y-r+4+ml);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x+r-4,y-r);ctx.lineTo(x+r-4-ml,y-r);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x+r,y-r+4);ctx.lineTo(x+r,y-r+4+ml);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x-r+4,y+r);ctx.lineTo(x-r+4+ml,y+r);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x-r,y+r-4);ctx.lineTo(x-r,y+r-4-ml);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x+r-4,y+r);ctx.lineTo(x+r-4-ml,y+r);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x+r,y+r-4);ctx.lineTo(x+r,y+r-4-ml);ctx.stroke();
  }

  // ── LEGEND ──
  function drawLegend() {
    var lx = 12, ly = H - 110; if (isMob()) return;
    ctx.font = '600 8px "IBM Plex Mono"';
    ctx.textAlign = 'left';
    var items = [
      {col: GREEN, label: 'NOMINAL'},
      {col: AMBER, label: 'MRC'},
      {col: RED, label: 'HALT'}
    ];
    for (var i = 0; i < items.length; i++) {
      var ix = lx + i * 72;
      ctx.beginPath(); ctx.arc(ix, ly, 3, 0, Math.PI * 2);
      ctx.fillStyle = rgb(items[i].col, 0.7); ctx.fill();
      ctx.fillStyle = rgb(items[i].col, 0.65);
      ctx.fillText(items[i].label, ix + 8, ly + 3);
    }
  }

  function drawBoundary(now) {
    var enveloR = radius;
    heroOddRadius = radius * 0.76;

    // Enforcement margin fill removed — transparent to match page bg

    // ENVELO outer ring (purple, solid)
    ctx.beginPath(); ctx.arc(cx,cy,enveloR,0,Math.PI*2);
    ctx.strokeStyle = rgb(PURPLE,0.35);
    ctx.lineWidth = 1.5; ctx.stroke();

    // Outer glow removed — transparent to match page bg

    // ODD inner ring (green, dashed, rotating)
    ctx.save(); ctx.translate(cx,cy); ctx.rotate(now*0.0001);
    ctx.beginPath(); ctx.arc(0,0,heroOddRadius,0,Math.PI*2);
    ctx.setLineDash([4,8]);
    ctx.strokeStyle = rgb(GREEN,0.3);
    ctx.lineWidth = 1; ctx.stroke();
    ctx.setLineDash([]); ctx.restore();

    // Labels
    ctx.font='600 9px "IBM Plex Mono"';
    ctx.textAlign='center';
    ctx.fillStyle=rgb(PURPLE,0.8);
    ctx.fillText('ENVELO',cx,cy-enveloR-22);
    ctx.font='400 7px "IBM Plex Mono"';
    ctx.fillStyle=rgb(PURPLE,0.55);
    ctx.fillText('INTERLOCK',cx,cy-enveloR-11);

    ctx.font='400 8px "IBM Plex Mono"';
    ctx.fillStyle=rgb(GREEN,0.7);
    ctx.fillText('ODD BOUNDARY',cx,cy-heroOddRadius-8);
  }

  function drawPulses() {
    for (var i=boundaryPulses.length-1;i>=0;i--) {
      var p=boundaryPulses[i];
      p.alpha -= 0.012; p.spread += 0.6;
      if (p.alpha<=0) {boundaryPulses.splice(i,1);continue;}
      var bx=cx+Math.cos(p.angle)*radius, by=cy+Math.sin(p.angle)*radius;
      var g=ctx.createRadialGradient(bx,by,0,bx,by,p.spread+12);
      g.addColorStop(0,rgb(PURPLE,p.alpha*0.28));
      g.addColorStop(1,rgb(PURPLE,0));
      ctx.fillStyle=g;
      ctx.beginPath(); ctx.arc(bx,by,p.spread+12,0,Math.PI*2); ctx.fill();
    }
  }

  function drawAgents() {
    for (var i=0;i<agents.length;i++) {
      var a = agents[i];
      var tier = a.tier || 0;
      var col, al, glowSize;

      if (tier === 3) {
        col = RED; al = 0.5 + Math.sin(Date.now()*0.008)*0.1; glowSize = a.size*4.5;
        // Halt X marker
        ctx.strokeStyle = rgb(RED,0.55);
        ctx.lineWidth = 1.5;
        ctx.beginPath(); ctx.moveTo(a.x-4,a.y-4); ctx.lineTo(a.x+4,a.y+4); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(a.x+4,a.y-4); ctx.lineTo(a.x-4,a.y+4); ctx.stroke();
      } else if (tier === 2) {
        col = RED; al = 0.8; glowSize = a.size*4;
      } else if (tier === 1) {
        col = AMBER; al = 0.7; glowSize = a.size*3.5;
      } else {
        col = GREEN; al = 0.65; glowSize = a.size*2.8;
      }

      var gl=ctx.createRadialGradient(a.x,a.y,0,a.x,a.y,a.size*2.8);
      gl.addColorStop(0,rgb(col,al*0.28));gl.addColorStop(1,rgb(col,0));
      ctx.fillStyle=gl;ctx.beginPath();ctx.arc(a.x,a.y,a.size*2.8*1.2,0,Math.PI*2);ctx.fill();
      ctx.beginPath();ctx.arc(a.x,a.y,a.size,0,Math.PI*2);
      ctx.fillStyle=rgb(col,al);ctx.fill();
    }

    // ENVELO halt events (flash + fade)
    for (var e=enveloEvents.length-1;e>=0;e--) {
      var ev = enveloEvents[e];
      ev.alpha -= 0.008;
      if (ev.alpha<=0) { enveloEvents.splice(e,1); continue; }
      ctx.font='500 7px "IBM Plex Mono"';
      ctx.fillStyle=rgb(RED,ev.alpha*0.5);
      ctx.textAlign='center';
      ctx.fillText('HALT',ev.x,ev.y-10);
    }
  }

  function spawnTelemetry(now) {
    if (isMob() && telemetry.length >= 4) return;
    var telDelay = isMob() ? 900 : 280;
    if (now-lastTel>telDelay) {
      lastTel=now;
      var label = dataLabels[Math.floor(Math.random()*dataLabels.length)];
      var side = Math.random()>0.5?1:-1;
      var spawnDist = isMob() ? radius+10+Math.random()*15 : radius+35+Math.random()*60;
      var spawnX = cx+side*spawnDist;
      // Clamp to viewport
      spawnX = Math.max(isMob()?30:10, Math.min(W-(isMob()?30:10), spawnX));
      telemetry.push({
        text: isMob() ? label.split(':')[0] : label,
        x: spawnX,
        y: Math.max(cy-radius*0.4, Math.min(cy+radius*0.3, cy-radius*0.4+Math.random()*radius*0.7)),
        tx: cx+(Math.random()-0.5)*radius*0.5,
        ty: cy+(Math.random()-0.5)*radius*0.5,
        alpha:1, prog:0, side:side
      });
    }
  }

  function drawTelemetry() {
    for (var i=telemetry.length-1;i>=0;i--) {
      var t=telemetry[i];
      t.prog+=isMob()?0.005:0.007;
      if(t.prog>1) t.alpha-=0.025;
      if(t.alpha<=0){telemetry.splice(i,1);continue;}

      var p=Math.min(t.prog,1);
      var e=p<0.5?2*p*p:1-Math.pow(-2*p+2,2)/2;
      var px=t.x+(t.tx-t.x)*e, py=t.y+(t.ty-t.y)*e;

      ctx.beginPath(); ctx.moveTo(t.x,t.y); ctx.lineTo(px,py);
      ctx.strokeStyle=rgb(GREEN,t.alpha*0.1);
      ctx.lineWidth=0.5; ctx.stroke();

      if(t.alpha>0.3){
        ctx.font='400 8px "IBM Plex Mono"';
        ctx.fillStyle=rgb(GREEN,t.alpha*0.75);
        ctx.textAlign=t.side>0?'left':'right';
        ctx.fillText(t.text,t.x,t.y);
      }

      ctx.beginPath(); ctx.arc(px,py,1.5,0,Math.PI*2);
      ctx.fillStyle=rgb(GREEN,t.alpha*0.7);
      ctx.fill();
    }
  }

  function drawHash(now) {
    if (isMob()) return; // Skip hash on mobile/landscape - overlaps content
    var x = W-16;
    var startY = cy-radius*0.3;
    var chars='0123456789abcdef';
    ctx.font='400 7.5px "IBM Plex Mono"';
    ctx.textAlign='right';
    for(var i=0;i<7;i++){
      var hash='';
      var seed=Math.floor(now*0.0008)+i*7;
      for(var j=0;j<14;j++) hash+=chars[(seed*(j+1)*31+j*17)%16];
      ctx.fillStyle=rgb(PURPLE,0.75-i*0.025);
      ctx.fillText(hash,x,startY+i*12);
    }
    ctx.fillStyle=rgb(PURPLE,0.8);
    ctx.fillText('HASH CHAIN \u25B8',x,startY-10);
  }

  var lastTime=0;
  var animRunning = false;
  var fadeTriggered = false;
  function animate(now) {
    if(!lastTime) lastTime=now;
    if (!fadeTriggered) { c.style.opacity = '1'; fadeTriggered = true; }
    var dt=Math.min(now-lastTime, 20); lastTime=now;
    ctx.clearRect(0,0,W,H);

    updateAgents(dt);
    spawnTelemetry(now);

    drawGrid();
    drawBoundary(now);
    drawBrackets();
    drawPulses();
    drawTelemetry();
    drawAgents();
    drawHash(now);
    drawLegend();

    ctx.restore();
    requestAnimationFrame(animate);
  }

  var resizeTimer = null;
  window.addEventListener('resize', function(){
    if (!heroReady) return; // Don't resize during startup
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
      radiusLocked = false;
      resize();
      initAgents();
      for (var w = 0; w < 500; w++) updateAgents(16);
      enveloEvents = [];
      boundaryPulses = [];
      telemetry = [];
      lastTel = performance.now(); // Grace period before new telemetry
      for (var i=0; i<agents.length; i++) { agents[i].tier=0; agents[i].haltTimer=0; agents[i].mrcTimer=0;
        var _d=Math.sqrt((agents[i].x-cx)*(agents[i].x-cx)+(agents[i].y-cy)*(agents[i].y-cy));
        if(_d>radius*0.7){var _s=radius*0.5/_d;agents[i].x=cx+(agents[i].x-cx)*_s;agents[i].y=cy+(agents[i].y-cy)*_s;agents[i].vx*=0.2;agents[i].vy*=0.2;}
      }
    }, 250);
  });

  function startHero() {
    // Delay to let mobile viewport settle (URL bar, orientation)
    setTimeout(function() {
      resize();
      initAgents();
      // Warm up: 500 frames = ~8s simulated — agents fully settled
      for (var w=0; w<500; w++) updateAgents(16);
      // Clear ALL warm-up visual state so first frame is clean
      enveloEvents = [];
      boundaryPulses = [];
      telemetry = [];
      for (var i=0; i<agents.length; i++) {
        agents[i].tier = 0;
        agents[i].haltTimer = 0;
        agents[i].mrcTimer = 0;
        // Push any agents near boundary inward so they don't immediately flash
        var dx = agents[i].x - cx, dy = agents[i].y - cy;
        var dist = Math.sqrt(dx*dx+dy*dy);
        if (dist > radius * 0.7) {
          var scale = (radius * 0.65) / dist;
          agents[i].x = cx + dx * scale;
          agents[i].y = cy + dy * scale;
          agents[i].vx *= 0.3;
          agents[i].vy *= 0.3;
        }
      }
      requestAnimationFrame(animate);
    }, 200);
  }
  if (document.readyState === 'complete') {
    startHero();
  } else {
    window.addEventListener('load', startHero);
  }
})();
      </script>
    </section>


    <!-- ENVELO -->
    <section id="envelo" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">THE ENVELO INTERLOCK</span>
          <h2 class="section-title">ENVELO Interlock</h2>
          <p class="section-lead">
            Enforced Non-Violable Execution-Limit Override — three-tier enforcement from self-correction to hard halt.
          </p>
        </div>
      </div>

      <!-- Mechanism Flow Diagram - Animated Canvas v2 -->
      <div class="reveal" style="display: flex; justify-content: center; margin: 0 auto var(--space-4); max-width: 880px;">
        <div style="width: 100%;">
          <canvas id="envelo-canvas" style="width: 100%; display: block;"></canvas>
      <!-- Mobile Static: ENVELO v5 -->
      <div class="m-diagram" aria-label="ENVELO three-tier enforcement">
        <div class="d-label"><div class="d-dot d-dot-p"></div><span class="d-tag">ENVELO INTERLOCK · RUNTIME</span></div>
        <div class="e-pipe">
          <div class="e-node"><div class="e-icon"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><circle cx="16" cy="16" r="10" fill="none" stroke="rgba(22,120,58,1.00)" stroke-width="1.5"/><circle cx="16" cy="16" r="3" fill="rgba(22,120,58,1.00)"/></svg></div><span class="e-nm">MODEL</span><span class="e-ds">Action request</span></div>
          <div class="e-arrow"><div class="e-aline"></div><div class="e-atip"></div></div>
          <div class="e-node e-node-core"><div class="e-icon"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><rect x="6" y="6" width="20" height="20" rx="5" fill="rgba(60,48,100,0.62)" stroke="rgba(60,48,100,1.00)" stroke-width="2"/><circle cx="16" cy="16" r="4" fill="rgba(60,48,100,1.00)"/></svg></div><span class="e-nm">VALIDATE</span><span class="e-ds">Boundary check</span></div>
          <div class="e-arrow"><div class="e-aline"></div><div class="e-atip"></div></div>
          <div class="e-node"><div class="e-icon"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><rect x="7" y="9" width="18" height="14" rx="2" fill="none" stroke="rgba(0,0,0,0.45)" stroke-width="1.5"/><circle cx="16" cy="16" r="2.5" fill="rgba(0,0,0,0.38)"/></svg></div><span class="e-nm">VERDICT</span><span class="e-ds">Enforce</span></div>
        </div>
        <div class="e-tiers">
          <div class="e-tier e-tg"><div class="e-bar"></div><div class="e-body"><span class="e-tl">APPROACH</span>Self-correction near ODD boundary</div></div>
          <div class="e-tier e-ta"><div class="e-bar"></div><div class="e-body"><span class="e-tl">BREACH</span>Minimum Risk Condition activated</div></div>
          <div class="e-tier e-tr"><div class="e-bar"></div><div class="e-body"><span class="e-tl">WALL</span>Hard halt — execution terminated</div></div>
        </div>
        <div class="d-foot">NON-BYPASSABLE · TAMPER-EVIDENT</div>
      </div>

                                </div>
      </div>
      <script>
      (function() {
        var c = document.getElementById('envelo-canvas');
        if (!c) return;
        var ctx = c.getContext('2d');
        var dpr = window.devicePixelRatio || 1;
        var W = 0, H = 0;
                var GREEN  = [92,214,133];
        var PURPLE = [157,140,207];
        var RED    = [214,92,92];
        var AMBER  = [214,160,92];
        var WHITE  = [220,220,230];
        var DIM    = [140,145,160];

        function rgb(c,a){ return 'rgba('+c[0]+','+c[1]+','+c[2]+','+a+')'; }
        function lerp(a,b,t){ return a+(b-a)*t; }
        function ease(t){ return t<0.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2; }
        function clamp(t){ return Math.min(Math.max(t,0),1); }

        var hexC = '0123456789abcdef';
        function rndHex(len, seed){ var s=''; for(var i=0;i<len;i++) s+=hexC[Math.abs((seed*(i+1)*31+i*17))%16]; return s; }

        var packets = [];
        var streamParticles = [];
        var bursts = [];
        var stats = { total:0, exec:0, mrc:0, halt:0 };
        var lastSpawn = 0;
        var nextDelay = 2000;
        var enveloPhase = 0;
        var gateAngle = 0;
        var gateTarget = 0;
        var ringPulses = [];
        var frameCount = 0;
        var sessionId = '';
        for(var i=0;i<8;i++) sessionId+=hexC[Math.floor(Math.random()*16)];

        var dataLabels = [
          'speed:47.2','alt:3180','temp:71.8','lat:30.41',
          'load:81.3','rpm:2395','freq:59.98','rate:11.8',
          'flow:3.18','angle:12.3','depth:14.8','torque:87'
        ];

        function resize() {
          telemetry = [];
          catEnveloEvents = [];
          boundaryPulses = [];
          stressMarkers = [];
          var r = c.parentElement.getBoundingClientRect();
          W = r.width;
          H = W < 550 ? 560 : 340;
    // Landscape: cap canvas height
    if (window.innerHeight < 500 && window.innerWidth > window.innerHeight) {
      H = Math.min(H, window.innerHeight * 0.80);
    }
          c.width = W * dpr;
          c.height = H * dpr;
          c.style.height = H + 'px';
          ctx.setTransform(dpr,0,0,dpr,0,0);
        }
        c._saResize = resize;

        function layout() {
          var mob = W < 550;
          if (mob) {
            var cx = W/2;
            var sc = H/420; // scale factor — 420 is the original mobile H
            var rsc = Math.min(sc, 1); // don't upscale radii beyond original
            return { model:{x:cx,y:H*0.12,r:38*rsc}, envelo:{x:cx,y:H*0.37,r:55*rsc}, gate:{x:cx,y:H*0.60,r:30*rsc},
              exec:{x:cx-80*rsc,y:H*0.82,w:90*rsc,h:30*rsc}, mrc:{x:cx,y:H*0.82,w:90*rsc,h:30*rsc}, halt:{x:cx+80*rsc,y:H*0.82,w:90*rsc,h:30*rsc}, mob:true };
          }
          var cy=H/2-4, m=W*0.06, s=(W-m*2)/5;
          return { model:{x:m+s*0.5,y:cy,r:46}, envelo:{x:m+s*1.85,y:cy,r:64}, gate:{x:m+s*3.1,y:cy,r:34},
            exec:{x:m+s*4.3,y:cy-52,w:108,h:30}, mrc:{x:m+s*4.3,y:cy,w:108,h:30}, halt:{x:m+s*4.3,y:cy+52,w:108,h:30}, mob:false };
        }

        function paths(L) {
          if(!L.mob) return [
            {ax:L.model.x+L.model.r,ay:L.model.y,bx:L.envelo.x-L.envelo.r,by:L.envelo.y},
            {ax:L.envelo.x+L.envelo.r,ay:L.envelo.y,bx:L.gate.x-L.gate.r,by:L.gate.y},
            {ax:L.gate.x+L.gate.r,ay:L.gate.y,bx:L.exec.x-L.exec.w/2,by:L.exec.y},
            {ax:L.gate.x+L.gate.r,ay:L.gate.y,bx:L.mrc.x-L.mrc.w/2,by:L.mrc.y},
            {ax:L.gate.x+L.gate.r,ay:L.gate.y,bx:L.halt.x-L.halt.w/2,by:L.halt.y}
          ];
          return [
            {ax:L.model.x,ay:L.model.y+L.model.r,bx:L.envelo.x,by:L.envelo.y-L.envelo.r},
            {ax:L.envelo.x,ay:L.envelo.y+L.envelo.r,bx:L.gate.x,by:L.gate.y-L.gate.r},
            {ax:L.gate.x,ay:L.gate.y+L.gate.r,bx:L.exec.x,by:L.exec.y-L.exec.h/2},
            {ax:L.gate.x,ay:L.gate.y+L.gate.r,bx:L.mrc.x,by:L.mrc.y-L.mrc.h/2},
            {ax:L.gate.x,ay:L.gate.y+L.gate.r,bx:L.halt.x,by:L.halt.y-L.halt.h/2}
          ];
        }

        // ── GRID ──
        function drawGrid() { /* removed */ }

        // ── PERIPHERAL DATA ──
        function drawPeripheral(time,L) {
          if(L.mob || H < 280) return;
          ctx.font='400 7.5px "IBM Plex Mono", monospace';

          // Top left - system ID + clock
          ctx.textAlign='left';
          var el=Math.floor(time);
          var h=Math.floor(el/3600)%100,m=Math.floor((el%3600)/60),s=el%60;
          ctx.fillStyle=rgb(DIM,0.88);
          ctx.fillText('T+ '+(h<10?'0':'')+h+':'+(m<10?'0':'')+m+':'+(s<10?'0':'')+s, 8, 14);
          ctx.fillStyle=rgb(DIM,0.88);
          ctx.fillText('ENVELO INTERLOCK', 8, 24);

          // Top right
          ctx.textAlign='right';
          ctx.fillStyle=rgb(DIM,0.85);
          ctx.fillText('SID:'+sessionId.toUpperCase(), W-8, 14);
          ctx.fillStyle=rgb(DIM,0.78);
          ctx.fillText('FRM:'+String(frameCount).padStart(6,'0'), W-8, 24);

          // Left column - scrolling params
          ctx.textAlign='left';
          var params = [
            ['SYS.CLK', (48271.3+time*0.1).toFixed(1)+'s'],
            ['MEM.USE', (67.2+Math.sin(time*0.3)*2).toFixed(1)+'%'],
            ['THR.ACT', '24/32'],
            ['BUF.STA', 'NOM'],
            ['NET.LAT', '<1ms'],
            ['IO.WAIT', '0.00'],
            ['HEAP',    (38.1+Math.sin(time*0.7)*3).toFixed(1)+'MB'],
            ['QUEUE',   Math.floor(3+Math.sin(time)*2)+'']
          ];
          for(var i=0;i<params.length;i++){
            ctx.fillStyle=rgb(DIM,0.75);
            ctx.fillText(params[i][0], 8, 42+i*11);
            ctx.fillStyle=rgb(DIM,0.78);
            ctx.fillText(params[i][1], 52, 42+i*11);
          }

          // Right column - hash chain
          ctx.textAlign='right';
          var hx=W-8, hy=42;
          ctx.fillStyle=rgb(PURPLE,0.65);
          ctx.fillText('HASH CHAIN \u25B8', hx, hy);
          var seed=Math.floor(time*0.8);
          for(var i=0;i<7;i++){
            ctx.fillStyle=rgb(PURPLE,0.75-i*0.035);
            ctx.fillText(rndHex(16,seed+i*7),hx,hy+10+i*9);
          }

          // Bottom
          ctx.textAlign='left';ctx.fillStyle=rgb(DIM,0.85);
          var d=new Date();
          ctx.fillText('UTC '+d.toISOString().substr(11,12),8,H-6);
          ctx.textAlign='right';ctx.fillStyle=rgb(DIM,0.78);
          ctx.fillText('ENVELO-RT v4.2.1 \u00B7 NODE:PRIMARY',W-8,H-6);
        }

        // ── PATH ──
        function drawPath(p,col,alpha,label) {
          ctx.beginPath();ctx.moveTo(p.ax,p.ay);ctx.lineTo(p.bx,p.by);
          ctx.setLineDash([1,3]);ctx.strokeStyle=rgb(col,alpha*1.0);
          ctx.lineWidth=0.5;ctx.stroke();ctx.setLineDash([]);

          ctx.beginPath();ctx.moveTo(p.ax,p.ay);ctx.lineTo(p.bx,p.by);
          ctx.strokeStyle=rgb(col,alpha*1.4);ctx.lineWidth=0.8;ctx.stroke();

          var ang=Math.atan2(p.by-p.ay,p.bx-p.ax);
          ctx.beginPath();ctx.moveTo(p.bx,p.by);
          ctx.lineTo(p.bx-4*Math.cos(ang-0.3),p.by-4*Math.sin(ang-0.3));
          ctx.lineTo(p.bx-4*Math.cos(ang+0.3),p.by-4*Math.sin(ang+0.3));
          ctx.closePath();ctx.fillStyle=rgb(col,alpha*1.6);ctx.fill();

          if(label){
            var mx=(p.ax+p.bx)/2,my=(p.ay+p.by)/2-8;
            ctx.font='500 7px "IBM Plex Mono", monospace';
            ctx.textAlign='center';ctx.fillStyle=rgb(col,0.75);
            ctx.fillText(label,mx,my);
          }
        }

        // ── STREAMS ──
        function updateStreams(time,ps) {
          if(Math.random()<0.18){
            var pi=Math.floor(Math.random()*Math.min(ps.length,2));
            streamParticles.push({path:pi,t:0,speed:0.002+Math.random()*0.002,
              size:0.4+Math.random()*0.3,alpha:0.35+Math.random()*0.2});
          }
          for(var i=streamParticles.length-1;i>=0;i--){
            var sp=streamParticles[i];sp.t+=sp.speed;
            if(sp.t>1){streamParticles.splice(i,1);continue;}
            var p=ps[sp.path];if(!p){streamParticles.splice(i,1);continue;}
            var x=lerp(p.ax,p.bx,sp.t),y=lerp(p.ay,p.by,sp.t);
            var fade=sp.t<0.1?sp.t*10:(sp.t>0.9?(1-sp.t)*10:1);
            ctx.beginPath();ctx.arc(x,y,sp.size,0,Math.PI*2);
            ctx.fillStyle=rgb(sp.path===0?GREEN:PURPLE,sp.alpha*fade);ctx.fill();
          }
        }

        // ── CIRCLE NODE ──
        function drawCircleNode(x,y,r,col,label,time) {
          // Soft radial glow wash (hero style)
          var h=ctx.createRadialGradient(x,y,r*0.88,x,y,r*1.08);
          h.addColorStop(0,rgb(col,0));
          h.addColorStop(0.5,rgb(col,0.04));
          h.addColorStop(1,rgb(col,0));
          ctx.fillStyle=h;ctx.beginPath();ctx.arc(x,y,r*1.3,0,Math.PI*2);ctx.fill();

          // Main ring
          ctx.beginPath();ctx.arc(x,y,r,0,Math.PI*2);
          ctx.strokeStyle=rgb(col,0.2);ctx.lineWidth=1.5;ctx.stroke();

          // Rotating dashed inner ring (hero style)
          ctx.save();ctx.translate(x,y);ctx.rotate(time*0.15);
          ctx.beginPath();ctx.arc(0,0,r*0.88,0,Math.PI*2);
          ctx.setLineDash([2,7]);
          ctx.strokeStyle=rgb(col,0.08);
          ctx.lineWidth=1;ctx.stroke();
          ctx.setLineDash([]);ctx.restore();

          // Registration marks
          var ml=5;
          ctx.strokeStyle=rgb(col,0.22);ctx.lineWidth=0.6;
          ctx.beginPath();ctx.moveTo(x-r+4,y-r);ctx.lineTo(x-r+4+ml,y-r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r,y-r+4);ctx.lineTo(x-r,y-r+4+ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r-4,y-r);ctx.lineTo(x+r-4-ml,y-r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r,y-r+4);ctx.lineTo(x+r,y-r+4+ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r+4,y+r);ctx.lineTo(x-r+4+ml,y+r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r,y+r-4);ctx.lineTo(x-r,y+r-4-ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r-4,y+r);ctx.lineTo(x+r-4-ml,y+r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r,y+r-4);ctx.lineTo(x+r,y+r-4-ml);ctx.stroke();

          ctx.font='500 9px "IBM Plex Mono", monospace';
          ctx.textAlign='center';ctx.fillStyle=rgb(col,1.0);
          ctx.fillText(label,x,y+r+13);
        }

        // ── RECT NODE ──
        function drawRectNode(x,y,w,h,col,label) {
          var rx=x-w/2,ry=y-h/2,rr=5;
          ctx.beginPath();
          ctx.moveTo(rx+rr,ry);ctx.arcTo(rx+w,ry,rx+w,ry+h,rr);
          ctx.arcTo(rx+w,ry+h,rx,ry+h,rr);ctx.arcTo(rx,ry+h,rx,ry,rr);
          ctx.arcTo(rx,ry,rx+w,ry,rr);ctx.closePath();
          ctx.fillStyle='rgba(0,0,0,0.04)';ctx.fill();
          ctx.strokeStyle=rgb(col,0.28);ctx.lineWidth=0.8;ctx.stroke();

          ctx.beginPath();ctx.moveTo(rx+rr+3,ry+0.5);ctx.lineTo(rx+w-rr-3,ry+0.5);
          var tl=ctx.createLinearGradient(rx,ry,rx+w,ry);
          tl.addColorStop(0,rgb(col,0));tl.addColorStop(0.5,rgb(col,0.12));tl.addColorStop(1,rgb(col,0));
          ctx.strokeStyle=tl;ctx.lineWidth=0.4;ctx.stroke();

          ctx.font='500 8px "IBM Plex Mono", monospace';
          ctx.textAlign='center';ctx.fillStyle=rgb(col,0.75);
          ctx.fillText(label,x,y+2.5);
        }

        // ── MODEL INTERIOR ──
        function drawModelInterior(x,y,r,time) {
          var s=5,g=2,ox=x-(s+g/2),oy=y-(s+g/2)-3;
          for(var rr=0;rr<2;rr++) for(var cc=0;cc<2;cc++){
            var sx=ox+cc*(s+g),sy=oy+rr*(s+g);
            ctx.beginPath();ctx.rect(sx,sy,s,s);
            ctx.strokeStyle=rgb(GREEN,0.7);ctx.lineWidth=0.9;ctx.stroke();
            ctx.fillStyle=rgb(GREEN,0.04+0.02*Math.sin(time*2.2+rr*1.5+cc*0.9));ctx.fill();
          }
          // Status indicator only
          ctx.beginPath();ctx.arc(x,y+10,1.5,0,Math.PI*2);
          ctx.fillStyle=rgb(GREEN,0.28+0.12*Math.sin(time*3));ctx.fill();
        }

        // ── ENVELO INTERIOR ──
        function drawEnveloInterior(x,y,r,time,phase) {
          var ba=0.05+phase*0.12;
          for(var i=3;i>=1;i--){
            var rr=r*(0.2+i*0.16),rot=time*(0.12+i*0.06)*(i%2===0?1:-1);
            ctx.save();ctx.translate(x,y);ctx.rotate(rot);
            ctx.beginPath();ctx.arc(0,0,rr,0,Math.PI*2);
            ctx.setLineDash([1.5,3+i*2]);ctx.strokeStyle=rgb(PURPLE,ba*2.2-i*0.02);
            ctx.lineWidth=0.4;ctx.stroke();ctx.setLineDash([]);
            if(i===3){for(var t=0;t<12;t++){
              var ta=(Math.PI/6)*t;ctx.beginPath();
              ctx.moveTo(Math.cos(ta)*(rr-2),Math.sin(ta)*(rr-2));
              ctx.lineTo(Math.cos(ta)*(rr+2),Math.sin(ta)*(rr+2));
              ctx.strokeStyle=rgb(PURPLE,ba*0.4);ctx.lineWidth=0.3;ctx.stroke();
            }}
            ctx.restore();
          }

          var coreR=5+phase*3;
          var cg=ctx.createRadialGradient(x,y,0,x,y,coreR);
          cg.addColorStop(0,rgb(PURPLE,0.7+phase*0.3));
          cg.addColorStop(0.6,rgb(PURPLE,0.08+phase*0.1));
          cg.addColorStop(1,rgb(PURPLE,0));
          ctx.fillStyle=cg;ctx.beginPath();ctx.arc(x,y,coreR,0,Math.PI*2);ctx.fill();
          ctx.beginPath();ctx.arc(x,y,1.5,0,Math.PI*2);
          ctx.fillStyle=rgb([220,210,240],0.65+phase*0.35);ctx.fill();

          for(var i=ringPulses.length-1;i>=0;i--){
            var rp=ringPulses[i];rp.r+=1.0;rp.alpha-=0.012;
            if(rp.alpha<=0){ringPulses.splice(i,1);continue;}
            ctx.beginPath();ctx.arc(x,y,rp.r,0,Math.PI*2);
            ctx.strokeStyle=rgb(PURPLE,rp.alpha);ctx.lineWidth=0.6;ctx.stroke();
          }

          // Readouts removed — clean node presentation
        }

        // ── GATE INTERIOR ──
        function drawGateInterior(x,y,r,time) {
          gateAngle+=(gateTarget-gateAngle)*0.06;
          ctx.beginPath();ctx.arc(x,y,r*0.6,0,Math.PI*2);
          ctx.strokeStyle='rgba(0,0,0,0.21)';ctx.lineWidth=0.8;ctx.stroke();
          for(var i=0;i<8;i++){
            var a=(Math.PI/4)*i;ctx.beginPath();
            ctx.moveTo(x+Math.cos(a)*r*0.5,y+Math.sin(a)*r*0.5);
            ctx.lineTo(x+Math.cos(a)*r*0.6,y+Math.sin(a)*r*0.6);
            ctx.strokeStyle='rgba(0,0,0,0.15)';ctx.lineWidth=0.4;ctx.stroke();
          }
          ctx.save();ctx.translate(x,y);ctx.rotate(gateAngle);
          ctx.beginPath();ctx.moveTo(0,-r*0.42);ctx.lineTo(0,r*0.42);
          var gc=Math.abs(gateAngle)<0.05?'rgba(0,0,0,0.21)':
                 (gateAngle>0?rgb(GREEN,0.6):rgb(RED,0.6));
          ctx.strokeStyle=gc;ctx.lineWidth=1.2;ctx.stroke();
          ctx.beginPath();ctx.arc(0,-r*0.42,1,0,Math.PI*2);ctx.fillStyle=gc;ctx.fill();
          ctx.beginPath();ctx.arc(0,r*0.42,1,0,Math.PI*2);ctx.fillStyle=gc;ctx.fill();
          ctx.restore();

          ctx.font='400 7px "IBM Plex Mono", monospace';ctx.textAlign='center';
          var state=Math.abs(gateAngle)<0.05?'IDLE':(gateAngle>0?'PASS':'DENY');
          ctx.fillStyle=Math.abs(gateAngle)<0.05?'rgba(0,0,0,0.18)':
            (gateAngle>0?rgb(GREEN,0.25):rgb(RED,0.25));
          ctx.fillText(state,x,y+r*0.72);
        }

        // ── PACKET ──
        function drawPacket(px,py,size,col,opacity) {
          var g1=ctx.createRadialGradient(px,py,0,px,py,size*2.8);
          g1.addColorStop(0,rgb(col,opacity*0.28));g1.addColorStop(1,rgb(col,0));
          ctx.fillStyle=g1;ctx.beginPath();ctx.arc(px,py,size*2.8*1.2,0,Math.PI*2);ctx.fill();
          ctx.beginPath();ctx.arc(px,py,size,0,Math.PI*2);
          ctx.fillStyle=rgb(col,opacity);ctx.fill();
        }

        function spawn(ts) {
          packets.push({state:0,t:0,speed:0.00022+Math.random()*0.00012,
            decision:(function(){var r=Math.random();return r<0.65?'exec':(r<0.90?'mrc':'halt');})(),opacity:0.85,r:2.2+Math.random()*1,
            trail:[],x:0,y:0,label:dataLabels[Math.floor(Math.random()*dataLabels.length)],
            labelOpacity:1,spawned:ts});
          nextDelay=1800+Math.random()*2200;lastSpawn=ts;
        }

        var lastTime=0;
  var animRunning = false;
        function animate(ts) {
          if(!lastTime) lastTime=ts;
          var dt=Math.min(ts-lastTime,32);lastTime=ts;frameCount++;
          resize();var L=layout();var ps=paths(L);var time=ts/1000;
          ctx.clearRect(0,0,W,H);

          // drawGrid();
          drawPeripheral(time,L);

          drawPath(ps[0],GREEN,0.15,'ACTION');
          drawPath(ps[1],PURPLE,0.12,'VERDICT');
          drawPath(ps[2],GREEN,0.07,'');
          drawPath(ps[3],AMBER,0.07,'');
          drawPath(ps[4],RED,0.07,'');
          updateStreams(time,ps);

          drawCircleNode(L.model.x,L.model.y,L.model.r,GREEN,'MODEL',time);
          drawModelInterior(L.model.x,L.model.y,L.model.r,time);
          drawCircleNode(L.envelo.x,L.envelo.y,L.envelo.r,PURPLE,'ENVELO',time);
          drawEnveloInterior(L.envelo.x,L.envelo.y,L.envelo.r,time,enveloPhase);
          drawCircleNode(L.gate.x,L.gate.y,L.gate.r,WHITE,'GATE',time);
          drawGateInterior(L.gate.x,L.gate.y,L.gate.r,time);
          drawRectNode(L.exec.x,L.exec.y,L.exec.w,L.exec.h,GREEN,'EXECUTE');
          drawRectNode(L.mrc.x,L.mrc.y,L.mrc.w,L.mrc.h,AMBER,'MRC');
          drawRectNode(L.halt.x,L.halt.y,L.halt.w,L.halt.h,RED,'HALT');

          // Counters near endpoints
          ctx.font='400 7px "IBM Plex Mono", monospace';
          if(stats.exec>0){ctx.textAlign='left';ctx.fillStyle=rgb(GREEN,0.2);
            ctx.fillText(stats.exec+'',L.exec.x+L.exec.w/2+4,L.exec.y+2);}
          if(stats.mrc>0){ctx.textAlign='left';ctx.fillStyle=rgb(AMBER,0.2);
            ctx.fillText(stats.mrc+'',L.mrc.x+L.mrc.w/2+4,L.mrc.y+2);}
          if(stats.halt>0){ctx.textAlign='left';ctx.fillStyle=rgb(RED,0.2);
            ctx.fillText(stats.halt+'',L.halt.x+L.halt.w/2+4,L.halt.y+2);}

          enveloPhase*=0.97;
          if(ts-lastSpawn>nextDelay) spawn(ts);
          var anyAtGate=false;

          for(var i=packets.length-1;i>=0;i--){
            var p=packets[i];p.t+=p.speed*16;var et=ease(clamp(p.t));var px,py,col;
            switch(p.state){
              case 0:px=lerp(ps[0].ax,ps[0].bx,et);py=lerp(ps[0].ay,ps[0].by,et);col=GREEN;
                p.labelOpacity=et<0.75?1:(1-et)*4;
                if(p.t>=1){p.t=0;p.state=1;p.speed*=0.22;p.trail=[];p.labelOpacity=0;enveloPhase=1;
                  ringPulses.push({r:4,alpha:0.4});}break;
              case 1:px=L.envelo.x;py=L.envelo.y;col=PURPLE;p.r=Math.max(p.r*0.99,1);
                if(Math.random()<0.025) ringPulses.push({r:3+Math.random()*8,alpha:0.1});
                if(p.t>=1){p.t=0;p.state=2;p.speed=0.0005;p.trail=[];p.r=2.2+Math.random();stats.total++;}break;
              case 2:px=lerp(ps[1].ax,ps[1].bx,et);py=lerp(ps[1].ay,ps[1].by,et);col=PURPLE;
                if(p.t>=1){p.t=0;p.state=3;p.speed=0.0007;p.trail=[];}break;
              case 3:anyAtGate=true;
                if(p.decision==='exec'){gateTarget=Math.PI/4;px=lerp(ps[2].ax,ps[2].bx,et);
                  py=lerp(ps[2].ay,ps[2].by,et);col=GREEN;}
                else if(p.decision==='mrc'){gateTarget=0.05;px=lerp(ps[3].ax,ps[3].bx,et);
                  py=lerp(ps[3].ay,ps[3].by,et);col=AMBER;}
                else{gateTarget=-Math.PI/4;px=lerp(ps[4].ax,ps[4].bx,et);
                  py=lerp(ps[4].ay,ps[4].by,et);col=RED;}
                if(p.t>=1){p.state=4;
                  if(p.decision==='exec')stats.exec++;
                  else if(p.decision==='mrc'){stats.mrc++;for(var b=0;b<3;b++)bursts.push({x:px,y:py,
                    vx:(Math.random()-0.5)*1.5,vy:(Math.random()-0.5)*1.5,life:0.7,r:0.6+Math.random()*0.5});}
                  else{stats.halt++;for(var b=0;b<6;b++)bursts.push({x:px,y:py,
                    vx:(Math.random()-0.5)*2.5,vy:(Math.random()-0.5)*2.5,life:1,r:0.8+Math.random()*1});}}break;
              case 4:px=p.x;py=p.y;p.opacity-=0.02;col=p.decision==='exec'?GREEN:RED;break;
            }
            p.x=px;p.y=py;p.trail.push({x:px,y:py});if(p.trail.length>12)p.trail.shift();
            for(var j=0;j<p.trail.length-1;j++){var ta=(j/p.trail.length)*0.06*p.opacity;
              ctx.beginPath();ctx.arc(p.trail[j].x,p.trail[j].y,p.r*(j/p.trail.length)*0.35,0,Math.PI*2);
              ctx.fillStyle=rgb(col,ta);ctx.fill();}
            if(p.state===1)p.trail=[];else drawPacket(px,py,p.r,col,p.opacity);
            // packet labels removed to prevent overlap
            if(p.opacity<=0)packets.splice(i,1);
          }
          if(!anyAtGate) gateTarget=0;

          for(var i=bursts.length-1;i>=0;i--){var b=bursts[i];
            b.x+=b.vx;b.y+=b.vy;b.vx*=0.92;b.vy*=0.92;b.life-=0.018;
            if(b.life<=0){bursts.splice(i,1);continue;}
            var bg=ctx.createRadialGradient(b.x,b.y,0,b.x,b.y,b.r*b.life*1.8);
            bg.addColorStop(0,rgb(RED,b.life*0.35));bg.addColorStop(1,rgb(RED,0));
            ctx.fillStyle=bg;ctx.beginPath();ctx.arc(b.x,b.y,b.r*b.life*2.5,0,Math.PI*2);ctx.fill();
            ctx.beginPath();ctx.arc(b.x,b.y,b.r*b.life,0,Math.PI*2);
            ctx.fillStyle=rgb(RED,b.life*0.7);ctx.fill();}

          ctx.font='400 7.5px "IBM Plex Mono", monospace';ctx.textAlign='center';
          ctx.fillStyle='rgba(0,0,0,1.00)';
          ctx.fillText('AUDIT \u00B7 '+stats.total+' CHECKED \u00B7 '+stats.exec+' PASSED \u00B7 '+stats.block+' BLOCKED',
            W/2,L.mob?H-10:H-8);

          requestAnimationFrame(animate);
        }

        resize();window.addEventListener('resize',resize);
        requestAnimationFrame(animate);
      })();
      </script>

      <!-- Tagline -->
      <div class="reveal" style="text-align: center; margin-bottom: var(--space-4);">
        <p style="font-size: 22px; color: var(--text-primary); max-width: 700px; margin: 0 auto 16px; line-height: 1.5; font-weight: 500;">
          The runtime layer that makes boundaries <span style="color: rgba(22,120,58,1.00);">unbreakable</span>
        </p>
        <p style="font-size: 15px; color: var(--text-secondary); max-width: 600px; margin: 0 auto; line-height: 1.6;">
          Every autonomous action is validated against operational limits at runtime — Approach triggers self-correction. Breach forces Minimum Risk Condition. Wall contact halts execution.
        </p>
      </div>

      <!-- Four Pillars -->
      <div class="reveal" style="max-width:700px;margin:0 auto var(--space-3);">
        <div class="hud-frame hud-scanline"><i></i>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num">01</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div><div class="hud-title">Non-Bypassable</div><div class="hud-desc">Every action must pass through ENVELO. No backdoors, no overrides, no exceptions.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num">02</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div><div class="hud-title">Tiered Enforcement</div><div class="hud-desc">Three enforcement tiers with zero escape paths. Each response level is architecturally mandatory — not policy-configurable.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num">03</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div><div class="hud-title">Real-Time</div><div class="hud-desc">Validation happens at execution time. No stale checks, no delayed enforcement.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num">04</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div><div class="hud-title">Tamper-Evident</div><div class="hud-desc">Every check is logged with cryptographic signatures. Full audit trail.</div></div>
          </div>
        </div>
      </div>
      <div class="reveal" style="text-align:center;margin-bottom:var(--space-2);">
        <span style="font-family:var(--mono);font-size:11px;letter-spacing:1px;color:rgba(0,0,0,0.52);">Deployed on your infrastructure as a <span style="color:rgba(22,120,58,1.00);">runtime interlock</span> — outbound-only, non-bypassable</span>
      </div>
    </section>

    <!-- ═══ WHY CERTIFY ═══ -->
    <section id="value" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">THE BUSINESS CASE</span>
          <h2 class="section-title">Why It Matters</h2>
          <p class="section-lead">
            ODDC certification solves the governance proof problem that stalls enterprise AI procurement.
          </p>
        </div>
      </div>

      <div class="reveal" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:var(--space-2);margin-top:var(--space-2);">
        <div class="hud-frame"><i></i>
          <div style="display:flex;align-items:flex-start;gap:12px;">
            <span class="hud-num">01</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div>
              <div class="hud-title">Accelerate Procurement</div>
              <div class="hud-desc">Independent, auditable proof that your system operates within defined boundaries — compressing legal review from months to weeks.</div>
            </div>
          </div>
        </div>
        <div class="hud-frame"><i></i>
          <div style="display:flex;align-items:flex-start;gap:12px;">
            <span class="hud-num">02</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div>
              <div class="hud-title">Competitive Differentiation</div>
              <div class="hud-desc">Certified vendors pass risk assessments that uncertified competitors cannot. A verifiable differentiator backed by runtime enforcement evidence and a public registry entry.</div>
            </div>
          </div>
        </div>
        <div class="hud-frame"><i></i>
          <div style="display:flex;align-items:flex-start;gap:12px;">
            <span class="hud-num">03</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div>
              <div class="hud-title">Defensible Governance</div>
              <div class="hud-desc">Auditable evidence that deployed systems have verified, enforceable operational controls — satisfying compliance committees and audit requirements.</div>
            </div>
          </div>
        </div>
        <div class="hud-frame"><i></i>
          <div style="display:flex;align-items:flex-start;gap:12px;">
            <span class="hud-num">04</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div>
              <div class="hud-title">Insurance &amp; Liability</div>
              <div class="hud-desc">Structured conformance evidence that insurers can reference when evaluating autonomous system risk — moving conversations from theoretical frameworks to verified enforcement data.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ═══ FOR ENTERPRISE BUYERS ═══ -->
    <section id="buyers" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">FOR ENTERPRISE PROCUREMENT</span>
          <h2 class="section-title">Require Verifiable Boundaries</h2>
          <p class="section-lead">
            Evaluating AI vendors? Stop accepting governance promises. Start requiring enforcement proof.
          </p>
        </div>
      </div>

      <div class="reveal" style="display:grid;grid-template-columns:1fr 1fr;gap:var(--space-3);margin-top:var(--space-2);">
        <div class="hud-frame"><i></i>
          <div class="hud-title" style="margin-bottom:12px;color:rgba(160,50,50,1.00);">The Problem</div>
          <div class="hud-desc" style="line-height:1.8;">Your organization is purchasing AI platforms that make operational decisions. Your risk teams need assurance these systems won't exceed designed parameters. Vendor self-assessments describe intentions, not enforcement.</div>
        </div>
        <div class="hud-frame"><i></i>
          <div class="hud-title" style="margin-bottom:12px;color:rgba(22,120,58,1.00);">The Standard</div>
          <div class="hud-desc" style="line-height:1.8;">ODDC certification is an independent determination that an autonomous system has verifiable, enforceable runtime boundary controls. When you require ODDC certification from your AI vendors, you are requiring proof — not promises. Certified systems are listed in the public Sentinel registry and subject to continuous conformance monitoring.</div>
        </div>
      </div>
      <div class="reveal" style="text-align:center;margin-top:var(--space-2);">
        <a href="mailto:conformance@sentinelauthority.org?subject=ODDC%20Procurement%20Requirements" style="display:inline-block;border:1px solid rgba(60,48,100,0.75);background:transparent;color:rgba(60,48,100,1.00);padding:14px 40px;font-family:var(--mono);font-size:10px;letter-spacing:2.5px;text-transform:uppercase;text-decoration:none;cursor:pointer;transition:all .2s;">Require ODDC From Your Vendors &#x2192;</a>
        <p style="font-family:var(--mono);font-size:9px;color:rgba(0,0,0,0.30);margin-top:10px;letter-spacing:0.5px;">Contact us to incorporate ODDC certification into your procurement evaluation criteria.</p>
      </div>
    </section>

    <!-- ═══ FOR REGULATORS & GOVERNMENT ═══ -->
    <section id="regulators" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">FOR REGULATORS &amp; GOVERNMENT</span>
          <h2 class="section-title">Require Enforceable Boundaries — Not Voluntary Frameworks</h2>
          <p class="section-lead">
            Approving autonomous systems based on self-assessment? Require independent enforcement proof instead.
          </p>
        </div>
      </div>

      <div class="reveal" style="display:grid;grid-template-columns:1fr 1fr;gap:var(--space-3);margin-top:var(--space-2);">
        <div class="hud-frame"><i></i>
          <div class="hud-title" style="margin-bottom:12px;color:rgba(160,50,50,1.00);">The Problem</div>
          <div class="hud-desc" style="line-height:1.8;">Your jurisdiction is approving autonomous systems based on manufacturer self-assessment and voluntary safety frameworks. You have no independent mechanism to verify that deployed systems actually operate within their designed parameters — and no enforcement layer if they don't.</div>
        </div>
        <div class="hud-frame"><i></i>
          <div class="hud-title" style="margin-bottom:12px;color:rgba(22,120,58,1.00);">The Standard</div>
          <div class="hud-desc" style="line-height:1.8;">ODDC certification gives regulators an independent, auditable tool for autonomous system governance. Require it, and compliant manufacturers gain a clear path to approval. Don't require it, and non-compliant systems remain indistinguishable from compliant ones. ODDC cuts both ways — it protects manufacturers who invest in safety and exposes those who don't.</div>
        </div>
      </div>
      <div class="reveal" style="text-align:center;margin-top:var(--space-2);">
        <a href="mailto:info@sentinelauthority.org?subject=ODDC%20Regulatory%20Integration" style="display:inline-block;border:1px solid rgba(60,48,100,0.75);background:transparent;color:rgba(60,48,100,1.00);padding:14px 40px;font-family:var(--mono);font-size:10px;letter-spacing:2.5px;text-transform:uppercase;text-decoration:none;cursor:pointer;transition:all .2s;">Explore Regulatory Integration &#x2192;</a>
        <p style="font-family:var(--mono);font-size:9px;color:rgba(0,0,0,0.30);margin-top:10px;letter-spacing:0.5px;">Contact us to discuss how ODDC certification integrates with your existing approval and oversight frameworks.</p>
      </div>
    </section>

    <section id="security" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">SECURITY ARCHITECTURE</span>
          <h2 class="section-title">Zero Trust, Zero Access</h2>
          <p class="section-lead">
            Enterprise security teams ask: "Is this interlock a backdoor?" The answer is <strong>architecturally impossible</strong>.
          </p>
        </div>
      </div>

      <!-- Security Data Flow Diagram - Canvas -->
      <div class="reveal" style="display: flex; justify-content: center; margin-bottom: 40px;">
        <div style="width: 100%; max-width: 880px;">
          <canvas id="security-canvas" style="width: 100%; display: block;"></canvas>
      <!-- Mobile Static: Security v5 -->
      <div class="m-diagram" aria-label="Zero trust security">
        <div class="d-label"><div class="d-dot d-dot-g"></div><span class="d-tag">SECURITY · ZERO TRUST</span></div>
        <div class="s-flow">
          <div class="h-node h-g"><div class="h-orb"><div class="h-atmo"></div><div class="h-ring"></div><div class="h-fill"></div><div class="h-detail"></div><div class="h-core"></div></div><span class="h-name">SYSTEM</span></div>
          <div class="h-conn" style="width:36px"><div class="h-conn-bg"></div><div class="h-conn-flow"></div><div class="h-conn-tip"></div><div class="s-badge">OUTBOUND</div></div>
          <div class="h-node h-p"><div class="h-orb h-orb-xl"><div class="h-atmo"></div><div class="h-orbit"></div><div class="h-ring"></div><div class="h-fill"></div><div class="h-detail"></div><div class="h-core"></div></div><span class="h-name">INTERLOCK</span><span class="h-sub">ENVELO</span></div>
          <div class="h-conn" style="width:36px"><div class="h-conn-bg"></div><div class="h-conn-flow"></div><div class="h-conn-tip"></div><div class="s-badge">TLS 1.3</div></div>
          <div class="h-node h-w"><div class="h-orb"><div class="h-ring"></div><div class="h-fill"></div><div class="h-detail"></div><div class="h-core"></div></div><span class="h-name">REGISTRY</span></div>
        </div>
        <div class="s-grid"><div class="s-item s-deny"><span>&#x2715;</span>NO COMMANDS</div><div class="s-item s-deny"><span>&#x2715;</span>NO EXECUTION</div><div class="s-item s-deny"><span>&#x2715;</span>NO ACCESS</div><div class="s-item s-deny"><span>&#x2715;</span>NO CONTROL</div></div>
        <div class="s-gap"></div>
        <div class="s-grid"><div class="s-item s-allow"><span>&#x2713;</span>NO PHI/PII</div><div class="s-item s-allow"><span>&#x2713;</span>OFFLINE OK</div><div class="s-item s-allow"><span>&#x2713;</span>AUDITABLE</div><div class="s-item s-allow"><span>&#x2713;</span>HIPAA/BAA</div></div>
      </div>

                                </div>
      </div>
      <script>
      (function() {
        var c = document.getElementById('security-canvas');
        if (!c) return;
        var ctx = c.getContext('2d');
        var dpr = window.devicePixelRatio || 1;
        var W = 0, H = 0;
                var GREEN  = [92,214,133];
        var PURPLE = [157,140,207];
        var RED    = [214,92,92];
        var DIM    = [140,145,160];

        function rgb(c,a){ return 'rgba('+c[0]+','+c[1]+','+c[2]+','+a+')'; }
        function lerp(a,b,t){ return a+(b-a)*t; }
        function ease(t){ return t<0.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2; }
        function clamp(t){ return Math.min(Math.max(t,0),1); }

        var hexC='0123456789abcdef';
        function rndHex(len,seed){var s='';for(var i=0;i<len;i++)s+=hexC[Math.abs((seed*(i+1)*31+i*17))%16];return s;}

        var outPackets=[];var inPackets=[];var bursts=[];var shieldRipples=[];var streamParticles=[];
        var stats={out:0,rejected:0};
        var lastOutSpawn=0;var lastInSpawn=0;var nextOutDelay=1500;var nextInDelay=4000;
        var enveloGlow=0;var bannerFlash=0;var frameCount=0;
        var sessionId='';for(var i=0;i<8;i++)sessionId+=hexC[Math.floor(Math.random()*16)];

        var telemetryLabels=['heartbeat','log_hash','cert_check','status_ok','audit_sync','config_ack',
          'uptime:99.7%','drift:0.00','sig_valid','boundary_ok','tls_1.3','pin_match'];
        var attackLabels=['SSH:22','RDP:3389','CMD:exec','PORT:scan','API:inject','ROOT:sudo','SHELL:rev','FTP:21'];

        function resize(){
          var r=c.parentElement.getBoundingClientRect();W=r.width;
          H=W<550?560:340;
          if(window.innerHeight<500&&window.innerWidth>window.innerHeight){H=Math.min(H,window.innerHeight*0.80);}
          c.width=W*dpr;c.height=H*dpr;
          c.style.height=H+'px';ctx.setTransform(dpr,0,0,dpr,0,0);
        }
        c._saResize = resize;

        function layout(){
          var mob=W<550;
          if(mob){var cx=W/2;var sc=H/460;var rsc=Math.min(sc,1);return{model:{x:cx,y:H*0.12,r:44*rsc},envelo:{x:cx,y:H*0.40,r:62*rsc},sentinel:{x:cx,y:H*0.70,r:44*rsc},mob:true};}
          var cy=H/2-8,m=W*0.08,s=(W-m*2)/3;
          return{model:{x:m+s*0.5,y:cy,r:48},envelo:{x:m+s*1.5,y:cy,r:66},sentinel:{x:m+s*2.5,y:cy,r:48},mob:false};
        }

        function getConns(L){
          if(!L.mob)return[
            {ax:L.model.x+L.model.r,ay:L.model.y,bx:L.envelo.x-L.envelo.r,by:L.envelo.y},
            {ax:L.envelo.x+L.envelo.r,ay:L.envelo.y,bx:L.sentinel.x-L.sentinel.r,by:L.sentinel.y}];
          return[
            {ax:L.model.x,ay:L.model.y+L.model.r,bx:L.envelo.x,by:L.envelo.y-L.envelo.r},
            {ax:L.envelo.x,ay:L.envelo.y+L.envelo.r,bx:L.sentinel.x,by:L.sentinel.y-L.sentinel.r}];
        }

        // ── GRID ──
        function drawGrid(){
          var sp=W<550?36:48;ctx.strokeStyle='rgba(0,0,0,0.04)';ctx.lineWidth=0.5;
          for(var x=sp;x<W;x+=sp){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke();}
          for(var y=sp;y<H;y+=sp){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke();}
          /* grid removed */
          for(var x=sp*2;x<W;x+=sp*2)for(var y=sp*2;y<H;y+=sp*2){
            ctx.beginPath();ctx.moveTo(x-2,y);ctx.lineTo(x+2,y);ctx.stroke();
            ctx.beginPath();ctx.moveTo(x,y-2);ctx.lineTo(x,y+2);ctx.stroke();}
        }

        // ── PERIPHERAL ──
        function drawPeripheral(time,L){
          if(L.mob||H<250)return;
          ctx.font='400 7.5px "IBM Plex Mono", monospace';

          // Top left
          ctx.textAlign='left';
          var el=Math.floor(time),h=Math.floor(el/3600)%100,m=Math.floor((el%3600)/60),s=el%60;
          ctx.fillStyle=rgb(DIM,0.88);
          ctx.fillText('T+ '+(h<10?'0':'')+h+':'+(m<10?'0':'')+m+':'+(s<10?'0':'')+s,8,14);
          ctx.fillStyle=rgb(DIM,0.88);ctx.fillText('ENVELO INTERLOCK',8,24);

          // Top right
          ctx.textAlign='right';ctx.fillStyle=rgb(DIM,0.85);
          ctx.fillText('SID:'+sessionId.toUpperCase(),W-8,14);
          ctx.fillStyle=rgb(DIM,0.78);
          ctx.fillText('FRM:'+String(frameCount).padStart(6,'0'),W-8,24);

          // Left column - security parameters
          ctx.textAlign='left';
          var sec=[
            ['PORTS.OPEN','0'],['INBOUND','DENIED'],['TLS.VER','1.3'],
            ['CERT.EXP','287d'],['HMAC','SHA-256'],['KEY.ROT','4h 12m'],
            ['FIREWALL','ACTIVE'],['IDS','NOMINAL']
          ];
          for(var i=0;i<sec.length;i++){
            ctx.fillStyle=rgb(DIM,0.75);ctx.fillText(sec[i][0],8,42+i*11);
            ctx.fillStyle=i===1?rgb(RED,0.15):rgb(DIM,0.15);
            ctx.fillText(sec[i][1],62,42+i*11);
          }

          // Right column - evidence hash chain
          ctx.textAlign='right';var hx=W-8,hy=42;
          ctx.fillStyle=rgb(PURPLE,0.8);ctx.fillText('EVIDENCE CHAIN \u25B8',hx,hy);
          var seed=Math.floor(time*0.8);
          for(var i=0;i<7;i++){
            ctx.fillStyle=rgb(PURPLE,0.75-i*0.035);
            ctx.fillText(rndHex(16,seed+i*7),hx,hy+10+i*9);
          }

          // Bottom
          ctx.textAlign='left';ctx.fillStyle=rgb(DIM,0.85);
          var d=new Date();ctx.fillText('UTC '+d.toISOString().substr(11,12),8,H-6);
          ctx.textAlign='right';ctx.fillStyle=rgb(DIM,0.78);
          ctx.fillText('SEC-MONITOR v4.2.1 \u00B7 THREAT:LOW',W-8,H-6);
        }

        // ── PATH ──
        function drawPath(p,col,alpha,label){
          ctx.beginPath();ctx.moveTo(p.ax,p.ay);ctx.lineTo(p.bx,p.by);
          ctx.setLineDash([1,3]);ctx.strokeStyle=rgb(col,alpha*1.0);
          ctx.lineWidth=0.5;ctx.stroke();ctx.setLineDash([]);
          ctx.beginPath();ctx.moveTo(p.ax,p.ay);ctx.lineTo(p.bx,p.by);
          ctx.strokeStyle=rgb(col,alpha*1.4);ctx.lineWidth=0.8;ctx.stroke();
          var ang=Math.atan2(p.by-p.ay,p.bx-p.ax);
          ctx.beginPath();ctx.moveTo(p.bx,p.by);
          ctx.lineTo(p.bx-4*Math.cos(ang-0.3),p.by-4*Math.sin(ang-0.3));
          ctx.lineTo(p.bx-4*Math.cos(ang+0.3),p.by-4*Math.sin(ang+0.3));
          ctx.closePath();ctx.fillStyle=rgb(col,alpha*1.6);ctx.fill();
          if(label){var mx=(p.ax+p.bx)/2,my=(p.ay+p.by)/2-8;
            ctx.font='500 7px "IBM Plex Mono", monospace';ctx.textAlign='center';
            ctx.fillStyle=rgb(col,0.75);ctx.fillText(label,mx,my);}
        }

        // ── STREAMS ──
        function updateStreams(time,conns){
          if(Math.random()<0.14){var ci=Math.floor(Math.random()*conns.length);
            streamParticles.push({conn:ci,t:0,speed:0.002+Math.random()*0.002,
              size:0.4+Math.random()*0.3,alpha:0.35+Math.random()*0.2});}
          for(var i=streamParticles.length-1;i>=0;i--){var sp=streamParticles[i];sp.t+=sp.speed;
            if(sp.t>1){streamParticles.splice(i,1);continue;}
            var cn=conns[sp.conn];if(!cn){streamParticles.splice(i,1);continue;}
            var x=lerp(cn.ax,cn.bx,sp.t),y=lerp(cn.ay,cn.by,sp.t);
            var fade=sp.t<0.1?sp.t*10:(sp.t>0.9?(1-sp.t)*10:1);
            ctx.beginPath();ctx.arc(x,y,sp.size,0,Math.PI*2);
            ctx.fillStyle=rgb(sp.conn===0?GREEN:PURPLE,sp.alpha*fade);ctx.fill();}
        }

        // ── CIRCLE NODE ──
        function drawCircleNode(x,y,r,col,label,time) {
          // Soft radial glow wash (hero style)
          var h=ctx.createRadialGradient(x,y,r*0.88,x,y,r*1.08);
          h.addColorStop(0,rgb(col,0));
          h.addColorStop(0.5,rgb(col,0.04));
          h.addColorStop(1,rgb(col,0));
          ctx.fillStyle=h;ctx.beginPath();ctx.arc(x,y,r*1.3,0,Math.PI*2);ctx.fill();

          // Main ring
          ctx.beginPath();ctx.arc(x,y,r,0,Math.PI*2);
          ctx.strokeStyle=rgb(col,0.2);ctx.lineWidth=1.5;ctx.stroke();

          // Rotating dashed inner ring (hero style)
          ctx.save();ctx.translate(x,y);ctx.rotate(time*0.15);
          ctx.beginPath();ctx.arc(0,0,r*0.88,0,Math.PI*2);
          ctx.setLineDash([2,7]);
          ctx.strokeStyle=rgb(col,0.08);
          ctx.lineWidth=1;ctx.stroke();
          ctx.setLineDash([]);ctx.restore();

          // Registration marks
          var ml=5;
          ctx.strokeStyle=rgb(col,0.22);ctx.lineWidth=0.6;
          ctx.beginPath();ctx.moveTo(x-r+4,y-r);ctx.lineTo(x-r+4+ml,y-r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r,y-r+4);ctx.lineTo(x-r,y-r+4+ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r-4,y-r);ctx.lineTo(x+r-4-ml,y-r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r,y-r+4);ctx.lineTo(x+r,y-r+4+ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r+4,y+r);ctx.lineTo(x-r+4+ml,y+r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r,y+r-4);ctx.lineTo(x-r,y+r-4-ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r-4,y+r);ctx.lineTo(x+r-4-ml,y+r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r,y+r-4);ctx.lineTo(x+r,y+r-4-ml);ctx.stroke();

          ctx.font='500 9px "IBM Plex Mono", monospace';
          ctx.textAlign='center';ctx.fillStyle=rgb(col,1.0);
          ctx.fillText(label,x,y+r+13);
        }

        // ── MODEL INTERIOR ──
        function drawModelInterior(x,y,r,time){
          var s=5,g=2,ox=x-(s+g/2),oy=y-(s+g/2)-3;
          for(var rr=0;rr<2;rr++)for(var cc=0;cc<2;cc++){
            var sx=ox+cc*(s+g),sy=oy+rr*(s+g);ctx.beginPath();ctx.rect(sx,sy,s,s);
            ctx.strokeStyle=rgb(GREEN,0.7);ctx.lineWidth=0.9;ctx.stroke();
            ctx.fillStyle=rgb(GREEN,0.04+0.02*Math.sin(time*2.2+rr*1.5+cc*0.9));ctx.fill();}
          ctx.font='400 7px "IBM Plex Mono", monospace';ctx.textAlign='center';
          // sub-label removed for clarity

          // Status dot only
          ctx.beginPath();ctx.arc(x,y+10,1.5,0,Math.PI*2);
          ctx.fillStyle=rgb(GREEN,0.28+0.12*Math.sin(time*3));ctx.fill();
        }

        // ── ENVELO INTERIOR ──
        function drawEnveloInterior(x,y,r,time,phase){
          var ba=0.05+phase*0.12;
          for(var i=3;i>=1;i--){
            var rr=r*(0.2+i*0.16),rot=time*(0.12+i*0.06)*(i%2===0?1:-1);
            ctx.save();ctx.translate(x,y);ctx.rotate(rot);
            ctx.beginPath();ctx.arc(0,0,rr,0,Math.PI*2);
            ctx.setLineDash([1.5,3+i*2]);ctx.strokeStyle=rgb(PURPLE,ba*2.2-i*0.02);
            ctx.lineWidth=0.4;ctx.stroke();ctx.setLineDash([]);
            if(i===3){for(var t=0;t<12;t++){var ta=(Math.PI/6)*t;ctx.beginPath();
              ctx.moveTo(Math.cos(ta)*(rr-2),Math.sin(ta)*(rr-2));
              ctx.lineTo(Math.cos(ta)*(rr+2),Math.sin(ta)*(rr+2));
              ctx.strokeStyle=rgb(PURPLE,ba*0.4);ctx.lineWidth=0.3;ctx.stroke();}}
            ctx.restore();}

          var coreR=5+phase*3;
          var cg=ctx.createRadialGradient(x,y,0,x,y,coreR);
          cg.addColorStop(0,rgb(PURPLE,0.7+phase*0.3));
          cg.addColorStop(0.6,rgb(PURPLE,0.08+phase*0.1));cg.addColorStop(1,rgb(PURPLE,0));
          ctx.fillStyle=cg;ctx.beginPath();ctx.arc(x,y,coreR,0,Math.PI*2);ctx.fill();
          ctx.beginPath();ctx.arc(x,y,1.5,0,Math.PI*2);
          ctx.fillStyle=rgb([220,210,240],0.65+phase*0.35);ctx.fill();

          // Shield ripples
          for(var i=shieldRipples.length-1;i>=0;i--){var sr=shieldRipples[i];
            sr.r+=1.2;sr.alpha-=0.01;if(sr.alpha<=0){shieldRipples.splice(i,1);continue;}
            ctx.beginPath();ctx.arc(x,y,sr.r,sr.angle-0.5,sr.angle+0.5);
            ctx.strokeStyle=rgb(RED,sr.alpha);ctx.lineWidth=1.2;ctx.stroke();}

          ctx.font='400 7px "IBM Plex Mono", monospace';ctx.textAlign='center';
          // sub-label removed for clarity

          // Readouts removed — clean node presentation
        }

        // ── SENTINEL INTERIOR ──
        function drawSentinelInterior(x,y,r,time){
          ctx.beginPath();ctx.ellipse(x,y-10,12,4,0,0,Math.PI*2);
          ctx.strokeStyle=rgb(PURPLE,0.45);ctx.lineWidth=1.0;ctx.stroke();
          ctx.fillStyle=rgb(PURPLE,0.012);ctx.fill();
          ctx.beginPath();ctx.moveTo(x-12,y-10);ctx.lineTo(x-12,y+4);
          ctx.strokeStyle=rgb(PURPLE,0.1);ctx.lineWidth=0.5;ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+12,y-10);ctx.lineTo(x+12,y+4);ctx.stroke();
          ctx.beginPath();ctx.ellipse(x,y+4,12,4,0,0,Math.PI);
          ctx.strokeStyle=rgb(PURPLE,0.18);ctx.stroke();

          ctx.beginPath();ctx.arc(x,y-3,1.2,0,Math.PI*2);
          ctx.fillStyle=rgb(PURPLE,0.1+0.07*Math.sin(time*3));ctx.fill();

          ctx.font='400 7px "IBM Plex Mono", monospace';ctx.textAlign='center';
          ctx.fillStyle='rgba(0,0,0,1.00)';ctx.fillText('Authority Registry',x,y+r+28);

          // Record counter only
          ctx.font='400 7px "IBM Plex Mono", monospace';ctx.textAlign='center';
          ctx.fillStyle=rgb(PURPLE,0.75);
          ctx.fillText('REC:'+(stats.out+stats.rejected),x,y+8);
        }

        // ── PACKET ──
        function drawPacket(px,py,size,col,opacity){
          var g1=ctx.createRadialGradient(px,py,0,px,py,size*2.8);
          g1.addColorStop(0,rgb(col,opacity*0.28));g1.addColorStop(1,rgb(col,0));
          ctx.fillStyle=g1;ctx.beginPath();ctx.arc(px,py,size*2.8*1.2,0,Math.PI*2);ctx.fill();
          ctx.beginPath();ctx.arc(px,py,size,0,Math.PI*2);ctx.fillStyle=rgb(col,opacity);ctx.fill();
        }

        function spawnOut(ts){outPackets.push({state:0,t:0,speed:0.00025+Math.random()*0.00015,
          opacity:0.85,r:2.2+Math.random()*1,trail:[],x:0,y:0,
          label:telemetryLabels[Math.floor(Math.random()*telemetryLabels.length)],labelOpacity:1});
          nextOutDelay=1200+Math.random()*1800;lastOutSpawn=ts;}
        function spawnIn(ts){inPackets.push({t:0,speed:0.00018+Math.random()*0.0001,
          opacity:0.85,r:2.2+Math.random()*1.2,trail:[],x:0,y:0,
          label:attackLabels[Math.floor(Math.random()*attackLabels.length)],
          rejected:false,offset:(Math.random()-0.5)*25});
          nextInDelay=3500+Math.random()*4000;lastInSpawn=ts;}

        var lastTime=0;
  var animRunning = false;
        function animate(ts){
          if(!lastTime)lastTime=ts;var dt=Math.min(ts-lastTime,32);lastTime=ts;frameCount++;
          resize();var L=layout();var conns=getConns(L);var time=ts/1000;
          ctx.clearRect(0,0,W,H);

          // drawGrid();drawPeripheral(time,L);
          drawPeripheral(time,L);
          drawPath(conns[0],GREEN,0.14,'REQUEST');
          drawPath(conns[1],PURPLE,0.12,'TELEMETRY');
          updateStreams(time,conns);

          drawCircleNode(L.model.x,L.model.y,L.model.r,GREEN,'MODEL',time);
          drawModelInterior(L.model.x,L.model.y,L.model.r,time);
          drawCircleNode(L.envelo.x,L.envelo.y,L.envelo.r,PURPLE,'ENVELO',time);
          drawEnveloInterior(L.envelo.x,L.envelo.y,L.envelo.r,time,enveloGlow);
          drawCircleNode(L.sentinel.x,L.sentinel.y,L.sentinel.r,PURPLE,'SENTINEL',time);
          drawSentinelInterior(L.sentinel.x,L.sentinel.y,L.sentinel.r,time);

          enveloGlow*=0.97;bannerFlash*=0.98;
          if(ts-lastOutSpawn>nextOutDelay)spawnOut(ts);
          if(ts-lastInSpawn>nextInDelay)spawnIn(ts);

          // Outbound
          for(var i=outPackets.length-1;i>=0;i--){
            var p=outPackets[i];p.t+=p.speed*16;var et=ease(clamp(p.t));var px,py,col;
            if(p.state===0){px=lerp(conns[0].ax,conns[0].bx,et);py=lerp(conns[0].ay,conns[0].by,et);col=GREEN;
              p.labelOpacity=et<0.45?1:Math.max(0,(0.75-et)*3);
              if(p.t>=1){p.t=0;p.state=1;p.speed*=0.3;p.trail=[];p.labelOpacity=0;enveloGlow=1;}}
            else if(p.state===1){px=L.envelo.x;py=L.envelo.y;col=PURPLE;p.r=Math.max(p.r*0.985,1);
              if(p.t>=1){p.t=0;p.state=2;p.speed=0.0005;p.trail=[];p.r=2.2+Math.random();stats.out++;}}
            else if(p.state===2){px=lerp(conns[1].ax,conns[1].bx,et);py=lerp(conns[1].ay,conns[1].by,et);col=PURPLE;
              if(p.t>=1)p.state=3;}
            else{px=p.x;py=p.y;p.opacity-=0.03;col=PURPLE;}
            p.x=px;p.y=py;p.trail.push({x:px,y:py});if(p.trail.length>12)p.trail.shift();
            for(var j=0;j<p.trail.length-1;j++){var ta=(j/p.trail.length)*0.06*p.opacity;
              ctx.beginPath();ctx.arc(p.trail[j].x,p.trail[j].y,p.r*(j/p.trail.length)*0.35,0,Math.PI*2);
              ctx.fillStyle=rgb(col,ta);ctx.fill();}
            if(p.state!==1)drawPacket(px,py,p.r,col,p.opacity);
            // packet labels removed to prevent overlap
            if(p.opacity<=0)outPackets.splice(i,1);}

          // Inbound attacks
          for(var i=inPackets.length-1;i>=0;i--){
            var p=inPackets[i];p.t+=p.speed*16;var et=ease(clamp(p.t));var px,py;
            if(!L.mob){var wX=L.envelo.x+L.envelo.r+4,wY=L.envelo.y;
              px=lerp(W+30,wX,et);py=lerp(L.envelo.y+p.offset,wY,et);}
            else{var wX=L.envelo.x,wY=L.envelo.y+L.envelo.r+4;
              px=lerp(L.envelo.x+p.offset,wX,et);py=lerp(H+30,wY,et);}
            p.x=px;p.y=py;
            if(!p.rejected){
              p.trail.push({x:px,y:py});if(p.trail.length>8)p.trail.shift();
              for(var j=0;j<p.trail.length-1;j++){var ta=(j/p.trail.length)*0.08*p.opacity;
                ctx.beginPath();ctx.arc(p.trail[j].x,p.trail[j].y,p.r*(j/p.trail.length)*0.4,0,Math.PI*2);
                ctx.fillStyle=rgb(RED,ta);ctx.fill();}
              drawPacket(px,py,p.r,RED,p.opacity*0.85);
              // attack labels removed
              if(p.t>=0.88){p.rejected=true;bannerFlash=1;stats.rejected++;
                var hitA=Math.atan2(py-L.envelo.y,px-L.envelo.x);
                shieldRipples.push({r:L.envelo.r,angle:hitA,alpha:0.6});
                shieldRipples.push({r:L.envelo.r+6,angle:hitA,alpha:0.4});
                for(var b=0;b<5;b++){var ba=hitA+(Math.random()-0.5)*1;
                  bursts.push({x:px,y:py,vx:Math.cos(ba)*(1.5+Math.random()*2),
                    vy:Math.sin(ba)*(1.5+Math.random()*2),life:1,r:0.7+Math.random()*1});}}}
            else p.opacity-=0.04;
            if(p.opacity<=0)inPackets.splice(i,1);}

          // Bursts
          for(var i=bursts.length-1;i>=0;i--){var b=bursts[i];
            b.x+=b.vx;b.y+=b.vy;b.vx*=0.9;b.vy*=0.9;b.life-=0.02;
            if(b.life<=0){bursts.splice(i,1);continue;}
            var bg=ctx.createRadialGradient(b.x,b.y,0,b.x,b.y,b.r*b.life*1.8);
            bg.addColorStop(0,rgb(RED,b.life*0.35));bg.addColorStop(1,rgb(RED,0));
            ctx.fillStyle=bg;ctx.beginPath();ctx.arc(b.x,b.y,b.r*b.life*2.5,0,Math.PI*2);ctx.fill();
            ctx.beginPath();ctx.arc(b.x,b.y,b.r*b.life,0,Math.PI*2);
            ctx.fillStyle=rgb(RED,b.life*0.65);ctx.fill();}

          // Banner
          var bA=0.08+bannerFlash*0.5;
          var bT='NO INBOUND ACCESS \u2014 ONE-WAY DATA FLOW';
          var bY=L.mob?H-14:H-12;
          ctx.font='400 6px "IBM Plex Mono", monospace';ctx.textAlign='center';
          var tw=ctx.measureText(bT).width;
          var px1=W/2-tw/2-8,py1=bY-8,pw=tw+16,ph=14,pr=7;
          ctx.beginPath();ctx.moveTo(px1+pr,py1);ctx.arcTo(px1+pw,py1,px1+pw,py1+ph,pr);
          ctx.arcTo(px1+pw,py1+ph,px1,py1+ph,pr);ctx.arcTo(px1,py1+ph,px1,py1,pr);
          ctx.arcTo(px1,py1,px1+pw,py1,pr);ctx.closePath();
          ctx.fillStyle=rgb(RED,bA*0.12);ctx.fill();
          ctx.strokeStyle=rgb(RED,bA*0.45);ctx.lineWidth=0.4;ctx.stroke();

          var ix=W/2-tw/2-1;
          ctx.beginPath();ctx.moveTo(ix-2.5,bY-2.5);ctx.lineTo(ix+1.5,bY+1.5);
          ctx.moveTo(ix+1.5,bY-2.5);ctx.lineTo(ix-2.5,bY+1.5);
          ctx.strokeStyle=rgb(RED,bA*1.0);ctx.lineWidth=0.7;ctx.stroke();
          ctx.fillStyle=rgb(RED,bA*1.0);ctx.fillText(bT,W/2+3,bY);

          ctx.font='400 7.5px "IBM Plex Mono", monospace';ctx.fillStyle='rgba(0,0,0,1.00)';
          ctx.fillText(stats.out+' TELEMETRY SENT \u00B7 '+stats.rejected+' INBOUND REJECTED',
            W/2,L.mob?H-30:H-28);

          requestAnimationFrame(animate);
        }

        resize();window.addEventListener('resize',resize);
        requestAnimationFrame(animate);
      })();
      </script>

      <!-- Three Security Pillars -->
      <div class="reveal" style="max-width:700px;margin:0 auto var(--space-3);">
        <div class="hud-frame hud-scanline"><i></i>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num">01</span><span class="hud-dot hud-dot-green" style="margin-top:6px;"></span>
            <div><div class="hud-title">Zero Listening Ports</div><div class="hud-desc">Interlock opens no inbound ports. Only outbound HTTPS to api.sentinelauthority.org.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num">02</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div><div class="hud-title">Customer Controlled</div><div class="hud-desc">You deploy, configure, and terminate. We cannot start, stop, or modify remotely.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num">03</span><span class="hud-dot hud-dot-amber" style="margin-top:6px;"></span>
            <div><div class="hud-title">TLS 1.3 + Pinning</div><div class="hud-desc">All communications encrypted with certificate pinning. Data encrypted at rest.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num">04</span><span class="hud-dot" style="margin-top:6px;"></span>
            <div><div class="hud-title">Your ODD Stays Yours</div><div class="hud-desc">We never touch your source code, model weights, or decision logic. The Interlock transmits only operational telemetry — what your system does, not how it thinks.</div></div>          </div>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto var(--space-3);">
        <div class="hud-frame hud-frame-red"><i></i>
          <div class="hud-label" style="color:rgba(160,50,50,1.00);margin-bottom:12px;">THE CORE GUARANTEE</div>
          <p style="font-size:13px;color:rgba(0,0,0,1.00);line-height:1.7;margin:0 0 16px;">
            Sentinel Authority <strong style="color:rgba(0,0,0,1.00);">cannot</strong> send commands to your system, execute code on your infrastructure, access your network, or control your autonomous systems.
          </p>
          <div style="display:flex;flex-wrap:wrap;gap:16px;">
            <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(160,50,50,1.00);">✕ NO REMOTE COMMANDS</span>
            <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(160,50,50,1.00);">✕ NO CODE EXECUTION</span>
            <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(160,50,50,1.00);">✕ NO NETWORK ACCESS</span>
            <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(160,50,50,1.00);">✕ NO ACTUATOR CONTROL</span>
          </div>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto var(--space-3);">
        <div style="display:flex;flex-wrap:wrap;gap:16px;justify-content:center;">
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(22,120,58,1.00);">✓ NO PHI/PII</span>
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(22,120,58,1.00);">✓ OFFLINE ENFORCEMENT</span>
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(22,120,58,1.00);">✓ SOURCE AUDITABLE</span>
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(22,120,58,1.00);">✓ HIPAA/BAA</span>
        </div>
      </div>
      <div class="reveal" style="text-align:center;margin-top:var(--space-2);">
        <a href="security.html" class="hud-link">SECURITY FAQ →</a>
      </div>

    </section>
    <section id="criteria" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">CONFORMANCE CRITERIA</span>
          <h2 class="section-title">Five Gates</h2>
          <p class="section-lead">
            Five gates. All required for conformance.
          </p>
        </div>
      </div>

      <!-- Five Gates - Visual Cards -->
      <div class="reveal" style="max-width:880px;margin:0 auto var(--space-3);">
        <div style="display:flex;justify-content:center;gap:4px;flex-wrap:wrap;">
          <div style="text-align:center;padding:16px 12px;flex:1;min-width:120px;">
            <div style="font-family:var(--mono);font-size:9px;letter-spacing:2px;color:rgba(60,48,100,1.00);margin-bottom:4px;">01</div>
            <div style="font-family:var(--mono);font-size:11px;letter-spacing:2px;color:rgba(60,48,100,1.00);margin-bottom:6px;">ODD</div>
            <div style="font-size:12px;color:rgba(0,0,0,1.00);margin-bottom:4px;">Established</div>
            <div style="font-size:10px;color:rgba(0,0,0,0.52);">Auto-discovered or operator-defined</div>
          </div>
          <div style="width:1px;background:rgba(0,0,0,0.06);align-self:stretch;"></div>
          <div style="text-align:center;padding:16px 12px;flex:1;min-width:120px;">
            <div style="font-family:var(--mono);font-size:9px;letter-spacing:2px;color:rgba(60,48,100,1.00);margin-bottom:4px;">02</div>
            <div style="font-family:var(--mono);font-size:11px;letter-spacing:2px;color:rgba(60,48,100,1.00);margin-bottom:6px;">STABLE</div>
            <div style="font-size:12px;color:rgba(0,0,0,1.00);margin-bottom:4px;">Enforcement Verified</div>
            <div style="font-size:10px;color:rgba(0,0,0,0.52);">72h enforced operation</div>
          </div>
          <div style="width:1px;background:rgba(0,0,0,0.06);align-self:stretch;"></div>
          <div style="text-align:center;padding:16px 12px;flex:1;min-width:120px;border-bottom:1px solid rgba(22,120,58,0.50);">
            <div style="font-family:var(--mono);font-size:9px;letter-spacing:2px;color:rgba(22,120,58,1.00);margin-bottom:4px;">03</div>
            <div style="font-family:var(--mono);font-size:11px;letter-spacing:2px;color:rgba(22,120,58,1.00);margin-bottom:6px;">ENVELO INTERLOCK</div>
            <div style="font-size:12px;color:rgba(0,0,0,1.00);margin-bottom:4px;">Enforcement Active</div>
            <div style="font-size:10px;color:rgba(0,0,0,0.52);">Non-bypassable runtime</div>
          </div>
          <div style="width:1px;background:rgba(0,0,0,0.06);align-self:stretch;"></div>
          <div style="text-align:center;padding:16px 12px;flex:1;min-width:120px;">
            <div style="font-family:var(--mono);font-size:9px;letter-spacing:2px;color:rgba(60,48,100,1.00);margin-bottom:4px;">04</div>
            <div style="font-family:var(--mono);font-size:11px;letter-spacing:2px;color:rgba(60,48,100,1.00);margin-bottom:6px;">AUDIT</div>
            <div style="font-size:12px;color:rgba(0,0,0,1.00);margin-bottom:4px;">Tamper-Evident</div>
            <div style="font-size:10px;color:rgba(0,0,0,0.52);">Cryptographic records</div>
          </div>
          <div style="width:1px;background:rgba(0,0,0,0.06);align-self:stretch;"></div>
          <div style="text-align:center;padding:16px 12px;flex:1;min-width:120px;">
            <div style="font-family:var(--mono);font-size:9px;letter-spacing:2px;color:rgba(60,48,100,1.00);margin-bottom:4px;">05</div>
            <div style="font-family:var(--mono);font-size:11px;letter-spacing:2px;color:rgba(60,48,100,1.00);margin-bottom:6px;">REVOKE</div>
            <div style="font-size:12px;color:rgba(0,0,0,1.00);margin-bottom:4px;">Drift Protocol</div>
            <div style="font-size:10px;color:rgba(0,0,0,0.52);">Clear suspension path</div>
          </div>
        </div>
      </div>

      <!-- Mobile-friendly stacked version (hidden on desktop) -->
      <style>
          /* Flow Diagram Mobile */
  
    /* Conformance States Mobile */

  
    /* Timeline Mobile */
    .timeline-desktop { display: block; }
    .timeline-mobile { display: none !important; }

  
    /* Verify & API Sections Mobile */

  
    /* API Code Box Mobile */

  
    /* Mechanism Flow Diagram */
    .mechanism-desktop { display: block; }
    .mechanism-mobile { display: none; }

  
    /* Show QR scanner button only on touch/mobile devices */

    /* ===== MOBILE HERO LAYOUT FIX (PORTRAIT) ===== */
    /* ===== MOBILE HERO LAYOUT FIX (LANDSCAPE) ===== */
    </style>

      <!-- Conformance States -->
      <div class="reveal" style="max-width:700px;margin:0 auto var(--space-3);">
        <div class="hud-label" style="text-align:center;margin-bottom:16px;">CONFORMANCE STATES</div>
        <div style="display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap;">
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(0,0,0,0.52);">● LEARNING</span>
          <span style="font-family:var(--mono);font-size:9px;color:rgba(0,0,0,0.22);">→</span>
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(140,100,30,1.00);">● BOUNDED</span>
          <span style="font-family:var(--mono);font-size:9px;color:rgba(0,0,0,0.22);">→</span>
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(22,120,58,1.00);">● CONFORMANT</span>
          <span style="font-family:var(--mono);font-size:9px;color:rgba(160,50,50,0.60);">⇢</span>
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:1px;color:rgba(160,50,50,1.00);">● PAUSED</span>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto var(--space-3);display:grid;grid-template-columns:1fr 1fr;gap:24px;">
        <div>
          <div class="hud-label" style="color:rgba(22,120,58,1.00);margin-bottom:12px;">✓ ODDC ATTESTS</div>
          <div style="font-size:12px;color:rgba(0,0,0,1.00);line-height:2;">
            ODD defined with quantitative boundaries<br>
            Stable operation within defined ODD<br>
            ENVELO enforcement architecturally present<br>
            CAT-72 verification completed<br>
            Tamper-evident audit records available
          </div>
        </div>
        <div>
          <div class="hud-label" style="color:rgba(160,50,50,1.00);margin-bottom:12px;">✕ DOES NOT ATTEST</div>
          <div style="font-size:12px;color:rgba(0,0,0,1.00);line-height:2;">
            Functional safety of underlying system<br>
            Regulatory or legal compliance<br>
            Cybersecurity posture or resilience<br>
            System performance or accuracy<br>
            AI model correctness or fitness
          </div>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto;">
        <div class="hud-frame hud-frame-amber"><i></i>
          <div class="hud-label" style="color:rgba(140,100,30,1.00);margin-bottom:8px;">BOUNDARY EXCEEDANCE</div>
          <p style="font-size:12px;color:rgba(0,0,0,1.00);line-height:1.6;margin:0;">
            Any state, trajectory, or enforcement failure that exceeds attested tolerances — triggers <span style="color:rgba(140,100,30,1.00);">immediate conformance review</span>.
          </p>
        </div>
      </div>
    </section>
    <section id="cat72" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">CONFORMANCE PROCEDURE</span>
          <h2 class="section-title">CAT-72</h2>
          <p class="section-lead">
            72 hours of continuous operation within defined boundaries. The Interlock auto-discovers your operational envelope, then enforces it.
          </p>
        </div>
      </div>

      <!-- CAT-72 Canvas Animation -->
      <div class="reveal" style="display: flex; justify-content: center; margin: 0 auto var(--space-4); max-width: 880px;">
        <div style="width: 100%;">
          <canvas id="cat72-canvas" style="width: 100%; display: block;"></canvas>
      <!-- Mobile Static: CAT-72 v5 -->
      <div class="m-diagram" aria-label="CAT-72 boundary enforcement">
        <div class="d-label"><div class="d-dot d-dot-p"></div><span class="d-tag">CAT-72 · BOUNDARY ENFORCEMENT</span></div>
        <div class="c-container">
          <div class="c-wall"><span class="c-label">ENVELO WALL</span>
            <i class="c-dot c-dot-r" style="position:absolute;top:50%;right:3px;z-index:3;animation:none !important"></i>
            <div class="c-mrc"><span class="c-label">MRC BOUNDARY</span>
              <div class="c-warn"><span class="c-label">SELF-CORRECT</span>
                <i class="c-dot c-dot-a" style="position:absolute;bottom:18px;left:24px;z-index:3;animation-delay:.5s"></i>
                <div class="c-odd">
                  <div class="c-odd-text">ODD</div>
                  <div class="c-agents"><i class="c-dot"></i><i class="c-dot"></i><i class="c-dot"></i><i class="c-dot"></i><i class="c-dot"></i><i class="c-dot"></i></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="c-legend"><div><span class="c-ld c-ldg"></span>Within ODD</div><div><span class="c-ld c-lda"></span>Near boundary</div><div><span class="c-ld c-ldr"></span>Enforcement</div></div>
      </div>

                                </div>
      </div>

      <!-- Phase Cards — HUD -->
      <div class="reveal" style="max-width:880px;margin:0 auto var(--space-4);">
        <div class="hud-frame hud-scanline"><i></i>
          <div id="cat72-pc0" class="hud-row" style="cursor:pointer;display:flex;align-items:flex-start;gap:12px;transition:opacity 0.4s var(--ease);">
            <div style="width:5px;height:5px;border-radius:50%;background:var(--accent-green);box-shadow:0 0 10px var(--accent-green);transition:all 0.4s var(--ease);flex-shrink:0;margin-top:6px;" id="cat72-dot0"></div>
            <span class="hud-num" style="margin-top:2px;">01</span>
            <div><div class="hud-title">Continuous Demo</div><div class="hud-desc">72-hr sustained operation. The Interlock learns operational boundaries from live telemetry, then enforces them.</div></div>
          </div>
          <div id="cat72-pc1" class="hud-row" style="cursor:pointer;display:flex;align-items:flex-start;gap:12px;opacity:0.6;transition:opacity 0.4s var(--ease);">
            <div style="width:5px;height:5px;border-radius:50%;background:rgba(0,0,0,0.15);transition:all 0.4s var(--ease);flex-shrink:0;margin-top:6px;" id="cat72-dot1"></div>
            <span class="hud-num" style="margin-top:2px;">02</span>
            <div><div class="hud-title">Stress Testing</div><div class="hud-desc">Stress testing across discovered or specified limits. ENVELO decelerates to Minimum Risk Condition before the wall.</div></div>
          </div>
          <div id="cat72-pc2" class="hud-row" style="cursor:pointer;display:flex;align-items:flex-start;gap:12px;opacity:0.6;transition:opacity 0.4s var(--ease);">
            <div style="width:5px;height:5px;border-radius:50%;background:rgba(0,0,0,0.15);transition:all 0.4s var(--ease);flex-shrink:0;margin-top:6px;" id="cat72-dot2"></div>
            <span class="hud-num" style="margin-top:2px;">03</span>
            <div><div class="hud-title">Enforcement Proof</div><div class="hud-desc">Verified tiered response: self-correction near ODD, MRC in enforcement margin, hard halt at ENVELO wall.</div></div>
          </div>
        </div>
      </div>

      <script>
      (function() {
        var c = document.getElementById('cat72-canvas');
        if (!c) return;
        var ctx = c.getContext('2d');
        var dpr = window.devicePixelRatio || 1;
        var W = 0, H = 0;

        var GREEN = [92,214,133];
        var PURPLE = [157,140,207];
        var AMBER = [214,160,92];
        var RED = [214,92,92];
        var PHASE_COLORS = [GREEN, AMBER, PURPLE];

        function isMob() { return W < 600 || (window.innerHeight < 500 && window.innerWidth > window.innerHeight); }
        var PHASE_NAMES = ['CONTINUOUS DEMO', 'STRESS TESTING', 'FAIL-CLOSED PROOF'];

        var simTime = 0;
        var SIM_SPEED = 0.003;
        var phase = 0;
        var cx, cy, radius;
        var agents = [];
        var AGENT_COUNT = (window.innerWidth < 600 || window.innerHeight < 500) ? 16 : 28;
        var telemetry = [];
        var lastTel = 0;
        var boundaryPulses = [];
        var blockCount = 0;
        var lastBlock = 0;
        var lastStress = 0;
        var stressMarkers = [];
        var failTriggered = false;
        var failTime = 0;
        var halted = false;
        var haltAlpha = 0;
        var holdStart = 0;

        var dataLabels = [
          'speed:47.2mph','dose:118mg','alt:3180ft','temp:71.8\u00B0F',
          'lat:30.41\u00B0N','load:81.3%','rpm:2395','psi:34.1',
          'freq:59.98Hz','vol:238mL','rate:11.8/m','torque:87Nm',
          'depth:14.8m','flow:3.18L/s','angle:12.3\u00B0','pH:7.21'
        ];

        function rgb(c,a){ return 'rgba('+c[0]+','+c[1]+','+c[2]+','+a+')'; }

        function resize() {
          telemetry = [];
          catEnveloEvents = [];
          boundaryPulses = [];
          stressMarkers = [];
          var r = c.parentElement.getBoundingClientRect();
          W = r.width;
          H = W < 550 ? W * 0.80 : W * 0.42;
          // Landscape: cap canvas height
          if (window.innerHeight < 500 && window.innerWidth > window.innerHeight) {
            H = Math.min(H, window.innerHeight * 0.75);
          }
          c.width = W * dpr;
          c.height = H * dpr;
          c.style.height = H + 'px';
          ctx.setTransform(dpr,0,0,dpr,0,0);
          cx = W * 0.5;
          cy = H * 0.48;
          radius = Math.min(W, H) * 0.34;
          initAgents();
        }
        c._saResize = resize;

        function initAgents() {
          agents = [];
          for (var i = 0; i < AGENT_COUNT; i++) {
            var a = Math.random() * Math.PI * 2;
            var r = Math.random() * radius * 0.82;
            agents.push({
              x: cx + Math.cos(a) * r,
              y: cy + Math.sin(a) * r,
              vx: (Math.random()-0.5)*0.7,
              vy: (Math.random()-0.5)*0.7,
              size: 1.5 + Math.random()*1.8,
              phase: Math.random()*Math.PI*2,
              drift: 0.002 + Math.random()*0.003
            });
          }
        }

        var catEnveloEvents = [];

        function updateAgents(dt) {
          var sm = phase===1 ? 1.6 : 1;
          if (halted) sm = 0;
          var oddR = oddRadius || radius*0.76;
          var enveloR = radius;
          var approachZone = oddR * 0.65;

          for (var i=0; i<agents.length; i++) {
            var a = agents[i];
            if (!a.tier) a.tier = 0;
            if (!a.mrcTimer) a.mrcTimer = 0;
            if (!a.haltTimer) a.haltTimer = 0;
            a.phase += a.drift * dt;

            if (a.tier === 3) {
              a.haltTimer -= dt;
              if (a.haltTimer <= 0) {
                a.tier = 0;
                a.x = cx + (Math.random()-0.5)*oddR*0.6;
                a.y = cy + (Math.random()-0.5)*oddR*0.6;
                a.vx = (Math.random()-0.5)*0.3;
                a.vy = (Math.random()-0.5)*0.3;
              }
              continue;
            }

            if (a.tier === 2) {
              a.vx *= 0.92;
              a.vy *= 0.92;
              var dx2=a.x-cx,dy2=a.y-cy,dist2=Math.sqrt(dx2*dx2+dy2*dy2)||1;
              a.vx -= (dx2/dist2)*0.02*dt;
              a.vy -= (dy2/dist2)*0.02*dt;
              a.x += a.vx*dt*(isMob()?0.03:0.06);
              a.y += a.vy*dt*(isMob()?0.03:0.06);
              a.mrcTimer -= dt;
              dx2=a.x-cx;dy2=a.y-cy;dist2=Math.sqrt(dx2*dx2+dy2*dy2);
              if (dist2<oddR*0.9) { a.tier=0; a.mrcTimer=0; }
              if (dist2>=enveloR*0.98) {
                a.tier=3; a.haltTimer=3000;
                a.vx=0; a.vy=0;
                var ang3=Math.atan2(dy2,dx2);
                catEnveloEvents.push({x:a.x,y:a.y,alpha:1});
                boundaryPulses.push({angle:ang3, alpha:0.8, spread:0});
                if (typeof enveloFlashes!=='undefined') enveloFlashes.push({angle:ang3, alpha:0.8, spread:0});
              }
              if (a.mrcTimer<=0 && a.tier===2) { a.tier=0; a.mrcTimer=0; }
              continue;
            }

            a.vx += (Math.cos(a.phase)*0.025 - a.vx*0.005)*dt*0.1;
            a.vy += (Math.sin(a.phase*1.3)*0.025 - a.vy*0.005)*dt*0.1;
            a.x += a.vx*sm*dt*(isMob()?0.03:0.06);
            a.y += a.vy*sm*dt*(isMob()?0.03:0.06);

            var dx=a.x-cx,dy=a.y-cy,dist=Math.sqrt(dx*dx+dy*dy)||1;
            var nx=dx/dist,ny=dy/dist;

            if (dist>approachZone && dist<oddR) {
              a.tier=1;
              var pb=(dist-approachZone)/(oddR-approachZone);
              a.vx -= nx*pb*0.0008*dt;
              a.vy -= ny*pb*0.0008*dt;
            } else if (dist<approachZone) {
              a.tier=0;
            }

            if (dist>=oddR) {
              a.tier=2; a.mrcTimer=2000+Math.random()*1500;
              var ang2=Math.atan2(dy,dx);
              boundaryPulses.push({angle:ang2, alpha:0.4, spread:0});
              if (typeof enveloFlashes!=='undefined') enveloFlashes.push({angle:ang2, alpha:0.5, spread:0});
            }

            a.vx *= 0.997; a.vy *= 0.997;
          }
        }

        var oddRadius;
        var enveloFlashes = [];

        // ── GRID ──
        function drawGrid() {
          var sp=W<550?36:48;ctx.strokeStyle='rgba(0,0,0,0.04)';ctx.lineWidth=0.5;
          for(var x=sp;x<W;x+=sp){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke();}
          for(var y=sp;y<H;y+=sp){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke();}
          for(var x=sp*2;x<W;x+=sp*2)for(var y=sp*2;y<H;y+=sp*2){
            ctx.beginPath();ctx.moveTo(x-2,y);ctx.lineTo(x+2,y);ctx.stroke();
            ctx.beginPath();ctx.moveTo(x,y-2);ctx.lineTo(x,y+2);ctx.stroke();}
        }

        // ── BRACKETS on ENVELO circle ──
        function drawBrackets() {
          var r=radius, x=cx, y=cy, ml=8;
          ctx.strokeStyle=rgb(PURPLE,0.32);ctx.lineWidth=0.6;
          ctx.beginPath();ctx.moveTo(x-r+4,y-r);ctx.lineTo(x-r+4+ml,y-r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r,y-r+4);ctx.lineTo(x-r,y-r+4+ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r-4,y-r);ctx.lineTo(x+r-4-ml,y-r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r,y-r+4);ctx.lineTo(x+r,y-r+4+ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r+4,y+r);ctx.lineTo(x-r+4+ml,y+r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x-r,y+r-4);ctx.lineTo(x-r,y+r-4-ml);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r-4,y+r);ctx.lineTo(x+r-4-ml,y+r);ctx.stroke();
          ctx.beginPath();ctx.moveTo(x+r,y+r-4);ctx.lineTo(x+r,y+r-4-ml);ctx.stroke();
        }

        // ── LEGEND ──
        function drawLegend() {
          var lx = 12, ly = H - 110; if (isMob()) return;
          ctx.font = '600 8px "IBM Plex Mono"';
          ctx.textAlign = 'left';
          var items = [
            {col: GREEN, label: 'NOMINAL'},
            {col: AMBER, label: 'MRC'},
            {col: RED, label: 'HALT'}
          ];
          for (var i = 0; i < items.length; i++) {
            var ix = lx + i * 72;
            ctx.beginPath(); ctx.arc(ix, ly, 3, 0, Math.PI * 2);
            ctx.fillStyle = rgb(items[i].col, 0.7); ctx.fill();
            ctx.fillStyle = rgb(items[i].col, 0.65);
            ctx.fillText(items[i].label, ix + 8, ly + 3);
          }
        }

        function drawBoundary(now) {
          var pc = PHASE_COLORS[phase];
          oddRadius = radius * 0.76;
          var enveloR = radius;

          // Enforcement margin fill removed — transparent to match page bg

          // — ENVELO outer ring (purple, solid) —
          ctx.beginPath(); ctx.arc(cx,cy,enveloR,0,Math.PI*2);
          ctx.strokeStyle = rgb(PURPLE,0.35);
          ctx.lineWidth = 1.5; ctx.stroke();

          // Outer glow removed — transparent to match page bg

          // — ODD inner ring (green, dashed) —
          ctx.save(); ctx.translate(cx,cy); ctx.rotate(now*0.0001);
          ctx.beginPath(); ctx.arc(0,0,oddRadius,0,Math.PI*2);
          ctx.setLineDash([4,8]);
          ctx.strokeStyle = rgb(GREEN,0.3);
          ctx.lineWidth = 1; ctx.stroke();
          ctx.setLineDash([]); ctx.restore();

          // — Progress arc on ENVELO ring —
          var prog = (simTime/72)*Math.PI*2;
          if (prog > 0.01) {
            ctx.beginPath();
            ctx.arc(cx,cy,enveloR, -Math.PI/2, -Math.PI/2+prog);
            var rg = ctx.createLinearGradient(cx-enveloR,cy,cx+enveloR,cy);
            rg.addColorStop(0, rgb(GREEN,0.6));
            rg.addColorStop(1, rgb(PURPLE,0.6));
            ctx.strokeStyle = rg;
            ctx.lineWidth = 2.5; ctx.lineCap='round'; ctx.stroke();

            var ha = -Math.PI/2+prog;
            var hx = cx+Math.cos(ha)*enveloR, hy = cy+Math.sin(ha)*enveloR;
            var hg = ctx.createRadialGradient(hx,hy,0,hx,hy,10);
            hg.addColorStop(0,rgb(PURPLE,0.5));
            hg.addColorStop(1,rgb(PURPLE,0));
            ctx.fillStyle=hg;
            ctx.beginPath(); ctx.arc(hx,hy,10,0,Math.PI*2); ctx.fill();
          }

          // — Hour ticks on ENVELO ring —
          for (var h=0; h<12; h++) {
            var ta = -Math.PI/2+(h/12)*Math.PI*2;
            var inn = enveloR-6, out = enveloR+6;
            var passed = (h*6)<simTime;
            ctx.beginPath();
            ctx.moveTo(cx+Math.cos(ta)*inn, cy+Math.sin(ta)*inn);
            ctx.lineTo(cx+Math.cos(ta)*out, cy+Math.sin(ta)*out);
            ctx.strokeStyle = passed ? rgb(GREEN,0.6) : 'rgba(0,0,0,0.12)';
            ctx.lineWidth = h%2===0 ? 1.5 : 0.8;
            ctx.stroke();
            if (h%2===0) {
              var lx=cx+Math.cos(ta)*(enveloR+17), ly=cy+Math.sin(ta)*(enveloR+17);
              ctx.font='400 8px "IBM Plex Mono"';
              ctx.fillStyle=passed?rgb(GREEN,0.85):'rgba(0,0,0,0.18)';
              ctx.textAlign='center'; ctx.textBaseline='middle';
              ctx.fillText(h*6+'h',lx,ly);
            }
          }

          // — ENVELO flashes (when agents approach ODD boundary) —
          for (var ef=enveloFlashes.length-1;ef>=0;ef--) {
            var fl = enveloFlashes[ef];
            fl.alpha -= 0.015; fl.spread += 0.4;
            if (fl.alpha<=0) { enveloFlashes.splice(ef,1); continue; }
            var fx=cx+Math.cos(fl.angle)*enveloR, fy=cy+Math.sin(fl.angle)*enveloR;
            var fg=ctx.createRadialGradient(fx,fy,0,fx,fy,fl.spread+15);
            fg.addColorStop(0,rgb(PURPLE,fl.alpha*0.6));
            fg.addColorStop(1,rgb(PURPLE,0));
            ctx.fillStyle=fg;
            ctx.beginPath(); ctx.arc(fx,fy,fl.spread+15,0,Math.PI*2); ctx.fill();
          }

          // — Labels —
          ctx.font='600 9px "IBM Plex Mono"';
          ctx.textAlign='center';
          ctx.fillStyle=rgb(PURPLE,0.8);
          ctx.fillText('ENVELO',cx,cy-enveloR-38);
          ctx.font='400 7px "IBM Plex Mono"';
          ctx.fillStyle=rgb(PURPLE,0.55);
          ctx.fillText('INTERLOCK',cx,cy-enveloR-27);

          ctx.font='400 8px "IBM Plex Mono"';
          ctx.fillStyle=rgb(GREEN,0.7);
          ctx.fillText('ODD BOUNDARY',cx,cy-oddRadius-10);
        }

        function drawPulses() {
          for (var i=boundaryPulses.length-1;i>=0;i--) {
            var p=boundaryPulses[i];
            p.alpha -= 0.012; p.spread += 0.6;
            if (p.alpha<=0) {boundaryPulses.splice(i,1);continue;}
            var bx=cx+Math.cos(p.angle)*radius, by=cy+Math.sin(p.angle)*radius;
            var g=ctx.createRadialGradient(bx,by,0,bx,by,p.spread+12);
            g.addColorStop(0,rgb(RED,p.alpha*0.28));
            g.addColorStop(1,rgb(RED,0));
            ctx.fillStyle=g;
            ctx.beginPath(); ctx.arc(bx,by,p.spread+12,0,Math.PI*2); ctx.fill();
          }
        }

        function drawAgents() {
          for (var i=0;i<agents.length;i++) {
            var a = agents[i];
            var tier = a.tier || 0;
            var col, al, glowSize;

            if (tier===3) {
              col=RED; al=0.5+Math.sin(Date.now()*0.008)*0.1; glowSize=a.size*4.5;
              ctx.strokeStyle=rgb(RED,0.55); ctx.lineWidth=1.5;
              ctx.beginPath(); ctx.moveTo(a.x-4,a.y-4); ctx.lineTo(a.x+4,a.y+4); ctx.stroke();
              ctx.beginPath(); ctx.moveTo(a.x+4,a.y-4); ctx.lineTo(a.x-4,a.y+4); ctx.stroke();
            } else if (tier===2) {
              col=RED; al=0.8; glowSize=a.size*4;
            } else if (tier===1) {
              col=AMBER; al=0.7; glowSize=a.size*3.5;
            } else {
              col=GREEN; al=halted?0.15:0.65; glowSize=a.size*2.8;
            }

            var gl=ctx.createRadialGradient(a.x,a.y,0,a.x,a.y,glowSize);
            gl.addColorStop(0,rgb(col,al*0.28));
            gl.addColorStop(1,rgb(col,0));
            ctx.fillStyle=gl;
            ctx.beginPath(); ctx.arc(a.x,a.y,glowSize*1.2,0,Math.PI*2); ctx.fill();

            ctx.beginPath(); ctx.arc(a.x,a.y,a.size,0,Math.PI*2);
            ctx.fillStyle=rgb(col,al);
            ctx.fill();
          }

          for (var e=catEnveloEvents.length-1;e>=0;e--) {
            var ev=catEnveloEvents[e];
            ev.alpha -= 0.008;
            if (ev.alpha<=0) { catEnveloEvents.splice(e,1); continue; }
            ctx.font='500 7px "IBM Plex Mono"';
            ctx.fillStyle=rgb(RED,ev.alpha*0.8);
            ctx.textAlign='center';
            ctx.fillText('HALT',ev.x,ev.y-10);
          }
        }

        function spawnTelemetry(now) {
          if (halted) return;
          if (isMob() && telemetry.length >= 4) return;
          var interval = isMob() ? (phase===1 ? 400 : 700) : (phase===1 ? 140 : 280);
          if (now-lastTel>interval) {
            lastTel=now;
            var label = dataLabels[Math.floor(Math.random()*dataLabels.length)];
            var side = Math.random()>0.5?1:-1;
            telemetry.push({
              text:label,
              x: cx+side*(radius+(isMob()?10:35)+Math.random()*(isMob()?20:60)),
              y: Math.max(cy-radius*0.4, Math.min(cy+radius*0.3, cy-radius*0.4+Math.random()*radius*0.7)),
              tx: cx+(Math.random()-0.5)*radius*0.5,
              ty: cy+(Math.random()-0.5)*radius*0.5,
              alpha:1, prog:0, side:side
            });
          }
        }

        function drawTelemetry() {
          for (var i=telemetry.length-1;i>=0;i--) {
            var t=telemetry[i];
            t.prog+=isMob()?0.005:0.007;
            if(t.prog>1) t.alpha-=0.025;
            if(t.alpha<=0){telemetry.splice(i,1);continue;}

            var p=Math.min(t.prog,1);
            var e=p<0.5?2*p*p:1-Math.pow(-2*p+2,2)/2;
            var px=t.x+(t.tx-t.x)*e, py=t.y+(t.ty-t.y)*e;

            ctx.beginPath(); ctx.moveTo(t.x,t.y); ctx.lineTo(px,py);
            ctx.strokeStyle=rgb(GREEN,t.alpha*0.1);
            ctx.lineWidth=0.5; ctx.stroke();

            if(t.alpha>0.3){
              ctx.font='300 '+Math.round(Math.max(6,radius*0.07))+'px "IBM Plex Mono"';
              ctx.fillStyle=rgb(GREEN,t.alpha*0.55);
              ctx.textAlign=t.side>0?'left':'right';
              ctx.fillText(t.text,t.x,t.y);
            }

            ctx.beginPath(); ctx.arc(px,py,1.5,0,Math.PI*2);
            ctx.fillStyle=rgb(GREEN,t.alpha*0.7);
            ctx.fill();
          }
        }

        function spawnBlock(now) {
          if (halted) return;
          var interval = phase===1 ? 900 : 1600;
          if (now-lastBlock>interval) {
            lastBlock=now;
            blockCount++;
          }
        }

        function spawnStress(now) {
          if (phase!==1||halted) return;
          if (now-lastStress>3200+Math.random()*2000) {
            lastStress=now;
            var ta=Math.random()*Math.PI*2;
            for(var i=0;i<4;i++){
              var idx=Math.floor(Math.random()*agents.length);
              agents[idx].vx+=Math.cos(ta)*1.1;
              agents[idx].vy+=Math.sin(ta)*1.1;
            }
            stressMarkers.push({angle:ta, alpha:1});
          }
        }

        function drawStress() {
          for (var i=stressMarkers.length-1;i>=0;i--) {
            var s=stressMarkers[i];
            s.alpha-=0.006;
            if(s.alpha<=0){stressMarkers.splice(i,1);continue;}
            var sx=cx+Math.cos(s.angle)*(radius*1.2);
            var sy=cy+Math.sin(s.angle)*(radius*1.2);
            ctx.font='400 '+Math.round(radius*0.06)+'px "IBM Plex Mono"';
            ctx.fillStyle=rgb(AMBER,s.alpha*0.7);
            ctx.textAlign='center';
            ctx.fillText('STRESS',sx,sy);
          }
        }

        function drawCenter() {
          var pc = PHASE_COLORS[phase];
          var hours = Math.floor(simTime);
          var mins = Math.floor((simTime-hours)*60);
          var ts = String(hours).padStart(2,'0')+':'+String(mins).padStart(2,'0');

          ctx.font='200 '+Math.round(radius*0.35)+'px "Source Serif 4"';
          ctx.textAlign='center'; ctx.textBaseline='middle';
          var tg=ctx.createLinearGradient(cx,cy-20,cx,cy+20);
          tg.addColorStop(0,'rgba(0,0,0,1.00)');
          tg.addColorStop(1,rgb(pc,0.75));
          ctx.fillStyle=tg;
          ctx.fillText(ts,cx,cy-radius*0.08);

          ctx.font='300 13px "IBM Plex Mono"';
          ctx.fillStyle='rgba(0,0,0,1.00)';
          ctx.fillText('/ 72:00',cx,cy+radius*0.20);

          ctx.font='400 9px "IBM Plex Mono"';
          ctx.fillStyle=rgb(pc,0.75);
          ctx.fillText(PHASE_NAMES[phase],cx,cy+radius*0.38);

          ctx.font='300 '+Math.round(radius*0.07)+'px "IBM Plex Mono"';
          ctx.fillStyle='rgba(0,0,0,1.00)';
          ctx.fillText('EVIDENCE BLOCKS: '+blockCount,cx,cy+radius*0.55);
        }

        function drawHash(now) {
          if (isMob()) return;
          var x = W-16;
          var startY = cy-radius*0.3;
          var chars='0123456789abcdef';
          ctx.font='400 7px "IBM Plex Mono"';
          ctx.textAlign='right';
          if(halted) return;
          for(var i=0;i<7;i++){
            var hash='';
            var seed=Math.floor(now*0.0008)+i*7;
            for(var j=0;j<14;j++) hash+=chars[(seed*(j+1)*31+j*17)%16];
            ctx.fillStyle=rgb(PURPLE,0.70-i*0.025);
            ctx.fillText(hash,x,startY+i*12);
          }
          ctx.fillStyle=rgb(PURPLE,0.8);
          ctx.fillText('HASH CHAIN \u25B8',x,startY-10);
        }

        function drawFail(now) {
          if(!failTriggered) return;
          haltAlpha=Math.min(haltAlpha+0.018,1);
          var pa=0.04+Math.sin(now*0.004)*0.025;
          ctx.fillStyle=rgb(RED,pa*haltAlpha);
          ctx.fillRect(0,0,W,H);

          var hf=Math.round(Math.max(9,radius*0.13));
          ctx.font='500 '+hf+'px "IBM Plex Mono"';
          ctx.fillStyle=rgb(RED,0.7*haltAlpha);
          ctx.textAlign='center';
          ctx.fillText('\u25A3  SYSTEM HALTED',cx,Math.min(cy+radius*1.3,H-20));

          ctx.font='300 '+Math.round(hf*0.65)+'px "IBM Plex Mono"';
          ctx.fillStyle=rgb(RED,0.75*haltAlpha);
          ctx.fillText('ENVELO FAIL-CLOSED ENFORCEMENT',cx,Math.min(cy+radius*1.3+hf+4,H-8));
        }

        function syncCards() {
          var colors = ['var(--accent-green)','var(--accent-amber)','var(--purple-bright)'];
          for(var i=0;i<3;i++){
            var card=document.getElementById('cat72-pc'+i);
            var dot=document.getElementById('cat72-dot'+i);
            if(!card||!dot) continue;
            if(i===phase){
              card.style.borderColor='var(--border-glass)';
              card.style.opacity='1';
              dot.style.background=colors[i];
              dot.style.boxShadow='0 0 12px '+colors[i];
            } else {
              card.style.borderColor='var(--border-subtle)';
              card.style.opacity='0.6';
              dot.style.background='rgba(0,0,0,0.15)';
              dot.style.boxShadow='none';
            }
          }
        }

        var lastTime=0;
  var animRunning = false;
        function animate(now) {
          if(!lastTime) lastTime=now;
          var dt=Math.min(now-lastTime, 32); lastTime=now;
          ctx.clearRect(0,0,W,H);

          if(!halted) simTime+=SIM_SPEED*dt;

          if(simTime<24) phase=0;
          else if(simTime<48) phase=1;
          else phase=2;

          if(simTime>=72){
            simTime=72;
            if(!holdStart) holdStart=now;
          }
          if(holdStart&&now-holdStart>3000){
            simTime=0; blockCount=0; phase=0;
            holdStart=0;
            telemetry=[]; stressMarkers=[]; boundaryPulses=[];
            initAgents();
          }

          syncCards();
          updateAgents(dt);
          spawnTelemetry(now);
          spawnBlock(now);
          spawnStress(now);

          drawGrid();
          drawBoundary(now);
          drawBrackets();
          drawPulses();
          drawTelemetry();
          drawAgents();
          drawStress();
          drawCenter();
          drawHash(now);
          drawFail(now);
          drawLegend();

          requestAnimationFrame(animate);
        }

        window.addEventListener('resize',resize);
        resize();
        initAgents();

        // Click-to-jump on phase cards
        var phaseJumpTimes = [0, 24, 48]; // start of each phase
        for (var pi=0; pi<3; pi++) {
          (function(idx) {
            var card = document.getElementById('cat72-pc'+idx);
            if (card) {
              card.addEventListener('click', function() {
                simTime = phaseJumpTimes[idx];
                phase = idx;
                blockCount = Math.floor(simTime * 0.6);
                failTriggered = false;
                halted = false;
                haltAlpha = 0;
                telemetry = [];
                stressMarkers = [];
                boundaryPulses = [];
                initAgents();
                // Brief visual feedback
                this.style.transform = 'scale(0.97)';
                var self = this;
                setTimeout(function(){ self.style.transform = ''; }, 150);
              });
            }
          })(pi);
        }

        requestAnimationFrame(animate);
      })();
      </script>

      <a href="#verify" class="hud-link" style="display: inline-flex; align-items: center; gap: 8px; font-size:11px;">
          VERIFY A CERTIFICATE →
        </a>
    </section>

    <!-- INSIGHT SECTION -->

    <section id="insight" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">BEYOND COMPLIANCE</span>
          <h2 class="section-title">Enforcement Produces Intelligence</h2>
          <p class="section-lead">
            Every conformance cycle maps where a model operates within its defined boundaries — and where it doesn't.
          </p>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto;">
        <div class="hud-frame hud-scanline"><i></i>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num" style="min-width:56px;">MAP</span><span style="width:6px;height:6px;border-radius:50%;background:rgba(60,48,100,1.00);flex-shrink:0;margin-top:6px;"></span><div style="width:8px;flex-shrink:0;"></div>
            <div><div class="hud-title">Violation Mapping</div><div class="hud-desc">Surfaces the precise conditions where a model exceeds its defined domain.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num" style="min-width:56px;">TREND</span><span style="width:6px;height:6px;border-radius:50%;background:rgba(60,48,100,1.00);flex-shrink:0;margin-top:6px;"></span><div style="width:8px;flex-shrink:0;"></div>
            <div><div class="hud-title">Conformance Trending</div><div class="hud-desc">Longitudinal data showing behavior evolution across certification cycles.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num" style="min-width:56px;">REPORT</span><span style="width:6px;height:6px;border-radius:50%;background:rgba(60,48,100,1.00);flex-shrink:0;margin-top:6px;"></span><div style="width:8px;flex-shrink:0;"></div>
            <div><div class="hud-title">Actionable Findings</div><div class="hud-desc">Specific, reproducible results — not abstract risk scores.</div></div>
          </div>
          <div class="hud-row" style="display:flex;align-items:flex-start;">
            <span class="hud-num" style="min-width:56px;">LOOP</span><span style="width:6px;height:6px;border-radius:50%;background:rgba(60,48,100,1.00);flex-shrink:0;margin-top:6px;"></span><div style="width:8px;flex-shrink:0;"></div>
            <div><div class="hud-title">Feedback Cycle</div><div class="hud-desc">Each audit narrows the gap between defined and actual behavior.</div></div>
          </div>
        </div>
        <p style="text-align:center;font-family:var(--mono);font-size:11px;color:rgba(0,0,0,0.52);margin-top:-32px;letter-spacing:1px;">Enforcement and improvement are the same operation.</p>
      </div>
    </section>

    <section id="process" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">CONFORMANCE PROCESS</span>
          <h2 class="section-title">Your Path to Attestation</h2>
          <p class="section-lead">
            No proprietary data required. The Interlock observes your system in normal operation, auto-discovers operational boundaries, then enforces them for 72 hours. Your IP stays yours — we certify the process, not the parameters.
          </p>
        </div>
      </div>

      

      <!-- Animated Timeline -->
      <div style="position:relative; margin-bottom: var(--space-4);">
        <canvas id="process-canvas" style="width:100%;display:block;"></canvas>
      <!-- Mobile Static: Process v5 -->
      <div class="m-diagram" aria-label="Certification process">
        <div class="d-label"><div class="d-dot d-dot-g"></div><span class="d-tag">CONFORMANCE PATH · 5 GATES</span></div>
        <div class="p-timeline">
          <div class="p-step"><div class="p-track"><div class="p-marker p-mp">01</div><div class="p-line p-lp"></div></div><div class="p-info"><div class="p-title">APPLY</div><div class="p-desc">Submit ODD declaration</div></div></div>
          <div class="p-step"><div class="p-track"><div class="p-marker p-mp">02</div><div class="p-line p-lp"></div></div><div class="p-info"><div class="p-title">DEPLOY</div><div class="p-desc">ENVELO Interlock installed</div></div></div>
          <div class="p-step"><div class="p-track"><div class="p-marker p-mt">03</div><div class="p-line p-lt"></div></div><div class="p-info"><div class="p-title">OBSERVE</div><div class="p-desc">Auto-discover operational boundaries</div></div></div>
          <div class="p-step"><div class="p-track"><div class="p-marker p-mt">04</div><div class="p-line p-lt"></div></div><div class="p-info"><div class="p-title">CAT-72</div><div class="p-desc">72-hour continuous enforcement test</div></div></div>
          <div class="p-step"><div class="p-track"><div class="p-marker p-mg">05</div></div><div class="p-info"><div class="p-title">CERTIFY</div><div class="p-desc">Conformance record issued to registry</div></div></div>
        </div>
        <div class="d-foot">YOUR IP STAYS YOURS · WE CERTIFY THE PROCESS</div>
      </div>

                              <script>
      (function(){
        var c=document.getElementById('process-canvas');
        if(!c)return;
        var ctx=c.getContext('2d');
        var dpr=window.devicePixelRatio||1;
        var W=0,H=0;

        var PURPLE=[157,140,207],GREEN=[92,214,133],DIM=[140,145,160];
        function rgb(c,a){return'rgba('+c[0]+','+c[1]+','+c[2]+','+a+')';}
        function lerp(a,b,t){return a+(b-a)*t;}
        function ease(t){return t<0.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2;}

        var steps=[
          {label:'Apply',sub:'3 Fields',num:'1',col:PURPLE,r:26},
          {label:'Approve',sub:'Payment',num:'2',col:PURPLE,r:26},
          {label:'Deploy',sub:'One Command',num:'3',col:PURPLE,r:26},
          {label:'Discover',sub:'Auto-Boundaries',num:'4',col:PURPLE,r:26},
          {label:'CAT-72',sub:'72 Hours',num:'5',col:PURPLE,r:30,big:1},
          {label:'Certified',sub:'Automated',num:'\u2713',col:GREEN,r:26}
        ];

        var ambient=[];
        for(var i=0;i<30;i++)ambient.push({
          x:Math.random(),y:Math.random(),
          vx:(Math.random()-0.5)*0.0002,vy:(Math.random()-0.5)*0.0002,
          size:0.3+Math.random()*0.7,alpha:0.02+Math.random()*0.04,
          phase:Math.random()*Math.PI*2});

        var dotT=0,dotTrail=[],arrivalPulses=[];
        var pauseT=1.4,travelT=0.7;
        var segT=pauseT+travelT;
        var totalT=steps.length*segT+1.0;

        function resize(){
          var r=c.parentElement.getBoundingClientRect();
          W=r.width;H=W<550?560:200;
          if(window.innerHeight<500&&window.innerWidth>window.innerHeight){H=Math.min(H,window.innerHeight*0.55);}
          c.width=W*dpr;c.height=H*dpr;
          c.style.height=H+'px';
          ctx.setTransform(dpr,0,0,dpr,0,0);
        }
        c._saResize = resize;

        function getStops(){
          var mob=W<550,s=[];
          if(!mob){var m=W*0.08,span=W-m*2;
            for(var i=0;i<steps.length;i++)s.push({x:m+span*(i/(steps.length-1)),y:H/2});
          }else{var mt=H*0.06,mb=H*0.06,span=H-mt-mb;
            for(var i=0;i<steps.length;i++)s.push({x:50,y:mt+span*(i/(steps.length-1))});
          }return s;
        }

        function drawAmbient(time){}

        function drawConn(a,b,col){
          var g=ctx.createLinearGradient(a.x,a.y,b.x,b.y);
          g.addColorStop(0,rgb(col,0.2));g.addColorStop(0.5,rgb(col,0.1));g.addColorStop(1,rgb(col,0.2));
          ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);
          ctx.strokeStyle=g;ctx.lineWidth=1;ctx.stroke();
        }

        function drawNode(x,y,step,time){
          var r=step.r,col=step.col;

          // Circle interior — transparent to match other diagrams
          var rr=r;
          if(step.big)rr=r+1.2*Math.sin(time*1.2);

          // Main ring
          ctx.beginPath();ctx.arc(x,y,rr,0,Math.PI*2);
          if(step.dashed){ctx.setLineDash([5,4]);ctx.strokeStyle=rgb(col,0.18);}
          else ctx.strokeStyle=rgb(col,step.big?0.6:0.4);
          ctx.lineWidth=1.2;ctx.stroke();ctx.setLineDash([]);

          // Rotating dashed inner ring
          ctx.save();ctx.translate(x,y);ctx.rotate(time*0.12);
          ctx.beginPath();ctx.arc(0,0,rr*0.82,0,Math.PI*2);
          ctx.setLineDash([2,8]);ctx.strokeStyle=rgb(col,0.07);
          ctx.lineWidth=0.7;ctx.stroke();ctx.setLineDash([]);ctx.restore();

          // Registration marks — crisp corners
          var ml=5;ctx.strokeStyle=rgb(col,0.2);ctx.lineWidth=0.6;
          var corners=[[-1,-1],[1,-1],[-1,1],[1,1]];
          for(var ci=0;ci<4;ci++){
            var sx=corners[ci][0],sy=corners[ci][1];
            ctx.beginPath();ctx.moveTo(x+sx*(rr-3),y+sy*rr);ctx.lineTo(x+sx*(rr-3-ml),y+sy*rr);ctx.stroke();
            ctx.beginPath();ctx.moveTo(x+sx*rr,y+sy*(rr-3));ctx.lineTo(x+sx*rr,y+sy*(rr-3-ml));ctx.stroke();
          }

          // Number — sharp mono
          ctx.textAlign='center';ctx.textBaseline='middle';
          ctx.font=step.num.length>1?'300 15px "IBM Plex Mono"':'300 17px "IBM Plex Mono"';
          ctx.fillStyle=rgb(col,step.dashed?0.75:0.95);
          ctx.fillText(step.num,x,y+1);ctx.textBaseline='alphabetic';

          // Labels — deck-style typography
          var mob=W<550;
          if(!mob){
            ctx.font='500 10px "IBM Plex Mono"';
            ctx.fillStyle=col===GREEN?rgb(GREEN,0.95):'rgba(0,0,0,1.00)';
            ctx.fillText(step.label,x,y+rr+17);
            ctx.font='300 8.5px "IBM Plex Mono"';
            ctx.fillStyle=col===GREEN?rgb(GREEN,0.55):'rgba(0,0,0,0.60)';
            ctx.fillText(step.sub,x,y+rr+30);
          }else{
            ctx.textAlign='left';
            ctx.font='500 12px "IBM Plex Mono"';
            ctx.fillStyle=col===GREEN?rgb(GREEN,0.95):'rgba(0,0,0,1.00)';
            ctx.fillText(step.label,x+rr+16,y-4);
            ctx.font='300 10px "IBM Plex Mono"';
            ctx.fillStyle=col===GREEN?rgb(GREEN,0.55):'rgba(0,0,0,0.60)';
            ctx.fillText(step.sub,x+rr+16,y+12);
            ctx.textAlign='center';
          }
        }

        function drawDot(stops,time){
          dotT+=1/60;if(dotT>=totalT)dotT=0;
          var seg=Math.floor(dotT/segT);
          if(seg>=steps.length)return;
          var st=dotT-seg*segT;
          var cx,cy,traveling=false;

          if(st<=pauseT){cx=stops[seg].x;cy=stops[seg].y;}
          else{
            traveling=true;
            var next=seg+1;if(next>=steps.length){dotT=0;return;}
            var p=ease((st-pauseT)/travelT);
            cx=lerp(stops[seg].x,stops[next].x,p);
            cy=lerp(stops[seg].y,stops[next].y,p);
            if(p>0.92&&!arrivalPulses.find(function(a){return a.seg===next;})){
              arrivalPulses.push({x:stops[next].x,y:stops[next].y,r:0,alpha:0.5,seg:next});
            }
          }

          // Color transition purple → green
          var ct=0;
          if(seg>=4)ct=1;
          else if(seg===3&&st>pauseT)ct=ease((st-pauseT)/travelT);
          var r=Math.round(PURPLE[0]+(GREEN[0]-PURPLE[0])*ct);
          var g=Math.round(PURPLE[1]+(GREEN[1]-PURPLE[1])*ct);
          var b=Math.round(PURPLE[2]+(GREEN[2]-PURPLE[2])*ct);
          var col=[r,g,b];

          // Trail — only when moving
          if(traveling){
            dotTrail.push({x:cx,y:cy,col:col.slice(),alpha:0.2,size:3});
            if(dotTrail.length>18)dotTrail.shift();
          }
          for(var i=dotTrail.length-1;i>=0;i--){
            var d=dotTrail[i];d.alpha*=0.9;d.size*=0.96;
            if(d.alpha<0.01){dotTrail.splice(i,1);continue;}
            ctx.beginPath();ctx.arc(d.x,d.y,d.size*0.5,0,Math.PI*2);
            ctx.fillStyle=rgb(d.col,d.alpha*0.3);ctx.fill();
          }

          // 2-layer drawPacket style — matches hero/CAT-72 agents
          var baseOp=0.85, sz=3;
          // Outer glow
          var g1=ctx.createRadialGradient(cx,cy,0,cx,cy,sz*2.8);
          g1.addColorStop(0,rgb(col,baseOp*0.28));g1.addColorStop(1,rgb(col,0));
          ctx.fillStyle=g1;ctx.beginPath();ctx.arc(cx,cy,sz*2.8*1.2,0,Math.PI*2);ctx.fill();
          // Core
          ctx.beginPath();ctx.arc(cx,cy,sz,0,Math.PI*2);
          ctx.fillStyle=rgb(col,baseOp);ctx.fill();

          // Breathing ring while paused
          if(!traveling){
            var br=12+1.5*Math.sin(time*2.5);
            ctx.beginPath();ctx.arc(cx,cy,br,0,Math.PI*2);
            ctx.strokeStyle=rgb(col,0.1+0.03*Math.sin(time*2.5));
            ctx.lineWidth=0.6;ctx.stroke();
          }
        }

        function drawPulses(){
          for(var i=arrivalPulses.length-1;i>=0;i--){
            var p=arrivalPulses[i];p.r+=0.8;p.alpha-=0.012;
            if(p.alpha<=0){arrivalPulses.splice(i,1);continue;}
            ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
            var col=p.seg>=4?GREEN:PURPLE;
            ctx.strokeStyle=rgb(col,p.alpha*0.6);ctx.lineWidth=0.8;ctx.stroke();
          }
        }

        var lastTime=0;
  var animRunning = false;
        function animate(ts){
          if(!lastTime)lastTime=ts;lastTime=ts;
          var time=ts/1000;
          resize();var stops=getStops();
          ctx.clearRect(0,0,W,H);
          drawAmbient(time);
          for(var i=0;i<stops.length-1;i++){
            var colT=i>=3?1:(i===2?0.5:0);
            var r=Math.round(PURPLE[0]+(GREEN[0]-PURPLE[0])*colT);
            var g=Math.round(PURPLE[1]+(GREEN[1]-PURPLE[1])*colT);
            var b=Math.round(PURPLE[2]+(GREEN[2]-PURPLE[2])*colT);
            drawConn(stops[i],stops[i+1],[r,g,b]);
          }
          for(var i=0;i<steps.length;i++) drawNode(stops[i].x,stops[i].y,steps[i],time);
          drawDot(stops,time);
          drawPulses();
          requestAnimationFrame(animate);
        }

        resize();window.addEventListener('resize',resize);
        requestAnimationFrame(animate);
      })();
      </script>
      </div>
      <!-- Fee Schedule -->
      <div class="reveal" style="margin-top: var(--space-4); max-width: 600px; margin-left: auto; margin-right: auto;">
        <div style="text-align: center; margin-bottom: var(--space-2);">
          <div style="font-family: var(--mono); font-size: 11px; letter-spacing: 4px; color: rgba(60,48,100,1.00);">FEE SCHEDULE</div>
        </div>
        <div class="hud-frame hud-scanline" style="max-width:500px;margin:0 auto;"><i></i>
          <div style="display:grid;grid-template-columns:1fr 120px;align-items:center;" class="hud-row">
            <div><div class="hud-title">Conformance Assessment</div><div class="hud-desc">Due at application — covers ODD review, CAT-72, certificate issuance</div></div>
            <span style="font-family:var(--mono);font-size:14px;color:rgba(0,0,0,1.00);text-align:right;">$12,000</span>
          </div>
          <div style="display:grid;grid-template-columns:1fr 120px;align-items:center;" class="hud-row">
            <div><div class="hud-title">Annual Maintenance</div><div class="hud-desc">Begins at certificate issuance — continuous monitoring, registry, annual review</div></div>
            <span style="font-family:var(--mono);font-size:14px;color:rgba(0,0,0,1.00);text-align:right;">$12,000</span>
          </div>
          <div style="display:grid;grid-template-columns:1fr 120px;align-items:center;" class="hud-row">
            <div><div class="hud-title">Enterprise</div><div class="hud-desc">Volume pricing, dedicated support</div></div>
            <span style="text-align:right;"><a href="#contact" class="hud-link">CONTACT →</a></span>
          </div>
        </div>
        <div style="max-width:500px;margin:12px auto 0;padding:12px 16px;border:1px solid rgba(0,0,0,0.09);border-radius:8px;background:rgba(0,0,0,0.03);">
          <p style="font-size:11px;color:rgba(0,0,0,1.00);line-height:1.6;margin:0;font-family:var(--mono);">
            <span style="color:rgba(60,48,100,1.00);">How it works:</span> $12,000 assessment fee due at application. Non-refundable — covers ODD review, CAT-72 administration, and certificate issuance. $12,000 annual maintenance begins at certificate issuance.
          </p>
        </div>
        <p style="text-align:center;font-size:10px;color:rgba(0,0,0,0.52);margin-top:12px;font-family:var(--mono);">All fees USD · Base rates · <a href="#contact" style="color:rgba(60,48,100,1.00);">Request quote</a></p>
      </div>

      <!-- CTA -->
      <div class="reveal" style="text-align: center; margin-top: var(--space-4);">
        <a href="https://app.sentinelauthority.org" style="display:inline-flex;align-items:center;gap:10px;font-family:var(--mono);font-size:13px;letter-spacing:3px;text-transform:uppercase;color:rgba(60,48,100,1.00);text-decoration:none;transition:filter .2s;" onmouseover="this.style.filter='brightness(1.4)'" onmouseout="this.style.filter='brightness(1)'">
          Begin Assessment
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </a>
        <p style="font-size: 12px; color: var(--text-tertiary); margin-top: 16px;">Questions? <a href="#contact" style="color: rgba(60,48,100,1.00);">Contact us</a></p>
      </div>
    </section>
    <section id="artifacts" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">DOCUMENTATION</span>
          <h2 class="section-title">Resources</h2>
          <p class="section-lead">
            Normative specifications, implementation guides, and the ENVELO Interlock.
          </p>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto var(--space-3);">
        <div style="display:flex;align-items:center;gap:10px;justify-content:center;">
          <span class="hud-dot hud-dot-amber"></span>
          <span style="font-family:var(--mono);font-size:11px;letter-spacing:1px;color:rgba(140,100,30,1.00);">ODDC v1.0 — EFFECTIVE JAN 2026</span>
          <a href="draft.html" class="hud-link" style="color:rgba(140,100,30,1.00);border-color:rgba(140,100,30,0.33);margin-left:8px;">STATUS →</a>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto var(--space-3);">
        <div class="hud-frame hud-scanline"><i></i>
          <div class="hud-label" style="margin-bottom:12px;">DOCUMENTS</div>
          <div class="hud-row" style="display:flex;align-items:center;cursor:pointer;" onclick="openDownloadModal('docs/ODDC_Overview_v3.0.pdf','ODDC Overview v3.0')">
            <span class="hud-dot"></span>
            <span class="hud-title" style="flex:1;">ODDC Overview</span>
            <span style="font-family:var(--mono);font-size:9px;color:rgba(0,0,0,0.52);margin-right:12px;">v3.0</span>
            <span style="font-family:var(--mono);font-size:9px;color:rgba(60,48,100,1.00);">PDF ↓</span>
          </div>
          <div class="hud-row" style="display:flex;align-items:center;cursor:pointer;" onclick="openDownloadModal('docs/ENVELO_Requirements_v3.0.pdf','ENVELO Requirements v3.0')">
            <span class="hud-dot hud-dot-green"></span>
            <span class="hud-title" style="flex:1;">ENVELO Requirements</span>
            <span style="font-family:var(--mono);font-size:9px;color:rgba(0,0,0,0.52);margin-right:12px;">v3.0</span>
            <span style="font-family:var(--mono);font-size:9px;color:rgba(22,120,58,1.00);">PDF ↓</span>
          </div>
          <div class="hud-row" style="display:flex;align-items:center;cursor:pointer;" onclick="openDownloadModal('docs/CAT-72_Procedure_v3.0.pdf','CAT-72 Procedure v3.0')">
            <span class="hud-dot"></span>
            <span class="hud-title" style="flex:1;">CAT-72 Procedure</span>
            <span style="font-family:var(--mono);font-size:9px;color:rgba(0,0,0,0.52);margin-right:12px;">v3.0</span>
            <span style="font-family:var(--mono);font-size:9px;color:rgba(60,48,100,1.00);">PDF ↓</span>
          </div>
          <div class="hud-row" style="display:flex;align-items:center;cursor:pointer;" onclick="openDownloadModal('docs/ODDC_Critical_QA_v3.0.pdf','Critical Q&A v3.0')">
            <span class="hud-dot hud-dot-amber"></span>
            <span class="hud-title" style="flex:1;">Critical Q&A</span>
            <span style="font-family:var(--mono);font-size:9px;color:rgba(0,0,0,0.52);margin-right:12px;">v3.0</span>
            <span style="font-family:var(--mono);font-size:9px;color:rgba(140,100,30,1.00);">PDF ↓</span>
          </div>        </div>
      </div>

      <!-- ENVELO Interlock — HUD -->
      <div class="reveal" style="max-width: 700px; margin: 0 auto;">
        <div class="hud-frame hud-scanline"><i></i>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
            <span class="hud-label">RUNTIME ENFORCEMENT</span>
            <span class="hud-dot hud-dot-green"></span>
          </div>
          <div style="font-family:var(--serif);font-size:22px;color:rgba(0,0,0,1.00);font-weight:200;margin-bottom:8px;">ENVELO Interlock</div>
          <div class="hud-desc" style="margin-bottom:16px;max-width:500px;">The interlock layer that makes execution limits non-violable. Tiered enforcement: self-correction, controlled degradation, hard halt.</div>
          <div class="hud-row" style="display:flex;gap:24px;flex-wrap:wrap;padding-bottom:16px;">
            <div style="display:flex;align-items:center;gap:6px;">
              <span class="hud-dot hud-dot-green"></span>
              <span class="hud-label" style="color:rgba(22,120,58,1.00);">NON-BYPASSABLE</span>
            </div>
            <div style="display:flex;align-items:center;gap:6px;">
              <span class="hud-dot hud-dot-green"></span>
              <span class="hud-label" style="color:rgba(22,120,58,1.00);">TAMPER-EVIDENT</span>
            </div>
            <div style="display:flex;align-items:center;gap:6px;">
              <span class="hud-dot hud-dot-green"></span>
              <span class="hud-label" style="color:rgba(22,120,58,1.00);">TIERED ENFORCEMENT</span>
            </div>
          </div>
          <div class="hud-row" style="display:flex;justify-content:space-between;align-items:center;">
            <a href="https://app.sentinelauthority.org" class="hud-link">ACCESS INTERLOCK →</a>
            <span class="hud-label">REQUIRED FOR ODDC</span>
          </div>
        </div>
      </div>

      <div class="reveal" style="text-align: center; margin-top: var(--space-3);">
        <a href="scenarios.html" class="hud-link" style="font-size:11px;">INDUSTRY SCENARIOS — 10 VERTICALS →</a>
      </div>
    </section>
    <section id="verify" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">PUBLIC REGISTRY</span>
          <h2 class="section-title">Verify</h2>
          <p class="section-lead">
            See who&#x2019;s certified. Verify any ODDC certification instantly. When your competitors are listed and you&#x2019;re not, procurement committees notice.
          </p>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
          <span class="hud-label">SENTINEL REGISTRY</span>
          <div style="display:flex;align-items:center;gap:6px;">
            <span class="hud-dot hud-dot-green"></span>
            <span class="hud-label" style="color:rgba(22,120,58,1.00);">LIVE</span>
          </div>
        </div>

        <div style="display:flex;gap:0;margin-bottom:24px;border-bottom:1px solid rgba(0,0,0,0.09);">
          <button id="tab-verify" onclick="setVerifyMode('verify')" style="flex:1;padding:10px 0;border:none;cursor:pointer;font-family:var(--mono);font-size:10px;letter-spacing:2px;background:transparent;color:rgba(60,48,100,1.00);border-bottom:2px solid rgba(60,48,100,1.00);transition:all 0.2s;">VERIFY CERTIFICATE</button>
          <button id="tab-search" onclick="setVerifyMode('search')" style="flex:1;padding:10px 0;border:none;cursor:pointer;font-family:var(--mono);font-size:10px;letter-spacing:2px;background:transparent;color:rgba(0,0,0,0.52);border-bottom:2px solid transparent;transition:all 0.2s;">SEARCH REGISTRY</button>
        </div>

        <div id="verify-mode">
          <div style="display:flex;gap:8px;align-items:stretch;">
            <input type="text" id="cert-input" placeholder="ODDC-2026-00001" style="flex:1;padding:14px 0;font-family:var(--mono);font-size:15px;letter-spacing:2px;background:transparent;border:none;border-bottom:1px solid rgba(60,48,100,0.50);color:var(--text-primary);outline:none;">
            <button onclick="verifyCertificate()" style="padding:14px 20px;font-family:var(--mono);font-size:10px;letter-spacing:2px;background:transparent;border:none;border-bottom:1px solid rgba(60,48,100,0.62);color:rgba(60,48,100,1.00);cursor:pointer;transition:all 0.2s;white-space:nowrap;">VERIFY</button>
          </div>
          <div class="hud-desc" style="margin-top:8px;">Enter a certificate ID from any ODDC mark or certificate document.</div>
        </div>

        <div id="search-mode" style="display:none;">
          <div style="display:flex;gap:8px;align-items:stretch;">
            <input type="text" id="search-input" placeholder="Company or system name..." style="flex:1;padding:14px 0;font-family:var(--mono);font-size:15px;letter-spacing:2px;background:transparent;border:none;border-bottom:1px solid rgba(60,48,100,0.50);color:var(--text-primary);outline:none;">
            <button onclick="searchRegistry()" style="padding:14px 20px;font-family:var(--mono);font-size:10px;letter-spacing:2px;background:transparent;border:none;border-bottom:1px solid rgba(60,48,100,0.62);color:rgba(60,48,100,1.00);cursor:pointer;transition:all 0.2s;white-space:nowrap;">SEARCH</button>
          </div>
          <div class="hud-desc" style="margin-top:8px;">Search the public conformance registry by company or system name.</div>
        </div>

        <div id="verify-result" style="margin-top:20px;"></div>

        <div style="margin-top:48px;padding-top:24px;border-top:1px solid rgba(0,0,0,0.09);">
          <div class="hud-label" style="margin-bottom:12px;">PROGRAMMATIC ACCESS</div>
          <div class="hud-desc" style="margin-bottom:16px;">Integrate verification into your systems with our REST API.</div>
          <div style="padding:8px 0;border-top:1px solid rgba(0,0,0,0.09);font-family:var(--mono);font-size:12px;color:var(--text-secondary);word-break:break-all;">
            <span style="color:rgba(60,48,100,1.00);">GET</span> <span style="color:var(--text-tertiary);">https://api.sentinelauthority.org/v1/verify/</span><span style="color:rgba(22,120,58,1.00);">{cert_id}</span>
          </div>
          <div style="padding:12px 0;">
            <a href="mailto:conformance@sentinelauthority.org" class="hud-link">REQUEST API KEY &#x2192;</a>
          </div>
        </div>
      </div>
    </section>
    <section id="contact" class="section">
      <div class="section-head reveal">
        <div>
          <span class="section-label">CONNECT</span>
          <h2 class="section-title">Let's Talk</h2>
          <p class="section-lead">
            Ready for conformance? Questions about ODDC? We're here.
          </p>
        </div>
      </div>

      <div class="reveal" style="max-width:700px;margin:0 auto;">
        <div style="padding:20px 0;border-bottom:1px solid rgba(0,0,0,0.09);display:flex;align-items:flex-start;gap:12px;">
          <span class="hud-dot" style="width:6px;height:6px;border-radius:50%;background:rgba(60,48,100,1.00);flex-shrink:0;margin-top:6px;"></span>
          <div>
            <div class="hud-label" style="margin-bottom:4px;">GENERAL INQUIRIES</div>
            <a href="mailto:info@sentinelauthority.org" style="font-family:var(--mono);font-size:14px;color:var(--text-primary);letter-spacing:0.5px;text-decoration:none;">info@sentinelauthority.org</a>
            <div class="hud-desc" style="margin-top:4px;">Questions about ODDC, the framework, or how conformance works.</div>
          </div>
        </div>

        <div style="padding:20px 0;border-bottom:1px solid rgba(0,0,0,0.09);display:flex;align-items:flex-start;gap:12px;">
          <span class="hud-dot" style="width:6px;height:6px;border-radius:50%;background:rgba(60,48,100,1.00);flex-shrink:0;margin-top:6px;"></span>
          <div>
            <div class="hud-label" style="margin-bottom:4px;">CONFORMANCE ASSESSMENT</div>
            <a href="mailto:conformance@sentinelauthority.org" style="font-family:var(--mono);font-size:14px;color:#5a4a8a;letter-spacing:0.5px;text-decoration:none;">conformance@sentinelauthority.org</a>
            <div class="hud-desc" style="margin-top:4px;">Start your ODDC certification. Founding Cohort pricing available for qualified applicants.</div>
          </div>
        </div>

        <div style="padding:20px 0;border-bottom:1px solid rgba(0,0,0,0.09);display:flex;align-items:flex-start;gap:12px;">
          <span class="hud-dot" style="width:6px;height:6px;border-radius:50%;background:rgba(60,48,100,1.00);flex-shrink:0;margin-top:6px;"></span>
          <div>
            <div class="hud-label" style="margin-bottom:4px;">APPLY</div>
            <a href="https://app.sentinelauthority.org" class="hud-link" style="font-size:14px;">APP.SENTINELAUTHORITY.ORG &#x2192;</a>
            <div class="hud-desc" style="margin-top:4px;">Create an account and begin your certification application.</div>
          </div>
        </div>

        <div style="margin-top:32px;text-align:center;">
          <span class="hud-label">TYPICAL RESPONSE</span>
          <span style="font-family:var(--mono);font-size:10px;letter-spacing:2px;color:var(--text-secondary);margin-left:8px;">&lt; 24 HOURS</span>
        </div>
      </div>
    </section>
    <footer>
      <div class="footer-inner">
        <div>
          <div>© <span id="year"></span> SENTINEL AUTHORITY — ODDC</div>
          <div class="footer-spec">ODDC v1.0 — Effective January 2026. Specifications subject to revision. Examples are non-normative.</div>
          <div class="footer-disclaimer">
            Independent conformance determination. Not a regulator. Not legal advice. Implementations remain the responsibility of system operators.
          </div>
        </div>
        <div class="foot-links">
          <div class="foot-col">
            <div class="foot-col-title">FRAMEWORK</div>
            <a href="#envelo">ENVELO</a>
            <a href="#security">Security</a>
            <a href="#criteria">Criteria</a>
            <a href="#cat72">CAT-72</a>
            <a href="#process">Process</a>
          </div>
          <div class="foot-col">
            <div class="foot-col-title">ARTIFACTS</div>
            <a href="#artifacts">Artifacts</a>
            <a href="scenarios.html">Scenarios</a>
            <a href="research.html">Research</a>
            <a href="#verify" data-section="verify">Verify</a>
            
          </div>
          <div class="foot-col">
            <div class="foot-col-title">LEGAL</div>
            <a href="privacy.html">Privacy</a>
            <a href="terms.html">Terms</a>
            <a href="conformance-agreement.html">Conformance</a>
          </div>
          <div class="foot-col">
            <div class="foot-col-title">CONNECT</div>
            <a href="#contact">Contact</a>
            <a href="https://app.sentinelauthority.org">Sign In</a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Download Modal -->
    <div id="downloadModal" class="download-modal" aria-hidden="true">
      <div class="download-modal-card">
        <button class="download-modal-close" onclick="closeDownloadModal()" aria-label="Close">✕</button>
        <h3 id="downloadModalTitle">DOCUMENT ACCESS</h3>
        <p>Provide contact information to access this document.</p>
        <form id="downloadForm" action="https://api.sentinelauthority.org/api/applications/document-download" method="POST" onsubmit="handleDownloadSubmit(event)">
          <input type="hidden" name="access_key" value="3e7e3ac5-9b32-46a0-b901-d36f8723879c">
          <input type="hidden" name="subject" value="New Document Download">
          <input type="hidden" name="from_name" value="Sentinel Authority Website">
          <input type="hidden" id="documentName" name="document" value="">
          <div class="download-form-group">
            <label class="download-form-label" for="download-email">Email (required)</label>
            <input type="email" id="download-email" name="email" class="download-form-input" required>
          </div>
          <div class="download-form-group">
            <label class="download-form-label" for="download-org">Organization (optional)</label>
            <input type="text" id="download-org" name="org" class="download-form-input">
          </div>
          <div class="download-form-group">
            <label class="download-form-label" for="download-role">Role (optional)</label>
            <select id="download-role" name="role" class="download-form-select">
              <option value="">Select…</option>
              <option value="engineering">Engineering</option>
              <option value="risk">Risk & Insurance</option>
              <option value="regulatory">Regulatory</option>
              <option value="legal">Legal</option>
              <option value="operations">Operations</option>
              <option value="other">Other</option>
            </select>
          </div>
          <button type="submit" class="download-form-btn">ACCESS DOCUMENT →</button>
          <p class="download-form-fine">Contact information used for document delivery and technical correspondence only.</p>
        </form>
      </div>
    </div>
  </main>

  <script>
    // Year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Full hash for copy functionality
    const FULL_HASH = "8f2a7b3c4d5e6f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3c91d";
    const toast = document.querySelector('.copy-toast');
    
    function copyHash() {
      const text = FULL_HASH;
      if (navigator.clipboard?.writeText) {
        navigator.clipboard.writeText(text).then(showCopied).catch(fallbackCopy);
      } else {
        fallbackCopy();
      }
      function fallbackCopy() {
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.style.position = "fixed";
        ta.style.opacity = "0";
        document.body.appendChild(ta);
        ta.select();
        try { document.execCommand("copy"); showCopied(); } finally { ta.remove(); }
      }
      function showCopied() {
        const btn = document.querySelector('.copy-btn');
        btn.textContent = 'Copied';
        btn.classList.add('copied');
        
        // Show toast
        toast.classList.add('show');
        
        setTimeout(() => { 
          btn.textContent = 'Copy'; 
          btn.classList.remove('copied'); 
          toast.classList.remove('show');
        }, 1800);
      }
    }

    // Mobile nav
    const navToggle = document.querySelector('.nav-toggle');
    const navDrawer = document.querySelector('.nav-drawer');
    const drawerOverlay = document.querySelector('.drawer-overlay');
    const drawerLinks = navDrawer.querySelectorAll('a');
    
    function openDrawer() {
      navToggle.setAttribute('aria-expanded', 'true');
      navDrawer.classList.add('open');
      drawerOverlay.classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    
    function closeDrawer() {
      navToggle.setAttribute('aria-expanded', 'false');
      navDrawer.classList.remove('open');
      drawerOverlay.classList.remove('open');
      document.body.style.overflow = '';
    }
    
    navToggle.addEventListener('click', () => {
      const isOpen = navToggle.getAttribute('aria-expanded') === 'true';
      isOpen ? closeDrawer() : openDrawer();
    });
    
    drawerOverlay.addEventListener('click', closeDrawer);
    
    drawerLinks.forEach(link => {
      link.addEventListener('click', closeDrawer);
    });
    
    // Close on escape (only if open, return focus)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && navToggle.getAttribute('aria-expanded') === 'true') {
        closeDrawer();
        navToggle.focus();
      }
    });

    // Active section tracking
    const sections = document.querySelectorAll('.section[id]');
    const navLinksDesktop = document.querySelectorAll('.nav-links a[data-section]');
    const navLinksMobile = document.querySelectorAll('.nav-drawer a[data-section]');
    
    function updateActiveSection() {
      const navHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--nav-height')) || 72;
      const scrollPos = window.scrollY + navHeight + 40;
      
      let currentSection = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.offsetHeight;
        if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
          currentSection = section.getAttribute('id');
        }
      });
      
      [...navLinksDesktop, ...navLinksMobile].forEach(link => {
        link.classList.remove('active');
        if (link.dataset.section === currentSection) {
          link.classList.add('active');
        }
      });
    }
    
    let scrollTick = false;
    window.addEventListener('scroll', () => {
      if (!scrollTick) {
        requestAnimationFrame(() => { updateActiveSection(); scrollTick = false; });
        scrollTick = true;
      }
    }, { passive: true });
    updateActiveSection();

    // Reveal animations on scroll
    const revealElements = document.querySelectorAll('.reveal');
    
    function checkReveal() {
      const windowHeight = window.innerHeight;
      const revealPoint = 120;
      
      revealElements.forEach(el => {
        const elementTop = el.getBoundingClientRect().top;
        if (elementTop < windowHeight - revealPoint) {
          el.classList.add('active');
        }
      });
    }
    
    window.addEventListener('scroll', checkReveal, { passive: true });
    window.addEventListener('load', checkReveal);
    checkReveal();

    // Download Modal
    let currentPdfPath = '';
    const downloadModal = document.getElementById('downloadModal');
    const downloadModalTitle = document.getElementById('downloadModalTitle');
    const documentNameInput = document.getElementById('documentName');
    
    function openDownloadModal(pdfPath, docName) {
      currentPdfPath = pdfPath;
      downloadModalTitle.textContent = 'Download ' + docName;
      documentNameInput.value = docName;
      downloadModal.classList.add('open');
      downloadModal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }
    
    function closeDownloadModal() {
      downloadModal.classList.remove('open');
      downloadModal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }
    
    downloadModal.addEventListener('click', (e) => {
      if (e.target === downloadModal) closeDownloadModal();
    });
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && downloadModal.classList.contains('open')) closeDownloadModal();
    })
    
    function handleDownloadSubmit(e) {
      e.preventDefault();
      const form = e.target;
      
      const data = {
        email: document.getElementById('download-email').value,
        organization: document.getElementById('download-org').value || 'Not provided',
        role: document.getElementById('download-role').value || 'Not provided',
        document: document.getElementById('documentName').value
      };
      
      fetch('https://api.sentinelauthority.org/api/applications/document-download', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .finally(() => {
        closeDownloadModal();
        window.open(currentPdfPath, '_blank');
        form.reset();
      });
    }
  </script>

  <script>
    // Verify widget mode switching
    function setVerifyMode(mode) {
      document.getElementById('verify-mode').style.display = mode === 'verify' ? '' : 'none';
      document.getElementById('search-mode').style.display = mode === 'search' ? '' : 'none';
      document.getElementById('verify-result').innerHTML = '';
      ['tab-verify','tab-search'].forEach(function(id) {
        var el = document.getElementById(id);
        if (!el) return;
        var active = id === 'tab-' + mode;
        el.style.color = active ? 'rgba(60,48,100,1.00)' : 'rgba(0,0,0,0.45)';
        el.style.borderBottomColor = active ? 'rgba(60,48,100,1.00)' : 'transparent';
      });
      document.getElementById('verify-mode').style.display = mode === 'verify' ? '' : 'none';
      document.getElementById('search-mode').style.display = mode === 'search' ? '' : 'none';
      document.getElementById('verify-result').innerHTML = '';
      ['tab-verify','tab-search'].forEach(function(id) {
        var el = document.getElementById(id);
        if (!el) return;
        var active = id === 'tab-' + mode;
        el.style.color = active ? 'rgba(60,48,100,1.00)' : 'rgba(0,0,0,0.45)';
        el.style.borderBottomColor = active ? 'rgba(60,48,100,1.00)' : 'transparent';
      });
      document.getElementById('verify-mode').style.display = mode === 'verify' ? '' : 'none';
      document.getElementById('search-mode').style.display = mode === 'search' ? '' : 'none';
      document.getElementById('verify-result').innerHTML = '';
      ['tab-verify','tab-search'].forEach(function(id) {
        var el = document.getElementById(id);
        if (!el) return;
        var active = id === 'tab-' + mode;
        el.style.color = active ? 'rgba(60,48,100,1.00)' : 'rgba(0,0,0,0.45)';
        el.style.borderBottomColor = active ? 'rgba(60,48,100,1.00)' : 'transparent';
      });
      document.getElementById('verify-mode').style.display = mode === 'verify' ? '' : 'none';
      document.getElementById('search-mode').style.display = mode === 'search' ? '' : 'none';
      document.getElementById('status-mode').style.display = mode === 'status' ? '' : 'none';
      document.getElementById('verify-result').innerHTML = '';
      ['tab-verify','tab-search','tab-status'].forEach(function(id) {
        var el = document.getElementById(id);
        if (!el) return;
        var active = id === 'tab-' + mode;
        el.style.color = active ? 'rgba(60,48,100,1.00)' : 'rgba(0,0,0,0.45)';
        el.style.borderBottomColor = active ? 'rgba(60,48,100,1.00)' : 'transparent';
      });
      document.getElementById('verify-mode').style.display = mode === 'verify' ? '' : 'none';
      document.getElementById('search-mode').style.display = mode === 'search' ? '' : 'none';
      document.getElementById('status-mode').style.display = mode === 'status' ? '' : 'none';
      document.getElementById('verify-result').innerHTML = '';
      ['tab-verify','tab-search','tab-status'].forEach(function(id) {
        var el = document.getElementById(id);
        if (!el) return;
        var active = id === 'tab-' + mode;
        el.style.color = active ? 'rgba(60,48,100,1.00)' : 'rgba(0,0,0,0.45)';
        el.style.borderBottomColor = active ? 'rgba(60,48,100,1.00)' : 'transparent';
      });
      document.getElementById('verify-mode').style.display = mode === 'verify' ? '' : 'none';
      document.getElementById('search-mode').style.display = mode === 'search' ? '' : 'none';
      document.getElementById('status-mode').style.display = mode === 'status' ? '' : 'none';
      document.getElementById('verify-result').innerHTML = '';
      ['tab-verify','tab-search','tab-status'].forEach(function(id) {
        var el = document.getElementById(id);
        var active = id === 'tab-' + mode;
        el.style.color = active ? 'rgba(60,48,100,1.00)' : 'rgba(0,0,0,0.45)';
        el.style.borderBottomColor = active ? 'rgba(60,48,100,1.00)' : 'transparent';
      });
      document.getElementById('verify-mode').style.display = mode === 'verify' ? '' : 'none';
      document.getElementById('search-mode').style.display = mode === 'search' ? '' : 'none';
      document.getElementById('status-mode').style.display = mode === 'status' ? '' : 'none';
      document.getElementById('verify-result').innerHTML = '';
      ['tab-verify','tab-search','tab-status'].forEach(function(id) {
        var el = document.getElementById(id);
        var active = id === 'tab-' + mode;
        el.style.color = active ? 'rgba(60,48,100,1.00)' : 'rgba(0,0,0,0.45)';
        el.style.borderBottomColor = active ? 'rgba(60,48,100,1.00)' : 'transparent';
      });
      const verifyMode = document.getElementById("verify-mode");
      const searchMode = document.getElementById("search-mode");
      const tabVerify = document.getElementById("tab-verify");
      const tabSearch = document.getElementById("tab-search");
      const resultDiv = document.getElementById("verify-result");
      if (resultDiv) resultDiv.innerHTML = "";
      
      if (mode === "verify") {
        if (verifyMode) verifyMode.style.display = "block";
        if (searchMode) searchMode.style.display = "none";
        if (tabVerify) { tabVerify.style.background = "var(--purple-primary)"; tabVerify.style.color = "#fff"; }
        if (tabSearch) { tabSearch.style.background = "rgba(0,0,0,0.08)"; tabSearch.style.color = "var(--text-tertiary)"; }
      } else {
        if (verifyMode) verifyMode.style.display = "none";
        if (searchMode) searchMode.style.display = "block";
        if (tabSearch) { tabSearch.style.background = "var(--purple-primary)"; tabSearch.style.color = "#fff"; }
        if (tabVerify) { tabVerify.style.background = "rgba(0,0,0,0.08)"; tabVerify.style.color = "var(--text-tertiary)"; }
      }
    }
    
    async function searchRegistry() {
      const input = document.getElementById("search-input");
      const btn = document.getElementById("search-btn");
      const resultDiv = document.getElementById("verify-result");
      const query = input ? input.value.trim() : "";
      if (!query) { if (input) input.focus(); return; }
      if (btn) btn.textContent = "Searching...";
      if (resultDiv) resultDiv.innerHTML = "";
      try {
        const response = await fetch("https://api.sentinelauthority.org/api/registry/search?q=" + encodeURIComponent(query));
        if (response.ok) {
          const data = await response.json();
          if (data.total === 0 || data.results.length === 0) {
            if (resultDiv) resultDiv.innerHTML = '<div style="text-align:center;padding:20px;color:var(--text-tertiary);">No certificates found for that search</div>';
          } else {
            showSearchResults(data.results, data.total);
          }
        } else {
          if (resultDiv) resultDiv.innerHTML = '<div style="text-align:center;padding:20px;color:#b84444;">Unable to connect to registry</div>';
        }
      } catch (e) {
        if (resultDiv) resultDiv.innerHTML = '<div style="text-align:center;padding:20px;color:#b84444;">Unable to connect to registry</div>';
      }
      if (btn) btn.textContent = "Search";
    }
    
    function showSearchResults(results, total) {
      const resultDiv = document.getElementById("verify-result");
      let html = '<div style="font-size:12px;color:var(--text-tertiary);margin-bottom:12px;">' + results.length + ' certificate(s) found</div>';
      results.forEach(function(cert) {
        html += '<div onclick="selectCertificate(\'' + cert.certificate_number + '\')" style="background:rgba(0,0,0,0.04);border:1px solid rgba(0,0,0,0.12);border-radius:10px;padding:14px 18px;margin-bottom:8px;cursor:pointer;">' +
          '<div style="display:flex;justify-content:space-between;align-items:center;">' +
          '<div><div style="color:var(--text-primary);font-weight:500;">' + cert.organization_name + '</div>' +
          '<div style="color:var(--text-tertiary);font-size:12px;">' + cert.system_name + '</div></div>' +
          '<div style="text-align:right;"><div style="color:#5a4a8a;font-family:var(--mono);font-size:11px;">' + cert.certificate_number + '</div>' +
          '<div style="color:#1d8a47;font-size:10px;text-transform:uppercase;">' + cert.state + '</div></div></div></div>';
      });
      if (resultDiv) resultDiv.innerHTML = html;
    }
    
    function selectCertificate(certNumber) {
      var input = document.getElementById("cert-input");
      if (input) input.value = certNumber;
      setVerifyMode("verify");
      verifyCertificate();
    }

    document.getElementById("cert-input")?.addEventListener("keypress", function(e) { if (e.key === "Enter") verifyCertificate(); });
    document.getElementById("search-input")?.addEventListener("keypress", function(e) { if (e.key === "Enter") searchRegistry(); });
    
    async function verifyCertificate() {
      const input = document.getElementById("cert-input");
      const btn = document.getElementById("verify-btn");
      const resultDiv = document.getElementById("verify-result");
      const certNumber = input ? input.value.trim() : "";
      if (!certNumber) { if (input) input.focus(); return; }
      if (btn) btn.textContent = "Verifying...";
      if (resultDiv) resultDiv.innerHTML = "";
      try {
        const response = await fetch("https://api.sentinelauthority.org/api/verify/" + encodeURIComponent(certNumber));
        if (response.ok) {
          const data = await response.json();
          if (data.status === "NOT_FOUND" || data.valid === false) { showVerifyError("Certificate not found"); }
          else { showVerifySuccess(data); }
        } else { showVerifyError("Certificate not found"); }
      } catch (e) { showVerifyError("Unable to connect to registry"); }
      if (btn) btn.textContent = "Verify";
    }
    
    function showVerifySuccess(data) {
      const resultDiv = document.getElementById("verify-result");
      const expiresDate = data.expires_at ? new Date(data.expires_at).toLocaleDateString("en-US", {year:"numeric",month:"short",day:"numeric"}) : "—";
      if (resultDiv) resultDiv.innerHTML = '<div style="background:rgba(22,120,58,0.20);border:1px solid rgba(22,120,58,0.75);border-radius:12px;padding:20px;">' +
        '<div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">' +
        '<div style="width:32px;height:32px;border-radius:50%;background:rgba(22,120,58,0.50);display:flex;align-items:center;justify-content:center;color:#1d8a47;font-size:18px;">✓</div>' +
        '<span style="color:#1d8a47;font-family:var(--mono);font-size:12px;letter-spacing:1px;">VALID CERTIFICATE</span></div>' +
        '<div style="display:grid;gap:10px;">' +
        '<div style="display:flex;justify-content:space-between;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,0.09);"><span style="color:var(--text-tertiary);font-size:12px;">Organization</span><span style="color:var(--text-primary);font-size:13px;font-weight:500;">' + (data.organization_name||"—") + '</span></div>' +
        '<div style="display:flex;justify-content:space-between;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,0.09);"><span style="color:var(--text-tertiary);font-size:12px;">System</span><span style="color:var(--text-primary);font-size:13px;">' + (data.system_name||"—") + '</span></div>' +
        '<div style="display:flex;justify-content:space-between;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,0.09);"><span style="color:var(--text-tertiary);font-size:12px;">Certificate</span><span style="color:#5a4a8a;font-family:var(--mono);font-size:12px;">' + (data.certificate_number||"—") + '</span></div>' +
        '<div style="display:flex;justify-content:space-between;"><span style="color:var(--text-tertiary);font-size:12px;">Valid Until</span><span style="color:var(--text-primary);font-size:13px;">' + expiresDate + '</span></div></div></div>';
    }
    
    function showVerifyError(message) {
      const resultDiv = document.getElementById("verify-result");
      if (resultDiv) resultDiv.innerHTML = '<div style="background:rgba(160,50,50,0.16);border:1px solid rgba(160,50,50,0.60);border-radius:12px;padding:20px;text-align:center;">' +
        '<div style="width:32px;height:32px;border-radius:50%;background:rgba(160,50,50,0.40);display:flex;align-items:center;justify-content:center;color:#b84444;font-size:18px;margin:0 auto 12px;">✗</div>' +
        '<div style="color:#b84444;font-family:var(--mono);font-size:11px;letter-spacing:1px;margin-bottom:8px;">NOT FOUND</div>' +
        '<div style="color:var(--text-tertiary);font-size:13px;">' + message + '</div></div>';
    }
  </script>

    <!-- QR Scanner Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js" defer></script>
    <script>
      let html5QrcodeScanner = null;
      
      function openScanner() {
        document.getElementById('scanner-modal').style.display = 'flex';
        
        html5QrcodeScanner = new Html5Qrcode("qr-reader");
        html5QrcodeScanner.start(
          { facingMode: "environment" },
          { fps: 10, qrbox: { width: 250, height: 250 } },
          (decodedText) => {
            // Check if it's a URL with hash parameter
            let certId = decodedText;
            if (decodedText.includes('sentinelauthority.org')) {
              const url = new URL(decodedText);
              const hash = url.searchParams.get('hash') || url.searchParams.get('id');
              if (hash) certId = hash;
            }
            
            document.getElementById('cert-input').value = certId;
            closeScanner();
            verifyCertificate();
          },
          (errorMessage) => {
            // Ignore scan errors
          }
        ).catch((err) => {
          console.error("Camera error:", err);
          document.getElementById('qr-reader').innerHTML = '<p style="color: rgba(160,50,50,1.00); padding: 40px;">Camera access denied or unavailable</p>';
        });
      }
      
      function closeScanner() {
        if (html5QrcodeScanner) {
          html5QrcodeScanner.stop().then(() => {
            html5QrcodeScanner.clear();
          }).catch(err => console.log(err));
        }
        document.getElementById('scanner-modal').style.display = 'none';
      }
      
      // Close scanner on Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') closeScanner();
      });
      
      // Handle URL parameters for direct verification links
      document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const hash = urlParams.get('hash') || urlParams.get('id');
        if (hash && window.location.hash === '#verify') {
          document.getElementById('cert-input').value = hash;
          setTimeout(() => verifyCertificate(), 500);
        }
      });
    </script>


    <!-- Easter Egg: 6 clicks in 10 sec for chaos mode with SOS by ABBA -->
    <div id="sos-player" style="position: fixed; top: -9999px; left: -9999px; width: 1px; height: 1px; overflow: hidden; pointer-events: none;"></div>
    <script>
      window._chaos = false; window._chaosEndTime = Date.now();
      (function() {
        var clicks = 0;
        var timer = null;
        var playing = false;
            window._musicPlaying = false;
            window._disco = false;
        var icon = document.getElementById('hero-icon');
        
        function handleTap(e) {
          e.preventDefault();
          e.stopPropagation();
          
          icon.style.transform = 'scale(0.95)';
          setTimeout(function() { icon.style.transform = 'scale(1)'; }, 100);
          
          // If playing, single tap stops
          if (playing) {
            var container = document.getElementById('sos-player');
            container.innerHTML = '';
            playing = false;
            window._musicPlaying = false;
            window._disco = false;
            icon.style.boxShadow = '0 0 20px rgba(60,48,100,0.75)';
            icon.style.background = 'linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)';
            icon.querySelector('div').style.background = 'radial-gradient(circle, #fff 0%, #c4b8e8 100%)';
            clearInterval(window._bombInterval);
            icon.style.animation = 'none';
            
            // Reset particles to center BEFORE turning off chaos
            if (window._hp && window._hp.p) {
              var d = window._hp;
              if (window._origParticleCount) { d.p.length = window._origParticleCount; }
              for (var i = 0; i < d.p.length; i++) {
                var a = Math.random() * Math.PI * 2;
                var dist = Math.random() * d.r * 0.25;
                d.p[i] = {
                  x: d.cx + Math.cos(a) * dist,
                  y: d.cy + Math.sin(a) * dist,
                  vx: (Math.random() - 0.5) * 1.2,
                  vy: (Math.random() - 0.5) * 1.2,
                  radius: Math.random() * 2.5 + 1.5,
                  frozen: false,
                  frozenTime: 0,
                  rogue: false
                };
              }
              window._chaos = false; window._chaosEndTime = Date.now();
            }
            clicks = 0;
            return;
          }
          
          // Count clicks for chaos mode
          clicks++;
          clearTimeout(timer);
          timer = setTimeout(function() { clicks = 0; }, 10000);
          
          if (clicks >= 6) {
            clicks = 0;
            var container = document.getElementById('sos-player');
            container.innerHTML = '<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/cvChjHcABPA?autoplay=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>';
            playing = true;
            window._chaos = false;
            window._musicPlaying = true;
            icon.style.boxShadow = '0 0 60px rgba(60,48,100,1.00), 0 0 100px rgba(22,120,58,1.00)';
            icon.style.animation = 'pulse 1s ease-in-out infinite';
            // At 38 seconds, start bomb flash
            setTimeout(function() {
              if (window._musicPlaying) {
                var icon = document.getElementById('hero-icon');
                var flash = 0;
                window._bombInterval = setInterval(function() {
                  flash++;
                  if (flash % 2 === 0) {
                    icon.style.background = 'linear-gradient(135deg, #ff3333 0%, #ff6666 100%)';
                    icon.style.boxShadow = '0 0 60px rgba(255,50,50,0.9)';
                  } else {
                    icon.style.background = 'linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)';
                    icon.style.boxShadow = '0 0 20px rgba(60,48,100,0.75)';
            icon.style.background = 'linear-gradient(135deg, #5B4B8A 0%, #7B6BAA 100%)';
            icon.querySelector('div').style.background = 'radial-gradient(circle, #fff 0%, #c4b8e8 100%)';
            clearInterval(window._bombInterval);
                  }
                }, 200 - flash * 20);
              }
            }, 38000);
            // At 45 seconds, BOOM - trigger chaos
            setTimeout(function() {
              if (window._musicPlaying) {
                clearInterval(window._bombInterval);
                var icon = document.getElementById('hero-icon');
                // Bright flash
                icon.style.background = '#fff';
                icon.style.boxShadow = '0 0 100px rgba(0,0,0,1.00), 0 0 200px rgba(0,0,0,1.00)';
                // Then go dark
                setTimeout(function() {
                  icon.style.background = 'linear-gradient(135deg, #222 0%, #333 100%)';
                  icon.style.boxShadow = '0 0 10px rgba(0,0,0,0.5)';
                  icon.querySelector('div').style.background = 'radial-gradient(circle, #444 0%, #222 100%)';
                  icon.style.animation = 'none';
                }, 150);
                window._chaos = true;
                window._disco = true;
                
                if (window._hp && window._hp.p) {
                  var d = window._hp;
                  var origLen = d.p.length;
                  // Add 50 more particles for the party
                  for (var i = 0; i < 150; i++) {
                    var a = Math.random() * Math.PI * 2;
                    var spd = 60 + Math.random() * 40;
                    d.p.push({
                      x: d.cx + Math.cos(a) * 20,
                      y: d.cy + Math.sin(a) * 20,
                      vx: Math.cos(a) * spd,
                      vy: Math.sin(a) * spd,
                      radius: Math.random() * 8 + 5,
                      frozen: false,
                      frozenTime: 0,
                      rogue: false
                    });
                  }
                  d.p.forEach(function(x) {
                    x.frozen = false;
                    // Explode outward from center
                    var angle = Math.atan2(x.y - d.cy, x.x - d.cx) || Math.random() * Math.PI * 2;
                    var speed = 60 + Math.random() * 40;
                    x.vx = Math.cos(angle) * speed;
                    x.vy = Math.sin(angle) * speed;
                    x.radius = Math.random() * 8 + 5;
                  });
                  window._origParticleCount = origLen;
                }
              }
            }, 45000);
          }
        }
        
        if (icon) {
          icon.addEventListener('click', handleTap, true);
          icon.addEventListener('touchend', handleTap, true);
          icon.addEventListener('touchstart', function(e) {
            e.preventDefault();
          }, { passive: false, capture: true });
        }
      })();
    </script>


  <script>
    // Performance: pause animations when off-screen
    const animatedSections = document.querySelectorAll('section, .diagram, svg');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.animationPlayState = 'running';
          entry.target.querySelectorAll('*').forEach(el => el.style.animationPlayState = 'running');
        } else {
          entry.target.style.animationPlayState = 'paused';
          entry.target.querySelectorAll('*').forEach(el => el.style.animationPlayState = 'paused');
        }
      });
    }, { threshold: 0.1 });
    animatedSections.forEach(s => observer.observe(s));
  </script>


    <script>
    (function() {
      'use strict';
      function scanInLabel(el) {
        if (el.dataset.scanned) return;
        el.dataset.scanned = '1';
        var text = el.textContent;
        el.textContent = '';
        el.classList.add('scanned');
        var i = 0;
        var iv = setInterval(function() {
          if (i < text.length) { el.textContent += text[i]; i++; }
          else { clearInterval(iv); setTimeout(function() { el.classList.remove('scanned'); }, 1200); }
        }, 35);
      }
      function glowTitle(el) {
        el.classList.add('glow');
        setTimeout(function() { el.classList.remove('glow'); }, 2000);
      }
      function tickUp(el) {
        if (el.dataset.ticked) return;
        el.dataset.ticked = '1';
        var target = parseInt(el.getAttribute('data-tick'), 10);
        var start = performance.now();
        function step(now) {
          var p = Math.min((now - start) / 1200, 1);
          el.textContent = Math.round(target * (1 - (1 - p) * (1 - p)));
          if (p < 1) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      }
      var frames = document.querySelectorAll('.hud-frame');
      for (var fi = 0; fi < frames.length; fi++) {
        var sh = document.createElement('div');
        sh.className = 'hud-shimmer';
        frames[fi].appendChild(sh);
      }
      var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (!entry.isIntersecting) return;
          var el = entry.target;
          if (el.classList.contains('reveal')) el.classList.add('visible');
          var labels = el.querySelectorAll('.section-label');
          for (var i = 0; i < labels.length; i++) scanInLabel(labels[i]);
          var titles = el.querySelectorAll('.section-title');
          for (var i = 0; i < titles.length; i++) glowTitle(titles[i]);
          var ticks = el.querySelectorAll('[data-tick]');
          for (var i = 0; i < ticks.length; i++) tickUp(ticks[i]);
        });
      }, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });
      var targets = document.querySelectorAll('.reveal, .section-head, [data-tick]');
      for (var i = 0; i < targets.length; i++) observer.observe(targets[i]);
      var navBrand = document.querySelector('.brand');
      if (navBrand) {
        var pulse = document.createElement('span');
        pulse.style.cssText = 'display:inline-block;width:4px;height:4px;border-radius:50%;background:rgba(22,120,58,1.00);margin-left:8px;animation:hud-breathe 3s ease-in-out infinite;vertical-align:middle;';
        navBrand.appendChild(pulse);
      }
    })();
    </script>

    <script>
    (function() {
      'use strict';
      if (window.matchMedia('(pointer: fine)').matches) {
        var cursor = document.createElement('div');
        cursor.className = 'sa-cursor';
        document.body.appendChild(cursor);
        var ring = document.createElement('div');
        ring.className = 'sa-ring';
        document.body.appendChild(ring);
        var mx = 0, my = 0, rx = 0, ry = 0;
        document.addEventListener('mousemove', function(e) {
          mx = e.clientX; my = e.clientY;
          cursor.style.left = mx + 'px';
          cursor.style.top = my + 'px';
        });
        function followRing() {
          rx += (mx - rx) * 0.12;
          ry += (my - ry) * 0.12;
          ring.style.left = rx + 'px';
          ring.style.top = ry + 'px';
          requestAnimationFrame(followRing);
        }
        followRing();
        var hovers = 'a, button, [onclick], .btn, .hud-link, .hud-row[style*="cursor"], .nav-links a, .nav-toggle, input, select, textarea';
        document.addEventListener('mouseover', function(e) {
          if (e.target.closest(hovers)) { cursor.classList.add('hovering'); ring.classList.add('hovering'); }
        });
        document.addEventListener('mouseout', function(e) {
          if (e.target.closest(hovers)) { cursor.classList.remove('hovering'); ring.classList.remove('hovering'); }
        });
        document.addEventListener('mousedown', function() { ring.classList.add('clicking'); });
        document.addEventListener('mouseup', function() { ring.classList.remove('clicking'); });
      }
      var btns = document.querySelectorAll('.btn');
      var threshold = 80;
      for (var bi = 0; bi < btns.length; bi++) {
        (function(btn) {
          btn.addEventListener('mousemove', function(e) {
            var r = btn.getBoundingClientRect();
            var cx = r.left + r.width / 2;
            var cy = r.top + r.height / 2;
            var dx = e.clientX - cx;
            var dy = e.clientY - cy;
            var dist = Math.sqrt(dx * dx + dy * dy);
            if (dist < threshold) {
              var pull = (1 - dist / threshold) * 8;
              btn.style.transform = 'translate(' + (dx / dist * pull).toFixed(1) + 'px,' + (dy / dist * pull).toFixed(1) + 'px)';
            }
          });
          btn.addEventListener('mouseleave', function() { btn.style.transform = ''; });
        })(btns[bi]);
      }
      var progressBar = document.createElement('div');
      progressBar.className = 'sa-progress';
      document.body.appendChild(progressBar);
      window.addEventListener('scroll', function() {
        var h = document.documentElement.scrollHeight - window.innerHeight;
        var p = h > 0 ? (window.scrollY / h) * 100 : 0;
        progressBar.style.width = p + '%';
      }, { passive: true });
      var pc = document.createElement('canvas');
      pc.className = 'sa-particles';
      document.body.appendChild(pc);
      var pctx = pc.getContext('2d');
      var particles = [];
      var PCOUNT = 45;
      var pW = 0, pH = 0;
      function pResize() {
        pW = window.innerWidth; pH = window.innerHeight;
        pc.width = pW * (window.devicePixelRatio || 1);
        pc.height = pH * (window.devicePixelRatio || 1);
        pc.style.width = pW + 'px'; pc.style.height = pH + 'px';
        pctx.setTransform(window.devicePixelRatio || 1, 0, 0, window.devicePixelRatio || 1, 0, 0);
      }
      pResize();
      window.addEventListener('resize', pResize);
      for (var pi = 0; pi < PCOUNT; pi++) {
        particles.push({
          x: Math.random() * pW, y: Math.random() * pH,
          vx: (Math.random() - 0.5) * 0.15, vy: (Math.random() - 0.5) * 0.15,
          r: 0.8 + Math.random() * 1.2, a: 0.03 + Math.random() * 0.04,
          phase: Math.random() * Math.PI * 2
        });
      }
      function pDraw() {
        pctx.clearRect(0, 0, pW, pH);
        for (var i = 0; i < particles.length; i++) {
          var p = particles[i];
          p.phase += 0.003;
          p.x += p.vx + Math.sin(p.phase) * 0.02;
          p.y += p.vy + Math.cos(p.phase * 0.7) * 0.02;
          if (p.x < -10) p.x = pW + 10;
          if (p.x > pW + 10) p.x = -10;
          if (p.y < -10) p.y = pH + 10;
          if (p.y > pH + 10) p.y = -10;
          pctx.beginPath();
          pctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          pctx.fillStyle = 'rgba(157,140,207,' + p.a + ')';
          pctx.fill();
          for (var j = i + 1; j < particles.length; j++) {
            var q = particles[j];
            var dx = p.x - q.x, dy = p.y - q.y;
            var d = dx * dx + dy * dy;
            if (d < 18000) {
              pctx.beginPath();
              pctx.moveTo(p.x, p.y);
              pctx.lineTo(q.x, q.y);
              pctx.strokeStyle = 'rgba(157,140,207,' + (0.02 * (1 - d / 18000)).toFixed(4) + ')';
              pctx.lineWidth = 0.5;
              pctx.stroke();
            }
          }
        }
        requestAnimationFrame(pDraw);
      }
      pDraw();
      var noise = document.createElement('div');
      noise.className = 'sa-noise';
      document.body.appendChild(noise);
      var vignette = document.createElement('div');
      vignette.className = 'sa-vignette';
      document.body.appendChild(vignette);

      document.querySelectorAll('a[href^="#"]').forEach(function(a) {
        a.addEventListener('click', function(e) {
          var target = document.querySelector(this.getAttribute('href'));
          if (target) {
            e.preventDefault();
            var navH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--nav-height')) || 64;
            var top = target.getBoundingClientRect().top + window.scrollY - navH;
            window.scrollTo({ top: top, behavior: 'smooth' });
          }
        });
      });
    })();
    </script>
  <script src="mobile-canvas.js"></script>
</body>
</html>
