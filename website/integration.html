<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENVELO Integration Guide — Sentinel Authority</title>
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
    <style>
        :root { --bg: #0d0d12; --surface: #14141c; --border: rgba(255,255,255,0.06); --text: #e8e4df; --muted: #9a958e; --accent: #D6A05C; --purple: #5B4B8A; --code-bg: #1a1a24; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg); color: var(--text); line-height: 1.7; }
        .hero { background: linear-gradient(135deg, var(--purple) 0%, #3a2d5e 100%); padding: 60px 20px; text-align: center; }
        .hero h1 { font-family: 'Cormorant Garamond', serif; font-weight: 300; font-size: 2.4rem; color: white; }
        .hero p { color: rgba(255,255,255,0.7); margin-top: 8px; font-size: 1.1rem; }
        .container { max-width: 900px; margin: 0 auto; padding: 40px 20px; }
        h2 { font-family: 'Cormorant Garamond', serif; font-weight: 300; font-size: 1.8rem; color: var(--accent); margin: 40px 0 16px; border-bottom: 1px solid var(--border); padding-bottom: 8px; }
        h3 { color: var(--text); font-size: 1.1rem; margin: 24px 0 8px; font-weight: 500; }
        p, li { color: var(--muted); margin-bottom: 12px; }
        code { background: var(--code-bg); color: var(--accent); padding: 2px 6px; border-radius: 3px; font-size: 0.9em; }
        pre { background: var(--code-bg); border: 1px solid var(--border); border-radius: 8px; padding: 20px; overflow-x: auto; margin: 16px 0; }
        pre code { background: none; padding: 0; color: var(--text); }
        .method { display: inline-block; padding: 2px 8px; border-radius: 3px; font-weight: 600; font-size: 0.8rem; margin-right: 8px; }
        .post { background: #2d4a2d; color: #6abf6a; }
        .get { background: #2d3a4a; color: #6a9fbf; }
        .endpoint { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin: 16px 0; }
        .endpoint .path { font-family: monospace; color: var(--text); font-size: 1rem; }
        .param-table { width: 100%; border-collapse: collapse; margin: 12px 0; }
        .param-table th { text-align: left; color: var(--muted); font-weight: 500; font-size: 0.85rem; padding: 8px; border-bottom: 1px solid var(--border); }
        .param-table td { padding: 8px; border-bottom: 1px solid var(--border); color: var(--muted); font-size: 0.9rem; }
        .param-table td:first-child { color: var(--text); font-family: monospace; }
        .step { display: flex; gap: 16px; margin: 20px 0; }
        .step-num { flex-shrink: 0; width: 32px; height: 32px; background: var(--purple); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.9rem; }
        .step-content { flex: 1; }
        .note { background: rgba(91,75,138,0.1); border-left: 3px solid var(--purple); padding: 16px; border-radius: 0 8px 8px 0; margin: 16px 0; }
        a { color: var(--accent); text-decoration: none; }
        a:hover { text-decoration: underline; }
        .nav { background: var(--surface); border-bottom: 1px solid var(--border); padding: 12px 20px; display: flex; align-items: center; gap: 12px; }
        .nav a { color: var(--muted); font-size: 0.9rem; }
        .nav a:hover { color: var(--text); }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="nav">
        <a href="/">← Home</a>
        <a href="/research.html">Research</a>
        <a href="/conformance.html">Conformance</a>
        <a href="/integration.html" style="color: var(--accent);">Integration Guide</a>
    </nav>

    <div class="hero">
        <h1>ENVELO Integration Guide</h1>
        <p>Connect your autonomous system to Sentinel Authority in under 30 minutes</p>
    </div>

    <div class="container">

        <h2>Quick Start</h2>

        <div class="step">
            <div class="step-num">1</div>
            <div class="step-content">
                <h3>Get Your API Key</h3>
                <p>Upon application approval, your API key is emailed automatically with setup instructions. You can also generate keys from the <a href="https://app.sentinelauthority.org">dashboard</a> under API Keys.</p>
            </div>
        </div>

        <div class="step">
            <div class="step-num">2</div>
            <div class="step-content">
                <h3>Register a Session</h3>
                <p>Before your agent begins operating, register a session to begin boundary monitoring.</p>
            </div>
        </div>

        <div class="step">
            <div class="step-num">3</div>
            <div class="step-content">
                <h3>Stream Telemetry</h3>
                <p>Send telemetry data at regular intervals. The ENVELO Interlock validates each reading against your certified envelope.</p>
            </div>
        </div>

        <div class="step">
            <div class="step-num">4</div>
            <div class="step-content">
                <h3>Send Heartbeats</h3>
                <p>Lightweight pings confirm your agent is alive. Missing heartbeats trigger offline alerts.</p>
            </div>
        </div>

        <h2>Authentication</h2>
        <p>All API requests require a Bearer token in the Authorization header:</p>
        <pre><code>Authorization: Bearer sa_live_your_api_key_here</code></pre>

        <h2>Base URL</h2>
        <pre><code>https://sentinel-authority-production.up.railway.app/api</code></pre>

        <h2>Endpoints</h2>

        <div class="endpoint">
            <span class="method post">POST</span>
            <span class="path">/envelo/sessions</span>
            <p style="margin-top:8px;">Register a new agent session. Call this when your agent starts operating.</p>
            <h3>Request Body</h3>
            <table class="param-table">
                <tr><th>Field</th><th>Type</th><th>Description</th></tr>
                <tr><td>session_id</td><td>string</td><td>Unique identifier for this operating session</td></tr>
                <tr><td>system_name</td><td>string</td><td>Name of the autonomous system</td></tr>
                <tr><td>system_version</td><td>string</td><td>Software version identifier</td></tr>
                <tr><td>envelope_id</td><td>string</td><td>Optional — specific envelope definition to enforce</td></tr>
            </table>
            <h3>Example</h3>
            <pre><code>curl -X POST https://sentinel-authority-production.up.railway.app/api/envelo/sessions \
  -H "Authorization: Bearer sa_live_your_key" \
  -H "Content-Type: application/json" \
  -d '{
    "session_id": "nav-agent-001-20260227",
    "system_name": "NavBot v3",
    "system_version": "3.1.0"
  }'</code></pre>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <span class="path">/envelo/telemetry</span>
            <p style="margin-top:8px;">Submit telemetry readings. Each reading is validated against the certified ENVELO envelope. Violations are logged and may trigger enforcement actions.</p>
            <h3>Request Body</h3>
            <table class="param-table">
                <tr><th>Field</th><th>Type</th><th>Description</th></tr>
                <tr><td>session_id</td><td>string</td><td>Active session identifier</td></tr>
                <tr><td>readings</td><td>array</td><td>Array of telemetry data points</td></tr>
                <tr><td>readings[].parameter</td><td>string</td><td>Parameter name (e.g. "speed", "temperature")</td></tr>
                <tr><td>readings[].value</td><td>number</td><td>Current value</td></tr>
                <tr><td>readings[].timestamp</td><td>string</td><td>ISO 8601 timestamp</td></tr>
            </table>
            <h3>Example</h3>
            <pre><code>curl -X POST https://sentinel-authority-production.up.railway.app/api/envelo/telemetry \
  -H "Authorization: Bearer sa_live_your_key" \
  -H "Content-Type: application/json" \
  -d '{
    "session_id": "nav-agent-001-20260227",
    "readings": [
      {"parameter": "speed", "value": 12.5, "timestamp": "2026-02-27T14:30:00Z"},
      {"parameter": "temperature", "value": 28.3, "timestamp": "2026-02-27T14:30:00Z"},
      {"parameter": "battery", "value": 87, "timestamp": "2026-02-27T14:30:00Z"}
    ]
  }'</code></pre>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <span class="path">/envelo/heartbeat</span>
            <p style="margin-top:8px;">Lightweight ping to confirm the agent is alive. Send every 30 seconds. Missing heartbeats for 5+ minutes trigger offline alerts to the certificate holder and Sentinel Authority operators.</p>
            <h3>Example</h3>
            <pre><code>curl -X POST https://sentinel-authority-production.up.railway.app/api/envelo/heartbeat \
  -H "Authorization: Bearer sa_live_your_key"</code></pre>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <span class="path">/envelo/sessions/{session_id}/end</span>
            <p style="margin-top:8px;">Gracefully end an agent session. Call this when your agent stops operating.</p>
            <h3>Example</h3>
            <pre><code>curl -X POST https://sentinel-authority-production.up.railway.app/api/envelo/sessions/nav-agent-001-20260227/end \
  -H "Authorization: Bearer sa_live_your_key"</code></pre>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <span class="path">/envelo/sessions</span>
            <p style="margin-top:8px;">List all sessions for your API key. Includes status, last heartbeat time, and violation counts.</p>
            <h3>Example</h3>
            <pre><code>curl https://sentinel-authority-production.up.railway.app/api/envelo/sessions \
  -H "Authorization: Bearer sa_live_your_key"</code></pre>
        </div>

        <h2>Violation Responses</h2>
        <p>When a telemetry reading exceeds the certified ENVELO envelope boundaries, the API returns a violation notice within the response body. Violation types include:</p>
        <table class="param-table">
            <tr><th>Type</th><th>Description</th><th>Action</th></tr>
            <tr><td>boundary_exceeded</td><td>A parameter exceeded its defined safe range</td><td>Logged, counted toward block threshold</td></tr>
            <tr><td>rate_violation</td><td>Parameter changed faster than the permitted rate</td><td>Logged, immediate alert</td></tr>
            <tr><td>geo_violation</td><td>Agent operating outside permitted geographic boundary</td><td>Logged, immediate alert</td></tr>
        </table>

        <div class="note">
            <strong>Enforcement:</strong> If violation rates exceed safety thresholds, Sentinel Authority's surveillance engine may automatically suspend the certificate. The certificate holder and admin team are notified immediately via email.
        </div>

        <h2>Response Codes</h2>
        <table class="param-table">
            <tr><th>Code</th><th>Meaning</th></tr>
            <tr><td>200</td><td>Success</td></tr>
            <tr><td>401</td><td>Invalid or missing API key</td></tr>
            <tr><td>403</td><td>API key does not have required scope</td></tr>
            <tr><td>404</td><td>Session or resource not found</td></tr>
            <tr><td>429</td><td>Rate limit exceeded</td></tr>
            <tr><td>500</td><td>Internal server error</td></tr>
        </table>

        <h2>Python SDK Example</h2>
        <pre><code>import httpx
import time

API_KEY = "sa_live_your_key"
BASE = "https://sentinel-authority-production.up.railway.app/api"
HEADERS = {"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"}

# 1. Start session
httpx.post(f"{BASE}/envelo/sessions", headers=HEADERS, json={
    "session_id": "my-agent-001",
    "system_name": "MyBot",
    "system_version": "1.0.0"
})

# 2. Send telemetry in your main loop
while running:
    httpx.post(f"{BASE}/envelo/telemetry", headers=HEADERS, json={
        "session_id": "my-agent-001",
        "readings": [
            {"parameter": "speed", "value": get_speed(), "timestamp": now()},
            {"parameter": "battery", "value": get_battery(), "timestamp": now()}
        ]
    })
    time.sleep(10)

# 3. Heartbeat every 30s (run in a separate thread)
while running:
    httpx.post(f"{BASE}/envelo/heartbeat", headers=HEADERS)
    time.sleep(30)

# 4. End session on shutdown
httpx.post(f"{BASE}/envelo/sessions/my-agent-001/end", headers=HEADERS)</code></pre>

        <h2>Need Help?</h2>
        <p>Contact <a href="mailto:info@sentinelauthority.org">info@sentinelauthority.org</a> for integration support or visit the <a href="https://app.sentinelauthority.org">dashboard</a> for real-time monitoring.</p>

    </div>
</body>
</html>